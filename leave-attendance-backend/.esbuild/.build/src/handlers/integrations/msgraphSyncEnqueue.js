"use strict";var wz=Object.create;var al=Object.defineProperty;var bz=Object.getOwnPropertyDescriptor;var vz=Object.getOwnPropertyNames;var xz=Object.getPrototypeOf,Cz=Object.prototype.hasOwnProperty;var S=(e,t)=>()=>(e&&(t=e(e=0)),t);var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ct=(e,t)=>{for(var r in t)al(e,r,{get:t[r],enumerable:!0})},CC=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of vz(t))!Cz.call(e,n)&&n!==r&&al(e,n,{get:()=>t[n],enumerable:!(s=bz(t,n))||s.enumerable});return e};var y=(e,t,r)=>(r=e!=null?wz(xz(e)):{},CC(t||!e||!e.__esModule?al(r,"default",{value:e,enumerable:!0}):r,e)),Q=e=>CC(al({},"__esModule",{value:!0}),e);var bn=b(ke=>{"use strict";ke.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ke.HttpAuthLocation||(ke.HttpAuthLocation={}));ke.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ke.HttpApiKeyAuthLocation||(ke.HttpApiKeyAuthLocation={}));ke.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(ke.EndpointURLScheme||(ke.EndpointURLScheme={}));ke.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(ke.AlgorithmId||(ke.AlgorithmId={}));var L4=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>ke.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>ke.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},q4=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},F4=e=>L4(e),$4=e=>q4(e);ke.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(ke.FieldPosition||(ke.FieldPosition={}));var U4="__smithy_context";ke.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(ke.IniSectionType||(ke.IniSectionType={}));ke.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ke.RequestHandlerProtocol||(ke.RequestHandlerProtocol={}));ke.SMITHY_CONTEXT_KEY=U4;ke.getDefaultClientConfiguration=F4;ke.resolveDefaultRuntimeConfig=$4});var ye=b(vn=>{"use strict";var j4=bn(),B4=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),H4=e=>({httpHandler:e.httpHandler()}),Dy=class{name;kind;values;constructor({name:t,kind:r=j4.FieldPosition.HEADER,values:s=[]}){this.name=t,this.kind=r,this.values=s}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},My=class{entries={};encoding;constructor({fields:t=[],encoding:r="utf-8"}){t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},Ly=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=z4(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function z4(e){return Object.keys(e).reduce((t,r)=>{let s=e[r];return{...t,[r]:Array.isArray(s)?[...s]:s}},{})}var qy=class{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function V4(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}vn.Field=Dy;vn.Fields=My;vn.HttpRequest=Ly;vn.HttpResponse=qy;vn.getHttpHandlerExtensionConfiguration=B4;vn.isValidHostname=V4;vn.resolveHttpHandlerRuntimeConfig=H4});var Ms=b(Cc=>{"use strict";var G4=ye();function W4(e){return e}var FC=e=>t=>async r=>{if(!G4.HttpRequest.isInstance(r.request))return t(r);let{request:s}=r,{handlerProtocol:n=""}=e.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let o=s.hostname;s.port!=null&&(o+=`:${s.port}`),s.headers.host=o}return t(r)},$C={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Q4=e=>({applyToStack:t=>{t.add(FC(e),$C)}});Cc.getHostHeaderPlugin=Q4;Cc.hostHeaderMiddleware=FC;Cc.hostHeaderMiddlewareOptions=$C;Cc.resolveHostHeaderConfig=W4});var Ls=b(hl=>{"use strict";var UC=()=>(e,t)=>async r=>{try{let s=await e(r),{clientName:n,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=a,u=c??t.inputFilterSensitiveLog,l=d??t.outputFilterSensitiveLog,{$metadata:h,...m}=s.output;return i?.info?.({clientName:n,commandName:o,input:u(r.input),output:l(m),metadata:h}),s}catch(s){let{clientName:n,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,d=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:n,commandName:o,input:d(r.input),error:s,metadata:s.$metadata}),s}},jC={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},K4=e=>({applyToStack:t=>{t.add(UC(),jC)}});hl.getLoggerPlugin=K4;hl.loggerMiddleware=UC;hl.loggerMiddlewareOptions=jC});var HC={};ct(HC,{InvokeStore:()=>Y4});var BC,Fy,J4,$y,gl,Y4,zC=S(()=>{BC=require("async_hooks"),Fy=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";Fy||(globalThis.awslambda=globalThis.awslambda||{});J4={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol("_AWS_LAMBDA_TENANT_ID")},$y=class{static storage=new BC.AsyncLocalStorage;static PROTECTED_KEYS=J4;static run(t,r){return this.storage.run({...t},r)}static getContext(){return this.storage.getStore()}static get(t){return this.storage.getStore()?.[t]}static set(t,r){if(this.isProtectedKey(t))throw new Error("Cannot modify protected Lambda context field");let s=this.storage.getStore();s&&(s[t]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static getTenantId(){return this.get(this.PROTECTED_KEYS.TENANT_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(t){return t===this.PROTECTED_KEYS.REQUEST_ID||t===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};!Fy&&globalThis.awslambda?.InvokeStore?gl=globalThis.awslambda.InvokeStore:(gl=$y,!Fy&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=gl));Y4=gl});var VC=b(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.recursionDetectionMiddleware=void 0;var X4=(zC(),Q(HC)),Z4=ye(),Uy="X-Amzn-Trace-Id",eV="AWS_LAMBDA_FUNCTION_NAME",tV="_X_AMZN_TRACE_ID",rV=()=>e=>async t=>{let{request:r}=t;if(!Z4.HttpRequest.isInstance(r))return e(t);let s=Object.keys(r.headers??{}).find(d=>d.toLowerCase()===Uy.toLowerCase())??Uy;if(r.headers.hasOwnProperty(s))return e(t);let n=process.env[eV],o=process.env[tV],a=X4.InvokeStore.getXRayTraceId()??o,c=d=>typeof d=="string"&&d.length>0;return c(n)&&c(a)&&(r.headers[Uy]=a),e({...t,request:r})};yl.recursionDetectionMiddleware=rV});var qs=b(Sl=>{"use strict";var jy=VC(),sV={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},nV=e=>({applyToStack:t=>{t.add(jy.recursionDetectionMiddleware(),sV)}});Sl.getRecursionDetectionPlugin=nV;Object.keys(jy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Sl,e)&&Object.defineProperty(Sl,e,{enumerable:!0,get:function(){return jy[e]}})})});var By,oV,GC=S(()=>{By=y(bn()),oV=e=>e[By.SMITHY_CONTEXT_KEY]||(e[By.SMITHY_CONTEXT_KEY]={})});var mt=b(Hy=>{"use strict";var WC=bn(),iV=e=>e[WC.SMITHY_CONTEXT_KEY]||(e[WC.SMITHY_CONTEXT_KEY]={}),aV=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};Hy.getSmithyContext=iV;Hy.normalizeProvider=aV});var QC,KC=S(()=>{QC=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let s of t)for(let n of e)n.schemeId.split("#")[1]===s&&r.push(n);for(let s of e)r.find(({schemeId:n})=>n===s.schemeId)||r.push(s);return r}});function cV(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var JC,Rc,_l=S(()=>{JC=y(mt());KC();Rc=(e,t)=>(r,s)=>async n=>{let o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,s,n.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=QC(o,i),c=cV(e.httpAuthSchemes),d=(0,JC.getSmithyContext)(s),u=[];for(let l of a){let h=c.get(l.schemeId);if(!h){u.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}let m=h.identityProvider(await t.identityProviderConfigProvider(e));if(!m){u.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:g={},signingProperties:w={}}=l.propertiesExtractor?.(e,s)||{};l.identityProperties=Object.assign(l.identityProperties||{},g),l.signingProperties=Object.assign(l.signingProperties||{},w),d.selectedHttpAuthScheme={httpAuthOption:l,identity:await m(l.identityProperties),signer:h.signer};break}if(!d.selectedHttpAuthScheme)throw new Error(u.join(`
`));return r(n)}});var YC,Fs,XC=S(()=>{_l();YC={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Fs=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(Rc(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),YC)}})});var wr=b(Oi=>{"use strict";var dV=ye(),ZC=(e,t)=>(r,s)=>async n=>{let{response:o}=await r(n);try{let i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!s.logger||s.logger?.constructor?.name==="NoOpLogger"?console.warn(a):s.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(dV.HttpResponse.isInstance(o)){let{headers:c={}}=o,d=Object.entries(c);i.$metadata={httpStatusCode:o.statusCode,requestId:zy(/^x-[\w-]+-request-?id$/,d),extendedRequestId:zy(/^x-[\w-]+-id-2$/,d),cfId:zy(/^x-[\w-]+-cf-id$/,d)}}}catch{}}throw i}},zy=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],eR=(e,t)=>(r,s)=>async n=>{let o=e,i=s.endpointV2?.url&&o.urlParser?async()=>o.urlParser(s.endpointV2.url):o.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(n.input,{...e,endpoint:i});return r({...n,request:a})},tR={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},rR={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function uV(e,t,r){return{applyToStack:s=>{s.add(ZC(e,r),tR),s.add(eR(e,t),rR)}}}Oi.deserializerMiddleware=ZC;Oi.deserializerMiddlewareOption=tR;Oi.getSerdePlugin=uV;Oi.serializerMiddleware=eR;Oi.serializerMiddlewareOption=rR});var sR,nR,lV,oR=S(()=>{sR=y(wr());_l();nR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:sR.serializerMiddlewareOption.name},lV=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(Rc(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),nR)}})});var iR=S(()=>{_l();XC();oR()});var aR,cR,fV,pV,Vy,Gy=S(()=>{aR=y(ye()),cR=y(mt()),fV=e=>t=>{throw t},pV=(e,t)=>{},Vy=e=>(t,r)=>async s=>{if(!aR.HttpRequest.isInstance(s.request))return t(s);let o=(0,cR.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,d=await t({...s,request:await c.sign(s.request,a,i)}).catch((c.errorHandler||fV)(i));return(c.successHandler||pV)(d.response,i),d}});var dR,$s,uR=S(()=>{Gy();dR={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},$s=e=>({applyToStack:t=>{t.addRelativeTo(Vy(e),dR)}})});var lR=S(()=>{Gy();uR()});var Ut,fR=S(()=>{Ut=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function pR(e,t,r,s,n){return async function*(i,a,...c){let d=a,u=i.startingToken??d[r],l=!0,h;for(;l;){if(d[r]=u,n&&(d[n]=d[n]??i.pageSize),i.client instanceof e)h=await mV(t,i.client,a,i.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield h;let m=u;u=hV(h,s),l=!!(u&&(!i.stopOnSameToken||u!==m))}return void 0}}var mV,hV,mR=S(()=>{mV=async(e,t,r,s=o=>o,...n)=>{let o=new e(r);return o=s(o)??o,await t.send(o,...n)};hV=(e,t)=>{let r=e,s=t.split(".");for(let n of s){if(!r||typeof r!="object")return;r=r[n]}return r}});var Wy=b(hR=>{"use strict";var gV=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";hR.isArrayBuffer=gV});var ki=b(Ky=>{"use strict";var yV=Wy(),Qy=require("buffer"),SV=(e,t=0,r=e.byteLength-t)=>{if(!yV.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Qy.Buffer.from(e,t,r)},_V=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Qy.Buffer.from(e,t):Qy.Buffer.from(e)};Ky.fromArrayBuffer=SV;Ky.fromString=_V});var gR=b(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.fromBase64=void 0;var EV=ki(),wV=/^[A-Za-z0-9+/]*={0,2}$/,bV=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!wV.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,EV.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};El.fromBase64=bV});var qe=b(wl=>{"use strict";var yR=ki(),SR=e=>{let t=yR.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},vV=e=>typeof e=="string"?SR(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),xV=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return yR.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};wl.fromUtf8=SR;wl.toUint8Array=vV;wl.toUtf8=xV});var _R=b(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.toBase64=void 0;var CV=ki(),RV=qe(),TV=e=>{let t;if(typeof e=="string"?t=(0,RV.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,CV.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};bl.toBase64=TV});var Le=b(Tc=>{"use strict";var ER=gR(),wR=_R();Object.keys(ER).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Tc,e)&&Object.defineProperty(Tc,e,{enumerable:!0,get:function(){return ER[e]}})});Object.keys(wR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Tc,e)&&Object.defineProperty(Tc,e,{enumerable:!0,get:function(){return wR[e]}})})});var Yy=b(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.ChecksumStream=void 0;var AV=Le(),IV=require("stream"),Jy=class extends IV.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:t,checksum:r,source:s,checksumSourceLocation:n,base64Encoder:o}){if(super(),typeof s.pipe=="function")this.source=s;else throw new Error(`@smithy/util-stream: unsupported source type ${s?.constructor?.name??s} in ChecksumStream.`);this.base64Encoder=o??AV.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=n,this.source.pipe(this)}_read(t){}_write(t,r,s){try{this.checksum.update(t),this.push(t)}catch(n){return s(n)}return s()}async _final(t){try{let r=await this.checksum.digest(),s=this.base64Encoder(r);if(this.expectedChecksum!==s)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${s}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};vl.ChecksumStream=Jy});var xn=b(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.isBlob=Di.isReadableStream=void 0;var PV=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);Di.isReadableStream=PV;var NV=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);Di.isBlob=NV});var bR=b(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.ChecksumStream=void 0;var OV=typeof ReadableStream=="function"?ReadableStream:function(){},Xy=class extends OV{};xl.ChecksumStream=Xy});var vR=b(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.createChecksumStream=void 0;var kV=Le(),DV=xn(),MV=bR(),LV=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:s,base64Encoder:n})=>{if(!(0,DV.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let o=n??kV.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(c,d){t.update(c),d.enqueue(c)},async flush(c){let d=await t.digest(),u=o(d);if(e!==u){let l=new Error(`Checksum mismatch: expected "${e}" but received "${u}" in response header "${s}".`);c.error(l)}else c.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,MV.ChecksumStream.prototype),a};Cl.createChecksumStream=LV});var xR=b(Zy=>{"use strict";Object.defineProperty(Zy,"__esModule",{value:!0});Zy.createChecksumStream=UV;var qV=xn(),FV=Yy(),$V=vR();function UV(e){return typeof ReadableStream=="function"&&(0,qV.isReadableStream)(e.source)?(0,$V.createChecksumStream)(e):new FV.ChecksumStream(e)}});var tS=b(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.ByteArrayCollector=void 0;var eS=class{allocByteArray;byteLength=0;byteArrays=[];constructor(t){this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let s=this.byteArrays[0];return this.reset(),s}let t=this.allocByteArray(this.byteLength),r=0;for(let s=0;s<this.byteArrays.length;++s){let n=this.byteArrays[s];t.set(n,r),r+=n.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};Rl.ByteArrayCollector=eS});var AR=b(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.createBufferedReadable=void 0;Us.createBufferedReadableStream=CR;Us.merge=RR;Us.flush=Tl;Us.sizeOf=Mi;Us.modeOf=TR;var jV=tS();function CR(e,t,r){let s=e.getReader(),n=!1,o=0,i=["",new jV.ByteArrayCollector(d=>new Uint8Array(d))],a=-1,c=async d=>{let{value:u,done:l}=await s.read(),h=u;if(l){if(a!==-1){let m=Tl(i,a);Mi(m)>0&&d.enqueue(m)}d.close()}else{let m=TR(h,!1);if(a!==m&&(a>=0&&d.enqueue(Tl(i,a)),a=m),a===-1){d.enqueue(h);return}let g=Mi(h);o+=g;let w=Mi(i[a]);if(g>=t&&w===0)d.enqueue(h);else{let C=RR(i,a,h);!n&&o>t*2&&(n=!0,r?.warn(`@smithy/util-stream - stream chunk size ${g} is below threshold of ${t}, automatically buffering.`)),C>=t?d.enqueue(Tl(i,a)):await c(d)}}};return new ReadableStream({pull:c})}Us.createBufferedReadable=CR;function RR(e,t,r){switch(t){case 0:return e[0]+=r,Mi(e[0]);case 1:case 2:return e[t].push(r),Mi(e[t])}}function Tl(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function Mi(e){return e?.byteLength??e?.length??0}function TR(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var PR=b(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0});rS.createBufferedReadable=zV;var BV=require("node:stream"),IR=tS(),js=AR(),HV=xn();function zV(e,t,r){if((0,HV.isReadableStream)(e))return(0,js.createBufferedReadableStream)(e,t,r);let s=new BV.Readable({read(){}}),n=!1,o=0,i=["",new IR.ByteArrayCollector(c=>new Uint8Array(c)),new IR.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return e.on("data",c=>{let d=(0,js.modeOf)(c,!0);if(a!==d&&(a>=0&&s.push((0,js.flush)(i,a)),a=d),a===-1){s.push(c);return}let u=(0,js.sizeOf)(c);o+=u;let l=(0,js.sizeOf)(i[a]);if(u>=t&&l===0)s.push(c);else{let h=(0,js.merge)(i,a,c);!n&&o>t*2&&(n=!0,r?.warn(`@smithy/util-stream - stream chunk size ${u} is below threshold of ${t}, automatically buffering.`)),h>=t&&s.push((0,js.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let c=(0,js.flush)(i,a);(0,js.sizeOf)(c)>0&&s.push(c)}s.push(null)}),s}});var NR=b(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.getAwsChunkedEncodingStream=void 0;var VV=require("stream"),GV=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:s,checksumAlgorithmFn:n,checksumLocationName:o,streamHasher:i}=t,a=r!==void 0&&n!==void 0&&o!==void 0&&i!==void 0,c=a?i(n,e):void 0,d=new VV.Readable({read:()=>{}});return e.on("data",u=>{let l=s(u)||0;d.push(`${l.toString(16)}\r
`),d.push(u),d.push(`\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),a){let u=r(await c);d.push(`${o}:${u}\r
`),d.push(`\r
`)}d.push(null)}),d};Al.getAwsChunkedEncodingStream=GV});var OR=b(sS=>{"use strict";Object.defineProperty(sS,"__esModule",{value:!0});sS.headStream=WV;async function WV(e,t){let r=0,s=[],n=e.getReader(),o=!1;for(;!o;){let{done:c,value:d}=await n.read();if(d&&(s.push(d),r+=d?.byteLength??0),r>=t)break;o=c}n.releaseLock();let i=new Uint8Array(Math.min(t,r)),a=0;for(let c of s){if(c.byteLength>i.byteLength-a){i.set(c.subarray(0,i.byteLength-a),a);break}else i.set(c,a);a+=c.length}return i}});var kR=b(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.headStream=void 0;var QV=require("stream"),KV=OR(),JV=xn(),YV=(e,t)=>(0,JV.isReadableStream)(e)?(0,KV.headStream)(e,t):new Promise((r,s)=>{let n=new nS;n.limit=t,e.pipe(n),e.on("error",o=>{n.end(),s(o)}),n.on("error",s),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})});Il.headStream=YV;var nS=class extends QV.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(t,r,s){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let n=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-n),this.emit("finish")}s()}}});var iS=b(oS=>{"use strict";var DR=e=>encodeURIComponent(e).replace(/[!'()*]/g,XV),XV=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,ZV=e=>e.split("/").map(DR).join("/");oS.escapeUri=DR;oS.escapeUriPath=ZV});var cS=b(MR=>{"use strict";var aS=iS();function e3(e){let t=[];for(let r of Object.keys(e).sort()){let s=e[r];if(r=aS.escapeUri(r),Array.isArray(s))for(let n=0,o=s.length;n<o;n++)t.push(`${r}=${aS.escapeUri(s[n])}`);else{let n=r;(s||typeof s=="string")&&(n+=`=${aS.escapeUri(s)}`),t.push(n)}}return t.join("&")}MR.buildQueryString=e3});var br=b(Ac=>{"use strict";var $R=ye(),UR=cS(),Pl=require("http"),Nl=require("https"),jR=require("stream"),dS=require("http2"),t3=["ECONNRESET","EPIPE","ETIMEDOUT"],BR=e=>{let t={};for(let r of Object.keys(e)){let s=e[r];t[r]=Array.isArray(s)?s.join(","):s}return t},jt={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},LR=1e3,r3=(e,t,r=0)=>{if(!r)return-1;let s=n=>{let o=jt.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-n),i=a=>{a?.connecting?a.on("connect",()=>{jt.clearTimeout(o)}):jt.clearTimeout(o)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(s(0),0):jt.setTimeout(s.bind(null,LR),LR)},s3=(e,t,r=0,s,n)=>r?jt.setTimeout(()=>{let o=`@smithy/node-http-handler - [${s?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(s){let i=Object.assign(new Error(o),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(i),t(i)}else o+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",n?.warn?.(o)},r):-1,n3=3e3,o3=(e,{keepAlive:t,keepAliveMsecs:r},s=n3)=>{if(t!==!0)return-1;let n=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",o=>{o.setKeepAlive(t,r||0)})};return s===0?(n(),0):jt.setTimeout(n,s)},qR=3e3,i3=(e,t,r=0)=>{let s=n=>{let o=r-n,i=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(o,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(o,i)};return 0<r&&r<6e3?(s(0),0):jt.setTimeout(s.bind(null,r===0?0:qR),qR)},FR=6e3;async function HR(e,t,r=FR,s=!1){let n=t.headers??{},o=n.Expect||n.expect,i=-1,a=!0;!s&&o==="100-continue"&&(a=await Promise.race([new Promise(c=>{i=Number(jt.setTimeout(()=>c(!0),Math.max(FR,r)))}),new Promise(c=>{e.on("continue",()=>{jt.clearTimeout(i),c(!0)}),e.on("response",()=>{jt.clearTimeout(i),c(!1)}),e.on("error",()=>{jt.clearTimeout(i),c(!1)})})])),a&&a3(e,t.body)}function a3(e,t){if(t instanceof jR.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var c3=0,uS=class e{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,s=console){let{sockets:n,requests:o,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(n&&o)for(let c in n){let d=n[c]?.length??0,u=o[c]?.length??0;if(d>=i&&u>=2*i)return s?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${d} and ${u} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,s)=>{typeof t=="function"?t().then(n=>{r(this.resolveDefaultConfig(n))}).catch(s):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:s,socketTimeout:n,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:c}=t||{},d=!0,u=50;return{connectionTimeout:s,requestTimeout:r,socketTimeout:n,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:c,httpAgent:i instanceof Pl.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new Pl.Agent({keepAlive:d,maxSockets:u,...i}),httpsAgent:a instanceof Nl.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new Nl.Agent({keepAlive:d,maxSockets:u,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:s}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let i=this.config,a,c=[],d=async te=>{await a,c.forEach(jt.clearTimeout),n(te)},u=async te=>{await a,c.forEach(jt.clearTimeout),o(te)};if(r?.aborted){let te=new Error("Request aborted");te.name="AbortError",u(te);return}let l=t.protocol==="https:",h=t.headers??{},m=(h.Expect??h.expect)==="100-continue",g=l?i.httpsAgent:i.httpAgent;m&&!this.externalAgent&&(g=new(l?Nl.Agent:Pl.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(jt.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(g,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let w=UR.buildQueryString(t.query||{}),C;if(t.username!=null||t.password!=null){let te=t.username??"",he=t.password??"";C=`${te}:${he}`}let T=t.path;w&&(T+=`?${w}`),t.fragment&&(T+=`#${t.fragment}`);let N=t.hostname??"";N[0]==="["&&N.endsWith("]")?N=t.hostname.slice(1,-1):N=t.hostname;let B={headers:t.headers,host:N,method:t.method,path:T,port:t.port,agent:g,auth:C},Z=(l?Nl.request:Pl.request)(B,te=>{let he=new $R.HttpResponse({statusCode:te.statusCode||-1,reason:te.statusMessage,headers:BR(te.headers),body:te});d({response:he})});if(Z.on("error",te=>{t3.includes(te.code)?u(Object.assign(te,{name:"TimeoutError"})):u(te)}),r){let te=()=>{Z.destroy();let he=new Error("Request aborted");he.name="AbortError",u(he)};if(typeof r.addEventListener=="function"){let he=r;he.addEventListener("abort",te,{once:!0}),Z.once("close",()=>he.removeEventListener("abort",te))}else r.onabort=te}let we=s??i.requestTimeout;c.push(r3(Z,u,i.connectionTimeout)),c.push(s3(Z,u,we,i.throwOnRequestTimeout,i.logger??console)),c.push(i3(Z,u,i.socketTimeout));let Oe=B.agent;typeof Oe=="object"&&"keepAlive"in Oe&&c.push(o3(Z,{keepAlive:Oe.keepAlive,keepAliveMsecs:Oe.keepAliveMsecs})),a=HR(Z,t,we,this.externalAgent).catch(te=>(c.forEach(jt.clearTimeout),o(te)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>({...s,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},lS=class{sessions=[];constructor(t){this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},fS=class{constructor(t){if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(t,r){let s=this.getUrlString(t),n=this.sessionCache.get(s);if(n){let c=n.poll();if(c&&!this.config.disableConcurrency)return c}let o=dS.connect(s);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),o.unref();let i=()=>{o.destroy(),this.deleteSession(s,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(s,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(s)||new lS;return a.offerLast(o),this.sessionCache.set(s,a),o}deleteSession(t,r){let s=this.sessionCache.get(t);s&&s.contains(r)&&(s.remove(r),this.sessionCache.set(t,s))}release(t,r){let s=this.getUrlString(t);this.sessionCache.get(s)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let s of r)s.destroyed||s.destroy(),r.remove(s);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},pS=class e{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new fS({});static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){this.configProvider=new Promise((r,s)=>{typeof t=="function"?t().then(n=>{r(n||{})}).catch(s):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:s}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:n,disableConcurrentStreams:o}=this.config,i=s??n;return new Promise((a,c)=>{let d=!1,u,l=async be=>{await u,a(be)},h=async be=>{await u,c(be)};if(r?.aborted){d=!0;let be=new Error("Request aborted");be.name="AbortError",h(be);return}let{hostname:m,method:g,port:w,protocol:C,query:T}=t,N="";if(t.username!=null||t.password!=null){let be=t.username??"",Ae=t.password??"";N=`${be}:${Ae}@`}let B=`${C}//${N}${m}${w?`:${w}`:""}`,V={destination:new URL(B)},Z=this.connectionManager.lease(V,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:o||!1}),we=be=>{o&&this.destroySession(Z),d=!0,h(be)},Oe=UR.buildQueryString(T||{}),te=t.path;Oe&&(te+=`?${Oe}`),t.fragment&&(te+=`#${t.fragment}`);let he=Z.request({...t.headers,[dS.constants.HTTP2_HEADER_PATH]:te,[dS.constants.HTTP2_HEADER_METHOD]:g});if(Z.ref(),he.on("response",be=>{let Ae=new $R.HttpResponse({statusCode:be[":status"]||-1,headers:BR(be),body:he});d=!0,l({response:Ae}),o&&(Z.close(),this.connectionManager.deleteSession(B,Z))}),i&&he.setTimeout(i,()=>{he.close();let be=new Error(`Stream timed out because of no activity for ${i} ms`);be.name="TimeoutError",we(be)}),r){let be=()=>{he.close();let Ae=new Error("Request aborted");Ae.name="AbortError",we(Ae)};if(typeof r.addEventListener=="function"){let Ae=r;Ae.addEventListener("abort",be,{once:!0}),he.once("close",()=>Ae.removeEventListener("abort",be))}else r.onabort=be}he.on("frameError",(be,Ae,vi)=>{we(new Error(`Frame type id ${be} in stream id ${vi} has failed with code ${Ae}.`))}),he.on("error",we),he.on("aborted",()=>{we(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${he.rstCode}.`))}),he.on("close",()=>{Z.unref(),o&&Z.destroy(),d||we(new Error("Unexpected error: http2 request did not get a response"))}),u=HR(he,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>({...s,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},mS=class extends jR.Writable{bufferedBytes=[];_write(t,r,s){this.bufferedBytes.push(t),s()}},d3=e=>u3(e)?l3(e):new Promise((t,r)=>{let s=new mS;e.pipe(s),e.on("error",n=>{s.end(),r(n)}),s.on("error",r),s.on("finish",function(){let n=new Uint8Array(Buffer.concat(this.bufferedBytes));t(n)})}),u3=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function l3(e){let t=[],r=e.getReader(),s=!1,n=0;for(;!s;){let{done:a,value:c}=await r.read();c&&(t.push(c),n+=c.length),s=a}let o=new Uint8Array(n),i=0;for(let a of t)o.set(a,i),i+=a.length;return o}Ac.DEFAULT_REQUEST_TIMEOUT=c3;Ac.NodeHttp2Handler=pS;Ac.NodeHttpHandler=uS;Ac.streamCollector=d3});var GR=b(kl=>{"use strict";var zR=ye(),f3=cS(),p3=Le();function VR(e,t){return new Request(e,t)}function m3(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let s=new Error(`Request did not complete within ${e} ms`);s.name="TimeoutError",r(s)},e)})}var Ol={supported:void 0},hS=class e{config;configProvider;static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),Ol.supported===void 0&&(Ol.supported=typeof Request<"u"&&"keepalive"in VR("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:s}={}){this.config||(this.config=await this.configProvider);let n=s??this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let N=new Error("Request aborted");return N.name="AbortError",Promise.reject(N)}let a=t.path,c=f3.buildQueryString(t.query||{});c&&(a+=`?${c}`),t.fragment&&(a+=`#${t.fragment}`);let d="";if(t.username!=null||t.password!=null){let N=t.username??"",B=t.password??"";d=`${N}:${B}@`}let{port:u,method:l}=t,h=`${t.protocol}//${d}${t.hostname}${u?`:${u}`:""}${a}`,m=l==="GET"||l==="HEAD"?void 0:t.body,g={body:m,headers:new Headers(t.headers),method:l,credentials:i};this.config?.cache&&(g.cache=this.config.cache),m&&(g.duplex="half"),typeof AbortController<"u"&&(g.signal=r),Ol.supported&&(g.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(g,this.config.requestInit(t));let w=()=>{},C=VR(h,g),T=[fetch(C).then(N=>{let B=N.headers,V={};for(let we of B.entries())V[we[0]]=we[1];return N.body!=null?{response:new zR.HttpResponse({headers:V,reason:N.statusText,statusCode:N.status,body:N.body})}:N.blob().then(we=>({response:new zR.HttpResponse({headers:V,reason:N.statusText,statusCode:N.status,body:we})}))}),m3(n)];return r&&T.push(new Promise((N,B)=>{let V=()=>{let Z=new Error("Request aborted");Z.name="AbortError",B(Z)};if(typeof r.addEventListener=="function"){let Z=r;Z.addEventListener("abort",V,{once:!0}),w=()=>Z.removeEventListener("abort",V)}else r.onabort=V})),Promise.race(T).finally(w)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>(s[t]=r,s))}httpHandlerConfigs(){return this.config??{}}},h3=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):g3(e):y3(e);async function g3(e){let t=await S3(e),r=p3.fromBase64(t);return new Uint8Array(r)}async function y3(e){let t=[],r=e.getReader(),s=!1,n=0;for(;!s;){let{done:a,value:c}=await r.read();c&&(t.push(c),n+=c.length),s=a}let o=new Uint8Array(n),i=0;for(let a of t)o.set(a,i),i+=a.length;return o}function S3(e){return new Promise((t,r)=>{let s=new FileReader;s.onloadend=()=>{if(s.readyState!==2)return r(new Error("Reader aborted too early"));let n=s.result??"",o=n.indexOf(","),i=o>-1?o+1:n.length;t(n.substring(i))},s.onabort=()=>r(new Error("Read aborted")),s.onerror=()=>r(s.error),s.readAsDataURL(e)})}kl.FetchHttpHandler=hS;kl.keepAliveSupport=Ol;kl.streamCollector=h3});var Dl=b(yS=>{"use strict";var WR={},gS={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),WR[e]=t,gS[t]=e}function _3(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let s=e.slice(r,r+2).toLowerCase();if(s in gS)t[r/2]=gS[s];else throw new Error(`Cannot decode unrecognized sequence ${s} as hexadecimal`)}return t}function E3(e){let t="";for(let r=0;r<e.byteLength;r++)t+=WR[e[r]];return t}yS.fromHex=_3;yS.toHex=E3});var YR=b(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.sdkStreamMixin=void 0;var w3=GR(),b3=Le(),v3=Dl(),x3=qe(),QR=xn(),KR="The stream has already been transformed.",C3=e=>{if(!JR(e)&&!(0,QR.isReadableStream)(e)){let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(KR);return t=!0,await(0,w3.streamCollector)(e)},s=n=>{if(typeof n.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return n.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();if(n==="base64")return(0,b3.toBase64)(o);if(n==="hex")return(0,v3.toHex)(o);if(n===void 0||n==="utf8"||n==="utf-8")return(0,x3.toUtf8)(o);if(typeof TextDecoder=="function")return new TextDecoder(n).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(KR);if(t=!0,JR(e))return s(e);if((0,QR.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};Ml.sdkStreamMixin=C3;var JR=e=>typeof Blob=="function"&&e instanceof Blob});var ZR=b(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.sdkStreamMixin=void 0;var R3=br(),T3=ki(),SS=require("stream"),A3=YR(),XR="The stream has already been transformed.",I3=e=>{if(!(e instanceof SS.Readable))try{return(0,A3.sdkStreamMixin)(e)}catch{let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(XR);return t=!0,await(0,R3.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{let n=await r();return s===void 0||Buffer.isEncoding(s)?(0,T3.fromArrayBuffer)(n.buffer,n.byteOffset,n.byteLength).toString(s):new TextDecoder(s).decode(n)},transformToWebStream:()=>{if(t)throw new Error(XR);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof SS.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,SS.Readable.toWeb(e)}})};Ll.sdkStreamMixin=I3});var eT=b(_S=>{"use strict";Object.defineProperty(_S,"__esModule",{value:!0});_S.splitStream=P3;async function P3(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var sT=b(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0});ES.splitStream=O3;var tT=require("stream"),N3=eT(),rT=xn();async function O3(e){if((0,rT.isReadableStream)(e)||(0,rT.isBlob)(e))return(0,N3.splitStream)(e);let t=new tT.PassThrough,r=new tT.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var Ic=b(ht=>{"use strict";var nT=Le(),oT=qe(),iT=Yy(),aT=xR(),cT=PR(),dT=NR(),uT=kR(),lT=ZR(),fT=sT(),pT=xn(),wS=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?e.mutate(nT.fromBase64(t)):e.mutate(oT.fromUtf8(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return t==="base64"?nT.toBase64(this):oT.toUtf8(this)}};ht.Uint8ArrayBlobAdapter=wS;Object.keys(iT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ht,e)&&Object.defineProperty(ht,e,{enumerable:!0,get:function(){return iT[e]}})});Object.keys(aT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ht,e)&&Object.defineProperty(ht,e,{enumerable:!0,get:function(){return aT[e]}})});Object.keys(cT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ht,e)&&Object.defineProperty(ht,e,{enumerable:!0,get:function(){return cT[e]}})});Object.keys(dT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ht,e)&&Object.defineProperty(ht,e,{enumerable:!0,get:function(){return dT[e]}})});Object.keys(uT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ht,e)&&Object.defineProperty(ht,e,{enumerable:!0,get:function(){return uT[e]}})});Object.keys(lT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ht,e)&&Object.defineProperty(ht,e,{enumerable:!0,get:function(){return lT[e]}})});Object.keys(fT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ht,e)&&Object.defineProperty(ht,e,{enumerable:!0,get:function(){return fT[e]}})});Object.keys(pT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ht,e)&&Object.defineProperty(ht,e,{enumerable:!0,get:function(){return pT[e]}})})});var ql,Kt,Fl=S(()=>{ql=y(Ic()),Kt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return ql.Uint8ArrayBlobAdapter.mutate(e);if(!e)return ql.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return ql.Uint8ArrayBlobAdapter.mutate(await r)}});function dr(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var $l=S(()=>{});var Bt,bS=S(()=>{Bt=e=>typeof e=="function"?e():e});var Pc,Ul=S(()=>{Pc=(e,t,r,s,n)=>({name:t,namespace:e,traits:r,input:s,output:n})});var mT,hT,gT,vS,yT=S(()=>{mT=y(ye()),hT=y(mt());Ul();gT=e=>(t,r)=>async s=>{let{response:n}=await t(s),{operationSchema:o}=(0,hT.getSmithyContext)(r),[,i,a,c,d,u]=o??[];try{let l=await e.protocol.deserializeResponse(Pc(i,a,c,d,u),{...e,...r},n);return{response:n,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:n}),!("$metadata"in l)){let h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+h}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(h):r.logger?.warn?.(h)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText);try{if(mT.HttpResponse.isInstance(n)){let{headers:m={}}=n,g=Object.entries(m);l.$metadata={httpStatusCode:n.statusCode,requestId:vS(/^x-[\w-]+-request-?id$/,g),extendedRequestId:vS(/^x-[\w-]+-id-2$/,g),cfId:vS(/^x-[\w-]+-cf-id$/,g)}}}catch{}}throw l}},vS=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var ST,_T,ET=S(()=>{ST=y(mt());Ul();_T=e=>(t,r)=>async s=>{let{operationSchema:n}=(0,ST.getSmithyContext)(r),[,o,i,a,c,d]=n??[],u=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,l=await e.protocol.serializeRequest(Pc(o,i,a,c,d),s.input,{...e,...r,endpoint:u});return t({...s,request:l})}});function k3(e){return{applyToStack:t=>{t.add(_T(e),bT),t.add(gT(e),wT),e.protocol.setSerdeContext(e)}}}var wT,bT,vT=S(()=>{yT();ET();wT={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},bT={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var st,Cn=S(()=>{st=class{name;namespace;traits;static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var jl,D3,xT=S(()=>{Cn();jl=class e extends st{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=e.symbol},D3=(e,t,r,s)=>st.assign(new jl,{name:t,namespace:e,traits:r,valueSchema:s})});var Bl,M3,CT=S(()=>{Cn();Bl=class e extends st{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=e.symbol},M3=(e,t,r,s,n)=>st.assign(new Bl,{name:t,namespace:e,traits:r,keySchema:s,valueSchema:n})});var Hl,L3,RT=S(()=>{Cn();Hl=class e extends st{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=e.symbol},L3=(e,t,r,s,n)=>st.assign(new Hl,{name:t,namespace:e,traits:r,input:s,output:n})});var Li,q3,xS=S(()=>{Cn();Li=class e extends st{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=e.symbol},q3=(e,t,r,s,n)=>st.assign(new Li,{name:t,namespace:e,traits:r,memberNames:s,memberList:n})});var zl,F3,TT=S(()=>{Cn();xS();zl=class e extends Li{static symbol=Symbol.for("@smithy/err");ctor;symbol=e.symbol},F3=(e,t,r,s,n,o)=>st.assign(new zl,{name:t,namespace:e,traits:r,memberNames:s,memberList:n,ctor:null})});function fs(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let s of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[s]=1);return t}var CS=S(()=>{});function Nc(e,t){if(e instanceof D)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=D;return new r(e,t)}var D,RS,AT,IT=S(()=>{bS();CS();D=class e{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let s=[],n=t,o=t;for(this._isMemberSchema=!1;RS(n);)s.push(n[1]),n=n[0],o=Bt(n),this._isMemberSchema=!0;if(s.length>0){this.memberTraits={};for(let i=s.length-1;i>=0;--i){let a=s[i];Object.assign(this.memberTraits,fs(a))}}else this.memberTraits=0;if(o instanceof e){let i=this.memberTraits;Object.assign(this,o),this.memberTraits=Object.assign({},i,o.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??o.memberName;return}if(this.schema=Bt(o),AT(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(o),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){let r=Bt(t);if(r instanceof e)return r;if(RS(r)){let[s,n]=r;if(s instanceof e)return Object.assign(s.getMergedTraits(),fs(n)),s;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(r)}getSchema(){let t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let t=this.getSchema();return t[0]===3||t[0]===-3}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=o=>(o&4)===4||!!o?.idempotencyToken,{normalizedTraits:r,traits:s,memberTraits:n}=this;return t(r)||t(s)||t(n)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return fs(this.memberTraits)}getOwnTraits(){return fs(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let s=this.getSchema(),n=t?15:s[4]??0;return Nc([n,0],"key")}getValueSchema(){let t=this.getSchema(),[r,s,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],o=typeof t=="number"?63&t:t&&typeof t=="object"&&(s||n)?t[3+t[0]]:r?15:void 0;if(o!=null)return Nc([o,0],s?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let s=r[4].indexOf(t),n=r[5][s];return Nc(RS(n)?n:[n,0],t)}if(this.isDocumentSchema())return Nc([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,s]of this.structIterator())t[r]=s}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],Nc([t[5][r],0],t[4][r])]}};RS=e=>Array.isArray(e)&&e.length===2,AT=e=>Array.isArray(e)&&e.length>=5});var Oc,$3,U3,PT=S(()=>{Cn();Oc=class e extends st{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=e.symbol},$3=(e,t,r,s)=>st.assign(new Oc,{name:t,namespace:e,traits:s,schemaRef:r}),U3=(e,t,r,s)=>st.assign(new Oc,{name:t,namespace:e,traits:r,schemaRef:s})});var j3,NT=S(()=>{j3={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var ve,OT=S(()=>{ve=class e{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,s=new Map){this.namespace=t,this.schemas=r,this.exceptions=s}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let s=this.normalizeShapeId(t);e.for(s.split("#")[0]).schemas.set(s,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let s=t,n=e.for(s[1]);n.schemas.set(s[1]+"#"+s[2],s),n.exceptions.set(s,r)}getErrorCtor(t){let r=t;return e.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,s]=t,n=r+"#"+s;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}}});var TS={};ct(TS,{ErrorSchema:()=>zl,ListSchema:()=>jl,MapSchema:()=>Bl,NormalizedSchema:()=>D,OperationSchema:()=>Hl,SCHEMA:()=>j3,Schema:()=>st,SimpleSchema:()=>Oc,StructureSchema:()=>Li,TypeRegistry:()=>ve,deref:()=>Bt,deserializerMiddlewareOption:()=>wT,error:()=>F3,getSchemaSerdePlugin:()=>k3,isStaticSchema:()=>AT,list:()=>D3,map:()=>M3,op:()=>L3,operation:()=>Pc,serializerMiddlewareOption:()=>bT,sim:()=>$3,simAdapter:()=>U3,struct:()=>q3,translateTraits:()=>fs});var _e=S(()=>{bS();vT();xT();CT();RT();Ul();TT();IT();Cn();PT();xS();NT();CS();OT()});var B3,kT=S(()=>{B3=(e,t,r=s=>s)=>e});var H3,z3,kc,V3,Vl,Dc,G3,AS,IS,PS,NS,W3,Q3,DT,K3,J3,Wl,Y3,OS,X3,qi,kS,Z3,e6,t6,MT,LT,r6,s6,Bo,DS,Gl,Mc,MS=S(()=>{H3=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},z3=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Mc.warn(Gl(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Mc.warn(Gl(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},kc=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Mc.warn(Gl(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},V3=Math.ceil(34028234663852886e22),Vl=e=>{let t=kc(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>V3)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Dc=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},G3=Dc,AS=e=>NS(e,32),IS=e=>NS(e,16),PS=e=>NS(e,8),NS=(e,t)=>{let r=Dc(e);if(r!==void 0&&W3(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},W3=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Q3=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},DT=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},K3=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Mc.warn(Gl(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},J3=e=>{if(e==null)return;let t=DT(e),r=Object.entries(t).filter(([,s])=>s!=null).map(([s])=>s);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},Wl=e=>kc(typeof e=="string"?qi(e):e),Y3=Wl,OS=e=>Vl(typeof e=="string"?qi(e):e),X3=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,qi=e=>{let t=e.match(X3);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},kS=e=>typeof e=="string"?MT(e):kc(e),Z3=kS,e6=kS,t6=e=>typeof e=="string"?MT(e):Vl(e),MT=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},LT=e=>Dc(typeof e=="string"?qi(e):e),r6=LT,s6=e=>AS(typeof e=="string"?qi(e):e),Bo=e=>IS(typeof e=="string"?qi(e):e),DS=e=>PS(typeof e=="string"?qi(e):e),Gl=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Mc={warn:console.warn}});function Ho(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),s=e.getUTCDay(),n=e.getUTCDate(),o=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=n<10?`0${n}`:`${n}`,d=o<10?`0${o}`:`${o}`,u=i<10?`0${i}`:`${i}`,l=a<10?`0${a}`:`${a}`;return`${n6[s]}, ${c} ${qS[r]} ${t} ${d}:${u}:${l} GMT`}var n6,qS,o6,i6,a6,qc,c6,d6,u6,Fc,$c,Lc,l6,f6,p6,LS,m6,h6,g6,ps,y6,S6,Fi,qT=S(()=>{MS();n6=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],qS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];o6=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),i6=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=o6.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,s,n,o,i,a,c,d]=t,u=Bo(Fi(s)),l=ps(n,"month",1,12),h=ps(o,"day",1,31);return Lc(u,l,h,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})},a6=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),qc=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=a6.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,s,n,o,i,a,c,d,u]=t,l=Bo(Fi(s)),h=ps(n,"month",1,12),m=ps(o,"day",1,31),g=Lc(l,h,m,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return u.toUpperCase()!="Z"&&g.setTime(g.getTime()-S6(u)),g},c6=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),d6=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),u6=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Fc=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=c6.exec(e);if(t){let[r,s,n,o,i,a,c,d]=t;return Lc(Bo(Fi(o)),LS(n),ps(s,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})}if(t=d6.exec(e),t){let[r,s,n,o,i,a,c,d]=t;return p6(Lc(l6(o),LS(n),ps(s,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d}))}if(t=u6.exec(e),t){let[r,s,n,o,i,a,c,d]=t;return Lc(Bo(Fi(d)),LS(s),ps(n.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},$c=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Wl(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Lc=(e,t,r,s)=>{let n=t-1;return h6(e,n,r),new Date(Date.UTC(e,n,r,ps(s.hours,"hour",0,23),ps(s.minutes,"minute",0,59),ps(s.seconds,"seconds",0,60),y6(s.fractionalMilliseconds)))},l6=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+Bo(Fi(e));return r<t?r+100:r},f6=50*365*24*60*60*1e3,p6=e=>e.getTime()-new Date().getTime()>f6?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,LS=e=>{let t=qS.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},m6=[31,28,31,30,31,30,31,31,30,31,30,31],h6=(e,t,r)=>{let s=m6[t];if(t===1&&g6(e)&&(s=29),r>s)throw new TypeError(`Invalid day for ${qS[t]} in ${e}: ${r}`)},g6=e=>e%4===0&&(e%100!==0||e%400===0),ps=(e,t,r,s)=>{let n=DS(Fi(e));if(n<r||n>s)throw new TypeError(`${t} must be between ${r} and ${s}, inclusive`);return n},y6=e=>e==null?0:OS("0."+e)*1e3,S6=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let s=Number(e.substring(1,3)),n=Number(e.substring(4,6));return r*(s*60+n)*60*1e3},Fi=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Rn={};ct(Rn,{__addDisposableResource:()=>cA,__assign:()=>Ql,__asyncDelegator:()=>eA,__asyncGenerator:()=>ZT,__asyncValues:()=>tA,__await:()=>$i,__awaiter:()=>WT,__classPrivateFieldGet:()=>oA,__classPrivateFieldIn:()=>aA,__classPrivateFieldSet:()=>iA,__createBinding:()=>Jl,__decorate:()=>UT,__disposeResources:()=>dA,__esDecorate:()=>BT,__exportStar:()=>KT,__extends:()=>FT,__generator:()=>QT,__importDefault:()=>nA,__importStar:()=>sA,__makeTemplateObject:()=>rA,__metadata:()=>GT,__param:()=>jT,__propKey:()=>zT,__read:()=>US,__rest:()=>$T,__rewriteRelativeImportExtension:()=>uA,__runInitializers:()=>HT,__setFunctionName:()=>VT,__spread:()=>JT,__spreadArray:()=>XT,__spreadArrays:()=>YT,__values:()=>Kl,default:()=>w6});function FT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");FS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function $T(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}function UT(e,t,r,s){var n=arguments.length,o=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(n<3?i(o):n>3?i(t,r,o):i(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function jT(e,t){return function(r,s){t(r,s,e)}}function BT(e,t,r,s,n,o){function i(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var a=s.kind,c=a==="getter"?"get":a==="setter"?"set":"value",d=!t&&e?s.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,s.name):{}),l,h=!1,m=r.length-1;m>=0;m--){var g={};for(var w in s)g[w]=w==="access"?{}:s[w];for(var w in s.access)g.access[w]=s.access[w];g.addInitializer=function(T){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(T||null))};var C=(0,r[m])(a==="accessor"?{get:u.get,set:u.set}:u[c],g);if(a==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(l=i(C.get))&&(u.get=l),(l=i(C.set))&&(u.set=l),(l=i(C.init))&&n.unshift(l)}else(l=i(C))&&(a==="field"?n.unshift(l):u[c]=l)}d&&Object.defineProperty(d,s.name,u),h=!0}function HT(e,t,r){for(var s=arguments.length>2,n=0;n<t.length;n++)r=s?t[n].call(e,r):t[n].call(e);return s?r:void 0}function zT(e){return typeof e=="symbol"?e:"".concat(e)}function VT(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function GT(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function WT(e,t,r,s){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(u){try{d(s.next(u))}catch(l){i(l)}}function c(u){try{d(s.throw(u))}catch(l){i(l)}}function d(u){u.done?o(u.value):n(u.value).then(a,c)}d((s=s.apply(e,t||[])).next())})}function QT(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,n,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(u){return c([d,u])}}function c(d){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(s=1,n&&(o=d[0]&2?n.return:d[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,d[1])).done)return o;switch(n=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],n=0}finally{s=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function KT(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Jl(t,e,r)}function Kl(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function US(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var s=r.call(e),n,o=[],i;try{for(;(t===void 0||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function JT(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(US(arguments[t]));return e}function YT(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var s=Array(e),n=0,t=0;t<r;t++)for(var o=arguments[t],i=0,a=o.length;i<a;i++,n++)s[n]=o[i];return s}function XT(e,t,r){if(r||arguments.length===2)for(var s=0,n=t.length,o;s<n;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}function $i(e){return this instanceof $i?(this.v=e,this):new $i(e)}function ZT(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(e,t||[]),n,o=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),n[Symbol.asyncIterator]=function(){return this},n;function i(m){return function(g){return Promise.resolve(g).then(m,l)}}function a(m,g){s[m]&&(n[m]=function(w){return new Promise(function(C,T){o.push([m,w,C,T])>1||c(m,w)})},g&&(n[m]=g(n[m])))}function c(m,g){try{d(s[m](g))}catch(w){h(o[0][3],w)}}function d(m){m.value instanceof $i?Promise.resolve(m.value.v).then(u,l):h(o[0][2],m)}function u(m){c("next",m)}function l(m){c("throw",m)}function h(m,g){m(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function eA(e){var t,r;return t={},s("next"),s("throw",function(n){throw n}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(n,o){t[n]=e[n]?function(i){return(r=!r)?{value:$i(e[n](i)),done:!1}:o?o(i):i}:o}}function tA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Kl=="function"?Kl(e):e[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(o){r[o]=e[o]&&function(i){return new Promise(function(a,c){i=e[o](i),n(a,c,i.done,i.value)})}}function n(o,i,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},i)}}function rA(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function sA(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=$S(e),s=0;s<r.length;s++)r[s]!=="default"&&Jl(t,e,r[s]);return _6(t,e),t}function nA(e){return e&&e.__esModule?e:{default:e}}function oA(e,t,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(e):s?s.value:t.get(e)}function iA(e,t,r,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r}function aA(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function cA(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var s,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],r&&(n=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0});return t}function dA(e){function t(o){e.error=e.hasError?new E6(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,s=0;function n(){for(;r=e.stack.pop();)try{if(!r.async&&s===1)return s=0,e.stack.push(r),Promise.resolve().then(n);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(o).then(n,function(i){return t(i),n()})}else s|=1}catch(i){t(i)}if(s===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return n()}function uA(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,n,o,i){return s?t?".jsx":".js":n&&(!o||!i)?r:n+o+"."+i.toLowerCase()+"js"}):e}var FS,Ql,Jl,_6,$S,E6,w6,Tn=S(()=>{FS=function(e,t){return FS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},FS(e,t)};Ql=function(){return Ql=Object.assign||function(t){for(var r,s=1,n=arguments.length;s<n;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Ql.apply(this,arguments)};Jl=Object.create?(function(e,t,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]});_6=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},$S=function(e){return $S=Object.getOwnPropertyNames||function(t){var r=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[r.length]=s);return r},$S(e)};E6=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var s=new Error(r);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};w6={__extends:FT,__assign:Ql,__rest:$T,__decorate:UT,__param:jT,__esDecorate:BT,__runInitializers:HT,__propKey:zT,__setFunctionName:VT,__metadata:GT,__awaiter:WT,__generator:QT,__createBinding:Jl,__exportStar:KT,__values:Kl,__read:US,__spread:JT,__spreadArrays:YT,__spreadArray:XT,__await:$i,__asyncGenerator:ZT,__asyncDelegator:eA,__asyncValues:tA,__makeTemplateObject:rA,__importStar:sA,__importDefault:nA,__classPrivateFieldGet:oA,__classPrivateFieldSet:iA,__classPrivateFieldIn:aA,__addDisposableResource:cA,__disposeResources:dA,__rewriteRelativeImportExtension:uA}});var fA=b(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.randomUUID=void 0;var b6=(Tn(),Q(Rn)),lA=b6.__importDefault(require("crypto"));Yl.randomUUID=lA.default.randomUUID.bind(lA.default)});var jS=b(mA=>{"use strict";var pA=fA(),Nt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),v6=()=>{if(pA.randomUUID)return pA.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,Nt[e[0]]+Nt[e[1]]+Nt[e[2]]+Nt[e[3]]+"-"+Nt[e[4]]+Nt[e[5]]+"-"+Nt[e[6]]+Nt[e[7]]+"-"+Nt[e[8]]+Nt[e[9]]+"-"+Nt[e[10]]+Nt[e[11]]+Nt[e[12]]+Nt[e[13]]+Nt[e[14]]+Nt[e[15]]};mA.v4=v6});var Ot,hA=S(()=>{Ot=y(jS())});var lt,gA=S(()=>{lt=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};lt.from=e=>e&&typeof e=="object"&&(e instanceof lt||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?lt(String(e)):lt(JSON.stringify(e));lt.fromObject=lt.from});function BS(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var yA=S(()=>{});function Bs(e,t,r){let s=Number(e);if(s<t||s>r)throw new Error(`Value ${s} out of range [${t}, ${r}]`)}var HS,zS,VS,SA,_A,x6,C6,R6,T6,A6,Uc,GS,WS,EA=S(()=>{HS="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",zS="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",VS="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",SA="(\\d?\\d)",_A="(\\d{4})",x6=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),C6=new RegExp(`^${HS}, ${SA} ${zS} ${_A} ${VS} GMT$`),R6=new RegExp(`^${HS}, ${SA}-${zS}-(\\d\\d) ${VS} GMT$`),T6=new RegExp(`^${HS} ${zS} ( [1-9]|\\d\\d) ${VS} ${_A}$`),A6=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Uc=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},GS=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=x6.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,s,n,o,i,a,,c,d]=t;Bs(s,1,12),Bs(n,1,31),Bs(o,0,23),Bs(i,0,59),Bs(a,0,60);let u=new Date(Date.UTC(Number(r),Number(s)-1,Number(n),Number(o),Number(i),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(u.setUTCFullYear(Number(r)),d.toUpperCase()!="Z"){let[,l,h,m]=/([+-])(\d\d):(\d\d)/.exec(d)||[void 0,"+",0,0],g=l==="-"?1:-1;u.setTime(u.getTime()+g*(Number(h)*60*60*1e3+Number(m)*60*1e3))}return u},WS=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,s,n,o,i,a,c;if((c=C6.exec(e))?[,t,r,s,n,o,i,a]=c:(c=R6.exec(e))?([,t,r,s,n,o,i,a]=c,s=(Number(s)+1900).toString()):(c=T6.exec(e))&&([,r,t,n,o,i,a,s]=c),s&&i){let d=Date.UTC(Number(s),A6.indexOf(r),Number(t),Number(n),Number(o),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);Bs(t,1,31),Bs(n,0,23),Bs(o,0,59),Bs(i,0,60);let u=new Date(d);return u.setUTCFullYear(Number(s)),u}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function QS(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let s=e.split(t);if(r===1)return s;let n=[],o="";for(let i=0;i<s.length;i++)o===""?o=s[i]:o+=t+s[i],(i+1)%r===0&&(n.push(o),o="");return o!==""&&n.push(o),n}var wA=S(()=>{});var jc,bA=S(()=>{jc=e=>{let t=e.length,r=[],s=!1,n,o=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':n!=="\\"&&(s=!s);break;case",":s||(r.push(e.slice(o,i)),o=i+1);break;default:}n=a}return r.push(e.slice(o)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function KS(e){return new pe(String(e),"bigDecimal")}var vA,pe,xA=S(()=>{vA=/^-?\d*(\.\d+)?$/,pe=class e{string;type;constructor(t,r){if(this.string=t,this.type=r,!vA.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&vA.test(r.string)}}});var CA={};ct(CA,{LazyJsonString:()=>lt,NumericValue:()=>pe,_parseEpochTimestamp:()=>Uc,_parseRfc3339DateTimeWithOffset:()=>GS,_parseRfc7231DateTime:()=>WS,copyDocumentWithTransform:()=>B3,dateToUtcString:()=>Ho,expectBoolean:()=>z3,expectByte:()=>PS,expectFloat32:()=>Vl,expectInt:()=>G3,expectInt32:()=>AS,expectLong:()=>Dc,expectNonNull:()=>Q3,expectNumber:()=>kc,expectObject:()=>DT,expectShort:()=>IS,expectString:()=>K3,expectUnion:()=>J3,generateIdempotencyToken:()=>Ot.v4,handleFloat:()=>Z3,limitedParseDouble:()=>kS,limitedParseFloat:()=>e6,limitedParseFloat32:()=>t6,logger:()=>Mc,nv:()=>KS,parseBoolean:()=>H3,parseEpochTimestamp:()=>$c,parseRfc3339DateTime:()=>i6,parseRfc3339DateTimeWithOffset:()=>qc,parseRfc7231DateTime:()=>Fc,quoteHeader:()=>BS,splitEvery:()=>QS,splitHeader:()=>jc,strictParseByte:()=>DS,strictParseDouble:()=>Wl,strictParseFloat:()=>Y3,strictParseFloat32:()=>OS,strictParseInt:()=>r6,strictParseInt32:()=>s6,strictParseLong:()=>LT,strictParseShort:()=>Bo});var dt=S(()=>{kT();qT();hA();gA();MS();yA();EA();wA();bA();xA()});var Ht,Ui=S(()=>{Ht=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});var RA,JS,TA=S(()=>{RA=y(qe()),JS=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:s,serdeContext:n,defaultContentType:o}){this.marshaller=t,this.serializer=r,this.deserializer=s,this.serdeContext=n,this.defaultContentType=o}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:s}){let n=this.marshaller,o=r.getEventStreamMember(),i=r.getMemberSchema(o),a=this.serializer,c=this.defaultContentType,d=Symbol("initialRequestMarker"),u={async*[Symbol.asyncIterator](){if(s){let l={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,s);let h=a.flush();yield{[d]:!0,headers:l,body:h}}for await(let l of t)yield l}};return n.serialize(u,l=>{if(l[d])return{headers:l.headers,body:l.body};let h=Object.keys(l).find(N=>N!=="__type")??"",{additionalHeaders:m,body:g,eventType:w,explicitPayloadContentType:C}=this.writeEventBody(h,i,l);return{headers:{":event-type":{type:"string",value:w},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:C??c},...m},body:g}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:s}){let n=this.marshaller,o=r.getEventStreamMember(),a=r.getMemberSchema(o).getMemberSchemas(),c=Symbol("initialResponseMarker"),d=n.deserialize(t.body,async h=>{let m=Object.keys(h).find(g=>g!=="__type")??"";if(m==="initial-response"){let g=await this.deserializer.read(r,h[m].body);return delete g[o],{[c]:!0,...g}}else if(m in a){let g=a[m];return{[m]:await this.deserializer.read(g,h[m].body)}}else return{$unknown:h}}),u=d[Symbol.asyncIterator](),l=await u.next();if(l.done)return d;if(l.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[h,m]of Object.entries(l.value))s[h]=m}return{async*[Symbol.asyncIterator](){for(l?.value?.[c]||(yield l.value);;){let{done:h,value:m}=await u.next();if(h)break;yield m}}}}writeEventBody(t,r,s){let n=this.serializer,o=t,i=null,a,c=r.getSchema()[4].includes(t),d={};if(c){let h=r.getMemberSchema(t);if(h.isStructSchema()){for(let[m,g]of h.structIterator()){let{eventHeader:w,eventPayload:C}=g.getMergedTraits();if(C){i=m;break}else if(w){let T=s[t][m],N="binary";g.isNumericSchema()?(-2)**31<=T&&T<=2**31-1?N="integer":N="long":g.isTimestampSchema()?N="timestamp":g.isStringSchema()?N="string":g.isBooleanSchema()&&(N="boolean"),T!=null&&(d[m]={type:N,value:T},delete s[t][m])}}if(i!==null){let m=h.getMemberSchema(i);m.isBlobSchema()?a="application/octet-stream":m.isStringSchema()&&(a="text/plain"),n.write(m,s[t][i])}else n.write(h,s[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[h,m]=s[t];o=h,n.write(15,m)}let u=n.flush();return{body:typeof u=="string"?(this.serdeContext?.utf8Decoder??RA.fromUtf8)(u):u,eventType:o,explicitPayloadContentType:a,additionalHeaders:d}}}});var AA={};ct(AA,{EventStreamSerde:()=>JS});var IA=S(()=>{TA()});var Xl,zo,Zl=S(()=>{_e();Xl=y(ye());Ui();zo=class extends Ht{options;constructor(t){super(),this.options=t}getRequestType(){return Xl.HttpRequest}getResponseType(){return Xl.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,t.query||(t.query={});for(let[s,n]of r.url.searchParams.entries())t.query[s]=n;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,s){let n=D.of(r.input),o=fs(r.traits??{});if(o.endpoint){let i=o.endpoint?.[0];if(typeof i=="string"){let a=[...n.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let d=s[c];if(typeof d!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);i=i.replace(`{${c}}`,d)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:s})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:s})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(()=>(IA(),AA));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,s,n,o){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}});var PA,NA,Jr,OA=S(()=>{_e();dt();PA=y(ye()),NA=y(Ic());Fl();$l();Zl();Jr=class extends zo{async serializeRequest(t,r,s){let n={...r??{}},o=this.serializer,i={},a={},c=await s.endpoint(),d=D.of(t?.input),u=d.getSchema(),l=!1,h,m=new PA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(c){this.updateServiceEndpoint(m,c),this.setHostPrefix(m,t,n);let g=fs(t.traits);if(g.http){m.method=g.http[0];let[w,C]=g.http[1].split("?");m.path=="/"?m.path=w:m.path+=w;let T=new URLSearchParams(C??"");Object.assign(i,Object.fromEntries(T))}}for(let[g,w]of d.structIterator()){let C=w.getMergedTraits()??{},T=n[g];if(T!=null)if(C.httpPayload)w.isStreaming()?w.isStructSchema()?n[g]&&(h=await this.serializeEventStream({eventStream:n[g],requestSchema:d})):h=T:(o.write(w,T),h=o.flush()),delete n[g];else if(C.httpLabel){o.write(w,T);let N=o.flush();m.path.includes(`{${g}+}`)?m.path=m.path.replace(`{${g}+}`,N.split("/").map(dr).join("/")):m.path.includes(`{${g}}`)&&(m.path=m.path.replace(`{${g}}`,dr(N))),delete n[g]}else if(C.httpHeader)o.write(w,T),a[C.httpHeader.toLowerCase()]=String(o.flush()),delete n[g];else if(typeof C.httpPrefixHeaders=="string"){for(let[N,B]of Object.entries(T)){let V=C.httpPrefixHeaders+N;o.write([w.getValueSchema(),{httpHeader:V}],B),a[V.toLowerCase()]=o.flush()}delete n[g]}else C.httpQuery||C.httpQueryParams?(this.serializeQuery(w,T,i),delete n[g]):l=!0}return l&&n&&(o.write(u,n),h=o.flush()),m.headers=a,m.query=i,m.body=h,m}serializeQuery(t,r,s){let n=this.serializer,o=t.getMergedTraits();if(o.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in s)){let c=t.getValueSchema();Object.assign(c.getMergedTraits(),{...o,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(c,a,s)}return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let c of r){n.write([t.getValueSchema(),o],c);let d=n.flush();(i||d!==void 0)&&a.push(d)}s[o.httpQuery]=a}else n.write([t,o],r),s[o.httpQuery]=n.flush()}async deserializeResponse(t,r,s){let n=this.deserializer,o=D.of(t.output),i={};if(s.statusCode>=300){let c=await Kt(s.body,r);throw c.byteLength>0&&Object.assign(i,await n.read(15,c)),await this.handleError(t,r,s,i,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in s.headers){let d=s.headers[c];delete s.headers[c],s.headers[c.toLowerCase()]=d}let a=await this.deserializeHttpMessage(o,r,s,i);if(a.length){let c=await Kt(s.body,r);if(c.byteLength>0){let d=await n.read(o,c);for(let u of a)i[u]=d[u]}}return i.$metadata=this.deserializeMetadata(s),i}async deserializeHttpMessage(t,r,s,n,o){let i;n instanceof Set?i=o:i=n;let a=this.deserializer,c=D.of(t),d=[];for(let[u,l]of c.structIterator()){let h=l.getMemberTraits();if(h.httpPayload){if(l.isStreaming())l.isStructSchema()?i[u]=await this.deserializeEventStream({response:s,responseSchema:c}):i[u]=(0,NA.sdkStreamMixin)(s.body);else if(s.body){let g=await Kt(s.body,r);g.byteLength>0&&(i[u]=await a.read(l,g))}}else if(h.httpHeader){let m=String(h.httpHeader).toLowerCase(),g=s.headers[m];if(g!=null)if(l.isListSchema()){let w=l.getValueSchema();w.getMergedTraits().httpHeader=m;let C;w.isTimestampSchema()&&w.getSchema()===4?C=QS(g,",",2):C=jc(g);let T=[];for(let N of C)T.push(await a.read(w,N.trim()));i[u]=T}else i[u]=await a.read(l,g)}else if(h.httpPrefixHeaders!==void 0){i[u]={};for(let[m,g]of Object.entries(s.headers))if(m.startsWith(h.httpPrefixHeaders)){let w=l.getValueSchema();w.getMergedTraits().httpHeader=m,i[u][m.slice(h.httpPrefixHeaders.length)]=await a.read(w,g)}}else h.httpResponseCode?i[u]=s.statusCode:d.push(u)}return d}}});var kA,ur,DA=S(()=>{_e();kA=y(ye());Fl();Zl();ur=class extends zo{async serializeRequest(t,r,s){let n=this.serializer,o={},i={},a=await s.endpoint(),c=D.of(t?.input),d=c.getSchema(),u,l=new kA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:o,headers:i,body:void 0});a&&(this.updateServiceEndpoint(l,a),this.setHostPrefix(l,t,r));let h={...r};if(r){let m=c.getEventStreamMember();if(m){if(h[m]){let g={};for(let[w,C]of c.structIterator())w!==m&&h[w]&&(n.write(C,h[w]),g[w]=n.flush());u=await this.serializeEventStream({eventStream:h[m],requestSchema:c,initialRequest:g})}}else n.write(d,h),u=n.flush()}return l.headers=i,l.query=o,l.body=u,l.method="POST",l}async deserializeResponse(t,r,s){let n=this.deserializer,o=D.of(t.output),i={};if(s.statusCode>=300){let c=await Kt(s.body,r);throw c.byteLength>0&&Object.assign(i,await n.read(15,c)),await this.handleError(t,r,s,i,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in s.headers){let d=s.headers[c];delete s.headers[c],s.headers[c.toLowerCase()]=d}let a=o.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:s,responseSchema:o,initialResponseContainer:i});else{let c=await Kt(s.body,r);c.byteLength>0&&Object.assign(i,await n.read(o,c))}return i.$metadata=this.deserializeMetadata(s),i}}});var YS,XS=S(()=>{$l();YS=(e,t,r,s,n,o)=>{if(t!=null&&t[r]!==void 0){let i=s();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(n,o?i.split("/").map(a=>dr(a)).join("/"):dr(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function Vo(e,t){return new ef(e,t)}var MA,ef,LA=S(()=>{MA=y(ye());XS();ef=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(t,r){this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:s,path:n}=await this.context.endpoint();this.path=n;for(let o of this.resolvePathStack)o(this.path);return new MA.HttpRequest({protocol:r,hostname:this.hostname||t,port:s,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,s,n){return this.resolvePathStack.push(o=>{this.path=YS(o,this.input,t,r,s,n)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function nt(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:s,httpHeader:n,httpQuery:o}=e.getMergedTraits();return(t.httpBindings?typeof s=="string"||n?6:o||r?5:void 0:void 0)??t.timestampFormat.default}var tf=S(()=>{});var ZS,qA,Hs,e_=S(()=>{_e();dt();ZS=y(Le()),qA=y(qe());Ui();tf();Hs=class extends Ht{settings;constructor(t){super(),this.settings=t}read(t,r){let s=D.of(t);if(s.isListSchema())return jc(r).map(n=>this.read(s.getValueSchema(),n));if(s.isBlobSchema())return(this.serdeContext?.base64Decoder??ZS.fromBase64)(r);if(s.isTimestampSchema())switch(nt(s,this.settings)){case 5:return GS(r);case 6:return WS(r);case 7:return Uc(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isStringSchema()){let n=s.getMergedTraits().mediaType,o=r;if(n)return s.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(n==="application/json"||n.endsWith("+json"))&&(o=lt.from(o)),o}return s.isNumericSchema()?Number(r):s.isBigIntegerSchema()?BigInt(r):s.isBigDecimalSchema()?new pe(r,"bigDecimal"):s.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??qA.toUtf8)((this.serdeContext?.base64Decoder??ZS.fromBase64)(t))}}});var rf,Yr,FA=S(()=>{_e();rf=y(qe());Ui();e_();Yr=class extends Ht{codecDeserializer;stringDeserializer;constructor(t,r){super(),this.codecDeserializer=t,this.stringDeserializer=new Hs(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let s=D.of(t),n=s.getMergedTraits(),o=this.serdeContext?.utf8Encoder??rf.toUtf8;if(n.httpHeader||n.httpResponseCode)return this.stringDeserializer.read(s,o(r));if(n.httpPayload){if(s.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??rf.fromUtf8;return typeof r=="string"?i(r):r}else if(s.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(s,r)}}});var t_,Bc,r_=S(()=>{_e();dt();t_=y(Le());Ui();tf();Bc=class extends Ht{settings;stringBuffer="";constructor(t){super(),this.settings=t}write(t,r){let s=D.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${s.getName(!0)}`);switch(nt(s,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Ho(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??t_.toBase64)(r);return}if(s.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([s.getValueSchema(),s.getMergedTraits()],a);let c=this.flush(),d=s.getValueSchema().isTimestampSchema()?c:BS(c);i!==""&&(i+=", "),i+=d}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let n=s.getMergedTraits().mediaType,o=r;if(n&&((n==="application/json"||n.endsWith("+json"))&&(o=lt.from(o)),s.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??t_.toBase64)(o.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var Xr,$A=S(()=>{_e();r_();Xr=class{codecSerializer;stringSerializer;buffer;constructor(t,r,s=new Bc(r)){this.codecSerializer=t,this.stringSerializer=s}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let s=D.of(t),n=s.getMergedTraits();if(n.httpHeader||n.httpLabel||n.httpQuery){this.stringSerializer.write(s,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(s,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var UA={};ct(UA,{FromStringShapeDeserializer:()=>Hs,HttpBindingProtocol:()=>Jr,HttpInterceptingShapeDeserializer:()=>Yr,HttpInterceptingShapeSerializer:()=>Xr,HttpProtocol:()=>zo,RequestBuilder:()=>ef,RpcProtocol:()=>ur,SerdeContext:()=>Ht,ToStringShapeSerializer:()=>Bc,collectBody:()=>Kt,determineTimestampFormat:()=>nt,extendedEncodeURIComponent:()=>dr,requestBuilder:()=>Vo,resolvedPath:()=>YS});var He=S(()=>{Fl();$l();OA();Zl();DA();LA();XS();e_();FA();$A();r_();tf();Ui()});var jA=S(()=>{He()});function I6(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var BA=S(()=>{});var Zr,HA=S(()=>{Zr=class{authSchemes=new Map;constructor(t){for(let[r,s]of Object.entries(t))s!==void 0&&this.authSchemes.set(r,s)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var zA,s_,n_,VA=S(()=>{zA=y(ye()),s_=y(bn()),n_=class{async sign(t,r,s){if(!s)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!s.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!s.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let n=zA.HttpRequest.clone(t);if(s.in===s_.HttpApiKeyAuthLocation.QUERY)n.query[s.name]=r.apiKey;else if(s.in===s_.HttpApiKeyAuthLocation.HEADER)n.headers[s.name]=s.scheme?`${s.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+s.in+"`");return n}}});var GA,o_,WA=S(()=>{GA=y(ye()),o_=class{async sign(t,r,s){let n=GA.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return n.headers.Authorization=`Bearer ${r.token}`,n}}});var zt,QA=S(()=>{zt=class{async sign(t,r,s){return t}}});var KA=S(()=>{VA();WA();QA()});var JA,P6,Hc,ji,zc,YA=S(()=>{JA=e=>function(r){return ji(r)&&r.expiration.getTime()-Date.now()<e},P6=3e5,Hc=JA(3e5),ji=e=>e.expiration!==void 0,zc=(e,t,r)=>{if(e===void 0)return;let s=typeof e!="function"?async()=>Promise.resolve(e):e,n,o,i,a=!1,c=async d=>{o||(o=s(d));try{n=await o,i=!0,a=!1}finally{o=void 0}return n};return t===void 0?async d=>((!i||d?.forceRefresh)&&(n=await c(d)),n):async d=>((!i||d?.forceRefresh)&&(n=await c(d)),a?n:r(n)?(t(n)&&await c(d),n):(a=!0,n))}});var XA=S(()=>{HA();KA();YA()});var ms={};ct(ms,{DefaultIdentityProviderConfig:()=>Zr,EXPIRATION_MS:()=>P6,HttpApiKeyAuthSigner:()=>n_,HttpBearerAuthSigner:()=>o_,NoAuthSigner:()=>zt,createIsIdentityExpiredFunction:()=>JA,createPaginator:()=>pR,doesIdentityRequireRefresh:()=>ji,getHttpAuthSchemeEndpointRuleSetPlugin:()=>Fs,getHttpAuthSchemePlugin:()=>lV,getHttpSigningPlugin:()=>$s,getSmithyContext:()=>oV,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>YC,httpAuthSchemeMiddleware:()=>Rc,httpAuthSchemeMiddlewareOptions:()=>nR,httpSigningMiddleware:()=>Vy,httpSigningMiddlewareOptions:()=>dR,isIdentityExpired:()=>Hc,memoizeIdentityProvider:()=>zc,normalizeProvider:()=>Ut,requestBuilder:()=>Vo,setFeature:()=>I6});var De=S(()=>{GC();iR();lR();fR();mR();jA();BA();XA()});var es=b(Go=>{"use strict";var a_=bn(),c_=class{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let s=this.hash(t);if(s===!1)return r();if(!this.data.has(s)){if(this.data.size>this.capacity+10){let n=this.data.keys(),o=0;for(;;){let{value:i,done:a}=n.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(s,r())}return this.data.get(s)}size(){return this.data.size}hash(t){let r="",{parameters:s}=this;if(s.length===0)return!1;for(let n of s){let o=String(t[n]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}},N6=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),ZA=e=>N6.test(e)||e.startsWith("[")&&e.endsWith("]"),O6=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),u_=(e,t=!1)=>{if(!t)return O6.test(e);let r=e.split(".");for(let s of r)if(!u_(s))return!1;return!0},d_={},Vc="endpoints";function An(e){return typeof e!="object"||e==null?e:"ref"in e?`$${An(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(An).join(", ")})`:JSON.stringify(e,null,2)}var kt=class extends Error{constructor(t){super(t),this.name="EndpointError"}},k6=(e,t)=>e===t,D6=e=>{let t=e.split("."),r=[];for(let s of t){let n=s.indexOf("[");if(n!==-1){if(s.indexOf("]")!==s.length-1)throw new kt(`Path: '${e}' does not end with ']'`);let o=s.slice(n+1,-1);if(Number.isNaN(parseInt(o)))throw new kt(`Invalid array index: '${o}' in path: '${e}'`);n!==0&&r.push(s.slice(0,n)),r.push(o)}else r.push(s)}return r},eI=(e,t)=>D6(t).reduce((r,s)=>{if(typeof r!="object")throw new kt(`Index '${s}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(s)]:r[s]},e),M6=e=>e!=null,L6=e=>!e,i_={[a_.EndpointURLScheme.HTTP]:80,[a_.EndpointURLScheme.HTTPS]:443},q6=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:h,port:m,protocol:g="",path:w="",query:C={}}=e,T=new URL(`${g}//${h}${m?`:${m}`:""}${w}`);return T.search=Object.entries(C).map(([N,B])=>`${N}=${B}`).join("&"),T}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:s,hostname:n,pathname:o,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(a_.EndpointURLScheme).includes(c))return null;let d=ZA(n),u=r.includes(`${s}:${i_[c]}`)||typeof e=="string"&&e.includes(`${s}:${i_[c]}`),l=`${s}${u?`:${i_[c]}`:""}`;return{scheme:c,authority:l,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:d}},F6=(e,t)=>e===t,$6=(e,t,r,s)=>t>=r||e.length<r?null:s?e.substring(e.length-r,e.length-t):e.substring(t,r),U6=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),j6={booleanEquals:k6,getAttr:eI,isSet:M6,isValidHostLabel:u_,not:L6,parseURL:q6,stringEquals:F6,substring:$6,uriEncode:U6},tI=(e,t)=>{let r=[],s={...t.endpointParams,...t.referenceRecord},n=0;for(;n<e.length;){let o=e.indexOf("{",n);if(o===-1){r.push(e.slice(n));break}r.push(e.slice(n,o));let i=e.indexOf("}",o);if(i===-1){r.push(e.slice(o));break}e[o+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(o+1,i)),n=i+2);let a=e.substring(o+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(eI(s[c],d))}else r.push(s[a]);n=i+1}return r.join("")},B6=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],sf=(e,t,r)=>{if(typeof e=="string")return tI(e,r);if(e.fn)return sI.callFunction(e,r);if(e.ref)return B6(e,r);throw new kt(`'${t}': ${String(e)} is not a string, function or reference.`)},rI=({fn:e,argv:t},r)=>{let s=t.map(o=>["boolean","number"].includes(typeof o)?o:sI.evaluateExpression(o,"arg",r)),n=e.split(".");return n[0]in d_&&n[1]!=null?d_[n[0]][n[1]](...s):j6[e](...s)},sI={evaluateExpression:sf,callFunction:rI},H6=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new kt(`'${e}' is already defined in Reference Record.`);let s=rI(t,r);return r.logger?.debug?.(`${Vc} evaluateCondition: ${An(t)} = ${An(s)}`),{result:s===""?!0:!!s,...e!=null&&{toAssign:{name:e,value:s}}}},l_=(e=[],t)=>{let r={};for(let s of e){let{result:n,toAssign:o}=H6(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!n)return{result:n};o&&(r[o.name]=o.value,t.logger?.debug?.(`${Vc} assign: ${o.name} := ${An(o.value)}`))}return{result:!0,referenceRecord:r}},z6=(e,t)=>Object.entries(e).reduce((r,[s,n])=>({...r,[s]:n.map(o=>{let i=sf(o,"Header value entry",t);if(typeof i!="string")throw new kt(`Header '${s}' value '${i}' is not a string`);return i})}),{}),nI=(e,t)=>Object.entries(e).reduce((r,[s,n])=>({...r,[s]:iI.getEndpointProperty(n,t)}),{}),oI=(e,t)=>{if(Array.isArray(e))return e.map(r=>oI(r,t));switch(typeof e){case"string":return tI(e,t);case"object":if(e===null)throw new kt(`Unexpected endpoint property: ${e}`);return iI.getEndpointProperties(e,t);case"boolean":return e;default:throw new kt(`Unexpected endpoint property type: ${typeof e}`)}},iI={getEndpointProperty:oI,getEndpointProperties:nI},V6=(e,t)=>{let r=sf(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(s){throw console.error(`Failed to construct URL with ${r}`,s),s}throw new kt(`Endpoint URL must be a string, got ${typeof r}`)},G6=(e,t)=>{let{conditions:r,endpoint:s}=e,{result:n,referenceRecord:o}=l_(r,t);if(!n)return;let i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:a,properties:c,headers:d}=s;return t.logger?.debug?.(`${Vc} Resolving endpoint from template: ${An(s)}`),{...d!=null&&{headers:z6(d,i)},...c!=null&&{properties:nI(c,i)},url:V6(a,i)}},W6=(e,t)=>{let{conditions:r,error:s}=e,{result:n,referenceRecord:o}=l_(r,t);if(n)throw new kt(sf(s,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},aI=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let s=G6(r,t);if(s)return s}else if(r.type==="error")W6(r,t);else if(r.type==="tree"){let s=cI.evaluateTreeRule(r,t);if(s)return s}else throw new kt(`Unknown endpoint rule: ${r}`);throw new kt("Rules evaluation failed")},Q6=(e,t)=>{let{conditions:r,rules:s}=e,{result:n,referenceRecord:o}=l_(r,t);if(n)return cI.evaluateRules(s,{...t,referenceRecord:{...t.referenceRecord,...o}})},cI={evaluateRules:aI,evaluateTreeRule:Q6},K6=(e,t)=>{let{endpointParams:r,logger:s}=t,{parameters:n,rules:o}=e;t.logger?.debug?.(`${Vc} Initial EndpointParams: ${An(r)}`);let i=Object.entries(n).filter(([,d])=>d.default!=null).map(([d,u])=>[d,u.default]);if(i.length>0)for(let[d,u]of i)r[d]=r[d]??u;let a=Object.entries(n).filter(([,d])=>d.required).map(([d])=>d);for(let d of a)if(r[d]==null)throw new kt(`Missing required parameter: '${d}'`);let c=aI(o,{endpointParams:r,logger:s,referenceRecord:{}});return t.logger?.debug?.(`${Vc} Resolved endpoint: ${An(c)}`),c};Go.EndpointCache=c_;Go.EndpointError=kt;Go.customEndpointFunctions=d_;Go.isIpAddress=ZA;Go.isValidHostLabel=u_;Go.resolveEndpoint=K6});var uI=b(dI=>{"use strict";function J6(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[s,n=null]=r.split("=");s=decodeURIComponent(s),n&&(n=decodeURIComponent(n)),s in t?Array.isArray(t[s])?t[s].push(n):t[s]=[t[s],n]:t[s]=n}return t}dI.parseQueryString=J6});var vr=b(fI=>{"use strict";var Y6=uI(),lI=e=>{if(typeof e=="string")return lI(new URL(e));let{hostname:t,pathname:r,port:s,protocol:n,search:o}=e,i;return o&&(i=Y6.parseQueryString(o)),{hostname:t,port:s?parseInt(s):void 0,protocol:n,path:r,query:i}};fI.parseUrl=lI});var rs=b(ts=>{"use strict";var Bi=es(),X6=vr(),mI=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!mI(r))return!1;return!0}return!(!Bi.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Bi.isIpAddress(e))},pI=":",Z6="/",eG=e=>{let t=e.split(pI);if(t.length<6)return null;let[r,s,n,o,i,...a]=t;if(r!=="arn"||s===""||n===""||a.join(pI)==="")return null;let c=a.map(d=>d.split(Z6)).flat();return{partition:s,service:n,region:o,accountId:i,resourceId:c}},tG=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],rG="1.1",hI={partitions:tG,version:rG},gI=hI,yI="",SI=e=>{let{partitions:t}=gI;for(let s of t){let{regions:n,outputs:o}=s;for(let[i,a]of Object.entries(n))if(i===e)return{...o,...a}}for(let s of t){let{regionRegex:n,outputs:o}=s;if(new RegExp(n).test(e))return{...o}}let r=t.find(s=>s.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},_I=(e,t="")=>{gI=e,yI=t},sG=()=>{_I(hI,"")},nG=()=>yI,EI={isVirtualHostableS3Bucket:mI,parseArn:eG,partition:SI};Bi.customEndpointFunctions.aws=EI;var oG=e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>wI(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},wI=e=>X6.parseUrl(e.url);Object.defineProperty(ts,"EndpointError",{enumerable:!0,get:function(){return Bi.EndpointError}});Object.defineProperty(ts,"isIpAddress",{enumerable:!0,get:function(){return Bi.isIpAddress}});Object.defineProperty(ts,"resolveEndpoint",{enumerable:!0,get:function(){return Bi.resolveEndpoint}});ts.awsEndpointFunctions=EI;ts.getUserAgentPrefix=nG;ts.partition=SI;ts.resolveDefaultAwsRegionalEndpointsConfig=oG;ts.setPartitionInfo=_I;ts.toEndpointV1=wI;ts.useDefaultPartitionInfo=sG});var nf,Hi,bI=S(()=>{nf={warningEmitted:!1},Hi=e=>{e&&!nf.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(nf.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function In(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var vI=S(()=>{});function xI(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var CI=S(()=>{});function RI(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var TI=S(()=>{});var Pn={};ct(Pn,{emitWarningIfUnsupportedVersion:()=>Hi,setCredentialFeature:()=>In,setFeature:()=>xI,setTokenFeature:()=>RI,state:()=>nf});var ss=S(()=>{bI();vI();CI();TI()});var AI,f_,II=S(()=>{AI=y(ye()),f_=e=>AI.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var zi,p_=S(()=>{zi=e=>new Date(Date.now()+e)});var PI,NI=S(()=>{p_();PI=(e,t)=>Math.abs(zi(t).getTime()-e)>=3e5});var m_,OI=S(()=>{NI();m_=(e,t)=>{let r=Date.parse(e);return PI(r,t)?r-Date.now():t}});var h_=S(()=>{II();p_();OI()});var kI,Gc,Vi,Jt,g_,y_=S(()=>{kI=y(ye());h_();Gc=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Vi=async e=>{let t=Gc("context",e.context),r=Gc("config",e.config),s=t.endpointV2?.properties?.authSchemes?.[0],o=await Gc("signer",r.signer)(s),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}},Jt=class{async sign(t,r,s){if(!kI.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let n=await Vi(s),{config:o,signer:i}=n,{signingRegion:a,signingName:c}=n,d=s.context;if(d?.authSchemes?.length??!1){let[l,h]=d.authSchemes;l?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await i.sign(t,{signingDate:zi(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let s=r.ServerTime??f_(r.$response);if(s){let n=Gc("config",t.config),o=n.systemClockOffset;n.systemClockOffset=m_(s,n.systemClockOffset),n.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let s=f_(t);if(s){let n=Gc("config",r.config);n.systemClockOffset=m_(s,n.systemClockOffset)}}},g_=Jt});var DI,Wc,MI=S(()=>{DI=y(ye());h_();y_();Wc=class extends Jt{async sign(t,r,s){if(!DI.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:n,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}=await Vi(s),u=(await n.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(t,{signingDate:zi(n.systemClockOffset),signingRegion:u,signingService:c})}}});var S_,LI=S(()=>{S_=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var of,__=S(()=>{of=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var qI,FI,Gi,$I=S(()=>{LI();__();qI="AWS_AUTH_SCHEME_PREFERENCE",FI="auth_scheme_preference",Gi={environmentVariableSelector:(e,t)=>{if(t?.signingName&&of(t.signingName)in e)return["httpBearerAuth"];if(qI in e)return S_(e[qI])},configFileSelector:e=>{if(FI in e)return S_(e[FI])},default:[]}});var Me=b(Wo=>{"use strict";var Wi=class e extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let s,n=!0;typeof r=="boolean"?(s=void 0,n=r):r!=null&&typeof r=="object"&&(s=r.logger,n=r.tryNextLink??!0),super(t),this.tryNextLink=n,Object.setPrototypeOf(this,e.prototype),s?.debug?.(`@smithy/property-provider ${n?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},E_=class e extends Wi{name="CredentialsProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},w_=class e extends Wi{name="TokenProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},iG=(...e)=>async()=>{if(e.length===0)throw new Wi("No providers in chain");let t;for(let r of e)try{return await r()}catch(s){if(t=s,s?.tryNextLink)continue;throw s}throw t},aG=e=>()=>Promise.resolve(e),cG=(e,t,r)=>{let s,n,o,i=!1,a=async()=>{n||(n=e());try{s=await n,o=!0,i=!1}finally{n=void 0}return s};return t===void 0?async c=>((!o||c?.forceRefresh)&&(s=await a()),s):async c=>((!o||c?.forceRefresh)&&(s=await a()),i?s:r&&!r(s)?(i=!0,s):(t(s)&&await a(),s))};Wo.CredentialsProviderError=E_;Wo.ProviderError=Wi;Wo.TokenProviderError=w_;Wo.chain=iG;Wo.fromStatic=aG;Wo.memoize=cG});var b_,UI,jI,BI=S(()=>{De();b_=y(Me()),UI=e=>(e.sigv4aSigningRegionSet=Ut(e.sigv4aSigningRegionSet),e),jI={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new b_.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new b_.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var D_=b(ue=>{"use strict";var Nn=Dl(),Qo=qe(),dG=Wy(),GI=ye(),HI=mt(),af=iS(),WI="X-Amz-Algorithm",QI="X-Amz-Credential",A_="X-Amz-Date",KI="X-Amz-SignedHeaders",JI="X-Amz-Expires",I_="X-Amz-Signature",P_="X-Amz-Security-Token",uG="X-Amz-Region-Set",N_="authorization",O_=A_.toLowerCase(),YI="date",XI=[N_,O_,YI],ZI=I_.toLowerCase(),ff="x-amz-content-sha256",eP=P_.toLowerCase(),lG="host",tP={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},rP=/^proxy-/,sP=/^sec-/,fG=[/^proxy-/i,/^sec-/i],cf="AWS4-HMAC-SHA256",pG="AWS4-ECDSA-P256-SHA256",nP="AWS4-HMAC-SHA256-PAYLOAD",oP="UNSIGNED-PAYLOAD",iP=50,k_="aws4_request",aP=3600*24*7,Qi={},df=[],uf=(e,t,r)=>`${e}/${t}/${r}/${k_}`,cP=async(e,t,r,s,n)=>{let o=await zI(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${s}:${n}:${Nn.toHex(o)}:${t.sessionToken}`;if(i in Qi)return Qi[i];for(df.push(i);df.length>iP;)delete Qi[df.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,s,n,k_])a=await zI(e,a,c);return Qi[i]=a},mG=()=>{df.length=0,Object.keys(Qi).forEach(e=>{delete Qi[e]})},zI=(e,t,r)=>{let s=new e(t);return s.update(Qo.toUint8Array(r)),s.digest()},v_=({headers:e},t,r)=>{let s={};for(let n of Object.keys(e).sort()){if(e[n]==null)continue;let o=n.toLowerCase();(o in tP||t?.has(o)||rP.test(o)||sP.test(o))&&(!r||r&&!r.has(o))||(s[o]=e[n].trim().replace(/\s+/g," "))}return s},lf=async({headers:e,body:t},r)=>{for(let s of Object.keys(e))if(s.toLowerCase()===ff)return e[s];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||dG.isArrayBuffer(t)){let s=new r;return s.update(Qo.toUint8Array(t)),Nn.toHex(await s.digest())}return oP},x_=class{format(t){let r=[];for(let o of Object.keys(t)){let i=Qo.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[o]))}let s=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),n=0;for(let o of r)s.set(o,n),n+=o.byteLength;return s}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let s=new DataView(new ArrayBuffer(5));return s.setUint8(0,4),s.setInt32(1,t.value,!1),new Uint8Array(s.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(t.value.bytes,1),n;case"binary":let o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(t.value,3),i;case"string":let a=Qo.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let u=new Uint8Array(9);return u[0]=8,u.set(C_.fromNumber(t.value.valueOf()).bytes,1),u;case"uuid":if(!hG.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let l=new Uint8Array(17);return l[0]=9,l.set(Nn.fromHex(t.value.replace(/\-/g,"")),1),l}}},hG=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,C_=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let s=7,n=Math.abs(Math.round(t));s>-1&&n>0;s--,n/=256)r[s]=n;return t<0&&VI(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&VI(t),parseInt(Nn.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function VI(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var dP=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},uP=(e,t={})=>{let{headers:r,query:s={}}=GI.HttpRequest.clone(e);for(let n of Object.keys(r)){let o=n.toLowerCase();(o.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(o)||t.hoistableHeaders?.has(o))&&(s[n]=r[n],delete r[n])}return{...e,headers:r,query:s}},R_=e=>{e=GI.HttpRequest.clone(e);for(let t of Object.keys(e.headers))XI.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},lP=({query:e={}})=>{let t=[],r={};for(let s of Object.keys(e)){if(s.toLowerCase()===ZI)continue;let n=af.escapeUri(s);t.push(n);let o=e[s];typeof o=="string"?r[n]=`${n}=${af.escapeUri(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((i,a)=>i.concat([`${n}=${af.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(s=>r[s]).filter(s=>s).join("&")},gG=e=>yG(e).toISOString().replace(/\.\d{3}Z$/,"Z"),yG=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,pf=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:s,service:n,sha256:o,uriEscapePath:i=!0}){this.service=n,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=HI.normalizeProvider(s),this.credentialProvider=HI.normalizeProvider(r)}createCanonicalRequest(t,r,s){let n=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${lP(t)}
${n.map(o=>`${o}:${r[o]}`).join(`
`)}

${n.join(";")}
${s}`}async createStringToSign(t,r,s,n){let o=new this.sha256;o.update(Qo.toUint8Array(s));let i=await o.digest();return`${n}
${t}
${r}
${Nn.toHex(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let o of t.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let s=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return af.escapeUri(s).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=gG(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},T_=class extends pf{headerFormatter=new x_;constructor({applyChecksum:t,credentials:r,region:s,service:n,sha256:o,uriEscapePath:i=!0}){super({applyChecksum:t,credentials:r,region:s,service:n,sha256:o,uriEscapePath:i})}async presign(t,r={}){let{signingDate:s=new Date,expiresIn:n=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:d,signingService:u}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let h=d??await this.regionProvider(),{longDate:m,shortDate:g}=this.formatDate(s);if(n>aP)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let w=uf(g,h,u??this.service),C=uP(R_(t),{unhoistableHeaders:i,hoistableHeaders:c});l.sessionToken&&(C.query[P_]=l.sessionToken),C.query[WI]=cf,C.query[QI]=`${l.accessKeyId}/${w}`,C.query[A_]=m,C.query[JI]=n.toString(10);let T=v_(C,o,a);return C.query[KI]=this.getCanonicalHeaderList(T),C.query[I_]=await this.getSignature(m,w,this.getSigningKey(l,h,g,u),this.createCanonicalRequest(C,T,await lf(t,this.sha256))),C}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:s=new Date,priorSignature:n,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:c,longDate:d}=this.formatDate(s),u=uf(c,a,i??this.service),l=await lf({headers:{},body:r},this.sha256),h=new this.sha256;h.update(t);let m=Nn.toHex(await h.digest()),g=[nP,d,u,n,m,l].join(`
`);return this.signString(g,{signingDate:s,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:s,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:s,signingService:n,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:s,signingService:n}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=s??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(o,i,a,n));return c.update(Qo.toUint8Array(t)),Nn.toHex(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:s,unsignableHeaders:n,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=o??await this.regionProvider(),d=R_(t),{longDate:u,shortDate:l}=this.formatDate(r),h=uf(l,c,i??this.service);d.headers[O_]=u,a.sessionToken&&(d.headers[eP]=a.sessionToken);let m=await lf(d,this.sha256);!dP(ff,d.headers)&&this.applyChecksum&&(d.headers[ff]=m);let g=v_(d,n,s),w=await this.getSignature(u,h,this.getSigningKey(a,c,l,i),this.createCanonicalRequest(d,g,m));return d.headers[N_]=`${cf} Credential=${a.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(g)}, Signature=${w}`,d}async getSignature(t,r,s,n){let o=await this.createStringToSign(t,r,n,cf),i=new this.sha256(await s);return i.update(Qo.toUint8Array(o)),Nn.toHex(await i.digest())}getSigningKey(t,r,s,n){return cP(this.sha256,t,s,r,n||this.service)}},SG={SignatureV4a:null};ue.ALGORITHM_IDENTIFIER=cf;ue.ALGORITHM_IDENTIFIER_V4A=pG;ue.ALGORITHM_QUERY_PARAM=WI;ue.ALWAYS_UNSIGNABLE_HEADERS=tP;ue.AMZ_DATE_HEADER=O_;ue.AMZ_DATE_QUERY_PARAM=A_;ue.AUTH_HEADER=N_;ue.CREDENTIAL_QUERY_PARAM=QI;ue.DATE_HEADER=YI;ue.EVENT_ALGORITHM_IDENTIFIER=nP;ue.EXPIRES_QUERY_PARAM=JI;ue.GENERATED_HEADERS=XI;ue.HOST_HEADER=lG;ue.KEY_TYPE_IDENTIFIER=k_;ue.MAX_CACHE_SIZE=iP;ue.MAX_PRESIGNED_TTL=aP;ue.PROXY_HEADER_PATTERN=rP;ue.REGION_SET_PARAM=uG;ue.SEC_HEADER_PATTERN=sP;ue.SHA256_HEADER=ff;ue.SIGNATURE_HEADER=ZI;ue.SIGNATURE_QUERY_PARAM=I_;ue.SIGNED_HEADERS_QUERY_PARAM=KI;ue.SignatureV4=T_;ue.SignatureV4Base=pf;ue.TOKEN_HEADER=eP;ue.TOKEN_QUERY_PARAM=P_;ue.UNSIGNABLE_PATTERNS=fG;ue.UNSIGNED_PAYLOAD=oP;ue.clearCredentialCache=mG;ue.createScope=uf;ue.getCanonicalHeaders=v_;ue.getCanonicalQuery=lP;ue.getPayloadHash=lf;ue.getSigningKey=cP;ue.hasHeader=dP;ue.moveHeadersToQuery=uP;ue.prepareRequest=R_;ue.signatureV4aContainer=SG});function _G(e,{credentials:t,credentialDefaultProvider:r}){let s;return t?t?.memoized?s=t:s=zc(t,Hc,ji):r?s=Ut(r(Object.assign({},e,{parentClientConfig:e}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function EG(e,t){if(t.configBound)return t;let r=async s=>t({...s,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var M_,Ko,fP,pP=S(()=>{ss();De();M_=y(D_()),Ko=e=>{let t=e.credentials,r=!!e.credentials,s;Object.defineProperty(e,"credentials",{set(d){d&&d!==t&&d!==s&&(r=!0),t=d;let u=_G(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),l=EG(e,u);r&&!l.attributed?(s=async h=>l(h).then(m=>In(m,"CREDENTIALS_CODE","e")),s.memoized=l.memoized,s.configBound=l.configBound,s.attributed=!0):s=l},get(){return s},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=Ut(e.signer):e.regionInfoProvider?a=()=>Ut(e.region)().then(async d=>[await e.regionInfoProvider(d,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},d]).then(([d,u])=>{let{signingRegion:l,signingService:h}=d;e.signingRegion=e.signingRegion||l||u,e.signingName=e.signingName||h||e.serviceId;let m={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},g=e.signerConstructor||M_.SignatureV4;return new g(m)}):a=async d=>{d=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Ut(e.region)(),properties:{}},d);let u=d.signingRegion,l=d.signingName;e.signingRegion=e.signingRegion||u,e.signingName=e.signingName||l||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},m=e.signerConstructor||M_.SignatureV4;return new m(h)},Object.assign(e,{systemClockOffset:o,signingEscapePath:n,signer:a})},fP=Ko});var mP=S(()=>{y_();MI();$I();BI();pP()});var hP={};ct(hP,{AWSSDKSigV4Signer:()=>g_,AwsSdkSigV4ASigner:()=>Wc,AwsSdkSigV4Signer:()=>Jt,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Gi,NODE_SIGV4A_CONFIG_OPTIONS:()=>jI,getBearerTokenEnvKey:()=>of,resolveAWSSDKSigV4Config:()=>fP,resolveAwsSdkSigV4AConfig:()=>UI,resolveAwsSdkSigV4Config:()=>Ko,validateSigningProperties:()=>Vi});var L_=S(()=>{mP();__()});function On(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function mf(e){return e[q_]=!0,e}var q_,hf=S(()=>{q_=Symbol("@smithy/core/cbor::tagSymbol")});function SP(e){Ne=e,Vs=new DataView(Ne.buffer,Ne.byteOffset,Ne.byteLength)}function hs(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(Ne[e]&224)>>5,s=Ne[e]&31;switch(r){case 0:case 1:case 6:let n,o;if(s<24)n=s,o=1;else switch(s){case 24:case 25:case 26:case 27:let i=EP[s],a=i+1;if(o=a,t-e<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let c=e+1;i===1?n=Ne[c]:i===2?n=Vs.getUint16(c):i===4?n=Vs.getUint32(c):n=Vs.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${s}.`)}if(r===0)return me=o,F_(n);if(r===1){let i;return typeof n=="bigint"?i=BigInt(-1)-n:i=-1-n,me=o,F_(i)}else if(s===2||s===3){let i=Yc(e+o,t),a=BigInt(0),c=e+o+me;for(let d=c;d<c+i;++d)a=a<<BigInt(8)|BigInt(Ne[d]);return me=o+me+i,s===3?-a-BigInt(1):a}else if(s===4){let i=hs(e+o,t),[a,c]=i,d=c<0?-1:1,u="0".repeat(Math.abs(a)+1)+String(BigInt(d)*BigInt(c)),l,h=c<0?"-":"";return l=a===0?u:u.slice(0,u.length+a)+"."+u.slice(a),l=l.replace(/^0+/g,""),l===""&&(l="0"),l[0]==="."&&(l="0"+l),l=h+l,me=o+me,KS(l)}else{let i=hs(e+o,t);return me=o+me,mf({tag:F_(n),value:i})}case 3:case 5:case 4:case 2:if(s===31)switch(r){case 3:return TG(e,t);case 5:return OG(e,t);case 4:return PG(e,t);case 2:return AG(e,t)}else switch(r){case 3:return RG(e,t);case 5:return NG(e,t);case 4:return IG(e,t);case 2:return z_(e,t)}default:return kG(e,t)}}function _P(e,t,r){return vG&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):gP?gP.decode(e.subarray(t,r)):(0,yP.toUtf8)(e.subarray(t,r))}function xG(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function CG(e,t){let r=e>>7,s=(e&124)>>2,n=(e&3)<<8|t,o=r===0?1:-1,i,a;if(s===0){if(n===0)return 0;i=Math.pow(2,-14),a=0}else{if(s===31)return n===0?o*(1/0):NaN;i=Math.pow(2,s-15),a=1}return a+=n/1024,o*(i*a)}function Yc(e,t){let r=Ne[e]&31;if(r<24)return me=1,r;if(r===24||r===25||r===26||r===27){let s=EP[r];if(me=s+1,t-e<me)throw new Error(`countLength ${s} greater than remaining buf len.`);let n=e+1;return s===1?Ne[n]:s===2?Vs.getUint16(n):s===4?Vs.getUint32(n):xG(Vs.getBigUint64(n))}throw new Error(`unexpected minor value ${r}.`)}function RG(e,t){let r=Yc(e,t),s=me;if(e+=s,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let n=_P(Ne,e,e+r);return me=s+r,n}function TG(e,t){e+=1;let r=[];for(let s=e;e<t;){if(Ne[e]===255){let c=On(r.length);return c.set(r,0),me=e-s+2,_P(c,0,c.length)}let n=(Ne[e]&224)>>5,o=Ne[e]&31;if(n!==3)throw new Error(`unexpected major type ${n} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=z_(e,t);e+=me;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function z_(e,t){let r=Yc(e,t),s=me;if(e+=s,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let n=Ne.subarray(e,e+r);return me=s+r,n}function AG(e,t){e+=1;let r=[];for(let s=e;e<t;){if(Ne[e]===255){let c=On(r.length);return c.set(r,0),me=e-s+2,c}let n=(Ne[e]&224)>>5,o=Ne[e]&31;if(n!==2)throw new Error(`unexpected major type ${n} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=z_(e,t);e+=me;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function IG(e,t){let r=Yc(e,t),s=me;e+=s;let n=e,o=Array(r);for(let i=0;i<r;++i){let a=hs(e,t),c=me;o[i]=a,e+=c}return me=s+(e-n),o}function PG(e,t){e+=1;let r=[];for(let s=e;e<t;){if(Ne[e]===255)return me=e-s+2,r;let n=hs(e,t);e+=me,r.push(n)}throw new Error("expected break marker.")}function NG(e,t){let r=Yc(e,t),s=me;e+=s;let n=e,o={};for(let i=0;i<r;++i){if(e>=t)throw new Error("unexpected end of map payload.");let a=(Ne[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let c=hs(e,t);e+=me;let d=hs(e,t);e+=me,o[c]=d}return me=s+(e-n),o}function OG(e,t){e+=1;let r=e,s={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(Ne[e]===255)return me=e-r+2,s;let n=(Ne[e]&224)>>5;if(n!==3)throw new Error(`unexpected major type ${n} for map key.`);let o=hs(e,t);e+=me;let i=hs(e,t);e+=me,s[o]=i}throw new Error("expected break marker.")}function kG(e,t){let r=Ne[e]&31;switch(r){case 21:case 20:return me=1,r===21;case 22:return me=1,null;case 23:return me=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return me=3,CG(Ne[e+1],Ne[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return me=5,Vs.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return me=9,Vs.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function F_(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var yP,bG,vG,Ne,Vs,gP,me,EP,wP=S(()=>{dt();yP=y(qe());hf();bG=typeof TextDecoder<"u",vG=typeof Buffer<"u",Ne=On(0),Vs=new DataView(Ne.buffer,Ne.byteOffset,Ne.byteLength),gP=bG?new TextDecoder:null,me=0;EP={24:1,25:2,26:4,27:8}});function G_(e){se.byteLength-K<e&&(K<16e6?yf(Math.max(se.byteLength*4,se.byteLength+e)):yf(se.byteLength+e+16e6))}function W_(){let e=On(K);return e.set(se.subarray(0,K),0),K=0,e}function yf(e){let t=se;se=On(e),t&&(t.copy?t.copy(se,0,0,t.byteLength):se.set(t,0)),Qs=new DataView(se.buffer,se.byteOffset,se.byteLength)}function Ws(e,t){t<24?se[K++]=e<<5|t:t<256?(se[K++]=e<<5|24,se[K++]=t):t<65536?(se[K++]=e<<5|25,Qs.setUint16(K,t),K+=2):t<2**32?(se[K++]=e<<5|26,Qs.setUint32(K,t),K+=4):(se[K++]=e<<5|27,Qs.setBigUint64(K,typeof t=="bigint"?t:BigInt(t)),K+=8)}function xP(e){let t=[e];for(;t.length;){let r=t.pop();if(G_(typeof r=="string"?r.length*4:64),typeof r=="string"){if(bP)Ws(3,Buffer.byteLength(r)),K+=se.write(r,K);else{let s=(0,vP.fromUtf8)(r);Ws(3,s.byteLength),se.set(s,K),K+=s.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let s=r>=0,n=s?0:1,o=s?r:-r-1;o<24?se[K++]=n<<5|o:o<256?(se[K++]=n<<5|24,se[K++]=o):o<65536?(se[K++]=n<<5|25,se[K++]=o>>8,se[K++]=o):o<4294967296?(se[K++]=n<<5|26,Qs.setUint32(K,o),K+=4):(se[K++]=n<<5|27,Qs.setBigUint64(K,BigInt(o)),K+=8);continue}se[K++]=251,Qs.setFloat64(K,r),K+=8;continue}else if(typeof r=="bigint"){let s=r>=0,n=s?0:1,o=s?r:-r-BigInt(1),i=Number(o);if(i<24)se[K++]=n<<5|i;else if(i<256)se[K++]=n<<5|24,se[K++]=i;else if(i<65536)se[K++]=n<<5|25,se[K++]=i>>8,se[K++]=i&255;else if(i<4294967296)se[K++]=n<<5|26,Qs.setUint32(K,i),K+=4;else if(o<BigInt("18446744073709551616"))se[K++]=n<<5|27,Qs.setBigUint64(K,o),K+=8;else{let a=o.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),d=o,u=0;for(;c.byteLength-++u>=0;)c[c.byteLength-u]=Number(d&BigInt(255)),d>>=BigInt(8);G_(c.byteLength*2),se[K++]=s?194:195,bP?Ws(2,Buffer.byteLength(c)):Ws(2,c.byteLength),se.set(c,K),K+=c.byteLength}continue}else if(r===null){se[K++]=246;continue}else if(typeof r=="boolean"){se[K++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let s=r.length-1;s>=0;--s)t.push(r[s]);Ws(4,r.length);continue}else if(typeof r.byteLength=="number"){G_(r.length*2),Ws(2,r.length),se.set(r,K),K+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof pe){let n=r.string.indexOf("."),o=n===-1?0:n-r.string.length+1,i=BigInt(r.string.replace(".",""));se[K++]=196,t.push(i),t.push(o),Ws(4,2);continue}if(r[q_])if("tag"in r&&"value"in r){t.push(r.value),Ws(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let s=Object.keys(r);for(let n=s.length-1;n>=0;--n){let o=s[n];t.push(r[o]),t.push(o)}Ws(5,s.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var vP,bP,DG,se,Qs,K,CP=S(()=>{dt();vP=y(qe());hf();bP=typeof Buffer<"u",DG=2048,se=On(DG),Qs=new DataView(se.buffer,se.byteOffset,se.byteLength),K=0});var Q_,RP=S(()=>{wP();CP();Q_={deserialize(e){return SP(e),hs(0,e.length)},serialize(e){try{return xP(e),W_()}catch(t){throw W_(),t}},resizeEncodingBuffer(e){yf(e)}}});var Sf,Ji,_f=S(()=>{hf();Sf=e=>mf({tag:1,value:e.getTime()/1e3}),Ji=(e,t)=>{let r=n=>{let o=n;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o};if(t.__type!==void 0)return r(t.__type);let s=Object.keys(t).find(n=>n.toLowerCase()==="code");if(s&&t[s]!==void 0)return r(t[s])}});var Y_,Ef,K_,J_,X_=S(()=>{He();_e();dt();Y_=y(Le());RP();_f();Ef=class extends Ht{createSerializer(){let t=new K_;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new J_;return t.setSerdeContext(this.serdeContext),t}},K_=class extends Ht{value;write(t,r){this.value=this.serialize(t,r)}serialize(t,r){let s=D.of(t);if(r==null)return s.isIdempotencyToken()?(0,Ot.v4)():r;if(s.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Y_.fromBase64)(r):r;if(s.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?Sf(new Date(Number(r)/1e3|0)):Sf(r);if(typeof r=="function"||typeof r=="object"){let n=r;if(s.isListSchema()&&Array.isArray(n)){let i=!!s.getMergedTraits().sparse,a=[],c=0;for(let d of n){let u=this.serialize(s.getValueSchema(),d);(u!=null||i)&&(a[c++]=u)}return a}if(n instanceof Date)return Sf(n);let o={};if(s.isMapSchema()){let i=!!s.getMergedTraits().sparse;for(let a of Object.keys(n)){let c=this.serialize(s.getValueSchema(),n[a]);(c!=null||i)&&(o[a]=c)}}else if(s.isStructSchema())for(let[i,a]of s.structIterator()){let c=this.serialize(a,n[i]);c!=null&&(o[i]=c)}else if(s.isDocumentSchema())for(let i of Object.keys(n))o[i]=this.serialize(s.getValueSchema(),n[i]);return o}return r}flush(){let t=Q_.serialize(this.value);return this.value=void 0,t}},J_=class extends Ht{read(t,r){let s=Q_.deserialize(r);return this.readValue(t,s)}readValue(t,r){let s=D.of(t);if(s.isTimestampSchema()&&typeof r=="number")return Uc(r);if(s.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Y_.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||s.isDocumentSchema())return r;if(s.isListSchema()){let o=[],i=s.getValueSchema(),a=!!s.getMergedTraits().sparse;for(let c of r){let d=this.readValue(i,c);(d!=null||a)&&o.push(d)}return o}let n={};if(s.isMapSchema()){let o=!!s.getMergedTraits().sparse,i=s.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(i,r[a]);(c!=null||o)&&(n[a]=c)}}else if(s.isStructSchema())for(let[o,i]of s.structIterator())n[o]=this.readValue(i,r[o]);return n}else return r}}});var TP,Yi,AP=S(()=>{He();_e();TP=y(mt());X_();_f();Yi=class extends ur{codec=new Ef;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);if(Object.assign(n.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Bt(t.input)==="unit")delete n.body,delete n.headers["content-type"];else{n.body||(this.serializer.write(15,{}),n.body=this.serializer.flush());try{n.headers["content-length"]=String(n.body.byteLength)}catch{}}let{service:o,operation:i}=(0,TP.getSmithyContext)(s),a=`/service/${o}/operation/${i}`;return n.path.endsWith("/")?n.path+=a.slice(1):n.path+=a,n}async deserializeResponse(t,r,s){return super.deserializeResponse(t,r,s)}async handleError(t,r,s,n,o){let i=Ji(s,n)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let c={$metadata:o,$response:s,$fault:s.statusCode<=500?"client":"server"},d=ve.for(a),u;try{u=d.getSchema(i)}catch{n.Message&&(n.message=n.Message);let T=ve.for("smithy.ts.sdk.synthetic."+a),N=T.getBaseException();if(N){let B=T.getErrorCtor(N);throw Object.assign(new B({name:i}),c,n)}throw Object.assign(new Error(i),c,n)}let l=D.of(u),h=d.getErrorCtor(u),m=n.message??n.Message??"Unknown",g=new h(m),w={};for(let[C,T]of l.structIterator())w[C]=this.deserializer.readValue(T,n[C]);throw Object.assign(g,c,{$fault:l.getMergedTraits().error,message:m},w)}getDefaultContentType(){return"application/cbor"}}});var Z_=S(()=>{_f();AP();X_()});var xr,Xi=S(()=>{_e();xr=class{resolveRestContentType(t,r){let s=r.getMemberSchemas(),n=Object.values(s).find(o=>!!o.getMergedTraits().httpPayload);if(n){let o=n.getMergedTraits().mediaType;return o||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(s).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:d,httpLabel:u,httpPrefixHeaders:l}=i.getMergedTraits();return!a&&!c&&!d&&!u&&l===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,s,n,o,i){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let d={$metadata:o,$response:s,$fault:s.statusCode<500?"client":"server"},u=ve.for(a);try{return{errorSchema:i?.(u,c)??u.getSchema(t),errorMetadata:d}}catch{n.message=n.message??n.Message??"UnknownError";let h=ve.for("smithy.ts.sdk.synthetic."+a),m=h.getBaseException();if(m){let g=h.getErrorCtor(m)??Error;throw Object.assign(new g({name:c}),d,n)}throw Object.assign(new Error(c),d,n)}}setQueryCompatError(t,r){let s=r.headers?.["x-amzn-query-error"];if(t!==void 0&&s!=null){let[n,o]=s.split(";"),i=Object.entries(t),a={Code:n,Type:o};Object.assign(t,a);for(let[c,d]of i)a[c]=d;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var wf,IP=S(()=>{Z_();_e();Xi();wf=class extends Yi{awsQueryCompatible;mixin=new xr;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),n}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=Ji(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u),m={};for(let[g,w]of d.structIterator())m[g]=this.deserializer.readValue(w,n[g]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}}});var PP,NP,OP,kP=S(()=>{PP=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},NP=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},OP=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var Dt,Ln=S(()=>{Dt=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function DP(e,t,r){if(r?.source){let s=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||s!==String(t)))return s.includes(".")?new pe(s,"bigDecimal"):BigInt(s)}return t}var MP=S(()=>{dt()});var $P=b(FP=>{"use strict";var Jo=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let s of t)r.push(s);return r},qn=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,eE=()=>{let e=[],t=[],r=!1,s=new Set,n=l=>l.sort((h,m)=>LP[m.step]-LP[h.step]||qP[m.priority||"normal"]-qP[h.priority||"normal"]),o=l=>{let h=!1,m=g=>{let w=Jo(g.name,g.aliases);if(w.includes(l)){h=!0;for(let C of w)s.delete(C);return!1}return!0};return e=e.filter(m),t=t.filter(m),h},i=l=>{let h=!1,m=g=>{if(g.middleware===l){h=!0;for(let w of Jo(g.name,g.aliases))s.delete(w);return!1}return!0};return e=e.filter(m),t=t.filter(m),h},a=l=>(e.forEach(h=>{l.add(h.middleware,{...h})}),t.forEach(h=>{l.addRelativeTo(h.middleware,{...h})}),l.identifyOnResolve?.(u.identifyOnResolve()),l),c=l=>{let h=[];return l.before.forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h.push(l),l.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h},d=(l=!1)=>{let h=[],m=[],g={};return e.forEach(C=>{let T={...C,before:[],after:[]};for(let N of Jo(T.name,T.aliases))g[N]=T;h.push(T)}),t.forEach(C=>{let T={...C,before:[],after:[]};for(let N of Jo(T.name,T.aliases))g[N]=T;m.push(T)}),m.forEach(C=>{if(C.toMiddleware){let T=g[C.toMiddleware];if(T===void 0){if(l)return;throw new Error(`${C.toMiddleware} is not found when adding ${qn(C.name,C.aliases)} middleware ${C.relation} ${C.toMiddleware}`)}C.relation==="after"&&T.after.push(C),C.relation==="before"&&T.before.push(C)}}),n(h).map(c).reduce((C,T)=>(C.push(...T),C),[])},u={add:(l,h={})=>{let{name:m,override:g,aliases:w}=h,C={step:"initialize",priority:"normal",middleware:l,...h},T=Jo(m,w);if(T.length>0){if(T.some(N=>s.has(N))){if(!g)throw new Error(`Duplicate middleware name '${qn(m,w)}'`);for(let N of T){let B=e.findIndex(Z=>Z.name===N||Z.aliases?.some(we=>we===N));if(B===-1)continue;let V=e[B];if(V.step!==C.step||C.priority!==V.priority)throw new Error(`"${qn(V.name,V.aliases)}" middleware with ${V.priority} priority in ${V.step} step cannot be overridden by "${qn(m,w)}" middleware with ${C.priority} priority in ${C.step} step.`);e.splice(B,1)}}for(let N of T)s.add(N)}e.push(C)},addRelativeTo:(l,h)=>{let{name:m,override:g,aliases:w}=h,C={middleware:l,...h},T=Jo(m,w);if(T.length>0){if(T.some(N=>s.has(N))){if(!g)throw new Error(`Duplicate middleware name '${qn(m,w)}'`);for(let N of T){let B=t.findIndex(Z=>Z.name===N||Z.aliases?.some(we=>we===N));if(B===-1)continue;let V=t[B];if(V.toMiddleware!==C.toMiddleware||V.relation!==C.relation)throw new Error(`"${qn(V.name,V.aliases)}" middleware ${V.relation} "${V.toMiddleware}" middleware cannot be overridden by "${qn(m,w)}" middleware ${C.relation} "${C.toMiddleware}" middleware.`);t.splice(B,1)}}for(let N of T)s.add(N)}t.push(C)},clone:()=>a(eE()),use:l=>{l.applyToStack(u)},remove:l=>typeof l=="string"?o(l):i(l),removeByTag:l=>{let h=!1,m=g=>{let{tags:w,name:C,aliases:T}=g;if(w&&w.includes(l)){let N=Jo(C,T);for(let B of N)s.delete(B);return h=!0,!1}return!0};return e=e.filter(m),t=t.filter(m),h},concat:l=>{let h=a(eE());return h.use(l),h.identifyOnResolve(r||h.identifyOnResolve()||(l.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>d(!0).map(l=>{let h=l.step??l.relation+" "+l.toMiddleware;return qn(l.name,l.aliases)+" - "+h}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,h)=>{for(let m of d().map(g=>g.middleware).reverse())l=m(l,h);return r&&console.log(u.identify()),l}};return u},LP={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},qP={high:3,normal:2,low:1};FP.constructStack=eE});var U=b(Pe=>{"use strict";var BP=$P(),dE=(He(),Q(UA)),rE=bn(),MG=(_e(),Q(TS)),UP=(dt(),Q(CA)),sE=class{config;middlewareStack=BP.constructStack();initConfig;handlers;constructor(t){this.config=t}send(t,r,s){let n=typeof r!="function"?r:void 0,o=typeof r=="function"?r:s,i=n===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,n),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,n);if(o)a(t).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},tE="***SensitiveInformation***";function nE(e,t){if(t==null)return t;let r=MG.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return tE;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return tE}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return tE}else if(r.isStructSchema()&&typeof t=="object"){let s=t,n={};for(let[o,i]of r.structIterator())s[o]!=null&&(n[o]=nE(i,s[o]));return n}return t}var bf=class{middlewareStack=BP.constructStack();schema;static classBuilder(){return new oE}resolveMiddlewareWithContext(t,r,s,{middlewareFn:n,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:d,additionalContext:u,CommandCtor:l}){for(let C of n.bind(this)(l,t,r,s))this.middlewareStack.use(C);let h=t.concat(this.middlewareStack),{logger:m}=r,g={logger:m,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[rE.SMITHY_CONTEXT_KEY]:{commandInstance:this,...d},...u},{requestHandler:w}=r;return h.resolve(C=>w.handle(C.request,s||{}),g)}},oE=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,s={}){return this._smithyContext={service:t,operation:r,...s},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=s=>s,r=s=>s){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends bf{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[s]){super(),this.input=s??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(s,n,o){let i=t._operationSchema,a=i?.[4]??i?.input,c=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(s,n,o,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(i?nE.bind(null,a):d=>d),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(i?nE.bind(null,c):d=>d),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}},LG="***SensitiveInformation***",qG=(e,t)=>{for(let r of Object.keys(e)){let s=e[r],n=async function(i,a,c){let d=new s(i);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[o]=n}},iE=class e extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},HP=(e,t={})=>{Object.entries(t).filter(([,s])=>s!==void 0).forEach(([s,n])=>{(e[s]==null||e[s]==="")&&(e[s]=n)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},zP=({output:e,parsedBody:t,exceptionCtor:r,errorCode:s})=>{let n=$G(e),o=n.httpStatusCode?n.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||s||o||"UnknownError",$fault:"client",$metadata:n});throw HP(i,t)},FG=e=>({output:t,parsedBody:r,errorCode:s})=>{zP({output:t,parsedBody:r,exceptionCtor:e,errorCode:s})},$G=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),UG=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},jP=!1,jG=e=>{e&&!jP&&parseInt(e.substring(1,e.indexOf(".")))<16&&(jP=!0)},BG=e=>{let t=[];for(let r in rE.AlgorithmId){let s=rE.AlgorithmId[r];e[s]!==void 0&&t.push({algorithmId:()=>s,checksumConstructor:()=>e[s]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},HG=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},zG=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),VG=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},VP=e=>Object.assign(BG(e),zG(e)),GG=VP,WG=e=>Object.assign(HG(e),VG(e)),QG=e=>Array.isArray(e)?e:[e],GP=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=GP(e[r]));return e},KG=e=>e!=null,aE=class{trace(){}debug(){}info(){}warn(){}error(){}};function WP(e,t,r){let s,n,o;if(typeof t>"u"&&typeof r>"u")s={},o=e;else{if(s=e,typeof t=="function")return n=t,o=r,XG(s,n,o);o=t}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){s[i]=o[i];continue}QP(s,null,o,i)}return s}var JG=e=>{let t={};for(let[r,s]of Object.entries(e||{}))t[r]=[,s];return t},YG=(e,t)=>{let r={};for(let s in t)QP(r,e,t,s);return r},XG=(e,t,r)=>WP(e,Object.entries(r).reduce((s,[n,o])=>(Array.isArray(o)?s[n]=o:typeof o=="function"?s[n]=[t,o()]:s[n]=[t,o],s),{})),QP=(e,t,r,s)=>{if(t!==null){let i=r[s];typeof i=="function"&&(i=[,i]);let[a=ZG,c=eW,d=s]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[s]=c(t[d]));return}let[n,o]=r[s];if(typeof o=="function"){let i,a=n===void 0&&(i=o())!=null,c=typeof n=="function"&&!!n(void 0)||typeof n!="function"&&!!n;a?e[s]=i:c&&(e[s]=o())}else{let i=n===void 0&&o!=null,a=typeof n=="function"&&!!n(o)||typeof n!="function"&&!!n;(i||a)&&(e[s]=o)}},ZG=e=>e!=null,eW=e=>e,tW=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},rW=e=>e.toISOString().replace(".000Z","Z"),cE=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(cE);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=cE(e[r]));return t}return e};Object.defineProperty(Pe,"collectBody",{enumerable:!0,get:function(){return dE.collectBody}});Object.defineProperty(Pe,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return dE.extendedEncodeURIComponent}});Object.defineProperty(Pe,"resolvedPath",{enumerable:!0,get:function(){return dE.resolvedPath}});Pe.Client=sE;Pe.Command=bf;Pe.NoOpLogger=aE;Pe.SENSITIVE_STRING=LG;Pe.ServiceException=iE;Pe._json=cE;Pe.convertMap=JG;Pe.createAggregatedClient=qG;Pe.decorateServiceException=HP;Pe.emitWarningIfUnsupportedVersion=jG;Pe.getArrayIfSingleItem=QG;Pe.getDefaultClientConfiguration=GG;Pe.getDefaultExtensionConfiguration=VP;Pe.getValueFromTextNode=GP;Pe.isSerializableHeaderValue=KG;Pe.loadConfigsForDefaultMode=UG;Pe.map=WP;Pe.resolveDefaultRuntimeConfig=WG;Pe.serializeDateTime=rW;Pe.serializeFloat=tW;Pe.take=YG;Pe.throwDefaultError=zP;Pe.withBaseException=FG;Object.keys(UP).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Pe,e)&&Object.defineProperty(Pe,e,{enumerable:!0,get:function(){return UP[e]}})})});var KP,JP,vf,uE=S(()=>{KP=y(U()),JP=y(qe()),vf=(e,t)=>(0,KP.collectBody)(e,t).then(r=>(t?.utf8Encoder??JP.toUtf8)(r))});var Yo,xf,Fn,Xc=S(()=>{uE();Yo=(e,t)=>vf(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(s){throw s?.name==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:r}),s}return{}}),xf=async(e,t)=>{let r=await Yo(e,t);return r.message=r.message??r.Message,r},Fn=(e,t)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),s=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return s(e.headers[n]);if(t&&typeof t=="object"){let o=r(t,"code");if(o&&t[o]!==void 0)return s(t[o]);if(t.__type!==void 0)return s(t.__type)}}});var YP,Zi,lE=S(()=>{He();_e();dt();YP=y(Le());Ln();MP();Xc();Zi=class extends Dt{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,DP):await Yo(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let s=r!==null&&typeof r=="object",n=D.of(t);if(n.isListSchema()&&Array.isArray(r)){let i=n.getValueSchema(),a=[],c=!!n.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._read(i,d));return a}else if(n.isMapSchema()&&s){let i=n.getValueSchema(),a={},c=!!n.getMergedTraits().sparse;for(let[d,u]of Object.entries(r))(c||u!=null)&&(a[d]=this._read(i,u));return a}else if(n.isStructSchema()&&s){let i={};for(let[a,c]of n.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,u=this._read(c,r[d]);u!=null&&(i[a]=u)}return i}if(n.isBlobSchema()&&typeof r=="string")return(0,YP.fromBase64)(r);let o=n.getMergedTraits().mediaType;if(n.isStringSchema()&&typeof r=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return lt.from(r);if(n.isTimestampSchema()&&r!=null)switch(nt(n,this.settings)){case 5:return qc(r);case 6:return Fc(r);case 7:return $c(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(n.isBigDecimalSchema()&&r!=null){if(r instanceof pe)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new pe(i.string,i.type):new pe(String(r),"bigDecimal")}if(n.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(n.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof pe?i[a]=c:i[a]=this._read(n,c);return i}else return structuredClone(r);return r}}});var XP,Cf,ZP=S(()=>{dt();XP="\u039D",Cf=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof pe){let s=`${XP+"nv"+this.counter++}_`+r.string;return this.values.set(`"${s}"`,r.string),s}if(typeof r=="bigint"){let s=r.toString(),n=`${XP+"b"+this.counter++}_`+s;return this.values.set(`"${n}"`,s),n}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,s]of this.values)t=t.replace(r,s);return t}}});var e0,ea,fE=S(()=>{He();_e();dt();e0=y(Le());Ln();ZP();ea=class extends Dt{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=D.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=D.of(t).getName(!0))}flush(){let{rootSchema:t}=this;if(this.rootSchema=void 0,t?.isStructSchema()||t?.isDocumentSchema()){let r=new Cf;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(t,r,s){let n=r!==null&&typeof r=="object",o=D.of(t);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._write(i,d));return a}else if(o.isMapSchema()&&n){let i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(let[d,u]of Object.entries(r))(c||u!=null)&&(a[d]=this._write(i,u));return a}else if(o.isStructSchema()&&n){let i={};for(let[a,c]of o.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,u=this._write(c,r[a],o);u!==void 0&&(i[d]=u)}return i}if(!(r===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||o.isDocumentSchema()&&r instanceof Uint8Array)return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??e0.toBase64)(r);if((o.isTimestampSchema()||o.isDocumentSchema())&&r instanceof Date)switch(nt(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return Ho(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(o.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,Ot.v4)();let i=o.getMergedTraits().mediaType;if(r!=null&&i&&(i==="application/json"||i.endsWith("+json")))return lt.from(r)}if(o.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof pe?i[a]=c:i[a]=this._write(o,c);return i}else return structuredClone(r);return r}}}});var $n,Rf=S(()=>{Ln();lE();fE();$n=class extends Dt{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new ea(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Zi(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var Un,Tf=S(()=>{He();_e();Xi();Rf();Xc();Un=class extends ur{serializer;deserializer;serviceTarget;codec;mixin=new xr;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=new $n({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),(Bt(t.input)==="unit"||!n.body)&&(n.body="{}"),n}getPayloadCodec(){return this.codec}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=Fn(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u),m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(w,n[C])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}}});var Af,t0=S(()=>{Tf();Af=class extends Un{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var If,r0=S(()=>{Tf();If=class extends Un{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Pf,s0=S(()=>{He();_e();Xi();Rf();Xc();Pf=class extends Jr{serializer;deserializer;codec;mixin=new xr;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new $n(r),this.serializer=new Xr(this.codec.createSerializer(),r),this.deserializer=new Yr(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=D.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]&&!n.body&&(n.body="{}"),n}async handleError(t,r,s,n,o){let i=Fn(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(w,n[C])}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}getDefaultContentType(){return"application/json"}}});var n0,o0,i0=S(()=>{n0=y(U()),o0=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,n0.expectUnion)(e)}});var c0=b((Zye,a0)=>{(()=>{"use strict";var e={d:(f,p)=>{for(var _ in p)e.o(p,_)&&!e.o(f,_)&&Object.defineProperty(f,_,{enumerable:!0,get:p[_]})},o:(f,p)=>Object.prototype.hasOwnProperty.call(f,p),r:f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>gn,XMLParser:()=>fz,XMLValidator:()=>Ez});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function n(f,p){let _=[],x=p.exec(f);for(;x;){let E=[];E.startIndex=p.lastIndex-x[0].length;let v=x.length;for(let I=0;I<v;I++)E.push(x[I]);_.push(E),x=p.exec(f)}return _}let o=function(f){return s.exec(f)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(f,p){p=Object.assign({},i,p);let _=[],x=!1,E=!1;f[0]==="\uFEFF"&&(f=f.substr(1));for(let v=0;v<f.length;v++)if(f[v]==="<"&&f[v+1]==="?"){if(v+=2,v=d(f,v),v.err)return v}else{if(f[v]!=="<"){if(c(f[v]))continue;return T("InvalidChar","char '"+f[v]+"' is not expected.",B(f,v))}{let I=v;if(v++,f[v]==="!"){v=u(f,v);continue}{let A=!1;f[v]==="/"&&(A=!0,v++);let O="";for(;v<f.length&&f[v]!==">"&&f[v]!==" "&&f[v]!=="	"&&f[v]!==`
`&&f[v]!=="\r";v++)O+=f[v];if(O=O.trim(),O[O.length-1]==="/"&&(O=O.substring(0,O.length-1),v--),!o(O)){let J;return J=O.trim().length===0?"Invalid space after '<'.":"Tag '"+O+"' is an invalid name.",T("InvalidTag",J,B(f,v))}let $=m(f,v);if($===!1)return T("InvalidAttr","Attributes for '"+O+"' have open quote.",B(f,v));let oe=$.value;if(v=$.index,oe[oe.length-1]==="/"){let J=v-oe.length;oe=oe.substring(0,oe.length-1);let Se=w(oe,p);if(Se!==!0)return T(Se.err.code,Se.err.msg,B(f,J+Se.err.line));x=!0}else if(A){if(!$.tagClosed)return T("InvalidTag","Closing tag '"+O+"' doesn't have proper closing.",B(f,v));if(oe.trim().length>0)return T("InvalidTag","Closing tag '"+O+"' can't have attributes or invalid starting.",B(f,I));if(_.length===0)return T("InvalidTag","Closing tag '"+O+"' has not been opened.",B(f,I));{let J=_.pop();if(O!==J.tagName){let Se=B(f,J.tagStartPos);return T("InvalidTag","Expected closing tag '"+J.tagName+"' (opened in line "+Se.line+", col "+Se.col+") instead of closing tag '"+O+"'.",B(f,I))}_.length==0&&(E=!0)}}else{let J=w(oe,p);if(J!==!0)return T(J.err.code,J.err.msg,B(f,v-oe.length+J.err.line));if(E===!0)return T("InvalidXml","Multiple possible root nodes found.",B(f,v));p.unpairedTags.indexOf(O)!==-1||_.push({tagName:O,tagStartPos:I}),x=!0}for(v++;v<f.length;v++)if(f[v]==="<"){if(f[v+1]==="!"){v++,v=u(f,v);continue}if(f[v+1]!=="?")break;if(v=d(f,++v),v.err)return v}else if(f[v]==="&"){let J=C(f,v);if(J==-1)return T("InvalidChar","char '&' is not expected.",B(f,v));v=J}else if(E===!0&&!c(f[v]))return T("InvalidXml","Extra text at the end",B(f,v));f[v]==="<"&&v--}}}return x?_.length==1?T("InvalidTag","Unclosed tag '"+_[0].tagName+"'.",B(f,_[0].tagStartPos)):!(_.length>0)||T("InvalidXml","Invalid '"+JSON.stringify(_.map((v=>v.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):T("InvalidXml","Start tag expected.",1)}function c(f){return f===" "||f==="	"||f===`
`||f==="\r"}function d(f,p){let _=p;for(;p<f.length;p++)if(!(f[p]!="?"&&f[p]!=" ")){let x=f.substr(_,p-_);if(p>5&&x==="xml")return T("InvalidXml","XML declaration allowed only at the start of the document.",B(f,p));if(f[p]=="?"&&f[p+1]==">"){p++;break}}return p}function u(f,p){if(f.length>p+5&&f[p+1]==="-"&&f[p+2]==="-"){for(p+=3;p<f.length;p++)if(f[p]==="-"&&f[p+1]==="-"&&f[p+2]===">"){p+=2;break}}else if(f.length>p+8&&f[p+1]==="D"&&f[p+2]==="O"&&f[p+3]==="C"&&f[p+4]==="T"&&f[p+5]==="Y"&&f[p+6]==="P"&&f[p+7]==="E"){let _=1;for(p+=8;p<f.length;p++)if(f[p]==="<")_++;else if(f[p]===">"&&(_--,_===0))break}else if(f.length>p+9&&f[p+1]==="["&&f[p+2]==="C"&&f[p+3]==="D"&&f[p+4]==="A"&&f[p+5]==="T"&&f[p+6]==="A"&&f[p+7]==="["){for(p+=8;p<f.length;p++)if(f[p]==="]"&&f[p+1]==="]"&&f[p+2]===">"){p+=2;break}}return p}let l='"',h="'";function m(f,p){let _="",x="",E=!1;for(;p<f.length;p++){if(f[p]===l||f[p]===h)x===""?x=f[p]:x!==f[p]||(x="");else if(f[p]===">"&&x===""){E=!0;break}_+=f[p]}return x===""&&{value:_,index:p,tagClosed:E}}let g=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function w(f,p){let _=n(f,g),x={};for(let E=0;E<_.length;E++){if(_[E][1].length===0)return T("InvalidAttr","Attribute '"+_[E][2]+"' has no space in starting.",V(_[E]));if(_[E][3]!==void 0&&_[E][4]===void 0)return T("InvalidAttr","Attribute '"+_[E][2]+"' is without value.",V(_[E]));if(_[E][3]===void 0&&!p.allowBooleanAttributes)return T("InvalidAttr","boolean attribute '"+_[E][2]+"' is not allowed.",V(_[E]));let v=_[E][2];if(!N(v))return T("InvalidAttr","Attribute '"+v+"' is an invalid name.",V(_[E]));if(x.hasOwnProperty(v))return T("InvalidAttr","Attribute '"+v+"' is repeated.",V(_[E]));x[v]=1}return!0}function C(f,p){if(f[++p]===";")return-1;if(f[p]==="#")return(function(x,E){let v=/\d/;for(x[E]==="x"&&(E++,v=/[\da-fA-F]/);E<x.length;E++){if(x[E]===";")return E;if(!x[E].match(v))break}return-1})(f,++p);let _=0;for(;p<f.length;p++,_++)if(!(f[p].match(/\w/)&&_<20)){if(f[p]===";")break;return-1}return p}function T(f,p,_){return{err:{code:f,msg:p,line:_.line||_,col:_.col}}}function N(f){return o(f)}function B(f,p){let _=f.substring(0,p).split(/\r?\n/);return{line:_.length,col:_[_.length-1].length+1}}function V(f){return f.startIndex+f[1].length}let Z={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(f,p){return p},attributeValueProcessor:function(f,p){return p},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(f,p,_){return f},captureMetaData:!1},we;we=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Oe{constructor(p){this.tagname=p,this.child=[],this[":@"]={}}add(p,_){p==="__proto__"&&(p="#__proto__"),this.child.push({[p]:_})}addChild(p,_){p.tagname==="__proto__"&&(p.tagname="#__proto__"),p[":@"]&&Object.keys(p[":@"]).length>0?this.child.push({[p.tagname]:p.child,":@":p[":@"]}):this.child.push({[p.tagname]:p.child}),_!==void 0&&(this.child[this.child.length-1][we]={startIndex:_})}static getMetaDataSymbol(){return we}}function te(f,p){let _={};if(f[p+3]!=="O"||f[p+4]!=="C"||f[p+5]!=="T"||f[p+6]!=="Y"||f[p+7]!=="P"||f[p+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{p+=9;let x=1,E=!1,v=!1,I="";for(;p<f.length;p++)if(f[p]!=="<"||v)if(f[p]===">"){if(v?f[p-1]==="-"&&f[p-2]==="-"&&(v=!1,x--):x--,x===0)break}else f[p]==="["?E=!0:I+=f[p];else{if(E&&xo(f,"!ENTITY",p)){let A,O;p+=7,[A,O,p]=be(f,p+1),O.indexOf("&")===-1&&(_[A]={regx:RegExp(`&${A};`,"g"),val:O})}else if(E&&xo(f,"!ELEMENT",p)){p+=8;let{index:A}=VH(f,p+1);p=A}else if(E&&xo(f,"!ATTLIST",p))p+=8;else if(E&&xo(f,"!NOTATION",p)){p+=9;let{index:A}=Ae(f,p+1);p=A}else{if(!xo(f,"!--",p))throw new Error("Invalid DOCTYPE");v=!0}x++,I=""}if(x!==0)throw new Error("Unclosed DOCTYPE")}return{entities:_,i:p}}let he=(f,p)=>{for(;p<f.length&&/\s/.test(f[p]);)p++;return p};function be(f,p){p=he(f,p);let _="";for(;p<f.length&&!/\s/.test(f[p])&&f[p]!=='"'&&f[p]!=="'";)_+=f[p],p++;if(Ay(_),p=he(f,p),f.substring(p,p+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(f[p]==="%")throw new Error("Parameter entities are not supported");let x="";return[p,x]=vi(f,p,"entity"),[_,x,--p]}function Ae(f,p){p=he(f,p);let _="";for(;p<f.length&&!/\s/.test(f[p]);)_+=f[p],p++;Ay(_),p=he(f,p);let x=f.substring(p,p+6).toUpperCase();if(x!=="SYSTEM"&&x!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${x}"`);p+=x.length,p=he(f,p);let E=null,v=null;if(x==="PUBLIC")[p,E]=vi(f,p,"publicIdentifier"),f[p=he(f,p)]!=='"'&&f[p]!=="'"||([p,v]=vi(f,p,"systemIdentifier"));else if(x==="SYSTEM"&&([p,v]=vi(f,p,"systemIdentifier"),!v))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:_,publicIdentifier:E,systemIdentifier:v,index:--p}}function vi(f,p,_){let x="",E=f[p];if(E!=='"'&&E!=="'")throw new Error(`Expected quoted string, found "${E}"`);for(p++;p<f.length&&f[p]!==E;)x+=f[p],p++;if(f[p]!==E)throw new Error(`Unterminated ${_} value`);return[++p,x]}function VH(f,p){p=he(f,p);let _="";for(;p<f.length&&!/\s/.test(f[p]);)_+=f[p],p++;if(!Ay(_))throw new Error(`Invalid element name: "${_}"`);let x="";if(f[p=he(f,p)]==="E"&&xo(f,"MPTY",p))p+=4;else if(f[p]==="A"&&xo(f,"NY",p))p+=2;else{if(f[p]!=="(")throw new Error(`Invalid Element Expression, found "${f[p]}"`);for(p++;p<f.length&&f[p]!==")";)x+=f[p],p++;if(f[p]!==")")throw new Error("Unterminated content model")}return{elementName:_,contentModel:x.trim(),index:p}}function xo(f,p,_){for(let x=0;x<p.length;x++)if(p[x]!==f[_+x+1])return!1;return!0}function Ay(f){if(o(f))return f;throw new Error(`Invalid entity name ${f}`)}let GH=/^[-+]?0x[a-fA-F0-9]+$/,WH=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,QH={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},KH=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function _C(f){return typeof f=="function"?f:Array.isArray(f)?p=>{for(let _ of f)if(typeof _=="string"&&p===_||_ instanceof RegExp&&_.test(p))return!0}:()=>!1}class JH{constructor(p){this.options=p,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(_,x)=>String.fromCodePoint(Number.parseInt(x,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(_,x)=>String.fromCodePoint(Number.parseInt(x,16))}},this.addExternalEntities=YH,this.parseXml=rz,this.parseTextData=XH,this.resolveNameSpace=ZH,this.buildAttributesMap=tz,this.isItStopNode=iz,this.replaceEntitiesValue=nz,this.readStopNodeData=az,this.saveTextToParentTag=oz,this.addChild=sz,this.ignoreAttributesFn=_C(this.options.ignoreAttributes)}}function YH(f){let p=Object.keys(f);for(let _=0;_<p.length;_++){let x=p[_];this.lastEntities[x]={regex:new RegExp("&"+x+";","g"),val:f[x]}}}function XH(f,p,_,x,E,v,I){if(f!==void 0&&(this.options.trimValues&&!x&&(f=f.trim()),f.length>0)){I||(f=this.replaceEntitiesValue(f));let A=this.options.tagValueProcessor(p,f,_,E,v);return A==null?f:typeof A!=typeof f||A!==f?A:this.options.trimValues||f.trim()===f?EC(f,this.options.parseTagValue,this.options.numberParseOptions):f}}function ZH(f){if(this.options.removeNSPrefix){let p=f.split(":"),_=f.charAt(0)==="/"?"/":"";if(p[0]==="xmlns")return"";p.length===2&&(f=_+p[1])}return f}let ez=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function tz(f,p,_){if(this.options.ignoreAttributes!==!0&&typeof f=="string"){let x=n(f,ez),E=x.length,v={};for(let I=0;I<E;I++){let A=this.resolveNameSpace(x[I][1]);if(this.ignoreAttributesFn(A,p))continue;let O=x[I][4],$=this.options.attributeNamePrefix+A;if(A.length)if(this.options.transformAttributeName&&($=this.options.transformAttributeName($)),$==="__proto__"&&($="#__proto__"),O!==void 0){this.options.trimValues&&(O=O.trim()),O=this.replaceEntitiesValue(O);let oe=this.options.attributeValueProcessor(A,O,p);v[$]=oe==null?O:typeof oe!=typeof O||oe!==O?oe:EC(O,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(v[$]=!0)}if(!Object.keys(v).length)return;if(this.options.attributesGroupName){let I={};return I[this.options.attributesGroupName]=v,I}return v}}let rz=function(f){f=f.replace(/\r\n?/g,`
`);let p=new Oe("!xml"),_=p,x="",E="";for(let v=0;v<f.length;v++)if(f[v]==="<")if(f[v+1]==="/"){let I=Co(f,">",v,"Closing Tag is not closed."),A=f.substring(v+2,I).trim();if(this.options.removeNSPrefix){let oe=A.indexOf(":");oe!==-1&&(A=A.substr(oe+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),_&&(x=this.saveTextToParentTag(x,_,E));let O=E.substring(E.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let $=0;O&&this.options.unpairedTags.indexOf(O)!==-1?($=E.lastIndexOf(".",E.lastIndexOf(".")-1),this.tagsNodeStack.pop()):$=E.lastIndexOf("."),E=E.substring(0,$),_=this.tagsNodeStack.pop(),x="",v=I}else if(f[v+1]==="?"){let I=Iy(f,v,!1,"?>");if(!I)throw new Error("Pi Tag is not closed.");if(x=this.saveTextToParentTag(x,_,E),!(this.options.ignoreDeclaration&&I.tagName==="?xml"||this.options.ignorePiTags)){let A=new Oe(I.tagName);A.add(this.options.textNodeName,""),I.tagName!==I.tagExp&&I.attrExpPresent&&(A[":@"]=this.buildAttributesMap(I.tagExp,E,I.tagName)),this.addChild(_,A,E,v)}v=I.closeIndex+1}else if(f.substr(v+1,3)==="!--"){let I=Co(f,"-->",v+4,"Comment is not closed.");if(this.options.commentPropName){let A=f.substring(v+4,I-2);x=this.saveTextToParentTag(x,_,E),_.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}v=I}else if(f.substr(v+1,2)==="!D"){let I=te(f,v);this.docTypeEntities=I.entities,v=I.i}else if(f.substr(v+1,2)==="!["){let I=Co(f,"]]>",v,"CDATA is not closed.")-2,A=f.substring(v+9,I);x=this.saveTextToParentTag(x,_,E);let O=this.parseTextData(A,_.tagname,E,!0,!1,!0,!0);O==null&&(O=""),this.options.cdataPropName?_.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):_.add(this.options.textNodeName,O),v=I+2}else{let I=Iy(f,v,this.options.removeNSPrefix),A=I.tagName,O=I.rawTagName,$=I.tagExp,oe=I.attrExpPresent,J=I.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),_&&x&&_.tagname!=="!xml"&&(x=this.saveTextToParentTag(x,_,E,!1));let Se=_;Se&&this.options.unpairedTags.indexOf(Se.tagname)!==-1&&(_=this.tagsNodeStack.pop(),E=E.substring(0,E.lastIndexOf("."))),A!==p.tagname&&(E+=E?"."+A:A);let Ie=v;if(this.isItStopNode(this.options.stopNodes,E,A)){let Ee="";if($.length>0&&$.lastIndexOf("/")===$.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),E=E.substr(0,E.length-1),$=A):$=$.substr(0,$.length-1),v=I.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)v=I.closeIndex;else{let cs=this.readStopNodeData(f,O,J+1);if(!cs)throw new Error(`Unexpected end of ${O}`);v=cs.i,Ee=cs.tagContent}let at=new Oe(A);A!==$&&oe&&(at[":@"]=this.buildAttributesMap($,E,A)),Ee&&(Ee=this.parseTextData(Ee,A,E,!0,oe,!0,!0)),E=E.substr(0,E.lastIndexOf(".")),at.add(this.options.textNodeName,Ee),this.addChild(_,at,E,Ie)}else{if($.length>0&&$.lastIndexOf("/")===$.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),E=E.substr(0,E.length-1),$=A):$=$.substr(0,$.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));let Ee=new Oe(A);A!==$&&oe&&(Ee[":@"]=this.buildAttributesMap($,E,A)),this.addChild(_,Ee,E,Ie),E=E.substr(0,E.lastIndexOf("."))}else{let Ee=new Oe(A);this.tagsNodeStack.push(_),A!==$&&oe&&(Ee[":@"]=this.buildAttributesMap($,E,A)),this.addChild(_,Ee,E,Ie),_=Ee}x="",v=J}}else x+=f[v];return p.child};function sz(f,p,_,x){this.options.captureMetaData||(x=void 0);let E=this.options.updateTag(p.tagname,_,p[":@"]);E===!1||(typeof E=="string"&&(p.tagname=E),f.addChild(p,x))}let nz=function(f){if(this.options.processEntities){for(let p in this.docTypeEntities){let _=this.docTypeEntities[p];f=f.replace(_.regx,_.val)}for(let p in this.lastEntities){let _=this.lastEntities[p];f=f.replace(_.regex,_.val)}if(this.options.htmlEntities)for(let p in this.htmlEntities){let _=this.htmlEntities[p];f=f.replace(_.regex,_.val)}f=f.replace(this.ampEntity.regex,this.ampEntity.val)}return f};function oz(f,p,_,x){return f&&(x===void 0&&(x=p.child.length===0),(f=this.parseTextData(f,p.tagname,_,!1,!!p[":@"]&&Object.keys(p[":@"]).length!==0,x))!==void 0&&f!==""&&p.add(this.options.textNodeName,f),f=""),f}function iz(f,p,_){let x="*."+_;for(let E in f){let v=f[E];if(x===v||p===v)return!0}return!1}function Co(f,p,_,x){let E=f.indexOf(p,_);if(E===-1)throw new Error(x);return E+p.length-1}function Iy(f,p,_,x=">"){let E=(function(J,Se,Ie=">"){let Ee,at="";for(let cs=Se;cs<J.length;cs++){let yn=J[cs];if(Ee)yn===Ee&&(Ee="");else if(yn==='"'||yn==="'")Ee=yn;else if(yn===Ie[0]){if(!Ie[1])return{data:at,index:cs};if(J[cs+1]===Ie[1])return{data:at,index:cs}}else yn==="	"&&(yn=" ");at+=yn}})(f,p+1,x);if(!E)return;let v=E.data,I=E.index,A=v.search(/\s/),O=v,$=!0;A!==-1&&(O=v.substring(0,A),v=v.substring(A+1).trimStart());let oe=O;if(_){let J=O.indexOf(":");J!==-1&&(O=O.substr(J+1),$=O!==E.data.substr(J+1))}return{tagName:O,tagExp:v,closeIndex:I,attrExpPresent:$,rawTagName:oe}}function az(f,p,_){let x=_,E=1;for(;_<f.length;_++)if(f[_]==="<")if(f[_+1]==="/"){let v=Co(f,">",_,`${p} is not closed`);if(f.substring(_+2,v).trim()===p&&(E--,E===0))return{tagContent:f.substring(x,_),i:v};_=v}else if(f[_+1]==="?")_=Co(f,"?>",_+1,"StopNode is not closed.");else if(f.substr(_+1,3)==="!--")_=Co(f,"-->",_+3,"StopNode is not closed.");else if(f.substr(_+1,2)==="![")_=Co(f,"]]>",_,"StopNode is not closed.")-2;else{let v=Iy(f,_,">");v&&((v&&v.tagName)===p&&v.tagExp[v.tagExp.length-1]!=="/"&&E++,_=v.closeIndex)}}function EC(f,p,_){if(p&&typeof f=="string"){let x=f.trim();return x==="true"||x!=="false"&&(function(E,v={}){if(v=Object.assign({},QH,v),!E||typeof E!="string")return E;let I=E.trim();if(v.skipLike!==void 0&&v.skipLike.test(I))return E;if(E==="0")return 0;if(v.hex&&GH.test(I))return(function(O){if(parseInt)return parseInt(O,16);if(Number.parseInt)return Number.parseInt(O,16);if(window&&window.parseInt)return window.parseInt(O,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(I);if(I.search(/.+[eE].+/)!==-1)return(function(O,$,oe){if(!oe.eNotation)return O;let J=$.match(KH);if(J){let Se=J[1]||"",Ie=J[3].indexOf("e")===-1?"E":"e",Ee=J[2],at=Se?O[Ee.length+1]===Ie:O[Ee.length]===Ie;return Ee.length>1&&at?O:Ee.length!==1||!J[3].startsWith(`.${Ie}`)&&J[3][0]!==Ie?oe.leadingZeros&&!at?($=(J[1]||"")+J[3],Number($)):O:Number($)}return O})(E,I,v);{let O=WH.exec(I);if(O){let $=O[1]||"",oe=O[2],J=((A=O[3])&&A.indexOf(".")!==-1&&((A=A.replace(/0+$/,""))==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substring(0,A.length-1))),A),Se=$?E[oe.length+1]===".":E[oe.length]===".";if(!v.leadingZeros&&(oe.length>1||oe.length===1&&!Se))return E;{let Ie=Number(I),Ee=String(Ie);if(Ie===0||Ie===-0)return Ie;if(Ee.search(/[eE]/)!==-1)return v.eNotation?Ie:E;if(I.indexOf(".")!==-1)return Ee==="0"||Ee===J||Ee===`${$}${J}`?Ie:E;let at=oe?J:I;return oe?at===Ee||$+at===Ee?Ie:E:at===Ee||at===$+Ee?Ie:E}}return E}var A})(f,_)}return f!==void 0?f:""}let Py=Oe.getMetaDataSymbol();function cz(f,p){return wC(f,p)}function wC(f,p,_){let x,E={};for(let v=0;v<f.length;v++){let I=f[v],A=dz(I),O="";if(O=_===void 0?A:_+"."+A,A===p.textNodeName)x===void 0?x=I[A]:x+=""+I[A];else{if(A===void 0)continue;if(I[A]){let $=wC(I[A],p,O),oe=lz($,p);I[Py]!==void 0&&($[Py]=I[Py]),I[":@"]?uz($,I[":@"],O,p):Object.keys($).length!==1||$[p.textNodeName]===void 0||p.alwaysCreateTextNode?Object.keys($).length===0&&(p.alwaysCreateTextNode?$[p.textNodeName]="":$=""):$=$[p.textNodeName],E[A]!==void 0&&E.hasOwnProperty(A)?(Array.isArray(E[A])||(E[A]=[E[A]]),E[A].push($)):p.isArray(A,O,oe)?E[A]=[$]:E[A]=$}}}return typeof x=="string"?x.length>0&&(E[p.textNodeName]=x):x!==void 0&&(E[p.textNodeName]=x),E}function dz(f){let p=Object.keys(f);for(let _=0;_<p.length;_++){let x=p[_];if(x!==":@")return x}}function uz(f,p,_,x){if(p){let E=Object.keys(p),v=E.length;for(let I=0;I<v;I++){let A=E[I];x.isArray(A,_+"."+A,!0,!0)?f[A]=[p[A]]:f[A]=p[A]}}}function lz(f,p){let{textNodeName:_}=p,x=Object.keys(f).length;return x===0||!(x!==1||!f[_]&&typeof f[_]!="boolean"&&f[_]!==0)}class fz{constructor(p){this.externalEntities={},this.options=(function(_){return Object.assign({},Z,_)})(p)}parse(p,_){if(typeof p!="string"){if(!p.toString)throw new Error("XML data is accepted in String or Bytes[] form.");p=p.toString()}if(_){_===!0&&(_={});let v=a(p,_);if(v!==!0)throw Error(`${v.err.msg}:${v.err.line}:${v.err.col}`)}let x=new JH(this.options);x.addExternalEntities(this.externalEntities);let E=x.parseXml(p);return this.options.preserveOrder||E===void 0?E:cz(E,this.options)}addEntity(p,_){if(_.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(p.indexOf("&")!==-1||p.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(_==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[p]=_}static getMetaDataSymbol(){return Oe.getMetaDataSymbol()}}function pz(f,p){let _="";return p.format&&p.indentBy.length>0&&(_=`
`),bC(f,p,"",_)}function bC(f,p,_,x){let E="",v=!1;for(let I=0;I<f.length;I++){let A=f[I],O=mz(A);if(O===void 0)continue;let $="";if($=_.length===0?O:`${_}.${O}`,O===p.textNodeName){let Ie=A[O];hz($,p)||(Ie=p.tagValueProcessor(O,Ie),Ie=xC(Ie,p)),v&&(E+=x),E+=Ie,v=!1;continue}if(O===p.cdataPropName){v&&(E+=x),E+=`<![CDATA[${A[O][0][p.textNodeName]}]]>`,v=!1;continue}if(O===p.commentPropName){E+=x+`<!--${A[O][0][p.textNodeName]}-->`,v=!0;continue}if(O[0]==="?"){let Ie=vC(A[":@"],p),Ee=O==="?xml"?"":x,at=A[O][0][p.textNodeName];at=at.length!==0?" "+at:"",E+=Ee+`<${O}${at}${Ie}?>`,v=!0;continue}let oe=x;oe!==""&&(oe+=p.indentBy);let J=x+`<${O}${vC(A[":@"],p)}`,Se=bC(A[O],p,$,oe);p.unpairedTags.indexOf(O)!==-1?p.suppressUnpairedNode?E+=J+">":E+=J+"/>":Se&&Se.length!==0||!p.suppressEmptyNode?Se&&Se.endsWith(">")?E+=J+`>${Se}${x}</${O}>`:(E+=J+">",Se&&x!==""&&(Se.includes("/>")||Se.includes("</"))?E+=x+p.indentBy+Se+x:E+=Se,E+=`</${O}>`):E+=J+"/>",v=!0}return E}function mz(f){let p=Object.keys(f);for(let _=0;_<p.length;_++){let x=p[_];if(f.hasOwnProperty(x)&&x!==":@")return x}}function vC(f,p){let _="";if(f&&!p.ignoreAttributes)for(let x in f){if(!f.hasOwnProperty(x))continue;let E=p.attributeValueProcessor(x,f[x]);E=xC(E,p),E===!0&&p.suppressBooleanAttributes?_+=` ${x.substr(p.attributeNamePrefix.length)}`:_+=` ${x.substr(p.attributeNamePrefix.length)}="${E}"`}return _}function hz(f,p){let _=(f=f.substr(0,f.length-p.textNodeName.length-1)).substr(f.lastIndexOf(".")+1);for(let x in p.stopNodes)if(p.stopNodes[x]===f||p.stopNodes[x]==="*."+_)return!0;return!1}function xC(f,p){if(f&&f.length>0&&p.processEntities)for(let _=0;_<p.entities.length;_++){let x=p.entities[_];f=f.replace(x.regex,x.val)}return f}let gz={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(f,p){return p},attributeValueProcessor:function(f,p){return p},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function gn(f){this.options=Object.assign({},gz,f),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=_C(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=_z),this.processTextOrObjNode=yz,this.options.format?(this.indentate=Sz,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function yz(f,p,_,x){let E=this.j2x(f,_+1,x.concat(p));return f[this.options.textNodeName]!==void 0&&Object.keys(f).length===1?this.buildTextValNode(f[this.options.textNodeName],p,E.attrStr,_):this.buildObjectNode(E.val,p,E.attrStr,_)}function Sz(f){return this.options.indentBy.repeat(f)}function _z(f){return!(!f.startsWith(this.options.attributeNamePrefix)||f===this.options.textNodeName)&&f.substr(this.attrPrefixLen)}gn.prototype.build=function(f){return this.options.preserveOrder?pz(f,this.options):(Array.isArray(f)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(f={[this.options.arrayNodeName]:f}),this.j2x(f,0,[]).val)},gn.prototype.j2x=function(f,p,_){let x="",E="",v=_.join(".");for(let I in f)if(Object.prototype.hasOwnProperty.call(f,I))if(f[I]===void 0)this.isAttribute(I)&&(E+="");else if(f[I]===null)this.isAttribute(I)||I===this.options.cdataPropName?E+="":I[0]==="?"?E+=this.indentate(p)+"<"+I+"?"+this.tagEndChar:E+=this.indentate(p)+"<"+I+"/"+this.tagEndChar;else if(f[I]instanceof Date)E+=this.buildTextValNode(f[I],I,"",p);else if(typeof f[I]!="object"){let A=this.isAttribute(I);if(A&&!this.ignoreAttributesFn(A,v))x+=this.buildAttrPairStr(A,""+f[I]);else if(!A)if(I===this.options.textNodeName){let O=this.options.tagValueProcessor(I,""+f[I]);E+=this.replaceEntitiesValue(O)}else E+=this.buildTextValNode(f[I],I,"",p)}else if(Array.isArray(f[I])){let A=f[I].length,O="",$="";for(let oe=0;oe<A;oe++){let J=f[I][oe];if(J!==void 0)if(J===null)I[0]==="?"?E+=this.indentate(p)+"<"+I+"?"+this.tagEndChar:E+=this.indentate(p)+"<"+I+"/"+this.tagEndChar;else if(typeof J=="object")if(this.options.oneListGroup){let Se=this.j2x(J,p+1,_.concat(I));O+=Se.val,this.options.attributesGroupName&&J.hasOwnProperty(this.options.attributesGroupName)&&($+=Se.attrStr)}else O+=this.processTextOrObjNode(J,I,p,_);else if(this.options.oneListGroup){let Se=this.options.tagValueProcessor(I,J);Se=this.replaceEntitiesValue(Se),O+=Se}else O+=this.buildTextValNode(J,I,"",p)}this.options.oneListGroup&&(O=this.buildObjectNode(O,I,$,p)),E+=O}else if(this.options.attributesGroupName&&I===this.options.attributesGroupName){let A=Object.keys(f[I]),O=A.length;for(let $=0;$<O;$++)x+=this.buildAttrPairStr(A[$],""+f[I][A[$]])}else E+=this.processTextOrObjNode(f[I],I,p,_);return{attrStr:x,val:E}},gn.prototype.buildAttrPairStr=function(f,p){return p=this.options.attributeValueProcessor(f,""+p),p=this.replaceEntitiesValue(p),this.options.suppressBooleanAttributes&&p==="true"?" "+f:" "+f+'="'+p+'"'},gn.prototype.buildObjectNode=function(f,p,_,x){if(f==="")return p[0]==="?"?this.indentate(x)+"<"+p+_+"?"+this.tagEndChar:this.indentate(x)+"<"+p+_+this.closeTag(p)+this.tagEndChar;{let E="</"+p+this.tagEndChar,v="";return p[0]==="?"&&(v="?",E=""),!_&&_!==""||f.indexOf("<")!==-1?this.options.commentPropName!==!1&&p===this.options.commentPropName&&v.length===0?this.indentate(x)+`<!--${f}-->`+this.newLine:this.indentate(x)+"<"+p+_+v+this.tagEndChar+f+this.indentate(x)+E:this.indentate(x)+"<"+p+_+v+">"+f+E}},gn.prototype.closeTag=function(f){let p="";return this.options.unpairedTags.indexOf(f)!==-1?this.options.suppressUnpairedNode||(p="/"):p=this.options.suppressEmptyNode?"/":`></${f}`,p},gn.prototype.buildTextValNode=function(f,p,_,x){if(this.options.cdataPropName!==!1&&p===this.options.cdataPropName)return this.indentate(x)+`<![CDATA[${f}]]>`+this.newLine;if(this.options.commentPropName!==!1&&p===this.options.commentPropName)return this.indentate(x)+`<!--${f}-->`+this.newLine;if(p[0]==="?")return this.indentate(x)+"<"+p+_+"?"+this.tagEndChar;{let E=this.options.tagValueProcessor(p,f);return E=this.replaceEntitiesValue(E),E===""?this.indentate(x)+"<"+p+_+this.closeTag(p)+this.tagEndChar:this.indentate(x)+"<"+p+_+">"+E+"</"+p+this.tagEndChar}},gn.prototype.replaceEntitiesValue=function(f){if(f&&f.length>0&&this.options.processEntities)for(let p=0;p<this.options.entities.length;p++){let _=this.options.entities[p];f=f.replace(_.regex,_.val)}return f};let Ez={validate:a};a0.exports=t})()});var d0=b(mE=>{"use strict";Object.defineProperty(mE,"__esModule",{value:!0});mE.parseXML=nW;var sW=c0(),pE=new sW.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});pE.addEntity("#xD","\r");pE.addEntity("#10",`
`);function nW(e){return pE.parse(e,!0)}});var Xo=b(Of=>{"use strict";var oW=d0();function iW(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function aW(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var Nf=class{value;constructor(t){this.value=t}toString(){return aW(""+this.value)}},hE=class e{name;children;attributes={};static of(t,r,s){let n=new e(t);return r!==void 0&&n.addChildNode(new Nf(r)),s!==void 0&&n.withName(s),n}constructor(t,r=[]){this.name=t,this.children=r}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,s=r){if(t[r]!=null){let n=e.of(r,t[r]).withName(s);this.c(n)}}l(t,r,s,n){t[r]!=null&&n().map(i=>{i.withName(s),this.c(i)})}lc(t,r,s,n){if(t[r]!=null){let o=n(),i=new e(s);o.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,s=this.attributes;for(let n of Object.keys(s)){let o=s[n];o!=null&&(r+=` ${n}="${iW(""+o)}"`)}return r+=t?`>${this.children.map(n=>n.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(Of,"parseXML",{enumerable:!0,get:function(){return oW.parseXML}});Of.XmlNode=hE;Of.XmlText=Nf});var u0,l0,f0,jn,kf=S(()=>{u0=y(Xo());He();_e();l0=y(U()),f0=y(qe());Ln();jn=class extends Dt{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new Hs(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,s){let n=D.of(t),o=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(o).find(d=>!!d.getMemberTraits().eventPayload)){let d={},u=Object.keys(o)[0];return o[u].isBlobSchema()?d[u]=r:d[u]=this.read(o[u],r),d}let a=(this.serdeContext?.utf8Encoder??f0.toUtf8)(r),c=this.parseXml(a);return this.readSchema(t,s?c[s]:c)}readSchema(t,r){let s=D.of(t);if(s.isUnitSchema())return;let n=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(r))return this.readSchema(s,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!n.sparse,i=!!n.xmlFlattened;if(s.isListSchema()){let c=s.getValueSchema(),d=[],u=c.getMergedTraits().xmlName??"member",l=i?r:(r[0]??r)[u],h=Array.isArray(l)?l:[l];for(let m of h)(m!=null||o)&&d.push(this.readSchema(c,m));return d}let a={};if(s.isMapSchema()){let c=s.getKeySchema(),d=s.getValueSchema(),u;i?u=Array.isArray(r)?r:[r]:u=Array.isArray(r.entry)?r.entry:[r.entry];let l=c.getMergedTraits().xmlName??"key",h=d.getMergedTraits().xmlName??"value";for(let m of u){let g=m[l],w=m[h];(w!=null||o)&&(a[g]=this.readSchema(d,w))}return a}if(s.isStructSchema()){for(let[c,d]of s.structIterator()){let u=d.getMergedTraits(),l=u.httpPayload?u.xmlName??d.getName():d.getMemberTraits().xmlName??c;r[l]!=null&&(a[c]=this.readSchema(d,r[l]))}return a}if(s.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,r)}parseXml(t){if(t.length){let r;try{r=(0,u0.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let s="#text",n=Object.keys(r)[0],o=r[n];return o[s]&&(o[n]=o[s],delete o[s]),(0,l0.getValueFromTextNode)(o)}return{}}}});var p0,m0,Df,h0=S(()=>{He();_e();dt();p0=y(U()),m0=y(Le());Ln();Df=class extends Dt{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,s=""){this.buffer===void 0&&(this.buffer="");let n=D.of(t);if(s&&!s.endsWith(".")&&(s+="."),n.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??m0.toBase64)(r)));else if(n.isBooleanSchema()||n.isNumericSchema()||n.isStringSchema())r!=null?(this.writeKey(s),this.writeValue(String(r))):n.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,Ot.v4)()));else if(n.isBigIntegerSchema())r!=null&&(this.writeKey(s),this.writeValue(String(r)));else if(n.isBigDecimalSchema())r!=null&&(this.writeKey(s),this.writeValue(r instanceof pe?r.string:String(r)));else if(n.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(s),nt(n,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,p0.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(n.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${n.getName(!0)}`);if(n.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let o=n.getValueSchema(),i=this.settings.flattenLists||n.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let d=this.getKey("member",o.getMergedTraits().xmlName),u=i?`${s}${a}`:`${s}${d}.${a}`;this.write(o,c,u),++a}}}else if(n.isMapSchema()){if(r&&typeof r=="object"){let o=n.getKeySchema(),i=n.getValueSchema(),a=n.getMergedTraits().xmlFlattened,c=1;for(let[d,u]of Object.entries(r)){if(u==null)continue;let l=this.getKey("key",o.getMergedTraits().xmlName),h=a?`${s}${c}.${l}`:`${s}entry.${c}.${l}`,m=this.getKey("value",i.getMergedTraits().xmlName),g=a?`${s}${c}.${m}`:`${s}entry.${c}.${m}`;this.write(o,d,h),this.write(i,u,g),++c}}}else if(n.isStructSchema()){if(r&&typeof r=="object")for(let[o,i]of n.structIterator()){if(r[o]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(o,i.getMergedTraits().xmlName),c=`${s}${a}`;this.write(i,r[o],c)}}else if(!n.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${n.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let s=r??t;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${dr(t)}=`}writeValue(t){this.buffer+=dr(t)}}});var ta,gE=S(()=>{He();_e();Xi();kf();h0();ta=class extends ur{options;serializer;deserializer;mixin=new xr;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Df(r),this.deserializer=new jn(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":"application/x-www-form-urlencoded"}),(Bt(t.input)==="unit"||!n.body)&&(n.body="");let o=t.name.split("#")[1]??t.name;return n.body=`Action=${o}&Version=${this.options.version}`+n.body,n.body.endsWith("&")&&(n.body=n.body.slice(-1)),n}async deserializeResponse(t,r,s){let n=this.deserializer,o=D.of(t.output),i={};if(s.statusCode>=300){let l=await Kt(s.body,r);l.byteLength>0&&Object.assign(i,await n.read(15,l)),await this.handleError(t,r,s,i,this.deserializeMetadata(s))}for(let l in s.headers){let h=s.headers[l];delete s.headers[l],s.headers[l.toLowerCase()]=h}let a=t.name.split("#")[1]??t.name,c=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,d=await Kt(s.body,r);return d.byteLength>0&&Object.assign(i,await n.read(o,d,c)),{$metadata:this.deserializeMetadata(s),...i}}useNestedResult(){return!0}async handleError(t,r,s,n,o){let i=this.loadQueryErrorCode(s,n)??"Unknown",a=this.loadQueryError(n),c=this.loadQueryErrorMessage(n);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:d,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,a,o,(w,C)=>{try{return w.getSchema(C)}catch{return w.find(N=>D.of(N).getMergedTraits().awsQueryError?.[0]===C)}}),l=D.of(d),h=ve.for(d[1]).getErrorCtor(d)??Error,m=new h(c),g={Error:a.Error};for(let[w,C]of l.structIterator()){let T=C.getMergedTraits().xmlName??w,N=a[T]??n[T];g[w]=this.deserializer.readSchema(C,N)}throw Object.assign(m,u,{$fault:l.getMergedTraits().error,message:c},g)}loadQueryErrorCode(t,r){let s=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(s!==void 0)return s;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Mf,g0=S(()=>{gE();Mf=class extends ta{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var y0,S0,ra,Lf,qf,yE=S(()=>{y0=y(Xo()),S0=y(U());uE();ra=(e,t)=>vf(e,t).then(r=>{if(r.length){let s;try{s=(0,y0.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let n="#text",o=Object.keys(s)[0],i=s[o];return i[n]&&(i[o]=i[n],delete i[n]),(0,S0.getValueFromTextNode)(i)}return{}}),Lf=async(e,t)=>{let r=await ra(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},qf=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var Cr,SE,Ff,sa,_E=S(()=>{Cr=y(Xo());He();_e();dt();SE=y(U()),Ff=y(Le());Ln();sa=class extends Dt{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let s=D.of(t);if(s.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(s.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Ff.fromBase64)(r);else{this.buffer=this.writeStruct(s,r,void 0);let n=s.getMergedTraits();n.httpPayload&&!n.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,s){let n=t.getMergedTraits(),o=t.isMemberSchema()&&!n.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():n.xmlName??t.getName();if(!o||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=Cr.XmlNode.of(o),[a,c]=this.getXmlnsAttribute(t,s);for(let[d,u]of t.structIterator()){let l=r[d];if(l!=null||u.isIdempotencyToken()){if(u.getMergedTraits().xmlAttribute){i.addAttribute(u.getMergedTraits().xmlName??d,this.writeSimple(u,l));continue}if(u.isListSchema())this.writeList(u,l,i,c);else if(u.isMapSchema())this.writeMap(u,l,i,c);else if(u.isStructSchema())i.addChildNode(this.writeStruct(u,l,c));else{let h=Cr.XmlNode.of(u.getMergedTraits().xmlName??u.getMemberName());this.writeSimpleInto(u,l,h,c),i.addChildNode(h)}}}return c&&i.addAttribute(a,c),i}writeList(t,r,s,n){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let o=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),c=!!a.sparse,d=!!o.xmlFlattened,[u,l]=this.getXmlnsAttribute(t,n),h=(m,g)=>{if(i.isListSchema())this.writeList(i,Array.isArray(g)?g:[g],m,l);else if(i.isMapSchema())this.writeMap(i,g,m,l);else if(i.isStructSchema()){let w=this.writeStruct(i,g,l);m.addChildNode(w.withName(d?o.xmlName??t.getMemberName():a.xmlName??"member"))}else{let w=Cr.XmlNode.of(d?o.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,g,w,l),m.addChildNode(w)}};if(d)for(let m of r)(c||m!=null)&&h(s,m);else{let m=Cr.XmlNode.of(o.xmlName??t.getMemberName());l&&m.addAttribute(u,l);for(let g of r)(c||g!=null)&&h(m,g);s.addChildNode(m)}}writeMap(t,r,s,n,o=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),d=a.getMergedTraits().xmlName??"key",u=t.getValueSchema(),l=u.getMergedTraits(),h=l.xmlName??"value",m=!!l.sparse,g=!!i.xmlFlattened,[w,C]=this.getXmlnsAttribute(t,n),T=(N,B,V)=>{let Z=Cr.XmlNode.of(d,B),[we,Oe]=this.getXmlnsAttribute(a,C);Oe&&Z.addAttribute(we,Oe),N.addChildNode(Z);let te=Cr.XmlNode.of(h);u.isListSchema()?this.writeList(u,V,te,C):u.isMapSchema()?this.writeMap(u,V,te,C,!0):u.isStructSchema()?te=this.writeStruct(u,V,C):this.writeSimpleInto(u,V,te,C),N.addChildNode(te)};if(g){for(let[N,B]of Object.entries(r))if(m||B!=null){let V=Cr.XmlNode.of(i.xmlName??t.getMemberName());T(V,N,B),s.addChildNode(V)}}else{let N;o||(N=Cr.XmlNode.of(i.xmlName??t.getMemberName()),C&&N.addAttribute(w,C),s.addChildNode(N));for(let[B,V]of Object.entries(r))if(m||V!=null){let Z=Cr.XmlNode.of("entry");T(Z,B,V),(o?s:N).addChildNode(Z)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=D.of(t),n=null;if(r&&typeof r=="object")if(s.isBlobSchema())n=(this.serdeContext?.base64Encoder??Ff.toBase64)(r);else if(s.isTimestampSchema()&&r instanceof Date)switch(nt(s,this.settings)){case 5:n=r.toISOString().replace(".000Z","Z");break;case 6:n=(0,SE.dateToUtcString)(r);break;case 7:n=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),n=(0,SE.dateToUtcString)(r);break}else{if(s.isBigDecimalSchema()&&r)return r instanceof pe?r.string:String(r);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(n=String(r)),s.isStringSchema()&&(r===void 0&&s.isIdempotencyToken()?n=(0,Ot.v4)():n=String(r)),n===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${r}`);return n}writeSimpleInto(t,r,s,n){let o=this.writeSimple(t,r),i=D.of(t),a=new Cr.XmlText(o),[c,d]=this.getXmlnsAttribute(i,n);d&&s.addAttribute(c,d),s.addChildNode(a)}getXmlnsAttribute(t,r){let s=t.getMergedTraits(),[n,o]=s.xmlNamespace??[];return o&&o!==r?[n?`xmlns:${n}`:"xmlns",o]:[void 0,void 0]}}});var na,EE=S(()=>{Ln();kf();_E();na=class extends Dt{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new sa(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new jn(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var $f,_0=S(()=>{He();_e();Xi();yE();EE();$f=class extends Jr{codec;serializer;deserializer;mixin=new xr;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new na(r),this.serializer=new Xr(this.codec.createSerializer(),r),this.deserializer=new Yr(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=D.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]===this.getDefaultContentType()&&typeof n.body=="string"&&(n.body='<?xml version="1.0" encoding="UTF-8"?>'+n.body),n}async deserializeResponse(t,r,s){return super.deserializeResponse(t,r,s)}async handleError(t,r,s,n,o){let i=qf(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),u=n.Error?.message??n.Error?.Message??n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().xmlName??g,T=n.Error?.[C]??n[C];m[g]=this.codec.createDeserializer().readSchema(w,T)}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}getDefaultContentType(){return"application/xml"}}});var E0={};ct(E0,{AwsEc2QueryProtocol:()=>Mf,AwsJson1_0Protocol:()=>Af,AwsJson1_1Protocol:()=>If,AwsJsonRpcProtocol:()=>Un,AwsQueryProtocol:()=>ta,AwsRestJsonProtocol:()=>Pf,AwsRestXmlProtocol:()=>$f,AwsSmithyRpcV2CborProtocol:()=>wf,JsonCodec:()=>$n,JsonShapeDeserializer:()=>Zi,JsonShapeSerializer:()=>ea,XmlCodec:()=>na,XmlShapeDeserializer:()=>jn,XmlShapeSerializer:()=>sa,_toBool:()=>NP,_toNum:()=>OP,_toStr:()=>PP,awsExpectUnion:()=>o0,loadRestJsonErrorCode:()=>Fn,loadRestXmlErrorCode:()=>qf,parseJsonBody:()=>Yo,parseJsonErrorBody:()=>xf,parseXmlBody:()=>ra,parseXmlErrorBody:()=>Lf});var wE=S(()=>{IP();kP();t0();r0();Tf();s0();Rf();lE();fE();i0();Xc();g0();gE();_0();EE();kf();_E();yE()});var Ks={};ct(Ks,{AWSSDKSigV4Signer:()=>g_,AwsEc2QueryProtocol:()=>Mf,AwsJson1_0Protocol:()=>Af,AwsJson1_1Protocol:()=>If,AwsJsonRpcProtocol:()=>Un,AwsQueryProtocol:()=>ta,AwsRestJsonProtocol:()=>Pf,AwsRestXmlProtocol:()=>$f,AwsSdkSigV4ASigner:()=>Wc,AwsSdkSigV4Signer:()=>Jt,AwsSmithyRpcV2CborProtocol:()=>wf,JsonCodec:()=>$n,JsonShapeDeserializer:()=>Zi,JsonShapeSerializer:()=>ea,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Gi,NODE_SIGV4A_CONFIG_OPTIONS:()=>jI,XmlCodec:()=>na,XmlShapeDeserializer:()=>jn,XmlShapeSerializer:()=>sa,_toBool:()=>NP,_toNum:()=>OP,_toStr:()=>PP,awsExpectUnion:()=>o0,emitWarningIfUnsupportedVersion:()=>Hi,getBearerTokenEnvKey:()=>of,loadRestJsonErrorCode:()=>Fn,loadRestXmlErrorCode:()=>qf,parseJsonBody:()=>Yo,parseJsonErrorBody:()=>xf,parseXmlBody:()=>ra,parseXmlErrorBody:()=>Lf,resolveAWSSDKSigV4Config:()=>fP,resolveAwsSdkSigV4AConfig:()=>UI,resolveAwsSdkSigV4Config:()=>Ko,setCredentialFeature:()=>In,setFeature:()=>xI,setTokenFeature:()=>RI,state:()=>nf,validateSigningProperties:()=>Vi});var wt=S(()=>{ss();L_();wE()});var ia=b(oa=>{"use strict";var cW=(De(),Q(ms)),dW=rs(),uW=ye(),gs=(wt(),Q(Ks)),x0=void 0;function lW(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function fW(e){let t=cW.normalizeProvider(e.userAgentAppId??x0),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let s=await t();if(!lW(s)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof s!="string"?n?.warn("userAgentAppId must be a string or undefined."):s.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return s}})}var pW=/\d{12}\.ddb/;async function mW(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&gs.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?gs.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):gs.setFeature(e,"RETRY_MODE_STANDARD","E"):gs.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let o=e.endpointV2;switch(String(o?.url?.hostname).match(pW)&&gs.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":gs.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":gs.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":gs.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let o=n;o.accountId&&gs.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))gs.setFeature(e,i,a)}}var w0="user-agent",bE="x-amz-user-agent",b0=" ",vE="/",hW=/[^!$%&'*+\-.^_`|~\w]/g,gW=/[^!$%&'*+\-.^_`|~\w#]/g,v0="-",yW=1024;function SW(e){let t="";for(let r in e){let s=e[r];if(t.length+s.length+1<=yW){t.length?t+=","+s:t+=s;continue}break}return t}var C0=e=>(t,r)=>async s=>{let{request:n}=s;if(!uW.HttpRequest.isInstance(n))return t(s);let{headers:o}=n,i=r?.userAgent?.map(Uf)||[],a=(await e.defaultUserAgentProvider()).map(Uf);await mW(r,e,s);let c=r;a.push(`m/${SW(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let d=e?.customUserAgent?.map(Uf)||[],u=await e.userAgentAppId();u&&a.push(Uf(["app",`${u}`]));let l=dW.getUserAgentPrefix(),h=(l?[l]:[]).concat([...a,...i,...d]).join(b0),m=[...a.filter(g=>g.startsWith("aws-sdk-")),...d].join(b0);return e.runtime!=="browser"?(m&&(o[bE]=o[bE]?`${o[w0]} ${m}`:m),o[w0]=h):o[bE]=h,t({...s,request:n})},Uf=e=>{let t=e[0].split(vE).map(i=>i.replace(hW,v0)).join(vE),r=e[1]?.replace(gW,v0),s=t.indexOf(vE),n=t.substring(0,s),o=t.substring(s+1);return n==="api"&&(o=o.toLowerCase()),[n,o,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},R0={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},_W=e=>({applyToStack:t=>{t.add(C0(e),R0)}});oa.DEFAULT_UA_APP_ID=x0;oa.getUserAgentMiddlewareOptions=R0;oa.getUserAgentPlugin=_W;oa.resolveUserAgentConfig=fW;oa.userAgentMiddleware=C0});var T0=b(aa=>{"use strict";var EW=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},wW=(e,t,r)=>{if(!(t in e))return;let s=parseInt(e[t],10);if(Number.isNaN(s))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return s};aa.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(aa.SelectorType||(aa.SelectorType={}));aa.booleanSelector=EW;aa.numberSelector=wW});var Ze=b(bt=>{"use strict";var Bn=T0(),jf=mt(),bW=es(),P0="AWS_USE_DUALSTACK_ENDPOINT",N0="use_dualstack_endpoint",vW=!1,xW={environmentVariableSelector:e=>Bn.booleanSelector(e,P0,Bn.SelectorType.ENV),configFileSelector:e=>Bn.booleanSelector(e,N0,Bn.SelectorType.CONFIG),default:!1},O0="AWS_USE_FIPS_ENDPOINT",k0="use_fips_endpoint",CW=!1,RW={environmentVariableSelector:e=>Bn.booleanSelector(e,O0,Bn.SelectorType.ENV),configFileSelector:e=>Bn.booleanSelector(e,k0,Bn.SelectorType.CONFIG),default:!1},TW=e=>{let{tls:t,endpoint:r,urlParser:s,useDualstackEndpoint:n}=e;return Object.assign(e,{tls:t??!0,endpoint:jf.normalizeProvider(typeof r=="string"?s(r):r),isCustomEndpoint:!0,useDualstackEndpoint:jf.normalizeProvider(n??!1)})},AW=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let n=await e.useDualstackEndpoint(),o=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:n,useFipsEndpoint:o})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},IW=e=>{let t=jf.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:s,urlParser:n,tls:o}=e;return Object.assign(e,{tls:o??!0,endpoint:r?jf.normalizeProvider(typeof r=="string"?n(r):r):()=>AW({...e,useDualstackEndpoint:t,useFipsEndpoint:s}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},D0="AWS_REGION",M0="region",PW={environmentVariableSelector:e=>e[D0],configFileSelector:e=>e[M0],default:()=>{throw new Error("Region is missing")}},NW={preferredFile:"credentials"},A0=new Set,OW=(e,t=bW.isValidHostLabel)=>{if(!A0.has(e)&&!t(e))if(e==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else A0.add(e)},L0=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),kW=e=>L0(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,DW=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{let s=typeof t=="function"?await t():t,n=kW(s);return OW(n),n},useFipsEndpoint:async()=>{let s=typeof t=="string"?t:await t();return L0(s)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},I0=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:s})=>t===s.includes("fips")&&r===s.includes("dualstack"))?.hostname,MW=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),LW=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",qW=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:s})=>{if(t)return t;if(s){let n=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=e.match(n);if(o)return o[0].slice(1,-1)}},FW=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:s,regionHash:n,partitionHash:o})=>{let i=LW(e,{partitionHash:o}),a=e in n?e:o[i]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:r},d=I0(n[a]?.variants,c),u=I0(o[i]?.variants,c),l=MW(a,{regionHostname:d,partitionHostname:u});if(l===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let h=qW(l,{signingRegion:n[a]?.signingRegion,regionRegex:o[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:s,hostname:l,...h&&{signingRegion:h},...n[a]?.signingService&&{signingService:n[a].signingService}}};bt.CONFIG_USE_DUALSTACK_ENDPOINT=N0;bt.CONFIG_USE_FIPS_ENDPOINT=k0;bt.DEFAULT_USE_DUALSTACK_ENDPOINT=vW;bt.DEFAULT_USE_FIPS_ENDPOINT=CW;bt.ENV_USE_DUALSTACK_ENDPOINT=P0;bt.ENV_USE_FIPS_ENDPOINT=O0;bt.NODE_REGION_CONFIG_FILE_OPTIONS=NW;bt.NODE_REGION_CONFIG_OPTIONS=PW;bt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=xW;bt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=RW;bt.REGION_ENV_NAME=D0;bt.REGION_INI_NAME=M0;bt.getRegionInfo=FW;bt.resolveCustomEndpointsConfig=TW;bt.resolveEndpointsConfig=IW;bt.resolveRegionConfig=DW});var Js=b(Bf=>{"use strict";var $W=ye(),q0="content-length";function F0(e){return t=>async r=>{let s=r.request;if($W.HttpRequest.isInstance(s)){let{body:n,headers:o}=s;if(n&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(q0)===-1)try{let i=e(n);s.headers={...s.headers,[q0]:String(i)}}catch{}}return t({...r,request:s})}}var $0={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},UW=e=>({applyToStack:t=>{t.add(F0(e.bodyLengthChecker),$0)}});Bf.contentLengthMiddleware=F0;Bf.contentLengthMiddlewareOptions=$0;Bf.getContentLengthPlugin=UW});var CE=b(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.getHomeDir=void 0;var jW=require("os"),BW=require("path"),xE={},HW=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",zW=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:s=`C:${BW.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${s}${r}`;let n=HW();return xE[n]||(xE[n]=(0,jW.homedir)()),xE[n]};Hf.getHomeDir=zW});var RE=b(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.getSSOTokenFilepath=void 0;var VW=require("crypto"),GW=require("path"),WW=CE(),QW=e=>{let r=(0,VW.createHash)("sha1").update(e).digest("hex");return(0,GW.join)((0,WW.getHomeDir)(),".aws","sso","cache",`${r}.json`)};zf.getSSOTokenFilepath=QW});var U0=b(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.getSSOTokenFromFile=Hn.tokenIntercept=void 0;var KW=require("fs"),JW=RE(),{readFile:YW}=KW.promises;Hn.tokenIntercept={};var XW=async e=>{if(Hn.tokenIntercept[e])return Hn.tokenIntercept[e];let t=(0,JW.getSSOTokenFilepath)(e),r=await YW(t,"utf8");return JSON.parse(r)};Hn.getSSOTokenFromFile=XW});var j0=b(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.slurpFile=lr.fileIntercept=lr.filePromisesHash=void 0;var ZW=require("fs"),{readFile:eQ}=ZW.promises;lr.filePromisesHash={};lr.fileIntercept={};var tQ=(e,t)=>lr.fileIntercept[e]!==void 0?lr.fileIntercept[e]:((!lr.filePromisesHash[e]||t?.ignoreCache)&&(lr.filePromisesHash[e]=eQ(e,"utf8")),lr.filePromisesHash[e]);lr.slurpFile=tQ});var Vt=b(Yt=>{"use strict";var Zc=CE(),B0=RE(),TE=U0(),Vf=require("path"),Gf=bn(),ed=j0(),z0="AWS_PROFILE",V0="default",rQ=e=>e.profile||process.env[z0]||V0,Zo=".",sQ=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(Zo);return r===-1?!1:Object.values(Gf.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,s])=>{let n=r.indexOf(Zo),o=r.substring(0,n)===Gf.IniSectionType.PROFILE?r.substring(n+1):r;return t[o]=s,t},{...e.default&&{default:e.default}}),nQ="AWS_CONFIG_FILE",G0=()=>process.env[nQ]||Vf.join(Zc.getHomeDir(),".aws","config"),oQ="AWS_SHARED_CREDENTIALS_FILE",iQ=()=>process.env[oQ]||Vf.join(Zc.getHomeDir(),".aws","credentials"),aQ=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,cQ=["__proto__","profile __proto__"],AE=e=>{let t={},r,s;for(let n of e.split(/\r?\n/)){let o=n.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,s=void 0;let a=o.substring(1,o.length-1),c=aQ.exec(a);if(c){let[,d,,u]=c;Object.values(Gf.IniSectionType).includes(d)&&(r=[d,u].join(Zo))}else r=a;if(cQ.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[c,d]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(d==="")s=c;else{s&&n.trimStart()===n&&(s=void 0),t[r]=t[r]||{};let u=s?[s,c].join(Zo):c;t[r][u]=d}}}}return t},H0=()=>({}),W0=async(e={})=>{let{filepath:t=iQ(),configFilepath:r=G0()}=e,s=Zc.getHomeDir(),n="~/",o=t;t.startsWith(n)&&(o=Vf.join(s,t.slice(2)));let i=r;r.startsWith(n)&&(i=Vf.join(s,r.slice(2)));let a=await Promise.all([ed.slurpFile(i,{ignoreCache:e.ignoreCache}).then(AE).then(sQ).catch(H0),ed.slurpFile(o,{ignoreCache:e.ignoreCache}).then(AE).catch(H0)]);return{configFile:a[0],credentialsFile:a[1]}},dQ=e=>Object.entries(e).filter(([t])=>t.startsWith(Gf.IniSectionType.SSO_SESSION+Zo)).reduce((t,[r,s])=>({...t,[r.substring(r.indexOf(Zo)+1)]:s}),{}),uQ=()=>({}),lQ=async(e={})=>ed.slurpFile(e.configFilepath??G0()).then(AE).then(dQ).catch(uQ),fQ=(...e)=>{let t={};for(let r of e)for(let[s,n]of Object.entries(r))t[s]!==void 0?Object.assign(t[s],n):t[s]=n;return t},pQ=async e=>{let t=await W0(e);return fQ(t.configFile,t.credentialsFile)},mQ={getFileRecord(){return ed.fileIntercept},interceptFile(e,t){ed.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return TE.tokenIntercept},interceptToken(e,t){TE.tokenIntercept[e]=t}};Object.defineProperty(Yt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return TE.getSSOTokenFromFile}});Yt.CONFIG_PREFIX_SEPARATOR=Zo;Yt.DEFAULT_PROFILE=V0;Yt.ENV_PROFILE=z0;Yt.externalDataInterceptor=mQ;Yt.getProfileName=rQ;Yt.loadSharedConfigFiles=W0;Yt.loadSsoSessionData=lQ;Yt.parseKnownFiles=pQ;Object.keys(Zc).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Yt,e)&&Object.defineProperty(Yt,e,{enumerable:!0,get:function(){return Zc[e]}})});Object.keys(B0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Yt,e)&&Object.defineProperty(Yt,e,{enumerable:!0,get:function(){return B0[e]}})})});var Xt=b(J0=>{"use strict";var td=Me(),Q0=Vt();function K0(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var hQ=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new td.CredentialsProviderError(r.message||`Not found in ENV: ${K0(e.toString())}`,{logger:t?.logger})}},gQ=(e,{preferredFile:t="config",...r}={})=>async()=>{let s=Q0.getProfileName(r),{configFile:n,credentialsFile:o}=await Q0.loadSharedConfigFiles(r),i=o[s]||{},a=n[s]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let u=e(c,t==="config"?n:o);if(u===void 0)throw new Error;return u}catch(d){throw new td.CredentialsProviderError(d.message||`Not found in config files w/ profile [${s}]: ${K0(e.toString())}`,{logger:r.logger})}},yQ=e=>typeof e=="function",SQ=e=>yQ(e)?async()=>await e():td.fromStatic(e),_Q=({environmentVariableSelector:e,configFileSelector:t,default:r},s={})=>{let{signingName:n,logger:o}=s,i={signingName:n,logger:o};return td.memoize(td.chain(hQ(e,i),gQ(t,s),SQ(r)))};J0.loadConfig=_Q});var eN=b(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.getEndpointUrlConfig=void 0;var Y0=Vt(),X0="AWS_ENDPOINT_URL",Z0="endpoint_url",EQ=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(o=>o.toUpperCase()),s=t[[X0,...r].join("_")];if(s)return s;let n=t[X0];if(n)return n},configFileSelector:(t,r)=>{if(r&&t.services){let n=r[["services",t.services].join(Y0.CONFIG_PREFIX_SEPARATOR)];if(n){let o=e.split(" ").map(a=>a.toLowerCase()),i=n[[o.join("_"),Z0].join(Y0.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let s=t[Z0];if(s)return s},default:void 0});Wf.getEndpointUrlConfig=EQ});var tN=b(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.getEndpointFromConfig=void 0;var wQ=Xt(),bQ=eN(),vQ=async e=>(0,wQ.loadConfig)((0,bQ.getEndpointUrlConfig)(e??""))();Qf.getEndpointFromConfig=vQ});var Gt=b(Ys=>{"use strict";var sN=tN(),rN=vr(),xQ=(De(),Q(ms)),Kf=mt(),CQ=wr(),RQ=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),NQ(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!PQ(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},TQ=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,AQ=/(\d+\.){3}\d+/,IQ=/\.\./,PQ=e=>TQ.test(e)&&!AQ.test(e)&&!IQ.test(e),NQ=e=>{let[t,r,s,,,n]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,i=!!(o&&r&&s&&n);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},OQ=(e,t,r)=>{let s=async()=>{let n=r[e]??r[t];return typeof n=="function"?n():n};return e==="credentialScope"||t==="CredentialScope"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return n?.credentialScope??n?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return n?.accountId??n?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let n=await s();if(n&&typeof n=="object"){if("url"in n)return n.url.href;if("hostname"in n){let{protocol:o,hostname:i,port:a,path:c}=n;return`${o}//${i}${a?":"+a:""}${c}`}}return n}:s},IE=e=>typeof e=="object"?"url"in e?rN.parseUrl(e.url):e:rN.parseUrl(e),nN=async(e,t,r,s)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await sN.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(IE(i)),r.isCustomEndpoint=!0)}let n=await oN(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,s)},oN=async(e,t,r)=>{let s={},n=t?.getEndpointParameterInstructions?.()||{};for(let[o,i]of Object.entries(n))switch(i.type){case"staticContextParams":s[o]=i.value;break;case"contextParams":s[o]=e[i.name];break;case"clientContextParams":case"builtInParams":s[o]=await OQ(i.name,o,r)();break;case"operationContextParams":s[o]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(n).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await RQ(s),s},iN=({config:e,instructions:t})=>(r,s)=>async n=>{e.isCustomEndpoint&&xQ.setFeature(s,"ENDPOINT_OVERRIDE","N");let o=await nN(n.input,{getEndpointParameterInstructions(){return t}},{...e},s);s.endpointV2=o,s.authSchemes=o.properties?.authSchemes;let i=s.authSchemes?.[0];if(i){s.signing_region=i.signingRegion,s.signing_service=i.signingName;let c=Kf.getSmithyContext(s)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...n})},aN={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:CQ.serializerMiddlewareOption.name},kQ=(e,t)=>({applyToStack:r=>{r.addRelativeTo(iN({config:e,instructions:t}),aN)}}),DQ=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:s,useFipsEndpoint:n}=e,o=r!=null?async()=>IE(await Kf.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:o,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Kf.normalizeProvider(s??!1),useFipsEndpoint:Kf.normalizeProvider(n??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!c&&(c=sN.getEndpointFromConfig(e.serviceId)),c),a},MQ=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};Ys.endpointMiddleware=iN;Ys.endpointMiddlewareOptions=aN;Ys.getEndpointFromInstructions=nN;Ys.getEndpointPlugin=kQ;Ys.resolveEndpointConfig=DQ;Ys.resolveEndpointRequiredConfig=MQ;Ys.resolveParams=oN;Ys.toEndpointV1=IE});var NE=b(zn=>{"use strict";var LQ=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],qQ=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],FQ=["TimeoutError","RequestTimeout","RequestTimeoutException"],$Q=[500,502,503,504],UQ=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],jQ=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],cN=e=>e?.$retryable!==void 0,BQ=e=>LQ.includes(e.name),dN=e=>e.$metadata?.clockSkewCorrected,uN=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},HQ=e=>e.$metadata?.httpStatusCode===429||qQ.includes(e.name)||e.$retryable?.throttling==!0,PE=(e,t=0)=>cN(e)||dN(e)||FQ.includes(e.name)||UQ.includes(e?.code||"")||jQ.includes(e?.code||"")||$Q.includes(e.$metadata?.httpStatusCode||0)||uN(e)||e.cause!==void 0&&t<=10&&PE(e.cause,t+1),zQ=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!PE(e)}return!1};zn.isBrowserNetworkError=uN;zn.isClockSkewCorrectedError=dN;zn.isClockSkewError=BQ;zn.isRetryableByTrait=cN;zn.isServerError=zQ;zn.isThrottlingError=HQ;zn.isTransientError=PE});var ys=b(et=>{"use strict";var VQ=NE();et.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(et.RETRY_MODES||(et.RETRY_MODES={}));var OE=3,GQ=et.RETRY_MODES.STANDARD,Jf=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>e.setTimeoutFn(s,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),VQ.isThrottlingError(t)){let n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let s=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let s=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},rd=100,LE=20*1e3,fN=500,kE=500,pN=5,mN=10,hN=1,WQ="amz-sdk-invocation-id",QQ="amz-sdk-request",KQ=()=>{let e=rd;return{computeNextBackoffDelay:s=>Math.floor(Math.min(LE,Math.random()*2**s*e)),setDelayBase:s=>{e=s}}},lN=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(LE,e),getRetryCost:()=>r}),sd=class{maxAttempts;mode=et.RETRY_MODES.STANDARD;capacity=kE;retryBackoffStrategy=KQ();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return lN({retryDelay:rd,retryCount:0})}async refreshRetryTokenForRetry(t,r){let s=await this.getMaxAttempts();if(this.shouldRetry(t,r,s)){let n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?fN:rd);let o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(n);return this.capacity-=a,lN({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(kE,this.capacity+(t.getRetryCost()??hN))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${OE}`),OE}}shouldRetry(t,r,s){return t.getRetryCount()+1<s&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?mN:pN}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},DE=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=et.RETRY_MODES.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:s}=r??{};this.rateLimiter=s??new Jf,this.standardRetryStrategy=new sd(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},ME=class extends sd{computeNextBackoffDelay;constructor(t,r=rd){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let s=await super.refreshRetryTokenForRetry(t,r);return s.getRetryDelay=()=>this.computeNextBackoffDelay(s.getRetryCount()),s}};et.AdaptiveRetryStrategy=DE;et.ConfiguredRetryStrategy=ME;et.DEFAULT_MAX_ATTEMPTS=OE;et.DEFAULT_RETRY_DELAY_BASE=rd;et.DEFAULT_RETRY_MODE=GQ;et.DefaultRateLimiter=Jf;et.INITIAL_RETRY_TOKENS=kE;et.INVOCATION_ID_HEADER=WQ;et.MAXIMUM_RETRY_DELAY=LE;et.NO_RETRY_INCREMENT=hN;et.REQUEST_HEADER=QQ;et.RETRY_COST=pN;et.StandardRetryStrategy=sd;et.THROTTLING_RETRY_DELAY_BASE=fN;et.TIMEOUT_RETRY_COST=mN});var gN=b(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.isStreamingPayload=void 0;var JQ=require("stream"),YQ=e=>e?.body instanceof JQ.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;Yf.isStreamingPayload=YQ});var vt=b(ft=>{"use strict";var ze=ys(),ca=ye(),Vn=NE(),SN=jS(),yN=mt(),XQ=U(),ZQ=gN(),eK=(e,t)=>{let r=e,s=ze.NO_RETRY_INCREMENT,n=ze.RETRY_COST,o=ze.TIMEOUT_RETRY_COST,i=e,a=l=>l.name==="TimeoutError"?o:n,c=l=>a(l)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:l=>{if(!c(l))throw new Error("No retry token available");let h=a(l);return i-=h,h},releaseRetryTokens:l=>{i+=l??s,i=Math.min(i,r)}})},_N=(e,t)=>Math.floor(Math.min(ze.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),EN=e=>e?Vn.isRetryableByTrait(e)||Vn.isClockSkewError(e)||Vn.isThrottlingError(e)||Vn.isTransientError(e):!1,wN=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Xf=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=ze.RETRY_MODES.STANDARD;constructor(t,r){this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??EN,this.delayDecider=r?.delayDecider??_N,this.retryQuota=r?.retryQuota??eK(ze.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,s){return r<s&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=ze.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,s){let n,o=0,i=0,a=await this.getMaxAttempts(),{request:c}=r;for(ca.HttpRequest.isInstance(c)&&(c.headers[ze.INVOCATION_ID_HEADER]=SN.v4());;)try{ca.HttpRequest.isInstance(c)&&(c.headers[ze.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),s?.beforeRequest&&await s.beforeRequest();let{response:d,output:u}=await t(r);return s?.afterRequest&&s.afterRequest(d),this.retryQuota.releaseRetryTokens(n),u.$metadata.attempts=o+1,u.$metadata.totalRetryDelay=i,{response:d,output:u}}catch(d){let u=wN(d);if(o++,this.shouldRetry(u,o,a)){n=this.retryQuota.retrieveRetryTokens(u);let l=this.delayDecider(Vn.isThrottlingError(u)?ze.THROTTLING_RETRY_DELAY_BASE:ze.DEFAULT_RETRY_DELAY_BASE,o),h=tK(u.$response),m=Math.max(h||0,l);i+=m,await new Promise(g=>setTimeout(g,m));continue}throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=o,u.$metadata.totalRetryDelay=i,u}}},tK=e=>{if(!ca.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],s=Number(r);return Number.isNaN(s)?new Date(r).getTime()-Date.now():s*1e3},qE=class extends Xf{rateLimiter;constructor(t,r){let{rateLimiter:s,...n}=r??{};super(t,n),this.rateLimiter=s??new ze.DefaultRateLimiter,this.mode=ze.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:s=>{this.rateLimiter.updateClientSendingRate(s)}})}},FE="AWS_MAX_ATTEMPTS",$E="max_attempts",rK={environmentVariableSelector:e=>{let t=e[FE];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${FE} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[$E];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${$E} mast be a number, got "${t}"`);return r},default:ze.DEFAULT_MAX_ATTEMPTS},sK=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:s}=e,n=yN.normalizeProvider(s??ze.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:n,retryStrategy:async()=>t||(await yN.normalizeProvider(r)()===ze.RETRY_MODES.ADAPTIVE?new ze.AdaptiveRetryStrategy(n):new ze.StandardRetryStrategy(n))})},bN="AWS_RETRY_MODE",vN="retry_mode",nK={environmentVariableSelector:e=>e[bN],configFileSelector:e=>e[vN],default:ze.DEFAULT_RETRY_MODE},xN=()=>e=>async t=>{let{request:r}=t;return ca.HttpRequest.isInstance(r)&&(delete r.headers[ze.INVOCATION_ID_HEADER],delete r.headers[ze.REQUEST_HEADER]),e(t)},CN={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},oK=e=>({applyToStack:t=>{t.addRelativeTo(xN(),CN)}}),RN=e=>(t,r)=>async s=>{let n=await e.retryStrategy(),o=await e.maxAttempts();if(iK(n)){n=n;let i=await n.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:u}=s,l=ca.HttpRequest.isInstance(u);for(l&&(u.headers[ze.INVOCATION_ID_HEADER]=SN.v4());;)try{l&&(u.headers[ze.REQUEST_HEADER]=`attempt=${c+1}; max=${o}`);let{response:h,output:m}=await t(s);return n.recordSuccess(i),m.$metadata.attempts=c+1,m.$metadata.totalRetryDelay=d,{response:h,output:m}}catch(h){let m=aK(h);if(a=wN(h),l&&ZQ.isStreamingPayload(u))throw(r.logger instanceof XQ.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await n.refreshRetryTokenForRetry(i,m)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let g=i.getRetryDelay();d+=g,await new Promise(w=>setTimeout(w,g))}}else return n=n,n?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(t,s)},iK=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",aK=e=>{let t={error:e,errorType:cK(e)},r=AN(e.$response);return r&&(t.retryAfterHint=r),t},cK=e=>Vn.isThrottlingError(e)?"THROTTLING":Vn.isTransientError(e)?"TRANSIENT":Vn.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",TN={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},dK=e=>({applyToStack:t=>{t.add(RN(e),TN)}}),AN=e=>{if(!ca.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],s=Number(r);return Number.isNaN(s)?new Date(r):new Date(s*1e3)};ft.AdaptiveRetryStrategy=qE;ft.CONFIG_MAX_ATTEMPTS=$E;ft.CONFIG_RETRY_MODE=vN;ft.ENV_MAX_ATTEMPTS=FE;ft.ENV_RETRY_MODE=bN;ft.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=rK;ft.NODE_RETRY_MODE_CONFIG_OPTIONS=nK;ft.StandardRetryStrategy=Xf;ft.defaultDelayDecider=_N;ft.defaultRetryDecider=EN;ft.getOmitRetryHeadersPlugin=oK;ft.getRetryAfterHint=AN;ft.getRetryPlugin=dK;ft.omitRetryHeadersMiddleware=xN;ft.omitRetryHeadersMiddlewareOptions=CN;ft.resolveRetryConfig=sK;ft.retryMiddleware=RN;ft.retryMiddlewareOptions=TN});var jE=b(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.resolveHttpAuthSchemeConfig=Gn.defaultSecretsManagerHttpAuthSchemeProvider=Gn.defaultSecretsManagerHttpAuthSchemeParametersProvider=void 0;var uK=(wt(),Q(Ks)),UE=mt(),lK=async(e,t,r)=>({operation:(0,UE.getSmithyContext)(t).operation,region:await(0,UE.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Gn.defaultSecretsManagerHttpAuthSchemeParametersProvider=lK;function fK(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"secretsmanager",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var pK=e=>{let t=[];switch(e.operation){default:t.push(fK(e))}return t};Gn.defaultSecretsManagerHttpAuthSchemeProvider=pK;var mK=e=>{let t=(0,uK.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,UE.normalizeProvider)(e.authSchemePreference??[])})};Gn.resolveHttpAuthSchemeConfig=mK});var IN=b((w_e,hK)=>{hK.exports={name:"@aws-sdk/client-secrets-manager",description:"AWS SDK for JavaScript Secrets Manager Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-secrets-manager","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo secrets-manager"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/credential-provider-node":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-secrets-manager",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-secrets-manager"}}});var BE=b(Wn=>{"use strict";var gK=(ss(),Q(Pn)),yK=Me(),PN="AWS_ACCESS_KEY_ID",NN="AWS_SECRET_ACCESS_KEY",ON="AWS_SESSION_TOKEN",kN="AWS_CREDENTIAL_EXPIRATION",DN="AWS_CREDENTIAL_SCOPE",MN="AWS_ACCOUNT_ID",SK=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[PN],r=process.env[NN],s=process.env[ON],n=process.env[kN],o=process.env[DN],i=process.env[MN];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...s&&{sessionToken:s},...n&&{expiration:new Date(n)},...o&&{credentialScope:o},...i&&{accountId:i}};return gK.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new yK.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};Wn.ENV_ACCOUNT_ID=MN;Wn.ENV_CREDENTIAL_SCOPE=DN;Wn.ENV_EXPIRATION=kN;Wn.ENV_KEY=PN;Wn.ENV_SECRET=NN;Wn.ENV_SESSION=ON;Wn.fromEnv=SK});var Qn=b(Mt=>{"use strict";var Ss=Me(),_K=require("url"),EK=require("buffer"),wK=require("http"),WE=Xt(),bK=vr();function nd(e){return new Promise((t,r)=>{let s=wK.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});s.on("error",n=>{r(Object.assign(new Ss.ProviderError("Unable to connect to instance metadata service"),n)),s.destroy()}),s.on("timeout",()=>{r(new Ss.ProviderError("TimeoutError from instance metadata service")),s.destroy()}),s.on("response",n=>{let{statusCode:o=400}=n;(o<200||300<=o)&&(r(Object.assign(new Ss.ProviderError("Error response received from instance metadata service"),{statusCode:o})),s.destroy());let i=[];n.on("data",a=>{i.push(a)}),n.on("end",()=>{t(EK.Buffer.concat(i)),s.destroy()})}),s.end()})}var $N=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",UN=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),jN=1e3,BN=0,QE=({maxRetries:e=BN,timeout:t=jN})=>({maxRetries:e,timeout:t}),zE=(e,t)=>{let r=e();for(let s=0;s<t;s++)r=r.catch(e);return r},Zf="AWS_CONTAINER_CREDENTIALS_FULL_URI",ep="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",VE="AWS_CONTAINER_AUTHORIZATION_TOKEN",vK=(e={})=>{let{timeout:t,maxRetries:r}=QE(e);return()=>zE(async()=>{let s=await AK({logger:e.logger}),n=JSON.parse(await xK(t,s));if(!$N(n))throw new Ss.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return UN(n)},r)},xK=async(e,t)=>(process.env[VE]&&(t.headers={...t.headers,Authorization:process.env[VE]}),(await nd({...t,timeout:e})).toString()),CK="169.254.170.2",RK={localhost:!0,"127.0.0.1":!0},TK={"http:":!0,"https:":!0},AK=async({logger:e})=>{if(process.env[ep])return{hostname:CK,path:process.env[ep]};if(process.env[Zf]){let t=_K.parse(process.env[Zf]);if(!t.hostname||!(t.hostname in RK))throw new Ss.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in TK))throw new Ss.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Ss.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${ep} or ${Zf} environment variable is set`,{tryNextLink:!1,logger:e})},GE=class e extends Ss.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r),this.tryNextLink=r,Object.setPrototypeOf(this,e.prototype)}};Mt.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(Mt.Endpoint||(Mt.Endpoint={}));var IK="AWS_EC2_METADATA_SERVICE_ENDPOINT",PK="ec2_metadata_service_endpoint",NK={environmentVariableSelector:e=>e[IK],configFileSelector:e=>e[PK],default:void 0},da;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(da||(da={}));var OK="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",kK="ec2_metadata_service_endpoint_mode",DK={environmentVariableSelector:e=>e[OK],configFileSelector:e=>e[kK],default:da.IPv4},HN=async()=>bK.parseUrl(await MK()||await LK()),MK=async()=>WE.loadConfig(NK)(),LK=async()=>{let e=await WE.loadConfig(DK)();switch(e){case da.IPv4:return Mt.Endpoint.IPv4;case da.IPv6:return Mt.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(da)}`)}},qK=300,FK=300,$K="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",LN=(e,t)=>{let r=qK+Math.floor(Math.random()*FK),s=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(s)}.
For more information, please visit: `+$K);let n=e.originalExpiration??e.expiration;return{...e,...n?{originalExpiration:n}:{},expiration:s}},UK=(e,t={})=>{let r=t?.logger||console,s;return async()=>{let n;try{n=await e(),n.expiration&&n.expiration.getTime()<Date.now()&&(n=LN(n,r))}catch(o){if(s)r.warn("Credential renew failed: ",o),n=LN(s,r);else throw o}return s=n,n}},zN="/latest/meta-data/iam/security-credentials/",jK="/latest/api/token",HE="AWS_EC2_METADATA_V1_DISABLED",qN="ec2_metadata_v1_disabled",FN="x-aws-ec2-metadata-token",BK=(e={})=>UK(HK(e),{logger:e.logger}),HK=(e={})=>{let t=!1,{logger:r,profile:s}=e,{timeout:n,maxRetries:o}=QE(e),i=async(a,c)=>{if(t||c.headers?.[FN]==null){let l=!1,h=!1,m=await WE.loadConfig({environmentVariableSelector:g=>{let w=g[HE];if(h=!!w&&w!=="false",w===void 0)throw new Ss.CredentialsProviderError(`${HE} not set in env, checking config file next.`,{logger:e.logger});return h},configFileSelector:g=>{let w=g[qN];return l=!!w&&w!=="false",l},default:!1},{profile:s})();if(e.ec2MetadataV1Disabled||m){let g=[];throw e.ec2MetadataV1Disabled&&g.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),l&&g.push(`config file profile (${qN})`),h&&g.push(`process environment variable (${HE})`),new GE(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${g.join(", ")}].`)}}let u=(await zE(async()=>{let l;try{l=await VK(c)}catch(h){throw h.statusCode===401&&(t=!1),h}return l},a)).trim();return zE(async()=>{let l;try{l=await GK(u,c,e)}catch(h){throw h.statusCode===401&&(t=!1),h}return l},a)};return async()=>{let a=await HN();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(o,{...a,timeout:n});{let c;try{c=(await zK({...a,timeout:n})).toString()}catch(d){if(d?.statusCode===400)throw Object.assign(d,{message:"EC2 Metadata token request returned error"});return(d.message==="TimeoutError"||[403,404,405].includes(d.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(o,{...a,timeout:n})}return i(o,{...a,headers:{[FN]:c},timeout:n})}}},zK=async e=>nd({...e,path:jK,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),VK=async e=>(await nd({...e,path:zN})).toString(),GK=async(e,t,r)=>{let s=JSON.parse((await nd({...t,path:zN+e})).toString());if(!$N(s))throw new Ss.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return UN(s)};Mt.DEFAULT_MAX_RETRIES=BN;Mt.DEFAULT_TIMEOUT=jN;Mt.ENV_CMDS_AUTH_TOKEN=VE;Mt.ENV_CMDS_FULL_URI=Zf;Mt.ENV_CMDS_RELATIVE_URI=ep;Mt.fromContainerMetadata=vK;Mt.fromInstanceMetadata=BK;Mt.getInstanceMetadataEndpoint=HN;Mt.httpRequest=nd;Mt.providerConfigFromInit=QE});var VN=b(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.checkUrl=void 0;var WK=Me(),QK="169.254.170.2",KK="169.254.170.23",JK="[fd00:ec2::23]",YK=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===QK||e.hostname===KK||e.hostname===JK)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),s=n=>{let o=parseInt(n,10);return 0<=o&&o<=255};if(r[0]==="127"&&s(r[1])&&s(r[2])&&s(r[3])&&r.length===4)return}throw new WK.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};tp.checkUrl=YK});var GN=b(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.createGetRequest=t5;rp.getCredentials=r5;var KE=Me(),XK=ye(),ZK=U(),e5=Ic();function t5(e){return new XK.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,s])=>(t[r]=s,t),{}),fragment:e.hash})}async function r5(e,t){let s=await(0,e5.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let n=JSON.parse(s);if(typeof n.AccessKeyId!="string"||typeof n.SecretAccessKey!="string"||typeof n.Token!="string"||typeof n.Expiration!="string")throw new KE.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:(0,ZK.parseRfc3339DateTime)(n.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let n={};try{n=JSON.parse(s)}catch{}throw Object.assign(new KE.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:n.Code,Message:n.Message})}throw new KE.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var WN=b(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.retryWrapper=void 0;var s5=(e,t,r)=>async()=>{for(let s=0;s<t;++s)try{return await e()}catch{await new Promise(o=>setTimeout(o,r))}return await e()};sp.retryWrapper=s5});var JN=b(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.fromHttp=void 0;var n5=(Tn(),Q(Rn)),o5=(ss(),Q(Pn)),i5=br(),QN=Me(),a5=n5.__importDefault(require("fs/promises")),c5=VN(),KN=GN(),d5=WN(),u5="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",l5="http://169.254.170.2",f5="AWS_CONTAINER_CREDENTIALS_FULL_URI",p5="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",m5="AWS_CONTAINER_AUTHORIZATION_TOKEN",h5=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[u5],s=e.awsContainerCredentialsFullUri??process.env[f5],n=e.awsContainerAuthorizationToken??process.env[m5],o=e.awsContainerAuthorizationTokenFile??process.env[p5],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),n&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),s)t=s;else if(r)t=`${l5}${r}`;else throw new QN.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,c5.checkUrl)(a,e.logger);let c=i5.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,d5.retryWrapper)(async()=>{let d=(0,KN.createGetRequest)(a);n?d.headers.Authorization=n:o&&(d.headers.Authorization=(await a5.default.readFile(o)).toString());try{let u=await c.handle(d);return(0,KN.getCredentials)(u.response).then(l=>(0,o5.setCredentialFeature)(l,"CREDENTIALS_HTTP","z"))}catch(u){throw new QN.CredentialsProviderError(String(u),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};np.fromHttp=h5});var JE=b(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.fromHttp=void 0;var g5=JN();Object.defineProperty(op,"fromHttp",{enumerable:!0,get:function(){return g5.fromHttp}})});function y5(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function S5(e){return{schemeId:"smithy.api#noAuth"}}var od,YN,XN,ZN,YE=S(()=>{wt();od=y(mt()),YN=async(e,t,r)=>({operation:(0,od.getSmithyContext)(t).operation,region:await(0,od.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});XN=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(S5(e));break}default:t.push(y5(e))}return t},ZN=e=>{let t=Ko(e);return Object.assign(t,{authSchemePreference:(0,od.normalizeProvider)(e.authSchemePreference??[])})}});var eO,tO,XE=S(()=>{eO=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),tO={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var ip,ZE=S(()=>{ip={name:"@aws-sdk/nested-clients",version:"3.928.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var id=b(ei=>{"use strict";var rO=require("os"),ew=require("process"),E5=ia(),sO={isCrtAvailable:!1},w5=()=>sO.isCrtAvailable?["md/crt-avail"]:null,nO=({serviceId:e,clientVersion:t})=>async r=>{let s=[["aws-sdk-js",t],["ua","2.1"],[`os/${rO.platform()}`,rO.release()],["lang/js"],["md/nodejs",`${ew.versions.node}`]],n=w5();n&&s.push(n),e&&s.push([`api/${e}`,t]),ew.env.AWS_EXECUTION_ENV&&s.push([`exec-env/${ew.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...s,[`app/${o}`]]:[...s]},b5=nO,oO="AWS_SDK_UA_APP_ID",iO="sdk_ua_app_id",v5="sdk-ua-app-id",x5={environmentVariableSelector:e=>e[oO],configFileSelector:e=>e[iO]??e[v5],default:E5.DEFAULT_UA_APP_ID};ei.NODE_APP_ID_CONFIG_OPTIONS=x5;ei.UA_APP_ID_ENV_NAME=oO;ei.UA_APP_ID_INI_NAME=iO;ei.createDefaultUserAgentProvider=nO;ei.crtAvailability=sO;ei.defaultUserAgent=b5});var Xs=b(dO=>{"use strict";var tw=ki(),C5=qe(),R5=require("buffer"),aO=require("crypto"),rw=class{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(C5.toUint8Array(cO(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?aO.createHmac(this.algorithmIdentifier,cO(this.secret)):aO.createHash(this.algorithmIdentifier)}};function cO(e,t){return R5.Buffer.isBuffer(e)?e:typeof e=="string"?tw.fromString(e,t):ArrayBuffer.isView(e)?tw.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):tw.fromArrayBuffer(e)}dO.Hash=rw});var Zs=b(uO=>{"use strict";var sw=require("node:fs"),T5=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof sw.ReadStream){if(e.path!=null)return sw.lstatSync(e.path).size;if(typeof e.fd=="number")return sw.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};uO.calculateBodyLength=T5});var EO,Tr,lO,ad,ua,la,en,nw,ow,fO,pO,mO,wO,bO,Rr,hO,vO,gO,yO,SO,_O,A5,xO,CO=S(()=>{EO="required",Tr="argv",lO="isSet",ad="booleanEquals",ua="error",la="endpoint",en="tree",nw="PartitionResult",ow="getAttr",fO={[EO]:!1,type:"string"},pO={[EO]:!0,default:!1,type:"boolean"},mO={ref:"Endpoint"},wO={fn:ad,[Tr]:[{ref:"UseFIPS"},!0]},bO={fn:ad,[Tr]:[{ref:"UseDualStack"},!0]},Rr={},hO={fn:ow,[Tr]:[{ref:nw},"supportsFIPS"]},vO={ref:nw},gO={fn:ad,[Tr]:[!0,{fn:ow,[Tr]:[vO,"supportsDualStack"]}]},yO=[wO],SO=[bO],_O=[{ref:"Region"}],A5={version:"1.0",parameters:{Region:fO,UseDualStack:pO,UseFIPS:pO,Endpoint:fO},rules:[{conditions:[{fn:lO,[Tr]:[mO]}],rules:[{conditions:yO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ua},{conditions:SO,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ua},{endpoint:{url:mO,properties:Rr,headers:Rr},type:la}],type:en},{conditions:[{fn:lO,[Tr]:_O}],rules:[{conditions:[{fn:"aws.partition",[Tr]:_O,assign:nw}],rules:[{conditions:[wO,bO],rules:[{conditions:[{fn:ad,[Tr]:[!0,hO]},gO],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Rr,headers:Rr},type:la}],type:en},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ua}],type:en},{conditions:yO,rules:[{conditions:[{fn:ad,[Tr]:[hO,!0]}],rules:[{conditions:[{fn:"stringEquals",[Tr]:[{fn:ow,[Tr]:[vO,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Rr,headers:Rr},type:la},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Rr,headers:Rr},type:la}],type:en},{error:"FIPS is enabled but this partition does not support FIPS",type:ua}],type:en},{conditions:SO,rules:[{conditions:[gO],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Rr,headers:Rr},type:la}],type:en},{error:"DualStack is enabled but this partition does not support DualStack",type:ua}],type:en},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Rr,headers:Rr},type:la}],type:en}],type:en},{error:"Invalid Configuration: Missing Region",type:ua}]},xO=A5});var RO,fa,I5,TO,AO=S(()=>{RO=y(rs()),fa=y(es());CO();I5=new fa.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),TO=(e,t={})=>I5.get(e,()=>(0,fa.resolveEndpoint)(xO,{endpointParams:e,logger:t.logger}));fa.customEndpointFunctions.aws=RO.awsEndpointFunctions});var IO,PO,ap,cp,NO,OO=S(()=>{wt();De();IO=y(U()),PO=y(vr()),ap=y(Le()),cp=y(qe());YE();AO();NO=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??ap.fromBase64,base64Encoder:e?.base64Encoder??ap.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??TO,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??XN,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Jt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new zt}],logger:e?.logger??new IO.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??PO.parseUrl,utf8Decoder:e?.utf8Decoder??cp.fromUtf8,utf8Encoder:e?.utf8Encoder??cp.toUtf8})});var tn=b(LO=>{"use strict";var P5=Ze(),kO=Xt(),N5=Me(),O5="AWS_EXECUTION_ENV",DO="AWS_REGION",MO="AWS_DEFAULT_REGION",k5="AWS_EC2_METADATA_DISABLED",D5=["in-region","cross-region","mobile","standard","legacy"],M5="/latest/meta-data/placement/region",L5="AWS_DEFAULTS_MODE",q5="defaults_mode",F5={environmentVariableSelector:e=>e[L5],configFileSelector:e=>e[q5],default:"legacy"},$5=({region:e=kO.loadConfig(P5.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=kO.loadConfig(F5)}={})=>N5.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return U5(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${D5.join(", ")}, got ${r}`)}}),U5=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await j5();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},j5=async()=>{if(process.env[O5]&&(process.env[DO]||process.env[MO]))return process.env[DO]??process.env[MO];if(!process.env[k5])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>y(Qn())),r=await e();return(await t({...r,path:M5})).toString()}catch{}};LO.resolveDefaultsModeConfig=$5});var dp,Jn,qO,up,Kn,lp,FO,$O,UO,jO,BO,HO,zO=S(()=>{ZE();wt();dp=y(id()),Jn=y(Ze()),qO=y(Xs()),up=y(vt()),Kn=y(Xt()),lp=y(br()),FO=y(Zs()),$O=y(ys());OO();UO=y(U()),jO=y(tn()),BO=y(U()),HO=e=>{(0,BO.emitWarningIfUnsupportedVersion)(process.version);let t=(0,jO.resolveDefaultsModeConfig)(e),r=()=>t().then(UO.loadConfigsForDefaultMode),s=NO(e);Hi(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Kn.loadConfig)(Gi,n),bodyLengthChecker:e?.bodyLengthChecker??FO.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,dp.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:ip.version}),maxAttempts:e?.maxAttempts??(0,Kn.loadConfig)(up.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Kn.loadConfig)(Jn.NODE_REGION_CONFIG_OPTIONS,{...Jn.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:lp.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Kn.loadConfig)({...up.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||$O.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??qO.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??lp.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Kn.loadConfig)(Jn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,Kn.loadConfig)(Jn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,Kn.loadConfig)(dp.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var GO=b(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.warning=void 0;pa.stsRegionDefaultResolver=H5;var VO=Ze(),B5=Xt();function H5(e={}){return(0,B5.loadConfig)({...VO.NODE_REGION_CONFIG_OPTIONS,async default(){return pa.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...VO.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}pa.warning={silence:!1}});var ma=b(_s=>{"use strict";var cd=Ze(),WO=GO(),z5=e=>({setRegion(t){e.region=t},region(){return e.region}}),V5=e=>({region:e.region()});Object.defineProperty(_s,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return cd.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(_s,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return cd.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(_s,"REGION_ENV_NAME",{enumerable:!0,get:function(){return cd.REGION_ENV_NAME}});Object.defineProperty(_s,"REGION_INI_NAME",{enumerable:!0,get:function(){return cd.REGION_INI_NAME}});Object.defineProperty(_s,"resolveRegionConfig",{enumerable:!0,get:function(){return cd.resolveRegionConfig}});_s.getAwsRegionExtensionConfiguration=z5;_s.resolveAwsRegionExtensionConfiguration=V5;Object.keys(WO).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(_s,e)&&Object.defineProperty(_s,e,{enumerable:!0,get:function(){return WO[e]}})})});var QO,KO,JO=S(()=>{QO=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},KO=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var fp,pp,mp,YO,XO=S(()=>{fp=y(ma()),pp=y(ye()),mp=y(U());JO();YO=(e,t)=>{let r=Object.assign((0,fp.getAwsRegionExtensionConfiguration)(e),(0,mp.getDefaultExtensionConfiguration)(e),(0,pp.getHttpHandlerExtensionConfiguration)(e),QO(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,fp.resolveAwsRegionExtensionConfiguration)(r),(0,mp.resolveDefaultRuntimeConfig)(r),(0,pp.resolveHttpHandlerRuntimeConfig)(r),KO(r))}});var hp,ZO,ek,gp,tk,rk,sk,yp,iw,dd,aw=S(()=>{hp=y(Ms()),ZO=y(Ls()),ek=y(qs()),gp=y(ia()),tk=y(Ze());De();rk=y(Js()),sk=y(Gt()),yp=y(vt()),iw=y(U());YE();XE();zO();XO();dd=class extends iw.Client{config;constructor(...[t]){let r=HO(t||{});super(r),this.initConfig=r;let s=eO(r),n=(0,gp.resolveUserAgentConfig)(s),o=(0,yp.resolveRetryConfig)(n),i=(0,tk.resolveRegionConfig)(o),a=(0,hp.resolveHostHeaderConfig)(i),c=(0,sk.resolveEndpointConfig)(a),d=ZN(c),u=YO(d,t?.extensions||[]);this.config=u,this.middlewareStack.use((0,gp.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,yp.getRetryPlugin)(this.config)),this.middlewareStack.use((0,rk.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,hp.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,ZO.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,ek.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Fs(this.config,{httpAuthSchemeParametersProvider:YN,identityProviderConfigProvider:async l=>new Zr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use($s(this.config))}destroy(){super.destroy()}}});var nk,gt,Sp=S(()=>{nk=y(U()),gt=class e extends nk.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var ti,G5,ud,ld,cw,dw,fd,pd,md,hd,W5,gd,yd,Sd,_d,Ed,_p=S(()=>{ti=y(U());Sp();G5={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},ud=class e extends gt{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},ld=class e extends gt{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cw=e=>({...e,...e.clientSecret&&{clientSecret:ti.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:ti.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:ti.SENSITIVE_STRING}}),dw=e=>({...e,...e.accessToken&&{accessToken:ti.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:ti.SENSITIVE_STRING},...e.idToken&&{idToken:ti.SENSITIVE_STRING}}),fd=class e extends gt{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},pd=class e extends gt{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},md=class e extends gt{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},hd=class e extends gt{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},W5={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},gd=class e extends gt{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},yd=class e extends gt{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Sd=class e extends gt{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},_d=class e extends gt{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ed=class e extends gt{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var L,ok,ik,Q5,K5,J5,Y5,X5,Z5,e8,t8,r8,s8,n8,o8,i8,Ar,ak=S(()=>{wt();De();L=y(U());_p();Sp();ok=async(e,t)=>{let r=Vo(e,t),s={"content-type":"application/json"};r.bp("/token");let n;return n=JSON.stringify((0,L.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,L._json)(o)})),r.m("POST").h(s).b(n),r.build()},ik=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Q5(e,t);let r=(0,L.map)({$metadata:Ar(e)}),s=(0,L.expectNonNull)((0,L.expectObject)(await Yo(e.body,t)),"body"),n=(0,L.take)(s,{accessToken:L.expectString,expiresIn:L.expectInt32,idToken:L.expectString,refreshToken:L.expectString,tokenType:L.expectString});return Object.assign(r,n),r},Q5=async(e,t)=>{let r={...e,body:await xf(e.body,t)},s=Fn(e,r.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await J5(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await Y5(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await X5(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Z5(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await e8(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await t8(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await r8(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await s8(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await n8(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await o8(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await i8(r,t);default:let n=r.body;return K5({output:e,parsedBody:n,errorCode:s})}},K5=(0,L.withBaseException)(gt),J5=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString,reason:L.expectString});Object.assign(r,n);let o=new ud({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},Y5=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new ld({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},X5=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new fd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},Z5=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new pd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},e8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new md({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},t8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new hd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},r8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString,reason:L.expectString});Object.assign(r,n);let o=new gd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},s8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new yd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},n8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new Sd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},o8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new _d({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},i8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new Ed({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},Ar=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var ck,dk,uw,wd,lw=S(()=>{ck=y(Gt()),dk=y(wr()),uw=y(U());XE();_p();ak();wd=class extends uw.Command.classBuilder().ep(tO).m(function(t,r,s,n){return[(0,dk.getSerdePlugin)(s,this.serialize,this.deserialize),(0,ck.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(cw,dw).ser(ok).de(ik).build(){}});var uk,a8,Ep,lk=S(()=>{uk=y(U());lw();aw();a8={CreateTokenCommand:wd},Ep=class extends dd{};(0,uk.createAggregatedClient)(a8,Ep)});var fk=S(()=>{lw()});var pk=S(()=>{_p()});var fw={};ct(fw,{$Command:()=>uw.Command,AccessDeniedException:()=>ud,AccessDeniedExceptionReason:()=>G5,AuthorizationPendingException:()=>ld,CreateTokenCommand:()=>wd,CreateTokenRequestFilterSensitiveLog:()=>cw,CreateTokenResponseFilterSensitiveLog:()=>dw,ExpiredTokenException:()=>fd,InternalServerException:()=>pd,InvalidClientException:()=>md,InvalidGrantException:()=>hd,InvalidRequestException:()=>gd,InvalidRequestExceptionReason:()=>W5,InvalidScopeException:()=>yd,SSOOIDC:()=>Ep,SSOOIDCClient:()=>dd,SSOOIDCServiceException:()=>gt,SlowDownException:()=>Sd,UnauthorizedClientException:()=>_d,UnsupportedGrantTypeException:()=>Ed,__Client:()=>iw.Client});var pw=S(()=>{aw();lk();fk();pk();Sp()});var yk=b(vd=>{"use strict";var c8=(ss(),Q(Pn)),d8=(L_(),Q(hP)),fr=Me(),bd=Vt(),u8=require("fs"),l8=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new fr.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=d8.getBearerTokenEnvKey(t);if(!(r in process.env))throw new fr.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let s={token:process.env[r]};return c8.setTokenFeature(s,"BEARER_SERVICE_ENV_VARS","3"),s},f8=300*1e3,mw="To refresh this SSO session run 'aws sso login' with the corresponding profile.",p8=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(pw(),fw)),s=o=>t.clientConfig?.[o]??t.parentClientConfig?.[o];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},m8=async(e,t,r={})=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(pw(),fw));return(await p8(t,r)).send(new s({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},mk=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new fr.TokenProviderError(`Token is expired. ${mw}`,!1)},ri=(e,t,r=!1)=>{if(typeof t>"u")throw new fr.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${mw}`,!1)},{writeFile:h8}=u8.promises,g8=(e,t)=>{let r=bd.getSSOTokenFilepath(e),s=JSON.stringify(t,null,2);return h8(r,s)},hk=new Date(0),gk=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let s=await bd.parseKnownFiles(r),n=bd.getProfileName({profile:r.profile??t?.profile}),o=s[n];if(o){if(!o.sso_session)throw new fr.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new fr.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let i=o.sso_session,c=(await bd.loadSsoSessionData(r))[i];if(!c)throw new fr.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let g of["sso_start_url","sso_region"])if(!c[g])throw new fr.TokenProviderError(`Sso session '${i}' is missing required property '${g}'.`,!1);c.sso_start_url;let d=c.sso_region,u;try{u=await bd.getSSOTokenFromFile(i)}catch{throw new fr.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${mw}`,!1)}ri("accessToken",u.accessToken),ri("expiresAt",u.expiresAt);let{accessToken:l,expiresAt:h}=u,m={token:l,expiration:new Date(h)};if(m.expiration.getTime()-Date.now()>f8)return m;if(Date.now()-hk.getTime()<30*1e3)return mk(m),m;ri("clientId",u.clientId,!0),ri("clientSecret",u.clientSecret,!0),ri("refreshToken",u.refreshToken,!0);try{hk.setTime(Date.now());let g=await m8(u,d,r);ri("accessToken",g.accessToken),ri("expiresIn",g.expiresIn);let w=new Date(Date.now()+g.expiresIn*1e3);try{await g8(i,{...u,accessToken:g.accessToken,expiresAt:w.toISOString(),refreshToken:g.refreshToken})}catch{}return{token:g.accessToken,expiration:w}}catch{return mk(m),m}},y8=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new fr.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},S8=(e={})=>fr.memoize(fr.chain(gk(e),async()=>{throw new fr.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);vd.fromEnvSigningName=l8;vd.fromSso=gk;vd.fromStatic=y8;vd.nodeProvider=S8});var gw=b(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.resolveHttpAuthSchemeConfig=Yn.defaultSSOHttpAuthSchemeProvider=Yn.defaultSSOHttpAuthSchemeParametersProvider=void 0;var _8=(wt(),Q(Ks)),hw=mt(),E8=async(e,t,r)=>({operation:(0,hw.getSmithyContext)(t).operation,region:await(0,hw.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Yn.defaultSSOHttpAuthSchemeParametersProvider=E8;function w8(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function wp(e){return{schemeId:"smithy.api#noAuth"}}var b8=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(wp(e));break}case"ListAccountRoles":{t.push(wp(e));break}case"ListAccounts":{t.push(wp(e));break}case"Logout":{t.push(wp(e));break}default:t.push(w8(e))}return t};Yn.defaultSSOHttpAuthSchemeProvider=b8;var v8=e=>{let t=(0,_8.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,hw.normalizeProvider)(e.authSchemePreference??[])})};Yn.resolveHttpAuthSchemeConfig=v8});var Sk=b((OEe,x8)=>{x8.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var kk=b(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});bp.ruleSet=void 0;var Ik="required",Pr="fn",Nr="argv",ya="ref",_k=!0,Ek="isSet",xd="booleanEquals",ha="error",ga="endpoint",rn="tree",yw="PartitionResult",Sw="getAttr",wk={[Ik]:!1,type:"string"},bk={[Ik]:!0,default:!1,type:"boolean"},vk={[ya]:"Endpoint"},Pk={[Pr]:xd,[Nr]:[{[ya]:"UseFIPS"},!0]},Nk={[Pr]:xd,[Nr]:[{[ya]:"UseDualStack"},!0]},Ir={},xk={[Pr]:Sw,[Nr]:[{[ya]:yw},"supportsFIPS"]},Ok={[ya]:yw},Ck={[Pr]:xd,[Nr]:[!0,{[Pr]:Sw,[Nr]:[Ok,"supportsDualStack"]}]},Rk=[Pk],Tk=[Nk],Ak=[{[ya]:"Region"}],C8={version:"1.0",parameters:{Region:wk,UseDualStack:bk,UseFIPS:bk,Endpoint:wk},rules:[{conditions:[{[Pr]:Ek,[Nr]:[vk]}],rules:[{conditions:Rk,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ha},{conditions:Tk,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ha},{endpoint:{url:vk,properties:Ir,headers:Ir},type:ga}],type:rn},{conditions:[{[Pr]:Ek,[Nr]:Ak}],rules:[{conditions:[{[Pr]:"aws.partition",[Nr]:Ak,assign:yw}],rules:[{conditions:[Pk,Nk],rules:[{conditions:[{[Pr]:xd,[Nr]:[_k,xk]},Ck],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ir,headers:Ir},type:ga}],type:rn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ha}],type:rn},{conditions:Rk,rules:[{conditions:[{[Pr]:xd,[Nr]:[xk,_k]}],rules:[{conditions:[{[Pr]:"stringEquals",[Nr]:[{[Pr]:Sw,[Nr]:[Ok,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Ir,headers:Ir},type:ga},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ir,headers:Ir},type:ga}],type:rn},{error:"FIPS is enabled but this partition does not support FIPS",type:ha}],type:rn},{conditions:Tk,rules:[{conditions:[Ck],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ir,headers:Ir},type:ga}],type:rn},{error:"DualStack is enabled but this partition does not support DualStack",type:ha}],type:rn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ir,headers:Ir},type:ga}],type:rn}],type:rn},{error:"Invalid Configuration: Missing Region",type:ha}]};bp.ruleSet=C8});var Dk=b(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});vp.defaultEndpointResolver=void 0;var R8=rs(),_w=es(),T8=kk(),A8=new _w.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),I8=(e,t={})=>A8.get(e,()=>(0,_w.resolveEndpoint)(T8.ruleSet,{endpointParams:e,logger:t.logger}));vp.defaultEndpointResolver=I8;_w.customEndpointFunctions.aws=R8.awsEndpointFunctions});var qk=b(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.getRuntimeConfig=void 0;var P8=(wt(),Q(Ks)),N8=(De(),Q(ms)),O8=U(),k8=vr(),Mk=Le(),Lk=qe(),D8=gw(),M8=Dk(),L8=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Mk.fromBase64,base64Encoder:e?.base64Encoder??Mk.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??M8.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??D8.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new P8.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new N8.NoAuthSigner}],logger:e?.logger??new O8.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??k8.parseUrl,utf8Decoder:e?.utf8Decoder??Lk.fromUtf8,utf8Encoder:e?.utf8Encoder??Lk.toUtf8});xp.getRuntimeConfig=L8});var Bk=b(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.getRuntimeConfig=void 0;var q8=(Tn(),Q(Rn)),F8=q8.__importDefault(Sk()),Fk=(wt(),Q(Ks)),$k=id(),Cp=Ze(),$8=Xs(),Uk=vt(),si=Xt(),jk=br(),U8=Zs(),j8=ys(),B8=qk(),H8=U(),z8=tn(),V8=U(),G8=e=>{(0,V8.emitWarningIfUnsupportedVersion)(process.version);let t=(0,z8.resolveDefaultsModeConfig)(e),r=()=>t().then(H8.loadConfigsForDefaultMode),s=(0,B8.getRuntimeConfig)(e);(0,Fk.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,si.loadConfig)(Fk.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??U8.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,$k.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:F8.default.version}),maxAttempts:e?.maxAttempts??(0,si.loadConfig)(Uk.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,si.loadConfig)(Cp.NODE_REGION_CONFIG_OPTIONS,{...Cp.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:jk.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,si.loadConfig)({...Uk.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||j8.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??$8.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??jk.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,si.loadConfig)(Cp.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,si.loadConfig)(Cp.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,si.loadConfig)($k.NODE_APP_ID_CONFIG_OPTIONS,n)}};Rp.getRuntimeConfig=G8});var aD=b(tt=>{"use strict";var Hk=Ms(),W8=Ls(),Q8=qs(),zk=ia(),K8=Ze(),sn=(De(),Q(ms)),J8=Js(),Ad=Gt(),Vk=vt(),H=U(),Gk=gw(),Y8=Bk(),Wk=ma(),Qk=ye(),Dp=wr(),Cd=(wt(),Q(Ks)),X8=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Mp={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Z8=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},e9=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),t9=(e,t)=>{let r=Object.assign(Wk.getAwsRegionExtensionConfiguration(e),H.getDefaultExtensionConfiguration(e),Qk.getHttpHandlerExtensionConfiguration(e),Z8(e));return t.forEach(s=>s.configure(r)),Object.assign(e,Wk.resolveAwsRegionExtensionConfiguration(r),H.resolveDefaultRuntimeConfig(r),Qk.resolveHttpHandlerRuntimeConfig(r),e9(r))},Sa=class extends H.Client{config;constructor(...[t]){let r=Y8.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=X8(r),n=zk.resolveUserAgentConfig(s),o=Vk.resolveRetryConfig(n),i=K8.resolveRegionConfig(o),a=Hk.resolveHostHeaderConfig(i),c=Ad.resolveEndpointConfig(a),d=Gk.resolveHttpAuthSchemeConfig(c),u=t9(d,t?.extensions||[]);this.config=u,this.middlewareStack.use(zk.getUserAgentPlugin(this.config)),this.middlewareStack.use(Vk.getRetryPlugin(this.config)),this.middlewareStack.use(J8.getContentLengthPlugin(this.config)),this.middlewareStack.use(Hk.getHostHeaderPlugin(this.config)),this.middlewareStack.use(W8.getLoggerPlugin(this.config)),this.middlewareStack.use(Q8.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(sn.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:Gk.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new sn.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(sn.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Xn=class e extends H.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Tp=class e extends Xn{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ap=class e extends Xn{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ip=class e extends Xn{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Pp=class e extends Xn{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Kk=e=>({...e,...e.accessToken&&{accessToken:H.SENSITIVE_STRING}}),Jk=e=>({...e,...e.secretAccessKey&&{secretAccessKey:H.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:H.SENSITIVE_STRING}}),Yk=e=>({...e,...e.roleCredentials&&{roleCredentials:Jk(e.roleCredentials)}}),Xk=e=>({...e,...e.accessToken&&{accessToken:H.SENSITIVE_STRING}}),Zk=e=>({...e,...e.accessToken&&{accessToken:H.SENSITIVE_STRING}}),eD=e=>({...e,...e.accessToken&&{accessToken:H.SENSITIVE_STRING}}),r9=async(e,t)=>{let r=sn.requestBuilder(e,t),s=H.map({},H.isSerializableHeaderValue,{[Fp]:e[qp]});r.bp("/federation/credentials");let n=H.map({[g9]:[,H.expectNonNull(e[h9],"roleName")],[rD]:[,H.expectNonNull(e[tD],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},s9=async(e,t)=>{let r=sn.requestBuilder(e,t),s=H.map({},H.isSerializableHeaderValue,{[Fp]:e[qp]});r.bp("/assignment/roles");let n=H.map({[iD]:[,e[oD]],[nD]:[()=>e.maxResults!==void 0,()=>e[sD].toString()],[rD]:[,H.expectNonNull(e[tD],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},n9=async(e,t)=>{let r=sn.requestBuilder(e,t),s=H.map({},H.isSerializableHeaderValue,{[Fp]:e[qp]});r.bp("/assignment/accounts");let n=H.map({[iD]:[,e[oD]],[nD]:[()=>e.maxResults!==void 0,()=>e[sD].toString()]});return r.m("GET").h(s).q(n).b(void 0),r.build()},o9=async(e,t)=>{let r=sn.requestBuilder(e,t),s=H.map({},H.isSerializableHeaderValue,{[Fp]:e[qp]});return r.bp("/logout"),r.m("POST").h(s).b(void 0),r.build()},i9=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Lp(e,t);let r=H.map({$metadata:Zn(e)}),s=H.expectNonNull(H.expectObject(await Cd.parseJsonBody(e.body,t)),"body"),n=H.take(s,{roleCredentials:H._json});return Object.assign(r,n),r},a9=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Lp(e,t);let r=H.map({$metadata:Zn(e)}),s=H.expectNonNull(H.expectObject(await Cd.parseJsonBody(e.body,t)),"body"),n=H.take(s,{nextToken:H.expectString,roleList:H._json});return Object.assign(r,n),r},c9=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Lp(e,t);let r=H.map({$metadata:Zn(e)}),s=H.expectNonNull(H.expectObject(await Cd.parseJsonBody(e.body,t)),"body"),n=H.take(s,{accountList:H._json,nextToken:H.expectString});return Object.assign(r,n),r},d9=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Lp(e,t);let r=H.map({$metadata:Zn(e)});return await H.collectBody(e.body,t),r},Lp=async(e,t)=>{let r={...e,body:await Cd.parseJsonErrorBody(e.body,t)},s=Cd.loadRestJsonErrorCode(e,r.body);switch(s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await l9(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await f9(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await p9(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await m9(r);default:let n=r.body;return u9({output:e,parsedBody:n,errorCode:s})}},u9=H.withBaseException(Xn),l9=async(e,t)=>{let r=H.map({}),s=e.body,n=H.take(s,{message:H.expectString});Object.assign(r,n);let o=new Tp({$metadata:Zn(e),...r});return H.decorateServiceException(o,e.body)},f9=async(e,t)=>{let r=H.map({}),s=e.body,n=H.take(s,{message:H.expectString});Object.assign(r,n);let o=new Ap({$metadata:Zn(e),...r});return H.decorateServiceException(o,e.body)},p9=async(e,t)=>{let r=H.map({}),s=e.body,n=H.take(s,{message:H.expectString});Object.assign(r,n);let o=new Ip({$metadata:Zn(e),...r});return H.decorateServiceException(o,e.body)},m9=async(e,t)=>{let r=H.map({}),s=e.body,n=H.take(s,{message:H.expectString});Object.assign(r,n);let o=new Pp({$metadata:Zn(e),...r});return H.decorateServiceException(o,e.body)},Zn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),tD="accountId",qp="accessToken",rD="account_id",sD="maxResults",nD="max_result",oD="nextToken",iD="next_token",h9="roleName",g9="role_name",Fp="x-amz-sso_bearer_token",Np=class extends H.Command.classBuilder().ep(Mp).m(function(t,r,s,n){return[Dp.getSerdePlugin(s,this.serialize,this.deserialize),Ad.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(Kk,Yk).ser(r9).de(i9).build(){},Rd=class extends H.Command.classBuilder().ep(Mp).m(function(t,r,s,n){return[Dp.getSerdePlugin(s,this.serialize,this.deserialize),Ad.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(Xk,void 0).ser(s9).de(a9).build(){},Td=class extends H.Command.classBuilder().ep(Mp).m(function(t,r,s,n){return[Dp.getSerdePlugin(s,this.serialize,this.deserialize),Ad.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(Zk,void 0).ser(n9).de(c9).build(){},Op=class extends H.Command.classBuilder().ep(Mp).m(function(t,r,s,n){return[Dp.getSerdePlugin(s,this.serialize,this.deserialize),Ad.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(eD,void 0).ser(o9).de(d9).build(){},y9={GetRoleCredentialsCommand:Np,ListAccountRolesCommand:Rd,ListAccountsCommand:Td,LogoutCommand:Op},kp=class extends Sa{};H.createAggregatedClient(y9,kp);var S9=sn.createPaginator(Sa,Rd,"nextToken","nextToken","maxResults"),_9=sn.createPaginator(Sa,Td,"nextToken","nextToken","maxResults");Object.defineProperty(tt,"$Command",{enumerable:!0,get:function(){return H.Command}});Object.defineProperty(tt,"__Client",{enumerable:!0,get:function(){return H.Client}});tt.GetRoleCredentialsCommand=Np;tt.GetRoleCredentialsRequestFilterSensitiveLog=Kk;tt.GetRoleCredentialsResponseFilterSensitiveLog=Yk;tt.InvalidRequestException=Tp;tt.ListAccountRolesCommand=Rd;tt.ListAccountRolesRequestFilterSensitiveLog=Xk;tt.ListAccountsCommand=Td;tt.ListAccountsRequestFilterSensitiveLog=Zk;tt.LogoutCommand=Op;tt.LogoutRequestFilterSensitiveLog=eD;tt.ResourceNotFoundException=Ap;tt.RoleCredentialsFilterSensitiveLog=Jk;tt.SSO=kp;tt.SSOClient=Sa;tt.SSOServiceException=Xn;tt.TooManyRequestsException=Ip;tt.UnauthorizedException=Pp;tt.paginateListAccountRoles=S9;tt.paginateListAccounts=_9});var dD=b(Ew=>{"use strict";var cD=aD();Object.defineProperty(Ew,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return cD.GetRoleCredentialsCommand}});Object.defineProperty(Ew,"SSOClient",{enumerable:!0,get:function(){return cD.SSOClient}})});var ww=b(Up=>{"use strict";var ns=Me(),$p=Vt(),uD=(ss(),Q(Pn)),E9=yk(),fD=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),Id=!1,lD=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:s,ssoRoleName:n,ssoClient:o,clientConfig:i,parentClientConfig:a,profile:c,filepath:d,configFilepath:u,ignoreCache:l,logger:h})=>{let m,g="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let Ae=await E9.fromSso({profile:c,filepath:d,configFilepath:u,ignoreCache:l})();m={accessToken:Ae.token,expiresAt:new Date(Ae.expiration).toISOString()}}catch(Ae){throw new ns.CredentialsProviderError(Ae.message,{tryNextLink:Id,logger:h})}else try{m=await $p.getSSOTokenFromFile(e)}catch{throw new ns.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${g}`,{tryNextLink:Id,logger:h})}if(new Date(m.expiresAt).getTime()-Date.now()<=0)throw new ns.CredentialsProviderError(`The SSO session associated with this profile has expired. ${g}`,{tryNextLink:Id,logger:h});let{accessToken:w}=m,{SSOClient:C,GetRoleCredentialsCommand:T}=await Promise.resolve().then(function(){return dD()}),N=o||new C(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??s,userAgentAppId:i?.userAgentAppId??a?.userAgentAppId})),B;try{B=await N.send(new T({accountId:r,roleName:n,accessToken:w}))}catch(Ae){throw new ns.CredentialsProviderError(Ae,{tryNextLink:Id,logger:h})}let{roleCredentials:{accessKeyId:V,secretAccessKey:Z,sessionToken:we,expiration:Oe,credentialScope:te,accountId:he}={}}=B;if(!V||!Z||!we||!Oe)throw new ns.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Id,logger:h});let be={accessKeyId:V,secretAccessKey:Z,sessionToken:we,expiration:new Date(Oe),...te&&{credentialScope:te},...he&&{accountId:he}};return t?uD.setCredentialFeature(be,"CREDENTIALS_SSO","s"):uD.setCredentialFeature(be,"CREDENTIALS_SSO_LEGACY","u"),be},pD=(e,t)=>{let{sso_start_url:r,sso_account_id:s,sso_region:n,sso_role_name:o}=e;if(!r||!s||!n||!o)throw new ns.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},w9=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e,{ssoClient:a}=e,c=$p.getProfileName({profile:e.profile??t?.profile});if(!r&&!s&&!n&&!o&&!i){let u=(await $p.parseKnownFiles(e))[c];if(!u)throw new ns.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!fD(u))throw new ns.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(u?.sso_session){let T=(await $p.loadSsoSessionData(e))[u.sso_session],N=` configurations in profile ${c} and sso-session ${u.sso_session}`;if(n&&n!==T.sso_region)throw new ns.CredentialsProviderError("Conflicting SSO region"+N,{tryNextLink:!1,logger:e.logger});if(r&&r!==T.sso_start_url)throw new ns.CredentialsProviderError("Conflicting SSO start_url"+N,{tryNextLink:!1,logger:e.logger});u.sso_region=T.sso_region,u.sso_start_url=T.sso_start_url}let{sso_start_url:l,sso_account_id:h,sso_region:m,sso_role_name:g,sso_session:w}=pD(u,e.logger);return lD({ssoStartUrl:l,ssoSession:w,ssoAccountId:h,ssoRegion:m,ssoRoleName:g,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!s||!n||!o)throw new ns.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return lD({ssoStartUrl:r,ssoSession:i,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};Up.fromSSO=w9;Up.isSsoProfile=fD;Up.validateSsoProfile=pD});function b9(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function v9(e){return{schemeId:"smithy.api#noAuth"}}var Pd,mD,hD,x9,gD,bw=S(()=>{wt();Pd=y(mt());Nd();mD=async(e,t,r)=>({operation:(0,Pd.getSmithyContext)(t).operation,region:await(0,Pd.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});hD=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(v9(e));break}default:t.push(b9(e))}return t},x9=e=>Object.assign(e,{stsClientCtor:Es}),gD=e=>{let t=x9(e),r=Ko(t);return Object.assign(r,{authSchemePreference:(0,Pd.normalizeProvider)(e.authSchemePreference??[])})}});var yD,jp,Bp=S(()=>{yD=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),jp={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var AD,ae,xe,eo,xt,ID,PD,Fe,SD,ws,_a,xw,_D,vw,ND,ED,Ct,wD,OD,kD,Lt,pr,bD,DD,MD,vD,LD,xD,CD,RD,TD,C9,qD,FD=S(()=>{AD="required",ae="type",xe="argv",eo="booleanEquals",xt="stringEquals",ID="sigv4",PD="us-east-1",Fe="endpoint",SD="https://sts.{Region}.{PartitionResult#dnsSuffix}",ws="tree",_a="error",xw="getAttr",_D={[AD]:!1,[ae]:"string"},vw={[AD]:!0,default:!1,[ae]:"boolean"},ND={ref:"Endpoint"},ED={fn:"isSet",[xe]:[{ref:"Region"}]},Ct={ref:"Region"},wD={fn:"aws.partition",[xe]:[Ct],assign:"PartitionResult"},OD={ref:"UseFIPS"},kD={ref:"UseDualStack"},Lt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:ID,signingName:"sts",signingRegion:PD}]},headers:{}},pr={},bD={conditions:[{fn:xt,[xe]:[Ct,"aws-global"]}],[Fe]:Lt,[ae]:Fe},DD={fn:eo,[xe]:[OD,!0]},MD={fn:eo,[xe]:[kD,!0]},vD={fn:xw,[xe]:[{ref:"PartitionResult"},"supportsFIPS"]},LD={ref:"PartitionResult"},xD={fn:eo,[xe]:[!0,{fn:xw,[xe]:[LD,"supportsDualStack"]}]},CD=[{fn:"isSet",[xe]:[ND]}],RD=[DD],TD=[MD],C9={version:"1.0",parameters:{Region:_D,UseDualStack:vw,UseFIPS:vw,Endpoint:_D,UseGlobalEndpoint:vw},rules:[{conditions:[{fn:eo,[xe]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[xe]:CD},ED,wD,{fn:eo,[xe]:[OD,!1]},{fn:eo,[xe]:[kD,!1]}],rules:[{conditions:[{fn:xt,[xe]:[Ct,"ap-northeast-1"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"ap-south-1"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"ap-southeast-1"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"ap-southeast-2"]}],endpoint:Lt,[ae]:Fe},bD,{conditions:[{fn:xt,[xe]:[Ct,"ca-central-1"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"eu-central-1"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"eu-north-1"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"eu-west-1"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"eu-west-2"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"eu-west-3"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"sa-east-1"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,PD]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"us-east-2"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"us-west-1"]}],endpoint:Lt,[ae]:Fe},{conditions:[{fn:xt,[xe]:[Ct,"us-west-2"]}],endpoint:Lt,[ae]:Fe},{endpoint:{url:SD,properties:{authSchemes:[{name:ID,signingName:"sts",signingRegion:"{Region}"}]},headers:pr},[ae]:Fe}],[ae]:ws},{conditions:CD,rules:[{conditions:RD,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[ae]:_a},{conditions:TD,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[ae]:_a},{endpoint:{url:ND,properties:pr,headers:pr},[ae]:Fe}],[ae]:ws},{conditions:[ED],rules:[{conditions:[wD],rules:[{conditions:[DD,MD],rules:[{conditions:[{fn:eo,[xe]:[!0,vD]},xD],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pr,headers:pr},[ae]:Fe}],[ae]:ws},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[ae]:_a}],[ae]:ws},{conditions:RD,rules:[{conditions:[{fn:eo,[xe]:[vD,!0]}],rules:[{conditions:[{fn:xt,[xe]:[{fn:xw,[xe]:[LD,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:pr,headers:pr},[ae]:Fe},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:pr,headers:pr},[ae]:Fe}],[ae]:ws},{error:"FIPS is enabled but this partition does not support FIPS",[ae]:_a}],[ae]:ws},{conditions:TD,rules:[{conditions:[xD],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pr,headers:pr},[ae]:Fe}],[ae]:ws},{error:"DualStack is enabled but this partition does not support DualStack",[ae]:_a}],[ae]:ws},bD,{endpoint:{url:SD,properties:pr,headers:pr},[ae]:Fe}],[ae]:ws}],[ae]:ws},{error:"Invalid Configuration: Missing Region",[ae]:_a}]},qD=C9});var $D,Ea,R9,UD,jD=S(()=>{$D=y(rs()),Ea=y(es());FD();R9=new Ea.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),UD=(e,t={})=>R9.get(e,()=>(0,Ea.resolveEndpoint)(qD,{endpointParams:e,logger:t.logger}));Ea.customEndpointFunctions.aws=$D.awsEndpointFunctions});var BD,HD,Hp,zp,zD,VD=S(()=>{wt();De();BD=y(U()),HD=y(vr()),Hp=y(Le()),zp=y(qe());bw();jD();zD=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Hp.fromBase64,base64Encoder:e?.base64Encoder??Hp.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??UD,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??hD,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Jt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new zt}],logger:e?.logger??new BD.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??HD.parseUrl,utf8Decoder:e?.utf8Decoder??zp.fromUtf8,utf8Encoder:e?.utf8Encoder??zp.toUtf8})});var Vp,ro,GD,Gp,to,Wp,WD,QD,KD,JD,YD,XD,ZD=S(()=>{ZE();wt();Vp=y(id()),ro=y(Ze());De();GD=y(Xs()),Gp=y(vt()),to=y(Xt()),Wp=y(br()),WD=y(Zs()),QD=y(ys());VD();KD=y(U()),JD=y(tn()),YD=y(U()),XD=e=>{(0,YD.emitWarningIfUnsupportedVersion)(process.version);let t=(0,JD.resolveDefaultsModeConfig)(e),r=()=>t().then(KD.loadConfigsForDefaultMode),s=zD(e);Hi(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,to.loadConfig)(Gi,n),bodyLengthChecker:e?.bodyLengthChecker??WD.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Vp.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:ip.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new Jt},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new zt}],maxAttempts:e?.maxAttempts??(0,to.loadConfig)(Gp.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,to.loadConfig)(ro.NODE_REGION_CONFIG_OPTIONS,{...ro.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:Wp.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,to.loadConfig)({...Gp.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||QD.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??GD.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Wp.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,to.loadConfig)(ro.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,to.loadConfig)(ro.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,to.loadConfig)(Vp.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var e1,t1,r1=S(()=>{e1=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},t1=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Qp,Kp,Jp,s1,n1=S(()=>{Qp=y(ma()),Kp=y(ye()),Jp=y(U());r1();s1=(e,t)=>{let r=Object.assign((0,Qp.getAwsRegionExtensionConfiguration)(e),(0,Jp.getDefaultExtensionConfiguration)(e),(0,Kp.getHttpHandlerExtensionConfiguration)(e),e1(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,Qp.resolveAwsRegionExtensionConfiguration)(r),(0,Jp.resolveDefaultRuntimeConfig)(r),(0,Kp.resolveHttpHandlerRuntimeConfig)(r),t1(r))}});var Yp,o1,i1,Xp,a1,c1,d1,Zp,Cw,Es,Nd=S(()=>{Yp=y(Ms()),o1=y(Ls()),i1=y(qs()),Xp=y(ia()),a1=y(Ze());De();c1=y(Js()),d1=y(Gt()),Zp=y(vt()),Cw=y(U());bw();Bp();ZD();n1();Es=class extends Cw.Client{config;constructor(...[t]){let r=XD(t||{});super(r),this.initConfig=r;let s=yD(r),n=(0,Xp.resolveUserAgentConfig)(s),o=(0,Zp.resolveRetryConfig)(n),i=(0,a1.resolveRegionConfig)(o),a=(0,Yp.resolveHostHeaderConfig)(i),c=(0,d1.resolveEndpointConfig)(a),d=gD(c),u=s1(d,t?.extensions||[]);this.config=u,this.middlewareStack.use((0,Xp.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Zp.getRetryPlugin)(this.config)),this.middlewareStack.use((0,c1.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Yp.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,o1.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,i1.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Fs(this.config,{httpAuthSchemeParametersProvider:mD,identityProviderConfigProvider:async l=>new Zr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use($s(this.config))}destroy(){super.destroy()}}});var u1,Zt,em=S(()=>{u1=y(U()),Zt=class e extends u1.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Rw,Tw,Aw,Od,kd,Dd,Md,Ld,qd,Iw,Pw,Fd,$d=S(()=>{Rw=y(U());em();Tw=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Rw.SENSITIVE_STRING}}),Aw=e=>({...e,...e.Credentials&&{Credentials:Tw(e.Credentials)}}),Od=class e extends Zt{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},kd=class e extends Zt{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Dd=class e extends Zt{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Md=class e extends Zt{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ld=class e extends Zt{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},qd=class e extends Zt{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Iw=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Rw.SENSITIVE_STRING}}),Pw=e=>({...e,...e.Credentials&&{Credentials:Tw(e.Credentials)}}),Fd=class e extends Zt{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var l1,le,f1,p1,m1,h1,g1,T9,A9,I9,P9,N9,O9,k9,D9,M9,y1,L9,q9,F9,$9,U9,j9,S1,B9,H9,_1,z9,V9,G9,W9,Q9,K9,J9,on,Y9,E1,w1,b1,v1,Nw,X9,Ow,wa,Z9,kw,Dw,ba,Mw,va,Lw,qw,Fw,xa,Ca,$w,Uw,jw,Ra,Bw,Ta,Aa,Hw,zw,nn,Vw,Gw,Ww,Qw,Kw,x1,Jw,Yw,Xw,ot,C1,eJ,Zw=S(()=>{wt();l1=y(ye()),le=y(U());$d();em();f1=async(e,t)=>{let r=w1,s;return s=C1({...D9(e,t),[v1]:X9,[x1]:b1}),E1(t,r,"/",void 0,s)},p1=async(e,t)=>{let r=w1,s;return s=C1({...M9(e,t),[v1]:Z9,[x1]:b1}),E1(t,r,"/",void 0,s)},m1=async(e,t)=>{if(e.statusCode>=300)return g1(e,t);let r=await ra(e.body,t),s={};return s=B9(r.AssumeRoleResult,t),{$metadata:on(e),...s}},h1=async(e,t)=>{if(e.statusCode>=300)return g1(e,t);let r=await ra(e.body,t),s={};return s=H9(r.AssumeRoleWithWebIdentityResult,t),{$metadata:on(e),...s}},g1=async(e,t)=>{let r={...e,body:await Lf(e.body,t)},s=eJ(e,r.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await T9(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await N9(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await O9(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await k9(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await A9(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await I9(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await P9(r,t);default:let n=r.body;return Y9({output:e,parsedBody:n.Error,errorCode:s})}},T9=async(e,t)=>{let r=e.body,s=z9(r.Error,t),n=new Od({$metadata:on(e),...s});return(0,le.decorateServiceException)(n,r)},A9=async(e,t)=>{let r=e.body,s=V9(r.Error,t),n=new Fd({$metadata:on(e),...s});return(0,le.decorateServiceException)(n,r)},I9=async(e,t)=>{let r=e.body,s=G9(r.Error,t),n=new Ld({$metadata:on(e),...s});return(0,le.decorateServiceException)(n,r)},P9=async(e,t)=>{let r=e.body,s=W9(r.Error,t),n=new qd({$metadata:on(e),...s});return(0,le.decorateServiceException)(n,r)},N9=async(e,t)=>{let r=e.body,s=Q9(r.Error,t),n=new kd({$metadata:on(e),...s});return(0,le.decorateServiceException)(n,r)},O9=async(e,t)=>{let r=e.body,s=K9(r.Error,t),n=new Dd({$metadata:on(e),...s});return(0,le.decorateServiceException)(n,r)},k9=async(e,t)=>{let r=e.body,s=J9(r.Error,t),n=new Md({$metadata:on(e),...s});return(0,le.decorateServiceException)(n,r)},D9=(e,t)=>{let r={};if(e[Ta]!=null&&(r[Ta]=e[Ta]),e[Aa]!=null&&(r[Aa]=e[Aa]),e[Ca]!=null){let s=y1(e[Ca],t);e[Ca]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}if(e[xa]!=null&&(r[xa]=e[xa]),e[va]!=null&&(r[va]=e[va]),e[Ww]!=null){let s=j9(e[Ww],t);e[Ww]?.length===0&&(r.Tags=[]),Object.entries(s).forEach(([n,o])=>{let i=`Tags.${n}`;r[i]=o})}if(e[Kw]!=null){let s=U9(e[Kw],t);e[Kw]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(s).forEach(([n,o])=>{let i=`TransitiveTagKeys.${n}`;r[i]=o})}if(e[qw]!=null&&(r[qw]=e[qw]),e[Vw]!=null&&(r[Vw]=e[Vw]),e[Qw]!=null&&(r[Qw]=e[Qw]),e[nn]!=null&&(r[nn]=e[nn]),e[Uw]!=null){let s=F9(e[Uw],t);e[Uw]?.length===0&&(r.ProvidedContexts=[]),Object.entries(s).forEach(([n,o])=>{let i=`ProvidedContexts.${n}`;r[i]=o})}return r},M9=(e,t)=>{let r={};if(e[Ta]!=null&&(r[Ta]=e[Ta]),e[Aa]!=null&&(r[Aa]=e[Aa]),e[Yw]!=null&&(r[Yw]=e[Yw]),e[jw]!=null&&(r[jw]=e[jw]),e[Ca]!=null){let s=y1(e[Ca],t);e[Ca]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}return e[xa]!=null&&(r[xa]=e[xa]),e[va]!=null&&(r[va]=e[va]),r},y1=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=L9(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},L9=(e,t)=>{let r={};return e[Xw]!=null&&(r[Xw]=e[Xw]),r},q9=(e,t)=>{let r={};return e[$w]!=null&&(r[$w]=e[$w]),e[Mw]!=null&&(r[Mw]=e[Mw]),r},F9=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=q9(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},$9=(e,t)=>{let r={};return e[Fw]!=null&&(r[Fw]=e[Fw]),e[Jw]!=null&&(r[Jw]=e[Jw]),r},U9=(e,t)=>{let r={},s=1;for(let n of e)n!==null&&(r[`member.${s}`]=n,s++);return r},j9=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=$9(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},S1=(e,t)=>{let r={};return e[Ow]!=null&&(r[Ow]=(0,le.expectString)(e[Ow])),e[kw]!=null&&(r[kw]=(0,le.expectString)(e[kw])),r},B9=(e,t)=>{let r={};return e[ba]!=null&&(r[ba]=_1(e[ba],t)),e[wa]!=null&&(r[wa]=S1(e[wa],t)),e[Ra]!=null&&(r[Ra]=(0,le.strictParseInt32)(e[Ra])),e[nn]!=null&&(r[nn]=(0,le.expectString)(e[nn])),r},H9=(e,t)=>{let r={};return e[ba]!=null&&(r[ba]=_1(e[ba],t)),e[zw]!=null&&(r[zw]=(0,le.expectString)(e[zw])),e[wa]!=null&&(r[wa]=S1(e[wa],t)),e[Ra]!=null&&(r[Ra]=(0,le.strictParseInt32)(e[Ra])),e[Bw]!=null&&(r[Bw]=(0,le.expectString)(e[Bw])),e[Dw]!=null&&(r[Dw]=(0,le.expectString)(e[Dw])),e[nn]!=null&&(r[nn]=(0,le.expectString)(e[nn])),r},_1=(e,t)=>{let r={};return e[Nw]!=null&&(r[Nw]=(0,le.expectString)(e[Nw])),e[Hw]!=null&&(r[Hw]=(0,le.expectString)(e[Hw])),e[Gw]!=null&&(r[Gw]=(0,le.expectString)(e[Gw])),e[Lw]!=null&&(r[Lw]=(0,le.expectNonNull)((0,le.parseRfc3339DateTimeWithOffset)(e[Lw]))),r},z9=(e,t)=>{let r={};return e[ot]!=null&&(r[ot]=(0,le.expectString)(e[ot])),r},V9=(e,t)=>{let r={};return e[ot]!=null&&(r[ot]=(0,le.expectString)(e[ot])),r},G9=(e,t)=>{let r={};return e[ot]!=null&&(r[ot]=(0,le.expectString)(e[ot])),r},W9=(e,t)=>{let r={};return e[ot]!=null&&(r[ot]=(0,le.expectString)(e[ot])),r},Q9=(e,t)=>{let r={};return e[ot]!=null&&(r[ot]=(0,le.expectString)(e[ot])),r},K9=(e,t)=>{let r={};return e[ot]!=null&&(r[ot]=(0,le.expectString)(e[ot])),r},J9=(e,t)=>{let r={};return e[ot]!=null&&(r[ot]=(0,le.expectString)(e[ot])),r},on=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Y9=(0,le.withBaseException)(Zt),E1=async(e,t,r,s,n)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return s!==void 0&&(d.hostname=s),n!==void 0&&(d.body=n),new l1.HttpRequest(d)},w1={"content-type":"application/x-www-form-urlencoded"},b1="2011-06-15",v1="Action",Nw="AccessKeyId",X9="AssumeRole",Ow="AssumedRoleId",wa="AssumedRoleUser",Z9="AssumeRoleWithWebIdentity",kw="Arn",Dw="Audience",ba="Credentials",Mw="ContextAssertion",va="DurationSeconds",Lw="Expiration",qw="ExternalId",Fw="Key",xa="Policy",Ca="PolicyArns",$w="ProviderArn",Uw="ProvidedContexts",jw="ProviderId",Ra="PackedPolicySize",Bw="Provider",Ta="RoleArn",Aa="RoleSessionName",Hw="SecretAccessKey",zw="SubjectFromWebIdentityToken",nn="SourceIdentity",Vw="SerialNumber",Gw="SessionToken",Ww="Tags",Qw="TokenCode",Kw="TransitiveTagKeys",x1="Version",Jw="Value",Yw="WebIdentityToken",Xw="arn",ot="message",C1=e=>Object.entries(e).map(([t,r])=>(0,le.extendedEncodeURIComponent)(t)+"="+(0,le.extendedEncodeURIComponent)(r)).join("&"),eJ=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var R1,T1,A1,ni,tm=S(()=>{R1=y(Gt()),T1=y(wr()),A1=y(U());Bp();$d();Zw();ni=class extends A1.Command.classBuilder().ep(jp).m(function(t,r,s,n){return[(0,T1.getSerdePlugin)(s,this.serialize,this.deserialize),(0,R1.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Aw).ser(f1).de(m1).build(){}});var I1,P1,N1,oi,rm=S(()=>{I1=y(Gt()),P1=y(wr()),N1=y(U());Bp();$d();Zw();oi=class extends N1.Command.classBuilder().ep(jp).m(function(t,r,s,n){return[(0,P1.getSerdePlugin)(s,this.serialize,this.deserialize),(0,I1.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Iw,Pw).ser(p1).de(h1).build(){}});var O1,tJ,sm,k1=S(()=>{O1=y(U());tm();rm();Nd();tJ={AssumeRoleCommand:ni,AssumeRoleWithWebIdentityCommand:oi},sm=class extends Es{};(0,O1.createAggregatedClient)(tJ,sm)});var D1=S(()=>{tm();rm()});var M1=S(()=>{$d()});var L1,q1,F1,$1,U1,j1,B1=S(()=>{ss();L1=y(ma());tm();rm();q1=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},F1=async(e,t,r,s={})=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t,i=await(0,L1.stsRegionDefaultResolver)(s)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),n??o??i},$1=(e,t)=>{let r,s;return async(n,o)=>{if(s=n,!r){let{logger:u=e?.parentClientConfig?.logger,profile:l=e?.parentClientConfig?.profile,region:h,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:w=e?.parentClientConfig?.userAgentAppId}=e,C=await F1(h,e?.parentClientConfig?.region,g,{logger:u,profile:l}),T=!j1(m);r=new t({...e,userAgentAppId:w,profile:l,credentialDefaultProvider:()=>async()=>s,region:C,requestHandler:T?m:void 0,logger:u})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new ni(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let c=q1(a),d={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return In(d,"CREDENTIALS_STS_ASSUME_ROLE","i"),d}},U1=(e,t)=>{let r;return async s=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:d=e?.parentClientConfig?.profile,region:u,requestHandler:l=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:m=e?.parentClientConfig?.userAgentAppId}=e,g=await F1(u,e?.parentClientConfig?.region,h,{logger:c,profile:d}),w=!j1(l);r=new t({...e,userAgentAppId:m,profile:d,region:g,requestHandler:w?l:void 0,logger:c})}let{Credentials:n,AssumedRoleUser:o}=await r.send(new oi(s));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);let i=q1(o),a={accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,...n.CredentialScope&&{credentialScope:n.CredentialScope},...i&&{accountId:i}};return i&&In(a,"RESOLVED_ACCOUNT_ID","T"),In(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},j1=e=>e?.metadata?.handlerProtocol==="h2"});var H1,z1,V1,rJ,G1=S(()=>{B1();Nd();H1=(e,t)=>t?class extends e{constructor(s){super(s);for(let n of t)this.middlewareStack.use(n)}}:e,z1=(e={},t)=>$1(e,H1(Es,t)),V1=(e={},t)=>U1(e,H1(Es,t)),rJ=e=>t=>e({roleAssumer:z1(t),roleAssumerWithWebIdentity:V1(t),...t})});var eb={};ct(eb,{AssumeRoleCommand:()=>ni,AssumeRoleResponseFilterSensitiveLog:()=>Aw,AssumeRoleWithWebIdentityCommand:()=>oi,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Iw,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Pw,CredentialsFilterSensitiveLog:()=>Tw,ExpiredTokenException:()=>Od,IDPCommunicationErrorException:()=>Fd,IDPRejectedClaimException:()=>Ld,InvalidIdentityTokenException:()=>qd,MalformedPolicyDocumentException:()=>kd,PackedPolicyTooLargeException:()=>Dd,RegionDisabledException:()=>Md,STS:()=>sm,STSClient:()=>Es,STSServiceException:()=>Zt,__Client:()=>Cw.Client,decorateDefaultCredentialProvider:()=>rJ,getDefaultRoleAssumer:()=>z1,getDefaultRoleAssumerWithWebIdentity:()=>V1});var tb=S(()=>{Nd();k1();D1();M1();G1();em()});var nb=b(W1=>{"use strict";var sb=Vt(),rb=Me(),sJ=require("child_process"),nJ=require("util"),oJ=(ss(),Q(Pn)),iJ=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let o=new Date;if(new Date(t.Expiration)<o)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let s=t.AccountId;!s&&r?.[e]?.aws_account_id&&(s=r[e].aws_account_id);let n={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...s&&{accountId:s}};return oJ.setCredentialFeature(n,"CREDENTIALS_PROCESS","w"),n},aJ=async(e,t,r)=>{let s=t[e];if(t[e]){let n=s.credential_process;if(n!==void 0){let o=nJ.promisify(sb.externalDataInterceptor?.getTokenRecord?.().exec??sJ.exec);try{let{stdout:i}=await o(n),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return iJ(e,a,t)}catch(i){throw new rb.CredentialsProviderError(i.message,{logger:r})}}else throw new rb.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new rb.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},cJ=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await sb.parseKnownFiles(e);return aJ(sb.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};W1.fromProcess=cJ});var ob=b(bs=>{"use strict";var dJ=bs&&bs.__createBinding||(Object.create?(function(e,t,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]})),uJ=bs&&bs.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),lJ=bs&&bs.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var s=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[s.length]=n);return s},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s=e(t),n=0;n<s.length;n++)s[n]!=="default"&&dJ(r,t,s[n]);return uJ(r,t),r}})();Object.defineProperty(bs,"__esModule",{value:!0});bs.fromWebToken=void 0;var fJ=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:s,webIdentityToken:n,providerId:o,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:d}=e;if(!d){let{getDefaultRoleAssumerWithWebIdentity:u}=await Promise.resolve().then(()=>lJ((tb(),Q(eb))));d=u({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return d({RoleArn:r,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:c})};bs.fromWebToken=fJ});var K1=b(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.fromTokenFile=void 0;var pJ=(ss(),Q(Pn)),mJ=Me(),hJ=Vt(),gJ=require("fs"),yJ=ob(),Q1="AWS_WEB_IDENTITY_TOKEN_FILE",SJ="AWS_ROLE_ARN",_J="AWS_ROLE_SESSION_NAME",EJ=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[Q1],s=e?.roleArn??process.env[SJ],n=e?.roleSessionName??process.env[_J];if(!r||!s)throw new mJ.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,yJ.fromWebToken)({...e,webIdentityToken:hJ.externalDataInterceptor?.getTokenRecord?.()[r]??(0,gJ.readFileSync)(r,{encoding:"ascii"}),roleArn:s,roleSessionName:n})(t);return r===process.env[Q1]&&(0,pJ.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};nm.fromTokenFile=EJ});var ib=b(Ud=>{"use strict";var J1=K1(),Y1=ob();Object.keys(J1).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ud,e)&&Object.defineProperty(Ud,e,{enumerable:!0,get:function(){return J1[e]}})});Object.keys(Y1).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ud,e)&&Object.defineProperty(Ud,e,{enumerable:!0,get:function(){return Y1[e]}})})});var sM=b(rM=>{"use strict";var cb=Vt(),jd=Me(),so=(ss(),Q(Pn)),wJ=(e,t,r)=>{let s={EcsContainer:async n=>{let{fromHttp:o}=await Promise.resolve().then(()=>y(JE())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>y(Qn()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>jd.chain(o(n??{}),i(n))().then(ab)},Ec2InstanceMetadata:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>y(Qn()));return async()=>o(n)().then(ab)},Environment:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>y(BE()));return async()=>o(n)().then(ab)}};if(e in s)return s[e];throw new jd.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},ab=e=>so.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),bJ=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(vJ(e,{profile:t,logger:r})||xJ(e,{profile:t,logger:r})),vJ=(e,{profile:t,logger:r})=>{let s=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return s&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),s},xJ=(e,{profile:t,logger:r})=>{let s=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return s&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),s},CJ=async(e,t,r,s={},n)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:i,region:a}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(tb(),eb));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(i&&i in s)throw new jd.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${cb.getProfileName(r)}. Profiles visited: `+Object.keys(s).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${i?`source_profile=[${i}]`:`profile=[${e}]`}`);let c=i?n(i,t,r,{...s,[i]:!0},X1(t[i]??{})):(await wJ(o.credential_source,e,r.logger)(r))();if(X1(o))return c.then(d=>so.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:u}=o;if(u){if(!r.mfaCodeProvider)throw new jd.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=u,d.TokenCode=await r.mfaCodeProvider(u)}let l=await c;return r.roleAssumer(l,d).then(h=>so.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},X1=e=>!e.role_arn&&!!e.credential_source,RJ=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",TJ=async(e,t)=>Promise.resolve().then(()=>y(nb())).then(({fromProcess:r})=>r({...e,profile:t})().then(s=>so.setCredentialFeature(s,"CREDENTIALS_PROFILE_PROCESS","v"))),AJ=async(e,t,r={})=>{let{fromSSO:s}=await Promise.resolve().then(()=>y(ww()));return s({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(n=>t.sso_session?so.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO","r"):so.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},IJ=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),Z1=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,eM=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return so.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},PJ=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,NJ=async(e,t)=>Promise.resolve().then(()=>y(ib())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(s=>so.setCredentialFeature(s,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),tM=async(e,t,r,s={},n=!1)=>{let o=t[e];if(Object.keys(s).length>0&&Z1(o))return eM(o,r);if(n||bJ(o,{profile:e,logger:r.logger}))return CJ(e,t,r,s,tM);if(Z1(o))return eM(o,r);if(PJ(o))return NJ(o,r);if(RJ(o))return TJ(r,e);if(IJ(o))return await AJ(e,o,r);throw new jd.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},OJ=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let s=await cb.parseKnownFiles(r);return tM(cb.getProfileName({profile:e.profile??t?.profile}),s,r)};rM.fromIni=OJ});var aM=b(om=>{"use strict";var db=BE(),Bd=Me(),kJ=Vt(),nM="AWS_EC2_METADATA_DISABLED",DJ=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:s,fromInstanceMetadata:n}=await Promise.resolve().then(()=>y(Qn()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>y(JE()));return Bd.chain(o(e),s(e))}return process.env[nM]&&process.env[nM]!=="false"?async()=>{throw new Bd.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),n(e))};function MJ(e,t){let r=LJ(e),s,n,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),s)await s;else if(!o||t?.(o))if(o)n||(n=r(a).then(c=>{o=c,n=void 0}));else return s=r(a).then(c=>{o=c,s=void 0}),i(a);return o};return i}var LJ=e=>async t=>{let r;for(let s of e)try{return await s(t)}catch(n){if(r=n,n?.tryNextLink)continue;throw n}throw r},oM=!1,qJ=(e={})=>MJ([async()=>{if(e.profile??process.env[kJ.ENV_PROFILE])throw process.env[db.ENV_KEY]&&process.env[db.ENV_SECRET]&&(oM||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),oM=!0)),new Bd.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),db.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e;if(!r&&!s&&!n&&!o&&!i)throw new Bd.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>y(ww()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>y(sM()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>y(nb()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>y(ib()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await DJ(e))()),async()=>{throw new Bd.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],iM),FJ=e=>e?.expiration!==void 0,iM=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;om.credentialsTreatedAsExpired=iM;om.credentialsWillNeedRefresh=FJ;om.defaultProvider=qJ});var CM=b(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});am.ruleSet=void 0;var bM="required",er="fn",tr="argv",ii="ref",no="properties",oo="headers",cM=!0,dM="isSet",Hd="booleanEquals",Ia="error",vs="endpoint",an="tree",im="PartitionResult",ub="stringEquals",uM={[bM]:!1,type:"string"},lM={[bM]:!0,default:!1,type:"boolean"},fM={[ii]:"Endpoint"},vM={[er]:Hd,[tr]:[{[ii]:"UseFIPS"},!0]},xM={[er]:Hd,[tr]:[{[ii]:"UseDualStack"},!0]},Or={},pM={[er]:"getAttr",[tr]:[{[ii]:im},"supportsFIPS"]},mM={[er]:Hd,[tr]:[!0,{[er]:"getAttr",[tr]:[{[ii]:im},"supportsDualStack"]}]},lb={[er]:"getAttr",[tr]:[{[ii]:im},"name"]},hM={url:"https://secretsmanager-fips.{Region}.amazonaws.com",[no]:{},[oo]:{}},gM={url:"https://secretsmanager.{Region}.amazonaws.com",[no]:{},[oo]:{}},yM=[vM],SM=[xM],_M=[{[ii]:"Region"}],EM=[{[er]:ub,[tr]:["aws",lb]}],wM=[{[er]:ub,[tr]:["aws-us-gov",lb]}],$J={version:"1.0",parameters:{Region:uM,UseDualStack:lM,UseFIPS:lM,Endpoint:uM},rules:[{conditions:[{[er]:dM,[tr]:[fM]}],rules:[{conditions:yM,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ia},{conditions:SM,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ia},{endpoint:{url:fM,[no]:Or,[oo]:Or},type:vs}],type:an},{conditions:[{[er]:dM,[tr]:_M}],rules:[{conditions:[{[er]:"aws.partition",[tr]:_M,assign:im}],rules:[{conditions:[vM,xM],rules:[{conditions:[{[er]:Hd,[tr]:[cM,pM]},mM],rules:[{conditions:EM,endpoint:hM,type:vs},{conditions:wM,endpoint:hM,type:vs},{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[no]:Or,[oo]:Or},type:vs}],type:an},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ia}],type:an},{conditions:yM,rules:[{conditions:[{[er]:Hd,[tr]:[pM,cM]}],rules:[{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dnsSuffix}",[no]:Or,[oo]:Or},type:vs}],type:an},{error:"FIPS is enabled but this partition does not support FIPS",type:Ia}],type:an},{conditions:SM,rules:[{conditions:[mM],rules:[{conditions:EM,endpoint:gM,type:vs},{conditions:[{[er]:ub,[tr]:["aws-cn",lb]}],endpoint:{url:"https://secretsmanager.{Region}.amazonaws.com.cn",[no]:Or,[oo]:Or},type:vs},{conditions:wM,endpoint:gM,type:vs},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dualStackDnsSuffix}",[no]:Or,[oo]:Or},type:vs}],type:an},{error:"DualStack is enabled but this partition does not support DualStack",type:Ia}],type:an},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dnsSuffix}",[no]:Or,[oo]:Or},type:vs}],type:an}],type:an},{error:"Invalid Configuration: Missing Region",type:Ia}]};am.ruleSet=$J});var RM=b(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.defaultEndpointResolver=void 0;var UJ=rs(),fb=es(),jJ=CM(),BJ=new fb.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),HJ=(e,t={})=>BJ.get(e,()=>(0,fb.resolveEndpoint)(jJ.ruleSet,{endpointParams:e,logger:t.logger}));cm.defaultEndpointResolver=HJ;fb.customEndpointFunctions.aws=UJ.awsEndpointFunctions});var IM=b(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.getRuntimeConfig=void 0;var zJ=(wt(),Q(Ks)),VJ=(wE(),Q(E0)),GJ=U(),WJ=vr(),TM=Le(),AM=qe(),QJ=jE(),KJ=RM(),JJ=e=>({apiVersion:"2017-10-17",base64Decoder:e?.base64Decoder??TM.fromBase64,base64Encoder:e?.base64Encoder??TM.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??KJ.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??QJ.defaultSecretsManagerHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new zJ.AwsSdkSigV4Signer}],logger:e?.logger??new GJ.NoOpLogger,protocol:e?.protocol??new VJ.AwsJson1_1Protocol({defaultNamespace:"com.amazonaws.secretsmanager",serviceTarget:"secretsmanager",awsQueryCompatible:!1}),serviceId:e?.serviceId??"Secrets Manager",urlParser:e?.urlParser??WJ.parseUrl,utf8Decoder:e?.utf8Decoder??AM.fromUtf8,utf8Encoder:e?.utf8Encoder??AM.toUtf8});dm.getRuntimeConfig=JJ});var DM=b(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});lm.getRuntimeConfig=void 0;var YJ=(Tn(),Q(Rn)),XJ=YJ.__importDefault(IN()),PM=(wt(),Q(Ks)),ZJ=aM(),NM=id(),um=Ze(),eY=Xs(),OM=vt(),ai=Xt(),kM=br(),tY=Zs(),rY=ys(),sY=IM(),nY=U(),oY=tn(),iY=U(),aY=e=>{(0,iY.emitWarningIfUnsupportedVersion)(process.version);let t=(0,oY.resolveDefaultsModeConfig)(e),r=()=>t().then(nY.loadConfigsForDefaultMode),s=(0,sY.getRuntimeConfig)(e);(0,PM.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,ai.loadConfig)(PM.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??tY.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??ZJ.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,NM.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:XJ.default.version}),maxAttempts:e?.maxAttempts??(0,ai.loadConfig)(OM.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,ai.loadConfig)(um.NODE_REGION_CONFIG_OPTIONS,{...um.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:kM.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,ai.loadConfig)({...OM.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||rY.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??eY.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??kM.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ai.loadConfig)(um.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,ai.loadConfig)(um.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,ai.loadConfig)(NM.NODE_APP_ID_CONFIG_OPTIONS,n)}};lm.getRuntimeConfig=aY});var PL=b(re=>{"use strict";var MM=Ms(),cY=Ls(),dY=qs(),LM=ia(),uY=Ze(),Pa=(De(),Q(ms)),rr=(_e(),Q(TS)),lY=Js(),$e=Gt(),qM=vt(),Te=U(),FM=jE(),fY=DM(),$M=ma(),UM=ye(),pY=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"secretsmanager"}),Ve={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},mY=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},hY=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),gY=(e,t)=>{let r=Object.assign($M.getAwsRegionExtensionConfiguration(e),Te.getDefaultExtensionConfiguration(e),UM.getHttpHandlerExtensionConfiguration(e),mY(e));return t.forEach(s=>s.configure(r)),Object.assign(e,$M.resolveAwsRegionExtensionConfiguration(r),Te.resolveDefaultRuntimeConfig(r),UM.resolveHttpHandlerRuntimeConfig(r),hY(r))},ci=class extends Te.Client{config;constructor(...[t]){let r=fY.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=pY(r),n=LM.resolveUserAgentConfig(s),o=qM.resolveRetryConfig(n),i=uY.resolveRegionConfig(o),a=MM.resolveHostHeaderConfig(i),c=$e.resolveEndpointConfig(a),d=FM.resolveHttpAuthSchemeConfig(c),u=gY(d,t?.extensions||[]);this.config=u,this.middlewareStack.use(rr.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(LM.getUserAgentPlugin(this.config)),this.middlewareStack.use(qM.getRetryPlugin(this.config)),this.middlewareStack.use(lY.getContentLengthPlugin(this.config)),this.middlewareStack.use(MM.getHostHeaderPlugin(this.config)),this.middlewareStack.use(cY.getLoggerPlugin(this.config)),this.middlewareStack.use(dY.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Pa.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:FM.defaultSecretsManagerHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new Pa.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(Pa.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},sr=class jM extends Te.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,jM.prototype)}},yY={all:"all",description:"description",name:"name",owning_service:"owning-service",primary_region:"primary-region",tag_key:"tag-key",tag_value:"tag-value"},BM=class HM extends sr{name="DecryptionFailure";$fault="client";Message;constructor(t){super({name:"DecryptionFailure",$fault:"client",...t}),Object.setPrototypeOf(this,HM.prototype),this.Message=t.Message}},zM=class VM extends sr{name="InternalServiceError";$fault="server";Message;constructor(t){super({name:"InternalServiceError",$fault:"server",...t}),Object.setPrototypeOf(this,VM.prototype),this.Message=t.Message}},GM=class WM extends sr{name="InvalidNextTokenException";$fault="client";Message;constructor(t){super({name:"InvalidNextTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,WM.prototype),this.Message=t.Message}},QM=class KM extends sr{name="InvalidParameterException";$fault="client";Message;constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),Object.setPrototypeOf(this,KM.prototype),this.Message=t.Message}},JM=class YM extends sr{name="InvalidRequestException";$fault="client";Message;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,YM.prototype),this.Message=t.Message}},XM=class ZM extends sr{name="ResourceNotFoundException";$fault="client";Message;constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,ZM.prototype),this.Message=t.Message}},SY={Failed:"Failed",InProgress:"InProgress",InSync:"InSync"},eL=class tL extends sr{name="EncryptionFailure";$fault="client";Message;constructor(t){super({name:"EncryptionFailure",$fault:"client",...t}),Object.setPrototypeOf(this,tL.prototype),this.Message=t.Message}},rL=class sL extends sr{name="LimitExceededException";$fault="client";Message;constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,sL.prototype),this.Message=t.Message}},nL=class oL extends sr{name="MalformedPolicyDocumentException";$fault="client";Message;constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,oL.prototype),this.Message=t.Message}},iL=class aL extends sr{name="PreconditionNotMetException";$fault="client";Message;constructor(t){super({name:"PreconditionNotMetException",$fault:"client",...t}),Object.setPrototypeOf(this,aL.prototype),this.Message=t.Message}},cL=class dL extends sr{name="ResourceExistsException";$fault="client";Message;constructor(t){super({name:"ResourceExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,dL.prototype),this.Message=t.Message}},_Y={asc:"asc",desc:"desc"},uL=class lL extends sr{name="PublicPolicyException";$fault="client";Message;constructor(t){super({name:"PublicPolicyException",$fault:"client",...t}),Object.setPrototypeOf(this,lL.prototype),this.Message=t.Message}},EY="AutomaticallyAfterDays",wY="APIErrorListType",bY="APIErrorType",pt="ARN",fL="AddReplicaRegions",vY="AddReplicaRegionListType",xY="BatchGetSecretValue",CY="BatchGetSecretValueRequest",RY="BatchGetSecretValueResponse",TY="BlockPublicPolicy",Wd="CreatedDate",AY="CheckName",IY="CancelRotateSecret",PY="CancelRotateSecretRequest",NY="CancelRotateSecretResponse",km="ClientRequestToken",OY="CreateSecret",kY="CreateSecretRequest",DY="CreateSecretResponse",Dm="Description",MY="DeletionDate",pL="DeletedDate",LY="DecryptionFailure",qY="DeleteResourcePolicy",FY="DeleteResourcePolicyRequest",$Y="DeleteResourcePolicyResponse",UY="DeleteSecret",jY="DeleteSecretRequest",BY="DeleteSecretResponse",HY="DescribeSecretRequest",zY="DescribeSecretResponse",VY="DescribeSecret",GY="Duration",WY="Errors",QY="ErrorCode",KY="ExcludeCharacters",JY="EncryptionFailure",YY="ExcludeLowercase",XY="ErrorMessage",ZY="ExcludeNumbers",eX="ExcludePunctuation",tX="ExcludeUppercase",mL="Filters",rX="ForceDeleteWithoutRecovery",sX="FiltersListType",hL="ForceOverwriteReplicaSecret",nX="Filter",oX="GetRandomPassword",iX="GetRandomPasswordRequest",aX="GetRandomPasswordResponse",cX="GetResourcePolicyRequest",dX="GetResourcePolicyResponse",uX="GetResourcePolicy",lX="GetSecretValue",fX="GetSecretValueRequest",pX="GetSecretValueResponse",mX="IncludeDeprecated",hX="InvalidNextTokenException",gX="IncludePlannedDeletion",yX="InvalidParameterException",SX="InvalidRequestException",_X="IncludeSpace",EX="InternalServiceError",gL="Key",Na="KmsKeyId",wX="KmsKeyIds",Mm="LastAccessedDate",yL="LastChangedDate",bX="LimitExceededException",SL="LastRotatedDate",vX="ListSecrets",xX="ListSecretsRequest",CX="ListSecretsResponse",RX="ListSecretVersionIds",TX="ListSecretVersionIdsRequest",AX="ListSecretVersionIdsResponse",mr="Message",IX="MalformedPolicyDocumentException",pb="MaxResults",PX="MoveToVersionId",Rt="Name",_L="NextRotationDate",Oa="NextToken",EL="OwningService",NX="PasswordLength",OX="PreconditionNotMetException",kX="PublicPolicyException",wL="PrimaryRegion",DX="PutResourcePolicy",MX="PutResourcePolicyRequest",LX="PutResourcePolicyResponse",qX="PutSecretValue",FX="PutSecretValueRequest",$X="PutSecretValueResponse",UX="PolicyValidationPassed",bL="Region",vL="RotationEnabled",jX="ResourceExistsException",BX="RequireEachIncludedType",HX="RemoveFromVersionId",zX="RotateImmediately",mb="RotationLambdaARN",VX="ResourceNotFoundException",GX="RandomPassword",WX="RandomPasswordType",hb="ResourcePolicy",gb="RotationRules",QX="RemoveRegionsFromReplication",KX="RemoveRegionsFromReplicationRequest",JX="RemoveRegionsFromReplicationResponse",YX="RemoveReplicaRegions",XX="ReplicaRegionType",ZX="RotationRulesType",Lm="ReplicationStatus",e7="ReplicationStatusListType",t7="RestoreSecretRequest",r7="RestoreSecretResponse",s7="RotateSecretRequest",n7="RotateSecretResponse",o7="ReplicationStatusType",i7="ReplicateSecretToRegions",a7="ReplicateSecretToRegionsRequest",c7="ReplicateSecretToRegionsResponse",d7="RestoreSecret",u7="RotateSecret",l7="RotationToken",f7="RotationTokenType",p7="RecoveryWindowInDays",m7="Status",Qd="SecretBinary",h7="SecretBinaryType",g7="ScheduleExpression",ut="SecretId",y7="SecretIdList",S7="SecretList",_7="SecretListEntry",E7="SecretListType",w7="StatusMessage",b7="SortOrder",v7="StopReplicationToReplica",x7="StopReplicationToReplicaRequest",C7="StopReplicationToReplicaResponse",Kd="SecretString",R7="SecretStringType",T7="SecretValues",A7="SecretValueEntry",I7="SecretVersionsListEntry",P7="SecretVersionsListType",N7="SecretValuesType",O7="SecretVersionsToStages",xL="SecretVersionsToStagesMapType",qm="Tags",k7="TagKeys",D7="TagListType",M7="TagResource",L7="TagResourceRequest",q7="Tag",F7="UntagResource",$7="UntagResourceRequest",U7="UpdateSecret",j7="UpdateSecretRequest",B7="UpdateSecretResponse",H7="UpdateSecretVersionStage",z7="UpdateSecretVersionStageRequest",V7="UpdateSecretVersionStageResponse",G7="Values",W7="ValidationErrors",Q7="ValidationErrorsEntry",K7="ValidationErrorsType",cn="VersionId",J7="VersionIdsToStages",Y7="ValidateResourcePolicy",X7="ValidateResourcePolicyRequest",Z7="ValidateResourcePolicyResponse",CL="VersionStage",Jd="VersionStages",eZ="Value",tZ="Versions",os="client",kr="error",rZ="server",RL="smithy.ts.sdk.synthetic.com.amazonaws.secretsmanager",P="com.amazonaws.secretsmanager",sZ=[0,P,WX,8,0],nZ=[0,P,f7,8,0],Yd=[0,P,h7,8,21],Xd=[0,P,R7,8,0],oZ=[3,P,bY,0,[ut,QY,mr],[0,0,0]],iZ=[3,P,CY,0,[y7,mL,pb,Oa],[64,()=>IL,1,0]],aZ=[3,P,RY,0,[T7,Oa,WY],[[()=>_ee,0],0,()=>yee]],cZ=[3,P,PY,0,[ut],[0]],dZ=[3,P,NY,0,[pt,Rt,cn],[0,0,0]],uZ=[3,P,kY,0,[Rt,km,Dm,Na,Qd,Kd,qm,fL,hL],[0,[0,4],0,0,[()=>Yd,0],[()=>Xd,0],()=>$m,()=>AL,2]],lZ=[3,P,DY,0,[pt,Rt,cn,Lm],[0,0,0,()=>Fm]],fZ=[-3,P,LY,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(fZ,BM);var pZ=[3,P,FY,0,[ut],[0]],mZ=[3,P,$Y,0,[pt,Rt],[0,0]],hZ=[3,P,jY,0,[ut,p7,rX],[0,1,2]],gZ=[3,P,BY,0,[pt,Rt,MY],[0,0,4]],yZ=[3,P,HY,0,[ut],[0]],SZ=[3,P,zY,0,[pt,Rt,Dm,Na,vL,mb,gb,SL,yL,Mm,pL,_L,qm,J7,EL,Wd,wL,Lm],[0,0,0,0,2,0,()=>yb,4,4,4,4,4,()=>$m,[2,P,xL,0,0,64],0,4,0,()=>Fm]],_Z=[-3,P,JY,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(_Z,eL);var EZ=[3,P,nX,0,[gL,G7],[0,64]],wZ=[3,P,iX,0,[NX,KY,ZY,eX,tX,YY,_X,BX],[1,0,2,2,2,2,2,2]],bZ=[3,P,aX,0,[GX],[[()=>sZ,0]]],vZ=[3,P,cX,0,[ut],[0]],xZ=[3,P,dX,0,[pt,Rt,hb],[0,0,0]],CZ=[3,P,fX,0,[ut,cn,CL],[0,0,0]],RZ=[3,P,pX,0,[pt,Rt,cn,Qd,Kd,Jd,Wd],[0,0,0,[()=>Yd,0],[()=>Xd,0],64,4]],TZ=[-3,P,EX,{[kr]:rZ},[mr],[0]];rr.TypeRegistry.for(P).registerError(TZ,zM);var AZ=[-3,P,hX,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(AZ,GM);var IZ=[-3,P,yX,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(IZ,QM);var PZ=[-3,P,SX,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(PZ,JM);var NZ=[-3,P,bX,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(NZ,rL);var OZ=[3,P,xX,0,[gX,pb,Oa,mL,b7],[2,1,0,()=>IL,0]],kZ=[3,P,CX,0,[S7,Oa],[()=>See,0]],DZ=[3,P,TX,0,[ut,pb,Oa,mX],[0,1,0,2]],MZ=[3,P,AX,0,[tZ,Oa,pt,Rt],[()=>Eee,0,0,0]],LZ=[-3,P,IX,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(LZ,nL);var qZ=[-3,P,OX,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(qZ,iL);var FZ=[-3,P,kX,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(FZ,uL);var $Z=[3,P,MX,0,[ut,hb,TY],[0,0,2]],UZ=[3,P,LX,0,[pt,Rt],[0,0]],jZ=[3,P,FX,0,[ut,km,Qd,Kd,Jd,l7],[0,[0,4],[()=>Yd,0],[()=>Xd,0],64,[()=>nZ,0]]],BZ=[3,P,$X,0,[pt,Rt,cn,Jd],[0,0,0,64]],HZ=[3,P,KX,0,[ut,YX],[0,64]],zZ=[3,P,JX,0,[pt,Lm],[0,()=>Fm]],VZ=[3,P,XX,0,[bL,Na],[0,0]],GZ=[3,P,a7,0,[ut,fL,hL],[0,()=>AL,2]],WZ=[3,P,c7,0,[pt,Lm],[0,()=>Fm]],QZ=[3,P,o7,0,[bL,Na,m7,w7,Mm],[0,0,0,0,4]],KZ=[-3,P,jX,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(KZ,cL);var JZ=[-3,P,VX,{[kr]:os},[mr],[0]];rr.TypeRegistry.for(P).registerError(JZ,XM);var YZ=[3,P,t7,0,[ut],[0]],XZ=[3,P,r7,0,[pt,Rt],[0,0]],ZZ=[3,P,s7,0,[ut,km,mb,gb,zX],[0,[0,4],0,()=>yb,2]],eee=[3,P,n7,0,[pt,Rt,cn],[0,0,0]],yb=[3,P,ZX,0,[EY,GY,g7],[1,0,0]],tee=[3,P,_7,0,[pt,Rt,Dm,Na,vL,mb,gb,SL,yL,Mm,pL,_L,qm,O7,EL,Wd,wL],[0,0,0,0,2,0,()=>yb,4,4,4,4,4,()=>$m,[2,P,xL,0,0,64],0,4,0]],ree=[3,P,A7,0,[pt,Rt,cn,Qd,Kd,Jd,Wd],[0,0,0,[()=>Yd,0],[()=>Xd,0],64,4]],see=[3,P,I7,0,[cn,Jd,Mm,Wd,wX],[0,64,4,4,64]],nee=[3,P,x7,0,[ut],[0]],oee=[3,P,C7,0,[pt],[0]],iee=[3,P,q7,0,[gL,eZ],[0,0]],aee=[3,P,L7,0,[ut,qm],[0,()=>$m]],cee=[3,P,$7,0,[ut,k7],[0,64]],dee=[3,P,j7,0,[ut,km,Dm,Na,Qd,Kd],[0,[0,4],0,0,[()=>Yd,0],[()=>Xd,0]]],uee=[3,P,B7,0,[pt,Rt,cn],[0,0,0]],lee=[3,P,z7,0,[ut,CL,HX,PX],[0,0,0,0]],fee=[3,P,V7,0,[pt,Rt],[0,0]],pee=[3,P,X7,0,[ut,hb],[0,0]],mee=[3,P,Z7,0,[UX,W7],[2,()=>wee]],hee=[3,P,Q7,0,[AY,XY],[0,0]],TL="unit",gee=[-3,RL,"SecretsManagerServiceException",0,[],[]];rr.TypeRegistry.for(RL).registerError(gee,sr);var AL=[1,P,vY,0,()=>VZ],yee=[1,P,wY,0,()=>oZ],IL=[1,P,sX,0,()=>EZ],Fm=[1,P,e7,0,()=>QZ],See=[1,P,E7,0,()=>tee],_ee=[1,P,N7,0,[()=>ree,0]],Eee=[1,P,P7,0,()=>see],$m=[1,P,D7,0,()=>iee],wee=[1,P,K7,0,()=>hee],bee=[9,P,xY,0,()=>iZ,()=>aZ],vee=[9,P,IY,0,()=>cZ,()=>dZ],xee=[9,P,OY,0,()=>uZ,()=>lZ],Cee=[9,P,qY,0,()=>pZ,()=>mZ],Ree=[9,P,UY,0,()=>hZ,()=>gZ],Tee=[9,P,VY,0,()=>yZ,()=>SZ],Aee=[9,P,oX,0,()=>wZ,()=>bZ],Iee=[9,P,uX,0,()=>vZ,()=>xZ],Pee=[9,P,lX,0,()=>CZ,()=>RZ],Nee=[9,P,vX,0,()=>OZ,()=>kZ],Oee=[9,P,RX,0,()=>DZ,()=>MZ],kee=[9,P,DX,0,()=>$Z,()=>UZ],Dee=[9,P,qX,0,()=>jZ,()=>BZ],Mee=[9,P,QX,0,()=>HZ,()=>zZ],Lee=[9,P,i7,0,()=>GZ,()=>WZ],qee=[9,P,d7,0,()=>YZ,()=>XZ],Fee=[9,P,u7,0,()=>ZZ,()=>eee],$ee=[9,P,v7,0,()=>nee,()=>oee],Uee=[9,P,M7,0,()=>aee,()=>TL],jee=[9,P,F7,0,()=>cee,()=>TL],Bee=[9,P,U7,0,()=>dee,()=>uee],Hee=[9,P,H7,0,()=>lee,()=>fee],zee=[9,P,Y7,0,()=>pee,()=>mee],zd=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","BatchGetSecretValue",{}).n("SecretsManagerClient","BatchGetSecretValueCommand").sc(bee).build(){},fm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","CancelRotateSecret",{}).n("SecretsManagerClient","CancelRotateSecretCommand").sc(vee).build(){},pm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","CreateSecret",{}).n("SecretsManagerClient","CreateSecretCommand").sc(xee).build(){},mm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteResourcePolicy",{}).n("SecretsManagerClient","DeleteResourcePolicyCommand").sc(Cee).build(){},hm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteSecret",{}).n("SecretsManagerClient","DeleteSecretCommand").sc(Ree).build(){},gm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","DescribeSecret",{}).n("SecretsManagerClient","DescribeSecretCommand").sc(Tee).build(){},ym=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetRandomPassword",{}).n("SecretsManagerClient","GetRandomPasswordCommand").sc(Aee).build(){},Sm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetResourcePolicy",{}).n("SecretsManagerClient","GetResourcePolicyCommand").sc(Iee).build(){},_m=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetSecretValue",{}).n("SecretsManagerClient","GetSecretValueCommand").sc(Pee).build(){},Vd=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecrets",{}).n("SecretsManagerClient","ListSecretsCommand").sc(Nee).build(){},Gd=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecretVersionIds",{}).n("SecretsManagerClient","ListSecretVersionIdsCommand").sc(Oee).build(){},Em=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","PutResourcePolicy",{}).n("SecretsManagerClient","PutResourcePolicyCommand").sc(kee).build(){},wm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","PutSecretValue",{}).n("SecretsManagerClient","PutSecretValueCommand").sc(Dee).build(){},bm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","RemoveRegionsFromReplication",{}).n("SecretsManagerClient","RemoveRegionsFromReplicationCommand").sc(Mee).build(){},vm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ReplicateSecretToRegions",{}).n("SecretsManagerClient","ReplicateSecretToRegionsCommand").sc(Lee).build(){},xm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","RestoreSecret",{}).n("SecretsManagerClient","RestoreSecretCommand").sc(qee).build(){},Cm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","RotateSecret",{}).n("SecretsManagerClient","RotateSecretCommand").sc(Fee).build(){},Rm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","StopReplicationToReplica",{}).n("SecretsManagerClient","StopReplicationToReplicaCommand").sc($ee).build(){},Tm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","TagResource",{}).n("SecretsManagerClient","TagResourceCommand").sc(Uee).build(){},Am=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","UntagResource",{}).n("SecretsManagerClient","UntagResourceCommand").sc(jee).build(){},Im=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecret",{}).n("SecretsManagerClient","UpdateSecretCommand").sc(Bee).build(){},Pm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecretVersionStage",{}).n("SecretsManagerClient","UpdateSecretVersionStageCommand").sc(Hee).build(){},Nm=class extends Te.Command.classBuilder().ep(Ve).m(function(t,r,s,n){return[$e.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ValidateResourcePolicy",{}).n("SecretsManagerClient","ValidateResourcePolicyCommand").sc(zee).build(){},Vee={BatchGetSecretValueCommand:zd,CancelRotateSecretCommand:fm,CreateSecretCommand:pm,DeleteResourcePolicyCommand:mm,DeleteSecretCommand:hm,DescribeSecretCommand:gm,GetRandomPasswordCommand:ym,GetResourcePolicyCommand:Sm,GetSecretValueCommand:_m,ListSecretsCommand:Vd,ListSecretVersionIdsCommand:Gd,PutResourcePolicyCommand:Em,PutSecretValueCommand:wm,RemoveRegionsFromReplicationCommand:bm,ReplicateSecretToRegionsCommand:vm,RestoreSecretCommand:xm,RotateSecretCommand:Cm,StopReplicationToReplicaCommand:Rm,TagResourceCommand:Tm,UntagResourceCommand:Am,UpdateSecretCommand:Im,UpdateSecretVersionStageCommand:Pm,ValidateResourcePolicyCommand:Nm},Om=class extends ci{};Te.createAggregatedClient(Vee,Om);var Gee=Pa.createPaginator(ci,zd,"NextToken","NextToken","MaxResults"),Wee=Pa.createPaginator(ci,Gd,"NextToken","NextToken","MaxResults"),Qee=Pa.createPaginator(ci,Vd,"NextToken","NextToken","MaxResults");Object.defineProperty(re,"$Command",{enumerable:!0,get:function(){return Te.Command}});Object.defineProperty(re,"__Client",{enumerable:!0,get:function(){return Te.Client}});re.BatchGetSecretValueCommand=zd;re.CancelRotateSecretCommand=fm;re.CreateSecretCommand=pm;re.DecryptionFailure=BM;re.DeleteResourcePolicyCommand=mm;re.DeleteSecretCommand=hm;re.DescribeSecretCommand=gm;re.EncryptionFailure=eL;re.FilterNameStringType=yY;re.GetRandomPasswordCommand=ym;re.GetResourcePolicyCommand=Sm;re.GetSecretValueCommand=_m;re.InternalServiceError=zM;re.InvalidNextTokenException=GM;re.InvalidParameterException=QM;re.InvalidRequestException=JM;re.LimitExceededException=rL;re.ListSecretVersionIdsCommand=Gd;re.ListSecretsCommand=Vd;re.MalformedPolicyDocumentException=nL;re.PreconditionNotMetException=iL;re.PublicPolicyException=uL;re.PutResourcePolicyCommand=Em;re.PutSecretValueCommand=wm;re.RemoveRegionsFromReplicationCommand=bm;re.ReplicateSecretToRegionsCommand=vm;re.ResourceExistsException=cL;re.ResourceNotFoundException=XM;re.RestoreSecretCommand=xm;re.RotateSecretCommand=Cm;re.SecretsManager=Om;re.SecretsManagerClient=ci;re.SecretsManagerServiceException=sr;re.SortOrderType=_Y;re.StatusType=SY;re.StopReplicationToReplicaCommand=Rm;re.TagResourceCommand=Tm;re.UntagResourceCommand=Am;re.UpdateSecretCommand=Im;re.UpdateSecretVersionStageCommand=Pm;re.ValidateResourcePolicyCommand=Nm;re.paginateBatchGetSecretValue=Gee;re.paginateListSecretVersionIds=Wee;re.paginateListSecrets=Qee});var _b=b(NL=>{"use strict";NL.parse=function(e,t){return new Sb(e,t).parse()};var Sb=class e{constructor(t,r){this.source=t,this.transform=r||Kee,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var t=this.source[this.position++];return t==="\\"?{value:this.source[this.position++],escaped:!0}:{value:t,escaped:!1}}record(t){this.recorded.push(t)}newEntry(t){var r;(this.recorded.length>0||t)&&(r=this.recorded.join(""),r==="NULL"&&!t&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var t=this.nextCharacter();if(t.value==="=")break}}parse(t){var r,s,n;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!n)this.dimension++,this.dimension>1&&(s=new e(this.source.substr(this.position-1),this.transform),this.entries.push(s.parse(!0)),this.position+=s.position-2);else if(r.value==="}"&&!n){if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else r.value==='"'&&!r.escaped?(n&&this.newEntry(!0),n=!n):r.value===","&&!n?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function Kee(e){return e}});var Eb=b((cbe,OL)=>{var Jee=_b();OL.exports={create:function(e,t){return{parse:function(){return Jee.parse(e,t)}}}}});var ML=b((dbe,DL)=>{"use strict";var Yee=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,Xee=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,Zee=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,ete=/^-?infinity$/;DL.exports=function(t){if(ete.test(t))return Number(t.replace("i","I"));var r=Yee.exec(t);if(!r)return tte(t)||null;var s=!!r[8],n=parseInt(r[1],10);s&&(n=kL(n));var o=parseInt(r[2],10)-1,i=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),d=parseInt(r[6],10),u=r[7];u=u?1e3*parseFloat(u):0;var l,h=rte(t);return h!=null?(l=new Date(Date.UTC(n,o,i,a,c,d,u)),wb(n)&&l.setUTCFullYear(n),h!==0&&l.setTime(l.getTime()-h)):(l=new Date(n,o,i,a,c,d,u),wb(n)&&l.setFullYear(n)),l};function tte(e){var t=Xee.exec(e);if(t){var r=parseInt(t[1],10),s=!!t[4];s&&(r=kL(r));var n=parseInt(t[2],10)-1,o=t[3],i=new Date(r,n,o);return wb(r)&&i.setFullYear(r),i}}function rte(e){if(e.endsWith("+00"))return 0;var t=Zee.exec(e.split(" ")[1]);if(t){var r=t[1];if(r==="Z")return 0;var s=r==="-"?-1:1,n=parseInt(t[2],10)*3600+parseInt(t[3]||0,10)*60+parseInt(t[4]||0,10);return n*s*1e3}}function kL(e){return-(e-1)}function wb(e){return e>=0&&e<100}});var qL=b((ube,LL)=>{LL.exports=nte;var ste=Object.prototype.hasOwnProperty;function nte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)ste.call(r,s)&&(e[s]=r[s])}return e}});var UL=b((lbe,$L)=>{"use strict";var ote=qL();$L.exports=ka;function ka(e){if(!(this instanceof ka))return new ka(e);ote(this,yte(e))}var ite=["seconds","minutes","hours","days","months","years"];ka.prototype.toPostgres=function(){var e=ite.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),e.length===0?"0":e.map(function(t){var r=this[t]||0;return t==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+t},this).join(" ")};var ate={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},cte=["years","months","days"],dte=["hours","minutes","seconds"];ka.prototype.toISOString=ka.prototype.toISO=function(){var e=cte.map(r,this).join(""),t=dte.map(r,this).join("");return"P"+e+"T"+t;function r(s){var n=this[s]||0;return s==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),n+ate[s]}};var bb="([+-]?\\d+)",ute=bb+"\\s+years?",lte=bb+"\\s+mons?",fte=bb+"\\s+days?",pte="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",mte=new RegExp([ute,lte,fte,pte].map(function(e){return"("+e+")?"}).join("\\s*")),FL={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},hte=["hours","minutes","seconds","milliseconds"];function gte(e){var t=e+"000000".slice(e.length);return parseInt(t,10)/1e3}function yte(e){if(!e)return{};var t=mte.exec(e),r=t[8]==="-";return Object.keys(FL).reduce(function(s,n){var o=FL[n],i=t[o];return!i||(i=n==="milliseconds"?gte(i):parseInt(i,10),!i)||(r&&~hte.indexOf(n)&&(i*=-1),s[n]=i),s},{})}});var BL=b((fbe,jL)=>{"use strict";jL.exports=function(t){if(/^\\x/.test(t))return new Buffer(t.substr(2),"hex");for(var r="",s=0;s<t.length;)if(t[s]!=="\\")r+=t[s],++s;else if(/[0-7]{3}/.test(t.substr(s+1,3)))r+=String.fromCharCode(parseInt(t.substr(s+1,3),8)),s+=4;else{for(var n=1;s+n<t.length&&t[s+n]==="\\";)n++;for(var o=0;o<Math.floor(n/2);++o)r+="\\";s+=Math.floor(n/2)*2}return new Buffer(r,"binary")}});var KL=b((pbe,QL)=>{var Zd=_b(),eu=Eb(),Um=ML(),zL=UL(),VL=BL();function jm(e){return function(r){return r===null?r:e(r)}}function GL(e){return e===null?e:e==="TRUE"||e==="t"||e==="true"||e==="y"||e==="yes"||e==="on"||e==="1"}function Ste(e){return e?Zd.parse(e,GL):null}function _te(e){return parseInt(e,10)}function vb(e){return e?Zd.parse(e,jm(_te)):null}function Ete(e){return e?Zd.parse(e,jm(function(t){return WL(t).trim()})):null}var wte=function(e){if(!e)return null;var t=eu.create(e,function(r){return r!==null&&(r=Tb(r)),r});return t.parse()},xb=function(e){if(!e)return null;var t=eu.create(e,function(r){return r!==null&&(r=parseFloat(r)),r});return t.parse()},Dr=function(e){if(!e)return null;var t=eu.create(e);return t.parse()},Cb=function(e){if(!e)return null;var t=eu.create(e,function(r){return r!==null&&(r=Um(r)),r});return t.parse()},bte=function(e){if(!e)return null;var t=eu.create(e,function(r){return r!==null&&(r=zL(r)),r});return t.parse()},vte=function(e){return e?Zd.parse(e,jm(VL)):null},Rb=function(e){return parseInt(e,10)},WL=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},HL=function(e){return e?Zd.parse(e,jm(JSON.parse)):null},Tb=function(e){return e[0]!=="("?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},xte=function(e){if(e[0]!=="<"&&e[1]!=="(")return null;for(var t="(",r="",s=!1,n=2;n<e.length-1;n++){if(s||(t+=e[n]),e[n]===")"){s=!0;continue}else if(!s)continue;e[n]!==","&&(r+=e[n])}var o=Tb(t);return o.radius=parseFloat(r),o},Cte=function(e){e(20,WL),e(21,Rb),e(23,Rb),e(26,Rb),e(700,parseFloat),e(701,parseFloat),e(16,GL),e(1082,Um),e(1114,Um),e(1184,Um),e(600,Tb),e(651,Dr),e(718,xte),e(1e3,Ste),e(1001,vte),e(1005,vb),e(1007,vb),e(1028,vb),e(1016,Ete),e(1017,wte),e(1021,xb),e(1022,xb),e(1231,xb),e(1014,Dr),e(1015,Dr),e(1008,Dr),e(1009,Dr),e(1040,Dr),e(1041,Dr),e(1115,Cb),e(1182,Cb),e(1185,Cb),e(1186,zL),e(1187,bte),e(17,VL),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,HL),e(3807,HL),e(3907,Dr),e(2951,Dr),e(791,Dr),e(1183,Dr),e(1270,Dr)};QL.exports={init:Cte}});var YL=b((mbe,JL)=>{"use strict";var nr=1e6;function Rte(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),s="";t<0&&(t=~t+(r===0),r=~r+1>>>0,s="-");var n="",o,i,a,c,d,u;{if(o=t%nr,t=t/nr>>>0,i=4294967296*o+r,r=i/nr>>>0,a=""+(i-nr*r),r===0&&t===0)return s+a+n;for(c="",d=6-a.length,u=0;u<d;u++)c+="0";n=c+a+n}{if(o=t%nr,t=t/nr>>>0,i=4294967296*o+r,r=i/nr>>>0,a=""+(i-nr*r),r===0&&t===0)return s+a+n;for(c="",d=6-a.length,u=0;u<d;u++)c+="0";n=c+a+n}{if(o=t%nr,t=t/nr>>>0,i=4294967296*o+r,r=i/nr>>>0,a=""+(i-nr*r),r===0&&t===0)return s+a+n;for(c="",d=6-a.length,u=0;u<d;u++)c+="0";n=c+a+n}return o=t%nr,i=4294967296*o+r,a=""+i%nr,s+a+n}JL.exports=Rte});var rq=b((hbe,tq)=>{var Tte=YL(),Ge=function(e,t,r,s,n){r=r||0,s=s||!1,n=n||function(m,g,w){return m*Math.pow(2,w)+g};var o=r>>3,i=function(m){return s?~m&255:m},a=255,c=8-r%8;t<c&&(a=255<<8-t&255,c=t),r&&(a=a>>r%8);var d=0;r%8+t>=8&&(d=n(0,i(e[o])&a,c));for(var u=t+r>>3,l=o+1;l<u;l++)d=n(d,i(e[l]),8);var h=(t+r)%8;return h>0&&(d=n(d,i(e[u])>>8-h,h)),d},eq=function(e,t,r){var s=Math.pow(2,r-1)-1,n=Ge(e,1),o=Ge(e,r,1);if(o===0)return 0;var i=1,a=function(d,u,l){d===0&&(d=1);for(var h=1;h<=l;h++)i/=2,(u&1<<l-h)>0&&(d+=i);return d},c=Ge(e,t,r+1,!1,a);return o==Math.pow(2,r+1)-1?c===0?n===0?1/0:-1/0:NaN:(n===0?1:-1)*Math.pow(2,o-s)*c},Ate=function(e){return Ge(e,1)==1?-1*(Ge(e,15,1,!0)+1):Ge(e,15,1)},XL=function(e){return Ge(e,1)==1?-1*(Ge(e,31,1,!0)+1):Ge(e,31,1)},Ite=function(e){return eq(e,23,8)},Pte=function(e){return eq(e,52,11)},Nte=function(e){var t=Ge(e,16,32);if(t==49152)return NaN;for(var r=Math.pow(1e4,Ge(e,16,16)),s=0,n=[],o=Ge(e,16),i=0;i<o;i++)s+=Ge(e,16,64+16*i)*r,r/=1e4;var a=Math.pow(10,Ge(e,16,48));return(t===0?1:-1)*Math.round(s*a)/a},ZL=function(e,t){var r=Ge(t,1),s=Ge(t,63,1),n=new Date((r===0?1:-1)*s/1e3+9466848e5);return e||n.setTime(n.getTime()+n.getTimezoneOffset()*6e4),n.usec=s%1e3,n.getMicroSeconds=function(){return this.usec},n.setMicroSeconds=function(o){this.usec=o},n.getUTCMicroSeconds=function(){return this.usec},n},tu=function(e){for(var t=Ge(e,32),r=Ge(e,32,32),s=Ge(e,32,64),n=96,o=[],i=0;i<t;i++)o[i]=Ge(e,32,n),n+=32,n+=32;var a=function(d){var u=Ge(e,32,n);if(n+=32,u==4294967295)return null;var l;if(d==23||d==20)return l=Ge(e,u*8,n),n+=u*8,l;if(d==25)return l=e.toString(this.encoding,n>>3,(n+=u<<3)>>3),l;console.log("ERROR: ElementType not implemented: "+d)},c=function(d,u){var l=[],h;if(d.length>1){var m=d.shift();for(h=0;h<m;h++)l[h]=c(d,u);d.unshift(m)}else for(h=0;h<d[0];h++)l[h]=a(u);return l};return c(o,s)},Ote=function(e){return e.toString("utf8")},kte=function(e){return e===null?null:Ge(e,8)>0},Dte=function(e){e(20,Tte),e(21,Ate),e(23,XL),e(26,XL),e(1700,Nte),e(700,Ite),e(701,Pte),e(16,kte),e(1114,ZL.bind(null,!1)),e(1184,ZL.bind(null,!0)),e(1e3,tu),e(1007,tu),e(1016,tu),e(1008,tu),e(1009,tu),e(25,Ote)};tq.exports={init:Dte}});var nq=b((gbe,sq)=>{sq.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var nu=b(su=>{var Mte=KL(),Lte=rq(),qte=Eb(),Fte=nq();su.getTypeParser=$te;su.setTypeParser=Ute;su.arrayParser=qte;su.builtins=Fte;var ru={text:{},binary:{}};function oq(e){return String(e)}function $te(e,t){return t=t||"text",ru[t]&&ru[t][e]||oq}function Ute(e,t,r){typeof t=="function"&&(r=t,t="text"),ru[t][e]=r}Mte.init(function(e,t){ru.text[e]=t});Lte.init(function(e,t){ru.binary[e]=t})});var ou=b((Sbe,Ab)=>{"use strict";Ab.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Da=nu(),jte=Da.getTypeParser(20,"text"),Bte=Da.getTypeParser(1016,"text");Ab.exports.__defineSetter__("parseInt8",function(e){Da.setTypeParser(20,"text",e?Da.getTypeParser(23,"text"):jte),Da.setTypeParser(1016,"text",e?Da.getTypeParser(1007,"text"):Bte)})});var Ma=b((_be,cq)=>{"use strict";var Hte=ou(),iq=require("util"),{isDate:zte}=iq.types||iq;function Vte(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function aq(e){let t="{";for(let r=0;r<e.length;r++)if(r>0&&(t=t+","),e[r]===null||typeof e[r]>"u")t=t+"NULL";else if(Array.isArray(e[r]))t=t+aq(e[r]);else if(ArrayBuffer.isView(e[r])){let s=e[r];if(!(s instanceof Buffer)){let n=Buffer.from(s.buffer,s.byteOffset,s.byteLength);n.length===s.byteLength?s=n:s=n.slice(s.byteOffset,s.byteOffset+s.byteLength)}t+="\\\\x"+s.toString("hex")}else t+=Vte(Bm(e[r]));return t=t+"}",t}var Bm=function(e,t){if(e==null)return null;if(typeof e=="object"){if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){let r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return zte(e)?Hte.parseInputDatesAsUTC?Qte(e):Wte(e):Array.isArray(e)?aq(e):Gte(e,t)}return e.toString()};function Gte(e,t){if(e&&typeof e.toPostgres=="function"){if(t=t||[],t.indexOf(e)!==-1)throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),Bm(e.toPostgres(Bm),t)}return JSON.stringify(e)}function Wte(e){let t=-e.getTimezoneOffset(),r=e.getFullYear(),s=r<1;s&&(r=Math.abs(r)+1);let n=String(r).padStart(4,"0")+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+String(e.getMilliseconds()).padStart(3,"0");return t<0?(n+="-",t*=-1):n+="+",n+=String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0"),s&&(n+=" BC"),n}function Qte(e){let t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);let s=String(t).padStart(4,"0")+"-"+String(e.getUTCMonth()+1).padStart(2,"0")+"-"+String(e.getUTCDate()).padStart(2,"0")+"T"+String(e.getUTCHours()).padStart(2,"0")+":"+String(e.getUTCMinutes()).padStart(2,"0")+":"+String(e.getUTCSeconds()).padStart(2,"0")+"."+String(e.getUTCMilliseconds()).padStart(3,"0");return s+="+00:00",r&&(s+=" BC"),s}function Kte(e,t,r){return e=typeof e=="string"?{text:e}:e,t&&(typeof t=="function"?e.callback=t:e.values=t),r&&(e.callback=r),e}var Jte=function(e){return'"'+e.replace(/"/g,'""')+'"'},Yte=function(e){let t=!1,r="'";if(e==null||typeof e!="string")return"''";for(let s=0;s<e.length;s++){let n=e[s];n==="'"?r+=n+n:n==="\\"?(r+=n+n,t=!0):r+=n}return r+="'",t===!0&&(r=" E"+r),r};cq.exports={prepareValue:function(t){return Bm(t)},normalizeQueryConfig:Kte,escapeIdentifier:Jte,escapeLiteral:Yte}});var uq=b((Ebe,dq)=>{"use strict";var La=require("crypto");function Ib(e){return La.createHash("md5").update(e,"utf-8").digest("hex")}function Xte(e,t,r){let s=Ib(t+e);return"md5"+Ib(Buffer.concat([Buffer.from(s),r]))}function Zte(e){return La.createHash("sha256").update(e).digest()}function ere(e,t){return e=e.replace(/(\D)-/,"$1"),La.createHash(e).update(t).digest()}function tre(e,t){return La.createHmac("sha256",e).update(t).digest()}async function rre(e,t,r){return La.pbkdf2Sync(e,t,r,32,"sha256")}dq.exports={postgresMd5PasswordHash:Xte,randomBytes:La.randomBytes,deriveKey:rre,sha256:Zte,hashByName:ere,hmacSha256:tre,md5:Ib}});var mq=b((wbe,pq)=>{var lq=require("crypto");pq.exports={postgresMd5PasswordHash:nre,randomBytes:sre,deriveKey:cre,sha256:ore,hashByName:ire,hmacSha256:are,md5:Pb};var fq=lq.webcrypto||globalThis.crypto,di=fq.subtle,Nb=new TextEncoder;function sre(e){return fq.getRandomValues(Buffer.alloc(e))}async function Pb(e){try{return lq.createHash("md5").update(e,"utf-8").digest("hex")}catch{let r=typeof e=="string"?Nb.encode(e):e,s=await di.digest("MD5",r);return Array.from(new Uint8Array(s)).map(n=>n.toString(16).padStart(2,"0")).join("")}}async function nre(e,t,r){let s=await Pb(t+e);return"md5"+await Pb(Buffer.concat([Buffer.from(s),r]))}async function ore(e){return await di.digest("SHA-256",e)}async function ire(e,t){return await di.digest(e,t)}async function are(e,t){let r=await di.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await di.sign("HMAC",r,Nb.encode(t))}async function cre(e,t,r){let s=await di.importKey("raw",Nb.encode(e),"PBKDF2",!1,["deriveBits"]),n={name:"PBKDF2",hash:"SHA-256",salt:t,iterations:r};return await di.deriveBits(n,s,256,["deriveBits"])}});var kb=b((bbe,Ob)=>{"use strict";var dre=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;dre?Ob.exports=uq():Ob.exports=mq()});var yq=b((vbe,gq)=>{function ui(e,t){return new Error("SASL channel binding: "+e+" when parsing public certificate "+t.toString("base64"))}function Db(e,t){let r=e[t++];if(r<128)return{length:r,index:t};let s=r&127;if(s>4)throw ui("bad length",e);r=0;for(let n=0;n<s;n++)r=r<<8|e[t++];return{length:r,index:t}}function hq(e,t){if(e[t++]!==6)throw ui("non-OID data",e);let{length:r,index:s}=Db(e,t);t=s;let n=t+r,o=e[t++],i=(o/40>>0)+"."+o%40;for(;t<n;){let a=0;for(;t<n;){let c=e[t++];if(a=a<<7|c&127,c<128)break}i+="."+a}return{oid:i,index:t}}function iu(e,t){if(e[t++]!==48)throw ui("non-sequence data",e);return Db(e,t)}function ure(e,t){t===void 0&&(t=0),t=iu(e,t).index;let{length:r,index:s}=iu(e,t);t=s+r,t=iu(e,t).index;let{oid:n,index:o}=hq(e,t);switch(n){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(t=o,t=iu(e,t).index,e[t++]!==160)throw ui("non-tag data",e);t=Db(e,t).index,t=iu(e,t).index;let{oid:i}=hq(e,t);switch(i){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw ui("unknown hash OID "+i,e)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw ui("Ed448 certificate channel binding is not currently supported by Postgres")}throw ui("unknown OID "+n,e)}gq.exports={signatureAlgorithmHashFromCertificate:ure}});var wq=b((xbe,Eq)=>{"use strict";var io=kb(),{signatureAlgorithmHashFromCertificate:lre}=yq();function fre(e,t){let r=["SCRAM-SHA-256"];t&&r.unshift("SCRAM-SHA-256-PLUS");let s=r.find(i=>e.includes(i));if(!s)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(s==="SCRAM-SHA-256-PLUS"&&typeof t.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let n=io.randomBytes(18).toString("base64");return{mechanism:s,clientNonce:n,response:(s==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":t?"y":"n")+",,n=*,r="+n,message:"SASLInitialResponse"}}async function pre(e,t,r,s){if(e.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(t==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let n=gre(r);if(n.nonce.startsWith(e.clientNonce)){if(n.nonce.length===e.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let o="n=*,r="+e.clientNonce,i="r="+n.nonce+",s="+n.salt+",i="+n.iteration,a=s?"eSws":"biws";if(e.mechanism==="SCRAM-SHA-256-PLUS"){let N=s.getPeerCertificate().raw,B=lre(N);(B==="MD5"||B==="SHA-1")&&(B="SHA-256");let V=await io.hashByName(B,N);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(V)]).toString("base64")}let c="c="+a+",r="+n.nonce,d=o+","+i+","+c,u=Buffer.from(n.salt,"base64"),l=await io.deriveKey(t,u,n.iteration),h=await io.hmacSha256(l,"Client Key"),m=await io.sha256(h),g=await io.hmacSha256(m,d),w=Sre(Buffer.from(h),Buffer.from(g)).toString("base64"),C=await io.hmacSha256(l,"Server Key"),T=await io.hmacSha256(C,d);e.message="SASLResponse",e.serverSignature=Buffer.from(T).toString("base64"),e.response=c+",p="+w}function mre(e,t){if(e.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=yre(t);if(r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function hre(e){if(typeof e!="string")throw new TypeError("SASL: text must be a string");return e.split("").map((t,r)=>e.charCodeAt(r)).every(t=>t>=33&&t<=43||t>=45&&t<=126)}function Sq(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function _q(e){if(typeof e!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(t=>{if(!/^.=/.test(t))throw new Error("SASL: Invalid attribute pair entry");let r=t[0],s=t.substring(2);return[r,s]}))}function gre(e){let t=_q(e),r=t.get("r");if(r){if(!hre(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let s=t.get("s");if(s){if(!Sq(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let n=t.get("i");if(n){if(!/^[1-9][0-9]*$/.test(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let o=parseInt(n,10);return{nonce:r,salt:s,iteration:o}}function yre(e){let r=_q(e).get("v");if(r){if(!Sq(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function Sre(e,t){if(!Buffer.isBuffer(e))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(t))throw new TypeError("second argument must be a Buffer");if(e.length!==t.length)throw new Error("Buffer lengths must match");if(e.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(e.map((r,s)=>e[s]^t[s]))}Eq.exports={startSession:fre,continueSession:pre,finalizeSession:mre}});var zm=b((Cbe,bq)=>{"use strict";var _re=nu();function Hm(e){this._types=e||_re,this.text={},this.binary={}}Hm.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}};Hm.prototype.setTypeParser=function(e,t,r){typeof t=="function"&&(r=t,t="text"),this.getOverrides(t)[e]=r};Hm.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)};bq.exports=Hm});var Cq=b((Rbe,xq)=>{"use strict";function qa(e,t={}){if(e.charAt(0)==="/"){let c=e.split(" ");return{host:c[0],database:c[1]}}let r={},s,n=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)&&(e=encodeURI(e).replace(/%25(\d\d)/g,"%$1"));try{try{s=new URL(e,"postgres://base")}catch{s=new URL(e.replace("@/","@___DUMMY___/"),"postgres://base"),n=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of s.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(s.username),r.password=r.password||decodeURIComponent(s.password),s.protocol=="socket:")return r.host=decodeURI(s.pathname),r.database=s.searchParams.get("db"),r.client_encoding=s.searchParams.get("encoding"),r;let o=n?"":s.hostname;r.host?o&&/^%2f/i.test(o)&&(s.pathname=o+s.pathname):r.host=decodeURIComponent(o),r.port||(r.port=s.port);let i=s.pathname.slice(1)||null;r.database=i?decodeURI(i):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),t.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||t.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function Ere(e){return Object.entries(e).reduce((r,[s,n])=>(n!=null&&(r[s]=n),r),{})}function vq(e){return Object.entries(e).reduce((r,[s,n])=>{if(s==="ssl"){let o=n;typeof o=="boolean"&&(r[s]=o),typeof o=="object"&&(r[s]=Ere(o))}else if(n!=null)if(s==="port"){if(n!==""){let o=parseInt(n,10);if(isNaN(o))throw new Error(`Invalid ${s}: ${n}`);r[s]=o}}else r[s]=n;return r},{})}function wre(e){return vq(qa(e))}xq.exports=qa;qa.parse=qa;qa.toClientConfig=vq;qa.parseIntoClientConfig=wre});var Lb=b((Tbe,Aq)=>{"use strict";var bre=require("dns"),Tq=ou(),Rq=Cq().parse,Wt=function(e,t,r){return r===void 0?r=process.env["PG"+e.toUpperCase()]:r===!1||(r=process.env[r]),t[e]||r||Tq[e]},vre=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return Tq.ssl},Fa=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},Mr=function(e,t,r){let s=t[r];s!=null&&e.push(r+"="+Fa(s))},Mb=class{constructor(t){t=typeof t=="string"?Rq(t):t||{},t.connectionString&&(t=Object.assign({},t,Rq(t.connectionString))),this.user=Wt("user",t),this.database=Wt("database",t),this.database===void 0&&(this.database=this.user),this.port=parseInt(Wt("port",t),10),this.host=Wt("host",t),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Wt("password",t)}),this.binary=Wt("binary",t),this.options=Wt("options",t),this.ssl=typeof t.ssl>"u"?vre():t.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Wt("client_encoding",t),this.replication=Wt("replication",t),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Wt("application_name",t,"PGAPPNAME"),this.fallback_application_name=Wt("fallback_application_name",t,!1),this.statement_timeout=Wt("statement_timeout",t,!1),this.lock_timeout=Wt("lock_timeout",t,!1),this.idle_in_transaction_session_timeout=Wt("idle_in_transaction_session_timeout",t,!1),this.query_timeout=Wt("query_timeout",t,!1),t.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(t.connectionTimeoutMillis/1e3),t.keepAlive===!1?this.keepalives=0:t.keepAlive===!0&&(this.keepalives=1),typeof t.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(t.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(t){let r=[];Mr(r,this,"user"),Mr(r,this,"password"),Mr(r,this,"port"),Mr(r,this,"application_name"),Mr(r,this,"fallback_application_name"),Mr(r,this,"connect_timeout"),Mr(r,this,"options");let s=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(Mr(r,s,"sslmode"),Mr(r,s,"sslca"),Mr(r,s,"sslkey"),Mr(r,s,"sslcert"),Mr(r,s,"sslrootcert"),this.database&&r.push("dbname="+Fa(this.database)),this.replication&&r.push("replication="+Fa(this.replication)),this.host&&r.push("host="+Fa(this.host)),this.isDomainSocket)return t(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+Fa(this.client_encoding)),bre.lookup(this.host,function(n,o){return n?t(n,null):(r.push("hostaddr="+Fa(o)),t(null,r.join(" ")))})}};Aq.exports=Mb});var Fb=b((Abe,Pq)=>{"use strict";var xre=nu(),Iq=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,qb=class{constructor(t,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=t==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(t){let r;t.text?r=Iq.exec(t.text):r=Iq.exec(t.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(t){let r=new Array(t.length);for(let s=0,n=t.length;s<n;s++){let o=t[s];o!==null?r[s]=this._parsers[s](o):r[s]=null}return r}parseRow(t){let r={...this._prebuiltEmptyResultObject};for(let s=0,n=t.length;s<n;s++){let o=t[s],i=this.fields[s].name;if(o!==null){let a=this.fields[s].format==="binary"?Buffer.from(o):o;r[i]=this._parsers[s](a)}else r[i]=null}return r}addRow(t){this.rows.push(t)}addFields(t){this.fields=t,this.fields.length&&(this._parsers=new Array(t.length));let r={};for(let s=0;s<t.length;s++){let n=t[s];r[n.name]=null,this._types?this._parsers[s]=this._types.getTypeParser(n.dataTypeID,n.format||"text"):this._parsers[s]=xre.getTypeParser(n.dataTypeID,n.format||"text")}this._prebuiltEmptyResultObject={...r}}};Pq.exports=qb});var Dq=b((Ibe,kq)=>{"use strict";var{EventEmitter:Cre}=require("events"),Nq=Fb(),Oq=Ma(),$b=class extends Cre{constructor(t,r,s){super(),t=Oq.normalizeQueryConfig(t,r,s),this.text=t.text,this.values=t.values,this.rows=t.rows,this.types=t.types,this.name=t.name,this.queryMode=t.queryMode,this.binary=t.binary,this.portal=t.portal||"",this.callback=t.callback,this._rowMode=t.rowMode,process.domain&&t.callback&&(this.callback=process.domain.bind(t.callback)),this._result=new Nq(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new Nq(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(t){this._checkForMultirow(),this._result.addFields(t.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(t){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(t.fields)}catch(s){this._canceledDueToError=s;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(t,r){this._checkForMultirow(),this._result.addCommandComplete(t),this.rows&&r.sync()}handleEmptyQuery(t){this.rows&&t.sync()}handleError(t,r){if(this._canceledDueToError&&(t=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(t);this.emit("error",t)}handleReadyForQuery(t){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,t);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(t){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=t.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){t.stream.cork&&t.stream.cork();try{this.prepare(t)}finally{t.stream.uncork&&t.stream.uncork()}}else t.query(this.text);return null}hasBeenParsed(t){return this.name&&t.parsedStatements[this.name]}handlePortalSuspended(t){this._getRows(t,this.rows)}_getRows(t,r){t.execute({portal:this.portal,rows:r}),r?t.flush():t.sync()}prepare(t){this.hasBeenParsed(t)||t.parse({text:this.text,name:this.name,types:this.types});try{t.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:Oq.prepareValue})}catch(r){this.handleError(r,t);return}t.describe({type:"P",name:this.portal||""}),this._getRows(t,this.rows)}handleCopyInResponse(t){t.sendCopyFail("No source stream defined")}handleCopyData(t,r){}};kq.exports=$b});var ev=b(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.NoticeMessage=ne.DataRowMessage=ne.CommandCompleteMessage=ne.ReadyForQueryMessage=ne.NotificationResponseMessage=ne.BackendKeyDataMessage=ne.AuthenticationMD5Password=ne.ParameterStatusMessage=ne.ParameterDescriptionMessage=ne.RowDescriptionMessage=ne.Field=ne.CopyResponse=ne.CopyDataMessage=ne.DatabaseError=ne.copyDone=ne.emptyQuery=ne.replicationStart=ne.portalSuspended=ne.noData=ne.closeComplete=ne.bindComplete=ne.parseComplete=void 0;ne.parseComplete={name:"parseComplete",length:5};ne.bindComplete={name:"bindComplete",length:5};ne.closeComplete={name:"closeComplete",length:5};ne.noData={name:"noData",length:5};ne.portalSuspended={name:"portalSuspended",length:5};ne.replicationStart={name:"replicationStart",length:4};ne.emptyQuery={name:"emptyQuery",length:4};ne.copyDone={name:"copyDone",length:4};var Ub=class extends Error{constructor(t,r,s){super(t),this.length=r,this.name=s}};ne.DatabaseError=Ub;var jb=class{constructor(t,r){this.length=t,this.chunk=r,this.name="copyData"}};ne.CopyDataMessage=jb;var Bb=class{constructor(t,r,s,n){this.length=t,this.name=r,this.binary=s,this.columnTypes=new Array(n)}};ne.CopyResponse=Bb;var Hb=class{constructor(t,r,s,n,o,i,a){this.name=t,this.tableID=r,this.columnID=s,this.dataTypeID=n,this.dataTypeSize=o,this.dataTypeModifier=i,this.format=a}};ne.Field=Hb;var zb=class{constructor(t,r){this.length=t,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};ne.RowDescriptionMessage=zb;var Vb=class{constructor(t,r){this.length=t,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};ne.ParameterDescriptionMessage=Vb;var Gb=class{constructor(t,r,s){this.length=t,this.parameterName=r,this.parameterValue=s,this.name="parameterStatus"}};ne.ParameterStatusMessage=Gb;var Wb=class{constructor(t,r){this.length=t,this.salt=r,this.name="authenticationMD5Password"}};ne.AuthenticationMD5Password=Wb;var Qb=class{constructor(t,r,s){this.length=t,this.processID=r,this.secretKey=s,this.name="backendKeyData"}};ne.BackendKeyDataMessage=Qb;var Kb=class{constructor(t,r,s,n){this.length=t,this.processId=r,this.channel=s,this.payload=n,this.name="notification"}};ne.NotificationResponseMessage=Kb;var Jb=class{constructor(t,r){this.length=t,this.status=r,this.name="readyForQuery"}};ne.ReadyForQueryMessage=Jb;var Yb=class{constructor(t,r){this.length=t,this.text=r,this.name="commandComplete"}};ne.CommandCompleteMessage=Yb;var Xb=class{constructor(t,r){this.length=t,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};ne.DataRowMessage=Xb;var Zb=class{constructor(t,r){this.length=t,this.message=r,this.name="notice"}};ne.NoticeMessage=Zb});var Mq=b(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.Writer=void 0;var tv=class{constructor(t=256){this.size=t,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(t)}ensure(t){if(this.buffer.length-this.offset<t){let s=this.buffer,n=s.length+(s.length>>1)+t;this.buffer=Buffer.allocUnsafe(n),s.copy(this.buffer)}}addInt32(t){return this.ensure(4),this.buffer[this.offset++]=t>>>24&255,this.buffer[this.offset++]=t>>>16&255,this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addInt16(t){return this.ensure(2),this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addCString(t){if(!t)this.ensure(1);else{let r=Buffer.byteLength(t);this.ensure(r+1),this.buffer.write(t,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(t=""){let r=Buffer.byteLength(t);return this.ensure(r),this.buffer.write(t,this.offset),this.offset+=r,this}add(t){return this.ensure(t.length),t.copy(this.buffer,this.offset),this.offset+=t.length,this}join(t){if(t){this.buffer[this.headerPosition]=t;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(t?0:5,this.offset)}flush(t){let r=this.join(t);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Vm.Writer=tv});var qq=b(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.serialize=void 0;var rv=Mq(),Ue=new rv.Writer,Rre=e=>{Ue.addInt16(3).addInt16(0);for(let s of Object.keys(e))Ue.addCString(s).addCString(e[s]);Ue.addCString("client_encoding").addCString("UTF8");let t=Ue.addCString("").flush(),r=t.length+4;return new rv.Writer().addInt32(r).add(t).flush()},Tre=()=>{let e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},Are=e=>Ue.addCString(e).flush(112),Ire=function(e,t){return Ue.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),Ue.flush(112)},Pre=function(e){return Ue.addString(e).flush(112)},Nre=e=>Ue.addCString(e).flush(81),Lq=[],Ore=e=>{let t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));let r=e.types||Lq,s=r.length,n=Ue.addCString(t).addCString(e.text).addInt16(s);for(let o=0;o<s;o++)n.addInt32(r[o]);return Ue.flush(80)},$a=new rv.Writer,kre=function(e,t){for(let r=0;r<e.length;r++){let s=t?t(e[r],r):e[r];s==null?(Ue.addInt16(0),$a.addInt32(-1)):s instanceof Buffer?(Ue.addInt16(1),$a.addInt32(s.length),$a.add(s)):(Ue.addInt16(0),$a.addInt32(Buffer.byteLength(s)),$a.addString(s))}},Dre=(e={})=>{let t=e.portal||"",r=e.statement||"",s=e.binary||!1,n=e.values||Lq,o=n.length;return Ue.addCString(t).addCString(r),Ue.addInt16(o),kre(n,e.valueMapper),Ue.addInt16(o),Ue.add($a.flush()),Ue.addInt16(1),Ue.addInt16(s?1:0),Ue.flush(66)},Mre=Buffer.from([69,0,0,0,9,0,0,0,0,0]),Lre=e=>{if(!e||!e.portal&&!e.rows)return Mre;let t=e.portal||"",r=e.rows||0,s=Buffer.byteLength(t),n=4+s+1+4,o=Buffer.allocUnsafe(1+n);return o[0]=69,o.writeInt32BE(n,1),o.write(t,5,"utf-8"),o[s+5]=0,o.writeUInt32BE(r,o.length-4),o},qre=(e,t)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r},sv=(e,t)=>{let s=4+Buffer.byteLength(t)+1,n=Buffer.allocUnsafe(1+s);return n[0]=e,n.writeInt32BE(s,1),n.write(t,5,"utf-8"),n[s]=0,n},Fre=Ue.addCString("P").flush(68),$re=Ue.addCString("S").flush(68),Ure=e=>e.name?sv(68,`${e.type}${e.name||""}`):e.type==="P"?Fre:$re,jre=e=>{let t=`${e.type}${e.name||""}`;return sv(67,t)},Bre=e=>Ue.add(e).flush(100),Hre=e=>sv(102,e),Gm=e=>Buffer.from([e,0,0,0,4]),zre=Gm(72),Vre=Gm(83),Gre=Gm(88),Wre=Gm(99),Qre={startup:Rre,password:Are,requestSsl:Tre,sendSASLInitialResponseMessage:Ire,sendSCRAMClientFinalMessage:Pre,query:Nre,parse:Ore,bind:Dre,execute:Lre,describe:Ure,close:jre,flush:()=>zre,sync:()=>Vre,end:()=>Gre,copyData:Bre,copyDone:()=>Wre,copyFail:Hre,cancel:qre};Wm.serialize=Qre});var Fq=b(Qm=>{"use strict";Object.defineProperty(Qm,"__esModule",{value:!0});Qm.BufferReader=void 0;var Kre=Buffer.allocUnsafe(0),nv=class{constructor(t=0){this.offset=t,this.buffer=Kre,this.encoding="utf-8"}setBuffer(t,r){this.offset=t,this.buffer=r}int16(){let t=this.buffer.readInt16BE(this.offset);return this.offset+=2,t}byte(){let t=this.buffer[this.offset];return this.offset++,t}int32(){let t=this.buffer.readInt32BE(this.offset);return this.offset+=4,t}uint32(){let t=this.buffer.readUInt32BE(this.offset);return this.offset+=4,t}string(t){let r=this.buffer.toString(this.encoding,this.offset,this.offset+t);return this.offset+=t,r}cstring(){let t=this.offset,r=t;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,t,r-1)}bytes(t){let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}};Qm.BufferReader=nv});var jq=b(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.Parser=void 0;var We=ev(),Jre=Fq(),ov=1,Yre=4,$q=ov+Yre,Uq=Buffer.allocUnsafe(0),iv=class{constructor(t){if(this.buffer=Uq,this.bufferLength=0,this.bufferOffset=0,this.reader=new Jre.BufferReader,t?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=t?.mode||"text"}parse(t,r){this.mergeBuffer(t);let s=this.bufferOffset+this.bufferLength,n=this.bufferOffset;for(;n+$q<=s;){let o=this.buffer[n],i=this.buffer.readUInt32BE(n+ov),a=ov+i;if(a+n<=s){let c=this.handlePacket(n+$q,o,i,this.buffer);r(c),n+=a}else break}n===s?(this.buffer=Uq,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=s-n,this.bufferOffset=n)}mergeBuffer(t){if(this.bufferLength>0){let r=this.bufferLength+t.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let n;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)n=this.buffer;else{let o=this.buffer.byteLength*2;for(;r>=o;)o*=2;n=Buffer.allocUnsafe(o)}this.buffer.copy(n,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=n,this.bufferOffset=0}t.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=t,this.bufferOffset=0,this.bufferLength=t.byteLength}handlePacket(t,r,s,n){switch(r){case 50:return We.bindComplete;case 49:return We.parseComplete;case 51:return We.closeComplete;case 110:return We.noData;case 115:return We.portalSuspended;case 99:return We.copyDone;case 87:return We.replicationStart;case 73:return We.emptyQuery;case 68:return this.parseDataRowMessage(t,s,n);case 67:return this.parseCommandCompleteMessage(t,s,n);case 90:return this.parseReadyForQueryMessage(t,s,n);case 65:return this.parseNotificationMessage(t,s,n);case 82:return this.parseAuthenticationResponse(t,s,n);case 83:return this.parseParameterStatusMessage(t,s,n);case 75:return this.parseBackendKeyData(t,s,n);case 69:return this.parseErrorMessage(t,s,n,"error");case 78:return this.parseErrorMessage(t,s,n,"notice");case 84:return this.parseRowDescriptionMessage(t,s,n);case 116:return this.parseParameterDescriptionMessage(t,s,n);case 71:return this.parseCopyInMessage(t,s,n);case 72:return this.parseCopyOutMessage(t,s,n);case 100:return this.parseCopyData(t,s,n);default:return new We.DatabaseError("received invalid response: "+r.toString(16),s,"error")}}parseReadyForQueryMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.string(1);return new We.ReadyForQueryMessage(r,n)}parseCommandCompleteMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.cstring();return new We.CommandCompleteMessage(r,n)}parseCopyData(t,r,s){let n=s.slice(t,t+(r-4));return new We.CopyDataMessage(r,n)}parseCopyInMessage(t,r,s){return this.parseCopyMessage(t,r,s,"copyInResponse")}parseCopyOutMessage(t,r,s){return this.parseCopyMessage(t,r,s,"copyOutResponse")}parseCopyMessage(t,r,s,n){this.reader.setBuffer(t,s);let o=this.reader.byte()!==0,i=this.reader.int16(),a=new We.CopyResponse(r,n,o,i);for(let c=0;c<i;c++)a.columnTypes[c]=this.reader.int16();return a}parseNotificationMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int32(),o=this.reader.cstring(),i=this.reader.cstring();return new We.NotificationResponseMessage(r,n,o,i)}parseRowDescriptionMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int16(),o=new We.RowDescriptionMessage(r,n);for(let i=0;i<n;i++)o.fields[i]=this.parseField();return o}parseField(){let t=this.reader.cstring(),r=this.reader.uint32(),s=this.reader.int16(),n=this.reader.uint32(),o=this.reader.int16(),i=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new We.Field(t,r,s,n,o,i,a)}parseParameterDescriptionMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int16(),o=new We.ParameterDescriptionMessage(r,n);for(let i=0;i<n;i++)o.dataTypeIDs[i]=this.reader.int32();return o}parseDataRowMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int16(),o=new Array(n);for(let i=0;i<n;i++){let a=this.reader.int32();o[i]=a===-1?null:this.reader.string(a)}return new We.DataRowMessage(r,o)}parseParameterStatusMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.cstring(),o=this.reader.cstring();return new We.ParameterStatusMessage(r,n,o)}parseBackendKeyData(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int32(),o=this.reader.int32();return new We.BackendKeyDataMessage(r,n,o)}parseAuthenticationResponse(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int32(),o={name:"authenticationOk",length:r};switch(n){case 0:break;case 3:o.length===8&&(o.name="authenticationCleartextPassword");break;case 5:if(o.length===12){o.name="authenticationMD5Password";let i=this.reader.bytes(4);return new We.AuthenticationMD5Password(r,i)}break;case 10:{o.name="authenticationSASL",o.mechanisms=[];let i;do i=this.reader.cstring(),i&&o.mechanisms.push(i);while(i)}break;case 11:o.name="authenticationSASLContinue",o.data=this.reader.string(r-8);break;case 12:o.name="authenticationSASLFinal",o.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+n)}return o}parseErrorMessage(t,r,s,n){this.reader.setBuffer(t,s);let o={},i=this.reader.string(1);for(;i!=="\0";)o[i]=this.reader.cstring(),i=this.reader.string(1);let a=o.M,c=n==="notice"?new We.NoticeMessage(r,a):new We.DatabaseError(a,r,n);return c.severity=o.S,c.code=o.C,c.detail=o.D,c.hint=o.H,c.position=o.P,c.internalPosition=o.p,c.internalQuery=o.q,c.where=o.W,c.schema=o.s,c.table=o.t,c.column=o.c,c.dataType=o.d,c.constraint=o.n,c.file=o.F,c.line=o.L,c.routine=o.R,c}};Km.Parser=iv});var av=b(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.DatabaseError=ao.serialize=ao.parse=void 0;var Xre=ev();Object.defineProperty(ao,"DatabaseError",{enumerable:!0,get:function(){return Xre.DatabaseError}});var Zre=qq();Object.defineProperty(ao,"serialize",{enumerable:!0,get:function(){return Zre.serialize}});var ese=jq();function tse(e,t){let r=new ese.Parser;return e.on("data",s=>r.parse(s,t)),new Promise(s=>e.on("end",()=>s()))}ao.parse=tse});var Bq=b(cv=>{"use strict";Object.defineProperty(cv,"__esModule",{value:!0});cv.default={}});var zq=b((qbe,Hq)=>{var{getStream:rse,getSecureStream:sse}=ase();Hq.exports={getStream:rse,getSecureStream:sse};function nse(){function e(r){let s=require("net");return new s.Socket}function t(r){return require("tls").connect(r)}return{getStream:e,getSecureStream:t}}function ose(){function e(r){let{CloudflareSocket:s}=Bq();return new s(r)}function t(r){return r.socket.startTls(r),r.socket}return{getStream:e,getSecureStream:t}}function ise(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let e=new Response(null,{cf:{thing:!0}});if(typeof e.cf=="object"&&e.cf!==null&&e.cf.thing)return!0}return!1}function ase(){return ise()?ose():nse()}});var uv=b((Fbe,Vq)=>{"use strict";var cse=require("events").EventEmitter,{parse:dse,serialize:yt}=av(),{getStream:use,getSecureStream:lse}=zq(),fse=yt.flush(),pse=yt.sync(),mse=yt.end(),dv=class extends cse{constructor(t){super(),t=t||{},this.stream=t.stream||use(t.ssl),typeof this.stream=="function"&&(this.stream=this.stream(t)),this._keepAlive=t.keepAlive,this._keepAliveInitialDelayMillis=t.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=t.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(s){s==="message"&&(r._emitMessage=!0)})}connect(t,r){let s=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(t,r),this.stream.once("connect",function(){s._keepAlive&&s.stream.setKeepAlive(!0,s._keepAliveInitialDelayMillis),s.emit("connect")});let n=function(o){s._ending&&(o.code==="ECONNRESET"||o.code==="EPIPE")||s.emit("error",o)};if(this.stream.on("error",n),this.stream.on("close",function(){s.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(o){switch(o.toString("utf8")){case"S":break;case"N":return s.stream.end(),s.emit("error",new Error("The server does not support SSL connections"));default:return s.stream.end(),s.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:s.stream};s.ssl!==!0&&(Object.assign(a,s.ssl),"key"in s.ssl&&(a.key=s.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{s.stream=lse(a)}catch(d){return s.emit("error",d)}s.attachListeners(s.stream),s.stream.on("error",n),s.emit("sslconnect")})}attachListeners(t){dse(t,r=>{let s=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(s,r)})}requestSsl(){this.stream.write(yt.requestSsl())}startup(t){this.stream.write(yt.startup(t))}cancel(t,r){this._send(yt.cancel(t,r))}password(t){this._send(yt.password(t))}sendSASLInitialResponseMessage(t,r){this._send(yt.sendSASLInitialResponseMessage(t,r))}sendSCRAMClientFinalMessage(t){this._send(yt.sendSCRAMClientFinalMessage(t))}_send(t){return this.stream.writable?this.stream.write(t):!1}query(t){this._send(yt.query(t))}parse(t){this._send(yt.parse(t))}bind(t){this._send(yt.bind(t))}execute(t){this._send(yt.execute(t))}flush(){this.stream.writable&&this.stream.write(fse)}sync(){this._ending=!0,this._send(pse)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(mse,()=>{this.stream.end()})}close(t){this._send(yt.close(t))}describe(t){this._send(yt.describe(t))}sendCopyFromChunk(t){this._send(yt.copyData(t))}endCopyFrom(){this._send(yt.copyDone())}sendCopyFail(t){this._send(yt.copyFail(t))}};Vq.exports=dv});var Kq=b(($be,Qq)=>{"use strict";var{Transform:hse}=require("stream"),{StringDecoder:gse}=require("string_decoder"),co=Symbol("last"),Jm=Symbol("decoder");function yse(e,t,r){let s;if(this.overflow){if(s=this[Jm].write(e).split(this.matcher),s.length===1)return r();s.shift(),this.overflow=!1}else this[co]+=this[Jm].write(e),s=this[co].split(this.matcher);this[co]=s.pop();for(let n=0;n<s.length;n++)try{Wq(this,this.mapper(s[n]))}catch(o){return r(o)}if(this.overflow=this[co].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function Sse(e){if(this[co]+=this[Jm].end(),this[co])try{Wq(this,this.mapper(this[co]))}catch(t){return e(t)}e()}function Wq(e,t){t!==void 0&&e.push(t)}function Gq(e){return e}function _se(e,t,r){switch(e=e||/\r?\n/,t=t||Gq,r=r||{},arguments.length){case 1:typeof e=="function"?(t=e,e=/\r?\n/):typeof e=="object"&&!(e instanceof RegExp)&&!e[Symbol.split]&&(r=e,e=/\r?\n/);break;case 2:typeof e=="function"?(r=t,t=e,e=/\r?\n/):typeof t=="object"&&(r=t,t=Gq)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=yse,r.flush=Sse,r.readableObjectMode=!0;let s=new hse(r);return s[co]="",s[Jm]=new gse("utf8"),s.matcher=e,s.mapper=t,s.maxLength=r.maxLength,s.skipOverflow=r.skipOverflow||!1,s.overflow=!1,s._destroy=function(n,o){this._writableState.errorEmitted=!1,o(n)},s}Qq.exports=_se});var Xq=b((Ube,dn)=>{"use strict";var Jq=require("path"),Ese=require("stream").Stream,wse=Kq(),Yq=require("util"),bse=5432,Ym=process.platform==="win32",au=process.stderr,vse=56,xse=7,Cse=61440,Rse=32768;function Tse(e){return(e&Cse)==Rse}var Ua=["host","port","database","user","password"],lv=Ua.length,Ase=Ua[lv-1];function fv(){var e=au instanceof Ese&&au.writable===!0;if(e){var t=Array.prototype.slice.call(arguments).concat(`
`);au.write(Yq.format.apply(Yq,t))}}Object.defineProperty(dn.exports,"isWin",{get:function(){return Ym},set:function(e){Ym=e}});dn.exports.warnTo=function(e){var t=au;return au=e,t};dn.exports.getFileName=function(e){var t=e||process.env,r=t.PGPASSFILE||(Ym?Jq.join(t.APPDATA||"./","postgresql","pgpass.conf"):Jq.join(t.HOME||"./",".pgpass"));return r};dn.exports.usePgPass=function(e,t){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Ym?!0:(t=t||"<unkn>",Tse(e.mode)?e.mode&(vse|xse)?(fv('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):!0:(fv('WARNING: password file "%s" is not a plain file',t),!1))};var Ise=dn.exports.match=function(e,t){return Ua.slice(0,-1).reduce(function(r,s,n){return n==1&&Number(e[s]||bse)===Number(t[s])?r&&!0:r&&(t[s]==="*"||t[s]===e[s])},!0)};dn.exports.getPassword=function(e,t,r){var s,n=t.pipe(wse());function o(c){var d=Pse(c);d&&Nse(d)&&Ise(e,d)&&(s=d[Ase],n.end())}var i=function(){t.destroy(),r(s)},a=function(c){t.destroy(),fv("WARNING: error on reading file: %s",c),r(void 0)};t.on("error",a),n.on("data",o).on("end",i).on("error",a)};var Pse=dn.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",s=0,n=0,o=0,i={},a=!1,c=function(u,l,h){var m=e.substring(l,h);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(m=m.replace(/\\([:\\])/g,"$1")),i[Ua[u]]=m},d=0;d<e.length-1;d+=1){if(t=e.charAt(d+1),r=e.charAt(d),a=s==lv-1,a){c(s,n);break}d>=0&&t==":"&&r!=="\\"&&(c(s,n,d+1),n=d+2,s+=1)}return i=Object.keys(i).length===lv?i:null,i},Nse=dn.exports.isValidEntry=function(e){for(var t={0:function(i){return i.length>0},1:function(i){return i==="*"?!0:(i=Number(i),isFinite(i)&&i>0&&i<9007199254740992&&Math.floor(i)===i)},2:function(i){return i.length>0},3:function(i){return i.length>0},4:function(i){return i.length>0}},r=0;r<Ua.length;r+=1){var s=t[r],n=e[Ua[r]]||"",o=s(n);if(!o)return!1}return!0}});var eF=b((Bbe,pv)=>{"use strict";var jbe=require("path"),Zq=require("fs"),Xm=Xq();pv.exports=function(e,t){var r=Xm.getFileName();Zq.stat(r,function(s,n){if(s||!Xm.usePgPass(n,r))return t(void 0);var o=Zq.createReadStream(r);Xm.getPassword(e,o,t)})};pv.exports.warnTo=Xm.warnTo});var nF=b((Hbe,sF)=>{"use strict";var Ose=require("events").EventEmitter,tF=Ma(),mv=wq(),kse=zm(),Dse=Lb(),rF=Dq(),Mse=ou(),Lse=uv(),qse=kb(),Zm=class extends Ose{constructor(t){super(),this.connectionParameters=new Dse(t),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=t||{};this._Promise=r.Promise||global.Promise,this._types=new kse(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new Lse({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||Mse.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(t){let r=s=>{process.nextTick(()=>{s.handleError(t,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(t){let r=this,s=this.connection;if(this._connectionCallback=t,this._connecting||this._connected){let n=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{t(n)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{s._ending=!0,s.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?s.connect(this.host+"/.s.PGSQL."+this.port):s.connect(this.port,this.host),s.on("connect",function(){r.ssl?s.requestSsl():s.startup(r.getStartupConf())}),s.on("sslconnect",function(){s.startup(r.getStartupConf())}),this._attachListeners(s),s.once("end",()=>{let n=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(n),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(n):this._handleErrorEvent(n):this._connectionError||this._handleErrorEvent(n)),process.nextTick(()=>{this.emit("end")})})}connect(t){if(t){this._connect(t);return}return new this._Promise((r,s)=>{this._connect(n=>{n?s(n):r()})})}_attachListeners(t){t.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),t.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),t.on("authenticationSASL",this._handleAuthSASL.bind(this)),t.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),t.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),t.on("backendKeyData",this._handleBackendKeyData.bind(this)),t.on("error",this._handleErrorEvent.bind(this)),t.on("errorMessage",this._handleErrorMessage.bind(this)),t.on("readyForQuery",this._handleReadyForQuery.bind(this)),t.on("notice",this._handleNotice.bind(this)),t.on("rowDescription",this._handleRowDescription.bind(this)),t.on("dataRow",this._handleDataRow.bind(this)),t.on("portalSuspended",this._handlePortalSuspended.bind(this)),t.on("emptyQuery",this._handleEmptyQuery.bind(this)),t.on("commandComplete",this._handleCommandComplete.bind(this)),t.on("parseComplete",this._handleParseComplete.bind(this)),t.on("copyInResponse",this._handleCopyInResponse.bind(this)),t.on("copyData",this._handleCopyData.bind(this)),t.on("notification",this._handleNotification.bind(this))}_checkPgPass(t){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(s=>{if(s!==void 0){if(typeof s!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=s}else this.connectionParameters.password=this.password=null;t()}).catch(s=>{r.emit("error",s)});else if(this.password!==null)t();else try{eF()(this.connectionParameters,n=>{n!==void 0&&(this.connectionParameters.password=this.password=n),t()})}catch(s){this.emit("error",s)}}_handleAuthCleartextPassword(t){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(t){this._checkPgPass(async()=>{try{let r=await qse.postgresMd5PasswordHash(this.user,this.password,t.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(t){this._checkPgPass(()=>{try{this.saslSession=mv.startSession(t.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(t){try{await mv.continueSession(this.saslSession,this.password,t.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(t){try{mv.finalizeSession(this.saslSession,t.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(t){this.processID=t.processID,this.secretKey=t.secretKey}_handleReadyForQuery(t){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(t){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(t);this.emit("error",t)}}_handleErrorEvent(t){if(this._connecting)return this._handleErrorWhileConnecting(t);this._queryable=!1,this._errorAllQueries(t),this.emit("error",t)}_handleErrorMessage(t){if(this._connecting)return this._handleErrorWhileConnecting(t);let r=this.activeQuery;if(!r){this._handleErrorEvent(t);return}this.activeQuery=null,r.handleError(t,this.connection)}_handleRowDescription(t){this.activeQuery.handleRowDescription(t)}_handleDataRow(t){this.activeQuery.handleDataRow(t)}_handlePortalSuspended(t){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(t){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(t){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(t,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let t=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(t);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(t){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(t){this.activeQuery.handleCopyData(t,this.connection)}_handleNotification(t){this.emit("notification",t)}_handleNotice(t){this.emit("notice",t)}getStartupConf(){let t=this.connectionParameters,r={user:t.user,database:t.database},s=t.application_name||t.fallback_application_name;return s&&(r.application_name=s),t.replication&&(r.replication=""+t.replication),t.statement_timeout&&(r.statement_timeout=String(parseInt(t.statement_timeout,10))),t.lock_timeout&&(r.lock_timeout=String(parseInt(t.lock_timeout,10))),t.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(t.idle_in_transaction_session_timeout,10))),t.options&&(r.options=t.options),r}cancel(t,r){if(t.activeQuery===r){let s=this.connection;this.host&&this.host.indexOf("/")===0?s.connect(this.host+"/.s.PGSQL."+this.port):s.connect(this.port,this.host),s.on("connect",function(){s.cancel(t.processID,t.secretKey)})}else t.queryQueue.indexOf(r)!==-1&&t.queryQueue.splice(t.queryQueue.indexOf(r),1)}setTypeParser(t,r,s){return this._types.setTypeParser(t,r,s)}getTypeParser(t,r){return this._types.getTypeParser(t,r)}escapeIdentifier(t){return tF.escapeIdentifier(t)}escapeLiteral(t){return tF.escapeLiteral(t)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let t=this.activeQuery.submit(this.connection);t&&process.nextTick(()=>{this.activeQuery.handleError(t,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(t,r,s){let n,o,i,a,c;if(t==null)throw new TypeError("Client was passed a null or undefined query");return typeof t.submit=="function"?(i=t.query_timeout||this.connectionParameters.query_timeout,o=n=t,typeof r=="function"&&(n.callback=n.callback||r)):(i=t.query_timeout||this.connectionParameters.query_timeout,n=new rF(t,r,s),n.callback||(o=new this._Promise((d,u)=>{n.callback=(l,h)=>l?u(l):d(h)}).catch(d=>{throw Error.captureStackTrace(d),d}))),i&&(c=n.callback,a=setTimeout(()=>{let d=new Error("Query read timeout");process.nextTick(()=>{n.handleError(d,this.connection)}),c(d),n.callback=()=>{};let u=this.queryQueue.indexOf(n);u>-1&&this.queryQueue.splice(u,1),this._pulseQueryQueue()},i),n.callback=(d,u)=>{clearTimeout(a),c(d,u)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),o):(this.queryQueue.push(n),this._pulseQueryQueue(),o):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),o)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(t){if(this._ending=!0,!this.connection._connecting||this._ended)if(t)t();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),t)this.connection.once("end",t);else return new this._Promise(r=>{this.connection.once("end",r)})}};Zm.Query=rF;sF.exports=Zm});var cF=b((zbe,aF)=>{"use strict";var Fse=require("events").EventEmitter,oF=function(){},iF=(e,t)=>{let r=e.findIndex(t);return r===-1?void 0:e.splice(r,1)[0]},hv=class{constructor(t,r,s){this.client=t,this.idleListener=r,this.timeoutId=s}},ja=class{constructor(t){this.callback=t}};function $se(){throw new Error("Release called on client which has already been released to the pool.")}function eh(e,t){if(t)return{callback:t,result:void 0};let r,s,n=function(i,a){i?r(i):s(a)},o=new e(function(i,a){s=i,r=a}).catch(i=>{throw Error.captureStackTrace(i),i});return{callback:n,result:o}}function Use(e,t){return function r(s){s.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",s)}),e._remove(t),e.emit("error",s,t)}}var gv=class extends Fse{constructor(t,r){super(),this.options=Object.assign({},t),t!=null&&"password"in t&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),t!=null&&t.ssl&&t.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||yv().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let t=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let s=r.client;s.ref&&s.ref();let n=r.idleListener;return this._acquireClient(s,t,n,!1)}if(!this._isFull())return this.newClient(t);throw new Error("unexpected condition")}_remove(t,r){let s=iF(this._idle,o=>o.client===t);s!==void 0&&clearTimeout(s.timeoutId),this._clients=this._clients.filter(o=>o!==t);let n=this;t.end(()=>{n.emit("remove",t),typeof r=="function"&&r()})}connect(t){if(this.ending){let n=new Error("Cannot use a pool after calling end on the pool");return t?t(n):this.Promise.reject(n)}let r=eh(this.Promise,t),s=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new ja(r.callback)),s;let n=(a,c,d)=>{clearTimeout(i),r.callback(a,c,d)},o=new ja(n),i=setTimeout(()=>{iF(this._pendingQueue,a=>a.callback===n),o.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return i.unref&&i.unref(),this._pendingQueue.push(o),s}return this.newClient(new ja(r.callback)),s}newClient(t){let r=new this.Client(this.options);this._clients.push(r);let s=Use(this,r);this.log("checking client timeout");let n,o=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),o=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(i=>{if(n&&clearTimeout(n),r.on("error",s),i)this.log("client failed to connect",i),this._clients=this._clients.filter(a=>a!==r),o&&(i=new Error("Connection terminated due to connection timeout",{cause:i})),this._pulseQueue(),t.timedOut||t.callback(i,void 0,oF);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(d=>d.client===r)!==-1&&this._acquireClient(r,new ja((d,u,l)=>l()),s,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,t,s,!0)}})}_acquireClient(t,r,s,n){n&&this.emit("connect",t),this.emit("acquire",t),t.release=this._releaseOnce(t,s),t.removeListener("error",s),r.timedOut?n&&this.options.verify?this.options.verify(t,t.release):t.release():n&&this.options.verify?this.options.verify(t,o=>{if(o)return t.release(o),r.callback(o,void 0,oF);r.callback(void 0,t,t.release)}):r.callback(void 0,t,t.release)}_releaseOnce(t,r){let s=!1;return n=>{s&&$se(),s=!0,this._release(t,r,n)}}_release(t,r,s){if(t.on("error",r),t._poolUseCount=(t._poolUseCount||0)+1,this.emit("release",s,t),s||this.ending||!t._queryable||t._ending||t._poolUseCount>=this.options.maxUses)return t._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(t,this._pulseQueue.bind(this));if(this._expired.has(t))return this.log("remove expired client"),this._expired.delete(t),this._remove(t,this._pulseQueue.bind(this));let o;this.options.idleTimeoutMillis&&this._isAboveMin()&&(o=setTimeout(()=>{this.log("remove idle client"),this._remove(t,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&o.unref()),this.options.allowExitOnIdle&&t.unref(),this._idle.push(new hv(t,r,o)),this._pulseQueue()}query(t,r,s){if(typeof t=="function"){let o=eh(this.Promise,t);return setImmediate(function(){return o.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),o.result}typeof r=="function"&&(s=r,r=void 0);let n=eh(this.Promise,s);return s=n.callback,this.connect((o,i)=>{if(o)return s(o);let a=!1,c=d=>{a||(a=!0,i.release(d),s(d))};i.once("error",c),this.log("dispatching query");try{i.query(t,r,(d,u)=>{if(this.log("query dispatched"),i.removeListener("error",c),!a)return a=!0,i.release(d),d?s(d):s(void 0,u)})}catch(d){return i.release(d),s(d)}}),n.result}end(t){if(this.log("ending"),this.ending){let s=new Error("Called end on pool more than once");return t?t(s):this.Promise.reject(s)}this.ending=!0;let r=eh(this.Promise,t);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((t,r)=>t+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};aF.exports=gv});var lF=b((Vbe,uF)=>{"use strict";var dF=require("events").EventEmitter,jse=require("util"),Sv=Ma(),Ba=uF.exports=function(e,t,r){dF.call(this),e=Sv.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.queryMode=e.queryMode,this.callback=e.callback,this.state="new",this._arrayMode=e.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(s){s==="row"&&(this._emitRowEvents=!0)}.bind(this))};jse.inherits(Ba,dF);var Bse={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};Ba.prototype.handleError=function(e){let t=this.native.pq.resultErrorFields();if(t)for(let r in t){let s=Bse[r]||r;e[s]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"};Ba.prototype.then=function(e,t){return this._getPromise().then(e,t)};Ba.prototype.catch=function(e){return this._getPromise().catch(e)};Ba.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this)),this._promise)};Ba.prototype.submit=function(e){this.state="running";let t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;let r=function(s,n,o){if(e.native.arrayMode=!1,setImmediate(function(){t.emit("_done")}),s)return t.handleError(s);t._emitRowEvents&&(o.length>1?n.forEach((i,a)=>{i.forEach(c=>{t.emit("row",c,o[a])})}):n.forEach(function(i){t.emit("row",i,o)})),t.state="end",t.emit("end",o),t.callback&&t.callback(null,o)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let s=(this.values||[]).map(Sv.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let n=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(n)}return e.native.execute(this.name,s,r)}return e.native.prepare(this.name,this.text,s.length,function(n){return n?r(n):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,s,r))})}else if(this.values){if(!Array.isArray(this.values)){let n=new Error("Query values must be an array");return r(n)}let s=this.values.map(Sv.prepareValue);e.native.query(this.text,s,r)}else this.queryMode==="extended"?e.native.query(this.text,[],r):e.native.query(this.text,r)}});var gF=b((Gbe,hF)=>{"use strict";var fF;try{fF=require("pg-native")}catch(e){throw e}var Hse=zm(),pF=require("events").EventEmitter,zse=require("util"),Vse=Lb(),mF=lF(),or=hF.exports=function(e){pF.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new Hse(e.types),this.native=new fF({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let t=this.connectionParameters=new Vse(e);e.nativeConnectionString&&(t.nativeConnectionString=e.nativeConnectionString),this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};or.Query=mF;zse.inherits(or,pF);or.prototype._errorAllQueries=function(e){let t=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0};or.prototype._connect=function(e){let t=this;if(this._connecting){process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,s){if(t.connectionParameters.nativeConnectionString&&(s=t.connectionParameters.nativeConnectionString),r)return e(r);t.native.connect(s,function(n){if(n)return t.native.end(),e(n);t._connected=!0,t.native.on("error",function(o){t._queryable=!1,t._errorAllQueries(o),t.emit("error",o)}),t.native.on("notification",function(o){t.emit("notification",{channel:o.relname,payload:o.extra})}),t.emit("connect"),t._pulseQueryQueue(!0),e()})})};or.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((t,r)=>{this._connect(s=>{s?r(s):t()})})};or.prototype.query=function(e,t,r){let s,n,o,i,a;if(e==null)throw new TypeError("Client was passed a null or undefined query");if(typeof e.submit=="function")o=e.query_timeout||this.connectionParameters.query_timeout,n=s=e,typeof t=="function"&&(e.callback=t);else if(o=e.query_timeout||this.connectionParameters.query_timeout,s=new mF(e,t,r),!s.callback){let c,d;n=new this._Promise((u,l)=>{c=u,d=l}).catch(u=>{throw Error.captureStackTrace(u),u}),s.callback=(u,l)=>u?d(u):c(l)}return o&&(a=s.callback,i=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{s.handleError(c,this.connection)}),a(c),s.callback=()=>{};let d=this._queryQueue.indexOf(s);d>-1&&this._queryQueue.splice(d,1),this._pulseQueryQueue()},o),s.callback=(c,d)=>{clearTimeout(i),a(c,d)}),this._queryable?this._ending?(s.native=this.native,process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"))}),n):(this._queryQueue.push(s),this._pulseQueryQueue(),n):(s.native=this.native,process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"))}),n)};or.prototype.end=function(e){let t=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e));let r;return e||(r=new this._Promise(function(s,n){e=o=>o?n(o):s()})),this.native.end(function(){t._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{t.emit("end"),e&&e()})}),r};or.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};or.prototype._pulseQueryQueue=function(e){if(!this._connected||this._hasActiveQuery())return;let t=this._queryQueue.shift();if(!t){e||this.emit("drain");return}this._activeQuery=t,t.submit(this);let r=this;t.once("_done",function(){r._pulseQueryQueue()})};or.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):this._queryQueue.indexOf(e)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)};or.prototype.ref=function(){};or.prototype.unref=function(){};or.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)};or.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}});var _v=b((Wbe,yF)=>{"use strict";yF.exports=gF()});var yv=b((Kbe,cu)=>{"use strict";var Gse=nF(),Wse=ou(),Qse=uv(),Kse=Fb(),Jse=Ma(),Yse=cF(),Xse=zm(),{DatabaseError:Zse}=av(),{escapeIdentifier:ene,escapeLiteral:tne}=Ma(),rne=e=>class extends Yse{constructor(r){super(r,e)}},Ev=function(e){this.defaults=Wse,this.Client=e,this.Query=this.Client.Query,this.Pool=rne(this.Client),this._pools=[],this.Connection=Qse,this.types=nu(),this.DatabaseError=Zse,this.TypeOverrides=Xse,this.escapeIdentifier=ene,this.escapeLiteral=tne,this.Result=Kse,this.utils=Jse};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?cu.exports=new Ev(_v()):(cu.exports=new Ev(Gse),Object.defineProperty(cu.exports,"native",{configurable:!0,enumerable:!1,get(){let e=null;try{e=new Ev(_v())}catch(t){if(t.code!=="MODULE_NOT_FOUND")throw t}return Object.defineProperty(cu.exports,"native",{value:e}),e}}))});var LF=b(ir=>{"use strict";var hne=U(),bv=Dl(),vv=qe(),gne=e=>Object.assign(e,{useQueueUrlAsEndpoint:e.useQueueUrlAsEndpoint??!0});function AF({useQueueUrlAsEndpoint:e,endpoint:t}){return(r,s)=>async n=>{let{input:o}=n,i=s.endpointV2;if(!t&&o.QueueUrl&&i&&e){let a=s.logger instanceof hne.NoOpLogger||!s.logger?.warn?console:s.logger;try{let c=new URL(o.QueueUrl),d=new URL(c.origin);i.url.origin!==d.origin&&(a.warn(`QueueUrl=${o.QueueUrl} differs from SQSClient resolved endpoint=${i.url.toString()}, using QueueUrl host as endpoint.
Set [endpoint=string] or [useQueueUrlAsEndpoint=false] on the SQSClient.`),s.endpointV2={...i,url:d})}catch(c){a.warn(c)}}return r(n)}}var IF={name:"queueUrlMiddleware",relation:"after",toMiddleware:"endpointV2Middleware",override:!0},yne=e=>({applyToStack:t=>{t.addRelativeTo(AF(e),IF)}});function PF(e){return t=>async r=>{let s=await t({...r});if(e.md5===!1)return s;let n=s.output,o=[];if(n.Messages!==void 0)for(let i of n.Messages){let a=i.MD5OfBody,c=new e.md5;c.update(vv.toUint8Array(i.Body||"")),a!==bv.toHex(await c.digest())&&o.push(i.MessageId)}if(o.length>0)throw new Error("Invalid MD5 checksum on messages: "+o.join(", "));return s}}var NF={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"receiveMessageMiddleware",override:!0},Sne=e=>({applyToStack:t=>{t.add(PF(e),NF)}}),OF=e=>t=>async r=>{let s=await t({...r});if(e.md5===!1)return s;let n=s.output,o=new e.md5;if(o.update(vv.toUint8Array(r.input.MessageBody||"")),n.MD5OfMessageBody!==bv.toHex(await o.digest()))throw new Error("InvalidChecksumError");return s},kF={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"sendMessageMiddleware",override:!0},_ne=e=>({applyToStack:t=>{t.add(OF(e),kF)}}),DF=e=>t=>async r=>{let s=await t({...r});if(e.md5===!1)return s;let n=s.output,o=[],i={};if(n.Successful!==void 0)for(let a of n.Successful)a.Id!==void 0&&(i[a.Id]=a);for(let a of r.input.Entries)if(i[a.Id]){let c=i[a.Id].MD5OfMessageBody,d=new e.md5;d.update(vv.toUint8Array(a.MessageBody||"")),c!==bv.toHex(await d.digest())&&o.push(i[a.Id].MessageId)}if(o.length>0)throw new Error("Invalid MD5 checksum on messages: "+o.join(", "));return s},MF={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"sendMessageBatchMiddleware",override:!0},Ene=e=>({applyToStack:t=>{t.add(DF(e),MF)}});ir.getQueueUrlPlugin=yne;ir.getReceiveMessagePlugin=Sne;ir.getSendMessageBatchPlugin=Ene;ir.getSendMessagePlugin=_ne;ir.queueUrlMiddleware=AF;ir.queueUrlMiddlewareOptions=IF;ir.receiveMessageMiddleware=PF;ir.receiveMessageMiddlewareOptions=NF;ir.resolveQueueUrlConfig=gne;ir.sendMessageBatchMiddleware=DF;ir.sendMessageBatchMiddlewareOptions=MF;ir.sendMessageMiddleware=OF;ir.sendMessageMiddlewareOptions=kF});var ch,Ha,qF=S(()=>{ch={warningEmitted:!1},Ha=e=>{e&&!ch.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(ch.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function uo(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var FF=S(()=>{});function $F(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var UF=S(()=>{});function jF(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var BF=S(()=>{});var lo={};ct(lo,{emitWarningIfUnsupportedVersion:()=>Ha,setCredentialFeature:()=>uo,setFeature:()=>$F,setTokenFeature:()=>jF,state:()=>ch});var is=S(()=>{qF();FF();UF();BF()});var HF,xv,zF=S(()=>{HF=y(ye()),xv=e=>HF.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var za,Cv=S(()=>{za=e=>new Date(Date.now()+e)});var VF,GF=S(()=>{Cv();VF=(e,t)=>Math.abs(za(t).getTime()-e)>=3e5});var Rv,WF=S(()=>{GF();Rv=(e,t)=>{let r=Date.parse(e);return VF(r,t)?r-Date.now():t}});var Tv=S(()=>{zF();Cv();WF()});var QF,du,Va,ar,Av,Iv=S(()=>{QF=y(ye());Tv();du=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Va=async e=>{let t=du("context",e.context),r=du("config",e.config),s=t.endpointV2?.properties?.authSchemes?.[0],o=await du("signer",r.signer)(s),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}},ar=class{async sign(t,r,s){if(!QF.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let n=await Va(s),{config:o,signer:i}=n,{signingRegion:a,signingName:c}=n,d=s.context;if(d?.authSchemes?.length??!1){let[l,h]=d.authSchemes;l?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await i.sign(t,{signingDate:za(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let s=r.ServerTime??xv(r.$response);if(s){let n=du("config",t.config),o=n.systemClockOffset;n.systemClockOffset=Rv(s,n.systemClockOffset),n.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let s=xv(t);if(s){let n=du("config",r.config);n.systemClockOffset=Rv(s,n.systemClockOffset)}}},Av=ar});var KF,uu,JF=S(()=>{KF=y(ye());Tv();Iv();uu=class extends ar{async sign(t,r,s){if(!KF.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:n,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}=await Va(s),u=(await n.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(t,{signingDate:za(n.systemClockOffset),signingRegion:u,signingService:c})}}});var Pv,YF=S(()=>{Pv=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var dh,Nv=S(()=>{dh=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var XF,ZF,Ga,e$=S(()=>{YF();Nv();XF="AWS_AUTH_SCHEME_PREFERENCE",ZF="auth_scheme_preference",Ga={environmentVariableSelector:(e,t)=>{if(t?.signingName&&dh(t.signingName)in e)return["httpBearerAuth"];if(XF in e)return Pv(e[XF])},configFileSelector:e=>{if(ZF in e)return Pv(e[ZF])},default:[]}});var Ov,t$,r$,s$=S(()=>{De();Ov=y(Me()),t$=e=>(e.sigv4aSigningRegionSet=Ut(e.sigv4aSigningRegionSet),e),r$={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new Ov.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new Ov.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});function wne(e,{credentials:t,credentialDefaultProvider:r}){let s;return t?t?.memoized?s=t:s=zc(t,Hc,ji):r?s=Ut(r(Object.assign({},e,{parentClientConfig:e}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function bne(e,t){if(t.configBound)return t;let r=async s=>t({...s,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var kv,li,n$,o$=S(()=>{is();De();kv=y(D_()),li=e=>{let t=e.credentials,r=!!e.credentials,s;Object.defineProperty(e,"credentials",{set(d){d&&d!==t&&d!==s&&(r=!0),t=d;let u=wne(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),l=bne(e,u);r&&!l.attributed?(s=async h=>l(h).then(m=>uo(m,"CREDENTIALS_CODE","e")),s.memoized=l.memoized,s.configBound=l.configBound,s.attributed=!0):s=l},get(){return s},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=Ut(e.signer):e.regionInfoProvider?a=()=>Ut(e.region)().then(async d=>[await e.regionInfoProvider(d,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},d]).then(([d,u])=>{let{signingRegion:l,signingService:h}=d;e.signingRegion=e.signingRegion||l||u,e.signingName=e.signingName||h||e.serviceId;let m={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},g=e.signerConstructor||kv.SignatureV4;return new g(m)}):a=async d=>{d=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Ut(e.region)(),properties:{}},d);let u=d.signingRegion,l=d.signingName;e.signingRegion=e.signingRegion||u,e.signingName=e.signingName||l||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},m=e.signerConstructor||kv.SignatureV4;return new m(h)},Object.assign(e,{systemClockOffset:o,signingEscapePath:n,signer:a})},n$=li});var i$=S(()=>{Iv();JF();e$();s$();o$()});var a$={};ct(a$,{AWSSDKSigV4Signer:()=>Av,AwsSdkSigV4ASigner:()=>uu,AwsSdkSigV4Signer:()=>ar,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Ga,NODE_SIGV4A_CONFIG_OPTIONS:()=>r$,getBearerTokenEnvKey:()=>dh,resolveAWSSDKSigV4Config:()=>n$,resolveAwsSdkSigV4AConfig:()=>t$,resolveAwsSdkSigV4Config:()=>li,validateSigningProperties:()=>Va});var Dv=S(()=>{i$();Nv()});var Fr,Wa=S(()=>{_e();Fr=class{resolveRestContentType(t,r){let s=r.getMemberSchemas(),n=Object.values(s).find(o=>!!o.getMergedTraits().httpPayload);if(n){let o=n.getMergedTraits().mediaType;return o||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(s).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:d,httpLabel:u,httpPrefixHeaders:l}=i.getMergedTraits();return!a&&!c&&!d&&!u&&l===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,s,n,o,i){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let d={$metadata:o,$response:s,$fault:s.statusCode<500?"client":"server"},u=ve.for(a);try{return{errorSchema:i?.(u,c)??u.getSchema(t),errorMetadata:d}}catch{n.message=n.message??n.Message??"UnknownError";let h=ve.for("smithy.ts.sdk.synthetic."+a),m=h.getBaseException();if(m){let g=h.getErrorCtor(m)??Error;throw Object.assign(new g({name:c}),d,n)}throw Object.assign(new Error(c),d,n)}}setQueryCompatError(t,r){let s=r.headers?.["x-amzn-query-error"];if(t!==void 0&&s!=null){let[n,o]=s.split(";"),i=Object.entries(t),a={Code:n,Type:o};Object.assign(t,a);for(let[c,d]of i)a[c]=d;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var Mv,c$=S(()=>{Z_();_e();Wa();Mv=class extends Yi{awsQueryCompatible;mixin=new Fr;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),n}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=Ji(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u),m={};for(let[g,w]of d.structIterator())m[g]=this.deserializer.readValue(w,n[g]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}}});var vne,xne,Cne,d$=S(()=>{vne=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},xne=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},Cne=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var qt,fo=S(()=>{qt=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function u$(e,t,r){if(r?.source){let s=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||s!==String(t)))return s.includes(".")?new pe(s,"bigDecimal"):BigInt(s)}return t}var l$=S(()=>{dt()});var f$,p$,uh,Lv=S(()=>{f$=y(U()),p$=y(qe()),uh=(e,t)=>(0,f$.collectBody)(e,t).then(r=>(t?.utf8Encoder??p$.toUtf8)(r))});var Qa,qv,fi,lu=S(()=>{Lv();Qa=(e,t)=>uh(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(s){throw s?.name==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:r}),s}return{}}),qv=async(e,t)=>{let r=await Qa(e,t);return r.message=r.message??r.Message,r},fi=(e,t)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),s=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return s(e.headers[n]);if(t&&typeof t=="object"){let o=r(t,"code");if(o&&t[o]!==void 0)return s(t[o]);if(t.__type!==void 0)return s(t.__type)}}});var m$,fu,Fv=S(()=>{He();_e();dt();m$=y(Le());fo();l$();lu();fu=class extends qt{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,u$):await Qa(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let s=r!==null&&typeof r=="object",n=D.of(t);if(n.isListSchema()&&Array.isArray(r)){let i=n.getValueSchema(),a=[],c=!!n.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._read(i,d));return a}else if(n.isMapSchema()&&s){let i=n.getValueSchema(),a={},c=!!n.getMergedTraits().sparse;for(let[d,u]of Object.entries(r))(c||u!=null)&&(a[d]=this._read(i,u));return a}else if(n.isStructSchema()&&s){let i={};for(let[a,c]of n.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,u=this._read(c,r[d]);u!=null&&(i[a]=u)}return i}if(n.isBlobSchema()&&typeof r=="string")return(0,m$.fromBase64)(r);let o=n.getMergedTraits().mediaType;if(n.isStringSchema()&&typeof r=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return lt.from(r);if(n.isTimestampSchema()&&r!=null)switch(nt(n,this.settings)){case 5:return qc(r);case 6:return Fc(r);case 7:return $c(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(n.isBigDecimalSchema()&&r!=null){if(r instanceof pe)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new pe(i.string,i.type):new pe(String(r),"bigDecimal")}if(n.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(n.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof pe?i[a]=c:i[a]=this._read(n,c);return i}else return structuredClone(r);return r}}});var h$,lh,g$=S(()=>{dt();h$="\u039D",lh=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof pe){let s=`${h$+"nv"+this.counter++}_`+r.string;return this.values.set(`"${s}"`,r.string),s}if(typeof r=="bigint"){let s=r.toString(),n=`${h$+"b"+this.counter++}_`+s;return this.values.set(`"${n}"`,s),n}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,s]of this.values)t=t.replace(r,s);return t}}});var y$,pu,$v=S(()=>{He();_e();dt();y$=y(Le());fo();g$();pu=class extends qt{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=D.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=D.of(t).getName(!0))}flush(){let{rootSchema:t}=this;if(this.rootSchema=void 0,t?.isStructSchema()||t?.isDocumentSchema()){let r=new lh;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(t,r,s){let n=r!==null&&typeof r=="object",o=D.of(t);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._write(i,d));return a}else if(o.isMapSchema()&&n){let i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(let[d,u]of Object.entries(r))(c||u!=null)&&(a[d]=this._write(i,u));return a}else if(o.isStructSchema()&&n){let i={};for(let[a,c]of o.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,u=this._write(c,r[a],o);u!==void 0&&(i[d]=u)}return i}if(!(r===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||o.isDocumentSchema()&&r instanceof Uint8Array)return o===this.rootSchema?r:this.serdeContext?.base64Encoder?this.serdeContext?.base64Encoder(r):(0,y$.toBase64)(r);if((o.isTimestampSchema()||o.isDocumentSchema())&&r instanceof Date)switch(nt(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return Ho(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(o.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,Ot.v4)();let i=o.getMergedTraits().mediaType;if(r!=null&&i&&(i==="application/json"||i.endsWith("+json")))return lt.from(r)}if(o.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof pe?i[a]=c:i[a]=this._write(o,c);return i}else return structuredClone(r);return r}}}});var pi,fh=S(()=>{fo();Fv();$v();pi=class extends qt{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new pu(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new fu(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var mi,ph=S(()=>{He();_e();Wa();fh();lu();mi=class extends ur{serializer;deserializer;serviceTarget;codec;mixin=new Fr;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=new pi({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),(Bt(t.input)==="unit"||!n.body)&&(n.body="{}"),n}getPayloadCodec(){return this.codec}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=fi(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u),m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(w,n[C])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}}});var Uv,S$=S(()=>{ph();Uv=class extends mi{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var jv,_$=S(()=>{ph();jv=class extends mi{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Bv,E$=S(()=>{He();_e();Wa();fh();lu();Bv=class extends Jr{serializer;deserializer;codec;mixin=new Fr;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new pi(r),this.serializer=new Xr(this.codec.createSerializer(),r),this.deserializer=new Yr(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=D.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]&&!n.body&&(n.body="{}"),n}async handleError(t,r,s,n,o){let i=fi(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(w,n[C])}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}getDefaultContentType(){return"application/json"}}});var w$,Rne,b$=S(()=>{w$=y(U()),Rne=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,w$.expectUnion)(e)}});var v$,x$,C$,hi,mh=S(()=>{v$=y(Xo());He();_e();x$=y(U()),C$=y(qe());fo();hi=class extends qt{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new Hs(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,s){let n=D.of(t),o=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(o).find(d=>!!d.getMemberTraits().eventPayload)){let d={},u=Object.keys(o)[0];return o[u].isBlobSchema()?d[u]=r:d[u]=this.read(o[u],r),d}let a=(this.serdeContext?.utf8Encoder??C$.toUtf8)(r),c=this.parseXml(a);return this.readSchema(t,s?c[s]:c)}readSchema(t,r){let s=D.of(t);if(s.isUnitSchema())return;let n=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(r))return this.readSchema(s,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!n.sparse,i=!!n.xmlFlattened;if(s.isListSchema()){let c=s.getValueSchema(),d=[],u=c.getMergedTraits().xmlName??"member",l=i?r:(r[0]??r)[u],h=Array.isArray(l)?l:[l];for(let m of h)(m!=null||o)&&d.push(this.readSchema(c,m));return d}let a={};if(s.isMapSchema()){let c=s.getKeySchema(),d=s.getValueSchema(),u;i?u=Array.isArray(r)?r:[r]:u=Array.isArray(r.entry)?r.entry:[r.entry];let l=c.getMergedTraits().xmlName??"key",h=d.getMergedTraits().xmlName??"value";for(let m of u){let g=m[l],w=m[h];(w!=null||o)&&(a[g]=this.readSchema(d,w))}return a}if(s.isStructSchema()){for(let[c,d]of s.structIterator()){let u=d.getMergedTraits(),l=u.httpPayload?u.xmlName??d.getName():d.getMemberTraits().xmlName??c;r[l]!=null&&(a[c]=this.readSchema(d,r[l]))}return a}if(s.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,r)}parseXml(t){if(t.length){let r;try{r=(0,v$.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let s="#text",n=Object.keys(r)[0],o=r[n];return o[s]&&(o[n]=o[s],delete o[s]),(0,x$.getValueFromTextNode)(o)}return{}}}});var R$,T$,hh,A$=S(()=>{He();_e();dt();R$=y(U()),T$=y(Le());fo();hh=class extends qt{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,s=""){this.buffer===void 0&&(this.buffer="");let n=D.of(t);if(s&&!s.endsWith(".")&&(s+="."),n.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??T$.toBase64)(r)));else if(n.isBooleanSchema()||n.isNumericSchema()||n.isStringSchema())r!=null?(this.writeKey(s),this.writeValue(String(r))):n.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,Ot.v4)()));else if(n.isBigIntegerSchema())r!=null&&(this.writeKey(s),this.writeValue(String(r)));else if(n.isBigDecimalSchema())r!=null&&(this.writeKey(s),this.writeValue(r instanceof pe?r.string:String(r)));else if(n.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(s),nt(n,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,R$.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(n.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${n.getName(!0)}`);if(n.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let o=n.getValueSchema(),i=this.settings.flattenLists||n.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let d=this.getKey("member",o.getMergedTraits().xmlName),u=i?`${s}${a}`:`${s}${d}.${a}`;this.write(o,c,u),++a}}}else if(n.isMapSchema()){if(r&&typeof r=="object"){let o=n.getKeySchema(),i=n.getValueSchema(),a=n.getMergedTraits().xmlFlattened,c=1;for(let[d,u]of Object.entries(r)){if(u==null)continue;let l=this.getKey("key",o.getMergedTraits().xmlName),h=a?`${s}${c}.${l}`:`${s}entry.${c}.${l}`,m=this.getKey("value",i.getMergedTraits().xmlName),g=a?`${s}${c}.${m}`:`${s}entry.${c}.${m}`;this.write(o,d,h),this.write(i,u,g),++c}}}else if(n.isStructSchema()){if(r&&typeof r=="object")for(let[o,i]of n.structIterator()){if(r[o]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(o,i.getMergedTraits().xmlName),c=`${s}${a}`;this.write(i,r[o],c)}}else if(!n.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${n.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let s=r??t;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${dr(t)}=`}writeValue(t){this.buffer+=dr(t)}}});var mu,Hv=S(()=>{He();_e();Wa();mh();A$();mu=class extends ur{options;serializer;deserializer;mixin=new Fr;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new hh(r),this.deserializer=new hi(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":"application/x-www-form-urlencoded"}),(Bt(t.input)==="unit"||!n.body)&&(n.body="");let o=t.name.split("#")[1]??t.name;return n.body=`Action=${o}&Version=${this.options.version}`+n.body,n.body.endsWith("&")&&(n.body=n.body.slice(-1)),n}async deserializeResponse(t,r,s){let n=this.deserializer,o=D.of(t.output),i={};if(s.statusCode>=300){let l=await Kt(s.body,r);l.byteLength>0&&Object.assign(i,await n.read(15,l)),await this.handleError(t,r,s,i,this.deserializeMetadata(s))}for(let l in s.headers){let h=s.headers[l];delete s.headers[l],s.headers[l.toLowerCase()]=h}let a=t.name.split("#")[1]??t.name,c=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,d=await Kt(s.body,r);return d.byteLength>0&&Object.assign(i,await n.read(o,d,c)),{$metadata:this.deserializeMetadata(s),...i}}useNestedResult(){return!0}async handleError(t,r,s,n,o){let i=this.loadQueryErrorCode(s,n)??"Unknown",a=this.loadQueryError(n),c=this.loadQueryErrorMessage(n);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:d,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,a,o,(w,C)=>w.find(T=>D.of(T).getMergedTraits().awsQueryError?.[0]===C)),l=D.of(d),h=ve.for(d[1]).getErrorCtor(d)??Error,m=new h(c),g={Error:a.Error};for(let[w,C]of l.structIterator()){let T=C.getMergedTraits().xmlName??w,N=a[T]??n[T];g[w]=this.deserializer.readSchema(C,N)}throw Object.assign(m,u,{$fault:l.getMergedTraits().error,message:c},g)}loadQueryErrorCode(t,r){let s=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(s!==void 0)return s;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var zv,I$=S(()=>{Hv();zv=class extends mu{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var P$,N$,hu,Vv,Gv,Wv=S(()=>{P$=y(Xo()),N$=y(U());Lv();hu=(e,t)=>uh(e,t).then(r=>{if(r.length){let s;try{s=(0,P$.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let n="#text",o=Object.keys(s)[0],i=s[o];return i[n]&&(i[o]=i[n],delete i[n]),(0,N$.getValueFromTextNode)(i)}return{}}),Vv=async(e,t)=>{let r=await hu(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Gv=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var $r,Qv,gh,gu,Kv=S(()=>{$r=y(Xo());He();_e();dt();Qv=y(U()),gh=y(Le());fo();gu=class extends qt{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let s=D.of(t);if(s.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(s.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??gh.fromBase64)(r);else{this.buffer=this.writeStruct(s,r,void 0);let n=s.getMergedTraits();n.httpPayload&&!n.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,s){let n=t.getMergedTraits(),o=t.isMemberSchema()&&!n.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():n.xmlName??t.getName();if(!o||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=$r.XmlNode.of(o),[a,c]=this.getXmlnsAttribute(t,s);for(let[d,u]of t.structIterator()){let l=r[d];if(l!=null||u.isIdempotencyToken()){if(u.getMergedTraits().xmlAttribute){i.addAttribute(u.getMergedTraits().xmlName??d,this.writeSimple(u,l));continue}if(u.isListSchema())this.writeList(u,l,i,c);else if(u.isMapSchema())this.writeMap(u,l,i,c);else if(u.isStructSchema())i.addChildNode(this.writeStruct(u,l,c));else{let h=$r.XmlNode.of(u.getMergedTraits().xmlName??u.getMemberName());this.writeSimpleInto(u,l,h,c),i.addChildNode(h)}}}return c&&i.addAttribute(a,c),i}writeList(t,r,s,n){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let o=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),c=!!a.sparse,d=!!o.xmlFlattened,[u,l]=this.getXmlnsAttribute(t,n),h=(m,g)=>{if(i.isListSchema())this.writeList(i,Array.isArray(g)?g:[g],m,l);else if(i.isMapSchema())this.writeMap(i,g,m,l);else if(i.isStructSchema()){let w=this.writeStruct(i,g,l);m.addChildNode(w.withName(d?o.xmlName??t.getMemberName():a.xmlName??"member"))}else{let w=$r.XmlNode.of(d?o.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,g,w,l),m.addChildNode(w)}};if(d)for(let m of r)(c||m!=null)&&h(s,m);else{let m=$r.XmlNode.of(o.xmlName??t.getMemberName());l&&m.addAttribute(u,l);for(let g of r)(c||g!=null)&&h(m,g);s.addChildNode(m)}}writeMap(t,r,s,n,o=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),d=a.getMergedTraits().xmlName??"key",u=t.getValueSchema(),l=u.getMergedTraits(),h=l.xmlName??"value",m=!!l.sparse,g=!!i.xmlFlattened,[w,C]=this.getXmlnsAttribute(t,n),T=(N,B,V)=>{let Z=$r.XmlNode.of(d,B),[we,Oe]=this.getXmlnsAttribute(a,C);Oe&&Z.addAttribute(we,Oe),N.addChildNode(Z);let te=$r.XmlNode.of(h);u.isListSchema()?this.writeList(u,V,te,C):u.isMapSchema()?this.writeMap(u,V,te,C,!0):u.isStructSchema()?te=this.writeStruct(u,V,C):this.writeSimpleInto(u,V,te,C),N.addChildNode(te)};if(g){for(let[N,B]of Object.entries(r))if(m||B!=null){let V=$r.XmlNode.of(i.xmlName??t.getMemberName());T(V,N,B),s.addChildNode(V)}}else{let N;o||(N=$r.XmlNode.of(i.xmlName??t.getMemberName()),C&&N.addAttribute(w,C),s.addChildNode(N));for(let[B,V]of Object.entries(r))if(m||V!=null){let Z=$r.XmlNode.of("entry");T(Z,B,V),(o?s:N).addChildNode(Z)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=D.of(t),n=null;if(r&&typeof r=="object")if(s.isBlobSchema())n=(this.serdeContext?.base64Encoder??gh.toBase64)(r);else if(s.isTimestampSchema()&&r instanceof Date)switch(nt(s,this.settings)){case 5:n=r.toISOString().replace(".000Z","Z");break;case 6:n=(0,Qv.dateToUtcString)(r);break;case 7:n=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),n=(0,Qv.dateToUtcString)(r);break}else{if(s.isBigDecimalSchema()&&r)return r instanceof pe?r.string:String(r);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(n=String(r)),s.isStringSchema()&&(r===void 0&&s.isIdempotencyToken()?n=(0,Ot.v4)():n=String(r)),n===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${r}`);return n}writeSimpleInto(t,r,s,n){let o=this.writeSimple(t,r),i=D.of(t),a=new $r.XmlText(o),[c,d]=this.getXmlnsAttribute(i,n);d&&s.addAttribute(c,d),s.addChildNode(a)}getXmlnsAttribute(t,r){let s=t.getMergedTraits(),[n,o]=s.xmlNamespace??[];return o&&o!==r?[n?`xmlns:${n}`:"xmlns",o]:[void 0,void 0]}}});var yu,Jv=S(()=>{fo();mh();Kv();yu=class extends qt{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new gu(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new hi(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var Yv,O$=S(()=>{He();_e();Wa();Wv();Jv();Yv=class extends Jr{codec;serializer;deserializer;mixin=new Fr;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new yu(r),this.serializer=new Xr(this.codec.createSerializer(),r),this.deserializer=new Yr(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=D.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]===this.getDefaultContentType()&&typeof n.body=="string"&&(n.body='<?xml version="1.0" encoding="UTF-8"?>'+n.body),n}async deserializeResponse(t,r,s){return super.deserializeResponse(t,r,s)}async handleError(t,r,s,n,o){let i=Gv(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),u=n.Error?.message??n.Error?.Message??n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().xmlName??g,T=n.Error?.[C]??n[C];m[g]=this.codec.createDeserializer().readSchema(w,T)}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}getDefaultContentType(){return"application/xml"}}});var k$=S(()=>{c$();d$();S$();_$();ph();E$();fh();Fv();$v();b$();lu();I$();Hv();O$();Jv();mh();Kv();Wv()});var xs={};ct(xs,{AWSSDKSigV4Signer:()=>Av,AwsEc2QueryProtocol:()=>zv,AwsJson1_0Protocol:()=>Uv,AwsJson1_1Protocol:()=>jv,AwsJsonRpcProtocol:()=>mi,AwsQueryProtocol:()=>mu,AwsRestJsonProtocol:()=>Bv,AwsRestXmlProtocol:()=>Yv,AwsSdkSigV4ASigner:()=>uu,AwsSdkSigV4Signer:()=>ar,AwsSmithyRpcV2CborProtocol:()=>Mv,JsonCodec:()=>pi,JsonShapeDeserializer:()=>fu,JsonShapeSerializer:()=>pu,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Ga,NODE_SIGV4A_CONFIG_OPTIONS:()=>r$,XmlCodec:()=>yu,XmlShapeDeserializer:()=>hi,XmlShapeSerializer:()=>gu,_toBool:()=>xne,_toNum:()=>Cne,_toStr:()=>vne,awsExpectUnion:()=>Rne,emitWarningIfUnsupportedVersion:()=>Ha,getBearerTokenEnvKey:()=>dh,loadRestJsonErrorCode:()=>fi,loadRestXmlErrorCode:()=>Gv,parseJsonBody:()=>Qa,parseJsonErrorBody:()=>qv,parseXmlBody:()=>hu,parseXmlErrorBody:()=>Vv,resolveAWSSDKSigV4Config:()=>n$,resolveAwsSdkSigV4AConfig:()=>t$,resolveAwsSdkSigV4Config:()=>li,setCredentialFeature:()=>uo,setFeature:()=>$F,setTokenFeature:()=>jF,state:()=>ch,validateSigningProperties:()=>Va});var St=S(()=>{is();Dv();k$()});var Ja=b(Ka=>{"use strict";var Tne=(De(),Q(ms)),Ane=rs(),Ine=ye(),Cs=(St(),Q(xs)),q$=void 0;function Pne(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function Nne(e){let t=Tne.normalizeProvider(e.userAgentAppId??q$),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let s=await t();if(!Pne(s)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof s!="string"?n?.warn("userAgentAppId must be a string or undefined."):s.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return s}})}var One=/\d{12}\.ddb/;async function kne(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Cs.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?Cs.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):Cs.setFeature(e,"RETRY_MODE_STANDARD","E"):Cs.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let o=e.endpointV2;switch(String(o?.url?.hostname).match(One)&&Cs.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Cs.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Cs.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Cs.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let o=n;o.accountId&&Cs.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))Cs.setFeature(e,i,a)}}var D$="user-agent",Xv="x-amz-user-agent",M$=" ",Zv="/",Dne=/[^!$%&'*+\-.^_`|~\w]/g,Mne=/[^!$%&'*+\-.^_`|~\w#]/g,L$="-",Lne=1024;function qne(e){let t="";for(let r in e){let s=e[r];if(t.length+s.length+1<=Lne){t.length?t+=","+s:t+=s;continue}break}return t}var F$=e=>(t,r)=>async s=>{let{request:n}=s;if(!Ine.HttpRequest.isInstance(n))return t(s);let{headers:o}=n,i=r?.userAgent?.map(yh)||[],a=(await e.defaultUserAgentProvider()).map(yh);await kne(r,e,s);let c=r;a.push(`m/${qne(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let d=e?.customUserAgent?.map(yh)||[],u=await e.userAgentAppId();u&&a.push(yh(["app",`${u}`]));let l=Ane.getUserAgentPrefix(),h=(l?[l]:[]).concat([...a,...i,...d]).join(M$),m=[...a.filter(g=>g.startsWith("aws-sdk-")),...d].join(M$);return e.runtime!=="browser"?(m&&(o[Xv]=o[Xv]?`${o[D$]} ${m}`:m),o[D$]=h):o[Xv]=h,t({...s,request:n})},yh=e=>{let t=e[0].split(Zv).map(i=>i.replace(Dne,L$)).join(Zv),r=e[1]?.replace(Mne,L$),s=t.indexOf(Zv),n=t.substring(0,s),o=t.substring(s+1);return n==="api"&&(o=o.toLowerCase()),[n,o,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},$$={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Fne=e=>({applyToStack:t=>{t.add(F$(e),$$)}});Ka.DEFAULT_UA_APP_ID=q$;Ka.getUserAgentMiddlewareOptions=$$;Ka.getUserAgentPlugin=Fne;Ka.resolveUserAgentConfig=Nne;Ka.userAgentMiddleware=F$});var tx=b(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.resolveHttpAuthSchemeConfig=po.defaultSQSHttpAuthSchemeProvider=po.defaultSQSHttpAuthSchemeParametersProvider=void 0;var $ne=(St(),Q(xs)),ex=mt(),Une=async(e,t,r)=>({operation:(0,ex.getSmithyContext)(t).operation,region:await(0,ex.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});po.defaultSQSHttpAuthSchemeParametersProvider=Une;function jne(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sqs",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var Bne=e=>{let t=[];switch(e.operation){default:t.push(jne(e))}return t};po.defaultSQSHttpAuthSchemeProvider=Bne;var Hne=e=>{let t=(0,$ne.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,ex.normalizeProvider)(e.authSchemePreference??[])})};po.resolveHttpAuthSchemeConfig=Hne});var U$=b((yRe,zne)=>{zne.exports={name:"@aws-sdk/client-sqs",description:"AWS SDK for JavaScript Sqs Client for Node.js, Browser and React Native",version:"3.922.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sqs","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sqs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.922.0","@aws-sdk/credential-provider-node":"3.922.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-sdk-sqs":"3.922.0","@aws-sdk/middleware-user-agent":"3.922.0","@aws-sdk/region-config-resolver":"3.922.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.922.0","@smithy/config-resolver":"^4.4.1","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/md5-js":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.7","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sqs",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sqs"}}});var rx=b(mo=>{"use strict";var Vne=(is(),Q(lo)),Gne=Me(),j$="AWS_ACCESS_KEY_ID",B$="AWS_SECRET_ACCESS_KEY",H$="AWS_SESSION_TOKEN",z$="AWS_CREDENTIAL_EXPIRATION",V$="AWS_CREDENTIAL_SCOPE",G$="AWS_ACCOUNT_ID",Wne=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[j$],r=process.env[B$],s=process.env[H$],n=process.env[z$],o=process.env[V$],i=process.env[G$];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...s&&{sessionToken:s},...n&&{expiration:new Date(n)},...o&&{credentialScope:o},...i&&{accountId:i}};return Vne.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new Gne.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};mo.ENV_ACCOUNT_ID=G$;mo.ENV_CREDENTIAL_SCOPE=V$;mo.ENV_EXPIRATION=z$;mo.ENV_KEY=j$;mo.ENV_SECRET=B$;mo.ENV_SESSION=H$;mo.fromEnv=Wne});var W$=b(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});Sh.checkUrl=void 0;var Qne=Me(),Kne="169.254.170.2",Jne="169.254.170.23",Yne="[fd00:ec2::23]",Xne=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===Kne||e.hostname===Jne||e.hostname===Yne)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),s=n=>{let o=parseInt(n,10);return 0<=o&&o<=255};if(r[0]==="127"&&s(r[1])&&s(r[2])&&s(r[3])&&r.length===4)return}throw new Qne.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};Sh.checkUrl=Xne});var Q$=b(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.createGetRequest=roe;_h.getCredentials=soe;var sx=Me(),Zne=ye(),eoe=U(),toe=Ic();function roe(e){return new Zne.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,s])=>(t[r]=s,t),{}),fragment:e.hash})}async function soe(e,t){let s=await(0,toe.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let n=JSON.parse(s);if(typeof n.AccessKeyId!="string"||typeof n.SecretAccessKey!="string"||typeof n.Token!="string"||typeof n.Expiration!="string")throw new sx.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:(0,eoe.parseRfc3339DateTime)(n.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let n={};try{n=JSON.parse(s)}catch{}throw Object.assign(new sx.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:n.Code,Message:n.Message})}throw new sx.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var K$=b(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});Eh.retryWrapper=void 0;var noe=(e,t,r)=>async()=>{for(let s=0;s<t;++s)try{return await e()}catch{await new Promise(o=>setTimeout(o,r))}return await e()};Eh.retryWrapper=noe});var X$=b(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.fromHttp=void 0;var ooe=(Tn(),Q(Rn)),ioe=(is(),Q(lo)),aoe=br(),J$=Me(),coe=ooe.__importDefault(require("fs/promises")),doe=W$(),Y$=Q$(),uoe=K$(),loe="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",foe="http://169.254.170.2",poe="AWS_CONTAINER_CREDENTIALS_FULL_URI",moe="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",hoe="AWS_CONTAINER_AUTHORIZATION_TOKEN",goe=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[loe],s=e.awsContainerCredentialsFullUri??process.env[poe],n=e.awsContainerAuthorizationToken??process.env[hoe],o=e.awsContainerAuthorizationTokenFile??process.env[moe],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),n&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),s)t=s;else if(r)t=`${foe}${r}`;else throw new J$.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,doe.checkUrl)(a,e.logger);let c=aoe.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,uoe.retryWrapper)(async()=>{let d=(0,Y$.createGetRequest)(a);n?d.headers.Authorization=n:o&&(d.headers.Authorization=(await coe.default.readFile(o)).toString());try{let u=await c.handle(d);return(0,Y$.getCredentials)(u.response).then(l=>(0,ioe.setCredentialFeature)(l,"CREDENTIALS_HTTP","z"))}catch(u){throw new J$.CredentialsProviderError(String(u),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};wh.fromHttp=goe});var nx=b(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.fromHttp=void 0;var yoe=X$();Object.defineProperty(bh,"fromHttp",{enumerable:!0,get:function(){return yoe.fromHttp}})});function Soe(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function _oe(e){return{schemeId:"smithy.api#noAuth"}}var Su,Z$,eU,tU,ox=S(()=>{St();Su=y(mt()),Z$=async(e,t,r)=>({operation:(0,Su.getSmithyContext)(t).operation,region:await(0,Su.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});eU=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(_oe(e));break}default:t.push(Soe(e))}return t},tU=e=>{let t=li(e);return Object.assign(t,{authSchemePreference:(0,Su.normalizeProvider)(e.authSchemePreference??[])})}});var rU,sU,ix=S(()=>{rU=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),sU={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var vh,ax=S(()=>{vh={name:"@aws-sdk/nested-clients",version:"3.922.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.922.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.922.0","@aws-sdk/region-config-resolver":"3.922.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.922.0","@smithy/config-resolver":"^4.4.1","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.7","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var _u=b(gi=>{"use strict";var nU=require("os"),cx=require("process"),woe=Ja(),oU={isCrtAvailable:!1},boe=()=>oU.isCrtAvailable?["md/crt-avail"]:null,iU=({serviceId:e,clientVersion:t})=>async r=>{let s=[["aws-sdk-js",t],["ua","2.1"],[`os/${nU.platform()}`,nU.release()],["lang/js"],["md/nodejs",`${cx.versions.node}`]],n=boe();n&&s.push(n),e&&s.push([`api/${e}`,t]),cx.env.AWS_EXECUTION_ENV&&s.push([`exec-env/${cx.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...s,[`app/${o}`]]:[...s]},voe=iU,aU="AWS_SDK_UA_APP_ID",cU="sdk_ua_app_id",xoe="sdk-ua-app-id",Coe={environmentVariableSelector:e=>e[aU],configFileSelector:e=>e[cU]??e[xoe],default:woe.DEFAULT_UA_APP_ID};gi.NODE_APP_ID_CONFIG_OPTIONS=Coe;gi.UA_APP_ID_ENV_NAME=aU;gi.UA_APP_ID_INI_NAME=cU;gi.createDefaultUserAgentProvider=iU;gi.crtAvailability=oU;gi.defaultUserAgent=voe});var SU,jr,dU,Eu,Ya,Xa,un,dx,ux,uU,lU,fU,_U,EU,Ur,pU,wU,mU,hU,gU,yU,Roe,bU,vU=S(()=>{SU="required",jr="argv",dU="isSet",Eu="booleanEquals",Ya="error",Xa="endpoint",un="tree",dx="PartitionResult",ux="getAttr",uU={[SU]:!1,type:"string"},lU={[SU]:!0,default:!1,type:"boolean"},fU={ref:"Endpoint"},_U={fn:Eu,[jr]:[{ref:"UseFIPS"},!0]},EU={fn:Eu,[jr]:[{ref:"UseDualStack"},!0]},Ur={},pU={fn:ux,[jr]:[{ref:dx},"supportsFIPS"]},wU={ref:dx},mU={fn:Eu,[jr]:[!0,{fn:ux,[jr]:[wU,"supportsDualStack"]}]},hU=[_U],gU=[EU],yU=[{ref:"Region"}],Roe={version:"1.0",parameters:{Region:uU,UseDualStack:lU,UseFIPS:lU,Endpoint:uU},rules:[{conditions:[{fn:dU,[jr]:[fU]}],rules:[{conditions:hU,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ya},{conditions:gU,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ya},{endpoint:{url:fU,properties:Ur,headers:Ur},type:Xa}],type:un},{conditions:[{fn:dU,[jr]:yU}],rules:[{conditions:[{fn:"aws.partition",[jr]:yU,assign:dx}],rules:[{conditions:[_U,EU],rules:[{conditions:[{fn:Eu,[jr]:[!0,pU]},mU],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ur,headers:Ur},type:Xa}],type:un},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ya}],type:un},{conditions:hU,rules:[{conditions:[{fn:Eu,[jr]:[pU,!0]}],rules:[{conditions:[{fn:"stringEquals",[jr]:[{fn:ux,[jr]:[wU,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Ur,headers:Ur},type:Xa},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ur,headers:Ur},type:Xa}],type:un},{error:"FIPS is enabled but this partition does not support FIPS",type:Ya}],type:un},{conditions:gU,rules:[{conditions:[mU],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ur,headers:Ur},type:Xa}],type:un},{error:"DualStack is enabled but this partition does not support DualStack",type:Ya}],type:un},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Ur,headers:Ur},type:Xa}],type:un}],type:un},{error:"Invalid Configuration: Missing Region",type:Ya}]},bU=Roe});var xU,Za,Toe,CU,RU=S(()=>{xU=y(rs()),Za=y(es());vU();Toe=new Za.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),CU=(e,t={})=>Toe.get(e,()=>(0,Za.resolveEndpoint)(bU,{endpointParams:e,logger:t.logger}));Za.customEndpointFunctions.aws=xU.awsEndpointFunctions});var TU,AU,xh,Ch,IU,PU=S(()=>{St();De();TU=y(U()),AU=y(vr()),xh=y(Le()),Ch=y(qe());ox();RU();IU=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??xh.fromBase64,base64Encoder:e?.base64Encoder??xh.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??CU,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??eU,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ar},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new zt}],logger:e?.logger??new TU.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??AU.parseUrl,utf8Decoder:e?.utf8Decoder??Ch.fromUtf8,utf8Encoder:e?.utf8Encoder??Ch.toUtf8})});var Rh,go,NU,Th,ho,Ah,OU,kU,DU,MU,LU,qU,FU=S(()=>{ax();St();Rh=y(_u()),go=y(Ze()),NU=y(Xs()),Th=y(vt()),ho=y(Xt()),Ah=y(br()),OU=y(Zs()),kU=y(ys());PU();DU=y(U()),MU=y(tn()),LU=y(U()),qU=e=>{(0,LU.emitWarningIfUnsupportedVersion)(process.version);let t=(0,MU.resolveDefaultsModeConfig)(e),r=()=>t().then(DU.loadConfigsForDefaultMode),s=IU(e);Ha(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,ho.loadConfig)(Ga,n),bodyLengthChecker:e?.bodyLengthChecker??OU.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Rh.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:vh.version}),maxAttempts:e?.maxAttempts??(0,ho.loadConfig)(Th.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,ho.loadConfig)(go.NODE_REGION_CONFIG_OPTIONS,{...go.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:Ah.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,ho.loadConfig)({...Th.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||kU.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??NU.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Ah.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ho.loadConfig)(go.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,ho.loadConfig)(go.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,ho.loadConfig)(Rh.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var UU=b(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.warning=void 0;ec.stsRegionDefaultResolver=Ioe;var $U=Ze(),Aoe=Xt();function Ioe(e={}){return(0,Aoe.loadConfig)({...$U.NODE_REGION_CONFIG_OPTIONS,async default(){return ec.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...$U.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}ec.warning={silence:!1}});var tc=b(Rs=>{"use strict";var wu=Ze(),jU=UU(),Poe=e=>({setRegion(t){e.region=t},region(){return e.region}}),Noe=e=>({region:e.region()});Object.defineProperty(Rs,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return wu.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Rs,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return wu.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Rs,"REGION_ENV_NAME",{enumerable:!0,get:function(){return wu.REGION_ENV_NAME}});Object.defineProperty(Rs,"REGION_INI_NAME",{enumerable:!0,get:function(){return wu.REGION_INI_NAME}});Object.defineProperty(Rs,"resolveRegionConfig",{enumerable:!0,get:function(){return wu.resolveRegionConfig}});Rs.getAwsRegionExtensionConfiguration=Poe;Rs.resolveAwsRegionExtensionConfiguration=Noe;Object.keys(jU).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Rs,e)&&Object.defineProperty(Rs,e,{enumerable:!0,get:function(){return jU[e]}})})});var BU,HU,zU=S(()=>{BU=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},HU=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Ih,Ph,Nh,VU,GU=S(()=>{Ih=y(tc()),Ph=y(ye()),Nh=y(U());zU();VU=(e,t)=>{let r=Object.assign((0,Ih.getAwsRegionExtensionConfiguration)(e),(0,Nh.getDefaultExtensionConfiguration)(e),(0,Ph.getHttpHandlerExtensionConfiguration)(e),BU(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,Ih.resolveAwsRegionExtensionConfiguration)(r),(0,Nh.resolveDefaultRuntimeConfig)(r),(0,Ph.resolveHttpHandlerRuntimeConfig)(r),HU(r))}});var Oh,WU,QU,kh,KU,JU,YU,Dh,lx,bu,fx=S(()=>{Oh=y(Ms()),WU=y(Ls()),QU=y(qs()),kh=y(Ja()),KU=y(Ze());De();JU=y(Js()),YU=y(Gt()),Dh=y(vt()),lx=y(U());ox();ix();FU();GU();bu=class extends lx.Client{config;constructor(...[t]){let r=qU(t||{});super(r),this.initConfig=r;let s=rU(r),n=(0,kh.resolveUserAgentConfig)(s),o=(0,Dh.resolveRetryConfig)(n),i=(0,KU.resolveRegionConfig)(o),a=(0,Oh.resolveHostHeaderConfig)(i),c=(0,YU.resolveEndpointConfig)(a),d=tU(c),u=VU(d,t?.extensions||[]);this.config=u,this.middlewareStack.use((0,kh.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Dh.getRetryPlugin)(this.config)),this.middlewareStack.use((0,JU.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Oh.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,WU.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,QU.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Fs(this.config,{httpAuthSchemeParametersProvider:Z$,identityProviderConfigProvider:async l=>new Zr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use($s(this.config))}destroy(){super.destroy()}}});var XU,_t,Mh=S(()=>{XU=y(U()),_t=class e extends XU.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var yi,Ooe,vu,xu,px,mx,Cu,Ru,Tu,Au,koe,Iu,Pu,Nu,Ou,ku,Lh=S(()=>{yi=y(U());Mh();Ooe={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},vu=class e extends _t{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},xu=class e extends _t{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},px=e=>({...e,...e.clientSecret&&{clientSecret:yi.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:yi.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:yi.SENSITIVE_STRING}}),mx=e=>({...e,...e.accessToken&&{accessToken:yi.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:yi.SENSITIVE_STRING},...e.idToken&&{idToken:yi.SENSITIVE_STRING}}),Cu=class e extends _t{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ru=class e extends _t{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Tu=class e extends _t{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Au=class e extends _t{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},koe={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},Iu=class e extends _t{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Pu=class e extends _t{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Nu=class e extends _t{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ou=class e extends _t{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ku=class e extends _t{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var q,ZU,e2,Doe,Moe,Loe,qoe,Foe,$oe,Uoe,joe,Boe,Hoe,zoe,Voe,Goe,Br,t2=S(()=>{St();De();q=y(U());Lh();Mh();ZU=async(e,t)=>{let r=Vo(e,t),s={"content-type":"application/json"};r.bp("/token");let n;return n=JSON.stringify((0,q.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,q._json)(o)})),r.m("POST").h(s).b(n),r.build()},e2=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Doe(e,t);let r=(0,q.map)({$metadata:Br(e)}),s=(0,q.expectNonNull)((0,q.expectObject)(await Qa(e.body,t)),"body"),n=(0,q.take)(s,{accessToken:q.expectString,expiresIn:q.expectInt32,idToken:q.expectString,refreshToken:q.expectString,tokenType:q.expectString});return Object.assign(r,n),r},Doe=async(e,t)=>{let r={...e,body:await qv(e.body,t)},s=fi(e,r.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await Loe(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await qoe(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await Foe(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await $oe(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Uoe(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await joe(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Boe(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Hoe(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await zoe(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Voe(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await Goe(r,t);default:let n=r.body;return Moe({output:e,parsedBody:n,errorCode:s})}},Moe=(0,q.withBaseException)(_t),Loe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString,reason:q.expectString});Object.assign(r,n);let o=new vu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},qoe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new xu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Foe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Cu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},$oe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Ru({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Uoe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Tu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},joe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Au({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Boe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString,reason:q.expectString});Object.assign(r,n);let o=new Iu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Hoe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Pu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},zoe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Nu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Voe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Ou({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Goe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new ku({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Br=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var r2,s2,hx,Du,gx=S(()=>{r2=y(Gt()),s2=y(wr()),hx=y(U());ix();Lh();t2();Du=class extends hx.Command.classBuilder().ep(sU).m(function(t,r,s,n){return[(0,s2.getSerdePlugin)(s,this.serialize,this.deserialize),(0,r2.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(px,mx).ser(ZU).de(e2).build(){}});var n2,Woe,qh,o2=S(()=>{n2=y(U());gx();fx();Woe={CreateTokenCommand:Du},qh=class extends bu{};(0,n2.createAggregatedClient)(Woe,qh)});var i2=S(()=>{gx()});var a2=S(()=>{Lh()});var yx={};ct(yx,{$Command:()=>hx.Command,AccessDeniedException:()=>vu,AccessDeniedExceptionReason:()=>Ooe,AuthorizationPendingException:()=>xu,CreateTokenCommand:()=>Du,CreateTokenRequestFilterSensitiveLog:()=>px,CreateTokenResponseFilterSensitiveLog:()=>mx,ExpiredTokenException:()=>Cu,InternalServerException:()=>Ru,InvalidClientException:()=>Tu,InvalidGrantException:()=>Au,InvalidRequestException:()=>Iu,InvalidRequestExceptionReason:()=>koe,InvalidScopeException:()=>Pu,SSOOIDC:()=>qh,SSOOIDCClient:()=>bu,SSOOIDCServiceException:()=>_t,SlowDownException:()=>Nu,UnauthorizedClientException:()=>Ou,UnsupportedGrantTypeException:()=>ku,__Client:()=>lx.Client});var Sx=S(()=>{fx();o2();i2();a2();Mh()});var l2=b(Lu=>{"use strict";var Qoe=(is(),Q(lo)),Koe=(Dv(),Q(a$)),hr=Me(),Mu=Vt(),Joe=require("fs"),Yoe=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new hr.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=Koe.getBearerTokenEnvKey(t);if(!(r in process.env))throw new hr.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let s={token:process.env[r]};return Qoe.setTokenFeature(s,"BEARER_SERVICE_ENV_VARS","3"),s},Xoe=300*1e3,_x="To refresh this SSO session run 'aws sso login' with the corresponding profile.",Zoe=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(Sx(),yx)),s=o=>t.clientConfig?.[o]??t.parentClientConfig?.[o];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},eie=async(e,t,r={})=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(Sx(),yx));return(await Zoe(t,r)).send(new s({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},c2=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new hr.TokenProviderError(`Token is expired. ${_x}`,!1)},Si=(e,t,r=!1)=>{if(typeof t>"u")throw new hr.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${_x}`,!1)},{writeFile:tie}=Joe.promises,rie=(e,t)=>{let r=Mu.getSSOTokenFilepath(e),s=JSON.stringify(t,null,2);return tie(r,s)},d2=new Date(0),u2=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let s=await Mu.parseKnownFiles(r),n=Mu.getProfileName({profile:r.profile??t?.profile}),o=s[n];if(o){if(!o.sso_session)throw new hr.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new hr.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let i=o.sso_session,c=(await Mu.loadSsoSessionData(r))[i];if(!c)throw new hr.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let g of["sso_start_url","sso_region"])if(!c[g])throw new hr.TokenProviderError(`Sso session '${i}' is missing required property '${g}'.`,!1);c.sso_start_url;let d=c.sso_region,u;try{u=await Mu.getSSOTokenFromFile(i)}catch{throw new hr.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${_x}`,!1)}Si("accessToken",u.accessToken),Si("expiresAt",u.expiresAt);let{accessToken:l,expiresAt:h}=u,m={token:l,expiration:new Date(h)};if(m.expiration.getTime()-Date.now()>Xoe)return m;if(Date.now()-d2.getTime()<30*1e3)return c2(m),m;Si("clientId",u.clientId,!0),Si("clientSecret",u.clientSecret,!0),Si("refreshToken",u.refreshToken,!0);try{d2.setTime(Date.now());let g=await eie(u,d,r);Si("accessToken",g.accessToken),Si("expiresIn",g.expiresIn);let w=new Date(Date.now()+g.expiresIn*1e3);try{await rie(i,{...u,accessToken:g.accessToken,expiresAt:w.toISOString(),refreshToken:g.refreshToken})}catch{}return{token:g.accessToken,expiration:w}}catch{return c2(m),m}},sie=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new hr.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},nie=(e={})=>hr.memoize(hr.chain(u2(e),async()=>{throw new hr.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);Lu.fromEnvSigningName=Yoe;Lu.fromSso=u2;Lu.fromStatic=sie;Lu.nodeProvider=nie});var wx=b(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.resolveHttpAuthSchemeConfig=yo.defaultSSOHttpAuthSchemeProvider=yo.defaultSSOHttpAuthSchemeParametersProvider=void 0;var oie=(St(),Q(xs)),Ex=mt(),iie=async(e,t,r)=>({operation:(0,Ex.getSmithyContext)(t).operation,region:await(0,Ex.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});yo.defaultSSOHttpAuthSchemeParametersProvider=iie;function aie(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Fh(e){return{schemeId:"smithy.api#noAuth"}}var cie=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Fh(e));break}case"ListAccountRoles":{t.push(Fh(e));break}case"ListAccounts":{t.push(Fh(e));break}case"Logout":{t.push(Fh(e));break}default:t.push(aie(e))}return t};yo.defaultSSOHttpAuthSchemeProvider=cie;var die=e=>{let t=(0,oie.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,Ex.normalizeProvider)(e.authSchemePreference??[])})};yo.resolveHttpAuthSchemeConfig=die});var f2=b((xTe,uie)=>{uie.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.922.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.922.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.922.0","@aws-sdk/region-config-resolver":"3.922.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.922.0","@smithy/config-resolver":"^4.4.1","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.7","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var T2=b($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.ruleSet=void 0;var v2="required",zr="fn",Vr="argv",nc="ref",p2=!0,m2="isSet",qu="booleanEquals",rc="error",sc="endpoint",ln="tree",bx="PartitionResult",vx="getAttr",h2={[v2]:!1,type:"string"},g2={[v2]:!0,default:!1,type:"boolean"},y2={[nc]:"Endpoint"},x2={[zr]:qu,[Vr]:[{[nc]:"UseFIPS"},!0]},C2={[zr]:qu,[Vr]:[{[nc]:"UseDualStack"},!0]},Hr={},S2={[zr]:vx,[Vr]:[{[nc]:bx},"supportsFIPS"]},R2={[nc]:bx},_2={[zr]:qu,[Vr]:[!0,{[zr]:vx,[Vr]:[R2,"supportsDualStack"]}]},E2=[x2],w2=[C2],b2=[{[nc]:"Region"}],lie={version:"1.0",parameters:{Region:h2,UseDualStack:g2,UseFIPS:g2,Endpoint:h2},rules:[{conditions:[{[zr]:m2,[Vr]:[y2]}],rules:[{conditions:E2,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:rc},{conditions:w2,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:rc},{endpoint:{url:y2,properties:Hr,headers:Hr},type:sc}],type:ln},{conditions:[{[zr]:m2,[Vr]:b2}],rules:[{conditions:[{[zr]:"aws.partition",[Vr]:b2,assign:bx}],rules:[{conditions:[x2,C2],rules:[{conditions:[{[zr]:qu,[Vr]:[p2,S2]},_2],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Hr,headers:Hr},type:sc}],type:ln},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:rc}],type:ln},{conditions:E2,rules:[{conditions:[{[zr]:qu,[Vr]:[S2,p2]}],rules:[{conditions:[{[zr]:"stringEquals",[Vr]:[{[zr]:vx,[Vr]:[R2,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Hr,headers:Hr},type:sc},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Hr,headers:Hr},type:sc}],type:ln},{error:"FIPS is enabled but this partition does not support FIPS",type:rc}],type:ln},{conditions:w2,rules:[{conditions:[_2],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Hr,headers:Hr},type:sc}],type:ln},{error:"DualStack is enabled but this partition does not support DualStack",type:rc}],type:ln},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Hr,headers:Hr},type:sc}],type:ln}],type:ln},{error:"Invalid Configuration: Missing Region",type:rc}]};$h.ruleSet=lie});var A2=b(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.defaultEndpointResolver=void 0;var fie=rs(),xx=es(),pie=T2(),mie=new xx.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),hie=(e,t={})=>mie.get(e,()=>(0,xx.resolveEndpoint)(pie.ruleSet,{endpointParams:e,logger:t.logger}));Uh.defaultEndpointResolver=hie;xx.customEndpointFunctions.aws=fie.awsEndpointFunctions});var N2=b(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});jh.getRuntimeConfig=void 0;var gie=(St(),Q(xs)),yie=(De(),Q(ms)),Sie=U(),_ie=vr(),I2=Le(),P2=qe(),Eie=wx(),wie=A2(),bie=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??I2.fromBase64,base64Encoder:e?.base64Encoder??I2.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??wie.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Eie.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new gie.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new yie.NoAuthSigner}],logger:e?.logger??new Sie.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??_ie.parseUrl,utf8Decoder:e?.utf8Decoder??P2.fromUtf8,utf8Encoder:e?.utf8Encoder??P2.toUtf8});jh.getRuntimeConfig=bie});var L2=b(Hh=>{"use strict";Object.defineProperty(Hh,"__esModule",{value:!0});Hh.getRuntimeConfig=void 0;var vie=(Tn(),Q(Rn)),xie=vie.__importDefault(f2()),O2=(St(),Q(xs)),k2=_u(),Bh=Ze(),Cie=Xs(),D2=vt(),_i=Xt(),M2=br(),Rie=Zs(),Tie=ys(),Aie=N2(),Iie=U(),Pie=tn(),Nie=U(),Oie=e=>{(0,Nie.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Pie.resolveDefaultsModeConfig)(e),r=()=>t().then(Iie.loadConfigsForDefaultMode),s=(0,Aie.getRuntimeConfig)(e);(0,O2.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,_i.loadConfig)(O2.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??Rie.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,k2.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:xie.default.version}),maxAttempts:e?.maxAttempts??(0,_i.loadConfig)(D2.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,_i.loadConfig)(Bh.NODE_REGION_CONFIG_OPTIONS,{...Bh.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:M2.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,_i.loadConfig)({...D2.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Tie.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Cie.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??M2.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,_i.loadConfig)(Bh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,_i.loadConfig)(Bh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,_i.loadConfig)(k2.NODE_APP_ID_CONFIG_OPTIONS,n)}};Hh.getRuntimeConfig=Oie});var tj=b(rt=>{"use strict";var q2=Ms(),kie=Ls(),Die=qs(),F2=Ja(),Mie=Ze(),fn=(De(),Q(ms)),Lie=Js(),ju=Gt(),$2=vt(),z=U(),U2=wx(),qie=L2(),j2=tc(),B2=ye(),Yh=wr(),Fu=(St(),Q(xs)),Fie=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Xh={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},$ie=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},Uie=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),jie=(e,t)=>{let r=Object.assign(j2.getAwsRegionExtensionConfiguration(e),z.getDefaultExtensionConfiguration(e),B2.getHttpHandlerExtensionConfiguration(e),$ie(e));return t.forEach(s=>s.configure(r)),Object.assign(e,j2.resolveAwsRegionExtensionConfiguration(r),z.resolveDefaultRuntimeConfig(r),B2.resolveHttpHandlerRuntimeConfig(r),Uie(r))},oc=class extends z.Client{config;constructor(...[t]){let r=qie.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=Fie(r),n=F2.resolveUserAgentConfig(s),o=$2.resolveRetryConfig(n),i=Mie.resolveRegionConfig(o),a=q2.resolveHostHeaderConfig(i),c=ju.resolveEndpointConfig(a),d=U2.resolveHttpAuthSchemeConfig(c),u=jie(d,t?.extensions||[]);this.config=u,this.middlewareStack.use(F2.getUserAgentPlugin(this.config)),this.middlewareStack.use($2.getRetryPlugin(this.config)),this.middlewareStack.use(Lie.getContentLengthPlugin(this.config)),this.middlewareStack.use(q2.getHostHeaderPlugin(this.config)),this.middlewareStack.use(kie.getLoggerPlugin(this.config)),this.middlewareStack.use(Die.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(fn.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:U2.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new fn.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(fn.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},So=class e extends z.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},zh=class e extends So{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Vh=class e extends So{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Gh=class e extends So{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Wh=class e extends So{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},H2=e=>({...e,...e.accessToken&&{accessToken:z.SENSITIVE_STRING}}),z2=e=>({...e,...e.secretAccessKey&&{secretAccessKey:z.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:z.SENSITIVE_STRING}}),V2=e=>({...e,...e.roleCredentials&&{roleCredentials:z2(e.roleCredentials)}}),G2=e=>({...e,...e.accessToken&&{accessToken:z.SENSITIVE_STRING}}),W2=e=>({...e,...e.accessToken&&{accessToken:z.SENSITIVE_STRING}}),Q2=e=>({...e,...e.accessToken&&{accessToken:z.SENSITIVE_STRING}}),Bie=async(e,t)=>{let r=fn.requestBuilder(e,t),s=z.map({},z.isSerializableHeaderValue,{[tg]:e[eg]});r.bp("/federation/credentials");let n=z.map({[rae]:[,z.expectNonNull(e[tae],"roleName")],[J2]:[,z.expectNonNull(e[K2],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},Hie=async(e,t)=>{let r=fn.requestBuilder(e,t),s=z.map({},z.isSerializableHeaderValue,{[tg]:e[eg]});r.bp("/assignment/roles");let n=z.map({[ej]:[,e[Z2]],[X2]:[()=>e.maxResults!==void 0,()=>e[Y2].toString()],[J2]:[,z.expectNonNull(e[K2],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},zie=async(e,t)=>{let r=fn.requestBuilder(e,t),s=z.map({},z.isSerializableHeaderValue,{[tg]:e[eg]});r.bp("/assignment/accounts");let n=z.map({[ej]:[,e[Z2]],[X2]:[()=>e.maxResults!==void 0,()=>e[Y2].toString()]});return r.m("GET").h(s).q(n).b(void 0),r.build()},Vie=async(e,t)=>{let r=fn.requestBuilder(e,t),s=z.map({},z.isSerializableHeaderValue,{[tg]:e[eg]});return r.bp("/logout"),r.m("POST").h(s).b(void 0),r.build()},Gie=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Zh(e,t);let r=z.map({$metadata:_o(e)}),s=z.expectNonNull(z.expectObject(await Fu.parseJsonBody(e.body,t)),"body"),n=z.take(s,{roleCredentials:z._json});return Object.assign(r,n),r},Wie=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Zh(e,t);let r=z.map({$metadata:_o(e)}),s=z.expectNonNull(z.expectObject(await Fu.parseJsonBody(e.body,t)),"body"),n=z.take(s,{nextToken:z.expectString,roleList:z._json});return Object.assign(r,n),r},Qie=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Zh(e,t);let r=z.map({$metadata:_o(e)}),s=z.expectNonNull(z.expectObject(await Fu.parseJsonBody(e.body,t)),"body"),n=z.take(s,{accountList:z._json,nextToken:z.expectString});return Object.assign(r,n),r},Kie=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Zh(e,t);let r=z.map({$metadata:_o(e)});return await z.collectBody(e.body,t),r},Zh=async(e,t)=>{let r={...e,body:await Fu.parseJsonErrorBody(e.body,t)},s=Fu.loadRestJsonErrorCode(e,r.body);switch(s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Yie(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Xie(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Zie(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await eae(r);default:let n=r.body;return Jie({output:e,parsedBody:n,errorCode:s})}},Jie=z.withBaseException(So),Yie=async(e,t)=>{let r=z.map({}),s=e.body,n=z.take(s,{message:z.expectString});Object.assign(r,n);let o=new zh({$metadata:_o(e),...r});return z.decorateServiceException(o,e.body)},Xie=async(e,t)=>{let r=z.map({}),s=e.body,n=z.take(s,{message:z.expectString});Object.assign(r,n);let o=new Vh({$metadata:_o(e),...r});return z.decorateServiceException(o,e.body)},Zie=async(e,t)=>{let r=z.map({}),s=e.body,n=z.take(s,{message:z.expectString});Object.assign(r,n);let o=new Gh({$metadata:_o(e),...r});return z.decorateServiceException(o,e.body)},eae=async(e,t)=>{let r=z.map({}),s=e.body,n=z.take(s,{message:z.expectString});Object.assign(r,n);let o=new Wh({$metadata:_o(e),...r});return z.decorateServiceException(o,e.body)},_o=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),K2="accountId",eg="accessToken",J2="account_id",Y2="maxResults",X2="max_result",Z2="nextToken",ej="next_token",tae="roleName",rae="role_name",tg="x-amz-sso_bearer_token",Qh=class extends z.Command.classBuilder().ep(Xh).m(function(t,r,s,n){return[Yh.getSerdePlugin(s,this.serialize,this.deserialize),ju.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(H2,V2).ser(Bie).de(Gie).build(){},$u=class extends z.Command.classBuilder().ep(Xh).m(function(t,r,s,n){return[Yh.getSerdePlugin(s,this.serialize,this.deserialize),ju.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(G2,void 0).ser(Hie).de(Wie).build(){},Uu=class extends z.Command.classBuilder().ep(Xh).m(function(t,r,s,n){return[Yh.getSerdePlugin(s,this.serialize,this.deserialize),ju.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(W2,void 0).ser(zie).de(Qie).build(){},Kh=class extends z.Command.classBuilder().ep(Xh).m(function(t,r,s,n){return[Yh.getSerdePlugin(s,this.serialize,this.deserialize),ju.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(Q2,void 0).ser(Vie).de(Kie).build(){},sae={GetRoleCredentialsCommand:Qh,ListAccountRolesCommand:$u,ListAccountsCommand:Uu,LogoutCommand:Kh},Jh=class extends oc{};z.createAggregatedClient(sae,Jh);var nae=fn.createPaginator(oc,$u,"nextToken","nextToken","maxResults"),oae=fn.createPaginator(oc,Uu,"nextToken","nextToken","maxResults");Object.defineProperty(rt,"$Command",{enumerable:!0,get:function(){return z.Command}});Object.defineProperty(rt,"__Client",{enumerable:!0,get:function(){return z.Client}});rt.GetRoleCredentialsCommand=Qh;rt.GetRoleCredentialsRequestFilterSensitiveLog=H2;rt.GetRoleCredentialsResponseFilterSensitiveLog=V2;rt.InvalidRequestException=zh;rt.ListAccountRolesCommand=$u;rt.ListAccountRolesRequestFilterSensitiveLog=G2;rt.ListAccountsCommand=Uu;rt.ListAccountsRequestFilterSensitiveLog=W2;rt.LogoutCommand=Kh;rt.LogoutRequestFilterSensitiveLog=Q2;rt.ResourceNotFoundException=Vh;rt.RoleCredentialsFilterSensitiveLog=z2;rt.SSO=Jh;rt.SSOClient=oc;rt.SSOServiceException=So;rt.TooManyRequestsException=Gh;rt.UnauthorizedException=Wh;rt.paginateListAccountRoles=nae;rt.paginateListAccounts=oae});var sj=b(Cx=>{"use strict";var rj=tj();Object.defineProperty(Cx,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return rj.GetRoleCredentialsCommand}});Object.defineProperty(Cx,"SSOClient",{enumerable:!0,get:function(){return rj.SSOClient}})});var Rx=b(sg=>{"use strict";var as=Me(),rg=Vt(),nj=(is(),Q(lo)),iae=l2(),ij=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),Bu=!1,oj=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:s,ssoRoleName:n,ssoClient:o,clientConfig:i,parentClientConfig:a,profile:c,filepath:d,configFilepath:u,ignoreCache:l,logger:h})=>{let m,g="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let Ae=await iae.fromSso({profile:c,filepath:d,configFilepath:u,ignoreCache:l})();m={accessToken:Ae.token,expiresAt:new Date(Ae.expiration).toISOString()}}catch(Ae){throw new as.CredentialsProviderError(Ae.message,{tryNextLink:Bu,logger:h})}else try{m=await rg.getSSOTokenFromFile(e)}catch{throw new as.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${g}`,{tryNextLink:Bu,logger:h})}if(new Date(m.expiresAt).getTime()-Date.now()<=0)throw new as.CredentialsProviderError(`The SSO session associated with this profile has expired. ${g}`,{tryNextLink:Bu,logger:h});let{accessToken:w}=m,{SSOClient:C,GetRoleCredentialsCommand:T}=await Promise.resolve().then(function(){return sj()}),N=o||new C(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??s,userAgentAppId:i?.userAgentAppId??a?.userAgentAppId})),B;try{B=await N.send(new T({accountId:r,roleName:n,accessToken:w}))}catch(Ae){throw new as.CredentialsProviderError(Ae,{tryNextLink:Bu,logger:h})}let{roleCredentials:{accessKeyId:V,secretAccessKey:Z,sessionToken:we,expiration:Oe,credentialScope:te,accountId:he}={}}=B;if(!V||!Z||!we||!Oe)throw new as.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Bu,logger:h});let be={accessKeyId:V,secretAccessKey:Z,sessionToken:we,expiration:new Date(Oe),...te&&{credentialScope:te},...he&&{accountId:he}};return t?nj.setCredentialFeature(be,"CREDENTIALS_SSO","s"):nj.setCredentialFeature(be,"CREDENTIALS_SSO_LEGACY","u"),be},aj=(e,t)=>{let{sso_start_url:r,sso_account_id:s,sso_region:n,sso_role_name:o}=e;if(!r||!s||!n||!o)throw new as.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},aae=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e,{ssoClient:a}=e,c=rg.getProfileName({profile:e.profile??t?.profile});if(!r&&!s&&!n&&!o&&!i){let u=(await rg.parseKnownFiles(e))[c];if(!u)throw new as.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!ij(u))throw new as.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(u?.sso_session){let T=(await rg.loadSsoSessionData(e))[u.sso_session],N=` configurations in profile ${c} and sso-session ${u.sso_session}`;if(n&&n!==T.sso_region)throw new as.CredentialsProviderError("Conflicting SSO region"+N,{tryNextLink:!1,logger:e.logger});if(r&&r!==T.sso_start_url)throw new as.CredentialsProviderError("Conflicting SSO start_url"+N,{tryNextLink:!1,logger:e.logger});u.sso_region=T.sso_region,u.sso_start_url=T.sso_start_url}let{sso_start_url:l,sso_account_id:h,sso_region:m,sso_role_name:g,sso_session:w}=aj(u,e.logger);return oj({ssoStartUrl:l,ssoSession:w,ssoAccountId:h,ssoRegion:m,ssoRoleName:g,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!s||!n||!o)throw new as.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return oj({ssoStartUrl:r,ssoSession:i,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};sg.fromSSO=aae;sg.isSsoProfile=ij;sg.validateSsoProfile=aj});function cae(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function dae(e){return{schemeId:"smithy.api#noAuth"}}var Hu,cj,dj,uae,uj,Tx=S(()=>{St();Hu=y(mt());zu();cj=async(e,t,r)=>({operation:(0,Hu.getSmithyContext)(t).operation,region:await(0,Hu.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});dj=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(dae(e));break}default:t.push(cae(e))}return t},uae=e=>Object.assign(e,{stsClientCtor:Ts}),uj=e=>{let t=uae(e),r=li(t);return Object.assign(r,{authSchemePreference:(0,Hu.normalizeProvider)(e.authSchemePreference??[])})}});var lj,ng,og=S(()=>{lj=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),ng={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var bj,ce,Ce,Eo,Tt,vj,xj,je,fj,As,ic,Ix,pj,Ax,Cj,mj,At,hj,Rj,Tj,Ft,gr,gj,Aj,Ij,yj,Pj,Sj,_j,Ej,wj,lae,Nj,Oj=S(()=>{bj="required",ce="type",Ce="argv",Eo="booleanEquals",Tt="stringEquals",vj="sigv4",xj="us-east-1",je="endpoint",fj="https://sts.{Region}.{PartitionResult#dnsSuffix}",As="tree",ic="error",Ix="getAttr",pj={[bj]:!1,[ce]:"string"},Ax={[bj]:!0,default:!1,[ce]:"boolean"},Cj={ref:"Endpoint"},mj={fn:"isSet",[Ce]:[{ref:"Region"}]},At={ref:"Region"},hj={fn:"aws.partition",[Ce]:[At],assign:"PartitionResult"},Rj={ref:"UseFIPS"},Tj={ref:"UseDualStack"},Ft={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:vj,signingName:"sts",signingRegion:xj}]},headers:{}},gr={},gj={conditions:[{fn:Tt,[Ce]:[At,"aws-global"]}],[je]:Ft,[ce]:je},Aj={fn:Eo,[Ce]:[Rj,!0]},Ij={fn:Eo,[Ce]:[Tj,!0]},yj={fn:Ix,[Ce]:[{ref:"PartitionResult"},"supportsFIPS"]},Pj={ref:"PartitionResult"},Sj={fn:Eo,[Ce]:[!0,{fn:Ix,[Ce]:[Pj,"supportsDualStack"]}]},_j=[{fn:"isSet",[Ce]:[Cj]}],Ej=[Aj],wj=[Ij],lae={version:"1.0",parameters:{Region:pj,UseDualStack:Ax,UseFIPS:Ax,Endpoint:pj,UseGlobalEndpoint:Ax},rules:[{conditions:[{fn:Eo,[Ce]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[Ce]:_j},mj,hj,{fn:Eo,[Ce]:[Rj,!1]},{fn:Eo,[Ce]:[Tj,!1]}],rules:[{conditions:[{fn:Tt,[Ce]:[At,"ap-northeast-1"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"ap-south-1"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"ap-southeast-1"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"ap-southeast-2"]}],endpoint:Ft,[ce]:je},gj,{conditions:[{fn:Tt,[Ce]:[At,"ca-central-1"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"eu-central-1"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"eu-north-1"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"eu-west-1"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"eu-west-2"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"eu-west-3"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"sa-east-1"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,xj]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"us-east-2"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"us-west-1"]}],endpoint:Ft,[ce]:je},{conditions:[{fn:Tt,[Ce]:[At,"us-west-2"]}],endpoint:Ft,[ce]:je},{endpoint:{url:fj,properties:{authSchemes:[{name:vj,signingName:"sts",signingRegion:"{Region}"}]},headers:gr},[ce]:je}],[ce]:As},{conditions:_j,rules:[{conditions:Ej,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[ce]:ic},{conditions:wj,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[ce]:ic},{endpoint:{url:Cj,properties:gr,headers:gr},[ce]:je}],[ce]:As},{conditions:[mj],rules:[{conditions:[hj],rules:[{conditions:[Aj,Ij],rules:[{conditions:[{fn:Eo,[Ce]:[!0,yj]},Sj],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:gr,headers:gr},[ce]:je}],[ce]:As},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[ce]:ic}],[ce]:As},{conditions:Ej,rules:[{conditions:[{fn:Eo,[Ce]:[yj,!0]}],rules:[{conditions:[{fn:Tt,[Ce]:[{fn:Ix,[Ce]:[Pj,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:gr,headers:gr},[ce]:je},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:gr,headers:gr},[ce]:je}],[ce]:As},{error:"FIPS is enabled but this partition does not support FIPS",[ce]:ic}],[ce]:As},{conditions:wj,rules:[{conditions:[Sj],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:gr,headers:gr},[ce]:je}],[ce]:As},{error:"DualStack is enabled but this partition does not support DualStack",[ce]:ic}],[ce]:As},gj,{endpoint:{url:fj,properties:gr,headers:gr},[ce]:je}],[ce]:As}],[ce]:As},{error:"Invalid Configuration: Missing Region",[ce]:ic}]},Nj=lae});var kj,ac,fae,Dj,Mj=S(()=>{kj=y(rs()),ac=y(es());Oj();fae=new ac.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),Dj=(e,t={})=>fae.get(e,()=>(0,ac.resolveEndpoint)(Nj,{endpointParams:e,logger:t.logger}));ac.customEndpointFunctions.aws=kj.awsEndpointFunctions});var Lj,qj,ig,ag,Fj,$j=S(()=>{St();De();Lj=y(U()),qj=y(vr()),ig=y(Le()),ag=y(qe());Tx();Mj();Fj=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??ig.fromBase64,base64Encoder:e?.base64Encoder??ig.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Dj,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??dj,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ar},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new zt}],logger:e?.logger??new Lj.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??qj.parseUrl,utf8Decoder:e?.utf8Decoder??ag.fromUtf8,utf8Encoder:e?.utf8Encoder??ag.toUtf8})});var cg,bo,Uj,dg,wo,ug,jj,Bj,Hj,zj,Vj,Gj,Wj=S(()=>{ax();St();cg=y(_u()),bo=y(Ze());De();Uj=y(Xs()),dg=y(vt()),wo=y(Xt()),ug=y(br()),jj=y(Zs()),Bj=y(ys());$j();Hj=y(U()),zj=y(tn()),Vj=y(U()),Gj=e=>{(0,Vj.emitWarningIfUnsupportedVersion)(process.version);let t=(0,zj.resolveDefaultsModeConfig)(e),r=()=>t().then(Hj.loadConfigsForDefaultMode),s=Fj(e);Ha(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,wo.loadConfig)(Ga,n),bodyLengthChecker:e?.bodyLengthChecker??jj.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,cg.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:vh.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new ar},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new zt}],maxAttempts:e?.maxAttempts??(0,wo.loadConfig)(dg.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,wo.loadConfig)(bo.NODE_REGION_CONFIG_OPTIONS,{...bo.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:ug.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,wo.loadConfig)({...dg.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Bj.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Uj.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??ug.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,wo.loadConfig)(bo.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,wo.loadConfig)(bo.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,wo.loadConfig)(cg.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var Qj,Kj,Jj=S(()=>{Qj=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},Kj=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var lg,fg,pg,Yj,Xj=S(()=>{lg=y(tc()),fg=y(ye()),pg=y(U());Jj();Yj=(e,t)=>{let r=Object.assign((0,lg.getAwsRegionExtensionConfiguration)(e),(0,pg.getDefaultExtensionConfiguration)(e),(0,fg.getHttpHandlerExtensionConfiguration)(e),Qj(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,lg.resolveAwsRegionExtensionConfiguration)(r),(0,pg.resolveDefaultRuntimeConfig)(r),(0,fg.resolveHttpHandlerRuntimeConfig)(r),Kj(r))}});var mg,Zj,eB,hg,tB,rB,sB,gg,Px,Ts,zu=S(()=>{mg=y(Ms()),Zj=y(Ls()),eB=y(qs()),hg=y(Ja()),tB=y(Ze());De();rB=y(Js()),sB=y(Gt()),gg=y(vt()),Px=y(U());Tx();og();Wj();Xj();Ts=class extends Px.Client{config;constructor(...[t]){let r=Gj(t||{});super(r),this.initConfig=r;let s=lj(r),n=(0,hg.resolveUserAgentConfig)(s),o=(0,gg.resolveRetryConfig)(n),i=(0,tB.resolveRegionConfig)(o),a=(0,mg.resolveHostHeaderConfig)(i),c=(0,sB.resolveEndpointConfig)(a),d=uj(c),u=Yj(d,t?.extensions||[]);this.config=u,this.middlewareStack.use((0,hg.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,gg.getRetryPlugin)(this.config)),this.middlewareStack.use((0,rB.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,mg.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Zj.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,eB.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Fs(this.config,{httpAuthSchemeParametersProvider:cj,identityProviderConfigProvider:async l=>new Zr({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use($s(this.config))}destroy(){super.destroy()}}});var nB,cr,yg=S(()=>{nB=y(U()),cr=class e extends nB.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Nx,Ox,kx,Vu,Gu,Wu,Qu,Ku,Ju,Dx,Mx,Yu,Xu=S(()=>{Nx=y(U());yg();Ox=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Nx.SENSITIVE_STRING}}),kx=e=>({...e,...e.Credentials&&{Credentials:Ox(e.Credentials)}}),Vu=class e extends cr{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Gu=class e extends cr{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Wu=class e extends cr{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Qu=class e extends cr{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ku=class e extends cr{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ju=class e extends cr{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Dx=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Nx.SENSITIVE_STRING}}),Mx=e=>({...e,...e.Credentials&&{Credentials:Ox(e.Credentials)}}),Yu=class e extends cr{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var oB,fe,iB,aB,cB,dB,uB,pae,mae,hae,gae,yae,Sae,_ae,Eae,wae,lB,bae,vae,xae,Cae,Rae,Tae,fB,Aae,Iae,pB,Pae,Nae,Oae,kae,Dae,Mae,Lae,mn,qae,mB,hB,gB,yB,Lx,Fae,qx,cc,$ae,Fx,$x,dc,Ux,uc,jx,Bx,Hx,lc,fc,zx,Vx,Gx,pc,Wx,mc,hc,Qx,Kx,pn,Jx,Yx,Xx,Zx,eC,SB,tC,rC,sC,it,_B,Uae,nC=S(()=>{St();oB=y(ye()),fe=y(U());Xu();yg();iB=async(e,t)=>{let r=hB,s;return s=_B({...Eae(e,t),[yB]:Fae,[SB]:gB}),mB(t,r,"/",void 0,s)},aB=async(e,t)=>{let r=hB,s;return s=_B({...wae(e,t),[yB]:$ae,[SB]:gB}),mB(t,r,"/",void 0,s)},cB=async(e,t)=>{if(e.statusCode>=300)return uB(e,t);let r=await hu(e.body,t),s={};return s=Aae(r.AssumeRoleResult,t),{$metadata:mn(e),...s}},dB=async(e,t)=>{if(e.statusCode>=300)return uB(e,t);let r=await hu(e.body,t),s={};return s=Iae(r.AssumeRoleWithWebIdentityResult,t),{$metadata:mn(e),...s}},uB=async(e,t)=>{let r={...e,body:await Vv(e.body,t)},s=Uae(e,r.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await pae(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await yae(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Sae(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await _ae(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await mae(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await hae(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await gae(r,t);default:let n=r.body;return qae({output:e,parsedBody:n.Error,errorCode:s})}},pae=async(e,t)=>{let r=e.body,s=Pae(r.Error,t),n=new Vu({$metadata:mn(e),...s});return(0,fe.decorateServiceException)(n,r)},mae=async(e,t)=>{let r=e.body,s=Nae(r.Error,t),n=new Yu({$metadata:mn(e),...s});return(0,fe.decorateServiceException)(n,r)},hae=async(e,t)=>{let r=e.body,s=Oae(r.Error,t),n=new Ku({$metadata:mn(e),...s});return(0,fe.decorateServiceException)(n,r)},gae=async(e,t)=>{let r=e.body,s=kae(r.Error,t),n=new Ju({$metadata:mn(e),...s});return(0,fe.decorateServiceException)(n,r)},yae=async(e,t)=>{let r=e.body,s=Dae(r.Error,t),n=new Gu({$metadata:mn(e),...s});return(0,fe.decorateServiceException)(n,r)},Sae=async(e,t)=>{let r=e.body,s=Mae(r.Error,t),n=new Wu({$metadata:mn(e),...s});return(0,fe.decorateServiceException)(n,r)},_ae=async(e,t)=>{let r=e.body,s=Lae(r.Error,t),n=new Qu({$metadata:mn(e),...s});return(0,fe.decorateServiceException)(n,r)},Eae=(e,t)=>{let r={};if(e[mc]!=null&&(r[mc]=e[mc]),e[hc]!=null&&(r[hc]=e[hc]),e[fc]!=null){let s=lB(e[fc],t);e[fc]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}if(e[lc]!=null&&(r[lc]=e[lc]),e[uc]!=null&&(r[uc]=e[uc]),e[Xx]!=null){let s=Tae(e[Xx],t);e[Xx]?.length===0&&(r.Tags=[]),Object.entries(s).forEach(([n,o])=>{let i=`Tags.${n}`;r[i]=o})}if(e[eC]!=null){let s=Rae(e[eC],t);e[eC]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(s).forEach(([n,o])=>{let i=`TransitiveTagKeys.${n}`;r[i]=o})}if(e[Bx]!=null&&(r[Bx]=e[Bx]),e[Jx]!=null&&(r[Jx]=e[Jx]),e[Zx]!=null&&(r[Zx]=e[Zx]),e[pn]!=null&&(r[pn]=e[pn]),e[Vx]!=null){let s=xae(e[Vx],t);e[Vx]?.length===0&&(r.ProvidedContexts=[]),Object.entries(s).forEach(([n,o])=>{let i=`ProvidedContexts.${n}`;r[i]=o})}return r},wae=(e,t)=>{let r={};if(e[mc]!=null&&(r[mc]=e[mc]),e[hc]!=null&&(r[hc]=e[hc]),e[rC]!=null&&(r[rC]=e[rC]),e[Gx]!=null&&(r[Gx]=e[Gx]),e[fc]!=null){let s=lB(e[fc],t);e[fc]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}return e[lc]!=null&&(r[lc]=e[lc]),e[uc]!=null&&(r[uc]=e[uc]),r},lB=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=bae(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},bae=(e,t)=>{let r={};return e[sC]!=null&&(r[sC]=e[sC]),r},vae=(e,t)=>{let r={};return e[zx]!=null&&(r[zx]=e[zx]),e[Ux]!=null&&(r[Ux]=e[Ux]),r},xae=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=vae(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},Cae=(e,t)=>{let r={};return e[Hx]!=null&&(r[Hx]=e[Hx]),e[tC]!=null&&(r[tC]=e[tC]),r},Rae=(e,t)=>{let r={},s=1;for(let n of e)n!==null&&(r[`member.${s}`]=n,s++);return r},Tae=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=Cae(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},fB=(e,t)=>{let r={};return e[qx]!=null&&(r[qx]=(0,fe.expectString)(e[qx])),e[Fx]!=null&&(r[Fx]=(0,fe.expectString)(e[Fx])),r},Aae=(e,t)=>{let r={};return e[dc]!=null&&(r[dc]=pB(e[dc],t)),e[cc]!=null&&(r[cc]=fB(e[cc],t)),e[pc]!=null&&(r[pc]=(0,fe.strictParseInt32)(e[pc])),e[pn]!=null&&(r[pn]=(0,fe.expectString)(e[pn])),r},Iae=(e,t)=>{let r={};return e[dc]!=null&&(r[dc]=pB(e[dc],t)),e[Kx]!=null&&(r[Kx]=(0,fe.expectString)(e[Kx])),e[cc]!=null&&(r[cc]=fB(e[cc],t)),e[pc]!=null&&(r[pc]=(0,fe.strictParseInt32)(e[pc])),e[Wx]!=null&&(r[Wx]=(0,fe.expectString)(e[Wx])),e[$x]!=null&&(r[$x]=(0,fe.expectString)(e[$x])),e[pn]!=null&&(r[pn]=(0,fe.expectString)(e[pn])),r},pB=(e,t)=>{let r={};return e[Lx]!=null&&(r[Lx]=(0,fe.expectString)(e[Lx])),e[Qx]!=null&&(r[Qx]=(0,fe.expectString)(e[Qx])),e[Yx]!=null&&(r[Yx]=(0,fe.expectString)(e[Yx])),e[jx]!=null&&(r[jx]=(0,fe.expectNonNull)((0,fe.parseRfc3339DateTimeWithOffset)(e[jx]))),r},Pae=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,fe.expectString)(e[it])),r},Nae=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,fe.expectString)(e[it])),r},Oae=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,fe.expectString)(e[it])),r},kae=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,fe.expectString)(e[it])),r},Dae=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,fe.expectString)(e[it])),r},Mae=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,fe.expectString)(e[it])),r},Lae=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,fe.expectString)(e[it])),r},mn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),qae=(0,fe.withBaseException)(cr),mB=async(e,t,r,s,n)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return s!==void 0&&(d.hostname=s),n!==void 0&&(d.body=n),new oB.HttpRequest(d)},hB={"content-type":"application/x-www-form-urlencoded"},gB="2011-06-15",yB="Action",Lx="AccessKeyId",Fae="AssumeRole",qx="AssumedRoleId",cc="AssumedRoleUser",$ae="AssumeRoleWithWebIdentity",Fx="Arn",$x="Audience",dc="Credentials",Ux="ContextAssertion",uc="DurationSeconds",jx="Expiration",Bx="ExternalId",Hx="Key",lc="Policy",fc="PolicyArns",zx="ProviderArn",Vx="ProvidedContexts",Gx="ProviderId",pc="PackedPolicySize",Wx="Provider",mc="RoleArn",hc="RoleSessionName",Qx="SecretAccessKey",Kx="SubjectFromWebIdentityToken",pn="SourceIdentity",Jx="SerialNumber",Yx="SessionToken",Xx="Tags",Zx="TokenCode",eC="TransitiveTagKeys",SB="Version",tC="Value",rC="WebIdentityToken",sC="arn",it="message",_B=e=>Object.entries(e).map(([t,r])=>(0,fe.extendedEncodeURIComponent)(t)+"="+(0,fe.extendedEncodeURIComponent)(r)).join("&"),Uae=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var EB,wB,bB,Ei,Sg=S(()=>{EB=y(Gt()),wB=y(wr()),bB=y(U());og();Xu();nC();Ei=class extends bB.Command.classBuilder().ep(ng).m(function(t,r,s,n){return[(0,wB.getSerdePlugin)(s,this.serialize,this.deserialize),(0,EB.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,kx).ser(iB).de(cB).build(){}});var vB,xB,CB,wi,_g=S(()=>{vB=y(Gt()),xB=y(wr()),CB=y(U());og();Xu();nC();wi=class extends CB.Command.classBuilder().ep(ng).m(function(t,r,s,n){return[(0,xB.getSerdePlugin)(s,this.serialize,this.deserialize),(0,vB.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Dx,Mx).ser(aB).de(dB).build(){}});var RB,jae,Eg,TB=S(()=>{RB=y(U());Sg();_g();zu();jae={AssumeRoleCommand:Ei,AssumeRoleWithWebIdentityCommand:wi},Eg=class extends Ts{};(0,RB.createAggregatedClient)(jae,Eg)});var AB=S(()=>{Sg();_g()});var IB=S(()=>{Xu()});var PB,NB,OB,kB,DB,MB,LB=S(()=>{is();PB=y(tc());Sg();_g();NB=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},OB=async(e,t,r,s={})=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t,i=await(0,PB.stsRegionDefaultResolver)(s)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),n??o??i},kB=(e,t)=>{let r,s;return async(n,o)=>{if(s=n,!r){let{logger:u=e?.parentClientConfig?.logger,profile:l=e?.parentClientConfig?.profile,region:h,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:w=e?.parentClientConfig?.userAgentAppId}=e,C=await OB(h,e?.parentClientConfig?.region,g,{logger:u,profile:l}),T=!MB(m);r=new t({...e,userAgentAppId:w,profile:l,credentialDefaultProvider:()=>async()=>s,region:C,requestHandler:T?m:void 0,logger:u})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new Ei(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let c=NB(a),d={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return uo(d,"CREDENTIALS_STS_ASSUME_ROLE","i"),d}},DB=(e,t)=>{let r;return async s=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:d=e?.parentClientConfig?.profile,region:u,requestHandler:l=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:m=e?.parentClientConfig?.userAgentAppId}=e,g=await OB(u,e?.parentClientConfig?.region,h,{logger:c,profile:d}),w=!MB(l);r=new t({...e,userAgentAppId:m,profile:d,region:g,requestHandler:w?l:void 0,logger:c})}let{Credentials:n,AssumedRoleUser:o}=await r.send(new wi(s));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);let i=NB(o),a={accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,...n.CredentialScope&&{credentialScope:n.CredentialScope},...i&&{accountId:i}};return i&&uo(a,"RESOLVED_ACCOUNT_ID","T"),uo(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},MB=e=>e?.metadata?.handlerProtocol==="h2"});var qB,FB,$B,Bae,UB=S(()=>{LB();zu();qB=(e,t)=>t?class extends e{constructor(s){super(s);for(let n of t)this.middlewareStack.use(n)}}:e,FB=(e={},t)=>kB(e,qB(Ts,t)),$B=(e={},t)=>DB(e,qB(Ts,t)),Bae=e=>t=>e({roleAssumer:FB(t),roleAssumerWithWebIdentity:$B(t),...t})});var oC={};ct(oC,{AssumeRoleCommand:()=>Ei,AssumeRoleResponseFilterSensitiveLog:()=>kx,AssumeRoleWithWebIdentityCommand:()=>wi,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Dx,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Mx,CredentialsFilterSensitiveLog:()=>Ox,ExpiredTokenException:()=>Vu,IDPCommunicationErrorException:()=>Yu,IDPRejectedClaimException:()=>Ku,InvalidIdentityTokenException:()=>Ju,MalformedPolicyDocumentException:()=>Gu,PackedPolicyTooLargeException:()=>Wu,RegionDisabledException:()=>Qu,STS:()=>Eg,STSClient:()=>Ts,STSServiceException:()=>cr,__Client:()=>Px.Client,decorateDefaultCredentialProvider:()=>Bae,getDefaultRoleAssumer:()=>FB,getDefaultRoleAssumerWithWebIdentity:()=>$B});var iC=S(()=>{zu();TB();AB();IB();UB();yg()});var dC=b(jB=>{"use strict";var cC=Vt(),aC=Me(),Hae=require("child_process"),zae=require("util"),Vae=(is(),Q(lo)),Gae=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let o=new Date;if(new Date(t.Expiration)<o)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let s=t.AccountId;!s&&r?.[e]?.aws_account_id&&(s=r[e].aws_account_id);let n={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...s&&{accountId:s}};return Vae.setCredentialFeature(n,"CREDENTIALS_PROCESS","w"),n},Wae=async(e,t,r)=>{let s=t[e];if(t[e]){let n=s.credential_process;if(n!==void 0){let o=zae.promisify(cC.externalDataInterceptor?.getTokenRecord?.().exec??Hae.exec);try{let{stdout:i}=await o(n),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Gae(e,a,t)}catch(i){throw new aC.CredentialsProviderError(i.message,{logger:r})}}else throw new aC.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new aC.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},Qae=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await cC.parseKnownFiles(e);return Wae(cC.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};jB.fromProcess=Qae});var uC=b(Is=>{"use strict";var Kae=Is&&Is.__createBinding||(Object.create?(function(e,t,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]})),Jae=Is&&Is.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),Yae=Is&&Is.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var s=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[s.length]=n);return s},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s=e(t),n=0;n<s.length;n++)s[n]!=="default"&&Kae(r,t,s[n]);return Jae(r,t),r}})();Object.defineProperty(Is,"__esModule",{value:!0});Is.fromWebToken=void 0;var Xae=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:s,webIdentityToken:n,providerId:o,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:d}=e;if(!d){let{getDefaultRoleAssumerWithWebIdentity:u}=await Promise.resolve().then(()=>Yae((iC(),Q(oC))));d=u({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return d({RoleArn:r,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:c})};Is.fromWebToken=Xae});var HB=b(wg=>{"use strict";Object.defineProperty(wg,"__esModule",{value:!0});wg.fromTokenFile=void 0;var Zae=(is(),Q(lo)),ece=Me(),tce=Vt(),rce=require("fs"),sce=uC(),BB="AWS_WEB_IDENTITY_TOKEN_FILE",nce="AWS_ROLE_ARN",oce="AWS_ROLE_SESSION_NAME",ice=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[BB],s=e?.roleArn??process.env[nce],n=e?.roleSessionName??process.env[oce];if(!r||!s)throw new ece.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,sce.fromWebToken)({...e,webIdentityToken:tce.externalDataInterceptor?.getTokenRecord?.()[r]??(0,rce.readFileSync)(r,{encoding:"ascii"}),roleArn:s,roleSessionName:n})(t);return r===process.env[BB]&&(0,Zae.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};wg.fromTokenFile=ice});var lC=b(Zu=>{"use strict";var zB=HB(),VB=uC();Object.keys(zB).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Zu,e)&&Object.defineProperty(Zu,e,{enumerable:!0,get:function(){return zB[e]}})});Object.keys(VB).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Zu,e)&&Object.defineProperty(Zu,e,{enumerable:!0,get:function(){return VB[e]}})})});var YB=b(JB=>{"use strict";var pC=Vt(),el=Me(),vo=(is(),Q(lo)),ace=(e,t,r)=>{let s={EcsContainer:async n=>{let{fromHttp:o}=await Promise.resolve().then(()=>y(nx())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>y(Qn()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>el.chain(o(n??{}),i(n))().then(fC)},Ec2InstanceMetadata:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>y(Qn()));return async()=>o(n)().then(fC)},Environment:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>y(rx()));return async()=>o(n)().then(fC)}};if(e in s)return s[e];throw new el.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},fC=e=>vo.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),cce=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(dce(e,{profile:t,logger:r})||uce(e,{profile:t,logger:r})),dce=(e,{profile:t,logger:r})=>{let s=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return s&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),s},uce=(e,{profile:t,logger:r})=>{let s=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return s&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),s},lce=async(e,t,r,s={},n)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:i,region:a}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(iC(),oC));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(i&&i in s)throw new el.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${pC.getProfileName(r)}. Profiles visited: `+Object.keys(s).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${i?`source_profile=[${i}]`:`profile=[${e}]`}`);let c=i?n(i,t,r,{...s,[i]:!0},GB(t[i]??{})):(await ace(o.credential_source,e,r.logger)(r))();if(GB(o))return c.then(d=>vo.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:u}=o;if(u){if(!r.mfaCodeProvider)throw new el.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=u,d.TokenCode=await r.mfaCodeProvider(u)}let l=await c;return r.roleAssumer(l,d).then(h=>vo.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},GB=e=>!e.role_arn&&!!e.credential_source,fce=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",pce=async(e,t)=>Promise.resolve().then(()=>y(dC())).then(({fromProcess:r})=>r({...e,profile:t})().then(s=>vo.setCredentialFeature(s,"CREDENTIALS_PROFILE_PROCESS","v"))),mce=async(e,t,r={})=>{let{fromSSO:s}=await Promise.resolve().then(()=>y(Rx()));return s({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(n=>t.sso_session?vo.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO","r"):vo.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},hce=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),WB=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,QB=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return vo.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},gce=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,yce=async(e,t)=>Promise.resolve().then(()=>y(lC())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(s=>vo.setCredentialFeature(s,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),KB=async(e,t,r,s={},n=!1)=>{let o=t[e];if(Object.keys(s).length>0&&WB(o))return QB(o,r);if(n||cce(o,{profile:e,logger:r.logger}))return lce(e,t,r,s,KB);if(WB(o))return QB(o,r);if(gce(o))return yce(o,r);if(fce(o))return pce(r,e);if(hce(o))return await mce(e,o,r);throw new el.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},Sce=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let s=await pC.parseKnownFiles(r);return KB(pC.getProfileName({profile:e.profile??t?.profile}),s,r)};JB.fromIni=Sce});var tH=b(bg=>{"use strict";var mC=rx(),tl=Me(),_ce=Vt(),XB="AWS_EC2_METADATA_DISABLED",Ece=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:s,fromInstanceMetadata:n}=await Promise.resolve().then(()=>y(Qn()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>y(nx()));return tl.chain(o(e),s(e))}return process.env[XB]&&process.env[XB]!=="false"?async()=>{throw new tl.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),n(e))};function wce(e,t){let r=bce(e),s,n,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),s)await s;else if(!o||t?.(o))if(o)n||(n=r(a).then(c=>{o=c,n=void 0}));else return s=r(a).then(c=>{o=c,s=void 0}),i(a);return o};return i}var bce=e=>async t=>{let r;for(let s of e)try{return await s(t)}catch(n){if(r=n,n?.tryNextLink)continue;throw n}throw r},ZB=!1,vce=(e={})=>wce([async()=>{if(e.profile??process.env[_ce.ENV_PROFILE])throw process.env[mC.ENV_KEY]&&process.env[mC.ENV_SECRET]&&(ZB||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),ZB=!0)),new tl.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),mC.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e;if(!r&&!s&&!n&&!o&&!i)throw new tl.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>y(Rx()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>y(YB()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>y(dC()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>y(lC()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await Ece(e))()),async()=>{throw new tl.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],eH),xce=e=>e?.expiration!==void 0,eH=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;bg.credentialsTreatedAsExpired=eH;bg.credentialsWillNeedRefresh=xce;bg.defaultProvider=vce});var gH=b(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.ruleSet=void 0;var fH="required",Wr="fn",Qr="argv",Sc="ref",rH=!0,sH="isSet",rl="booleanEquals",gc="error",yc="endpoint",hn="tree",hC="PartitionResult",gC="getAttr",nH={[fH]:!1,type:"string"},oH={[fH]:!0,default:!1,type:"boolean"},iH={[Sc]:"Endpoint"},pH={[Wr]:rl,[Qr]:[{[Sc]:"UseFIPS"},!0]},mH={[Wr]:rl,[Qr]:[{[Sc]:"UseDualStack"},!0]},Gr={},aH={[Wr]:gC,[Qr]:[{[Sc]:hC},"supportsFIPS"]},hH={[Sc]:hC},cH={[Wr]:rl,[Qr]:[!0,{[Wr]:gC,[Qr]:[hH,"supportsDualStack"]}]},dH=[pH],uH=[mH],lH=[{[Sc]:"Region"}],Cce={version:"1.0",parameters:{Region:nH,UseDualStack:oH,UseFIPS:oH,Endpoint:nH},rules:[{conditions:[{[Wr]:sH,[Qr]:[iH]}],rules:[{conditions:dH,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:gc},{conditions:uH,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:gc},{endpoint:{url:iH,properties:Gr,headers:Gr},type:yc}],type:hn},{conditions:[{[Wr]:sH,[Qr]:lH}],rules:[{conditions:[{[Wr]:"aws.partition",[Qr]:lH,assign:hC}],rules:[{conditions:[pH,mH],rules:[{conditions:[{[Wr]:rl,[Qr]:[rH,aH]},cH],rules:[{endpoint:{url:"https://sqs-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Gr,headers:Gr},type:yc}],type:hn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:gc}],type:hn},{conditions:dH,rules:[{conditions:[{[Wr]:rl,[Qr]:[aH,rH]}],rules:[{conditions:[{[Wr]:"stringEquals",[Qr]:[{[Wr]:gC,[Qr]:[hH,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sqs.{Region}.amazonaws.com",properties:Gr,headers:Gr},type:yc},{endpoint:{url:"https://sqs-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Gr,headers:Gr},type:yc}],type:hn},{error:"FIPS is enabled but this partition does not support FIPS",type:gc}],type:hn},{conditions:uH,rules:[{conditions:[cH],rules:[{endpoint:{url:"https://sqs.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Gr,headers:Gr},type:yc}],type:hn},{error:"DualStack is enabled but this partition does not support DualStack",type:gc}],type:hn},{endpoint:{url:"https://sqs.{Region}.{PartitionResult#dnsSuffix}",properties:Gr,headers:Gr},type:yc}],type:hn}],type:hn},{error:"Invalid Configuration: Missing Region",type:gc}]};vg.ruleSet=Cce});var yH=b(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.defaultEndpointResolver=void 0;var Rce=rs(),yC=es(),Tce=gH(),Ace=new yC.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ice=(e,t={})=>Ace.get(e,()=>(0,yC.resolveEndpoint)(Tce.ruleSet,{endpointParams:e,logger:t.logger}));xg.defaultEndpointResolver=Ice;yC.customEndpointFunctions.aws=Rce.awsEndpointFunctions});var EH=b(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});Cg.getRuntimeConfig=void 0;var Pce=(St(),Q(xs)),Nce=U(),Oce=vr(),SH=Le(),_H=qe(),kce=tx(),Dce=yH(),Mce=e=>({apiVersion:"2012-11-05",base64Decoder:e?.base64Decoder??SH.fromBase64,base64Encoder:e?.base64Encoder??SH.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Dce.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??kce.defaultSQSHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Pce.AwsSdkSigV4Signer}],logger:e?.logger??new Nce.NoOpLogger,serviceId:e?.serviceId??"SQS",urlParser:e?.urlParser??Oce.parseUrl,utf8Decoder:e?.utf8Decoder??_H.fromUtf8,utf8Encoder:e?.utf8Encoder??_H.toUtf8});Cg.getRuntimeConfig=Mce});var RH=b(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});Tg.getRuntimeConfig=void 0;var Lce=(Tn(),Q(Rn)),qce=Lce.__importDefault(U$()),wH=(St(),Q(xs)),Fce=tH(),bH=_u(),Rg=Ze(),vH=Xs(),xH=vt(),bi=Xt(),CH=br(),$ce=Zs(),Uce=ys(),jce=EH(),Bce=U(),Hce=tn(),zce=U(),Vce=e=>{(0,zce.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Hce.resolveDefaultsModeConfig)(e),r=()=>t().then(Bce.loadConfigsForDefaultMode),s=(0,jce.getRuntimeConfig)(e);(0,wH.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,bi.loadConfig)(wH.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??$ce.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??Fce.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,bH.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:qce.default.version}),maxAttempts:e?.maxAttempts??(0,bi.loadConfig)(xH.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),md5:e?.md5??vH.Hash.bind(null,"md5"),region:e?.region??(0,bi.loadConfig)(Rg.NODE_REGION_CONFIG_OPTIONS,{...Rg.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:CH.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,bi.loadConfig)({...xH.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Uce.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??vH.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??CH.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,bi.loadConfig)(Rg.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,bi.loadConfig)(Rg.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,bi.loadConfig)(bH.NODE_APP_ID_CONFIG_OPTIONS,n)}};Tg.getRuntimeConfig=Vce});var $H=b(G=>{"use strict";var TH=Ms(),Gce=Ls(),Wce=qs(),nl=LF(),AH=Ja(),Qce=Ze(),sl=(De(),Q(ms)),Kce=Js(),Be=Gt(),IH=vt(),R=U(),PH=tx(),Jce=RH(),NH=tc(),SC=ye(),Qe=wr(),M=(St(),Q(xs)),Yce=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sqs"}),Ke={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Xce=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},Zce=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),ede=(e,t)=>{let r=Object.assign(NH.getAwsRegionExtensionConfiguration(e),R.getDefaultExtensionConfiguration(e),SC.getHttpHandlerExtensionConfiguration(e),Xce(e));return t.forEach(s=>s.configure(r)),Object.assign(e,NH.resolveAwsRegionExtensionConfiguration(r),R.resolveDefaultRuntimeConfig(r),SC.resolveHttpHandlerRuntimeConfig(r),Zce(r))},_c=class extends R.Client{config;constructor(...[t]){let r=Jce.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=Yce(r),n=AH.resolveUserAgentConfig(s),o=IH.resolveRetryConfig(n),i=Qce.resolveRegionConfig(o),a=TH.resolveHostHeaderConfig(i),c=Be.resolveEndpointConfig(a),d=nl.resolveQueueUrlConfig(c),u=PH.resolveHttpAuthSchemeConfig(d),l=ede(u,t?.extensions||[]);this.config=l,this.middlewareStack.use(AH.getUserAgentPlugin(this.config)),this.middlewareStack.use(IH.getRetryPlugin(this.config)),this.middlewareStack.use(Kce.getContentLengthPlugin(this.config)),this.middlewareStack.use(TH.getHostHeaderPlugin(this.config)),this.middlewareStack.use(Gce.getLoggerPlugin(this.config)),this.middlewareStack.use(Wce.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(nl.getQueueUrlPlugin(this.config)),this.middlewareStack.use(sl.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:PH.defaultSQSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async h=>new sl.DefaultIdentityProviderConfig({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(sl.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Re=class e extends R.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Ag=class e extends Re{name="InvalidAddress";$fault="client";constructor(t){super({name:"InvalidAddress",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ig=class e extends Re{name="InvalidSecurity";$fault="client";constructor(t){super({name:"InvalidSecurity",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Pg=class e extends Re{name="OverLimit";$fault="client";constructor(t){super({name:"OverLimit",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ng=class e extends Re{name="QueueDoesNotExist";$fault="client";constructor(t){super({name:"QueueDoesNotExist",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Og=class e extends Re{name="RequestThrottled";$fault="client";constructor(t){super({name:"RequestThrottled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},kg=class e extends Re{name="UnsupportedOperation";$fault="client";constructor(t){super({name:"UnsupportedOperation",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Dg=class e extends Re{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Mg=class e extends Re{name="MessageNotInflight";$fault="client";constructor(t){super({name:"MessageNotInflight",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Lg=class e extends Re{name="ReceiptHandleIsInvalid";$fault="client";constructor(t){super({name:"ReceiptHandleIsInvalid",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},qg=class e extends Re{name="BatchEntryIdsNotDistinct";$fault="client";constructor(t){super({name:"BatchEntryIdsNotDistinct",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Fg=class e extends Re{name="EmptyBatchRequest";$fault="client";constructor(t){super({name:"EmptyBatchRequest",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},$g=class e extends Re{name="InvalidBatchEntryId";$fault="client";constructor(t){super({name:"InvalidBatchEntryId",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ug=class e extends Re{name="TooManyEntriesInBatchRequest";$fault="client";constructor(t){super({name:"TooManyEntriesInBatchRequest",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},tde={All:"All",ApproximateNumberOfMessages:"ApproximateNumberOfMessages",ApproximateNumberOfMessagesDelayed:"ApproximateNumberOfMessagesDelayed",ApproximateNumberOfMessagesNotVisible:"ApproximateNumberOfMessagesNotVisible",ContentBasedDeduplication:"ContentBasedDeduplication",CreatedTimestamp:"CreatedTimestamp",DeduplicationScope:"DeduplicationScope",DelaySeconds:"DelaySeconds",FifoQueue:"FifoQueue",FifoThroughputLimit:"FifoThroughputLimit",KmsDataKeyReusePeriodSeconds:"KmsDataKeyReusePeriodSeconds",KmsMasterKeyId:"KmsMasterKeyId",LastModifiedTimestamp:"LastModifiedTimestamp",MaximumMessageSize:"MaximumMessageSize",MessageRetentionPeriod:"MessageRetentionPeriod",Policy:"Policy",QueueArn:"QueueArn",ReceiveMessageWaitTimeSeconds:"ReceiveMessageWaitTimeSeconds",RedriveAllowPolicy:"RedriveAllowPolicy",RedrivePolicy:"RedrivePolicy",SqsManagedSseEnabled:"SqsManagedSseEnabled",VisibilityTimeout:"VisibilityTimeout"},jg=class e extends Re{name="InvalidAttributeName";$fault="client";constructor(t){super({name:"InvalidAttributeName",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Bg=class e extends Re{name="InvalidAttributeValue";$fault="client";constructor(t){super({name:"InvalidAttributeValue",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Hg=class e extends Re{name="QueueDeletedRecently";$fault="client";constructor(t){super({name:"QueueDeletedRecently",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},zg=class e extends Re{name="QueueNameExists";$fault="client";constructor(t){super({name:"QueueNameExists",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Vg=class e extends Re{name="InvalidIdFormat";$fault="client";constructor(t){super({name:"InvalidIdFormat",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Gg=class e extends Re{name="PurgeQueueInProgress";$fault="client";constructor(t){super({name:"PurgeQueueInProgress",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Wg=class e extends Re{name="KmsAccessDenied";$fault="client";constructor(t){super({name:"KmsAccessDenied",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Qg=class e extends Re{name="KmsDisabled";$fault="client";constructor(t){super({name:"KmsDisabled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Kg=class e extends Re{name="KmsInvalidKeyUsage";$fault="client";constructor(t){super({name:"KmsInvalidKeyUsage",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Jg=class e extends Re{name="KmsInvalidState";$fault="client";constructor(t){super({name:"KmsInvalidState",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Yg=class e extends Re{name="KmsNotFound";$fault="client";constructor(t){super({name:"KmsNotFound",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Xg=class e extends Re{name="KmsOptInRequired";$fault="client";constructor(t){super({name:"KmsOptInRequired",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Zg=class e extends Re{name="KmsThrottled";$fault="client";constructor(t){super({name:"KmsThrottled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},rde={AWSTraceHeader:"AWSTraceHeader",All:"All",ApproximateFirstReceiveTimestamp:"ApproximateFirstReceiveTimestamp",ApproximateReceiveCount:"ApproximateReceiveCount",DeadLetterQueueSourceArn:"DeadLetterQueueSourceArn",MessageDeduplicationId:"MessageDeduplicationId",MessageGroupId:"MessageGroupId",SenderId:"SenderId",SentTimestamp:"SentTimestamp",SequenceNumber:"SequenceNumber"},ey=class e extends Re{name="InvalidMessageContents";$fault="client";constructor(t){super({name:"InvalidMessageContents",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},sde={AWSTraceHeader:"AWSTraceHeader"},ty=class e extends Re{name="BatchRequestTooLong";$fault="client";constructor(t){super({name:"BatchRequestTooLong",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},nde=async(e,t)=>{let r=Xe("AddPermission"),s;return s=JSON.stringify(Cue(e)),Ye(t,r,"/",void 0,s)},ode=async(e,t)=>{let r=Xe("CancelMessageMoveTask"),s;return s=JSON.stringify(Tue(e)),Ye(t,r,"/",void 0,s)},ide=async(e,t)=>{let r=Xe("ChangeMessageVisibility"),s;return s=JSON.stringify(Nue(e)),Ye(t,r,"/",void 0,s)},ade=async(e,t)=>{let r=Xe("ChangeMessageVisibilityBatch"),s;return s=JSON.stringify(Aue(e)),Ye(t,r,"/",void 0,s)},cde=async(e,t)=>{let r=Xe("CreateQueue"),s;return s=JSON.stringify(Oue(e)),Ye(t,r,"/",void 0,s)},dde=async(e,t)=>{let r=Xe("DeleteMessage"),s;return s=JSON.stringify(Lue(e)),Ye(t,r,"/",void 0,s)},ude=async(e,t)=>{let r=Xe("DeleteMessageBatch"),s;return s=JSON.stringify(kue(e)),Ye(t,r,"/",void 0,s)},lde=async(e,t)=>{let r=Xe("DeleteQueue"),s;return s=JSON.stringify(que(e)),Ye(t,r,"/",void 0,s)},fde=async(e,t)=>{let r=Xe("GetQueueAttributes"),s;return s=JSON.stringify(Fue(e)),Ye(t,r,"/",void 0,s)},pde=async(e,t)=>{let r=Xe("GetQueueUrl"),s;return s=JSON.stringify($ue(e)),Ye(t,r,"/",void 0,s)},mde=async(e,t)=>{let r=Xe("ListDeadLetterSourceQueues"),s;return s=JSON.stringify(Uue(e)),Ye(t,r,"/",void 0,s)},hde=async(e,t)=>{let r=Xe("ListMessageMoveTasks"),s;return s=JSON.stringify(jue(e)),Ye(t,r,"/",void 0,s)},gde=async(e,t)=>{let r=Xe("ListQueues"),s;return s=JSON.stringify(Bue(e)),Ye(t,r,"/",void 0,s)},yde=async(e,t)=>{let r=Xe("ListQueueTags"),s;return s=JSON.stringify(Hue(e)),Ye(t,r,"/",void 0,s)},Sde=async(e,t)=>{let r=Xe("PurgeQueue"),s;return s=JSON.stringify(Que(e)),Ye(t,r,"/",void 0,s)},_de=async(e,t)=>{let r=Xe("ReceiveMessage"),s;return s=JSON.stringify(Kue(e)),Ye(t,r,"/",void 0,s)},Ede=async(e,t)=>{let r=Xe("RemovePermission"),s;return s=JSON.stringify(Jue(e)),Ye(t,r,"/",void 0,s)},wde=async(e,t)=>{let r=Xe("SendMessage"),s;return s=JSON.stringify(ele(e,t)),Ye(t,r,"/",void 0,s)},bde=async(e,t)=>{let r=Xe("SendMessageBatch"),s;return s=JSON.stringify(Yue(e,t)),Ye(t,r,"/",void 0,s)},vde=async(e,t)=>{let r=Xe("SetQueueAttributes"),s;return s=JSON.stringify(tle(e)),Ye(t,r,"/",void 0,s)},xde=async(e,t)=>{let r=Xe("StartMessageMoveTask"),s;return s=JSON.stringify(rle(e)),Ye(t,r,"/",void 0,s)},Cde=async(e,t)=>{let r=Xe("TagQueue"),s;return s=JSON.stringify(nle(e)),Ye(t,r,"/",void 0,s)},Rde=async(e,t)=>{let r=Xe("UntagQueue"),s;return s=JSON.stringify(ole(e)),Ye(t,r,"/",void 0,s)},Tde=async(e,t)=>e.statusCode>=300?Je(e,t):(await R.collectBody(e.body,t),{$metadata:X(e)}),Ade=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},Ide=async(e,t)=>e.statusCode>=300?Je(e,t):(await R.collectBody(e.body,t),{$metadata:X(e)}),Pde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},Nde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},Ode=async(e,t)=>e.statusCode>=300?Je(e,t):(await R.collectBody(e.body,t),{$metadata:X(e)}),kde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},Dde=async(e,t)=>e.statusCode>=300?Je(e,t):(await R.collectBody(e.body,t),{$metadata:X(e)}),Mde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},Lde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},qde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},Fde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},$de=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},Ude=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},jde=async(e,t)=>e.statusCode>=300?Je(e,t):(await R.collectBody(e.body,t),{$metadata:X(e)}),Bde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=lle(r,t),{$metadata:X(e),...s}},Hde=async(e,t)=>e.statusCode>=300?Je(e,t):(await R.collectBody(e.body,t),{$metadata:X(e)}),zde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},Vde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},Gde=async(e,t)=>e.statusCode>=300?Je(e,t):(await R.collectBody(e.body,t),{$metadata:X(e)}),Wde=async(e,t)=>{if(e.statusCode>=300)return Je(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=R._json(r),{$metadata:X(e),...s}},Qde=async(e,t)=>e.statusCode>=300?Je(e,t):(await R.collectBody(e.body,t),{$metadata:X(e)}),Kde=async(e,t)=>e.statusCode>=300?Je(e,t):(await R.collectBody(e.body,t),{$metadata:X(e)}),Je=async(e,t)=>{let r={...e,body:await M.parseJsonErrorBody(e.body,t)};ple(r,e.headers);let s=M.loadRestJsonErrorCode(e,r.body);switch(s){case"InvalidAddress":case"com.amazonaws.sqs#InvalidAddress":throw await Zde(r);case"InvalidSecurity":case"com.amazonaws.sqs#InvalidSecurity":throw await oue(r);case"OverLimit":case"com.amazonaws.sqs#OverLimit":throw await mue(r);case"QueueDoesNotExist":case"com.amazonaws.sqs#QueueDoesNotExist":case"AWS.SimpleQueueService.NonExistentQueue":throw await yue(r);case"RequestThrottled":case"com.amazonaws.sqs#RequestThrottled":throw await Eue(r);case"UnsupportedOperation":case"com.amazonaws.sqs#UnsupportedOperation":case"AWS.SimpleQueueService.UnsupportedOperation":throw await vue(r);case"ResourceNotFoundException":case"com.amazonaws.sqs#ResourceNotFoundException":throw await wue(r);case"MessageNotInflight":case"com.amazonaws.sqs#MessageNotInflight":case"AWS.SimpleQueueService.MessageNotInflight":throw await pue(r);case"ReceiptHandleIsInvalid":case"com.amazonaws.sqs#ReceiptHandleIsInvalid":throw await _ue(r);case"BatchEntryIdsNotDistinct":case"com.amazonaws.sqs#BatchEntryIdsNotDistinct":case"AWS.SimpleQueueService.BatchEntryIdsNotDistinct":throw await Jde(r);case"EmptyBatchRequest":case"com.amazonaws.sqs#EmptyBatchRequest":case"AWS.SimpleQueueService.EmptyBatchRequest":throw await Xde(r);case"InvalidBatchEntryId":case"com.amazonaws.sqs#InvalidBatchEntryId":case"AWS.SimpleQueueService.InvalidBatchEntryId":throw await rue(r);case"TooManyEntriesInBatchRequest":case"com.amazonaws.sqs#TooManyEntriesInBatchRequest":case"AWS.SimpleQueueService.TooManyEntriesInBatchRequest":throw await bue(r);case"InvalidAttributeName":case"com.amazonaws.sqs#InvalidAttributeName":throw await eue(r);case"InvalidAttributeValue":case"com.amazonaws.sqs#InvalidAttributeValue":throw await tue(r);case"QueueDeletedRecently":case"com.amazonaws.sqs#QueueDeletedRecently":case"AWS.SimpleQueueService.QueueDeletedRecently":throw await gue(r);case"QueueNameExists":case"com.amazonaws.sqs#QueueNameExists":case"QueueAlreadyExists":throw await Sue(r);case"InvalidIdFormat":case"com.amazonaws.sqs#InvalidIdFormat":throw await sue(r);case"PurgeQueueInProgress":case"com.amazonaws.sqs#PurgeQueueInProgress":case"AWS.SimpleQueueService.PurgeQueueInProgress":throw await hue(r);case"KmsAccessDenied":case"com.amazonaws.sqs#KmsAccessDenied":case"KMS.AccessDeniedException":throw await iue(r);case"KmsDisabled":case"com.amazonaws.sqs#KmsDisabled":case"KMS.DisabledException":throw await aue(r);case"KmsInvalidKeyUsage":case"com.amazonaws.sqs#KmsInvalidKeyUsage":case"KMS.InvalidKeyUsageException":throw await cue(r);case"KmsInvalidState":case"com.amazonaws.sqs#KmsInvalidState":case"KMS.InvalidStateException":throw await due(r);case"KmsNotFound":case"com.amazonaws.sqs#KmsNotFound":case"KMS.NotFoundException":throw await uue(r);case"KmsOptInRequired":case"com.amazonaws.sqs#KmsOptInRequired":case"KMS.OptInRequired":throw await lue(r);case"KmsThrottled":case"com.amazonaws.sqs#KmsThrottled":case"KMS.ThrottlingException":throw await fue(r);case"InvalidMessageContents":case"com.amazonaws.sqs#InvalidMessageContents":throw await nue(r);case"BatchRequestTooLong":case"com.amazonaws.sqs#BatchRequestTooLong":case"AWS.SimpleQueueService.BatchRequestTooLong":throw await Yde(r);default:let n=r.body;return fle({output:e,parsedBody:n,errorCode:s})}},Jde=async(e,t)=>{let r=e.body,s=R._json(r),n=new qg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},Yde=async(e,t)=>{let r=e.body,s=R._json(r),n=new ty({$metadata:X(e),...s});return R.decorateServiceException(n,r)},Xde=async(e,t)=>{let r=e.body,s=R._json(r),n=new Fg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},Zde=async(e,t)=>{let r=e.body,s=R._json(r),n=new Ag({$metadata:X(e),...s});return R.decorateServiceException(n,r)},eue=async(e,t)=>{let r=e.body,s=R._json(r),n=new jg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},tue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Bg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},rue=async(e,t)=>{let r=e.body,s=R._json(r),n=new $g({$metadata:X(e),...s});return R.decorateServiceException(n,r)},sue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Vg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},nue=async(e,t)=>{let r=e.body,s=R._json(r),n=new ey({$metadata:X(e),...s});return R.decorateServiceException(n,r)},oue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Ig({$metadata:X(e),...s});return R.decorateServiceException(n,r)},iue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Wg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},aue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Qg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},cue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Kg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},due=async(e,t)=>{let r=e.body,s=R._json(r),n=new Jg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},uue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Yg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},lue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Xg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},fue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Zg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},pue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Mg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},mue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Pg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},hue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Gg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},gue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Hg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},yue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Ng({$metadata:X(e),...s});return R.decorateServiceException(n,r)},Sue=async(e,t)=>{let r=e.body,s=R._json(r),n=new zg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},_ue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Lg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},Eue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Og({$metadata:X(e),...s});return R.decorateServiceException(n,r)},wue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Dg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},bue=async(e,t)=>{let r=e.body,s=R._json(r),n=new Ug({$metadata:X(e),...s});return R.decorateServiceException(n,r)},vue=async(e,t)=>{let r=e.body,s=R._json(r),n=new kg({$metadata:X(e),...s});return R.decorateServiceException(n,r)},xue=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),Cue=(e,t)=>R.take(e,{AWSAccountIds:r=>Rue(r),Actions:r=>xue(r),Label:M._toStr,QueueUrl:M._toStr}),OH=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),Rue=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),kH=(e,t)=>e.filter(r=>r!=null).map(r=>t.base64Encoder(r)),Tue=(e,t)=>R.take(e,{TaskHandle:M._toStr}),Aue=(e,t)=>R.take(e,{Entries:r=>Pue(r),QueueUrl:M._toStr}),Iue=(e,t)=>R.take(e,{Id:M._toStr,ReceiptHandle:M._toStr,VisibilityTimeout:M._toNum}),Pue=(e,t)=>e.filter(r=>r!=null).map(r=>Iue(r)),Nue=(e,t)=>R.take(e,{QueueUrl:M._toStr,ReceiptHandle:M._toStr,VisibilityTimeout:M._toNum}),Oue=(e,t)=>R.take(e,{Attributes:r=>LH(r),QueueName:M._toStr,tags:r=>FH(r)}),kue=(e,t)=>R.take(e,{Entries:r=>Mue(r),QueueUrl:M._toStr}),Due=(e,t)=>R.take(e,{Id:M._toStr,ReceiptHandle:M._toStr}),Mue=(e,t)=>e.filter(r=>r!=null).map(r=>Due(r)),Lue=(e,t)=>R.take(e,{QueueUrl:M._toStr,ReceiptHandle:M._toStr}),que=(e,t)=>R.take(e,{QueueUrl:M._toStr}),Fue=(e,t)=>R.take(e,{AttributeNames:r=>OH(r),QueueUrl:M._toStr}),$ue=(e,t)=>R.take(e,{QueueName:M._toStr,QueueOwnerAWSAccountId:M._toStr}),Uue=(e,t)=>R.take(e,{MaxResults:M._toNum,NextToken:M._toStr,QueueUrl:M._toStr}),jue=(e,t)=>R.take(e,{MaxResults:M._toNum,SourceArn:M._toStr}),Bue=(e,t)=>R.take(e,{MaxResults:M._toNum,NextToken:M._toStr,QueueNamePrefix:M._toStr}),Hue=(e,t)=>R.take(e,{QueueUrl:M._toStr}),zue=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),Vue=(e,t)=>R.take(e,{BinaryListValues:r=>kH(r,t),BinaryValue:t.base64Encoder,DataType:M._toStr,StringListValues:r=>qH(r),StringValue:M._toStr}),DH=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=Vue(n,t)),r),{}),MH=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=Wue(n,t)),r),{}),Gue=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),Wue=(e,t)=>R.take(e,{BinaryListValues:r=>kH(r,t),BinaryValue:t.base64Encoder,DataType:M._toStr,StringListValues:r=>qH(r),StringValue:M._toStr}),Que=(e,t)=>R.take(e,{QueueUrl:M._toStr}),LH=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=M._toStr(n)),r),{}),Kue=(e,t)=>R.take(e,{AttributeNames:r=>OH(r),MaxNumberOfMessages:M._toNum,MessageAttributeNames:r=>zue(r),MessageSystemAttributeNames:r=>Gue(r),QueueUrl:M._toStr,ReceiveRequestAttemptId:M._toStr,VisibilityTimeout:M._toNum,WaitTimeSeconds:M._toNum}),Jue=(e,t)=>R.take(e,{Label:M._toStr,QueueUrl:M._toStr}),Yue=(e,t)=>R.take(e,{Entries:r=>Zue(r,t),QueueUrl:M._toStr}),Xue=(e,t)=>R.take(e,{DelaySeconds:M._toNum,Id:M._toStr,MessageAttributes:r=>DH(r,t),MessageBody:M._toStr,MessageDeduplicationId:M._toStr,MessageGroupId:M._toStr,MessageSystemAttributes:r=>MH(r,t)}),Zue=(e,t)=>e.filter(r=>r!=null).map(r=>Xue(r,t)),ele=(e,t)=>R.take(e,{DelaySeconds:M._toNum,MessageAttributes:r=>DH(r,t),MessageBody:M._toStr,MessageDeduplicationId:M._toStr,MessageGroupId:M._toStr,MessageSystemAttributes:r=>MH(r,t),QueueUrl:M._toStr}),tle=(e,t)=>R.take(e,{Attributes:r=>LH(r),QueueUrl:M._toStr}),rle=(e,t)=>R.take(e,{DestinationArn:M._toStr,MaxNumberOfMessagesPerSecond:M._toNum,SourceArn:M._toStr}),qH=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),sle=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),FH=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=M._toStr(n)),r),{}),nle=(e,t)=>R.take(e,{QueueUrl:M._toStr,Tags:r=>FH(r)}),ole=(e,t)=>R.take(e,{QueueUrl:M._toStr,TagKeys:r=>sle(r)}),ile=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>t.base64Decoder(s)),ale=(e,t)=>R.take(e,{Attributes:R._json,Body:R.expectString,MD5OfBody:R.expectString,MD5OfMessageAttributes:R.expectString,MessageAttributes:r=>dle(r,t),MessageId:R.expectString,ReceiptHandle:R.expectString}),cle=(e,t)=>R.take(e,{BinaryListValues:r=>ile(r,t),BinaryValue:t.base64Decoder,DataType:R.expectString,StringListValues:R._json,StringValue:R.expectString}),dle=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=cle(n,t)),r),{}),ule=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>ale(s,t)),lle=(e,t)=>R.take(e,{Messages:r=>ule(r,t)}),X=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),fle=R.withBaseException(Re),Ye=async(e,t,r,s,n)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.body=n),new SC.HttpRequest(d)};function Xe(e){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`AmazonSQS.${e}`,"x-amzn-query-mode":"true"}}var ple=(e,t)=>{let r=t["x-amzn-query-error"];if(e.body!==void 0&&r!=null){let[s,n]=r.split(";"),o=Object.entries(e.body),i={Type:n,Code:s};Object.assign(e.body,i);for(let[a,c]of o)i[a]=c;delete i.__type,e.body.Error=i}},ry=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","AddPermission",{}).n("SQSClient","AddPermissionCommand").f(void 0,void 0).ser(nde).de(Tde).build(){},sy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","CancelMessageMoveTask",{}).n("SQSClient","CancelMessageMoveTaskCommand").f(void 0,void 0).ser(ode).de(Ade).build(){},ny=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ChangeMessageVisibilityBatch",{}).n("SQSClient","ChangeMessageVisibilityBatchCommand").f(void 0,void 0).ser(ade).de(Pde).build(){},oy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ChangeMessageVisibility",{}).n("SQSClient","ChangeMessageVisibilityCommand").f(void 0,void 0).ser(ide).de(Ide).build(){},iy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","CreateQueue",{}).n("SQSClient","CreateQueueCommand").f(void 0,void 0).ser(cde).de(Nde).build(){},ay=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteMessageBatch",{}).n("SQSClient","DeleteMessageBatchCommand").f(void 0,void 0).ser(ude).de(kde).build(){},cy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteMessage",{}).n("SQSClient","DeleteMessageCommand").f(void 0,void 0).ser(dde).de(Ode).build(){},dy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteQueue",{}).n("SQSClient","DeleteQueueCommand").f(void 0,void 0).ser(lde).de(Dde).build(){},uy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","GetQueueAttributes",{}).n("SQSClient","GetQueueAttributesCommand").f(void 0,void 0).ser(fde).de(Mde).build(){},ly=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","GetQueueUrl",{}).n("SQSClient","GetQueueUrlCommand").f(void 0,void 0).ser(pde).de(Lde).build(){},ol=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListDeadLetterSourceQueues",{}).n("SQSClient","ListDeadLetterSourceQueuesCommand").f(void 0,void 0).ser(mde).de(qde).build(){},fy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListMessageMoveTasks",{}).n("SQSClient","ListMessageMoveTasksCommand").f(void 0,void 0).ser(hde).de(Fde).build(){},il=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListQueues",{}).n("SQSClient","ListQueuesCommand").f(void 0,void 0).ser(gde).de($de).build(){},py=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListQueueTags",{}).n("SQSClient","ListQueueTagsCommand").f(void 0,void 0).ser(yde).de(Ude).build(){},my=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","PurgeQueue",{}).n("SQSClient","PurgeQueueCommand").f(void 0,void 0).ser(Sde).de(jde).build(){},hy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions()),nl.getReceiveMessagePlugin(s)]}).s("AmazonSQS","ReceiveMessage",{}).n("SQSClient","ReceiveMessageCommand").f(void 0,void 0).ser(_de).de(Bde).build(){},gy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","RemovePermission",{}).n("SQSClient","RemovePermissionCommand").f(void 0,void 0).ser(Ede).de(Hde).build(){},yy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions()),nl.getSendMessageBatchPlugin(s)]}).s("AmazonSQS","SendMessageBatch",{}).n("SQSClient","SendMessageBatchCommand").f(void 0,void 0).ser(bde).de(Vde).build(){},Sy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions()),nl.getSendMessagePlugin(s)]}).s("AmazonSQS","SendMessage",{}).n("SQSClient","SendMessageCommand").f(void 0,void 0).ser(wde).de(zde).build(){},_y=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","SetQueueAttributes",{}).n("SQSClient","SetQueueAttributesCommand").f(void 0,void 0).ser(vde).de(Gde).build(){},Ey=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","StartMessageMoveTask",{}).n("SQSClient","StartMessageMoveTaskCommand").f(void 0,void 0).ser(xde).de(Wde).build(){},wy=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","TagQueue",{}).n("SQSClient","TagQueueCommand").f(void 0,void 0).ser(Cde).de(Qde).build(){},by=class extends R.Command.classBuilder().ep(Ke).m(function(t,r,s,n){return[Qe.getSerdePlugin(s,this.serialize,this.deserialize),Be.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","UntagQueue",{}).n("SQSClient","UntagQueueCommand").f(void 0,void 0).ser(Rde).de(Kde).build(){},mle={AddPermissionCommand:ry,CancelMessageMoveTaskCommand:sy,ChangeMessageVisibilityCommand:oy,ChangeMessageVisibilityBatchCommand:ny,CreateQueueCommand:iy,DeleteMessageCommand:cy,DeleteMessageBatchCommand:ay,DeleteQueueCommand:dy,GetQueueAttributesCommand:uy,GetQueueUrlCommand:ly,ListDeadLetterSourceQueuesCommand:ol,ListMessageMoveTasksCommand:fy,ListQueuesCommand:il,ListQueueTagsCommand:py,PurgeQueueCommand:my,ReceiveMessageCommand:hy,RemovePermissionCommand:gy,SendMessageCommand:Sy,SendMessageBatchCommand:yy,SetQueueAttributesCommand:_y,StartMessageMoveTaskCommand:Ey,TagQueueCommand:wy,UntagQueueCommand:by},vy=class extends _c{};R.createAggregatedClient(mle,vy);var hle=sl.createPaginator(_c,ol,"NextToken","NextToken","MaxResults"),gle=sl.createPaginator(_c,il,"NextToken","NextToken","MaxResults");Object.defineProperty(G,"$Command",{enumerable:!0,get:function(){return R.Command}});Object.defineProperty(G,"__Client",{enumerable:!0,get:function(){return R.Client}});G.AddPermissionCommand=ry;G.BatchEntryIdsNotDistinct=qg;G.BatchRequestTooLong=ty;G.CancelMessageMoveTaskCommand=sy;G.ChangeMessageVisibilityBatchCommand=ny;G.ChangeMessageVisibilityCommand=oy;G.CreateQueueCommand=iy;G.DeleteMessageBatchCommand=ay;G.DeleteMessageCommand=cy;G.DeleteQueueCommand=dy;G.EmptyBatchRequest=Fg;G.GetQueueAttributesCommand=uy;G.GetQueueUrlCommand=ly;G.InvalidAddress=Ag;G.InvalidAttributeName=jg;G.InvalidAttributeValue=Bg;G.InvalidBatchEntryId=$g;G.InvalidIdFormat=Vg;G.InvalidMessageContents=ey;G.InvalidSecurity=Ig;G.KmsAccessDenied=Wg;G.KmsDisabled=Qg;G.KmsInvalidKeyUsage=Kg;G.KmsInvalidState=Jg;G.KmsNotFound=Yg;G.KmsOptInRequired=Xg;G.KmsThrottled=Zg;G.ListDeadLetterSourceQueuesCommand=ol;G.ListMessageMoveTasksCommand=fy;G.ListQueueTagsCommand=py;G.ListQueuesCommand=il;G.MessageNotInflight=Mg;G.MessageSystemAttributeName=rde;G.MessageSystemAttributeNameForSends=sde;G.OverLimit=Pg;G.PurgeQueueCommand=my;G.PurgeQueueInProgress=Gg;G.QueueAttributeName=tde;G.QueueDeletedRecently=Hg;G.QueueDoesNotExist=Ng;G.QueueNameExists=zg;G.ReceiptHandleIsInvalid=Lg;G.ReceiveMessageCommand=hy;G.RemovePermissionCommand=gy;G.RequestThrottled=Og;G.ResourceNotFoundException=Dg;G.SQS=vy;G.SQSClient=_c;G.SQSServiceException=Re;G.SendMessageBatchCommand=yy;G.SendMessageCommand=Sy;G.SetQueueAttributesCommand=_y;G.StartMessageMoveTaskCommand=Ey;G.TagQueueCommand=wy;G.TooManyEntriesInBatchRequest=Ug;G.UnsupportedOperation=kg;G.UntagQueueCommand=by;G.paginateListDeadLetterSourceQueues=hle;G.paginateListQueues=gle});var vle={};ct(vle,{handler:()=>ble});module.exports=Q(vle);var vc={};ct(vc,{BRAND:()=>Yz,DIRTY:()=>Ro,EMPTY_PATH:()=>Iz,INVALID:()=>Y,NEVER:()=>M4,OK:()=>Pt,ParseStatus:()=>Et,Schema:()=>de,ZodAny:()=>En,ZodArray:()=>ks,ZodBigInt:()=>Ao,ZodBoolean:()=>Io,ZodBranded:()=>wc,ZodCatch:()=>Uo,ZodDate:()=>Po,ZodDefault:()=>$o,ZodDiscriminatedUnion:()=>ul,ZodEffects:()=>_r,ZodEnum:()=>qo,ZodError:()=>It,ZodFirstPartyTypeKind:()=>ee,ZodFunction:()=>fl,ZodIntersection:()=>Do,ZodIssueCode:()=>k,ZodLazy:()=>Mo,ZodLiteral:()=>Lo,ZodMap:()=>Ii,ZodNaN:()=>Ni,ZodNativeEnum:()=>Fo,ZodNever:()=>Kr,ZodNull:()=>Oo,ZodNullable:()=>ls,ZodNumber:()=>To,ZodObject:()=>Qt,ZodOptional:()=>yr,ZodParsedType:()=>j,ZodPipeline:()=>bc,ZodPromise:()=>wn,ZodReadonly:()=>jo,ZodRecord:()=>ll,ZodSchema:()=>de,ZodSet:()=>Pi,ZodString:()=>_n,ZodSymbol:()=>Ti,ZodTransformer:()=>_r,ZodTuple:()=>us,ZodType:()=>de,ZodUndefined:()=>No,ZodUnion:()=>ko,ZodUnknown:()=>Os,ZodVoid:()=>Ai,addIssueToContext:()=>F,any:()=>i4,array:()=>u4,bigint:()=>t4,boolean:()=>LC,coerce:()=>D4,custom:()=>kC,date:()=>r4,datetimeRegex:()=>NC,defaultErrorMap:()=>Ps,discriminatedUnion:()=>m4,effect:()=>R4,enum:()=>v4,function:()=>E4,getErrorMap:()=>xi,getParsedType:()=>ds,instanceof:()=>Zz,intersection:()=>h4,isAborted:()=>cl,isAsync:()=>Ci,isDirty:()=>dl,isValid:()=>Sn,late:()=>Xz,lazy:()=>w4,literal:()=>b4,makeIssue:()=>Ec,map:()=>S4,nan:()=>e4,nativeEnum:()=>x4,never:()=>c4,null:()=>o4,nullable:()=>A4,number:()=>MC,object:()=>l4,objectUtil:()=>Ny,oboolean:()=>k4,onumber:()=>O4,optional:()=>T4,ostring:()=>N4,pipeline:()=>P4,preprocess:()=>I4,promise:()=>C4,quotelessJson:()=>Rz,record:()=>y4,set:()=>_4,setErrorMap:()=>Az,strictObject:()=>f4,string:()=>DC,symbol:()=>s4,transformer:()=>R4,tuple:()=>g4,undefined:()=>n4,union:()=>p4,unknown:()=>a4,util:()=>ge,void:()=>d4});var ge;(function(e){e.assertEqual=n=>{};function t(n){}e.assertIs=t;function r(n){throw new Error}e.assertNever=r,e.arrayToEnum=n=>{let o={};for(let i of n)o[i]=i;return o},e.getValidEnumValues=n=>{let o=e.objectKeys(n).filter(a=>typeof n[n[a]]!="number"),i={};for(let a of o)i[a]=n[a];return e.objectValues(i)},e.objectValues=n=>e.objectKeys(n).map(function(o){return n[o]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let o=[];for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&o.push(i);return o},e.find=(n,o)=>{for(let i of n)if(o(i))return i},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function s(n,o=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(o)}e.joinValues=s,e.jsonStringifyReplacer=(n,o)=>typeof o=="bigint"?o.toString():o})(ge||(ge={}));var Ny;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(Ny||(Ny={}));var j=ge.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ds=e=>{switch(typeof e){case"undefined":return j.undefined;case"string":return j.string;case"number":return Number.isNaN(e)?j.nan:j.number;case"boolean":return j.boolean;case"function":return j.function;case"bigint":return j.bigint;case"symbol":return j.symbol;case"object":return Array.isArray(e)?j.array:e===null?j.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?j.promise:typeof Map<"u"&&e instanceof Map?j.map:typeof Set<"u"&&e instanceof Set?j.set:typeof Date<"u"&&e instanceof Date?j.date:j.object;default:return j.unknown}};var k=ge.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Rz=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),It=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(o){return o.message},s={_errors:[]},n=o=>{for(let i of o.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)s._errors.push(r(i));else{let a=s,c=0;for(;c<i.path.length;){let d=i.path[c];c===i.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(r(i))):a[d]=a[d]||{_errors:[]},a=a[d],c++}}};return n(this),s}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ge.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},s=[];for(let n of this.issues)if(n.path.length>0){let o=n.path[0];r[o]=r[o]||[],r[o].push(t(n))}else s.push(t(n));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}};It.create=e=>new It(e);var Tz=(e,t)=>{let r;switch(e.code){case k.invalid_type:e.received===j.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case k.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,ge.jsonStringifyReplacer)}`;break;case k.unrecognized_keys:r=`Unrecognized key(s) in object: ${ge.joinValues(e.keys,", ")}`;break;case k.invalid_union:r="Invalid input";break;case k.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ge.joinValues(e.options)}`;break;case k.invalid_enum_value:r=`Invalid enum value. Expected ${ge.joinValues(e.options)}, received '${e.received}'`;break;case k.invalid_arguments:r="Invalid function arguments";break;case k.invalid_return_type:r="Invalid function return type";break;case k.invalid_date:r="Invalid date";break;case k.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:ge.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case k.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case k.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case k.custom:r="Invalid input";break;case k.invalid_intersection_types:r="Intersection results could not be merged";break;case k.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case k.not_finite:r="Number must be finite";break;default:r=t.defaultError,ge.assertNever(e)}return{message:r}},Ps=Tz;var RC=Ps;function Az(e){RC=e}function xi(){return RC}var Ec=e=>{let{data:t,path:r,errorMaps:s,issueData:n}=e,o=[...r,...n.path||[]],i={...n,path:o};if(n.message!==void 0)return{...n,path:o,message:n.message};let a="",c=s.filter(d=>!!d).slice().reverse();for(let d of c)a=d(i,{data:t,defaultError:a}).message;return{...n,path:o,message:a}},Iz=[];function F(e,t){let r=xi(),s=Ec({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Ps?void 0:Ps].filter(n=>!!n)});e.common.issues.push(s)}var Et=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let s=[];for(let n of r){if(n.status==="aborted")return Y;n.status==="dirty"&&t.dirty(),s.push(n.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,r){let s=[];for(let n of r){let o=await n.key,i=await n.value;s.push({key:o,value:i})}return e.mergeObjectSync(t,s)}static mergeObjectSync(t,r){let s={};for(let n of r){let{key:o,value:i}=n;if(o.status==="aborted"||i.status==="aborted")return Y;o.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof i.value<"u"||n.alwaysSet)&&(s[o.value]=i.value)}return{status:t.value,value:s}}},Y=Object.freeze({status:"aborted"}),Ro=e=>({status:"dirty",value:e}),Pt=e=>({status:"valid",value:e}),cl=e=>e.status==="aborted",dl=e=>e.status==="dirty",Sn=e=>e.status==="valid",Ci=e=>typeof Promise<"u"&&e instanceof Promise;var W;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(W||(W={}));var Sr=class{constructor(t,r,s,n){this._cachedPath=[],this.parent=t,this.data=r,this._path=s,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},TC=(e,t)=>{if(Sn(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new It(e.common.issues);return this._error=r,this._error}}};function ie(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:s,description:n}=e;if(t&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(i,a)=>{let{message:c}=e;return i.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??s??a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:c??r??a.defaultError}},description:n}}var de=class{get description(){return this._def.description}_getType(t){return ds(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:ds(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Et,ctx:{common:t.parent.common,data:t.data,parsedType:ds(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(Ci(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let s=this.safeParse(t,r);if(s.success)return s.data;throw s.error}safeParse(t,r){let s={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ds(t)},n=this._parseSync({data:t,path:s.path,parent:s});return TC(s,n)}"~validate"(t){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ds(t)};if(!this["~standard"].async)try{let s=this._parseSync({data:t,path:[],parent:r});return Sn(s)?{value:s.value}:{issues:r.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(s=>Sn(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(t,r){let s=await this.safeParseAsync(t,r);if(s.success)return s.data;throw s.error}async safeParseAsync(t,r){let s={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ds(t)},n=this._parse({data:t,path:s.path,parent:s}),o=await(Ci(n)?n:Promise.resolve(n));return TC(s,o)}refine(t,r){let s=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,o)=>{let i=t(n),a=()=>o.addIssue({code:k.custom,...s(n)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(t,r){return this._refinement((s,n)=>t(s)?!0:(n.addIssue(typeof r=="function"?r(s,n):r),!1))}_refinement(t){return new _r({schema:this,typeName:ee.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return yr.create(this,this._def)}nullable(){return ls.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ks.create(this)}promise(){return wn.create(this,this._def)}or(t){return ko.create([this,t],this._def)}and(t){return Do.create(this,t,this._def)}transform(t){return new _r({...ie(this._def),schema:this,typeName:ee.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new $o({...ie(this._def),innerType:this,defaultValue:r,typeName:ee.ZodDefault})}brand(){return new wc({typeName:ee.ZodBranded,type:this,...ie(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new Uo({...ie(this._def),innerType:this,catchValue:r,typeName:ee.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return bc.create(this,t)}readonly(){return jo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Pz=/^c[^\s-]{8,}$/i,Nz=/^[0-9a-z]+$/,Oz=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kz=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Dz=/^[a-z0-9_-]{21}$/i,Mz=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Lz=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Fz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Oy,$z=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Uz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,jz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Bz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Hz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zz=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,IC="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Vz=new RegExp(`^${IC}$`);function PC(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function Gz(e){return new RegExp(`^${PC(e)}$`)}function NC(e){let t=`${IC}T${PC(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Wz(e,t){return!!((t==="v4"||!t)&&$z.test(e)||(t==="v6"||!t)&&jz.test(e))}function Qz(e,t){if(!Mz.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(s));return!(typeof n!="object"||n===null||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)}catch{return!1}}function Kz(e,t){return!!((t==="v4"||!t)&&Uz.test(e)||(t==="v6"||!t)&&Bz.test(e))}var _n=class e extends de{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==j.string){let o=this._getOrReturnCtx(t);return F(o,{code:k.invalid_type,expected:j.string,received:o.parsedType}),Y}let s=new Et,n;for(let o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(n=this._getOrReturnCtx(t,n),F(n,{code:k.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="max")t.data.length>o.value&&(n=this._getOrReturnCtx(t,n),F(n,{code:k.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="length"){let i=t.data.length>o.value,a=t.data.length<o.value;(i||a)&&(n=this._getOrReturnCtx(t,n),i?F(n,{code:k.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&F(n,{code:k.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),s.dirty())}else if(o.kind==="email")qz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"email",code:k.invalid_string,message:o.message}),s.dirty());else if(o.kind==="emoji")Oy||(Oy=new RegExp(Fz,"u")),Oy.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"emoji",code:k.invalid_string,message:o.message}),s.dirty());else if(o.kind==="uuid")kz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"uuid",code:k.invalid_string,message:o.message}),s.dirty());else if(o.kind==="nanoid")Dz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"nanoid",code:k.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid")Pz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"cuid",code:k.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid2")Nz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"cuid2",code:k.invalid_string,message:o.message}),s.dirty());else if(o.kind==="ulid")Oz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"ulid",code:k.invalid_string,message:o.message}),s.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),F(n,{validation:"url",code:k.invalid_string,message:o.message}),s.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"regex",code:k.invalid_string,message:o.message}),s.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(n=this._getOrReturnCtx(t,n),F(n,{code:k.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),s.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(n=this._getOrReturnCtx(t,n),F(n,{code:k.invalid_string,validation:{startsWith:o.value},message:o.message}),s.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(n=this._getOrReturnCtx(t,n),F(n,{code:k.invalid_string,validation:{endsWith:o.value},message:o.message}),s.dirty()):o.kind==="datetime"?NC(o).test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{code:k.invalid_string,validation:"datetime",message:o.message}),s.dirty()):o.kind==="date"?Vz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{code:k.invalid_string,validation:"date",message:o.message}),s.dirty()):o.kind==="time"?Gz(o).test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{code:k.invalid_string,validation:"time",message:o.message}),s.dirty()):o.kind==="duration"?Lz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"duration",code:k.invalid_string,message:o.message}),s.dirty()):o.kind==="ip"?Wz(t.data,o.version)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"ip",code:k.invalid_string,message:o.message}),s.dirty()):o.kind==="jwt"?Qz(t.data,o.alg)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"jwt",code:k.invalid_string,message:o.message}),s.dirty()):o.kind==="cidr"?Kz(t.data,o.version)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"cidr",code:k.invalid_string,message:o.message}),s.dirty()):o.kind==="base64"?Hz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"base64",code:k.invalid_string,message:o.message}),s.dirty()):o.kind==="base64url"?zz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"base64url",code:k.invalid_string,message:o.message}),s.dirty()):ge.assertNever(o);return{status:s.value,value:t.data}}_regex(t,r,s){return this.refinement(n=>t.test(n),{validation:r,code:k.invalid_string,...W.errToObj(s)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...W.errToObj(t)})}url(t){return this._addCheck({kind:"url",...W.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...W.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...W.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...W.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...W.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...W.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...W.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...W.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...W.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...W.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...W.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...W.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...W.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...W.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...W.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...W.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...W.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...W.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...W.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...W.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...W.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...W.errToObj(r)})}nonempty(t){return this.min(1,W.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};_n.create=e=>new _n({checks:[],typeName:ee.ZodString,coerce:e?.coerce??!1,...ie(e)});function Jz(e,t){let r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,n=r>s?r:s,o=Number.parseInt(e.toFixed(n).replace(".","")),i=Number.parseInt(t.toFixed(n).replace(".",""));return o%i/10**n}var To=class e extends de{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==j.number){let o=this._getOrReturnCtx(t);return F(o,{code:k.invalid_type,expected:j.number,received:o.parsedType}),Y}let s,n=new Et;for(let o of this._def.checks)o.kind==="int"?ge.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),F(s,{code:k.invalid_type,expected:"integer",received:"float",message:o.message}),n.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(s=this._getOrReturnCtx(t,s),F(s,{code:k.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(s=this._getOrReturnCtx(t,s),F(s,{code:k.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="multipleOf"?Jz(t.data,o.value)!==0&&(s=this._getOrReturnCtx(t,s),F(s,{code:k.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),F(s,{code:k.not_finite,message:o.message}),n.dirty()):ge.assertNever(o);return{status:n.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,W.toString(r))}gt(t,r){return this.setLimit("min",t,!1,W.toString(r))}lte(t,r){return this.setLimit("max",t,!0,W.toString(r))}lt(t,r){return this.setLimit("max",t,!1,W.toString(r))}setLimit(t,r,s,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:W.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:W.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:W.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:W.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:W.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:W.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:W.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:W.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:W.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:W.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ge.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(r)&&Number.isFinite(t)}};To.create=e=>new To({checks:[],typeName:ee.ZodNumber,coerce:e?.coerce||!1,...ie(e)});var Ao=class e extends de{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==j.bigint)return this._getInvalidInput(t);let s,n=new Et;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(s=this._getOrReturnCtx(t,s),F(s,{code:k.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(s=this._getOrReturnCtx(t,s),F(s,{code:k.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),F(s,{code:k.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):ge.assertNever(o);return{status:n.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return F(r,{code:k.invalid_type,expected:j.bigint,received:r.parsedType}),Y}gte(t,r){return this.setLimit("min",t,!0,W.toString(r))}gt(t,r){return this.setLimit("min",t,!1,W.toString(r))}lte(t,r){return this.setLimit("max",t,!0,W.toString(r))}lt(t,r){return this.setLimit("max",t,!1,W.toString(r))}setLimit(t,r,s,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:W.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:W.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:W.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:W.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:W.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:W.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Ao.create=e=>new Ao({checks:[],typeName:ee.ZodBigInt,coerce:e?.coerce??!1,...ie(e)});var Io=class extends de{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==j.boolean){let s=this._getOrReturnCtx(t);return F(s,{code:k.invalid_type,expected:j.boolean,received:s.parsedType}),Y}return Pt(t.data)}};Io.create=e=>new Io({typeName:ee.ZodBoolean,coerce:e?.coerce||!1,...ie(e)});var Po=class e extends de{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==j.date){let o=this._getOrReturnCtx(t);return F(o,{code:k.invalid_type,expected:j.date,received:o.parsedType}),Y}if(Number.isNaN(t.data.getTime())){let o=this._getOrReturnCtx(t);return F(o,{code:k.invalid_date}),Y}let s=new Et,n;for(let o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(n=this._getOrReturnCtx(t,n),F(n,{code:k.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),s.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(n=this._getOrReturnCtx(t,n),F(n,{code:k.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),s.dirty()):ge.assertNever(o);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:W.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:W.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};Po.create=e=>new Po({checks:[],coerce:e?.coerce||!1,typeName:ee.ZodDate,...ie(e)});var Ti=class extends de{_parse(t){if(this._getType(t)!==j.symbol){let s=this._getOrReturnCtx(t);return F(s,{code:k.invalid_type,expected:j.symbol,received:s.parsedType}),Y}return Pt(t.data)}};Ti.create=e=>new Ti({typeName:ee.ZodSymbol,...ie(e)});var No=class extends de{_parse(t){if(this._getType(t)!==j.undefined){let s=this._getOrReturnCtx(t);return F(s,{code:k.invalid_type,expected:j.undefined,received:s.parsedType}),Y}return Pt(t.data)}};No.create=e=>new No({typeName:ee.ZodUndefined,...ie(e)});var Oo=class extends de{_parse(t){if(this._getType(t)!==j.null){let s=this._getOrReturnCtx(t);return F(s,{code:k.invalid_type,expected:j.null,received:s.parsedType}),Y}return Pt(t.data)}};Oo.create=e=>new Oo({typeName:ee.ZodNull,...ie(e)});var En=class extends de{constructor(){super(...arguments),this._any=!0}_parse(t){return Pt(t.data)}};En.create=e=>new En({typeName:ee.ZodAny,...ie(e)});var Os=class extends de{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Pt(t.data)}};Os.create=e=>new Os({typeName:ee.ZodUnknown,...ie(e)});var Kr=class extends de{_parse(t){let r=this._getOrReturnCtx(t);return F(r,{code:k.invalid_type,expected:j.never,received:r.parsedType}),Y}};Kr.create=e=>new Kr({typeName:ee.ZodNever,...ie(e)});var Ai=class extends de{_parse(t){if(this._getType(t)!==j.undefined){let s=this._getOrReturnCtx(t);return F(s,{code:k.invalid_type,expected:j.void,received:s.parsedType}),Y}return Pt(t.data)}};Ai.create=e=>new Ai({typeName:ee.ZodVoid,...ie(e)});var ks=class e extends de{_parse(t){let{ctx:r,status:s}=this._processInputParams(t),n=this._def;if(r.parsedType!==j.array)return F(r,{code:k.invalid_type,expected:j.array,received:r.parsedType}),Y;if(n.exactLength!==null){let i=r.data.length>n.exactLength.value,a=r.data.length<n.exactLength.value;(i||a)&&(F(r,{code:i?k.too_big:k.too_small,minimum:a?n.exactLength.value:void 0,maximum:i?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(F(r,{code:k.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(F(r,{code:k.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((i,a)=>n.type._parseAsync(new Sr(r,i,r.path,a)))).then(i=>Et.mergeArray(s,i));let o=[...r.data].map((i,a)=>n.type._parseSync(new Sr(r,i,r.path,a)));return Et.mergeArray(s,o)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:W.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:W.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:W.toString(r)}})}nonempty(t){return this.min(1,t)}};ks.create=(e,t)=>new ks({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ee.ZodArray,...ie(t)});function Ri(e){if(e instanceof Qt){let t={};for(let r in e.shape){let s=e.shape[r];t[r]=yr.create(Ri(s))}return new Qt({...e._def,shape:()=>t})}else return e instanceof ks?new ks({...e._def,type:Ri(e.element)}):e instanceof yr?yr.create(Ri(e.unwrap())):e instanceof ls?ls.create(Ri(e.unwrap())):e instanceof us?us.create(e.items.map(t=>Ri(t))):e}var Qt=class e extends de{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=ge.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==j.object){let d=this._getOrReturnCtx(t);return F(d,{code:k.invalid_type,expected:j.object,received:d.parsedType}),Y}let{status:s,ctx:n}=this._processInputParams(t),{shape:o,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof Kr&&this._def.unknownKeys==="strip"))for(let d in n.data)i.includes(d)||a.push(d);let c=[];for(let d of i){let u=o[d],l=n.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Sr(n,l,n.path,d)),alwaysSet:d in n.data})}if(this._def.catchall instanceof Kr){let d=this._def.unknownKeys;if(d==="passthrough")for(let u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(d==="strict")a.length>0&&(F(n,{code:k.unrecognized_keys,keys:a}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let u of a){let l=n.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Sr(n,l,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let d=[];for(let u of c){let l=await u.key,h=await u.value;d.push({key:l,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>Et.mergeObjectSync(s,d)):Et.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return W.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,s)=>{let n=this._def.errorMap?.(r,s).message??s.defaultError;return r.code==="unrecognized_keys"?{message:W.errToObj(t).message??n}:{message:n}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ee.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};for(let s of ge.objectKeys(t))t[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new e({...this._def,shape:()=>r})}omit(t){let r={};for(let s of ge.objectKeys(this.shape))t[s]||(r[s]=this.shape[s]);return new e({...this._def,shape:()=>r})}deepPartial(){return Ri(this)}partial(t){let r={};for(let s of ge.objectKeys(this.shape)){let n=this.shape[s];t&&!t[s]?r[s]=n:r[s]=n.optional()}return new e({...this._def,shape:()=>r})}required(t){let r={};for(let s of ge.objectKeys(this.shape))if(t&&!t[s])r[s]=this.shape[s];else{let o=this.shape[s];for(;o instanceof yr;)o=o._def.innerType;r[s]=o}return new e({...this._def,shape:()=>r})}keyof(){return OC(ge.objectKeys(this.shape))}};Qt.create=(e,t)=>new Qt({shape:()=>e,unknownKeys:"strip",catchall:Kr.create(),typeName:ee.ZodObject,...ie(t)});Qt.strictCreate=(e,t)=>new Qt({shape:()=>e,unknownKeys:"strict",catchall:Kr.create(),typeName:ee.ZodObject,...ie(t)});Qt.lazycreate=(e,t)=>new Qt({shape:e,unknownKeys:"strip",catchall:Kr.create(),typeName:ee.ZodObject,...ie(t)});var ko=class extends de{_parse(t){let{ctx:r}=this._processInputParams(t),s=this._def.options;function n(o){for(let a of o)if(a.result.status==="valid")return a.result;for(let a of o)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let i=o.map(a=>new It(a.ctx.common.issues));return F(r,{code:k.invalid_union,unionErrors:i}),Y}if(r.common.async)return Promise.all(s.map(async o=>{let i={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:i}),ctx:i}})).then(n);{let o,i=[];for(let c of s){let d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!o&&(o={result:u,ctx:d}),d.common.issues.length&&i.push(d.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let a=i.map(c=>new It(c));return F(r,{code:k.invalid_union,unionErrors:a}),Y}}get options(){return this._def.options}};ko.create=(e,t)=>new ko({options:e,typeName:ee.ZodUnion,...ie(t)});var Ns=e=>e instanceof Mo?Ns(e.schema):e instanceof _r?Ns(e.innerType()):e instanceof Lo?[e.value]:e instanceof qo?e.options:e instanceof Fo?ge.objectValues(e.enum):e instanceof $o?Ns(e._def.innerType):e instanceof No?[void 0]:e instanceof Oo?[null]:e instanceof yr?[void 0,...Ns(e.unwrap())]:e instanceof ls?[null,...Ns(e.unwrap())]:e instanceof wc||e instanceof jo?Ns(e.unwrap()):e instanceof Uo?Ns(e._def.innerType):[],ul=class e extends de{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==j.object)return F(r,{code:k.invalid_type,expected:j.object,received:r.parsedType}),Y;let s=this.discriminator,n=r.data[s],o=this.optionsMap.get(n);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(F(r,{code:k.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,s){let n=new Map;for(let o of r){let i=Ns(o.shape[t]);if(!i.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let a of i){if(n.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);n.set(a,o)}}return new e({typeName:ee.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:n,...ie(s)})}};function ky(e,t){let r=ds(e),s=ds(t);if(e===t)return{valid:!0,data:e};if(r===j.object&&s===j.object){let n=ge.objectKeys(t),o=ge.objectKeys(e).filter(a=>n.indexOf(a)!==-1),i={...e,...t};for(let a of o){let c=ky(e[a],t[a]);if(!c.valid)return{valid:!1};i[a]=c.data}return{valid:!0,data:i}}else if(r===j.array&&s===j.array){if(e.length!==t.length)return{valid:!1};let n=[];for(let o=0;o<e.length;o++){let i=e[o],a=t[o],c=ky(i,a);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return r===j.date&&s===j.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Do=class extends de{_parse(t){let{status:r,ctx:s}=this._processInputParams(t),n=(o,i)=>{if(cl(o)||cl(i))return Y;let a=ky(o.value,i.value);return a.valid?((dl(o)||dl(i))&&r.dirty(),{status:r.value,value:a.data}):(F(s,{code:k.invalid_intersection_types}),Y)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([o,i])=>n(o,i)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};Do.create=(e,t,r)=>new Do({left:e,right:t,typeName:ee.ZodIntersection,...ie(r)});var us=class e extends de{_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==j.array)return F(s,{code:k.invalid_type,expected:j.array,received:s.parsedType}),Y;if(s.data.length<this._def.items.length)return F(s,{code:k.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&s.data.length>this._def.items.length&&(F(s,{code:k.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...s.data].map((i,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new Sr(s,i,s.path,a)):null}).filter(i=>!!i);return s.common.async?Promise.all(o).then(i=>Et.mergeArray(r,i)):Et.mergeArray(r,o)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};us.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new us({items:e,typeName:ee.ZodTuple,rest:null,...ie(t)})};var ll=class e extends de{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==j.object)return F(s,{code:k.invalid_type,expected:j.object,received:s.parsedType}),Y;let n=[],o=this._def.keyType,i=this._def.valueType;for(let a in s.data)n.push({key:o._parse(new Sr(s,a,s.path,a)),value:i._parse(new Sr(s,s.data[a],s.path,a)),alwaysSet:a in s.data});return s.common.async?Et.mergeObjectAsync(r,n):Et.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(t,r,s){return r instanceof de?new e({keyType:t,valueType:r,typeName:ee.ZodRecord,...ie(s)}):new e({keyType:_n.create(),valueType:t,typeName:ee.ZodRecord,...ie(r)})}},Ii=class extends de{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==j.map)return F(s,{code:k.invalid_type,expected:j.map,received:s.parsedType}),Y;let n=this._def.keyType,o=this._def.valueType,i=[...s.data.entries()].map(([a,c],d)=>({key:n._parse(new Sr(s,a,s.path,[d,"key"])),value:o._parse(new Sr(s,c,s.path,[d,"value"]))}));if(s.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of i){let d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return Y;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(d.value,u.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let c of i){let d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return Y;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(d.value,u.value)}return{status:r.value,value:a}}}};Ii.create=(e,t,r)=>new Ii({valueType:t,keyType:e,typeName:ee.ZodMap,...ie(r)});var Pi=class e extends de{_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==j.set)return F(s,{code:k.invalid_type,expected:j.set,received:s.parsedType}),Y;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(F(s,{code:k.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(F(s,{code:k.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let o=this._def.valueType;function i(c){let d=new Set;for(let u of c){if(u.status==="aborted")return Y;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}let a=[...s.data.values()].map((c,d)=>o._parse(new Sr(s,c,s.path,d)));return s.common.async?Promise.all(a).then(c=>i(c)):i(a)}min(t,r){return new e({...this._def,minSize:{value:t,message:W.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:W.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};Pi.create=(e,t)=>new Pi({valueType:e,minSize:null,maxSize:null,typeName:ee.ZodSet,...ie(t)});var fl=class e extends de{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==j.function)return F(r,{code:k.invalid_type,expected:j.function,received:r.parsedType}),Y;function s(a,c){return Ec({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,xi(),Ps].filter(d=>!!d),issueData:{code:k.invalid_arguments,argumentsError:c}})}function n(a,c){return Ec({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,xi(),Ps].filter(d=>!!d),issueData:{code:k.invalid_return_type,returnTypeError:c}})}let o={errorMap:r.common.contextualErrorMap},i=r.data;if(this._def.returns instanceof wn){let a=this;return Pt(async function(...c){let d=new It([]),u=await a._def.args.parseAsync(c,o).catch(m=>{throw d.addIssue(s(c,m)),d}),l=await Reflect.apply(i,this,u);return await a._def.returns._def.type.parseAsync(l,o).catch(m=>{throw d.addIssue(n(l,m)),d})})}else{let a=this;return Pt(function(...c){let d=a._def.args.safeParse(c,o);if(!d.success)throw new It([s(c,d.error)]);let u=Reflect.apply(i,this,d.data),l=a._def.returns.safeParse(u,o);if(!l.success)throw new It([n(u,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:us.create(t).rest(Os.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,s){return new e({args:t||us.create([]).rest(Os.create()),returns:r||Os.create(),typeName:ee.ZodFunction,...ie(s)})}},Mo=class extends de{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Mo.create=(e,t)=>new Mo({getter:e,typeName:ee.ZodLazy,...ie(t)});var Lo=class extends de{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return F(r,{received:r.data,code:k.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:t.data}}get value(){return this._def.value}};Lo.create=(e,t)=>new Lo({value:e,typeName:ee.ZodLiteral,...ie(t)});function OC(e,t){return new qo({values:e,typeName:ee.ZodEnum,...ie(t)})}var qo=class e extends de{_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),s=this._def.values;return F(r,{expected:ge.joinValues(s),received:r.parsedType,code:k.invalid_type}),Y}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){let r=this._getOrReturnCtx(t),s=this._def.values;return F(r,{received:r.data,code:k.invalid_enum_value,options:s}),Y}return Pt(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(s=>!t.includes(s)),{...this._def,...r})}};qo.create=OC;var Fo=class extends de{_parse(t){let r=ge.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==j.string&&s.parsedType!==j.number){let n=ge.objectValues(r);return F(s,{expected:ge.joinValues(n),received:s.parsedType,code:k.invalid_type}),Y}if(this._cache||(this._cache=new Set(ge.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){let n=ge.objectValues(r);return F(s,{received:s.data,code:k.invalid_enum_value,options:n}),Y}return Pt(t.data)}get enum(){return this._def.values}};Fo.create=(e,t)=>new Fo({values:e,typeName:ee.ZodNativeEnum,...ie(t)});var wn=class extends de{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==j.promise&&r.common.async===!1)return F(r,{code:k.invalid_type,expected:j.promise,received:r.parsedType}),Y;let s=r.parsedType===j.promise?r.data:Promise.resolve(r.data);return Pt(s.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};wn.create=(e,t)=>new wn({type:e,typeName:ee.ZodPromise,...ie(t)});var _r=class extends de{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ee.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:s}=this._processInputParams(t),n=this._def.effect||null,o={addIssue:i=>{F(s,i),i.fatal?r.abort():r.dirty()},get path(){return s.path}};if(o.addIssue=o.addIssue.bind(o),n.type==="preprocess"){let i=n.transform(s.data,o);if(s.common.async)return Promise.resolve(i).then(async a=>{if(r.value==="aborted")return Y;let c=await this._def.schema._parseAsync({data:a,path:s.path,parent:s});return c.status==="aborted"?Y:c.status==="dirty"?Ro(c.value):r.value==="dirty"?Ro(c.value):c});{if(r.value==="aborted")return Y;let a=this._def.schema._parseSync({data:i,path:s.path,parent:s});return a.status==="aborted"?Y:a.status==="dirty"?Ro(a.value):r.value==="dirty"?Ro(a.value):a}}if(n.type==="refinement"){let i=a=>{let c=n.refinement(a,o);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(s.common.async===!1){let a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?Y:(a.status==="dirty"&&r.dirty(),i(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>a.status==="aborted"?Y:(a.status==="dirty"&&r.dirty(),i(a.value).then(()=>({status:r.value,value:a.value}))))}if(n.type==="transform")if(s.common.async===!1){let i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Sn(i))return Y;let a=n.transform(i.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>Sn(i)?Promise.resolve(n.transform(i.value,o)).then(a=>({status:r.value,value:a})):Y);ge.assertNever(n)}};_r.create=(e,t,r)=>new _r({schema:e,typeName:ee.ZodEffects,effect:t,...ie(r)});_r.createWithPreprocess=(e,t,r)=>new _r({schema:t,effect:{type:"preprocess",transform:e},typeName:ee.ZodEffects,...ie(r)});var yr=class extends de{_parse(t){return this._getType(t)===j.undefined?Pt(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};yr.create=(e,t)=>new yr({innerType:e,typeName:ee.ZodOptional,...ie(t)});var ls=class extends de{_parse(t){return this._getType(t)===j.null?Pt(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};ls.create=(e,t)=>new ls({innerType:e,typeName:ee.ZodNullable,...ie(t)});var $o=class extends de{_parse(t){let{ctx:r}=this._processInputParams(t),s=r.data;return r.parsedType===j.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};$o.create=(e,t)=>new $o({innerType:e,typeName:ee.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...ie(t)});var Uo=class extends de{_parse(t){let{ctx:r}=this._processInputParams(t),s={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ci(n)?n.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new It(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new It(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Uo.create=(e,t)=>new Uo({innerType:e,typeName:ee.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...ie(t)});var Ni=class extends de{_parse(t){if(this._getType(t)!==j.nan){let s=this._getOrReturnCtx(t);return F(s,{code:k.invalid_type,expected:j.nan,received:s.parsedType}),Y}return{status:"valid",value:t.data}}};Ni.create=e=>new Ni({typeName:ee.ZodNaN,...ie(e)});var Yz=Symbol("zod_brand"),wc=class extends de{_parse(t){let{ctx:r}=this._processInputParams(t),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}},bc=class e extends de{_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?Y:o.status==="dirty"?(r.dirty(),Ro(o.value)):this._def.out._parseAsync({data:o.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?Y:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(t,r){return new e({in:t,out:r,typeName:ee.ZodPipeline})}},jo=class extends de{_parse(t){let r=this._def.innerType._parse(t),s=n=>(Sn(n)&&(n.value=Object.freeze(n.value)),n);return Ci(r)?r.then(n=>s(n)):s(r)}unwrap(){return this._def.innerType}};jo.create=(e,t)=>new jo({innerType:e,typeName:ee.ZodReadonly,...ie(t)});function AC(e,t){let r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function kC(e,t={},r){return e?En.create().superRefine((s,n)=>{let o=e(s);if(o instanceof Promise)return o.then(i=>{if(!i){let a=AC(t,s),c=a.fatal??r??!0;n.addIssue({code:"custom",...a,fatal:c})}});if(!o){let i=AC(t,s),a=i.fatal??r??!0;n.addIssue({code:"custom",...i,fatal:a})}}):En.create()}var Xz={object:Qt.lazycreate},ee;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ee||(ee={}));var Zz=(e,t={message:`Input not instance of ${e.name}`})=>kC(r=>r instanceof e,t),DC=_n.create,MC=To.create,e4=Ni.create,t4=Ao.create,LC=Io.create,r4=Po.create,s4=Ti.create,n4=No.create,o4=Oo.create,i4=En.create,a4=Os.create,c4=Kr.create,d4=Ai.create,u4=ks.create,l4=Qt.create,f4=Qt.strictCreate,p4=ko.create,m4=ul.create,h4=Do.create,g4=us.create,y4=ll.create,S4=Ii.create,_4=Pi.create,E4=fl.create,w4=Mo.create,b4=Lo.create,v4=qo.create,x4=Fo.create,C4=wn.create,R4=_r.create,T4=yr.create,A4=ls.create,I4=_r.createWithPreprocess,P4=bc.create,N4=()=>DC().optional(),O4=()=>MC().optional(),k4=()=>LC().optional(),D4={string:(e=>_n.create({...e,coerce:!0})),number:(e=>To.create({...e,coerce:!0})),boolean:(e=>Io.create({...e,coerce:!0})),bigint:(e=>Ao.create({...e,coerce:!0})),date:(e=>Po.create({...e,coerce:!0}))};var M4=Y;var $t=class extends Error{code;statusCode;details;constructor(t,r,s=400,n){super(r),this.code=t,this.statusCode=s,this.details=n,Object.setPrototypeOf(this,new.target.prototype)}},xc=class extends $t{constructor(t="Unauthorized"){super("UNAUTHORIZED",t,401)}},pl=class extends $t{constructor(t="Forbidden"){super("FORBIDDEN",t,403)}};var Ds=class extends $t{constructor(t="Validation failed",r){super("VALIDATION_ERROR",t,422,r)}},qC=e=>e instanceof $t?e:e instanceof Error?new $t("INTERNAL_SERVER_ERROR",e.message||"Internal server error",500):new $t("INTERNAL_SERVER_ERROR","Internal server error",500);var ml=(e,t,r,s)=>{let n={level:e,message:t,timestamp:new Date().toISOString(),...r};return JSON.stringify(s!==void 0?{...n,meta:s}:n)},Er={debug(e,t,r){console.debug(ml("debug",e,t,r))},info(e,t,r){console.info(ml("info",e,t,r))},warn(e,t,r){console.warn(ml("warn",e,t,r))},error(e,t,r){console.error(ml("error",e,t,r))}};var nh=y(PL());var Lr=y(yv(),1),Jbe=Lr.default.Client,SF=Lr.default.Pool,Ybe=Lr.default.Connection,Xbe=Lr.default.types,Zbe=Lr.default.Query,eve=Lr.default.DatabaseError,tve=Lr.default.escapeIdentifier,rve=Lr.default.escapeLiteral,sve=Lr.default.Result,nve=Lr.default.TypeOverrides,ove=Lr.default.defaults;var sne=process.env.AWS_REGION||process.env.COGNITO_REGION||"ap-southeast-2",nne=new nh.SecretsManagerClient({region:sne}),th=null,rh=null,sh=null,one=()=>{let e=process.env.DB_HOST,t=process.env.DB_USER,r=process.env.DB_PASS,s=process.env.DB_NAME;if(!e||!t||!r||!s)return null;let n=process.env.DB_SSL,o=n?n.toLowerCase()==="true":void 0;return{host:e,port:Number(process.env.DB_PORT||5432),username:t,password:r,dbname:s,ssl:o}},ine=e=>{if(!e)throw new Error("Database secret string is empty");let t=JSON.parse(e);if(!t.host||!t.username||!t.password||!t.dbname)throw new Error("Database secret is missing required properties");return{host:t.host,port:Number(t.port||5432),username:t.username,password:t.password,dbname:t.dbname,ssl:typeof t.ssl=="boolean"?t.ssl:void 0}},ane=async()=>{if(sh&&sh.expiresAt>Date.now())return sh.value;let e=process.env.DB_SECRET_ARN;if(!e)throw new Error("DB_SECRET_ARN environment variable is not set");let t=new nh.GetSecretValueCommand({SecretId:e}),r=await nne.send(t),s=ine(r.SecretString);return sh={value:s,expiresAt:Date.now()+Number(process.env.DB_SECRET_CACHE_MS||6e4)},s},cne=async()=>{let e=one()??await ane(),t=Number(process.env.DB_POOL_MAX||10),r=typeof e.ssl=="boolean"?e.ssl?{rejectUnauthorized:!1}:void 0:process.env.DB_SSL?.toLowerCase()==="true"?{rejectUnauthorized:!1}:void 0,s=new SF({host:e.host,port:e.port,user:e.username,password:e.password,database:e.dbname,max:t,idleTimeoutMillis:Number(process.env.DB_IDLE_TIMEOUT_MS||3e4),connectionTimeoutMillis:Number(process.env.DB_CONNECT_TIMEOUT_MS||5e3),ssl:r});return s.on("error",n=>{Er.error("Unexpected database error",void 0,{err:n})}),s},_F=async()=>(th||(rh||(rh=cne().then(e=>(th=e,e)).finally(()=>{rh=null})),th=await rh),th),qr=async(e,t)=>{let r=await _F();return typeof e=="string"?r.query(e,t):r.query(e)},wv=async e=>{let r=await(await _F()).connect();try{await r.query("BEGIN");let s=await e(r);return await r.query("COMMIT"),s}catch(s){throw await r.query("ROLLBACK"),s}finally{r.release()}};var EF=e=>({userId:e.user_id,cognitoSub:e.cognito_sub,email:e.email,displayName:e.display_name,teamId:e.team_id}),oh=class{async findByCognitoSub(t){let r=await qr(`
      SELECT user_id, cognito_sub, email, display_name, team_id
      FROM users
      WHERE cognito_sub = $1
      LIMIT 1
      `,[t]);return r.rowCount===0?null:EF(r.rows[0])}async upsertFromClaims(t){let r=await qr(`
      INSERT INTO users (cognito_sub, email, display_name, team_id)
      VALUES ($1, $2, $3, $4)
      ON CONFLICT (cognito_sub) DO UPDATE
      SET
        email = COALESCE(EXCLUDED.email, users.email),
        display_name = COALESCE(EXCLUDED.display_name, users.display_name),
        team_id = COALESCE(EXCLUDED.team_id, users.team_id),
        updated_at = CURRENT_TIMESTAMP
      RETURNING user_id, cognito_sub, email, display_name, team_id
      `,[t.cognitoSub,t.email??null,t.displayName??null,t.teamId??null]);return EF(r.rows[0])}};var dne=new oh,une=e=>{let t=e.trim();if(!t)return[];if(t.startsWith("[")&&t.endsWith("]"))try{let r=JSON.parse(t);if(Array.isArray(r))return r.filter(s=>typeof s=="string").map(s=>s.trim()).filter(s=>s.length>0)}catch{}return t.includes(",")?t.split(",").map(r=>r.trim()).filter(r=>r.length>0):[t]},lne=(e,t)=>{if(typeof t=="string")switch(e){case"cognito:groups":case"custom:roles":case"roles":return une(t);default:return t}return t},fne=e=>{let r=e.requestContext.authorizer?.jwt?.claims;if(!r)throw new xc("Missing JWT claims from authorizer");let s=Object.entries(r).reduce((n,[o,i])=>(n[o]=lne(o,i),n),{});if(!s.sub||typeof s.sub!="string")throw new xc("Token missing subject");return s},wF=async e=>{let t=fne(e);Er.debug("JWT claims received",{sub:t.sub});let r=typeof t.email=="string"?t.email:typeof t["custom:email"]=="string"?t["custom:email"]:null,s=[],n=w=>{if(w){if(Array.isArray(w)){w.filter(C=>typeof C=="string"&&C.trim().length>0).forEach(C=>s.push(C.trim()));return}typeof w=="string"&&w.trim().length>0&&s.push(w.trim())}};n(t["cognito:groups"]),n(t["custom:roles"]),n(t.roles);let o=Array.from(new Set(s.map(w=>w.toUpperCase()).map(w=>w==="ADMIN"?"ADMIN":"EMPLOYEE")));o.length===0&&o.push("EMPLOYEE");let i=typeof t["custom:display_name"]=="string"&&t["custom:display_name"]||typeof t.name=="string"&&t.name||typeof t.preferred_username=="string"&&t.preferred_username||typeof t["cognito:username"]=="string"&&t["cognito:username"]||r||t.sub,a=t["custom:team_id"]??t.team_id,c=typeof a=="string"?Number(a):typeof a=="number"?a:Number.NaN,d=Number.isFinite(c)?Number(c):null,u=await dne.upsertFromClaims({cognitoSub:t.sub,email:r,displayName:i,teamId:d??void 0}),l=u.teamId??d??null,h=u.email??r??void 0,m=u.displayName??i??h,g={userId:u.userId,email:h??t.sub,displayName:m,teamId:l,roles:o,sub:t.sub};return Er.debug("User roles resolved",{userId:g.userId,roles:g.roles}),g},bF=(e,t)=>{if(!(Array.isArray(t)?t:[t]).some(n=>e.roles.includes(n)))throw new pl("User does not have sufficient privileges")};var ih=(process.env.ALLOWED_ORIGINS||"").split(",").map(e=>e.trim()).filter(e=>e.length>0),vF={"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Authorization,Content-Type,Idempotency-Key,X-Amz-Date,X-Api-Key,X-Amz-Security-Token","Access-Control-Allow-Methods":"GET,POST,PATCH,OPTIONS"},xF=e=>e?ih.length===0||ih.includes(e)?e:ih[0]:ih[0]||"*",ah=(e,t,r,s)=>({statusCode:e,headers:{...vF,"Access-Control-Allow-Origin":xF(r),...s},body:JSON.stringify(t)}),CF=(e,t,r,s)=>({statusCode:e,headers:{...vF,"Access-Control-Allow-Origin":xF(r),...s},body:JSON.stringify(t)});var pne=e=>e.headers?.origin||e.headers?.Origin,RF=(e,t={requireAuth:!0})=>async(r,s)=>{let n=pne(r),o=null;try{t.requireAuth!==!1&&(o=await wF(r),t.allowedRoles&&bF(o,t.allowedRoles));let i=await e({event:r,context:s,user:o});return i&&typeof i=="object"&&"statusCode"in i?i:ah(200,i,n)}catch(i){let a=qC(i);return Er.error("Handler failed",{requestId:s.awsRequestId,userId:o?.userId},{error:i}),CF(a.statusCode,{code:a.code,message:a.message,details:a.details,requestId:s.awsRequestId},n)}};var mne=(e,t)=>{try{return e.parse(t)}catch(r){throw r instanceof It?new Ds("Validation failed",{issues:r.issues}):r}},TF=(e,t)=>{if(!t)throw new Ds("Request body is required");let r;try{r=JSON.parse(t)}catch{throw new Ds("Invalid JSON body")}return mne(e,r)};var Ty=y($H());var UH=Number(process.env.MAX_PAGE_SIZE||100),jH=e=>{let t=e.page?Number(e.page):1,r=e.size?Number(e.size):25,s=e.sort??"created_at,desc";if(!Number.isFinite(t)||t<1)throw new Ds("`page` must be a positive integer");if(!Number.isFinite(r)||r<1||r>UH)throw new Ds(`\`size\` must be between 1 and ${UH}`);return{page:t,size:r,sort:s}},BH=(e,t,r)=>({items:e,page:t.page??1,size:t.size??e.length,total:r}),HH=(e,t,r="created_at,desc")=>{let s=e??r,[n,o]=s.split(","),i=t.includes(n)?n:t[0],a=o?.toUpperCase()==="ASC"?"ASC":"DESC";return{field:i,direction:a}};var yle=["created_at","updated_at","start_date","end_date","status"],Sle=e=>({balanceId:e.balance_id,policyId:e.policy_id,policyName:e.policy_name,balanceDays:Number(e.balance_days),year:e.year}),xy=e=>({requestId:e.request_id,userId:e.user_id,userEmail:e.user_email,userName:e.user_name,userTeamId:e.user_team_id,policyId:e.policy_id,policyName:e.policy_name,status:e.status,startDate:e.start_date,endDate:e.end_date,halfDay:e.half_day,reason:e.reason,graphEventId:e.graph_event_id,createdAt:e.created_at,updatedAt:e.updated_at,daysRequested:Number(e.days_requested)}),Cy=class{async getLeaveBalances(t,r){return(await qr(`
      SELECT
        lb.balance_id,
        lb.policy_id,
        lp.name AS policy_name,
        lb.balance_days,
        lb.year
      FROM leave_balances lb
      INNER JOIN leave_policies lp ON lb.policy_id = lp.policy_id
      WHERE lb.user_id = $1 AND lb.year = $2
      ORDER BY lp.name ASC
      `,[t,r])).rows.map(Sle)}async getLeavePolicies(){return(await qr("SELECT policy_id, name, annual_limit FROM leave_policies WHERE is_active = true ORDER BY name")).rows}async initializeLeaveBalance(t,r,s,n){await qr(`
      INSERT INTO leave_balances (user_id, policy_id, balance_days, year)
      VALUES ($1, $2, $3, $4)
      ON CONFLICT (user_id, policy_id, year)
      DO NOTHING
      `,[t,r,s,n])}async getLeaveRequests(t){let r=jH({page:t.page?.toString(),size:t.size?.toString(),sort:t.sort}),{field:s,direction:n}=HH(r.sort,yle),o=(r.page-1)*r.size,i=[],a=1,c=`
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE 1=1
    `;t.userId!==void 0&&t.userId!==null&&(c+=` AND lr.user_id = $${a++}`,i.push(t.userId)),t.status&&(c+=` AND lr.status = $${a++}`,i.push(t.status)),t.startDate&&(c+=` AND lr.start_date >= $${a++}`,i.push(t.startDate)),t.endDate&&(c+=` AND lr.end_date <= $${a++}`,i.push(t.endDate));let d=`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      ${c}
      ORDER BY lr.${s} ${n}
      LIMIT $${a++} OFFSET $${a++}
    `;i.push(r.size,o);let[u,l]=await Promise.all([qr(d,i),qr(`SELECT COUNT(*) ${c}`,i.slice(0,-2))]),h=Number(l.rows[0]?.count??0);return BH(u.rows.map(xy),r,h)}async getLeaveRequestById(t){let r=await qr(`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE lr.request_id = $1
      `,[t]);return r.rowCount===0?null:xy(r.rows[0])}async insertLeaveRequest(t,r){let n=(await t.query(`
      INSERT INTO leave_requests (
        user_id,
        user_email,
        user_name,
        user_team_id,
        policy_id,
        start_date,
        end_date,
        half_day,
        reason,
        status
      )
      VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, 'PENDING')
      RETURNING request_id
      `,[r.userId,r.userEmail,r.userName??null,r.userTeamId,r.policyId,r.startDate,r.endDate,r.halfDay,r.reason??null])).rows[0].request_id,o=await t.query(`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE lr.request_id = $1
      `,[n]);return xy(o.rows[0])}async updateLeaveRequestStatus(t,r,s,n,o){if((await t.query(`
      UPDATE leave_requests
      SET status = $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE request_id = $2
      RETURNING request_id
      `,[s,r])).rowCount===0)throw new Error("Leave request not found");await t.query(`
      INSERT INTO leave_audit (request_id, action, actor_id, actor_email, actor_name, notes)
      VALUES ($1, $2, $3, $4, $5, $6)
      `,[r,s,n.id,n.email,n.name??null,o??null]);let a=await t.query(`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE lr.request_id = $1
      `,[r]);return xy(a.rows[0])}async adjustLeaveBalance(t,r,s,n,o){await t.query(`
      INSERT INTO leave_balances (user_id, policy_id, balance_days, year)
      VALUES ($1, $2, 0, $3)
      ON CONFLICT (user_id, policy_id, year) DO NOTHING
      `,[r,s,n]),await t.query(`
      UPDATE leave_balances
      SET balance_days = balance_days - $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE user_id = $2 AND policy_id = $3 AND year = $4
      `,[o,r,s,n])}async restoreLeaveBalance(t,r,s,n,o){await t.query(`
      UPDATE leave_balances
      SET balance_days = balance_days + $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE user_id = $2 AND policy_id = $3 AND year = $4
      `,[o,r,s,n])}async hasOverlappingRequest(t,r,s,n,o){let i=[t,r,s,n],a=i.length+1,c=`
      SELECT COUNT(*)::INT AS count
      FROM leave_requests
      WHERE user_id = $1
        AND policy_id = $2
        AND status IN ('PENDING', 'APPROVED')
        AND start_date <= $4
        AND end_date >= $3
    `;return o&&(c+=` AND request_id <> $${a++}`,i.push(o)),(await qr(c,i)).rows[0].count>0}createLeaveRequest(t){return wv(r=>this.insertLeaveRequest(r,t))}async transitionLeaveRequest(t){return wv(async r=>{if((await r.query(`
        SELECT
          lr.request_id,
          lr.user_id,
          lr.user_email,
          lr.user_name,
          lr.user_team_id,
          lr.policy_id,
          (SELECT name FROM leave_policies WHERE policy_id = lr.policy_id) AS policy_name,
          lr.status,
          lr.start_date,
          lr.end_date,
          lr.half_day,
          lr.reason,
          lr.graph_event_id,
          lr.created_at,
          lr.updated_at,
          CASE
            WHEN lr.half_day THEN 0.5
            ELSE (lr.end_date - lr.start_date) + 1
          END AS days_requested
        FROM leave_requests lr
        WHERE lr.request_id = $1
        FOR UPDATE
        `,[t.requestId])).rowCount===0)throw new Error("Leave request not found");let n=await this.updateLeaveRequestStatus(r,t.requestId,t.newStatus,{id:t.actorId,email:t.actorEmail,name:t.actorName},t.notes),o=new Date(n.startDate).getFullYear();return t.daysToAdjust&&t.daysToAdjust>0&&(t.newStatus==="APPROVED"?await this.adjustLeaveBalance(r,n.userId,n.policyId,o,t.daysToAdjust):(t.newStatus==="CANCELLED"||t.newStatus==="REJECTED")&&await this.restoreLeaveBalance(r,n.userId,n.policyId,o,t.daysToAdjust)),n})}async updateGraphEventId(t,r){await qr(`
      UPDATE leave_requests
      SET graph_event_id = $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE request_id = $2
      `,[r,t])}};var _le=e=>e.endsWith(".fifo"),zH=()=>process.env.CALENDAR_SYNC_ENABLED?.toLowerCase()==="true",Ry=class{constructor(t=new Cy){this.leaveRepository=t}sqsClient=new Ty.SQSClient({region:process.env.AWS_REGION||"ap-southeast-2"});async enqueueCalendarSync(t){if(!zH()){Er.info("Calendar sync disabled, skipping enqueue",{requestId:t});return}let r=process.env.CALENDAR_SYNC_QUEUE_URL;if(!r)throw new $t("QUEUE_NOT_CONFIGURED","Calendar sync queue URL is not configured",500);let s={requestId:t,attempt:1},n=new Ty.SendMessageCommand({QueueUrl:r,MessageBody:JSON.stringify(s),..._le(r)?{MessageGroupId:`leave-${t}`,MessageDeduplicationId:`leave-${t}-${Date.now().toString()}`}:{}});await this.sqsClient.send(n),Er.info("Enqueued calendar sync",{requestId:t})}async syncLeaveRequest(t){if(!zH()){Er.info("Calendar sync disabled, skipping sync",{requestId:t});return}let r=await this.leaveRepository.getLeaveRequestById(t);if(!r||r.status!=="APPROVED")throw new $t("LEAVE_NOT_APPROVED","Leave request is not approved",409);let s=process.env.GRAPH_TENANT,n=process.env.GRAPH_CLIENT_ID,o=process.env.GRAPH_CLIENT_SECRET,i=process.env.GRAPH_SCOPE||"https://graph.microsoft.com/.default";if(!s||!n||!o)throw new $t("GRAPH_CONFIG_MISSING","Microsoft Graph credentials not configured",500);let a=`https://login.microsoftonline.com/${s}/oauth2/v2.0/token`,c=await fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:n,client_secret:o,scope:i,grant_type:"client_credentials"})});if(!c.ok){let m=await c.text();throw new $t("GRAPH_TOKEN_ERROR",m,c.status)}let u=(await c.json()).access_token;if(!u)throw new $t("GRAPH_TOKEN_ERROR","Access token missing from response",500);let l=await fetch(`https://graph.microsoft.com/v1.0/users/${r.userEmail}/calendar/events`,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({subject:`Leave: ${r.policyName}`,body:{contentType:"HTML",content:r.reason??"Leave request"},start:{dateTime:`${r.startDate}T00:00:00`,timeZone:"UTC"},end:{dateTime:`${r.endDate}T23:59:59`,timeZone:"UTC"},isAllDay:!r.halfDay})});if(!l.ok){let m=await l.text();throw new $t("GRAPH_EVENT_ERROR",m,l.status)}let h=await l.json();await this.leaveRepository.updateGraphEventId(t,h.id),Er.info("Leave request synced to Microsoft Graph",{requestId:t,eventId:h.id})}};var Ele=new Ry,wle=vc.object({request_id:vc.coerce.number().int().positive()}),ble=RF(async({event:e})=>{let t=e.headers?.origin||e.headers?.Origin,r=TF(wle,e.body);return await Ele.enqueueCalendarSync(r.request_id),ah(202,{message:"Calendar sync enqueued",requestId:r.request_id},t)},{allowedRoles:["ADMIN"]});0&&(module.exports={handler});
