"use strict";var UH=Object.create;var nl=Object.defineProperty;var BH=Object.getOwnPropertyDescriptor;var HH=Object.getOwnPropertyNames;var jH=Object.getPrototypeOf,zH=Object.prototype.hasOwnProperty;var S=(e,t)=>()=>(e&&(t=e(e=0)),t);var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),tt=(e,t)=>{for(var r in t)nl(e,r,{get:t[r],enumerable:!0})},lR=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of HH(t))!zH.call(e,n)&&n!==r&&nl(e,n,{get:()=>t[n],enumerable:!(s=BH(t,n))||s.enumerable});return e};var y=(e,t,r)=>(r=e!=null?UH(jH(e)):{},lR(t||!e||!e.__esModule?nl(r,"default",{value:e,enumerable:!0}):r,e)),z=e=>lR(nl({},"__esModule",{value:!0}),e);var Gs=w(Re=>{"use strict";Re.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(Re.HttpAuthLocation||(Re.HttpAuthLocation={}));Re.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(Re.HttpApiKeyAuthLocation||(Re.HttpApiKeyAuthLocation={}));Re.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(Re.EndpointURLScheme||(Re.EndpointURLScheme={}));Re.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Re.AlgorithmId||(Re.AlgorithmId={}));var VH=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>Re.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>Re.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},GH=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},WH=e=>VH(e),QH=e=>GH(e);Re.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Re.FieldPosition||(Re.FieldPosition={}));var KH="__smithy_context";Re.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(Re.IniSectionType||(Re.IniSectionType={}));Re.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Re.RequestHandlerProtocol||(Re.RequestHandlerProtocol={}));Re.SMITHY_CONTEXT_KEY=KH;Re.getDefaultClientConfiguration=WH;Re.resolveDefaultRuntimeConfig=QH});var ce=w(Ws=>{"use strict";var YH=Gs(),JH=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),XH=e=>({httpHandler:e.httpHandler()}),Eg=class{name;kind;values;constructor({name:t,kind:r=YH.FieldPosition.HEADER,values:s=[]}){this.name=t,this.kind=r,this.values=s}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},_g=class{entries={};encoding;constructor({fields:t=[],encoding:r="utf-8"}){t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},wg=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=ZH(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function ZH(e){return Object.keys(e).reduce((t,r)=>{let s=e[r];return{...t,[r]:Array.isArray(s)?[...s]:s}},{})}var bg=class{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function ej(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}Ws.Field=Eg;Ws.Fields=_g;Ws.HttpRequest=wg;Ws.HttpResponse=bg;Ws.getHttpHandlerExtensionConfiguration=JH;Ws.isValidHostname=ej;Ws.resolveHttpHandlerRuntimeConfig=XH});var ds=w(wa=>{"use strict";var tj=ce();function rj(e){return e}var uR=e=>t=>async r=>{if(!tj.HttpRequest.isInstance(r.request))return t(r);let{request:s}=r,{handlerProtocol:n=""}=e.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let o=s.hostname;s.port!=null&&(o+=`:${s.port}`),s.headers.host=o}return t(r)},fR={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},sj=e=>({applyToStack:t=>{t.add(uR(e),fR)}});wa.getHostHeaderPlugin=sj;wa.hostHeaderMiddleware=uR;wa.hostHeaderMiddlewareOptions=fR;wa.resolveHostHeaderConfig=rj});var ls=w(ol=>{"use strict";var pR=()=>(e,t)=>async r=>{try{let s=await e(r),{clientName:n,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=a,l=c??t.inputFilterSensitiveLog,u=d??t.outputFilterSensitiveLog,{$metadata:h,...m}=s.output;return i?.info?.({clientName:n,commandName:o,input:l(r.input),output:u(m),metadata:h}),s}catch(s){let{clientName:n,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,d=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:n,commandName:o,input:d(r.input),error:s,metadata:s.$metadata}),s}},mR={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},nj=e=>({applyToStack:t=>{t.add(pR(),mR)}});ol.getLoggerPlugin=nj;ol.loggerMiddleware=pR;ol.loggerMiddlewareOptions=mR});var gR={};tt(gR,{InvokeStore:()=>ij});var hR,Cg,oj,Rg,il,ij,yR=S(()=>{hR=require("async_hooks"),Cg=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";Cg||(globalThis.awslambda=globalThis.awslambda||{});oj={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol("_AWS_LAMBDA_TENANT_ID")},Rg=class{static storage=new hR.AsyncLocalStorage;static PROTECTED_KEYS=oj;static run(t,r){return this.storage.run({...t},r)}static getContext(){return this.storage.getStore()}static get(t){return this.storage.getStore()?.[t]}static set(t,r){if(this.isProtectedKey(t))throw new Error("Cannot modify protected Lambda context field");let s=this.storage.getStore();s&&(s[t]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static getTenantId(){return this.get(this.PROTECTED_KEYS.TENANT_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(t){return t===this.PROTECTED_KEYS.REQUEST_ID||t===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};!Cg&&globalThis.awslambda?.InvokeStore?il=globalThis.awslambda.InvokeStore:(il=Rg,!Cg&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=il));ij=il});var SR=w(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.recursionDetectionMiddleware=void 0;var aj=(yR(),z(gR)),cj=ce(),vg="X-Amzn-Trace-Id",dj="AWS_LAMBDA_FUNCTION_NAME",lj="_X_AMZN_TRACE_ID",uj=()=>e=>async t=>{let{request:r}=t;if(!cj.HttpRequest.isInstance(r))return e(t);let s=Object.keys(r.headers??{}).find(d=>d.toLowerCase()===vg.toLowerCase())??vg;if(r.headers.hasOwnProperty(s))return e(t);let n=process.env[dj],o=process.env[lj],a=aj.InvokeStore.getXRayTraceId()??o,c=d=>typeof d=="string"&&d.length>0;return c(n)&&c(a)&&(r.headers[vg]=a),e({...t,request:r})};al.recursionDetectionMiddleware=uj});var us=w(cl=>{"use strict";var xg=SR(),fj={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},pj=e=>({applyToStack:t=>{t.add(xg.recursionDetectionMiddleware(),fj)}});cl.getRecursionDetectionPlugin=pj;Object.keys(xg).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(cl,e)&&Object.defineProperty(cl,e,{enumerable:!0,get:function(){return xg[e]}})})});var bR=w(wR=>{"use strict";var Yn=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let s of t)r.push(s);return r},Qs=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Ag=()=>{let e=[],t=[],r=!1,s=new Set,n=u=>u.sort((h,m)=>ER[m.step]-ER[h.step]||_R[m.priority||"normal"]-_R[h.priority||"normal"]),o=u=>{let h=!1,m=g=>{let C=Yn(g.name,g.aliases);if(C.includes(u)){h=!0;for(let v of C)s.delete(v);return!1}return!0};return e=e.filter(m),t=t.filter(m),h},i=u=>{let h=!1,m=g=>{if(g.middleware===u){h=!0;for(let C of Yn(g.name,g.aliases))s.delete(C);return!1}return!0};return e=e.filter(m),t=t.filter(m),h},a=u=>(e.forEach(h=>{u.add(h.middleware,{...h})}),t.forEach(h=>{u.addRelativeTo(h.middleware,{...h})}),u.identifyOnResolve?.(l.identifyOnResolve()),u),c=u=>{let h=[];return u.before.forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h.push(u),u.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h},d=(u=!1)=>{let h=[],m=[],g={};return e.forEach(v=>{let A={...v,before:[],after:[]};for(let N of Yn(A.name,A.aliases))g[N]=A;h.push(A)}),t.forEach(v=>{let A={...v,before:[],after:[]};for(let N of Yn(A.name,A.aliases))g[N]=A;m.push(A)}),m.forEach(v=>{if(v.toMiddleware){let A=g[v.toMiddleware];if(A===void 0){if(u)return;throw new Error(`${v.toMiddleware} is not found when adding ${Qs(v.name,v.aliases)} middleware ${v.relation} ${v.toMiddleware}`)}v.relation==="after"&&A.after.push(v),v.relation==="before"&&A.before.push(v)}}),n(h).map(c).reduce((v,A)=>(v.push(...A),v),[])},l={add:(u,h={})=>{let{name:m,override:g,aliases:C}=h,v={step:"initialize",priority:"normal",middleware:u,...h},A=Yn(m,C);if(A.length>0){if(A.some(N=>s.has(N))){if(!g)throw new Error(`Duplicate middleware name '${Qs(m,C)}'`);for(let N of A){let $=e.findIndex(Q=>Q.name===N||Q.aliases?.some(fe=>fe===N));if($===-1)continue;let H=e[$];if(H.step!==v.step||v.priority!==H.priority)throw new Error(`"${Qs(H.name,H.aliases)}" middleware with ${H.priority} priority in ${H.step} step cannot be overridden by "${Qs(m,C)}" middleware with ${v.priority} priority in ${v.step} step.`);e.splice($,1)}}for(let N of A)s.add(N)}e.push(v)},addRelativeTo:(u,h)=>{let{name:m,override:g,aliases:C}=h,v={middleware:u,...h},A=Yn(m,C);if(A.length>0){if(A.some(N=>s.has(N))){if(!g)throw new Error(`Duplicate middleware name '${Qs(m,C)}'`);for(let N of A){let $=t.findIndex(Q=>Q.name===N||Q.aliases?.some(fe=>fe===N));if($===-1)continue;let H=t[$];if(H.toMiddleware!==v.toMiddleware||H.relation!==v.relation)throw new Error(`"${Qs(H.name,H.aliases)}" middleware ${H.relation} "${H.toMiddleware}" middleware cannot be overridden by "${Qs(m,C)}" middleware ${v.relation} "${v.toMiddleware}" middleware.`);t.splice($,1)}}for(let N of A)s.add(N)}t.push(v)},clone:()=>a(Ag()),use:u=>{u.applyToStack(l)},remove:u=>typeof u=="string"?o(u):i(u),removeByTag:u=>{let h=!1,m=g=>{let{tags:C,name:v,aliases:A}=g;if(C&&C.includes(u)){let N=Yn(v,A);for(let $ of N)s.delete($);return h=!0,!1}return!0};return e=e.filter(m),t=t.filter(m),h},concat:u=>{let h=a(Ag());return h.use(u),h.identifyOnResolve(r||h.identifyOnResolve()||(u.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>d(!0).map(u=>{let h=u.step??u.relation+" "+u.toMiddleware;return Qs(u.name,u.aliases)+" - "+h}),identifyOnResolve(u){return typeof u=="boolean"&&(r=u),r},resolve:(u,h)=>{for(let m of d().map(g=>g.middleware).reverse())u=m(u,h);return r&&console.log(l.identify()),u}};return l},ER={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},_R={high:3,normal:2,low:1};wR.constructStack=Ag});var Tg=w(CR=>{"use strict";var mj=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";CR.isArrayBuffer=mj});var Do=w(Ig=>{"use strict";var hj=Tg(),Pg=require("buffer"),gj=(e,t=0,r=e.byteLength-t)=>{if(!hj.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Pg.Buffer.from(e,t,r)},yj=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Pg.Buffer.from(e,t):Pg.Buffer.from(e)};Ig.fromArrayBuffer=gj;Ig.fromString=yj});var RR=w(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.fromBase64=void 0;var Sj=Do(),Ej=/^[A-Za-z0-9+/]*={0,2}$/,_j=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Ej.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,Sj.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};dl.fromBase64=_j});var Te=w(ll=>{"use strict";var vR=Do(),xR=e=>{let t=vR.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},wj=e=>typeof e=="string"?xR(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),bj=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return vR.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};ll.fromUtf8=xR;ll.toUint8Array=wj;ll.toUtf8=bj});var AR=w(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.toBase64=void 0;var Cj=Do(),Rj=Te(),vj=e=>{let t;if(typeof e=="string"?t=(0,Rj.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Cj.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};ul.toBase64=vj});var Ae=w(ba=>{"use strict";var TR=RR(),PR=AR();Object.keys(TR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ba,e)&&Object.defineProperty(ba,e,{enumerable:!0,get:function(){return TR[e]}})});Object.keys(PR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ba,e)&&Object.defineProperty(ba,e,{enumerable:!0,get:function(){return PR[e]}})})});var Og=w(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.ChecksumStream=void 0;var xj=Ae(),Aj=require("stream"),Ng=class extends Aj.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:t,checksum:r,source:s,checksumSourceLocation:n,base64Encoder:o}){if(super(),typeof s.pipe=="function")this.source=s;else throw new Error(`@smithy/util-stream: unsupported source type ${s?.constructor?.name??s} in ChecksumStream.`);this.base64Encoder=o??xj.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=n,this.source.pipe(this)}_read(t){}_write(t,r,s){try{this.checksum.update(t),this.push(t)}catch(n){return s(n)}return s()}async _final(t){try{let r=await this.checksum.digest(),s=this.base64Encoder(r);if(this.expectedChecksum!==s)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${s}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};fl.ChecksumStream=Ng});var Ks=w(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.isBlob=ko.isReadableStream=void 0;var Tj=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);ko.isReadableStream=Tj;var Pj=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);ko.isBlob=Pj});var IR=w(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.ChecksumStream=void 0;var Ij=typeof ReadableStream=="function"?ReadableStream:function(){},Dg=class extends Ij{};pl.ChecksumStream=Dg});var NR=w(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.createChecksumStream=void 0;var Nj=Ae(),Oj=Ks(),Dj=IR(),kj=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:s,base64Encoder:n})=>{if(!(0,Oj.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let o=n??Nj.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(c,d){t.update(c),d.enqueue(c)},async flush(c){let d=await t.digest(),l=o(d);if(e!==l){let u=new Error(`Checksum mismatch: expected "${e}" but received "${l}" in response header "${s}".`);c.error(u)}else c.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,Dj.ChecksumStream.prototype),a};ml.createChecksumStream=kj});var OR=w(kg=>{"use strict";Object.defineProperty(kg,"__esModule",{value:!0});kg.createChecksumStream=Fj;var Mj=Ks(),Lj=Og(),qj=NR();function Fj(e){return typeof ReadableStream=="function"&&(0,Mj.isReadableStream)(e.source)?(0,qj.createChecksumStream)(e):new Lj.ChecksumStream(e)}});var Lg=w(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.ByteArrayCollector=void 0;var Mg=class{allocByteArray;byteLength=0;byteArrays=[];constructor(t){this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let s=this.byteArrays[0];return this.reset(),s}let t=this.allocByteArray(this.byteLength),r=0;for(let s=0;s<this.byteArrays.length;++s){let n=this.byteArrays[s];t.set(n,r),r+=n.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};hl.ByteArrayCollector=Mg});var LR=w(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.createBufferedReadable=void 0;fs.createBufferedReadableStream=DR;fs.merge=kR;fs.flush=gl;fs.sizeOf=Mo;fs.modeOf=MR;var $j=Lg();function DR(e,t,r){let s=e.getReader(),n=!1,o=0,i=["",new $j.ByteArrayCollector(d=>new Uint8Array(d))],a=-1,c=async d=>{let{value:l,done:u}=await s.read(),h=l;if(u){if(a!==-1){let m=gl(i,a);Mo(m)>0&&d.enqueue(m)}d.close()}else{let m=MR(h,!1);if(a!==m&&(a>=0&&d.enqueue(gl(i,a)),a=m),a===-1){d.enqueue(h);return}let g=Mo(h);o+=g;let C=Mo(i[a]);if(g>=t&&C===0)d.enqueue(h);else{let v=kR(i,a,h);!n&&o>t*2&&(n=!0,r?.warn(`@smithy/util-stream - stream chunk size ${g} is below threshold of ${t}, automatically buffering.`)),v>=t?d.enqueue(gl(i,a)):await c(d)}}};return new ReadableStream({pull:c})}fs.createBufferedReadable=DR;function kR(e,t,r){switch(t){case 0:return e[0]+=r,Mo(e[0]);case 1:case 2:return e[t].push(r),Mo(e[t])}}function gl(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function Mo(e){return e?.byteLength??e?.length??0}function MR(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var FR=w(qg=>{"use strict";Object.defineProperty(qg,"__esModule",{value:!0});qg.createBufferedReadable=Hj;var Uj=require("node:stream"),qR=Lg(),ps=LR(),Bj=Ks();function Hj(e,t,r){if((0,Bj.isReadableStream)(e))return(0,ps.createBufferedReadableStream)(e,t,r);let s=new Uj.Readable({read(){}}),n=!1,o=0,i=["",new qR.ByteArrayCollector(c=>new Uint8Array(c)),new qR.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return e.on("data",c=>{let d=(0,ps.modeOf)(c,!0);if(a!==d&&(a>=0&&s.push((0,ps.flush)(i,a)),a=d),a===-1){s.push(c);return}let l=(0,ps.sizeOf)(c);o+=l;let u=(0,ps.sizeOf)(i[a]);if(l>=t&&u===0)s.push(c);else{let h=(0,ps.merge)(i,a,c);!n&&o>t*2&&(n=!0,r?.warn(`@smithy/util-stream - stream chunk size ${l} is below threshold of ${t}, automatically buffering.`)),h>=t&&s.push((0,ps.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let c=(0,ps.flush)(i,a);(0,ps.sizeOf)(c)>0&&s.push(c)}s.push(null)}),s}});var $R=w(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.getAwsChunkedEncodingStream=void 0;var jj=require("stream"),zj=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:s,checksumAlgorithmFn:n,checksumLocationName:o,streamHasher:i}=t,a=r!==void 0&&n!==void 0&&o!==void 0&&i!==void 0,c=a?i(n,e):void 0,d=new jj.Readable({read:()=>{}});return e.on("data",l=>{let u=s(l)||0;d.push(`${u.toString(16)}\r
`),d.push(l),d.push(`\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),a){let l=r(await c);d.push(`${o}:${l}\r
`),d.push(`\r
`)}d.push(null)}),d};yl.getAwsChunkedEncodingStream=zj});var UR=w(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});Fg.headStream=Vj;async function Vj(e,t){let r=0,s=[],n=e.getReader(),o=!1;for(;!o;){let{done:c,value:d}=await n.read();if(d&&(s.push(d),r+=d?.byteLength??0),r>=t)break;o=c}n.releaseLock();let i=new Uint8Array(Math.min(t,r)),a=0;for(let c of s){if(c.byteLength>i.byteLength-a){i.set(c.subarray(0,i.byteLength-a),a);break}else i.set(c,a);a+=c.length}return i}});var BR=w(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.headStream=void 0;var Gj=require("stream"),Wj=UR(),Qj=Ks(),Kj=(e,t)=>(0,Qj.isReadableStream)(e)?(0,Wj.headStream)(e,t):new Promise((r,s)=>{let n=new $g;n.limit=t,e.pipe(n),e.on("error",o=>{n.end(),s(o)}),n.on("error",s),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})});Sl.headStream=Kj;var $g=class extends Gj.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(t,r,s){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let n=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-n),this.emit("finish")}s()}}});var Bg=w(Ug=>{"use strict";var HR=e=>encodeURIComponent(e).replace(/[!'()*]/g,Yj),Yj=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,Jj=e=>e.split("/").map(HR).join("/");Ug.escapeUri=HR;Ug.escapeUriPath=Jj});var jg=w(jR=>{"use strict";var Hg=Bg();function Xj(e){let t=[];for(let r of Object.keys(e).sort()){let s=e[r];if(r=Hg.escapeUri(r),Array.isArray(s))for(let n=0,o=s.length;n<o;n++)t.push(`${r}=${Hg.escapeUri(s[n])}`);else{let n=r;(s||typeof s=="string")&&(n+=`=${Hg.escapeUri(s)}`),t.push(n)}}return t.join("&")}jR.buildQueryString=Xj});var sr=w(Ca=>{"use strict";var WR=ce(),QR=jg(),El=require("http"),_l=require("https"),KR=require("stream"),zg=require("http2"),Zj=["ECONNRESET","EPIPE","ETIMEDOUT"],YR=e=>{let t={};for(let r of Object.keys(e)){let s=e[r];t[r]=Array.isArray(s)?s.join(","):s}return t},At={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},zR=1e3,ez=(e,t,r=0)=>{if(!r)return-1;let s=n=>{let o=At.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-n),i=a=>{a?.connecting?a.on("connect",()=>{At.clearTimeout(o)}):At.clearTimeout(o)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(s(0),0):At.setTimeout(s.bind(null,zR),zR)},tz=(e,t,r=0,s,n)=>r?At.setTimeout(()=>{let o=`@smithy/node-http-handler - [${s?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(s){let i=Object.assign(new Error(o),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(i),t(i)}else o+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",n?.warn?.(o)},r):-1,rz=3e3,sz=(e,{keepAlive:t,keepAliveMsecs:r},s=rz)=>{if(t!==!0)return-1;let n=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",o=>{o.setKeepAlive(t,r||0)})};return s===0?(n(),0):At.setTimeout(n,s)},VR=3e3,nz=(e,t,r=0)=>{let s=n=>{let o=r-n,i=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(o,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(o,i)};return 0<r&&r<6e3?(s(0),0):At.setTimeout(s.bind(null,r===0?0:VR),VR)},GR=6e3;async function JR(e,t,r=GR,s=!1){let n=t.headers??{},o=n.Expect||n.expect,i=-1,a=!0;!s&&o==="100-continue"&&(a=await Promise.race([new Promise(c=>{i=Number(At.setTimeout(()=>c(!0),Math.max(GR,r)))}),new Promise(c=>{e.on("continue",()=>{At.clearTimeout(i),c(!0)}),e.on("response",()=>{At.clearTimeout(i),c(!1)}),e.on("error",()=>{At.clearTimeout(i),c(!1)})})])),a&&oz(e,t.body)}function oz(e,t){if(t instanceof KR.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var iz=0,Vg=class e{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,s=console){let{sockets:n,requests:o,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(n&&o)for(let c in n){let d=n[c]?.length??0,l=o[c]?.length??0;if(d>=i&&l>=2*i)return s?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${d} and ${l} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,s)=>{typeof t=="function"?t().then(n=>{r(this.resolveDefaultConfig(n))}).catch(s):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:s,socketTimeout:n,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:c}=t||{},d=!0,l=50;return{connectionTimeout:s,requestTimeout:r,socketTimeout:n,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:c,httpAgent:i instanceof El.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new El.Agent({keepAlive:d,maxSockets:l,...i}),httpsAgent:a instanceof _l.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new _l.Agent({keepAlive:d,maxSockets:l,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:s}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let i=this.config,a,c=[],d=async K=>{await a,c.forEach(At.clearTimeout),n(K)},l=async K=>{await a,c.forEach(At.clearTimeout),o(K)};if(r?.aborted){let K=new Error("Request aborted");K.name="AbortError",l(K);return}let u=t.protocol==="https:",h=t.headers??{},m=(h.Expect??h.expect)==="100-continue",g=u?i.httpsAgent:i.httpAgent;m&&!this.externalAgent&&(g=new(u?_l.Agent:El.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(At.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(g,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let C=QR.buildQueryString(t.query||{}),v;if(t.username!=null||t.password!=null){let K=t.username??"",ae=t.password??"";v=`${K}:${ae}`}let A=t.path;C&&(A+=`?${C}`),t.fragment&&(A+=`#${t.fragment}`);let N=t.hostname??"";N[0]==="["&&N.endsWith("]")?N=t.hostname.slice(1,-1):N=t.hostname;let $={headers:t.headers,host:N,method:t.method,path:A,port:t.port,agent:g,auth:v},Q=(u?_l.request:El.request)($,K=>{let ae=new WR.HttpResponse({statusCode:K.statusCode||-1,reason:K.statusMessage,headers:YR(K.headers),body:K});d({response:ae})});if(Q.on("error",K=>{Zj.includes(K.code)?l(Object.assign(K,{name:"TimeoutError"})):l(K)}),r){let K=()=>{Q.destroy();let ae=new Error("Request aborted");ae.name="AbortError",l(ae)};if(typeof r.addEventListener=="function"){let ae=r;ae.addEventListener("abort",K,{once:!0}),Q.once("close",()=>ae.removeEventListener("abort",K))}else r.onabort=K}let fe=s??i.requestTimeout;c.push(ez(Q,l,i.connectionTimeout)),c.push(tz(Q,l,fe,i.throwOnRequestTimeout,i.logger??console)),c.push(nz(Q,l,i.socketTimeout));let Ce=$.agent;typeof Ce=="object"&&"keepAlive"in Ce&&c.push(sz(Q,{keepAlive:Ce.keepAlive,keepAliveMsecs:Ce.keepAliveMsecs})),a=JR(Q,t,fe,this.externalAgent).catch(K=>(c.forEach(At.clearTimeout),o(K)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>({...s,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},Gg=class{sessions=[];constructor(t){this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},Wg=class{constructor(t){if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(t,r){let s=this.getUrlString(t),n=this.sessionCache.get(s);if(n){let c=n.poll();if(c&&!this.config.disableConcurrency)return c}let o=zg.connect(s);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),o.unref();let i=()=>{o.destroy(),this.deleteSession(s,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(s,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(s)||new Gg;return a.offerLast(o),this.sessionCache.set(s,a),o}deleteSession(t,r){let s=this.sessionCache.get(t);s&&s.contains(r)&&(s.remove(r),this.sessionCache.set(t,s))}release(t,r){let s=this.getUrlString(t);this.sessionCache.get(s)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let s of r)s.destroyed||s.destroy(),r.remove(s);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},Qg=class e{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new Wg({});static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){this.configProvider=new Promise((r,s)=>{typeof t=="function"?t().then(n=>{r(n||{})}).catch(s):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:s}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:n,disableConcurrentStreams:o}=this.config,i=s??n;return new Promise((a,c)=>{let d=!1,l,u=async pe=>{await l,a(pe)},h=async pe=>{await l,c(pe)};if(r?.aborted){d=!0;let pe=new Error("Request aborted");pe.name="AbortError",h(pe);return}let{hostname:m,method:g,port:C,protocol:v,query:A}=t,N="";if(t.username!=null||t.password!=null){let pe=t.username??"",Ee=t.password??"";N=`${pe}:${Ee}@`}let $=`${v}//${N}${m}${C?`:${C}`:""}`,H={destination:new URL($)},Q=this.connectionManager.lease(H,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:o||!1}),fe=pe=>{o&&this.destroySession(Q),d=!0,h(pe)},Ce=QR.buildQueryString(A||{}),K=t.path;Ce&&(K+=`?${Ce}`),t.fragment&&(K+=`#${t.fragment}`);let ae=Q.request({...t.headers,[zg.constants.HTTP2_HEADER_PATH]:K,[zg.constants.HTTP2_HEADER_METHOD]:g});if(Q.ref(),ae.on("response",pe=>{let Ee=new WR.HttpResponse({statusCode:pe[":status"]||-1,headers:YR(pe),body:ae});d=!0,u({response:Ee}),o&&(Q.close(),this.connectionManager.deleteSession($,Q))}),i&&ae.setTimeout(i,()=>{ae.close();let pe=new Error(`Stream timed out because of no activity for ${i} ms`);pe.name="TimeoutError",fe(pe)}),r){let pe=()=>{ae.close();let Ee=new Error("Request aborted");Ee.name="AbortError",fe(Ee)};if(typeof r.addEventListener=="function"){let Ee=r;Ee.addEventListener("abort",pe,{once:!0}),ae.once("close",()=>Ee.removeEventListener("abort",pe))}else r.onabort=pe}ae.on("frameError",(pe,Ee,Oo)=>{fe(new Error(`Frame type id ${pe} in stream id ${Oo} has failed with code ${Ee}.`))}),ae.on("error",fe),ae.on("aborted",()=>{fe(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${ae.rstCode}.`))}),ae.on("close",()=>{Q.unref(),o&&Q.destroy(),d||fe(new Error("Unexpected error: http2 request did not get a response"))}),l=JR(ae,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>({...s,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},Kg=class extends KR.Writable{bufferedBytes=[];_write(t,r,s){this.bufferedBytes.push(t),s()}},az=e=>cz(e)?dz(e):new Promise((t,r)=>{let s=new Kg;e.pipe(s),e.on("error",n=>{s.end(),r(n)}),s.on("error",r),s.on("finish",function(){let n=new Uint8Array(Buffer.concat(this.bufferedBytes));t(n)})}),cz=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function dz(e){let t=[],r=e.getReader(),s=!1,n=0;for(;!s;){let{done:a,value:c}=await r.read();c&&(t.push(c),n+=c.length),s=a}let o=new Uint8Array(n),i=0;for(let a of t)o.set(a,i),i+=a.length;return o}Ca.DEFAULT_REQUEST_TIMEOUT=iz;Ca.NodeHttp2Handler=Qg;Ca.NodeHttpHandler=Vg;Ca.streamCollector=az});var ev=w(bl=>{"use strict";var XR=ce(),lz=jg(),uz=Ae();function ZR(e,t){return new Request(e,t)}function fz(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let s=new Error(`Request did not complete within ${e} ms`);s.name="TimeoutError",r(s)},e)})}var wl={supported:void 0},Yg=class e{config;configProvider;static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),wl.supported===void 0&&(wl.supported=typeof Request<"u"&&"keepalive"in ZR("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:s}={}){this.config||(this.config=await this.configProvider);let n=s??this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let N=new Error("Request aborted");return N.name="AbortError",Promise.reject(N)}let a=t.path,c=lz.buildQueryString(t.query||{});c&&(a+=`?${c}`),t.fragment&&(a+=`#${t.fragment}`);let d="";if(t.username!=null||t.password!=null){let N=t.username??"",$=t.password??"";d=`${N}:${$}@`}let{port:l,method:u}=t,h=`${t.protocol}//${d}${t.hostname}${l?`:${l}`:""}${a}`,m=u==="GET"||u==="HEAD"?void 0:t.body,g={body:m,headers:new Headers(t.headers),method:u,credentials:i};this.config?.cache&&(g.cache=this.config.cache),m&&(g.duplex="half"),typeof AbortController<"u"&&(g.signal=r),wl.supported&&(g.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(g,this.config.requestInit(t));let C=()=>{},v=ZR(h,g),A=[fetch(v).then(N=>{let $=N.headers,H={};for(let fe of $.entries())H[fe[0]]=fe[1];return N.body!=null?{response:new XR.HttpResponse({headers:H,reason:N.statusText,statusCode:N.status,body:N.body})}:N.blob().then(fe=>({response:new XR.HttpResponse({headers:H,reason:N.statusText,statusCode:N.status,body:fe})}))}),fz(n)];return r&&A.push(new Promise((N,$)=>{let H=()=>{let Q=new Error("Request aborted");Q.name="AbortError",$(Q)};if(typeof r.addEventListener=="function"){let Q=r;Q.addEventListener("abort",H,{once:!0}),C=()=>Q.removeEventListener("abort",H)}else r.onabort=H})),Promise.race(A).finally(C)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>(s[t]=r,s))}httpHandlerConfigs(){return this.config??{}}},pz=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):mz(e):hz(e);async function mz(e){let t=await gz(e),r=uz.fromBase64(t);return new Uint8Array(r)}async function hz(e){let t=[],r=e.getReader(),s=!1,n=0;for(;!s;){let{done:a,value:c}=await r.read();c&&(t.push(c),n+=c.length),s=a}let o=new Uint8Array(n),i=0;for(let a of t)o.set(a,i),i+=a.length;return o}function gz(e){return new Promise((t,r)=>{let s=new FileReader;s.onloadend=()=>{if(s.readyState!==2)return r(new Error("Reader aborted too early"));let n=s.result??"",o=n.indexOf(","),i=o>-1?o+1:n.length;t(n.substring(i))},s.onabort=()=>r(new Error("Read aborted")),s.onerror=()=>r(s.error),s.readAsDataURL(e)})}bl.FetchHttpHandler=Yg;bl.keepAliveSupport=wl;bl.streamCollector=pz});var Cl=w(Xg=>{"use strict";var tv={},Jg={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),tv[e]=t,Jg[t]=e}function yz(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let s=e.slice(r,r+2).toLowerCase();if(s in Jg)t[r/2]=Jg[s];else throw new Error(`Cannot decode unrecognized sequence ${s} as hexadecimal`)}return t}function Sz(e){let t="";for(let r=0;r<e.byteLength;r++)t+=tv[e[r]];return t}Xg.fromHex=yz;Xg.toHex=Sz});var ov=w(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.sdkStreamMixin=void 0;var Ez=ev(),_z=Ae(),wz=Cl(),bz=Te(),rv=Ks(),sv="The stream has already been transformed.",Cz=e=>{if(!nv(e)&&!(0,rv.isReadableStream)(e)){let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(sv);return t=!0,await(0,Ez.streamCollector)(e)},s=n=>{if(typeof n.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return n.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();if(n==="base64")return(0,_z.toBase64)(o);if(n==="hex")return(0,wz.toHex)(o);if(n===void 0||n==="utf8"||n==="utf-8")return(0,bz.toUtf8)(o);if(typeof TextDecoder=="function")return new TextDecoder(n).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(sv);if(t=!0,nv(e))return s(e);if((0,rv.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};Rl.sdkStreamMixin=Cz;var nv=e=>typeof Blob=="function"&&e instanceof Blob});var av=w(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.sdkStreamMixin=void 0;var Rz=sr(),vz=Do(),Zg=require("stream"),xz=ov(),iv="The stream has already been transformed.",Az=e=>{if(!(e instanceof Zg.Readable))try{return(0,xz.sdkStreamMixin)(e)}catch{let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(iv);return t=!0,await(0,Rz.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{let n=await r();return s===void 0||Buffer.isEncoding(s)?(0,vz.fromArrayBuffer)(n.buffer,n.byteOffset,n.byteLength).toString(s):new TextDecoder(s).decode(n)},transformToWebStream:()=>{if(t)throw new Error(iv);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Zg.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,Zg.Readable.toWeb(e)}})};vl.sdkStreamMixin=Az});var cv=w(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.splitStream=Tz;async function Tz(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var uv=w(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});ty.splitStream=Iz;var dv=require("stream"),Pz=cv(),lv=Ks();async function Iz(e){if((0,lv.isReadableStream)(e)||(0,lv.isBlob)(e))return(0,Pz.splitStream)(e);let t=new dv.PassThrough,r=new dv.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var Ra=w(ot=>{"use strict";var fv=Ae(),pv=Te(),mv=Og(),hv=OR(),gv=FR(),yv=$R(),Sv=BR(),Ev=av(),_v=uv(),wv=Ks(),ry=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?e.mutate(fv.fromBase64(t)):e.mutate(pv.fromUtf8(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return t==="base64"?fv.toBase64(this):pv.toUtf8(this)}};ot.Uint8ArrayBlobAdapter=ry;Object.keys(mv).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ot,e)&&Object.defineProperty(ot,e,{enumerable:!0,get:function(){return mv[e]}})});Object.keys(hv).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ot,e)&&Object.defineProperty(ot,e,{enumerable:!0,get:function(){return hv[e]}})});Object.keys(gv).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ot,e)&&Object.defineProperty(ot,e,{enumerable:!0,get:function(){return gv[e]}})});Object.keys(yv).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ot,e)&&Object.defineProperty(ot,e,{enumerable:!0,get:function(){return yv[e]}})});Object.keys(Sv).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ot,e)&&Object.defineProperty(ot,e,{enumerable:!0,get:function(){return Sv[e]}})});Object.keys(Ev).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ot,e)&&Object.defineProperty(ot,e,{enumerable:!0,get:function(){return Ev[e]}})});Object.keys(_v).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ot,e)&&Object.defineProperty(ot,e,{enumerable:!0,get:function(){return _v[e]}})});Object.keys(wv).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ot,e)&&Object.defineProperty(ot,e,{enumerable:!0,get:function(){return wv[e]}})})});var xl,Mt,Al=S(()=>{xl=y(Ra()),Mt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return xl.Uint8ArrayBlobAdapter.mutate(e);if(!e)return xl.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return xl.Uint8ArrayBlobAdapter.mutate(await r)}});function Kt(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Tl=S(()=>{});var Tt,sy=S(()=>{Tt=e=>typeof e=="function"?e():e});var it=w(ny=>{"use strict";var bv=Gs(),Nz=e=>e[bv.SMITHY_CONTEXT_KEY]||(e[bv.SMITHY_CONTEXT_KEY]={}),Oz=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};ny.getSmithyContext=Nz;ny.normalizeProvider=Oz});var va,Pl=S(()=>{va=(e,t,r,s,n)=>({name:t,namespace:e,traits:r,input:s,output:n})});var Cv,Rv,vv,oy,xv=S(()=>{Cv=y(ce()),Rv=y(it());Pl();vv=e=>(t,r)=>async s=>{let{response:n}=await t(s),{operationSchema:o}=(0,Rv.getSmithyContext)(r),[,i,a,c,d,l]=o??[];try{let u=await e.protocol.deserializeResponse(va(i,a,c,d,l),{...e,...r},n);return{response:n,output:u}}catch(u){if(Object.defineProperty(u,"$response",{value:n}),!("$metadata"in u)){let h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{u.message+=`
  `+h}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(h):r.logger?.warn?.(h)}typeof u.$responseBodyText<"u"&&u.$response&&(u.$response.body=u.$responseBodyText);try{if(Cv.HttpResponse.isInstance(n)){let{headers:m={}}=n,g=Object.entries(m);u.$metadata={httpStatusCode:n.statusCode,requestId:oy(/^x-[\w-]+-request-?id$/,g),extendedRequestId:oy(/^x-[\w-]+-id-2$/,g),cfId:oy(/^x-[\w-]+-cf-id$/,g)}}}catch{}}throw u}},oy=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var Av,Tv,Pv=S(()=>{Av=y(it());Pl();Tv=e=>(t,r)=>async s=>{let{operationSchema:n}=(0,Av.getSmithyContext)(r),[,o,i,a,c,d]=n??[],l=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,u=await e.protocol.serializeRequest(va(o,i,a,c,d),s.input,{...e,...r,endpoint:l});return t({...s,request:u})}});function Dz(e){return{applyToStack:t=>{t.add(Tv(e),Nv),t.add(vv(e),Iv),e.protocol.setSerdeContext(e)}}}var Iv,Nv,Ov=S(()=>{xv();Pv();Iv={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Nv={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Qe,Ys=S(()=>{Qe=class{name;namespace;traits;static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Il,kz,Dv=S(()=>{Ys();Il=class e extends Qe{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=e.symbol},kz=(e,t,r,s)=>Qe.assign(new Il,{name:t,namespace:e,traits:r,valueSchema:s})});var Nl,Mz,kv=S(()=>{Ys();Nl=class e extends Qe{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=e.symbol},Mz=(e,t,r,s,n)=>Qe.assign(new Nl,{name:t,namespace:e,traits:r,keySchema:s,valueSchema:n})});var Ol,Lz,Mv=S(()=>{Ys();Ol=class e extends Qe{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=e.symbol},Lz=(e,t,r,s,n)=>Qe.assign(new Ol,{name:t,namespace:e,traits:r,input:s,output:n})});var Lo,qz,iy=S(()=>{Ys();Lo=class e extends Qe{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=e.symbol},qz=(e,t,r,s,n)=>Qe.assign(new Lo,{name:t,namespace:e,traits:r,memberNames:s,memberList:n})});var Dl,Fz,Lv=S(()=>{Ys();iy();Dl=class e extends Lo{static symbol=Symbol.for("@smithy/err");ctor;symbol=e.symbol},Fz=(e,t,r,s,n,o)=>Qe.assign(new Dl,{name:t,namespace:e,traits:r,memberNames:s,memberList:n,ctor:null})});function zr(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let s of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[s]=1);return t}var ay=S(()=>{});function xa(e,t){if(e instanceof D)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=D;return new r(e,t)}var D,cy,qv,Fv=S(()=>{sy();ay();D=class e{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let s=[],n=t,o=t;for(this._isMemberSchema=!1;cy(n);)s.push(n[1]),n=n[0],o=Tt(n),this._isMemberSchema=!0;if(s.length>0){this.memberTraits={};for(let i=s.length-1;i>=0;--i){let a=s[i];Object.assign(this.memberTraits,zr(a))}}else this.memberTraits=0;if(o instanceof e){let i=this.memberTraits;Object.assign(this,o),this.memberTraits=Object.assign({},i,o.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??o.memberName;return}if(this.schema=Tt(o),qv(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(o),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){let r=Tt(t);if(r instanceof e)return r;if(cy(r)){let[s,n]=r;if(s instanceof e)return Object.assign(s.getMergedTraits(),zr(n)),s;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(r)}getSchema(){let t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let t=this.getSchema();return t[0]===3||t[0]===-3}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=o=>(o&4)===4||!!o?.idempotencyToken,{normalizedTraits:r,traits:s,memberTraits:n}=this;return t(r)||t(s)||t(n)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return zr(this.memberTraits)}getOwnTraits(){return zr(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let s=this.getSchema(),n=t?15:s[4]??0;return xa([n,0],"key")}getValueSchema(){let t=this.getSchema(),[r,s,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],o=typeof t=="number"?63&t:t&&typeof t=="object"&&(s||n)?t[3+t[0]]:r?15:void 0;if(o!=null)return xa([o,0],s?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let s=r[4].indexOf(t),n=r[5][s];return xa(cy(n)?n:[n,0],t)}if(this.isDocumentSchema())return xa([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,s]of this.structIterator())t[r]=s}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],xa([t[5][r],0],t[4][r])]}};cy=e=>Array.isArray(e)&&e.length===2,qv=e=>Array.isArray(e)&&e.length>=5});var Aa,$z,Uz,$v=S(()=>{Ys();Aa=class e extends Qe{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=e.symbol},$z=(e,t,r,s)=>Qe.assign(new Aa,{name:t,namespace:e,traits:s,schemaRef:r}),Uz=(e,t,r,s)=>Qe.assign(new Aa,{name:t,namespace:e,traits:r,schemaRef:s})});var Bz,Uv=S(()=>{Bz={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var me,Bv=S(()=>{me=class e{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,s=new Map){this.namespace=t,this.schemas=r,this.exceptions=s}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let s=this.normalizeShapeId(t);e.for(s.split("#")[0]).schemas.set(s,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let s=t,n=e.for(s[1]);n.schemas.set(s[1]+"#"+s[2],s),n.exceptions.set(s,r)}getErrorCtor(t){let r=t;return e.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,s]=t,n=r+"#"+s;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}}});var dy={};tt(dy,{ErrorSchema:()=>Dl,ListSchema:()=>Il,MapSchema:()=>Nl,NormalizedSchema:()=>D,OperationSchema:()=>Ol,SCHEMA:()=>Bz,Schema:()=>Qe,SimpleSchema:()=>Aa,StructureSchema:()=>Lo,TypeRegistry:()=>me,deref:()=>Tt,deserializerMiddlewareOption:()=>Iv,error:()=>Fz,getSchemaSerdePlugin:()=>Dz,isStaticSchema:()=>qv,list:()=>kz,map:()=>Mz,op:()=>Lz,operation:()=>va,serializerMiddlewareOption:()=>Nv,sim:()=>$z,simAdapter:()=>Uz,struct:()=>qz,translateTraits:()=>zr});var le=S(()=>{sy();Ov();Dv();kv();Mv();Pl();Lv();Fv();Ys();$v();iy();Uv();ay();Bv()});var Hz,Hv=S(()=>{Hz=(e,t,r=s=>s)=>e});var jz,zz,Ta,Vz,kl,Pa,Gz,ly,uy,fy,py,Wz,Qz,jv,Kz,Yz,Ll,Jz,my,Xz,qo,hy,Zz,e4,t4,zv,Vv,r4,s4,Jn,gy,Ml,Ia,yy=S(()=>{jz=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},zz=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Ia.warn(Ml(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Ia.warn(Ml(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},Ta=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Ia.warn(Ml(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Vz=Math.ceil(34028234663852886e22),kl=e=>{let t=Ta(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Vz)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Pa=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},Gz=Pa,ly=e=>py(e,32),uy=e=>py(e,16),fy=e=>py(e,8),py=(e,t)=>{let r=Pa(e);if(r!==void 0&&Wz(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},Wz=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Qz=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},jv=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},Kz=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Ia.warn(Ml(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Yz=e=>{if(e==null)return;let t=jv(e),r=Object.entries(t).filter(([,s])=>s!=null).map(([s])=>s);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},Ll=e=>Ta(typeof e=="string"?qo(e):e),Jz=Ll,my=e=>kl(typeof e=="string"?qo(e):e),Xz=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,qo=e=>{let t=e.match(Xz);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},hy=e=>typeof e=="string"?zv(e):Ta(e),Zz=hy,e4=hy,t4=e=>typeof e=="string"?zv(e):kl(e),zv=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},Vv=e=>Pa(typeof e=="string"?qo(e):e),r4=Vv,s4=e=>ly(typeof e=="string"?qo(e):e),Jn=e=>uy(typeof e=="string"?qo(e):e),gy=e=>fy(typeof e=="string"?qo(e):e),Ml=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Ia={warn:console.warn}});function Xn(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),s=e.getUTCDay(),n=e.getUTCDate(),o=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=n<10?`0${n}`:`${n}`,d=o<10?`0${o}`:`${o}`,l=i<10?`0${i}`:`${i}`,u=a<10?`0${a}`:`${a}`;return`${n4[s]}, ${c} ${Ey[r]} ${t} ${d}:${l}:${u} GMT`}var n4,Ey,o4,i4,a4,Oa,c4,d4,l4,Da,ka,Na,u4,f4,p4,Sy,m4,h4,g4,Vr,y4,S4,Fo,Gv=S(()=>{yy();n4=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ey=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];o4=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),i4=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=o4.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,s,n,o,i,a,c,d]=t,l=Jn(Fo(s)),u=Vr(n,"month",1,12),h=Vr(o,"day",1,31);return Na(l,u,h,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})},a4=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Oa=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=a4.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,s,n,o,i,a,c,d,l]=t,u=Jn(Fo(s)),h=Vr(n,"month",1,12),m=Vr(o,"day",1,31),g=Na(u,h,m,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&g.setTime(g.getTime()-S4(l)),g},c4=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),d4=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),l4=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Da=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=c4.exec(e);if(t){let[r,s,n,o,i,a,c,d]=t;return Na(Jn(Fo(o)),Sy(n),Vr(s,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})}if(t=d4.exec(e),t){let[r,s,n,o,i,a,c,d]=t;return p4(Na(u4(o),Sy(n),Vr(s,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d}))}if(t=l4.exec(e),t){let[r,s,n,o,i,a,c,d]=t;return Na(Jn(Fo(d)),Sy(s),Vr(n.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},ka=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Ll(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Na=(e,t,r,s)=>{let n=t-1;return h4(e,n,r),new Date(Date.UTC(e,n,r,Vr(s.hours,"hour",0,23),Vr(s.minutes,"minute",0,59),Vr(s.seconds,"seconds",0,60),y4(s.fractionalMilliseconds)))},u4=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+Jn(Fo(e));return r<t?r+100:r},f4=50*365*24*60*60*1e3,p4=e=>e.getTime()-new Date().getTime()>f4?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Sy=e=>{let t=Ey.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},m4=[31,28,31,30,31,30,31,31,30,31,30,31],h4=(e,t,r)=>{let s=m4[t];if(t===1&&g4(e)&&(s=29),r>s)throw new TypeError(`Invalid day for ${Ey[t]} in ${e}: ${r}`)},g4=e=>e%4===0&&(e%100!==0||e%400===0),Vr=(e,t,r,s)=>{let n=gy(Fo(e));if(n<r||n>s)throw new TypeError(`${t} must be between ${r} and ${s}, inclusive`);return n},y4=e=>e==null?0:my("0."+e)*1e3,S4=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let s=Number(e.substring(1,3)),n=Number(e.substring(4,6));return r*(s*60+n)*60*1e3},Fo=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Js={};tt(Js,{__addDisposableResource:()=>yx,__assign:()=>ql,__asyncDelegator:()=>dx,__asyncGenerator:()=>cx,__asyncValues:()=>lx,__await:()=>$o,__awaiter:()=>rx,__classPrivateFieldGet:()=>mx,__classPrivateFieldIn:()=>gx,__classPrivateFieldSet:()=>hx,__createBinding:()=>$l,__decorate:()=>Kv,__disposeResources:()=>Sx,__esDecorate:()=>Jv,__exportStar:()=>nx,__extends:()=>Wv,__generator:()=>sx,__importDefault:()=>px,__importStar:()=>fx,__makeTemplateObject:()=>ux,__metadata:()=>tx,__param:()=>Yv,__propKey:()=>Zv,__read:()=>by,__rest:()=>Qv,__rewriteRelativeImportExtension:()=>Ex,__runInitializers:()=>Xv,__setFunctionName:()=>ex,__spread:()=>ox,__spreadArray:()=>ax,__spreadArrays:()=>ix,__values:()=>Fl,default:()=>w4});function Wv(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_y(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Qv(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}function Kv(e,t,r,s){var n=arguments.length,o=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(n<3?i(o):n>3?i(t,r,o):i(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function Yv(e,t){return function(r,s){t(r,s,e)}}function Jv(e,t,r,s,n,o){function i(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var a=s.kind,c=a==="getter"?"get":a==="setter"?"set":"value",d=!t&&e?s.static?e:e.prototype:null,l=t||(d?Object.getOwnPropertyDescriptor(d,s.name):{}),u,h=!1,m=r.length-1;m>=0;m--){var g={};for(var C in s)g[C]=C==="access"?{}:s[C];for(var C in s.access)g.access[C]=s.access[C];g.addInitializer=function(A){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(A||null))};var v=(0,r[m])(a==="accessor"?{get:l.get,set:l.set}:l[c],g);if(a==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(u=i(v.get))&&(l.get=u),(u=i(v.set))&&(l.set=u),(u=i(v.init))&&n.unshift(u)}else(u=i(v))&&(a==="field"?n.unshift(u):l[c]=u)}d&&Object.defineProperty(d,s.name,l),h=!0}function Xv(e,t,r){for(var s=arguments.length>2,n=0;n<t.length;n++)r=s?t[n].call(e,r):t[n].call(e);return s?r:void 0}function Zv(e){return typeof e=="symbol"?e:"".concat(e)}function ex(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function tx(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function rx(e,t,r,s){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{d(s.next(l))}catch(u){i(u)}}function c(l){try{d(s.throw(l))}catch(u){i(u)}}function d(l){l.done?o(l.value):n(l.value).then(a,c)}d((s=s.apply(e,t||[])).next())})}function sx(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,n,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(l){return c([d,l])}}function c(d){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(s=1,n&&(o=d[0]&2?n.return:d[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,d[1])).done)return o;switch(n=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(l){d=[6,l],n=0}finally{s=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function nx(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&$l(t,e,r)}function Fl(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function by(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var s=r.call(e),n,o=[],i;try{for(;(t===void 0||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function ox(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(by(arguments[t]));return e}function ix(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var s=Array(e),n=0,t=0;t<r;t++)for(var o=arguments[t],i=0,a=o.length;i<a;i++,n++)s[n]=o[i];return s}function ax(e,t,r){if(r||arguments.length===2)for(var s=0,n=t.length,o;s<n;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}function $o(e){return this instanceof $o?(this.v=e,this):new $o(e)}function cx(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(e,t||[]),n,o=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),n[Symbol.asyncIterator]=function(){return this},n;function i(m){return function(g){return Promise.resolve(g).then(m,u)}}function a(m,g){s[m]&&(n[m]=function(C){return new Promise(function(v,A){o.push([m,C,v,A])>1||c(m,C)})},g&&(n[m]=g(n[m])))}function c(m,g){try{d(s[m](g))}catch(C){h(o[0][3],C)}}function d(m){m.value instanceof $o?Promise.resolve(m.value.v).then(l,u):h(o[0][2],m)}function l(m){c("next",m)}function u(m){c("throw",m)}function h(m,g){m(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function dx(e){var t,r;return t={},s("next"),s("throw",function(n){throw n}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(n,o){t[n]=e[n]?function(i){return(r=!r)?{value:$o(e[n](i)),done:!1}:o?o(i):i}:o}}function lx(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Fl=="function"?Fl(e):e[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(o){r[o]=e[o]&&function(i){return new Promise(function(a,c){i=e[o](i),n(a,c,i.done,i.value)})}}function n(o,i,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},i)}}function ux(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function fx(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=wy(e),s=0;s<r.length;s++)r[s]!=="default"&&$l(t,e,r[s]);return E4(t,e),t}function px(e){return e&&e.__esModule?e:{default:e}}function mx(e,t,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(e):s?s.value:t.get(e)}function hx(e,t,r,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r}function gx(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function yx(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var s,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],r&&(n=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0});return t}function Sx(e){function t(o){e.error=e.hasError?new _4(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,s=0;function n(){for(;r=e.stack.pop();)try{if(!r.async&&s===1)return s=0,e.stack.push(r),Promise.resolve().then(n);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(o).then(n,function(i){return t(i),n()})}else s|=1}catch(i){t(i)}if(s===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return n()}function Ex(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,n,o,i){return s?t?".jsx":".js":n&&(!o||!i)?r:n+o+"."+i.toLowerCase()+"js"}):e}var _y,ql,$l,E4,wy,_4,w4,Xs=S(()=>{_y=function(e,t){return _y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},_y(e,t)};ql=function(){return ql=Object.assign||function(t){for(var r,s=1,n=arguments.length;s<n;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},ql.apply(this,arguments)};$l=Object.create?(function(e,t,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]});E4=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},wy=function(e){return wy=Object.getOwnPropertyNames||function(t){var r=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[r.length]=s);return r},wy(e)};_4=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var s=new Error(r);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};w4={__extends:Wv,__assign:ql,__rest:Qv,__decorate:Kv,__param:Yv,__esDecorate:Jv,__runInitializers:Xv,__propKey:Zv,__setFunctionName:ex,__metadata:tx,__awaiter:rx,__generator:sx,__createBinding:$l,__exportStar:nx,__values:Fl,__read:by,__spread:ox,__spreadArrays:ix,__spreadArray:ax,__await:$o,__asyncGenerator:cx,__asyncDelegator:dx,__asyncValues:lx,__makeTemplateObject:ux,__importStar:fx,__importDefault:px,__classPrivateFieldGet:mx,__classPrivateFieldSet:hx,__classPrivateFieldIn:gx,__addDisposableResource:yx,__disposeResources:Sx,__rewriteRelativeImportExtension:Ex}});var wx=w(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.randomUUID=void 0;var b4=(Xs(),z(Js)),_x=b4.__importDefault(require("crypto"));Ul.randomUUID=_x.default.randomUUID.bind(_x.default)});var Cy=w(Cx=>{"use strict";var bx=wx(),Et=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),C4=()=>{if(bx.randomUUID)return bx.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,Et[e[0]]+Et[e[1]]+Et[e[2]]+Et[e[3]]+"-"+Et[e[4]]+Et[e[5]]+"-"+Et[e[6]]+Et[e[7]]+"-"+Et[e[8]]+Et[e[9]]+"-"+Et[e[10]]+Et[e[11]]+Et[e[12]]+Et[e[13]]+Et[e[14]]+Et[e[15]]};Cx.v4=C4});var _t,Rx=S(()=>{_t=y(Cy())});var rt,vx=S(()=>{rt=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};rt.from=e=>e&&typeof e=="object"&&(e instanceof rt||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?rt(String(e)):rt(JSON.stringify(e));rt.fromObject=rt.from});function Ry(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var xx=S(()=>{});function ms(e,t,r){let s=Number(e);if(s<t||s>r)throw new Error(`Value ${s} out of range [${t}, ${r}]`)}var vy,xy,Ay,Ax,Tx,R4,v4,x4,A4,T4,Ma,Ty,Py,Px=S(()=>{vy="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",xy="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Ay="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",Ax="(\\d?\\d)",Tx="(\\d{4})",R4=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),v4=new RegExp(`^${vy}, ${Ax} ${xy} ${Tx} ${Ay} GMT$`),x4=new RegExp(`^${vy}, ${Ax}-${xy}-(\\d\\d) ${Ay} GMT$`),A4=new RegExp(`^${vy} ${xy} ( [1-9]|\\d\\d) ${Ay} ${Tx}$`),T4=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ma=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},Ty=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=R4.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,s,n,o,i,a,,c,d]=t;ms(s,1,12),ms(n,1,31),ms(o,0,23),ms(i,0,59),ms(a,0,60);let l=new Date(Date.UTC(Number(r),Number(s)-1,Number(n),Number(o),Number(i),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(l.setUTCFullYear(Number(r)),d.toUpperCase()!="Z"){let[,u,h,m]=/([+-])(\d\d):(\d\d)/.exec(d)||[void 0,"+",0,0],g=u==="-"?1:-1;l.setTime(l.getTime()+g*(Number(h)*60*60*1e3+Number(m)*60*1e3))}return l},Py=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,s,n,o,i,a,c;if((c=v4.exec(e))?[,t,r,s,n,o,i,a]=c:(c=x4.exec(e))?([,t,r,s,n,o,i,a]=c,s=(Number(s)+1900).toString()):(c=A4.exec(e))&&([,r,t,n,o,i,a,s]=c),s&&i){let d=Date.UTC(Number(s),T4.indexOf(r),Number(t),Number(n),Number(o),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);ms(t,1,31),ms(n,0,23),ms(o,0,59),ms(i,0,60);let l=new Date(d);return l.setUTCFullYear(Number(s)),l}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function Iy(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let s=e.split(t);if(r===1)return s;let n=[],o="";for(let i=0;i<s.length;i++)o===""?o=s[i]:o+=t+s[i],(i+1)%r===0&&(n.push(o),o="");return o!==""&&n.push(o),n}var Ix=S(()=>{});var La,Nx=S(()=>{La=e=>{let t=e.length,r=[],s=!1,n,o=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':n!=="\\"&&(s=!s);break;case",":s||(r.push(e.slice(o,i)),o=i+1);break;default:}n=a}return r.push(e.slice(o)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function Ny(e){return new oe(String(e),"bigDecimal")}var Ox,oe,Dx=S(()=>{Ox=/^-?\d*(\.\d+)?$/,oe=class e{string;type;constructor(t,r){if(this.string=t,this.type=r,!Ox.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&Ox.test(r.string)}}});var kx={};tt(kx,{LazyJsonString:()=>rt,NumericValue:()=>oe,_parseEpochTimestamp:()=>Ma,_parseRfc3339DateTimeWithOffset:()=>Ty,_parseRfc7231DateTime:()=>Py,copyDocumentWithTransform:()=>Hz,dateToUtcString:()=>Xn,expectBoolean:()=>zz,expectByte:()=>fy,expectFloat32:()=>kl,expectInt:()=>Gz,expectInt32:()=>ly,expectLong:()=>Pa,expectNonNull:()=>Qz,expectNumber:()=>Ta,expectObject:()=>jv,expectShort:()=>uy,expectString:()=>Kz,expectUnion:()=>Yz,generateIdempotencyToken:()=>_t.v4,handleFloat:()=>Zz,limitedParseDouble:()=>hy,limitedParseFloat:()=>e4,limitedParseFloat32:()=>t4,logger:()=>Ia,nv:()=>Ny,parseBoolean:()=>jz,parseEpochTimestamp:()=>ka,parseRfc3339DateTime:()=>i4,parseRfc3339DateTimeWithOffset:()=>Oa,parseRfc7231DateTime:()=>Da,quoteHeader:()=>Ry,splitEvery:()=>Iy,splitHeader:()=>La,strictParseByte:()=>gy,strictParseDouble:()=>Ll,strictParseFloat:()=>Jz,strictParseFloat32:()=>my,strictParseInt:()=>r4,strictParseInt32:()=>s4,strictParseLong:()=>Vv,strictParseShort:()=>Jn});var Ze=S(()=>{Hv();Gv();Rx();vx();yy();xx();Px();Ix();Nx();Dx()});var Pt,Uo=S(()=>{Pt=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});var Mx,Oy,Lx=S(()=>{Mx=y(Te()),Oy=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:s,serdeContext:n,defaultContentType:o}){this.marshaller=t,this.serializer=r,this.deserializer=s,this.serdeContext=n,this.defaultContentType=o}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:s}){let n=this.marshaller,o=r.getEventStreamMember(),i=r.getMemberSchema(o),a=this.serializer,c=this.defaultContentType,d=Symbol("initialRequestMarker"),l={async*[Symbol.asyncIterator](){if(s){let u={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,s);let h=a.flush();yield{[d]:!0,headers:u,body:h}}for await(let u of t)yield u}};return n.serialize(l,u=>{if(u[d])return{headers:u.headers,body:u.body};let h=Object.keys(u).find(N=>N!=="__type")??"",{additionalHeaders:m,body:g,eventType:C,explicitPayloadContentType:v}=this.writeEventBody(h,i,u);return{headers:{":event-type":{type:"string",value:C},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:v??c},...m},body:g}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:s}){let n=this.marshaller,o=r.getEventStreamMember(),a=r.getMemberSchema(o).getMemberSchemas(),c=Symbol("initialResponseMarker"),d=n.deserialize(t.body,async h=>{let m=Object.keys(h).find(g=>g!=="__type")??"";if(m==="initial-response"){let g=await this.deserializer.read(r,h[m].body);return delete g[o],{[c]:!0,...g}}else if(m in a){let g=a[m];return{[m]:await this.deserializer.read(g,h[m].body)}}else return{$unknown:h}}),l=d[Symbol.asyncIterator](),u=await l.next();if(u.done)return d;if(u.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[h,m]of Object.entries(u.value))s[h]=m}return{async*[Symbol.asyncIterator](){for(u?.value?.[c]||(yield u.value);;){let{done:h,value:m}=await l.next();if(h)break;yield m}}}}writeEventBody(t,r,s){let n=this.serializer,o=t,i=null,a,c=r.getSchema()[4].includes(t),d={};if(c){let h=r.getMemberSchema(t);if(h.isStructSchema()){for(let[m,g]of h.structIterator()){let{eventHeader:C,eventPayload:v}=g.getMergedTraits();if(v){i=m;break}else if(C){let A=s[t][m],N="binary";g.isNumericSchema()?(-2)**31<=A&&A<=2**31-1?N="integer":N="long":g.isTimestampSchema()?N="timestamp":g.isStringSchema()?N="string":g.isBooleanSchema()&&(N="boolean"),A!=null&&(d[m]={type:N,value:A},delete s[t][m])}}if(i!==null){let m=h.getMemberSchema(i);m.isBlobSchema()?a="application/octet-stream":m.isStringSchema()&&(a="text/plain"),n.write(m,s[t][i])}else n.write(h,s[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[h,m]=s[t];o=h,n.write(15,m)}let l=n.flush();return{body:typeof l=="string"?(this.serdeContext?.utf8Decoder??Mx.fromUtf8)(l):l,eventType:o,explicitPayloadContentType:a,additionalHeaders:d}}}});var qx={};tt(qx,{EventStreamSerde:()=>Oy});var Fx=S(()=>{Lx()});var Bl,Zn,Hl=S(()=>{le();Bl=y(ce());Uo();Zn=class extends Pt{options;constructor(t){super(),this.options=t}getRequestType(){return Bl.HttpRequest}getResponseType(){return Bl.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,t.query||(t.query={});for(let[s,n]of r.url.searchParams.entries())t.query[s]=n;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,s){let n=D.of(r.input),o=zr(r.traits??{});if(o.endpoint){let i=o.endpoint?.[0];if(typeof i=="string"){let a=[...n.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let d=s[c];if(typeof d!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);i=i.replace(`{${c}}`,d)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:s})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:s})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(()=>(Fx(),qx));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,s,n,o){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}});var $x,Ux,Nr,Bx=S(()=>{le();Ze();$x=y(ce()),Ux=y(Ra());Al();Tl();Hl();Nr=class extends Zn{async serializeRequest(t,r,s){let n={...r??{}},o=this.serializer,i={},a={},c=await s.endpoint(),d=D.of(t?.input),l=d.getSchema(),u=!1,h,m=new $x.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(c){this.updateServiceEndpoint(m,c),this.setHostPrefix(m,t,n);let g=zr(t.traits);if(g.http){m.method=g.http[0];let[C,v]=g.http[1].split("?");m.path=="/"?m.path=C:m.path+=C;let A=new URLSearchParams(v??"");Object.assign(i,Object.fromEntries(A))}}for(let[g,C]of d.structIterator()){let v=C.getMergedTraits()??{},A=n[g];if(A!=null)if(v.httpPayload)C.isStreaming()?C.isStructSchema()?n[g]&&(h=await this.serializeEventStream({eventStream:n[g],requestSchema:d})):h=A:(o.write(C,A),h=o.flush()),delete n[g];else if(v.httpLabel){o.write(C,A);let N=o.flush();m.path.includes(`{${g}+}`)?m.path=m.path.replace(`{${g}+}`,N.split("/").map(Kt).join("/")):m.path.includes(`{${g}}`)&&(m.path=m.path.replace(`{${g}}`,Kt(N))),delete n[g]}else if(v.httpHeader)o.write(C,A),a[v.httpHeader.toLowerCase()]=String(o.flush()),delete n[g];else if(typeof v.httpPrefixHeaders=="string"){for(let[N,$]of Object.entries(A)){let H=v.httpPrefixHeaders+N;o.write([C.getValueSchema(),{httpHeader:H}],$),a[H.toLowerCase()]=o.flush()}delete n[g]}else v.httpQuery||v.httpQueryParams?(this.serializeQuery(C,A,i),delete n[g]):u=!0}return u&&n&&(o.write(l,n),h=o.flush()),m.headers=a,m.query=i,m.body=h,m}serializeQuery(t,r,s){let n=this.serializer,o=t.getMergedTraits();if(o.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in s)){let c=t.getValueSchema();Object.assign(c.getMergedTraits(),{...o,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(c,a,s)}return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let c of r){n.write([t.getValueSchema(),o],c);let d=n.flush();(i||d!==void 0)&&a.push(d)}s[o.httpQuery]=a}else n.write([t,o],r),s[o.httpQuery]=n.flush()}async deserializeResponse(t,r,s){let n=this.deserializer,o=D.of(t.output),i={};if(s.statusCode>=300){let c=await Mt(s.body,r);throw c.byteLength>0&&Object.assign(i,await n.read(15,c)),await this.handleError(t,r,s,i,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in s.headers){let d=s.headers[c];delete s.headers[c],s.headers[c.toLowerCase()]=d}let a=await this.deserializeHttpMessage(o,r,s,i);if(a.length){let c=await Mt(s.body,r);if(c.byteLength>0){let d=await n.read(o,c);for(let l of a)i[l]=d[l]}}return i.$metadata=this.deserializeMetadata(s),i}async deserializeHttpMessage(t,r,s,n,o){let i;n instanceof Set?i=o:i=n;let a=this.deserializer,c=D.of(t),d=[];for(let[l,u]of c.structIterator()){let h=u.getMemberTraits();if(h.httpPayload){if(u.isStreaming())u.isStructSchema()?i[l]=await this.deserializeEventStream({response:s,responseSchema:c}):i[l]=(0,Ux.sdkStreamMixin)(s.body);else if(s.body){let g=await Mt(s.body,r);g.byteLength>0&&(i[l]=await a.read(u,g))}}else if(h.httpHeader){let m=String(h.httpHeader).toLowerCase(),g=s.headers[m];if(g!=null)if(u.isListSchema()){let C=u.getValueSchema();C.getMergedTraits().httpHeader=m;let v;C.isTimestampSchema()&&C.getSchema()===4?v=Iy(g,",",2):v=La(g);let A=[];for(let N of v)A.push(await a.read(C,N.trim()));i[l]=A}else i[l]=await a.read(u,g)}else if(h.httpPrefixHeaders!==void 0){i[l]={};for(let[m,g]of Object.entries(s.headers))if(m.startsWith(h.httpPrefixHeaders)){let C=u.getValueSchema();C.getMergedTraits().httpHeader=m,i[l][m.slice(h.httpPrefixHeaders.length)]=await a.read(C,g)}}else h.httpResponseCode?i[l]=s.statusCode:d.push(l)}return d}}});var Hx,Yt,jx=S(()=>{le();Hx=y(ce());Al();Hl();Yt=class extends Zn{async serializeRequest(t,r,s){let n=this.serializer,o={},i={},a=await s.endpoint(),c=D.of(t?.input),d=c.getSchema(),l,u=new Hx.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:o,headers:i,body:void 0});a&&(this.updateServiceEndpoint(u,a),this.setHostPrefix(u,t,r));let h={...r};if(r){let m=c.getEventStreamMember();if(m){if(h[m]){let g={};for(let[C,v]of c.structIterator())C!==m&&h[C]&&(n.write(v,h[C]),g[C]=n.flush());l=await this.serializeEventStream({eventStream:h[m],requestSchema:c,initialRequest:g})}}else n.write(d,h),l=n.flush()}return u.headers=i,u.query=o,u.body=l,u.method="POST",u}async deserializeResponse(t,r,s){let n=this.deserializer,o=D.of(t.output),i={};if(s.statusCode>=300){let c=await Mt(s.body,r);throw c.byteLength>0&&Object.assign(i,await n.read(15,c)),await this.handleError(t,r,s,i,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in s.headers){let d=s.headers[c];delete s.headers[c],s.headers[c.toLowerCase()]=d}let a=o.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:s,responseSchema:o,initialResponseContainer:i});else{let c=await Mt(s.body,r);c.byteLength>0&&Object.assign(i,await n.read(o,c))}return i.$metadata=this.deserializeMetadata(s),i}}});var Dy,ky=S(()=>{Tl();Dy=(e,t,r,s,n,o)=>{if(t!=null&&t[r]!==void 0){let i=s();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(n,o?i.split("/").map(a=>Kt(a)).join("/"):Kt(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function eo(e,t){return new jl(e,t)}var zx,jl,Vx=S(()=>{zx=y(ce());ky();jl=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(t,r){this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:s,path:n}=await this.context.endpoint();this.path=n;for(let o of this.resolvePathStack)o(this.path);return new zx.HttpRequest({protocol:r,hostname:this.hostname||t,port:s,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,s,n){return this.resolvePathStack.push(o=>{this.path=Dy(o,this.input,t,r,s,n)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function Ke(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:s,httpHeader:n,httpQuery:o}=e.getMergedTraits();return(t.httpBindings?typeof s=="string"||n?6:o||r?5:void 0:void 0)??t.timestampFormat.default}var zl=S(()=>{});var My,Gx,hs,Ly=S(()=>{le();Ze();My=y(Ae()),Gx=y(Te());Uo();zl();hs=class extends Pt{settings;constructor(t){super(),this.settings=t}read(t,r){let s=D.of(t);if(s.isListSchema())return La(r).map(n=>this.read(s.getValueSchema(),n));if(s.isBlobSchema())return(this.serdeContext?.base64Decoder??My.fromBase64)(r);if(s.isTimestampSchema())switch(Ke(s,this.settings)){case 5:return Ty(r);case 6:return Py(r);case 7:return Ma(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isStringSchema()){let n=s.getMergedTraits().mediaType,o=r;if(n)return s.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(n==="application/json"||n.endsWith("+json"))&&(o=rt.from(o)),o}return s.isNumericSchema()?Number(r):s.isBigIntegerSchema()?BigInt(r):s.isBigDecimalSchema()?new oe(r,"bigDecimal"):s.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??Gx.toUtf8)((this.serdeContext?.base64Decoder??My.fromBase64)(t))}}});var Vl,Or,Wx=S(()=>{le();Vl=y(Te());Uo();Ly();Or=class extends Pt{codecDeserializer;stringDeserializer;constructor(t,r){super(),this.codecDeserializer=t,this.stringDeserializer=new hs(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let s=D.of(t),n=s.getMergedTraits(),o=this.serdeContext?.utf8Encoder??Vl.toUtf8;if(n.httpHeader||n.httpResponseCode)return this.stringDeserializer.read(s,o(r));if(n.httpPayload){if(s.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??Vl.fromUtf8;return typeof r=="string"?i(r):r}else if(s.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(s,r)}}});var qy,qa,Fy=S(()=>{le();Ze();qy=y(Ae());Uo();zl();qa=class extends Pt{settings;stringBuffer="";constructor(t){super(),this.settings=t}write(t,r){let s=D.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${s.getName(!0)}`);switch(Ke(s,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Xn(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??qy.toBase64)(r);return}if(s.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([s.getValueSchema(),s.getMergedTraits()],a);let c=this.flush(),d=s.getValueSchema().isTimestampSchema()?c:Ry(c);i!==""&&(i+=", "),i+=d}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let n=s.getMergedTraits().mediaType,o=r;if(n&&((n==="application/json"||n.endsWith("+json"))&&(o=rt.from(o)),s.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??qy.toBase64)(o.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var Dr,Qx=S(()=>{le();Fy();Dr=class{codecSerializer;stringSerializer;buffer;constructor(t,r,s=new qa(r)){this.codecSerializer=t,this.stringSerializer=s}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let s=D.of(t),n=s.getMergedTraits();if(n.httpHeader||n.httpLabel||n.httpQuery){this.stringSerializer.write(s,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(s,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var Kx={};tt(Kx,{FromStringShapeDeserializer:()=>hs,HttpBindingProtocol:()=>Nr,HttpInterceptingShapeDeserializer:()=>Or,HttpInterceptingShapeSerializer:()=>Dr,HttpProtocol:()=>Zn,RequestBuilder:()=>jl,RpcProtocol:()=>Yt,SerdeContext:()=>Pt,ToStringShapeSerializer:()=>qa,collectBody:()=>Mt,determineTimestampFormat:()=>Ke,extendedEncodeURIComponent:()=>Kt,requestBuilder:()=>eo,resolvedPath:()=>Dy});var ke=S(()=>{Al();Tl();Bx();Hl();jx();Vx();ky();Ly();Wx();Qx();Fy();zl();Uo()});var F=w(we=>{"use strict";var Xx=bR(),Wy=(ke(),z(Kx)),Uy=Gs(),P4=(le(),z(dy)),Yx=(Ze(),z(kx)),By=class{config;middlewareStack=Xx.constructStack();initConfig;handlers;constructor(t){this.config=t}send(t,r,s){let n=typeof r!="function"?r:void 0,o=typeof r=="function"?r:s,i=n===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,n),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,n);if(o)a(t).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},$y="***SensitiveInformation***";function Hy(e,t){if(t==null)return t;let r=P4.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return $y;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return $y}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return $y}else if(r.isStructSchema()&&typeof t=="object"){let s=t,n={};for(let[o,i]of r.structIterator())s[o]!=null&&(n[o]=Hy(i,s[o]));return n}return t}var Gl=class{middlewareStack=Xx.constructStack();schema;static classBuilder(){return new jy}resolveMiddlewareWithContext(t,r,s,{middlewareFn:n,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:d,additionalContext:l,CommandCtor:u}){for(let v of n.bind(this)(u,t,r,s))this.middlewareStack.use(v);let h=t.concat(this.middlewareStack),{logger:m}=r,g={logger:m,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Uy.SMITHY_CONTEXT_KEY]:{commandInstance:this,...d},...l},{requestHandler:C}=r;return h.resolve(v=>C.handle(v.request,s||{}),g)}},jy=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,s={}){return this._smithyContext={service:t,operation:r,...s},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=s=>s,r=s=>s){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends Gl{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[s]){super(),this.input=s??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(s,n,o){let i=t._operationSchema,a=i?.[4]??i?.input,c=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(s,n,o,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(i?Hy.bind(null,a):d=>d),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(i?Hy.bind(null,c):d=>d),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}},I4="***SensitiveInformation***",N4=(e,t)=>{for(let r of Object.keys(e)){let s=e[r],n=async function(i,a,c){let d=new s(i);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[o]=n}},zy=class e extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},Zx=(e,t={})=>{Object.entries(t).filter(([,s])=>s!==void 0).forEach(([s,n])=>{(e[s]==null||e[s]==="")&&(e[s]=n)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},eA=({output:e,parsedBody:t,exceptionCtor:r,errorCode:s})=>{let n=D4(e),o=n.httpStatusCode?n.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||s||o||"UnknownError",$fault:"client",$metadata:n});throw Zx(i,t)},O4=e=>({output:t,parsedBody:r,errorCode:s})=>{eA({output:t,parsedBody:r,exceptionCtor:e,errorCode:s})},D4=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),k4=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Jx=!1,M4=e=>{e&&!Jx&&parseInt(e.substring(1,e.indexOf(".")))<16&&(Jx=!0)},L4=e=>{let t=[];for(let r in Uy.AlgorithmId){let s=Uy.AlgorithmId[r];e[s]!==void 0&&t.push({algorithmId:()=>s,checksumConstructor:()=>e[s]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},q4=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},F4=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),$4=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},tA=e=>Object.assign(L4(e),F4(e)),U4=tA,B4=e=>Object.assign(q4(e),$4(e)),H4=e=>Array.isArray(e)?e:[e],rA=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=rA(e[r]));return e},j4=e=>e!=null,Vy=class{trace(){}debug(){}info(){}warn(){}error(){}};function sA(e,t,r){let s,n,o;if(typeof t>"u"&&typeof r>"u")s={},o=e;else{if(s=e,typeof t=="function")return n=t,o=r,G4(s,n,o);o=t}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){s[i]=o[i];continue}nA(s,null,o,i)}return s}var z4=e=>{let t={};for(let[r,s]of Object.entries(e||{}))t[r]=[,s];return t},V4=(e,t)=>{let r={};for(let s in t)nA(r,e,t,s);return r},G4=(e,t,r)=>sA(e,Object.entries(r).reduce((s,[n,o])=>(Array.isArray(o)?s[n]=o:typeof o=="function"?s[n]=[t,o()]:s[n]=[t,o],s),{})),nA=(e,t,r,s)=>{if(t!==null){let i=r[s];typeof i=="function"&&(i=[,i]);let[a=W4,c=Q4,d=s]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[s]=c(t[d]));return}let[n,o]=r[s];if(typeof o=="function"){let i,a=n===void 0&&(i=o())!=null,c=typeof n=="function"&&!!n(void 0)||typeof n!="function"&&!!n;a?e[s]=i:c&&(e[s]=o())}else{let i=n===void 0&&o!=null,a=typeof n=="function"&&!!n(o)||typeof n!="function"&&!!n;(i||a)&&(e[s]=o)}},W4=e=>e!=null,Q4=e=>e,K4=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},Y4=e=>e.toISOString().replace(".000Z","Z"),Gy=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(Gy);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=Gy(e[r]));return t}return e};Object.defineProperty(we,"collectBody",{enumerable:!0,get:function(){return Wy.collectBody}});Object.defineProperty(we,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return Wy.extendedEncodeURIComponent}});Object.defineProperty(we,"resolvedPath",{enumerable:!0,get:function(){return Wy.resolvedPath}});we.Client=By;we.Command=Gl;we.NoOpLogger=Vy;we.SENSITIVE_STRING=I4;we.ServiceException=zy;we._json=Gy;we.convertMap=z4;we.createAggregatedClient=N4;we.decorateServiceException=Zx;we.emitWarningIfUnsupportedVersion=M4;we.getArrayIfSingleItem=H4;we.getDefaultClientConfiguration=U4;we.getDefaultExtensionConfiguration=tA;we.getValueFromTextNode=rA;we.isSerializableHeaderValue=j4;we.loadConfigsForDefaultMode=k4;we.map=sA;we.resolveDefaultRuntimeConfig=B4;we.serializeDateTime=Y4;we.serializeFloat=K4;we.take=V4;we.throwDefaultError=eA;we.withBaseException=O4;Object.keys(Yx).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(we,e)&&Object.defineProperty(we,e,{enumerable:!0,get:function(){return Yx[e]}})})});var pA=w(Lt=>{"use strict";var J4=F(),Qy=Cl(),Ky=Te(),X4=e=>Object.assign(e,{useQueueUrlAsEndpoint:e.useQueueUrlAsEndpoint??!0});function oA({useQueueUrlAsEndpoint:e,endpoint:t}){return(r,s)=>async n=>{let{input:o}=n,i=s.endpointV2;if(!t&&o.QueueUrl&&i&&e){let a=s.logger instanceof J4.NoOpLogger||!s.logger?.warn?console:s.logger;try{let c=new URL(o.QueueUrl),d=new URL(c.origin);i.url.origin!==d.origin&&(a.warn(`QueueUrl=${o.QueueUrl} differs from SQSClient resolved endpoint=${i.url.toString()}, using QueueUrl host as endpoint.
Set [endpoint=string] or [useQueueUrlAsEndpoint=false] on the SQSClient.`),s.endpointV2={...i,url:d})}catch(c){a.warn(c)}}return r(n)}}var iA={name:"queueUrlMiddleware",relation:"after",toMiddleware:"endpointV2Middleware",override:!0},Z4=e=>({applyToStack:t=>{t.addRelativeTo(oA(e),iA)}});function aA(e){return t=>async r=>{let s=await t({...r});if(e.md5===!1)return s;let n=s.output,o=[];if(n.Messages!==void 0)for(let i of n.Messages){let a=i.MD5OfBody,c=new e.md5;c.update(Ky.toUint8Array(i.Body||"")),a!==Qy.toHex(await c.digest())&&o.push(i.MessageId)}if(o.length>0)throw new Error("Invalid MD5 checksum on messages: "+o.join(", "));return s}}var cA={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"receiveMessageMiddleware",override:!0},eV=e=>({applyToStack:t=>{t.add(aA(e),cA)}}),dA=e=>t=>async r=>{let s=await t({...r});if(e.md5===!1)return s;let n=s.output,o=new e.md5;if(o.update(Ky.toUint8Array(r.input.MessageBody||"")),n.MD5OfMessageBody!==Qy.toHex(await o.digest()))throw new Error("InvalidChecksumError");return s},lA={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"sendMessageMiddleware",override:!0},tV=e=>({applyToStack:t=>{t.add(dA(e),lA)}}),uA=e=>t=>async r=>{let s=await t({...r});if(e.md5===!1)return s;let n=s.output,o=[],i={};if(n.Successful!==void 0)for(let a of n.Successful)a.Id!==void 0&&(i[a.Id]=a);for(let a of r.input.Entries)if(i[a.Id]){let c=i[a.Id].MD5OfMessageBody,d=new e.md5;d.update(Ky.toUint8Array(a.MessageBody||"")),c!==Qy.toHex(await d.digest())&&o.push(i[a.Id].MessageId)}if(o.length>0)throw new Error("Invalid MD5 checksum on messages: "+o.join(", "));return s},fA={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"sendMessageBatchMiddleware",override:!0},rV=e=>({applyToStack:t=>{t.add(uA(e),fA)}});Lt.getQueueUrlPlugin=Z4;Lt.getReceiveMessagePlugin=eV;Lt.getSendMessageBatchPlugin=rV;Lt.getSendMessagePlugin=tV;Lt.queueUrlMiddleware=oA;Lt.queueUrlMiddlewareOptions=iA;Lt.receiveMessageMiddleware=aA;Lt.receiveMessageMiddlewareOptions=cA;Lt.resolveQueueUrlConfig=X4;Lt.sendMessageBatchMiddleware=uA;Lt.sendMessageBatchMiddlewareOptions=fA;Lt.sendMessageMiddleware=dA;Lt.sendMessageMiddlewareOptions=lA});var Yy,sV,mA=S(()=>{Yy=y(Gs()),sV=e=>e[Yy.SMITHY_CONTEXT_KEY]||(e[Yy.SMITHY_CONTEXT_KEY]={})});var hA,gA=S(()=>{hA=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let s of t)for(let n of e)n.schemeId.split("#")[1]===s&&r.push(n);for(let s of e)r.find(({schemeId:n})=>n===s.schemeId)||r.push(s);return r}});function nV(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var yA,Fa,Wl=S(()=>{yA=y(it());gA();Fa=(e,t)=>(r,s)=>async n=>{let o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,s,n.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=hA(o,i),c=nV(e.httpAuthSchemes),d=(0,yA.getSmithyContext)(s),l=[];for(let u of a){let h=c.get(u.schemeId);if(!h){l.push(`HttpAuthScheme \`${u.schemeId}\` was not enabled for this service.`);continue}let m=h.identityProvider(await t.identityProviderConfigProvider(e));if(!m){l.push(`HttpAuthScheme \`${u.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:g={},signingProperties:C={}}=u.propertiesExtractor?.(e,s)||{};u.identityProperties=Object.assign(u.identityProperties||{},g),u.signingProperties=Object.assign(u.signingProperties||{},C),d.selectedHttpAuthScheme={httpAuthOption:u,identity:await m(u.identityProperties),signer:h.signer};break}if(!d.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(n)}});var SA,gs,EA=S(()=>{Wl();SA={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},gs=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(Fa(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),SA)}})});var nr=w(Bo=>{"use strict";var oV=ce(),_A=(e,t)=>(r,s)=>async n=>{let{response:o}=await r(n);try{let i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!s.logger||s.logger?.constructor?.name==="NoOpLogger"?console.warn(a):s.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(oV.HttpResponse.isInstance(o)){let{headers:c={}}=o,d=Object.entries(c);i.$metadata={httpStatusCode:o.statusCode,requestId:Jy(/^x-[\w-]+-request-?id$/,d),extendedRequestId:Jy(/^x-[\w-]+-id-2$/,d),cfId:Jy(/^x-[\w-]+-cf-id$/,d)}}}catch{}}throw i}},Jy=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],wA=(e,t)=>(r,s)=>async n=>{let o=e,i=s.endpointV2?.url&&o.urlParser?async()=>o.urlParser(s.endpointV2.url):o.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(n.input,{...e,endpoint:i});return r({...n,request:a})},bA={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},CA={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function iV(e,t,r){return{applyToStack:s=>{s.add(_A(e,r),bA),s.add(wA(e,t),CA)}}}Bo.deserializerMiddleware=_A;Bo.deserializerMiddlewareOption=bA;Bo.getSerdePlugin=iV;Bo.serializerMiddleware=wA;Bo.serializerMiddlewareOption=CA});var RA,vA,aV,xA=S(()=>{RA=y(nr());Wl();vA={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:RA.serializerMiddlewareOption.name},aV=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(Fa(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),vA)}})});var AA=S(()=>{Wl();EA();xA()});var TA,PA,cV,dV,Xy,Zy=S(()=>{TA=y(ce()),PA=y(it()),cV=e=>t=>{throw t},dV=(e,t)=>{},Xy=e=>(t,r)=>async s=>{if(!TA.HttpRequest.isInstance(s.request))return t(s);let o=(0,PA.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,d=await t({...s,request:await c.sign(s.request,a,i)}).catch((c.errorHandler||cV)(i));return(c.successHandler||dV)(d.response,i),d}});var IA,ys,NA=S(()=>{Zy();IA={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},ys=e=>({applyToStack:t=>{t.addRelativeTo(Xy(e),IA)}})});var OA=S(()=>{Zy();NA()});var It,DA=S(()=>{It=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function kA(e,t,r,s,n){return async function*(i,a,...c){let d=a,l=i.startingToken??d[r],u=!0,h;for(;u;){if(d[r]=l,n&&(d[n]=d[n]??i.pageSize),i.client instanceof e)h=await lV(t,i.client,a,i.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield h;let m=l;l=uV(h,s),u=!!(l&&(!i.stopOnSameToken||l!==m))}return void 0}}var lV,uV,MA=S(()=>{lV=async(e,t,r,s=o=>o,...n)=>{let o=new e(r);return o=s(o)??o,await t.send(o,...n)};uV=(e,t)=>{let r=e,s=t.split(".");for(let n of s){if(!r||typeof r!="object")return;r=r[n]}return r}});var LA=S(()=>{ke()});function fV(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var qA=S(()=>{});var kr,FA=S(()=>{kr=class{authSchemes=new Map;constructor(t){for(let[r,s]of Object.entries(t))s!==void 0&&this.authSchemes.set(r,s)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var $A,eS,tS,UA=S(()=>{$A=y(ce()),eS=y(Gs()),tS=class{async sign(t,r,s){if(!s)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!s.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!s.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let n=$A.HttpRequest.clone(t);if(s.in===eS.HttpApiKeyAuthLocation.QUERY)n.query[s.name]=r.apiKey;else if(s.in===eS.HttpApiKeyAuthLocation.HEADER)n.headers[s.name]=s.scheme?`${s.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+s.in+"`");return n}}});var BA,rS,HA=S(()=>{BA=y(ce()),rS=class{async sign(t,r,s){let n=BA.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return n.headers.Authorization=`Bearer ${r.token}`,n}}});var Nt,jA=S(()=>{Nt=class{async sign(t,r,s){return t}}});var zA=S(()=>{UA();HA();jA()});var VA,pV,$a,Ho,Ua,GA=S(()=>{VA=e=>function(r){return Ho(r)&&r.expiration.getTime()-Date.now()<e},pV=3e5,$a=VA(3e5),Ho=e=>e.expiration!==void 0,Ua=(e,t,r)=>{if(e===void 0)return;let s=typeof e!="function"?async()=>Promise.resolve(e):e,n,o,i,a=!1,c=async d=>{o||(o=s(d));try{n=await o,i=!0,a=!1}finally{o=void 0}return n};return t===void 0?async d=>((!i||d?.forceRefresh)&&(n=await c(d)),n):async d=>((!i||d?.forceRefresh)&&(n=await c(d)),a?n:r(n)?(t(n)&&await c(d),n):(a=!0,n))}});var WA=S(()=>{FA();zA();GA()});var Gr={};tt(Gr,{DefaultIdentityProviderConfig:()=>kr,EXPIRATION_MS:()=>pV,HttpApiKeyAuthSigner:()=>tS,HttpBearerAuthSigner:()=>rS,NoAuthSigner:()=>Nt,createIsIdentityExpiredFunction:()=>VA,createPaginator:()=>kA,doesIdentityRequireRefresh:()=>Ho,getHttpAuthSchemeEndpointRuleSetPlugin:()=>gs,getHttpAuthSchemePlugin:()=>aV,getHttpSigningPlugin:()=>ys,getSmithyContext:()=>sV,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>SA,httpAuthSchemeMiddleware:()=>Fa,httpAuthSchemeMiddlewareOptions:()=>vA,httpSigningMiddleware:()=>Xy,httpSigningMiddlewareOptions:()=>IA,isIdentityExpired:()=>$a,memoizeIdentityProvider:()=>Ua,normalizeProvider:()=>It,requestBuilder:()=>eo,setFeature:()=>fV});var ve=S(()=>{mA();AA();OA();DA();MA();LA();qA();WA()});var Mr=w(to=>{"use strict";var nS=Gs(),oS=class{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let s=this.hash(t);if(s===!1)return r();if(!this.data.has(s)){if(this.data.size>this.capacity+10){let n=this.data.keys(),o=0;for(;;){let{value:i,done:a}=n.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(s,r())}return this.data.get(s)}size(){return this.data.size}hash(t){let r="",{parameters:s}=this;if(s.length===0)return!1;for(let n of s){let o=String(t[n]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}},mV=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),QA=e=>mV.test(e)||e.startsWith("[")&&e.endsWith("]"),hV=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),aS=(e,t=!1)=>{if(!t)return hV.test(e);let r=e.split(".");for(let s of r)if(!aS(s))return!1;return!0},iS={},Ba="endpoints";function Zs(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Zs(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Zs).join(", ")})`:JSON.stringify(e,null,2)}var wt=class extends Error{constructor(t){super(t),this.name="EndpointError"}},gV=(e,t)=>e===t,yV=e=>{let t=e.split("."),r=[];for(let s of t){let n=s.indexOf("[");if(n!==-1){if(s.indexOf("]")!==s.length-1)throw new wt(`Path: '${e}' does not end with ']'`);let o=s.slice(n+1,-1);if(Number.isNaN(parseInt(o)))throw new wt(`Invalid array index: '${o}' in path: '${e}'`);n!==0&&r.push(s.slice(0,n)),r.push(o)}else r.push(s)}return r},KA=(e,t)=>yV(t).reduce((r,s)=>{if(typeof r!="object")throw new wt(`Index '${s}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(s)]:r[s]},e),SV=e=>e!=null,EV=e=>!e,sS={[nS.EndpointURLScheme.HTTP]:80,[nS.EndpointURLScheme.HTTPS]:443},_V=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:h,port:m,protocol:g="",path:C="",query:v={}}=e,A=new URL(`${g}//${h}${m?`:${m}`:""}${C}`);return A.search=Object.entries(v).map(([N,$])=>`${N}=${$}`).join("&"),A}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:s,hostname:n,pathname:o,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(nS.EndpointURLScheme).includes(c))return null;let d=QA(n),l=r.includes(`${s}:${sS[c]}`)||typeof e=="string"&&e.includes(`${s}:${sS[c]}`),u=`${s}${l?`:${sS[c]}`:""}`;return{scheme:c,authority:u,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:d}},wV=(e,t)=>e===t,bV=(e,t,r,s)=>t>=r||e.length<r?null:s?e.substring(e.length-r,e.length-t):e.substring(t,r),CV=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),RV={booleanEquals:gV,getAttr:KA,isSet:SV,isValidHostLabel:aS,not:EV,parseURL:_V,stringEquals:wV,substring:bV,uriEncode:CV},YA=(e,t)=>{let r=[],s={...t.endpointParams,...t.referenceRecord},n=0;for(;n<e.length;){let o=e.indexOf("{",n);if(o===-1){r.push(e.slice(n));break}r.push(e.slice(n,o));let i=e.indexOf("}",o);if(i===-1){r.push(e.slice(o));break}e[o+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(o+1,i)),n=i+2);let a=e.substring(o+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(KA(s[c],d))}else r.push(s[a]);n=i+1}return r.join("")},vV=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],Ql=(e,t,r)=>{if(typeof e=="string")return YA(e,r);if(e.fn)return XA.callFunction(e,r);if(e.ref)return vV(e,r);throw new wt(`'${t}': ${String(e)} is not a string, function or reference.`)},JA=({fn:e,argv:t},r)=>{let s=t.map(o=>["boolean","number"].includes(typeof o)?o:XA.evaluateExpression(o,"arg",r)),n=e.split(".");return n[0]in iS&&n[1]!=null?iS[n[0]][n[1]](...s):RV[e](...s)},XA={evaluateExpression:Ql,callFunction:JA},xV=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new wt(`'${e}' is already defined in Reference Record.`);let s=JA(t,r);return r.logger?.debug?.(`${Ba} evaluateCondition: ${Zs(t)} = ${Zs(s)}`),{result:s===""?!0:!!s,...e!=null&&{toAssign:{name:e,value:s}}}},cS=(e=[],t)=>{let r={};for(let s of e){let{result:n,toAssign:o}=xV(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!n)return{result:n};o&&(r[o.name]=o.value,t.logger?.debug?.(`${Ba} assign: ${o.name} := ${Zs(o.value)}`))}return{result:!0,referenceRecord:r}},AV=(e,t)=>Object.entries(e).reduce((r,[s,n])=>({...r,[s]:n.map(o=>{let i=Ql(o,"Header value entry",t);if(typeof i!="string")throw new wt(`Header '${s}' value '${i}' is not a string`);return i})}),{}),ZA=(e,t)=>Object.entries(e).reduce((r,[s,n])=>({...r,[s]:tT.getEndpointProperty(n,t)}),{}),eT=(e,t)=>{if(Array.isArray(e))return e.map(r=>eT(r,t));switch(typeof e){case"string":return YA(e,t);case"object":if(e===null)throw new wt(`Unexpected endpoint property: ${e}`);return tT.getEndpointProperties(e,t);case"boolean":return e;default:throw new wt(`Unexpected endpoint property type: ${typeof e}`)}},tT={getEndpointProperty:eT,getEndpointProperties:ZA},TV=(e,t)=>{let r=Ql(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(s){throw console.error(`Failed to construct URL with ${r}`,s),s}throw new wt(`Endpoint URL must be a string, got ${typeof r}`)},PV=(e,t)=>{let{conditions:r,endpoint:s}=e,{result:n,referenceRecord:o}=cS(r,t);if(!n)return;let i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:a,properties:c,headers:d}=s;return t.logger?.debug?.(`${Ba} Resolving endpoint from template: ${Zs(s)}`),{...d!=null&&{headers:AV(d,i)},...c!=null&&{properties:ZA(c,i)},url:TV(a,i)}},IV=(e,t)=>{let{conditions:r,error:s}=e,{result:n,referenceRecord:o}=cS(r,t);if(n)throw new wt(Ql(s,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},rT=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let s=PV(r,t);if(s)return s}else if(r.type==="error")IV(r,t);else if(r.type==="tree"){let s=sT.evaluateTreeRule(r,t);if(s)return s}else throw new wt(`Unknown endpoint rule: ${r}`);throw new wt("Rules evaluation failed")},NV=(e,t)=>{let{conditions:r,rules:s}=e,{result:n,referenceRecord:o}=cS(r,t);if(n)return sT.evaluateRules(s,{...t,referenceRecord:{...t.referenceRecord,...o}})},sT={evaluateRules:rT,evaluateTreeRule:NV},OV=(e,t)=>{let{endpointParams:r,logger:s}=t,{parameters:n,rules:o}=e;t.logger?.debug?.(`${Ba} Initial EndpointParams: ${Zs(r)}`);let i=Object.entries(n).filter(([,d])=>d.default!=null).map(([d,l])=>[d,l.default]);if(i.length>0)for(let[d,l]of i)r[d]=r[d]??l;let a=Object.entries(n).filter(([,d])=>d.required).map(([d])=>d);for(let d of a)if(r[d]==null)throw new wt(`Missing required parameter: '${d}'`);let c=rT(o,{endpointParams:r,logger:s,referenceRecord:{}});return t.logger?.debug?.(`${Ba} Resolved endpoint: ${Zs(c)}`),c};to.EndpointCache=oS;to.EndpointError=wt;to.customEndpointFunctions=iS;to.isIpAddress=QA;to.isValidHostLabel=aS;to.resolveEndpoint=OV});var oT=w(nT=>{"use strict";function DV(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[s,n=null]=r.split("=");s=decodeURIComponent(s),n&&(n=decodeURIComponent(n)),s in t?Array.isArray(t[s])?t[s].push(n):t[s]=[t[s],n]:t[s]=n}return t}nT.parseQueryString=DV});var or=w(aT=>{"use strict";var kV=oT(),iT=e=>{if(typeof e=="string")return iT(new URL(e));let{hostname:t,pathname:r,port:s,protocol:n,search:o}=e,i;return o&&(i=kV.parseQueryString(o)),{hostname:t,port:s?parseInt(s):void 0,protocol:n,path:r,query:i}};aT.parseUrl=iT});var qr=w(Lr=>{"use strict";var jo=Mr(),MV=or(),dT=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!dT(r))return!1;return!0}return!(!jo.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||jo.isIpAddress(e))},cT=":",LV="/",qV=e=>{let t=e.split(cT);if(t.length<6)return null;let[r,s,n,o,i,...a]=t;if(r!=="arn"||s===""||n===""||a.join(cT)==="")return null;let c=a.map(d=>d.split(LV)).flat();return{partition:s,service:n,region:o,accountId:i,resourceId:c}},FV=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],$V="1.1",lT={partitions:FV,version:$V},uT=lT,fT="",pT=e=>{let{partitions:t}=uT;for(let s of t){let{regions:n,outputs:o}=s;for(let[i,a]of Object.entries(n))if(i===e)return{...o,...a}}for(let s of t){let{regionRegex:n,outputs:o}=s;if(new RegExp(n).test(e))return{...o}}let r=t.find(s=>s.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},mT=(e,t="")=>{uT=e,fT=t},UV=()=>{mT(lT,"")},BV=()=>fT,hT={isVirtualHostableS3Bucket:dT,parseArn:qV,partition:pT};jo.customEndpointFunctions.aws=hT;var HV=e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>gT(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},gT=e=>MV.parseUrl(e.url);Object.defineProperty(Lr,"EndpointError",{enumerable:!0,get:function(){return jo.EndpointError}});Object.defineProperty(Lr,"isIpAddress",{enumerable:!0,get:function(){return jo.isIpAddress}});Object.defineProperty(Lr,"resolveEndpoint",{enumerable:!0,get:function(){return jo.resolveEndpoint}});Lr.awsEndpointFunctions=hT;Lr.getUserAgentPrefix=BV;Lr.partition=pT;Lr.resolveDefaultAwsRegionalEndpointsConfig=HV;Lr.setPartitionInfo=mT;Lr.toEndpointV1=gT;Lr.useDefaultPartitionInfo=UV});var Kl,zo,yT=S(()=>{Kl={warningEmitted:!1},zo=e=>{e&&!Kl.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(Kl.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function en(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var ST=S(()=>{});function ET(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var _T=S(()=>{});function wT(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var bT=S(()=>{});var tn={};tt(tn,{emitWarningIfUnsupportedVersion:()=>zo,setCredentialFeature:()=>en,setFeature:()=>ET,setTokenFeature:()=>wT,state:()=>Kl});var Fr=S(()=>{yT();ST();_T();bT()});var CT,dS,RT=S(()=>{CT=y(ce()),dS=e=>CT.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var Vo,lS=S(()=>{Vo=e=>new Date(Date.now()+e)});var vT,xT=S(()=>{lS();vT=(e,t)=>Math.abs(Vo(t).getTime()-e)>=3e5});var uS,AT=S(()=>{xT();uS=(e,t)=>{let r=Date.parse(e);return vT(r,t)?r-Date.now():t}});var fS=S(()=>{RT();lS();AT()});var TT,Ha,Go,qt,pS,mS=S(()=>{TT=y(ce());fS();Ha=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Go=async e=>{let t=Ha("context",e.context),r=Ha("config",e.config),s=t.endpointV2?.properties?.authSchemes?.[0],o=await Ha("signer",r.signer)(s),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}},qt=class{async sign(t,r,s){if(!TT.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let n=await Go(s),{config:o,signer:i}=n,{signingRegion:a,signingName:c}=n,d=s.context;if(d?.authSchemes?.length??!1){let[u,h]=d.authSchemes;u?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await i.sign(t,{signingDate:Vo(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let s=r.ServerTime??dS(r.$response);if(s){let n=Ha("config",t.config),o=n.systemClockOffset;n.systemClockOffset=uS(s,n.systemClockOffset),n.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let s=dS(t);if(s){let n=Ha("config",r.config);n.systemClockOffset=uS(s,n.systemClockOffset)}}},pS=qt});var PT,ja,IT=S(()=>{PT=y(ce());fS();mS();ja=class extends qt{async sign(t,r,s){if(!PT.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:n,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}=await Go(s),l=(await n.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(t,{signingDate:Vo(n.systemClockOffset),signingRegion:l,signingService:c})}}});var hS,NT=S(()=>{hS=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var Yl,gS=S(()=>{Yl=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var OT,DT,Wo,kT=S(()=>{NT();gS();OT="AWS_AUTH_SCHEME_PREFERENCE",DT="auth_scheme_preference",Wo={environmentVariableSelector:(e,t)=>{if(t?.signingName&&Yl(t.signingName)in e)return["httpBearerAuth"];if(OT in e)return hS(e[OT])},configFileSelector:e=>{if(DT in e)return hS(e[DT])},default:[]}});var xe=w(ro=>{"use strict";var Qo=class e extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let s,n=!0;typeof r=="boolean"?(s=void 0,n=r):r!=null&&typeof r=="object"&&(s=r.logger,n=r.tryNextLink??!0),super(t),this.tryNextLink=n,Object.setPrototypeOf(this,e.prototype),s?.debug?.(`@smithy/property-provider ${n?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},yS=class e extends Qo{name="CredentialsProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},SS=class e extends Qo{name="TokenProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},jV=(...e)=>async()=>{if(e.length===0)throw new Qo("No providers in chain");let t;for(let r of e)try{return await r()}catch(s){if(t=s,s?.tryNextLink)continue;throw s}throw t},zV=e=>()=>Promise.resolve(e),VV=(e,t,r)=>{let s,n,o,i=!1,a=async()=>{n||(n=e());try{s=await n,o=!0,i=!1}finally{n=void 0}return s};return t===void 0?async c=>((!o||c?.forceRefresh)&&(s=await a()),s):async c=>((!o||c?.forceRefresh)&&(s=await a()),i?s:r&&!r(s)?(i=!0,s):(t(s)&&await a(),s))};ro.CredentialsProviderError=yS;ro.ProviderError=Qo;ro.TokenProviderError=SS;ro.chain=jV;ro.fromStatic=zV;ro.memoize=VV});var ES,MT,LT,qT=S(()=>{ve();ES=y(xe()),MT=e=>(e.sigv4aSigningRegionSet=It(e.sigv4aSigningRegionSet),e),LT={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new ES.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new ES.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var NS=w(re=>{"use strict";var rn=Cl(),so=Te(),GV=Tg(),BT=ce(),FT=it(),Jl=Bg(),HT="X-Amz-Algorithm",jT="X-Amz-Credential",vS="X-Amz-Date",zT="X-Amz-SignedHeaders",VT="X-Amz-Expires",xS="X-Amz-Signature",AS="X-Amz-Security-Token",WV="X-Amz-Region-Set",TS="authorization",PS=vS.toLowerCase(),GT="date",WT=[TS,PS,GT],QT=xS.toLowerCase(),ru="x-amz-content-sha256",KT=AS.toLowerCase(),QV="host",YT={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},JT=/^proxy-/,XT=/^sec-/,KV=[/^proxy-/i,/^sec-/i],Xl="AWS4-HMAC-SHA256",YV="AWS4-ECDSA-P256-SHA256",ZT="AWS4-HMAC-SHA256-PAYLOAD",eP="UNSIGNED-PAYLOAD",tP=50,IS="aws4_request",rP=3600*24*7,Ko={},Zl=[],eu=(e,t,r)=>`${e}/${t}/${r}/${IS}`,sP=async(e,t,r,s,n)=>{let o=await $T(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${s}:${n}:${rn.toHex(o)}:${t.sessionToken}`;if(i in Ko)return Ko[i];for(Zl.push(i);Zl.length>tP;)delete Ko[Zl.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,s,n,IS])a=await $T(e,a,c);return Ko[i]=a},JV=()=>{Zl.length=0,Object.keys(Ko).forEach(e=>{delete Ko[e]})},$T=(e,t,r)=>{let s=new e(t);return s.update(so.toUint8Array(r)),s.digest()},_S=({headers:e},t,r)=>{let s={};for(let n of Object.keys(e).sort()){if(e[n]==null)continue;let o=n.toLowerCase();(o in YT||t?.has(o)||JT.test(o)||XT.test(o))&&(!r||r&&!r.has(o))||(s[o]=e[n].trim().replace(/\s+/g," "))}return s},tu=async({headers:e,body:t},r)=>{for(let s of Object.keys(e))if(s.toLowerCase()===ru)return e[s];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||GV.isArrayBuffer(t)){let s=new r;return s.update(so.toUint8Array(t)),rn.toHex(await s.digest())}return eP},wS=class{format(t){let r=[];for(let o of Object.keys(t)){let i=so.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[o]))}let s=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),n=0;for(let o of r)s.set(o,n),n+=o.byteLength;return s}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let s=new DataView(new ArrayBuffer(5));return s.setUint8(0,4),s.setInt32(1,t.value,!1),new Uint8Array(s.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(t.value.bytes,1),n;case"binary":let o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(t.value,3),i;case"string":let a=so.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(bS.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!XV.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(rn.fromHex(t.value.replace(/\-/g,"")),1),u}}},XV=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,bS=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let s=7,n=Math.abs(Math.round(t));s>-1&&n>0;s--,n/=256)r[s]=n;return t<0&&UT(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&UT(t),parseInt(rn.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function UT(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var nP=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},oP=(e,t={})=>{let{headers:r,query:s={}}=BT.HttpRequest.clone(e);for(let n of Object.keys(r)){let o=n.toLowerCase();(o.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(o)||t.hoistableHeaders?.has(o))&&(s[n]=r[n],delete r[n])}return{...e,headers:r,query:s}},CS=e=>{e=BT.HttpRequest.clone(e);for(let t of Object.keys(e.headers))WT.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},iP=({query:e={}})=>{let t=[],r={};for(let s of Object.keys(e)){if(s.toLowerCase()===QT)continue;let n=Jl.escapeUri(s);t.push(n);let o=e[s];typeof o=="string"?r[n]=`${n}=${Jl.escapeUri(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((i,a)=>i.concat([`${n}=${Jl.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(s=>r[s]).filter(s=>s).join("&")},ZV=e=>e3(e).toISOString().replace(/\.\d{3}Z$/,"Z"),e3=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,su=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:s,service:n,sha256:o,uriEscapePath:i=!0}){this.service=n,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=FT.normalizeProvider(s),this.credentialProvider=FT.normalizeProvider(r)}createCanonicalRequest(t,r,s){let n=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${iP(t)}
${n.map(o=>`${o}:${r[o]}`).join(`
`)}

${n.join(";")}
${s}`}async createStringToSign(t,r,s,n){let o=new this.sha256;o.update(so.toUint8Array(s));let i=await o.digest();return`${n}
${t}
${r}
${rn.toHex(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let o of t.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let s=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return Jl.escapeUri(s).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=ZV(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},RS=class extends su{headerFormatter=new wS;constructor({applyChecksum:t,credentials:r,region:s,service:n,sha256:o,uriEscapePath:i=!0}){super({applyChecksum:t,credentials:r,region:s,service:n,sha256:o,uriEscapePath:i})}async presign(t,r={}){let{signingDate:s=new Date,expiresIn:n=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:d,signingService:l}=r,u=await this.credentialProvider();this.validateResolvedCredentials(u);let h=d??await this.regionProvider(),{longDate:m,shortDate:g}=this.formatDate(s);if(n>rP)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let C=eu(g,h,l??this.service),v=oP(CS(t),{unhoistableHeaders:i,hoistableHeaders:c});u.sessionToken&&(v.query[AS]=u.sessionToken),v.query[HT]=Xl,v.query[jT]=`${u.accessKeyId}/${C}`,v.query[vS]=m,v.query[VT]=n.toString(10);let A=_S(v,o,a);return v.query[zT]=this.getCanonicalHeaderList(A),v.query[xS]=await this.getSignature(m,C,this.getSigningKey(u,h,g,l),this.createCanonicalRequest(v,A,await tu(t,this.sha256))),v}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:s=new Date,priorSignature:n,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:c,longDate:d}=this.formatDate(s),l=eu(c,a,i??this.service),u=await tu({headers:{},body:r},this.sha256),h=new this.sha256;h.update(t);let m=rn.toHex(await h.digest()),g=[ZT,d,l,n,m,u].join(`
`);return this.signString(g,{signingDate:s,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:s,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:s,signingService:n,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:s,signingService:n}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=s??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(o,i,a,n));return c.update(so.toUint8Array(t)),rn.toHex(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:s,unsignableHeaders:n,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=o??await this.regionProvider(),d=CS(t),{longDate:l,shortDate:u}=this.formatDate(r),h=eu(u,c,i??this.service);d.headers[PS]=l,a.sessionToken&&(d.headers[KT]=a.sessionToken);let m=await tu(d,this.sha256);!nP(ru,d.headers)&&this.applyChecksum&&(d.headers[ru]=m);let g=_S(d,n,s),C=await this.getSignature(l,h,this.getSigningKey(a,c,u,i),this.createCanonicalRequest(d,g,m));return d.headers[TS]=`${Xl} Credential=${a.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(g)}, Signature=${C}`,d}async getSignature(t,r,s,n){let o=await this.createStringToSign(t,r,n,Xl),i=new this.sha256(await s);return i.update(so.toUint8Array(o)),rn.toHex(await i.digest())}getSigningKey(t,r,s,n){return sP(this.sha256,t,s,r,n||this.service)}},t3={SignatureV4a:null};re.ALGORITHM_IDENTIFIER=Xl;re.ALGORITHM_IDENTIFIER_V4A=YV;re.ALGORITHM_QUERY_PARAM=HT;re.ALWAYS_UNSIGNABLE_HEADERS=YT;re.AMZ_DATE_HEADER=PS;re.AMZ_DATE_QUERY_PARAM=vS;re.AUTH_HEADER=TS;re.CREDENTIAL_QUERY_PARAM=jT;re.DATE_HEADER=GT;re.EVENT_ALGORITHM_IDENTIFIER=ZT;re.EXPIRES_QUERY_PARAM=VT;re.GENERATED_HEADERS=WT;re.HOST_HEADER=QV;re.KEY_TYPE_IDENTIFIER=IS;re.MAX_CACHE_SIZE=tP;re.MAX_PRESIGNED_TTL=rP;re.PROXY_HEADER_PATTERN=JT;re.REGION_SET_PARAM=WV;re.SEC_HEADER_PATTERN=XT;re.SHA256_HEADER=ru;re.SIGNATURE_HEADER=QT;re.SIGNATURE_QUERY_PARAM=xS;re.SIGNED_HEADERS_QUERY_PARAM=zT;re.SignatureV4=RS;re.SignatureV4Base=su;re.TOKEN_HEADER=KT;re.TOKEN_QUERY_PARAM=AS;re.UNSIGNABLE_PATTERNS=KV;re.UNSIGNED_PAYLOAD=eP;re.clearCredentialCache=JV;re.createScope=eu;re.getCanonicalHeaders=_S;re.getCanonicalQuery=iP;re.getPayloadHash=tu;re.getSigningKey=sP;re.hasHeader=nP;re.moveHeadersToQuery=oP;re.prepareRequest=CS;re.signatureV4aContainer=t3});function r3(e,{credentials:t,credentialDefaultProvider:r}){let s;return t?t?.memoized?s=t:s=Ua(t,$a,Ho):r?s=It(r(Object.assign({},e,{parentClientConfig:e}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function s3(e,t){if(t.configBound)return t;let r=async s=>t({...s,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var OS,no,aP,cP=S(()=>{Fr();ve();OS=y(NS()),no=e=>{let t=e.credentials,r=!!e.credentials,s;Object.defineProperty(e,"credentials",{set(d){d&&d!==t&&d!==s&&(r=!0),t=d;let l=r3(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),u=s3(e,l);r&&!u.attributed?(s=async h=>u(h).then(m=>en(m,"CREDENTIALS_CODE","e")),s.memoized=u.memoized,s.configBound=u.configBound,s.attributed=!0):s=u},get(){return s},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=It(e.signer):e.regionInfoProvider?a=()=>It(e.region)().then(async d=>[await e.regionInfoProvider(d,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},d]).then(([d,l])=>{let{signingRegion:u,signingService:h}=d;e.signingRegion=e.signingRegion||u||l,e.signingName=e.signingName||h||e.serviceId;let m={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},g=e.signerConstructor||OS.SignatureV4;return new g(m)}):a=async d=>{d=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await It(e.region)(),properties:{}},d);let l=d.signingRegion,u=d.signingName;e.signingRegion=e.signingRegion||l,e.signingName=e.signingName||u||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},m=e.signerConstructor||OS.SignatureV4;return new m(h)},Object.assign(e,{systemClockOffset:o,signingEscapePath:n,signer:a})},aP=no});var dP=S(()=>{mS();IT();kT();qT();cP()});var lP={};tt(lP,{AWSSDKSigV4Signer:()=>pS,AwsSdkSigV4ASigner:()=>ja,AwsSdkSigV4Signer:()=>qt,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Wo,NODE_SIGV4A_CONFIG_OPTIONS:()=>LT,getBearerTokenEnvKey:()=>Yl,resolveAWSSDKSigV4Config:()=>aP,resolveAwsSdkSigV4AConfig:()=>MT,resolveAwsSdkSigV4Config:()=>no,validateSigningProperties:()=>Go});var DS=S(()=>{dP();gS()});function sn(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function nu(e){return e[kS]=!0,e}var kS,ou=S(()=>{kS=Symbol("@smithy/core/cbor::tagSymbol")});function pP(e){be=e,Es=new DataView(be.buffer,be.byteOffset,be.byteLength)}function Wr(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(be[e]&224)>>5,s=be[e]&31;switch(r){case 0:case 1:case 6:let n,o;if(s<24)n=s,o=1;else switch(s){case 24:case 25:case 26:case 27:let i=hP[s],a=i+1;if(o=a,t-e<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let c=e+1;i===1?n=be[c]:i===2?n=Es.getUint16(c):i===4?n=Es.getUint32(c):n=Es.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${s}.`)}if(r===0)return ie=o,MS(n);if(r===1){let i;return typeof n=="bigint"?i=BigInt(-1)-n:i=-1-n,ie=o,MS(i)}else if(s===2||s===3){let i=Wa(e+o,t),a=BigInt(0),c=e+o+ie;for(let d=c;d<c+i;++d)a=a<<BigInt(8)|BigInt(be[d]);return ie=o+ie+i,s===3?-a-BigInt(1):a}else if(s===4){let i=Wr(e+o,t),[a,c]=i,d=c<0?-1:1,l="0".repeat(Math.abs(a)+1)+String(BigInt(d)*BigInt(c)),u,h=c<0?"-":"";return u=a===0?l:l.slice(0,l.length+a)+"."+l.slice(a),u=u.replace(/^0+/g,""),u===""&&(u="0"),u[0]==="."&&(u="0"+u),u=h+u,ie=o+ie,Ny(u)}else{let i=Wr(e+o,t);return ie=o+ie,nu({tag:MS(n),value:i})}case 3:case 5:case 4:case 2:if(s===31)switch(r){case 3:return l3(e,t);case 5:return h3(e,t);case 4:return p3(e,t);case 2:return u3(e,t)}else switch(r){case 3:return d3(e,t);case 5:return m3(e,t);case 4:return f3(e,t);case 2:return BS(e,t)}default:return g3(e,t)}}function mP(e,t,r){return i3&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):uP?uP.decode(e.subarray(t,r)):(0,fP.toUtf8)(e.subarray(t,r))}function a3(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function c3(e,t){let r=e>>7,s=(e&124)>>2,n=(e&3)<<8|t,o=r===0?1:-1,i,a;if(s===0){if(n===0)return 0;i=Math.pow(2,-14),a=0}else{if(s===31)return n===0?o*(1/0):NaN;i=Math.pow(2,s-15),a=1}return a+=n/1024,o*(i*a)}function Wa(e,t){let r=be[e]&31;if(r<24)return ie=1,r;if(r===24||r===25||r===26||r===27){let s=hP[r];if(ie=s+1,t-e<ie)throw new Error(`countLength ${s} greater than remaining buf len.`);let n=e+1;return s===1?be[n]:s===2?Es.getUint16(n):s===4?Es.getUint32(n):a3(Es.getBigUint64(n))}throw new Error(`unexpected minor value ${r}.`)}function d3(e,t){let r=Wa(e,t),s=ie;if(e+=s,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let n=mP(be,e,e+r);return ie=s+r,n}function l3(e,t){e+=1;let r=[];for(let s=e;e<t;){if(be[e]===255){let c=sn(r.length);return c.set(r,0),ie=e-s+2,mP(c,0,c.length)}let n=(be[e]&224)>>5,o=be[e]&31;if(n!==3)throw new Error(`unexpected major type ${n} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=BS(e,t);e+=ie;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function BS(e,t){let r=Wa(e,t),s=ie;if(e+=s,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let n=be.subarray(e,e+r);return ie=s+r,n}function u3(e,t){e+=1;let r=[];for(let s=e;e<t;){if(be[e]===255){let c=sn(r.length);return c.set(r,0),ie=e-s+2,c}let n=(be[e]&224)>>5,o=be[e]&31;if(n!==2)throw new Error(`unexpected major type ${n} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=BS(e,t);e+=ie;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function f3(e,t){let r=Wa(e,t),s=ie;e+=s;let n=e,o=Array(r);for(let i=0;i<r;++i){let a=Wr(e,t),c=ie;o[i]=a,e+=c}return ie=s+(e-n),o}function p3(e,t){e+=1;let r=[];for(let s=e;e<t;){if(be[e]===255)return ie=e-s+2,r;let n=Wr(e,t);e+=ie,r.push(n)}throw new Error("expected break marker.")}function m3(e,t){let r=Wa(e,t),s=ie;e+=s;let n=e,o={};for(let i=0;i<r;++i){if(e>=t)throw new Error("unexpected end of map payload.");let a=(be[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let c=Wr(e,t);e+=ie;let d=Wr(e,t);e+=ie,o[c]=d}return ie=s+(e-n),o}function h3(e,t){e+=1;let r=e,s={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(be[e]===255)return ie=e-r+2,s;let n=(be[e]&224)>>5;if(n!==3)throw new Error(`unexpected major type ${n} for map key.`);let o=Wr(e,t);e+=ie;let i=Wr(e,t);e+=ie,s[o]=i}throw new Error("expected break marker.")}function g3(e,t){let r=be[e]&31;switch(r){case 21:case 20:return ie=1,r===21;case 22:return ie=1,null;case 23:return ie=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return ie=3,c3(be[e+1],be[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return ie=5,Es.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return ie=9,Es.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function MS(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var fP,o3,i3,be,Es,uP,ie,hP,gP=S(()=>{Ze();fP=y(Te());ou();o3=typeof TextDecoder<"u",i3=typeof Buffer<"u",be=sn(0),Es=new DataView(be.buffer,be.byteOffset,be.byteLength),uP=o3?new TextDecoder:null,ie=0;hP={24:1,25:2,26:4,27:8}});function jS(e){J.byteLength-V<e&&(V<16e6?au(Math.max(J.byteLength*4,J.byteLength+e)):au(J.byteLength+e+16e6))}function zS(){let e=sn(V);return e.set(J.subarray(0,V),0),V=0,e}function au(e){let t=J;J=sn(e),t&&(t.copy?t.copy(J,0,0,t.byteLength):J.set(t,0)),bs=new DataView(J.buffer,J.byteOffset,J.byteLength)}function ws(e,t){t<24?J[V++]=e<<5|t:t<256?(J[V++]=e<<5|24,J[V++]=t):t<65536?(J[V++]=e<<5|25,bs.setUint16(V,t),V+=2):t<2**32?(J[V++]=e<<5|26,bs.setUint32(V,t),V+=4):(J[V++]=e<<5|27,bs.setBigUint64(V,typeof t=="bigint"?t:BigInt(t)),V+=8)}function EP(e){let t=[e];for(;t.length;){let r=t.pop();if(jS(typeof r=="string"?r.length*4:64),typeof r=="string"){if(yP)ws(3,Buffer.byteLength(r)),V+=J.write(r,V);else{let s=(0,SP.fromUtf8)(r);ws(3,s.byteLength),J.set(s,V),V+=s.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let s=r>=0,n=s?0:1,o=s?r:-r-1;o<24?J[V++]=n<<5|o:o<256?(J[V++]=n<<5|24,J[V++]=o):o<65536?(J[V++]=n<<5|25,J[V++]=o>>8,J[V++]=o):o<4294967296?(J[V++]=n<<5|26,bs.setUint32(V,o),V+=4):(J[V++]=n<<5|27,bs.setBigUint64(V,BigInt(o)),V+=8);continue}J[V++]=251,bs.setFloat64(V,r),V+=8;continue}else if(typeof r=="bigint"){let s=r>=0,n=s?0:1,o=s?r:-r-BigInt(1),i=Number(o);if(i<24)J[V++]=n<<5|i;else if(i<256)J[V++]=n<<5|24,J[V++]=i;else if(i<65536)J[V++]=n<<5|25,J[V++]=i>>8,J[V++]=i&255;else if(i<4294967296)J[V++]=n<<5|26,bs.setUint32(V,i),V+=4;else if(o<BigInt("18446744073709551616"))J[V++]=n<<5|27,bs.setBigUint64(V,o),V+=8;else{let a=o.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),d=o,l=0;for(;c.byteLength-++l>=0;)c[c.byteLength-l]=Number(d&BigInt(255)),d>>=BigInt(8);jS(c.byteLength*2),J[V++]=s?194:195,yP?ws(2,Buffer.byteLength(c)):ws(2,c.byteLength),J.set(c,V),V+=c.byteLength}continue}else if(r===null){J[V++]=246;continue}else if(typeof r=="boolean"){J[V++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let s=r.length-1;s>=0;--s)t.push(r[s]);ws(4,r.length);continue}else if(typeof r.byteLength=="number"){jS(r.length*2),ws(2,r.length),J.set(r,V),V+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof oe){let n=r.string.indexOf("."),o=n===-1?0:n-r.string.length+1,i=BigInt(r.string.replace(".",""));J[V++]=196,t.push(i),t.push(o),ws(4,2);continue}if(r[kS])if("tag"in r&&"value"in r){t.push(r.value),ws(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let s=Object.keys(r);for(let n=s.length-1;n>=0;--n){let o=s[n];t.push(r[o]),t.push(o)}ws(5,s.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var SP,yP,y3,J,bs,V,_P=S(()=>{Ze();SP=y(Te());ou();yP=typeof Buffer<"u",y3=2048,J=sn(y3),bs=new DataView(J.buffer,J.byteOffset,J.byteLength),V=0});var VS,wP=S(()=>{gP();_P();VS={deserialize(e){return pP(e),Wr(0,e.length)},serialize(e){try{return EP(e),zS()}catch(t){throw zS(),t}},resizeEncodingBuffer(e){au(e)}}});var cu,Jo,du=S(()=>{ou();cu=e=>nu({tag:1,value:e.getTime()/1e3}),Jo=(e,t)=>{let r=n=>{let o=n;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o};if(t.__type!==void 0)return r(t.__type);let s=Object.keys(t).find(n=>n.toLowerCase()==="code");if(s&&t[s]!==void 0)return r(t[s])}});var QS,lu,GS,WS,KS=S(()=>{ke();le();Ze();QS=y(Ae());wP();du();lu=class extends Pt{createSerializer(){let t=new GS;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new WS;return t.setSerdeContext(this.serdeContext),t}},GS=class extends Pt{value;write(t,r){this.value=this.serialize(t,r)}serialize(t,r){let s=D.of(t);if(r==null)return s.isIdempotencyToken()?(0,_t.v4)():r;if(s.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??QS.fromBase64)(r):r;if(s.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?cu(new Date(Number(r)/1e3|0)):cu(r);if(typeof r=="function"||typeof r=="object"){let n=r;if(s.isListSchema()&&Array.isArray(n)){let i=!!s.getMergedTraits().sparse,a=[],c=0;for(let d of n){let l=this.serialize(s.getValueSchema(),d);(l!=null||i)&&(a[c++]=l)}return a}if(n instanceof Date)return cu(n);let o={};if(s.isMapSchema()){let i=!!s.getMergedTraits().sparse;for(let a of Object.keys(n)){let c=this.serialize(s.getValueSchema(),n[a]);(c!=null||i)&&(o[a]=c)}}else if(s.isStructSchema())for(let[i,a]of s.structIterator()){let c=this.serialize(a,n[i]);c!=null&&(o[i]=c)}else if(s.isDocumentSchema())for(let i of Object.keys(n))o[i]=this.serialize(s.getValueSchema(),n[i]);return o}return r}flush(){let t=VS.serialize(this.value);return this.value=void 0,t}},WS=class extends Pt{read(t,r){let s=VS.deserialize(r);return this.readValue(t,s)}readValue(t,r){let s=D.of(t);if(s.isTimestampSchema()&&typeof r=="number")return Ma(r);if(s.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??QS.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||s.isDocumentSchema())return r;if(s.isListSchema()){let o=[],i=s.getValueSchema(),a=!!s.getMergedTraits().sparse;for(let c of r){let d=this.readValue(i,c);(d!=null||a)&&o.push(d)}return o}let n={};if(s.isMapSchema()){let o=!!s.getMergedTraits().sparse,i=s.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(i,r[a]);(c!=null||o)&&(n[a]=c)}}else if(s.isStructSchema())for(let[o,i]of s.structIterator())n[o]=this.readValue(i,r[o]);return n}else return r}}});var bP,Xo,CP=S(()=>{ke();le();bP=y(it());KS();du();Xo=class extends Yt{codec=new lu;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);if(Object.assign(n.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Tt(t.input)==="unit")delete n.body,delete n.headers["content-type"];else{n.body||(this.serializer.write(15,{}),n.body=this.serializer.flush());try{n.headers["content-length"]=String(n.body.byteLength)}catch{}}let{service:o,operation:i}=(0,bP.getSmithyContext)(s),a=`/service/${o}/operation/${i}`;return n.path.endsWith("/")?n.path+=a.slice(1):n.path+=a,n}async deserializeResponse(t,r,s){return super.deserializeResponse(t,r,s)}async handleError(t,r,s,n,o){let i=Jo(s,n)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let c={$metadata:o,$response:s,$fault:s.statusCode<=500?"client":"server"},d=me.for(a),l;try{l=d.getSchema(i)}catch{n.Message&&(n.message=n.Message);let A=me.for("smithy.ts.sdk.synthetic."+a),N=A.getBaseException();if(N){let $=A.getErrorCtor(N);throw Object.assign(new $({name:i}),c,n)}throw Object.assign(new Error(i),c,n)}let u=D.of(l),h=d.getErrorCtor(l),m=n.message??n.Message??"Unknown",g=new h(m),C={};for(let[v,A]of u.structIterator())C[v]=this.deserializer.readValue(A,n[v]);throw Object.assign(g,c,{$fault:u.getMergedTraits().error,message:m},C)}getDefaultContentType(){return"application/cbor"}}});var YS=S(()=>{du();CP();KS()});var ir,Zo=S(()=>{le();ir=class{resolveRestContentType(t,r){let s=r.getMemberSchemas(),n=Object.values(s).find(o=>!!o.getMergedTraits().httpPayload);if(n){let o=n.getMergedTraits().mediaType;return o||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(s).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:d,httpLabel:l,httpPrefixHeaders:u}=i.getMergedTraits();return!a&&!c&&!d&&!l&&u===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,s,n,o,i){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let d={$metadata:o,$response:s,$fault:s.statusCode<500?"client":"server"},l=me.for(a);try{return{errorSchema:i?.(l,c)??l.getSchema(t),errorMetadata:d}}catch{n.message=n.message??n.Message??"UnknownError";let h=me.for("smithy.ts.sdk.synthetic."+a),m=h.getBaseException();if(m){let g=h.getErrorCtor(m)??Error;throw Object.assign(new g({name:c}),d,n)}throw Object.assign(new Error(c),d,n)}}setQueryCompatError(t,r){let s=r.headers?.["x-amzn-query-error"];if(t!==void 0&&s!=null){let[n,o]=s.split(";"),i=Object.entries(t),a={Code:n,Type:o};Object.assign(t,a);for(let[c,d]of i)a[c]=d;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var JS,RP=S(()=>{YS();le();Zo();JS=class extends Xo{awsQueryCompatible;mixin=new ir;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),n}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=Jo(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),l=n.message??n.Message??"Unknown",u=me.for(a[1]).getErrorCtor(a)??Error,h=new u(l),m={};for(let[g,C]of d.structIterator())m[g]=this.deserializer.readValue(C,n[g]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:l},m)}}});var S3,E3,_3,vP=S(()=>{S3=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},E3=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},_3=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var bt,cn=S(()=>{bt=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function xP(e,t,r){if(r?.source){let s=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||s!==String(t)))return s.includes(".")?new oe(s,"bigDecimal"):BigInt(s)}return t}var AP=S(()=>{Ze()});var TP,PP,uu,XS=S(()=>{TP=y(F()),PP=y(Te()),uu=(e,t)=>(0,TP.collectBody)(e,t).then(r=>(t?.utf8Encoder??PP.toUtf8)(r))});var ei,ZS,oo,Qa=S(()=>{XS();ei=(e,t)=>uu(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(s){throw s?.name==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:r}),s}return{}}),ZS=async(e,t)=>{let r=await ei(e,t);return r.message=r.message??r.Message,r},oo=(e,t)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),s=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return s(e.headers[n]);if(t&&typeof t=="object"){let o=r(t,"code");if(o&&t[o]!==void 0)return s(t[o]);if(t.__type!==void 0)return s(t.__type)}}});var IP,Ka,eE=S(()=>{ke();le();Ze();IP=y(Ae());cn();AP();Qa();Ka=class extends bt{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,xP):await ei(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let s=r!==null&&typeof r=="object",n=D.of(t);if(n.isListSchema()&&Array.isArray(r)){let i=n.getValueSchema(),a=[],c=!!n.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._read(i,d));return a}else if(n.isMapSchema()&&s){let i=n.getValueSchema(),a={},c=!!n.getMergedTraits().sparse;for(let[d,l]of Object.entries(r))(c||l!=null)&&(a[d]=this._read(i,l));return a}else if(n.isStructSchema()&&s){let i={};for(let[a,c]of n.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,l=this._read(c,r[d]);l!=null&&(i[a]=l)}return i}if(n.isBlobSchema()&&typeof r=="string")return(0,IP.fromBase64)(r);let o=n.getMergedTraits().mediaType;if(n.isStringSchema()&&typeof r=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return rt.from(r);if(n.isTimestampSchema()&&r!=null)switch(Ke(n,this.settings)){case 5:return Oa(r);case 6:return Da(r);case 7:return ka(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(n.isBigDecimalSchema()&&r!=null){if(r instanceof oe)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new oe(i.string,i.type):new oe(String(r),"bigDecimal")}if(n.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(n.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof oe?i[a]=c:i[a]=this._read(n,c);return i}else return structuredClone(r);return r}}});var NP,fu,OP=S(()=>{Ze();NP="\u039D",fu=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof oe){let s=`${NP+"nv"+this.counter++}_`+r.string;return this.values.set(`"${s}"`,r.string),s}if(typeof r=="bigint"){let s=r.toString(),n=`${NP+"b"+this.counter++}_`+s;return this.values.set(`"${n}"`,s),n}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,s]of this.values)t=t.replace(r,s);return t}}});var DP,Ya,tE=S(()=>{ke();le();Ze();DP=y(Ae());cn();OP();Ya=class extends bt{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=D.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=D.of(t).getName(!0))}flush(){let{rootSchema:t}=this;if(this.rootSchema=void 0,t?.isStructSchema()||t?.isDocumentSchema()){let r=new fu;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(t,r,s){let n=r!==null&&typeof r=="object",o=D.of(t);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._write(i,d));return a}else if(o.isMapSchema()&&n){let i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(let[d,l]of Object.entries(r))(c||l!=null)&&(a[d]=this._write(i,l));return a}else if(o.isStructSchema()&&n){let i={};for(let[a,c]of o.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,l=this._write(c,r[a],o);l!==void 0&&(i[d]=l)}return i}if(!(r===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||o.isDocumentSchema()&&r instanceof Uint8Array)return o===this.rootSchema?r:this.serdeContext?.base64Encoder?this.serdeContext?.base64Encoder(r):(0,DP.toBase64)(r);if((o.isTimestampSchema()||o.isDocumentSchema())&&r instanceof Date)switch(Ke(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return Xn(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(o.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,_t.v4)();let i=o.getMergedTraits().mediaType;if(r!=null&&i&&(i==="application/json"||i.endsWith("+json")))return rt.from(r)}if(o.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof oe?i[a]=c:i[a]=this._write(o,c);return i}else return structuredClone(r);return r}}}});var io,pu=S(()=>{cn();eE();tE();io=class extends bt{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new Ya(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Ka(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var ao,mu=S(()=>{ke();le();Zo();pu();Qa();ao=class extends Yt{serializer;deserializer;serviceTarget;codec;mixin=new ir;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=new io({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),(Tt(t.input)==="unit"||!n.body)&&(n.body="{}"),n}getPayloadCodec(){return this.codec}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=oo(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),l=n.message??n.Message??"Unknown",u=me.for(a[1]).getErrorCtor(a)??Error,h=new u(l),m={};for(let[g,C]of d.structIterator()){let v=C.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(C,n[v])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:l},m)}}});var rE,kP=S(()=>{mu();rE=class extends ao{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var sE,MP=S(()=>{mu();sE=class extends ao{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var nE,LP=S(()=>{ke();le();Zo();pu();Qa();nE=class extends Nr{serializer;deserializer;codec;mixin=new ir;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new io(r),this.serializer=new Dr(this.codec.createSerializer(),r),this.deserializer=new Or(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=D.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]&&!n.body&&(n.body="{}"),n}async handleError(t,r,s,n,o){let i=oo(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),l=n.message??n.Message??"Unknown",u=me.for(a[1]).getErrorCtor(a)??Error,h=new u(l);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,C]of d.structIterator()){let v=C.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(C,n[v])}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:l},m)}getDefaultContentType(){return"application/json"}}});var qP,w3,FP=S(()=>{qP=y(F()),w3=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,qP.expectUnion)(e)}});var UP=w((Tme,$P)=>{(()=>{"use strict";var e={d:(f,p)=>{for(var E in p)e.o(p,E)&&!e.o(f,E)&&Object.defineProperty(f,E,{enumerable:!0,get:p[E]})},o:(f,p)=>Object.prototype.hasOwnProperty.call(f,p),r:f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>zs,XMLParser:()=>NH,XMLValidator:()=>$H});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function n(f,p){let E=[],R=p.exec(f);for(;R;){let _=[];_.startIndex=p.lastIndex-R[0].length;let b=R.length;for(let P=0;P<b;P++)_.push(R[P]);E.push(_),R=p.exec(f)}return E}let o=function(f){return s.exec(f)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(f,p){p=Object.assign({},i,p);let E=[],R=!1,_=!1;f[0]==="\uFEFF"&&(f=f.substr(1));for(let b=0;b<f.length;b++)if(f[b]==="<"&&f[b+1]==="?"){if(b+=2,b=d(f,b),b.err)return b}else{if(f[b]!=="<"){if(c(f[b]))continue;return A("InvalidChar","char '"+f[b]+"' is not expected.",$(f,b))}{let P=b;if(b++,f[b]==="!"){b=l(f,b);continue}{let T=!1;f[b]==="/"&&(T=!0,b++);let O="";for(;b<f.length&&f[b]!==">"&&f[b]!==" "&&f[b]!=="	"&&f[b]!==`
`&&f[b]!=="\r";b++)O+=f[b];if(O=O.trim(),O[O.length-1]==="/"&&(O=O.substring(0,O.length-1),b--),!o(O)){let G;return G=O.trim().length===0?"Invalid space after '<'.":"Tag '"+O+"' is an invalid name.",A("InvalidTag",G,$(f,b))}let q=m(f,b);if(q===!1)return A("InvalidAttr","Attributes for '"+O+"' have open quote.",$(f,b));let Z=q.value;if(b=q.index,Z[Z.length-1]==="/"){let G=b-Z.length;Z=Z.substring(0,Z.length-1);let de=C(Z,p);if(de!==!0)return A(de.err.code,de.err.msg,$(f,G+de.err.line));R=!0}else if(T){if(!q.tagClosed)return A("InvalidTag","Closing tag '"+O+"' doesn't have proper closing.",$(f,b));if(Z.trim().length>0)return A("InvalidTag","Closing tag '"+O+"' can't have attributes or invalid starting.",$(f,P));if(E.length===0)return A("InvalidTag","Closing tag '"+O+"' has not been opened.",$(f,P));{let G=E.pop();if(O!==G.tagName){let de=$(f,G.tagStartPos);return A("InvalidTag","Expected closing tag '"+G.tagName+"' (opened in line "+de.line+", col "+de.col+") instead of closing tag '"+O+"'.",$(f,P))}E.length==0&&(_=!0)}}else{let G=C(Z,p);if(G!==!0)return A(G.err.code,G.err.msg,$(f,b-Z.length+G.err.line));if(_===!0)return A("InvalidXml","Multiple possible root nodes found.",$(f,b));p.unpairedTags.indexOf(O)!==-1||E.push({tagName:O,tagStartPos:P}),R=!0}for(b++;b<f.length;b++)if(f[b]==="<"){if(f[b+1]==="!"){b++,b=l(f,b);continue}if(f[b+1]!=="?")break;if(b=d(f,++b),b.err)return b}else if(f[b]==="&"){let G=v(f,b);if(G==-1)return A("InvalidChar","char '&' is not expected.",$(f,b));b=G}else if(_===!0&&!c(f[b]))return A("InvalidXml","Extra text at the end",$(f,b));f[b]==="<"&&b--}}}return R?E.length==1?A("InvalidTag","Unclosed tag '"+E[0].tagName+"'.",$(f,E[0].tagStartPos)):!(E.length>0)||A("InvalidXml","Invalid '"+JSON.stringify(E.map((b=>b.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):A("InvalidXml","Start tag expected.",1)}function c(f){return f===" "||f==="	"||f===`
`||f==="\r"}function d(f,p){let E=p;for(;p<f.length;p++)if(!(f[p]!="?"&&f[p]!=" ")){let R=f.substr(E,p-E);if(p>5&&R==="xml")return A("InvalidXml","XML declaration allowed only at the start of the document.",$(f,p));if(f[p]=="?"&&f[p+1]==">"){p++;break}}return p}function l(f,p){if(f.length>p+5&&f[p+1]==="-"&&f[p+2]==="-"){for(p+=3;p<f.length;p++)if(f[p]==="-"&&f[p+1]==="-"&&f[p+2]===">"){p+=2;break}}else if(f.length>p+8&&f[p+1]==="D"&&f[p+2]==="O"&&f[p+3]==="C"&&f[p+4]==="T"&&f[p+5]==="Y"&&f[p+6]==="P"&&f[p+7]==="E"){let E=1;for(p+=8;p<f.length;p++)if(f[p]==="<")E++;else if(f[p]===">"&&(E--,E===0))break}else if(f.length>p+9&&f[p+1]==="["&&f[p+2]==="C"&&f[p+3]==="D"&&f[p+4]==="A"&&f[p+5]==="T"&&f[p+6]==="A"&&f[p+7]==="["){for(p+=8;p<f.length;p++)if(f[p]==="]"&&f[p+1]==="]"&&f[p+2]===">"){p+=2;break}}return p}let u='"',h="'";function m(f,p){let E="",R="",_=!1;for(;p<f.length;p++){if(f[p]===u||f[p]===h)R===""?R=f[p]:R!==f[p]||(R="");else if(f[p]===">"&&R===""){_=!0;break}E+=f[p]}return R===""&&{value:E,index:p,tagClosed:_}}let g=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function C(f,p){let E=n(f,g),R={};for(let _=0;_<E.length;_++){if(E[_][1].length===0)return A("InvalidAttr","Attribute '"+E[_][2]+"' has no space in starting.",H(E[_]));if(E[_][3]!==void 0&&E[_][4]===void 0)return A("InvalidAttr","Attribute '"+E[_][2]+"' is without value.",H(E[_]));if(E[_][3]===void 0&&!p.allowBooleanAttributes)return A("InvalidAttr","boolean attribute '"+E[_][2]+"' is not allowed.",H(E[_]));let b=E[_][2];if(!N(b))return A("InvalidAttr","Attribute '"+b+"' is an invalid name.",H(E[_]));if(R.hasOwnProperty(b))return A("InvalidAttr","Attribute '"+b+"' is repeated.",H(E[_]));R[b]=1}return!0}function v(f,p){if(f[++p]===";")return-1;if(f[p]==="#")return(function(R,_){let b=/\d/;for(R[_]==="x"&&(_++,b=/[\da-fA-F]/);_<R.length;_++){if(R[_]===";")return _;if(!R[_].match(b))break}return-1})(f,++p);let E=0;for(;p<f.length;p++,E++)if(!(f[p].match(/\w/)&&E<20)){if(f[p]===";")break;return-1}return p}function A(f,p,E){return{err:{code:f,msg:p,line:E.line||E,col:E.col}}}function N(f){return o(f)}function $(f,p){let E=f.substring(0,p).split(/\r?\n/);return{line:E.length,col:E[E.length-1].length+1}}function H(f){return f.startIndex+f[1].length}let Q={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(f,p){return p},attributeValueProcessor:function(f,p){return p},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(f,p,E){return f},captureMetaData:!1},fe;fe=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Ce{constructor(p){this.tagname=p,this.child=[],this[":@"]={}}add(p,E){p==="__proto__"&&(p="#__proto__"),this.child.push({[p]:E})}addChild(p,E){p.tagname==="__proto__"&&(p.tagname="#__proto__"),p[":@"]&&Object.keys(p[":@"]).length>0?this.child.push({[p.tagname]:p.child,":@":p[":@"]}):this.child.push({[p.tagname]:p.child}),E!==void 0&&(this.child[this.child.length-1][fe]={startIndex:E})}static getMetaDataSymbol(){return fe}}function K(f,p){let E={};if(f[p+3]!=="O"||f[p+4]!=="C"||f[p+5]!=="T"||f[p+6]!=="Y"||f[p+7]!=="P"||f[p+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{p+=9;let R=1,_=!1,b=!1,P="";for(;p<f.length;p++)if(f[p]!=="<"||b)if(f[p]===">"){if(b?f[p-1]==="-"&&f[p-2]==="-"&&(b=!1,R--):R--,R===0)break}else f[p]==="["?_=!0:P+=f[p];else{if(_&&Qn(f,"!ENTITY",p)){let T,O;p+=7,[T,O,p]=pe(f,p+1),O.indexOf("&")===-1&&(E[T]={regx:RegExp(`&${T};`,"g"),val:O})}else if(_&&Qn(f,"!ELEMENT",p)){p+=8;let{index:T}=lH(f,p+1);p=T}else if(_&&Qn(f,"!ATTLIST",p))p+=8;else if(_&&Qn(f,"!NOTATION",p)){p+=9;let{index:T}=Ee(f,p+1);p=T}else{if(!Qn(f,"!--",p))throw new Error("Invalid DOCTYPE");b=!0}R++,P=""}if(R!==0)throw new Error("Unclosed DOCTYPE")}return{entities:E,i:p}}let ae=(f,p)=>{for(;p<f.length&&/\s/.test(f[p]);)p++;return p};function pe(f,p){p=ae(f,p);let E="";for(;p<f.length&&!/\s/.test(f[p])&&f[p]!=='"'&&f[p]!=="'";)E+=f[p],p++;if(gg(E),p=ae(f,p),f.substring(p,p+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(f[p]==="%")throw new Error("Parameter entities are not supported");let R="";return[p,R]=Oo(f,p,"entity"),[E,R,--p]}function Ee(f,p){p=ae(f,p);let E="";for(;p<f.length&&!/\s/.test(f[p]);)E+=f[p],p++;gg(E),p=ae(f,p);let R=f.substring(p,p+6).toUpperCase();if(R!=="SYSTEM"&&R!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${R}"`);p+=R.length,p=ae(f,p);let _=null,b=null;if(R==="PUBLIC")[p,_]=Oo(f,p,"publicIdentifier"),f[p=ae(f,p)]!=='"'&&f[p]!=="'"||([p,b]=Oo(f,p,"systemIdentifier"));else if(R==="SYSTEM"&&([p,b]=Oo(f,p,"systemIdentifier"),!b))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:E,publicIdentifier:_,systemIdentifier:b,index:--p}}function Oo(f,p,E){let R="",_=f[p];if(_!=='"'&&_!=="'")throw new Error(`Expected quoted string, found "${_}"`);for(p++;p<f.length&&f[p]!==_;)R+=f[p],p++;if(f[p]!==_)throw new Error(`Unterminated ${E} value`);return[++p,R]}function lH(f,p){p=ae(f,p);let E="";for(;p<f.length&&!/\s/.test(f[p]);)E+=f[p],p++;if(!gg(E))throw new Error(`Invalid element name: "${E}"`);let R="";if(f[p=ae(f,p)]==="E"&&Qn(f,"MPTY",p))p+=4;else if(f[p]==="A"&&Qn(f,"NY",p))p+=2;else{if(f[p]!=="(")throw new Error(`Invalid Element Expression, found "${f[p]}"`);for(p++;p<f.length&&f[p]!==")";)R+=f[p],p++;if(f[p]!==")")throw new Error("Unterminated content model")}return{elementName:E,contentModel:R.trim(),index:p}}function Qn(f,p,E){for(let R=0;R<p.length;R++)if(p[R]!==f[E+R+1])return!1;return!0}function gg(f){if(o(f))return f;throw new Error(`Invalid entity name ${f}`)}let uH=/^[-+]?0x[a-fA-F0-9]+$/,fH=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,pH={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},mH=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function nR(f){return typeof f=="function"?f:Array.isArray(f)?p=>{for(let E of f)if(typeof E=="string"&&p===E||E instanceof RegExp&&E.test(p))return!0}:()=>!1}class hH{constructor(p){this.options=p,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(E,R)=>String.fromCodePoint(Number.parseInt(R,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(E,R)=>String.fromCodePoint(Number.parseInt(R,16))}},this.addExternalEntities=gH,this.parseXml=wH,this.parseTextData=yH,this.resolveNameSpace=SH,this.buildAttributesMap=_H,this.isItStopNode=vH,this.replaceEntitiesValue=CH,this.readStopNodeData=xH,this.saveTextToParentTag=RH,this.addChild=bH,this.ignoreAttributesFn=nR(this.options.ignoreAttributes)}}function gH(f){let p=Object.keys(f);for(let E=0;E<p.length;E++){let R=p[E];this.lastEntities[R]={regex:new RegExp("&"+R+";","g"),val:f[R]}}}function yH(f,p,E,R,_,b,P){if(f!==void 0&&(this.options.trimValues&&!R&&(f=f.trim()),f.length>0)){P||(f=this.replaceEntitiesValue(f));let T=this.options.tagValueProcessor(p,f,E,_,b);return T==null?f:typeof T!=typeof f||T!==f?T:this.options.trimValues||f.trim()===f?oR(f,this.options.parseTagValue,this.options.numberParseOptions):f}}function SH(f){if(this.options.removeNSPrefix){let p=f.split(":"),E=f.charAt(0)==="/"?"/":"";if(p[0]==="xmlns")return"";p.length===2&&(f=E+p[1])}return f}let EH=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function _H(f,p,E){if(this.options.ignoreAttributes!==!0&&typeof f=="string"){let R=n(f,EH),_=R.length,b={};for(let P=0;P<_;P++){let T=this.resolveNameSpace(R[P][1]);if(this.ignoreAttributesFn(T,p))continue;let O=R[P][4],q=this.options.attributeNamePrefix+T;if(T.length)if(this.options.transformAttributeName&&(q=this.options.transformAttributeName(q)),q==="__proto__"&&(q="#__proto__"),O!==void 0){this.options.trimValues&&(O=O.trim()),O=this.replaceEntitiesValue(O);let Z=this.options.attributeValueProcessor(T,O,p);b[q]=Z==null?O:typeof Z!=typeof O||Z!==O?Z:oR(O,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(b[q]=!0)}if(!Object.keys(b).length)return;if(this.options.attributesGroupName){let P={};return P[this.options.attributesGroupName]=b,P}return b}}let wH=function(f){f=f.replace(/\r\n?/g,`
`);let p=new Ce("!xml"),E=p,R="",_="";for(let b=0;b<f.length;b++)if(f[b]==="<")if(f[b+1]==="/"){let P=Kn(f,">",b,"Closing Tag is not closed."),T=f.substring(b+2,P).trim();if(this.options.removeNSPrefix){let Z=T.indexOf(":");Z!==-1&&(T=T.substr(Z+1))}this.options.transformTagName&&(T=this.options.transformTagName(T)),E&&(R=this.saveTextToParentTag(R,E,_));let O=_.substring(_.lastIndexOf(".")+1);if(T&&this.options.unpairedTags.indexOf(T)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${T}>`);let q=0;O&&this.options.unpairedTags.indexOf(O)!==-1?(q=_.lastIndexOf(".",_.lastIndexOf(".")-1),this.tagsNodeStack.pop()):q=_.lastIndexOf("."),_=_.substring(0,q),E=this.tagsNodeStack.pop(),R="",b=P}else if(f[b+1]==="?"){let P=yg(f,b,!1,"?>");if(!P)throw new Error("Pi Tag is not closed.");if(R=this.saveTextToParentTag(R,E,_),!(this.options.ignoreDeclaration&&P.tagName==="?xml"||this.options.ignorePiTags)){let T=new Ce(P.tagName);T.add(this.options.textNodeName,""),P.tagName!==P.tagExp&&P.attrExpPresent&&(T[":@"]=this.buildAttributesMap(P.tagExp,_,P.tagName)),this.addChild(E,T,_,b)}b=P.closeIndex+1}else if(f.substr(b+1,3)==="!--"){let P=Kn(f,"-->",b+4,"Comment is not closed.");if(this.options.commentPropName){let T=f.substring(b+4,P-2);R=this.saveTextToParentTag(R,E,_),E.add(this.options.commentPropName,[{[this.options.textNodeName]:T}])}b=P}else if(f.substr(b+1,2)==="!D"){let P=K(f,b);this.docTypeEntities=P.entities,b=P.i}else if(f.substr(b+1,2)==="!["){let P=Kn(f,"]]>",b,"CDATA is not closed.")-2,T=f.substring(b+9,P);R=this.saveTextToParentTag(R,E,_);let O=this.parseTextData(T,E.tagname,_,!0,!1,!0,!0);O==null&&(O=""),this.options.cdataPropName?E.add(this.options.cdataPropName,[{[this.options.textNodeName]:T}]):E.add(this.options.textNodeName,O),b=P+2}else{let P=yg(f,b,this.options.removeNSPrefix),T=P.tagName,O=P.rawTagName,q=P.tagExp,Z=P.attrExpPresent,G=P.closeIndex;this.options.transformTagName&&(T=this.options.transformTagName(T)),E&&R&&E.tagname!=="!xml"&&(R=this.saveTextToParentTag(R,E,_,!1));let de=E;de&&this.options.unpairedTags.indexOf(de.tagname)!==-1&&(E=this.tagsNodeStack.pop(),_=_.substring(0,_.lastIndexOf("."))),T!==p.tagname&&(_+=_?"."+T:T);let _e=b;if(this.isItStopNode(this.options.stopNodes,_,T)){let ue="";if(q.length>0&&q.lastIndexOf("/")===q.length-1)T[T.length-1]==="/"?(T=T.substr(0,T.length-1),_=_.substr(0,_.length-1),q=T):q=q.substr(0,q.length-1),b=P.closeIndex;else if(this.options.unpairedTags.indexOf(T)!==-1)b=P.closeIndex;else{let jr=this.readStopNodeData(f,O,G+1);if(!jr)throw new Error(`Unexpected end of ${O}`);b=jr.i,ue=jr.tagContent}let Xe=new Ce(T);T!==q&&Z&&(Xe[":@"]=this.buildAttributesMap(q,_,T)),ue&&(ue=this.parseTextData(ue,T,_,!0,Z,!0,!0)),_=_.substr(0,_.lastIndexOf(".")),Xe.add(this.options.textNodeName,ue),this.addChild(E,Xe,_,_e)}else{if(q.length>0&&q.lastIndexOf("/")===q.length-1){T[T.length-1]==="/"?(T=T.substr(0,T.length-1),_=_.substr(0,_.length-1),q=T):q=q.substr(0,q.length-1),this.options.transformTagName&&(T=this.options.transformTagName(T));let ue=new Ce(T);T!==q&&Z&&(ue[":@"]=this.buildAttributesMap(q,_,T)),this.addChild(E,ue,_,_e),_=_.substr(0,_.lastIndexOf("."))}else{let ue=new Ce(T);this.tagsNodeStack.push(E),T!==q&&Z&&(ue[":@"]=this.buildAttributesMap(q,_,T)),this.addChild(E,ue,_,_e),E=ue}R="",b=G}}else R+=f[b];return p.child};function bH(f,p,E,R){this.options.captureMetaData||(R=void 0);let _=this.options.updateTag(p.tagname,E,p[":@"]);_===!1||(typeof _=="string"&&(p.tagname=_),f.addChild(p,R))}let CH=function(f){if(this.options.processEntities){for(let p in this.docTypeEntities){let E=this.docTypeEntities[p];f=f.replace(E.regx,E.val)}for(let p in this.lastEntities){let E=this.lastEntities[p];f=f.replace(E.regex,E.val)}if(this.options.htmlEntities)for(let p in this.htmlEntities){let E=this.htmlEntities[p];f=f.replace(E.regex,E.val)}f=f.replace(this.ampEntity.regex,this.ampEntity.val)}return f};function RH(f,p,E,R){return f&&(R===void 0&&(R=p.child.length===0),(f=this.parseTextData(f,p.tagname,E,!1,!!p[":@"]&&Object.keys(p[":@"]).length!==0,R))!==void 0&&f!==""&&p.add(this.options.textNodeName,f),f=""),f}function vH(f,p,E){let R="*."+E;for(let _ in f){let b=f[_];if(R===b||p===b)return!0}return!1}function Kn(f,p,E,R){let _=f.indexOf(p,E);if(_===-1)throw new Error(R);return _+p.length-1}function yg(f,p,E,R=">"){let _=(function(G,de,_e=">"){let ue,Xe="";for(let jr=de;jr<G.length;jr++){let Vs=G[jr];if(ue)Vs===ue&&(ue="");else if(Vs==='"'||Vs==="'")ue=Vs;else if(Vs===_e[0]){if(!_e[1])return{data:Xe,index:jr};if(G[jr+1]===_e[1])return{data:Xe,index:jr}}else Vs==="	"&&(Vs=" ");Xe+=Vs}})(f,p+1,R);if(!_)return;let b=_.data,P=_.index,T=b.search(/\s/),O=b,q=!0;T!==-1&&(O=b.substring(0,T),b=b.substring(T+1).trimStart());let Z=O;if(E){let G=O.indexOf(":");G!==-1&&(O=O.substr(G+1),q=O!==_.data.substr(G+1))}return{tagName:O,tagExp:b,closeIndex:P,attrExpPresent:q,rawTagName:Z}}function xH(f,p,E){let R=E,_=1;for(;E<f.length;E++)if(f[E]==="<")if(f[E+1]==="/"){let b=Kn(f,">",E,`${p} is not closed`);if(f.substring(E+2,b).trim()===p&&(_--,_===0))return{tagContent:f.substring(R,E),i:b};E=b}else if(f[E+1]==="?")E=Kn(f,"?>",E+1,"StopNode is not closed.");else if(f.substr(E+1,3)==="!--")E=Kn(f,"-->",E+3,"StopNode is not closed.");else if(f.substr(E+1,2)==="![")E=Kn(f,"]]>",E,"StopNode is not closed.")-2;else{let b=yg(f,E,">");b&&((b&&b.tagName)===p&&b.tagExp[b.tagExp.length-1]!=="/"&&_++,E=b.closeIndex)}}function oR(f,p,E){if(p&&typeof f=="string"){let R=f.trim();return R==="true"||R!=="false"&&(function(_,b={}){if(b=Object.assign({},pH,b),!_||typeof _!="string")return _;let P=_.trim();if(b.skipLike!==void 0&&b.skipLike.test(P))return _;if(_==="0")return 0;if(b.hex&&uH.test(P))return(function(O){if(parseInt)return parseInt(O,16);if(Number.parseInt)return Number.parseInt(O,16);if(window&&window.parseInt)return window.parseInt(O,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(P);if(P.search(/.+[eE].+/)!==-1)return(function(O,q,Z){if(!Z.eNotation)return O;let G=q.match(mH);if(G){let de=G[1]||"",_e=G[3].indexOf("e")===-1?"E":"e",ue=G[2],Xe=de?O[ue.length+1]===_e:O[ue.length]===_e;return ue.length>1&&Xe?O:ue.length!==1||!G[3].startsWith(`.${_e}`)&&G[3][0]!==_e?Z.leadingZeros&&!Xe?(q=(G[1]||"")+G[3],Number(q)):O:Number(q)}return O})(_,P,b);{let O=fH.exec(P);if(O){let q=O[1]||"",Z=O[2],G=((T=O[3])&&T.indexOf(".")!==-1&&((T=T.replace(/0+$/,""))==="."?T="0":T[0]==="."?T="0"+T:T[T.length-1]==="."&&(T=T.substring(0,T.length-1))),T),de=q?_[Z.length+1]===".":_[Z.length]===".";if(!b.leadingZeros&&(Z.length>1||Z.length===1&&!de))return _;{let _e=Number(P),ue=String(_e);if(_e===0||_e===-0)return _e;if(ue.search(/[eE]/)!==-1)return b.eNotation?_e:_;if(P.indexOf(".")!==-1)return ue==="0"||ue===G||ue===`${q}${G}`?_e:_;let Xe=Z?G:P;return Z?Xe===ue||q+Xe===ue?_e:_:Xe===ue||Xe===q+ue?_e:_}}return _}var T})(f,E)}return f!==void 0?f:""}let Sg=Ce.getMetaDataSymbol();function AH(f,p){return iR(f,p)}function iR(f,p,E){let R,_={};for(let b=0;b<f.length;b++){let P=f[b],T=TH(P),O="";if(O=E===void 0?T:E+"."+T,T===p.textNodeName)R===void 0?R=P[T]:R+=""+P[T];else{if(T===void 0)continue;if(P[T]){let q=iR(P[T],p,O),Z=IH(q,p);P[Sg]!==void 0&&(q[Sg]=P[Sg]),P[":@"]?PH(q,P[":@"],O,p):Object.keys(q).length!==1||q[p.textNodeName]===void 0||p.alwaysCreateTextNode?Object.keys(q).length===0&&(p.alwaysCreateTextNode?q[p.textNodeName]="":q=""):q=q[p.textNodeName],_[T]!==void 0&&_.hasOwnProperty(T)?(Array.isArray(_[T])||(_[T]=[_[T]]),_[T].push(q)):p.isArray(T,O,Z)?_[T]=[q]:_[T]=q}}}return typeof R=="string"?R.length>0&&(_[p.textNodeName]=R):R!==void 0&&(_[p.textNodeName]=R),_}function TH(f){let p=Object.keys(f);for(let E=0;E<p.length;E++){let R=p[E];if(R!==":@")return R}}function PH(f,p,E,R){if(p){let _=Object.keys(p),b=_.length;for(let P=0;P<b;P++){let T=_[P];R.isArray(T,E+"."+T,!0,!0)?f[T]=[p[T]]:f[T]=p[T]}}}function IH(f,p){let{textNodeName:E}=p,R=Object.keys(f).length;return R===0||!(R!==1||!f[E]&&typeof f[E]!="boolean"&&f[E]!==0)}class NH{constructor(p){this.externalEntities={},this.options=(function(E){return Object.assign({},Q,E)})(p)}parse(p,E){if(typeof p!="string"){if(!p.toString)throw new Error("XML data is accepted in String or Bytes[] form.");p=p.toString()}if(E){E===!0&&(E={});let b=a(p,E);if(b!==!0)throw Error(`${b.err.msg}:${b.err.line}:${b.err.col}`)}let R=new hH(this.options);R.addExternalEntities(this.externalEntities);let _=R.parseXml(p);return this.options.preserveOrder||_===void 0?_:AH(_,this.options)}addEntity(p,E){if(E.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(p.indexOf("&")!==-1||p.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(E==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[p]=E}static getMetaDataSymbol(){return Ce.getMetaDataSymbol()}}function OH(f,p){let E="";return p.format&&p.indentBy.length>0&&(E=`
`),aR(f,p,"",E)}function aR(f,p,E,R){let _="",b=!1;for(let P=0;P<f.length;P++){let T=f[P],O=DH(T);if(O===void 0)continue;let q="";if(q=E.length===0?O:`${E}.${O}`,O===p.textNodeName){let _e=T[O];kH(q,p)||(_e=p.tagValueProcessor(O,_e),_e=dR(_e,p)),b&&(_+=R),_+=_e,b=!1;continue}if(O===p.cdataPropName){b&&(_+=R),_+=`<![CDATA[${T[O][0][p.textNodeName]}]]>`,b=!1;continue}if(O===p.commentPropName){_+=R+`<!--${T[O][0][p.textNodeName]}-->`,b=!0;continue}if(O[0]==="?"){let _e=cR(T[":@"],p),ue=O==="?xml"?"":R,Xe=T[O][0][p.textNodeName];Xe=Xe.length!==0?" "+Xe:"",_+=ue+`<${O}${Xe}${_e}?>`,b=!0;continue}let Z=R;Z!==""&&(Z+=p.indentBy);let G=R+`<${O}${cR(T[":@"],p)}`,de=aR(T[O],p,q,Z);p.unpairedTags.indexOf(O)!==-1?p.suppressUnpairedNode?_+=G+">":_+=G+"/>":de&&de.length!==0||!p.suppressEmptyNode?de&&de.endsWith(">")?_+=G+`>${de}${R}</${O}>`:(_+=G+">",de&&R!==""&&(de.includes("/>")||de.includes("</"))?_+=R+p.indentBy+de+R:_+=de,_+=`</${O}>`):_+=G+"/>",b=!0}return _}function DH(f){let p=Object.keys(f);for(let E=0;E<p.length;E++){let R=p[E];if(f.hasOwnProperty(R)&&R!==":@")return R}}function cR(f,p){let E="";if(f&&!p.ignoreAttributes)for(let R in f){if(!f.hasOwnProperty(R))continue;let _=p.attributeValueProcessor(R,f[R]);_=dR(_,p),_===!0&&p.suppressBooleanAttributes?E+=` ${R.substr(p.attributeNamePrefix.length)}`:E+=` ${R.substr(p.attributeNamePrefix.length)}="${_}"`}return E}function kH(f,p){let E=(f=f.substr(0,f.length-p.textNodeName.length-1)).substr(f.lastIndexOf(".")+1);for(let R in p.stopNodes)if(p.stopNodes[R]===f||p.stopNodes[R]==="*."+E)return!0;return!1}function dR(f,p){if(f&&f.length>0&&p.processEntities)for(let E=0;E<p.entities.length;E++){let R=p.entities[E];f=f.replace(R.regex,R.val)}return f}let MH={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(f,p){return p},attributeValueProcessor:function(f,p){return p},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function zs(f){this.options=Object.assign({},MH,f),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=nR(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=FH),this.processTextOrObjNode=LH,this.options.format?(this.indentate=qH,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function LH(f,p,E,R){let _=this.j2x(f,E+1,R.concat(p));return f[this.options.textNodeName]!==void 0&&Object.keys(f).length===1?this.buildTextValNode(f[this.options.textNodeName],p,_.attrStr,E):this.buildObjectNode(_.val,p,_.attrStr,E)}function qH(f){return this.options.indentBy.repeat(f)}function FH(f){return!(!f.startsWith(this.options.attributeNamePrefix)||f===this.options.textNodeName)&&f.substr(this.attrPrefixLen)}zs.prototype.build=function(f){return this.options.preserveOrder?OH(f,this.options):(Array.isArray(f)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(f={[this.options.arrayNodeName]:f}),this.j2x(f,0,[]).val)},zs.prototype.j2x=function(f,p,E){let R="",_="",b=E.join(".");for(let P in f)if(Object.prototype.hasOwnProperty.call(f,P))if(f[P]===void 0)this.isAttribute(P)&&(_+="");else if(f[P]===null)this.isAttribute(P)||P===this.options.cdataPropName?_+="":P[0]==="?"?_+=this.indentate(p)+"<"+P+"?"+this.tagEndChar:_+=this.indentate(p)+"<"+P+"/"+this.tagEndChar;else if(f[P]instanceof Date)_+=this.buildTextValNode(f[P],P,"",p);else if(typeof f[P]!="object"){let T=this.isAttribute(P);if(T&&!this.ignoreAttributesFn(T,b))R+=this.buildAttrPairStr(T,""+f[P]);else if(!T)if(P===this.options.textNodeName){let O=this.options.tagValueProcessor(P,""+f[P]);_+=this.replaceEntitiesValue(O)}else _+=this.buildTextValNode(f[P],P,"",p)}else if(Array.isArray(f[P])){let T=f[P].length,O="",q="";for(let Z=0;Z<T;Z++){let G=f[P][Z];if(G!==void 0)if(G===null)P[0]==="?"?_+=this.indentate(p)+"<"+P+"?"+this.tagEndChar:_+=this.indentate(p)+"<"+P+"/"+this.tagEndChar;else if(typeof G=="object")if(this.options.oneListGroup){let de=this.j2x(G,p+1,E.concat(P));O+=de.val,this.options.attributesGroupName&&G.hasOwnProperty(this.options.attributesGroupName)&&(q+=de.attrStr)}else O+=this.processTextOrObjNode(G,P,p,E);else if(this.options.oneListGroup){let de=this.options.tagValueProcessor(P,G);de=this.replaceEntitiesValue(de),O+=de}else O+=this.buildTextValNode(G,P,"",p)}this.options.oneListGroup&&(O=this.buildObjectNode(O,P,q,p)),_+=O}else if(this.options.attributesGroupName&&P===this.options.attributesGroupName){let T=Object.keys(f[P]),O=T.length;for(let q=0;q<O;q++)R+=this.buildAttrPairStr(T[q],""+f[P][T[q]])}else _+=this.processTextOrObjNode(f[P],P,p,E);return{attrStr:R,val:_}},zs.prototype.buildAttrPairStr=function(f,p){return p=this.options.attributeValueProcessor(f,""+p),p=this.replaceEntitiesValue(p),this.options.suppressBooleanAttributes&&p==="true"?" "+f:" "+f+'="'+p+'"'},zs.prototype.buildObjectNode=function(f,p,E,R){if(f==="")return p[0]==="?"?this.indentate(R)+"<"+p+E+"?"+this.tagEndChar:this.indentate(R)+"<"+p+E+this.closeTag(p)+this.tagEndChar;{let _="</"+p+this.tagEndChar,b="";return p[0]==="?"&&(b="?",_=""),!E&&E!==""||f.indexOf("<")!==-1?this.options.commentPropName!==!1&&p===this.options.commentPropName&&b.length===0?this.indentate(R)+`<!--${f}-->`+this.newLine:this.indentate(R)+"<"+p+E+b+this.tagEndChar+f+this.indentate(R)+_:this.indentate(R)+"<"+p+E+b+">"+f+_}},zs.prototype.closeTag=function(f){let p="";return this.options.unpairedTags.indexOf(f)!==-1?this.options.suppressUnpairedNode||(p="/"):p=this.options.suppressEmptyNode?"/":`></${f}`,p},zs.prototype.buildTextValNode=function(f,p,E,R){if(this.options.cdataPropName!==!1&&p===this.options.cdataPropName)return this.indentate(R)+`<![CDATA[${f}]]>`+this.newLine;if(this.options.commentPropName!==!1&&p===this.options.commentPropName)return this.indentate(R)+`<!--${f}-->`+this.newLine;if(p[0]==="?")return this.indentate(R)+"<"+p+E+"?"+this.tagEndChar;{let _=this.options.tagValueProcessor(p,f);return _=this.replaceEntitiesValue(_),_===""?this.indentate(R)+"<"+p+E+this.closeTag(p)+this.tagEndChar:this.indentate(R)+"<"+p+E+">"+_+"</"+p+this.tagEndChar}},zs.prototype.replaceEntitiesValue=function(f){if(f&&f.length>0&&this.options.processEntities)for(let p=0;p<this.options.entities.length;p++){let E=this.options.entities[p];f=f.replace(E.regex,E.val)}return f};let $H={validate:a};$P.exports=t})()});var BP=w(iE=>{"use strict";Object.defineProperty(iE,"__esModule",{value:!0});iE.parseXML=C3;var b3=UP(),oE=new b3.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});oE.addEntity("#xD","\r");oE.addEntity("#10",`
`);function C3(e){return oE.parse(e,!0)}});var co=w(gu=>{"use strict";var R3=BP();function v3(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function x3(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var hu=class{value;constructor(t){this.value=t}toString(){return x3(""+this.value)}},aE=class e{name;children;attributes={};static of(t,r,s){let n=new e(t);return r!==void 0&&n.addChildNode(new hu(r)),s!==void 0&&n.withName(s),n}constructor(t,r=[]){this.name=t,this.children=r}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,s=r){if(t[r]!=null){let n=e.of(r,t[r]).withName(s);this.c(n)}}l(t,r,s,n){t[r]!=null&&n().map(i=>{i.withName(s),this.c(i)})}lc(t,r,s,n){if(t[r]!=null){let o=n(),i=new e(s);o.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,s=this.attributes;for(let n of Object.keys(s)){let o=s[n];o!=null&&(r+=` ${n}="${v3(""+o)}"`)}return r+=t?`>${this.children.map(n=>n.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(gu,"parseXML",{enumerable:!0,get:function(){return R3.parseXML}});gu.XmlNode=aE;gu.XmlText=hu});var HP,jP,zP,lo,yu=S(()=>{HP=y(co());ke();le();jP=y(F()),zP=y(Te());cn();lo=class extends bt{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new hs(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,s){let n=D.of(t),o=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(o).find(d=>!!d.getMemberTraits().eventPayload)){let d={},l=Object.keys(o)[0];return o[l].isBlobSchema()?d[l]=r:d[l]=this.read(o[l],r),d}let a=(this.serdeContext?.utf8Encoder??zP.toUtf8)(r),c=this.parseXml(a);return this.readSchema(t,s?c[s]:c)}readSchema(t,r){let s=D.of(t);if(s.isUnitSchema())return;let n=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(r))return this.readSchema(s,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!n.sparse,i=!!n.xmlFlattened;if(s.isListSchema()){let c=s.getValueSchema(),d=[],l=c.getMergedTraits().xmlName??"member",u=i?r:(r[0]??r)[l],h=Array.isArray(u)?u:[u];for(let m of h)(m!=null||o)&&d.push(this.readSchema(c,m));return d}let a={};if(s.isMapSchema()){let c=s.getKeySchema(),d=s.getValueSchema(),l;i?l=Array.isArray(r)?r:[r]:l=Array.isArray(r.entry)?r.entry:[r.entry];let u=c.getMergedTraits().xmlName??"key",h=d.getMergedTraits().xmlName??"value";for(let m of l){let g=m[u],C=m[h];(C!=null||o)&&(a[g]=this.readSchema(d,C))}return a}if(s.isStructSchema()){for(let[c,d]of s.structIterator()){let l=d.getMergedTraits(),u=l.httpPayload?l.xmlName??d.getName():d.getMemberTraits().xmlName??c;r[u]!=null&&(a[c]=this.readSchema(d,r[u]))}return a}if(s.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,r)}parseXml(t){if(t.length){let r;try{r=(0,HP.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let s="#text",n=Object.keys(r)[0],o=r[n];return o[s]&&(o[n]=o[s],delete o[s]),(0,jP.getValueFromTextNode)(o)}return{}}}});var VP,GP,Su,WP=S(()=>{ke();le();Ze();VP=y(F()),GP=y(Ae());cn();Su=class extends bt{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,s=""){this.buffer===void 0&&(this.buffer="");let n=D.of(t);if(s&&!s.endsWith(".")&&(s+="."),n.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??GP.toBase64)(r)));else if(n.isBooleanSchema()||n.isNumericSchema()||n.isStringSchema())r!=null?(this.writeKey(s),this.writeValue(String(r))):n.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,_t.v4)()));else if(n.isBigIntegerSchema())r!=null&&(this.writeKey(s),this.writeValue(String(r)));else if(n.isBigDecimalSchema())r!=null&&(this.writeKey(s),this.writeValue(r instanceof oe?r.string:String(r)));else if(n.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(s),Ke(n,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,VP.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(n.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${n.getName(!0)}`);if(n.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let o=n.getValueSchema(),i=this.settings.flattenLists||n.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let d=this.getKey("member",o.getMergedTraits().xmlName),l=i?`${s}${a}`:`${s}${d}.${a}`;this.write(o,c,l),++a}}}else if(n.isMapSchema()){if(r&&typeof r=="object"){let o=n.getKeySchema(),i=n.getValueSchema(),a=n.getMergedTraits().xmlFlattened,c=1;for(let[d,l]of Object.entries(r)){if(l==null)continue;let u=this.getKey("key",o.getMergedTraits().xmlName),h=a?`${s}${c}.${u}`:`${s}entry.${c}.${u}`,m=this.getKey("value",i.getMergedTraits().xmlName),g=a?`${s}${c}.${m}`:`${s}entry.${c}.${m}`;this.write(o,d,h),this.write(i,l,g),++c}}}else if(n.isStructSchema()){if(r&&typeof r=="object")for(let[o,i]of n.structIterator()){if(r[o]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(o,i.getMergedTraits().xmlName),c=`${s}${a}`;this.write(i,r[o],c)}}else if(!n.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${n.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let s=r??t;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${Kt(t)}=`}writeValue(t){this.buffer+=Kt(t)}}});var Ja,cE=S(()=>{ke();le();Zo();yu();WP();Ja=class extends Yt{options;serializer;deserializer;mixin=new ir;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Su(r),this.deserializer=new lo(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":"application/x-www-form-urlencoded"}),(Tt(t.input)==="unit"||!n.body)&&(n.body="");let o=t.name.split("#")[1]??t.name;return n.body=`Action=${o}&Version=${this.options.version}`+n.body,n.body.endsWith("&")&&(n.body=n.body.slice(-1)),n}async deserializeResponse(t,r,s){let n=this.deserializer,o=D.of(t.output),i={};if(s.statusCode>=300){let u=await Mt(s.body,r);u.byteLength>0&&Object.assign(i,await n.read(15,u)),await this.handleError(t,r,s,i,this.deserializeMetadata(s))}for(let u in s.headers){let h=s.headers[u];delete s.headers[u],s.headers[u.toLowerCase()]=h}let a=t.name.split("#")[1]??t.name,c=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,d=await Mt(s.body,r);return d.byteLength>0&&Object.assign(i,await n.read(o,d,c)),{$metadata:this.deserializeMetadata(s),...i}}useNestedResult(){return!0}async handleError(t,r,s,n,o){let i=this.loadQueryErrorCode(s,n)??"Unknown",a=this.loadQueryError(n),c=this.loadQueryErrorMessage(n);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:d,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,a,o,(C,v)=>C.find(A=>D.of(A).getMergedTraits().awsQueryError?.[0]===v)),u=D.of(d),h=me.for(d[1]).getErrorCtor(d)??Error,m=new h(c),g={Error:a.Error};for(let[C,v]of u.structIterator()){let A=v.getMergedTraits().xmlName??C,N=a[A]??n[A];g[C]=this.deserializer.readSchema(v,N)}throw Object.assign(m,l,{$fault:u.getMergedTraits().error,message:c},g)}loadQueryErrorCode(t,r){let s=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(s!==void 0)return s;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var dE,QP=S(()=>{cE();dE=class extends Ja{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var KP,YP,Xa,lE,uE,fE=S(()=>{KP=y(co()),YP=y(F());XS();Xa=(e,t)=>uu(e,t).then(r=>{if(r.length){let s;try{s=(0,KP.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let n="#text",o=Object.keys(s)[0],i=s[o];return i[n]&&(i[o]=i[n],delete i[n]),(0,YP.getValueFromTextNode)(i)}return{}}),lE=async(e,t)=>{let r=await Xa(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},uE=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var ar,pE,Eu,Za,mE=S(()=>{ar=y(co());ke();le();Ze();pE=y(F()),Eu=y(Ae());cn();Za=class extends bt{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let s=D.of(t);if(s.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(s.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Eu.fromBase64)(r);else{this.buffer=this.writeStruct(s,r,void 0);let n=s.getMergedTraits();n.httpPayload&&!n.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,s){let n=t.getMergedTraits(),o=t.isMemberSchema()&&!n.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():n.xmlName??t.getName();if(!o||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=ar.XmlNode.of(o),[a,c]=this.getXmlnsAttribute(t,s);for(let[d,l]of t.structIterator()){let u=r[d];if(u!=null||l.isIdempotencyToken()){if(l.getMergedTraits().xmlAttribute){i.addAttribute(l.getMergedTraits().xmlName??d,this.writeSimple(l,u));continue}if(l.isListSchema())this.writeList(l,u,i,c);else if(l.isMapSchema())this.writeMap(l,u,i,c);else if(l.isStructSchema())i.addChildNode(this.writeStruct(l,u,c));else{let h=ar.XmlNode.of(l.getMergedTraits().xmlName??l.getMemberName());this.writeSimpleInto(l,u,h,c),i.addChildNode(h)}}}return c&&i.addAttribute(a,c),i}writeList(t,r,s,n){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let o=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),c=!!a.sparse,d=!!o.xmlFlattened,[l,u]=this.getXmlnsAttribute(t,n),h=(m,g)=>{if(i.isListSchema())this.writeList(i,Array.isArray(g)?g:[g],m,u);else if(i.isMapSchema())this.writeMap(i,g,m,u);else if(i.isStructSchema()){let C=this.writeStruct(i,g,u);m.addChildNode(C.withName(d?o.xmlName??t.getMemberName():a.xmlName??"member"))}else{let C=ar.XmlNode.of(d?o.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,g,C,u),m.addChildNode(C)}};if(d)for(let m of r)(c||m!=null)&&h(s,m);else{let m=ar.XmlNode.of(o.xmlName??t.getMemberName());u&&m.addAttribute(l,u);for(let g of r)(c||g!=null)&&h(m,g);s.addChildNode(m)}}writeMap(t,r,s,n,o=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),d=a.getMergedTraits().xmlName??"key",l=t.getValueSchema(),u=l.getMergedTraits(),h=u.xmlName??"value",m=!!u.sparse,g=!!i.xmlFlattened,[C,v]=this.getXmlnsAttribute(t,n),A=(N,$,H)=>{let Q=ar.XmlNode.of(d,$),[fe,Ce]=this.getXmlnsAttribute(a,v);Ce&&Q.addAttribute(fe,Ce),N.addChildNode(Q);let K=ar.XmlNode.of(h);l.isListSchema()?this.writeList(l,H,K,v):l.isMapSchema()?this.writeMap(l,H,K,v,!0):l.isStructSchema()?K=this.writeStruct(l,H,v):this.writeSimpleInto(l,H,K,v),N.addChildNode(K)};if(g){for(let[N,$]of Object.entries(r))if(m||$!=null){let H=ar.XmlNode.of(i.xmlName??t.getMemberName());A(H,N,$),s.addChildNode(H)}}else{let N;o||(N=ar.XmlNode.of(i.xmlName??t.getMemberName()),v&&N.addAttribute(C,v),s.addChildNode(N));for(let[$,H]of Object.entries(r))if(m||H!=null){let Q=ar.XmlNode.of("entry");A(Q,$,H),(o?s:N).addChildNode(Q)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=D.of(t),n=null;if(r&&typeof r=="object")if(s.isBlobSchema())n=(this.serdeContext?.base64Encoder??Eu.toBase64)(r);else if(s.isTimestampSchema()&&r instanceof Date)switch(Ke(s,this.settings)){case 5:n=r.toISOString().replace(".000Z","Z");break;case 6:n=(0,pE.dateToUtcString)(r);break;case 7:n=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),n=(0,pE.dateToUtcString)(r);break}else{if(s.isBigDecimalSchema()&&r)return r instanceof oe?r.string:String(r);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(n=String(r)),s.isStringSchema()&&(r===void 0&&s.isIdempotencyToken()?n=(0,_t.v4)():n=String(r)),n===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${r}`);return n}writeSimpleInto(t,r,s,n){let o=this.writeSimple(t,r),i=D.of(t),a=new ar.XmlText(o),[c,d]=this.getXmlnsAttribute(i,n);d&&s.addAttribute(c,d),s.addChildNode(a)}getXmlnsAttribute(t,r){let s=t.getMergedTraits(),[n,o]=s.xmlNamespace??[];return o&&o!==r?[n?`xmlns:${n}`:"xmlns",o]:[void 0,void 0]}}});var ec,hE=S(()=>{cn();yu();mE();ec=class extends bt{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new Za(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new lo(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var gE,JP=S(()=>{ke();le();Zo();fE();hE();gE=class extends Nr{codec;serializer;deserializer;mixin=new ir;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new ec(r),this.serializer=new Dr(this.codec.createSerializer(),r),this.deserializer=new Or(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=D.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]===this.getDefaultContentType()&&typeof n.body=="string"&&(n.body='<?xml version="1.0" encoding="UTF-8"?>'+n.body),n}async deserializeResponse(t,r,s){return super.deserializeResponse(t,r,s)}async handleError(t,r,s,n,o){let i=uE(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),l=n.Error?.message??n.Error?.Message??n.message??n.Message??"Unknown",u=me.for(a[1]).getErrorCtor(a)??Error,h=new u(l);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,C]of d.structIterator()){let v=C.getMergedTraits().xmlName??g,A=n.Error?.[v]??n[v];m[g]=this.codec.createDeserializer().readSchema(C,A)}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:l},m)}getDefaultContentType(){return"application/xml"}}});var XP=S(()=>{RP();vP();kP();MP();mu();LP();pu();eE();tE();FP();Qa();QP();cE();JP();hE();yu();mE();fE()});var Qr={};tt(Qr,{AWSSDKSigV4Signer:()=>pS,AwsEc2QueryProtocol:()=>dE,AwsJson1_0Protocol:()=>rE,AwsJson1_1Protocol:()=>sE,AwsJsonRpcProtocol:()=>ao,AwsQueryProtocol:()=>Ja,AwsRestJsonProtocol:()=>nE,AwsRestXmlProtocol:()=>gE,AwsSdkSigV4ASigner:()=>ja,AwsSdkSigV4Signer:()=>qt,AwsSmithyRpcV2CborProtocol:()=>JS,JsonCodec:()=>io,JsonShapeDeserializer:()=>Ka,JsonShapeSerializer:()=>Ya,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Wo,NODE_SIGV4A_CONFIG_OPTIONS:()=>LT,XmlCodec:()=>ec,XmlShapeDeserializer:()=>lo,XmlShapeSerializer:()=>Za,_toBool:()=>E3,_toNum:()=>_3,_toStr:()=>S3,awsExpectUnion:()=>w3,emitWarningIfUnsupportedVersion:()=>zo,getBearerTokenEnvKey:()=>Yl,loadRestJsonErrorCode:()=>oo,loadRestXmlErrorCode:()=>uE,parseJsonBody:()=>ei,parseJsonErrorBody:()=>ZS,parseXmlBody:()=>Xa,parseXmlErrorBody:()=>lE,resolveAWSSDKSigV4Config:()=>aP,resolveAwsSdkSigV4AConfig:()=>MT,resolveAwsSdkSigV4Config:()=>no,setCredentialFeature:()=>en,setFeature:()=>ET,setTokenFeature:()=>wT,state:()=>Kl,validateSigningProperties:()=>Go});var at=S(()=>{Fr();DS();XP()});var ri=w(ti=>{"use strict";var A3=(ve(),z(Gr)),T3=qr(),P3=ce(),Kr=(at(),z(Qr)),rI=void 0;function I3(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function N3(e){let t=A3.normalizeProvider(e.userAgentAppId??rI),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let s=await t();if(!I3(s)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof s!="string"?n?.warn("userAgentAppId must be a string or undefined."):s.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return s}})}var O3=/\d{12}\.ddb/;async function D3(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Kr.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?Kr.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):Kr.setFeature(e,"RETRY_MODE_STANDARD","E"):Kr.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let o=e.endpointV2;switch(String(o?.url?.hostname).match(O3)&&Kr.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Kr.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Kr.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Kr.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let o=n;o.accountId&&Kr.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))Kr.setFeature(e,i,a)}}var ZP="user-agent",yE="x-amz-user-agent",eI=" ",SE="/",k3=/[^!$%&'*+\-.^_`|~\w]/g,M3=/[^!$%&'*+\-.^_`|~\w#]/g,tI="-",L3=1024;function q3(e){let t="";for(let r in e){let s=e[r];if(t.length+s.length+1<=L3){t.length?t+=","+s:t+=s;continue}break}return t}var sI=e=>(t,r)=>async s=>{let{request:n}=s;if(!P3.HttpRequest.isInstance(n))return t(s);let{headers:o}=n,i=r?.userAgent?.map(_u)||[],a=(await e.defaultUserAgentProvider()).map(_u);await D3(r,e,s);let c=r;a.push(`m/${q3(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let d=e?.customUserAgent?.map(_u)||[],l=await e.userAgentAppId();l&&a.push(_u(["app",`${l}`]));let u=T3.getUserAgentPrefix(),h=(u?[u]:[]).concat([...a,...i,...d]).join(eI),m=[...a.filter(g=>g.startsWith("aws-sdk-")),...d].join(eI);return e.runtime!=="browser"?(m&&(o[yE]=o[yE]?`${o[ZP]} ${m}`:m),o[ZP]=h):o[yE]=h,t({...s,request:n})},_u=e=>{let t=e[0].split(SE).map(i=>i.replace(k3,tI)).join(SE),r=e[1]?.replace(M3,tI),s=t.indexOf(SE),n=t.substring(0,s),o=t.substring(s+1);return n==="api"&&(o=o.toLowerCase()),[n,o,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},nI={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},F3=e=>({applyToStack:t=>{t.add(sI(e),nI)}});ti.DEFAULT_UA_APP_ID=rI;ti.getUserAgentMiddlewareOptions=nI;ti.getUserAgentPlugin=F3;ti.resolveUserAgentConfig=N3;ti.userAgentMiddleware=sI});var oI=w(si=>{"use strict";var $3=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},U3=(e,t,r)=>{if(!(t in e))return;let s=parseInt(e[t],10);if(Number.isNaN(s))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return s};si.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(si.SelectorType||(si.SelectorType={}));si.booleanSelector=$3;si.numberSelector=U3});var ze=w(ut=>{"use strict";var dn=oI(),wu=it(),B3=Mr(),cI="AWS_USE_DUALSTACK_ENDPOINT",dI="use_dualstack_endpoint",H3=!1,j3={environmentVariableSelector:e=>dn.booleanSelector(e,cI,dn.SelectorType.ENV),configFileSelector:e=>dn.booleanSelector(e,dI,dn.SelectorType.CONFIG),default:!1},lI="AWS_USE_FIPS_ENDPOINT",uI="use_fips_endpoint",z3=!1,V3={environmentVariableSelector:e=>dn.booleanSelector(e,lI,dn.SelectorType.ENV),configFileSelector:e=>dn.booleanSelector(e,uI,dn.SelectorType.CONFIG),default:!1},G3=e=>{let{tls:t,endpoint:r,urlParser:s,useDualstackEndpoint:n}=e;return Object.assign(e,{tls:t??!0,endpoint:wu.normalizeProvider(typeof r=="string"?s(r):r),isCustomEndpoint:!0,useDualstackEndpoint:wu.normalizeProvider(n??!1)})},W3=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let n=await e.useDualstackEndpoint(),o=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:n,useFipsEndpoint:o})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},Q3=e=>{let t=wu.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:s,urlParser:n,tls:o}=e;return Object.assign(e,{tls:o??!0,endpoint:r?wu.normalizeProvider(typeof r=="string"?n(r):r):()=>W3({...e,useDualstackEndpoint:t,useFipsEndpoint:s}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},fI="AWS_REGION",pI="region",K3={environmentVariableSelector:e=>e[fI],configFileSelector:e=>e[pI],default:()=>{throw new Error("Region is missing")}},Y3={preferredFile:"credentials"},iI=new Set,J3=(e,t=B3.isValidHostLabel)=>{if(!iI.has(e)&&!t(e))if(e==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else iI.add(e)},mI=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),X3=e=>mI(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,Z3=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{let s=typeof t=="function"?await t():t,n=X3(s);return J3(n),n},useFipsEndpoint:async()=>{let s=typeof t=="string"?t:await t();return mI(s)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},aI=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:s})=>t===s.includes("fips")&&r===s.includes("dualstack"))?.hostname,eG=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),tG=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",rG=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:s})=>{if(t)return t;if(s){let n=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=e.match(n);if(o)return o[0].slice(1,-1)}},sG=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:s,regionHash:n,partitionHash:o})=>{let i=tG(e,{partitionHash:o}),a=e in n?e:o[i]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:r},d=aI(n[a]?.variants,c),l=aI(o[i]?.variants,c),u=eG(a,{regionHostname:d,partitionHostname:l});if(u===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let h=rG(u,{signingRegion:n[a]?.signingRegion,regionRegex:o[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:s,hostname:u,...h&&{signingRegion:h},...n[a]?.signingService&&{signingService:n[a].signingService}}};ut.CONFIG_USE_DUALSTACK_ENDPOINT=dI;ut.CONFIG_USE_FIPS_ENDPOINT=uI;ut.DEFAULT_USE_DUALSTACK_ENDPOINT=H3;ut.DEFAULT_USE_FIPS_ENDPOINT=z3;ut.ENV_USE_DUALSTACK_ENDPOINT=cI;ut.ENV_USE_FIPS_ENDPOINT=lI;ut.NODE_REGION_CONFIG_FILE_OPTIONS=Y3;ut.NODE_REGION_CONFIG_OPTIONS=K3;ut.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=j3;ut.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=V3;ut.REGION_ENV_NAME=fI;ut.REGION_INI_NAME=pI;ut.getRegionInfo=sG;ut.resolveCustomEndpointsConfig=G3;ut.resolveEndpointsConfig=Q3;ut.resolveRegionConfig=Z3});var Cs=w(bu=>{"use strict";var nG=ce(),hI="content-length";function gI(e){return t=>async r=>{let s=r.request;if(nG.HttpRequest.isInstance(s)){let{body:n,headers:o}=s;if(n&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(hI)===-1)try{let i=e(n);s.headers={...s.headers,[hI]:String(i)}}catch{}}return t({...r,request:s})}}var yI={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},oG=e=>({applyToStack:t=>{t.add(gI(e.bodyLengthChecker),yI)}});bu.contentLengthMiddleware=gI;bu.contentLengthMiddlewareOptions=yI;bu.getContentLengthPlugin=oG});var _E=w(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.getHomeDir=void 0;var iG=require("os"),aG=require("path"),EE={},cG=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",dG=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:s=`C:${aG.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${s}${r}`;let n=cG();return EE[n]||(EE[n]=(0,iG.homedir)()),EE[n]};Cu.getHomeDir=dG});var wE=w(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.getSSOTokenFilepath=void 0;var lG=require("crypto"),uG=require("path"),fG=_E(),pG=e=>{let r=(0,lG.createHash)("sha1").update(e).digest("hex");return(0,uG.join)((0,fG.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Ru.getSSOTokenFilepath=pG});var SI=w(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.getSSOTokenFromFile=ln.tokenIntercept=void 0;var mG=require("fs"),hG=wE(),{readFile:gG}=mG.promises;ln.tokenIntercept={};var yG=async e=>{if(ln.tokenIntercept[e])return ln.tokenIntercept[e];let t=(0,hG.getSSOTokenFilepath)(e),r=await gG(t,"utf8");return JSON.parse(r)};ln.getSSOTokenFromFile=yG});var EI=w(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.slurpFile=Jt.fileIntercept=Jt.filePromisesHash=void 0;var SG=require("fs"),{readFile:EG}=SG.promises;Jt.filePromisesHash={};Jt.fileIntercept={};var _G=(e,t)=>Jt.fileIntercept[e]!==void 0?Jt.fileIntercept[e]:((!Jt.filePromisesHash[e]||t?.ignoreCache)&&(Jt.filePromisesHash[e]=EG(e,"utf8")),Jt.filePromisesHash[e]);Jt.slurpFile=_G});var Ot=w(Ft=>{"use strict";var tc=_E(),_I=wE(),bE=SI(),vu=require("path"),xu=Gs(),rc=EI(),bI="AWS_PROFILE",CI="default",wG=e=>e.profile||process.env[bI]||CI,uo=".",bG=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(uo);return r===-1?!1:Object.values(xu.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,s])=>{let n=r.indexOf(uo),o=r.substring(0,n)===xu.IniSectionType.PROFILE?r.substring(n+1):r;return t[o]=s,t},{...e.default&&{default:e.default}}),CG="AWS_CONFIG_FILE",RI=()=>process.env[CG]||vu.join(tc.getHomeDir(),".aws","config"),RG="AWS_SHARED_CREDENTIALS_FILE",vG=()=>process.env[RG]||vu.join(tc.getHomeDir(),".aws","credentials"),xG=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,AG=["__proto__","profile __proto__"],CE=e=>{let t={},r,s;for(let n of e.split(/\r?\n/)){let o=n.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,s=void 0;let a=o.substring(1,o.length-1),c=xG.exec(a);if(c){let[,d,,l]=c;Object.values(xu.IniSectionType).includes(d)&&(r=[d,l].join(uo))}else r=a;if(AG.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[c,d]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(d==="")s=c;else{s&&n.trimStart()===n&&(s=void 0),t[r]=t[r]||{};let l=s?[s,c].join(uo):c;t[r][l]=d}}}}return t},wI=()=>({}),vI=async(e={})=>{let{filepath:t=vG(),configFilepath:r=RI()}=e,s=tc.getHomeDir(),n="~/",o=t;t.startsWith(n)&&(o=vu.join(s,t.slice(2)));let i=r;r.startsWith(n)&&(i=vu.join(s,r.slice(2)));let a=await Promise.all([rc.slurpFile(i,{ignoreCache:e.ignoreCache}).then(CE).then(bG).catch(wI),rc.slurpFile(o,{ignoreCache:e.ignoreCache}).then(CE).catch(wI)]);return{configFile:a[0],credentialsFile:a[1]}},TG=e=>Object.entries(e).filter(([t])=>t.startsWith(xu.IniSectionType.SSO_SESSION+uo)).reduce((t,[r,s])=>({...t,[r.substring(r.indexOf(uo)+1)]:s}),{}),PG=()=>({}),IG=async(e={})=>rc.slurpFile(e.configFilepath??RI()).then(CE).then(TG).catch(PG),NG=(...e)=>{let t={};for(let r of e)for(let[s,n]of Object.entries(r))t[s]!==void 0?Object.assign(t[s],n):t[s]=n;return t},OG=async e=>{let t=await vI(e);return NG(t.configFile,t.credentialsFile)},DG={getFileRecord(){return rc.fileIntercept},interceptFile(e,t){rc.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return bE.tokenIntercept},interceptToken(e,t){bE.tokenIntercept[e]=t}};Object.defineProperty(Ft,"getSSOTokenFromFile",{enumerable:!0,get:function(){return bE.getSSOTokenFromFile}});Ft.CONFIG_PREFIX_SEPARATOR=uo;Ft.DEFAULT_PROFILE=CI;Ft.ENV_PROFILE=bI;Ft.externalDataInterceptor=DG;Ft.getProfileName=wG;Ft.loadSharedConfigFiles=vI;Ft.loadSsoSessionData=IG;Ft.parseKnownFiles=OG;Object.keys(tc).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ft,e)&&Object.defineProperty(Ft,e,{enumerable:!0,get:function(){return tc[e]}})});Object.keys(_I).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ft,e)&&Object.defineProperty(Ft,e,{enumerable:!0,get:function(){return _I[e]}})})});var $t=w(TI=>{"use strict";var sc=xe(),xI=Ot();function AI(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var kG=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new sc.CredentialsProviderError(r.message||`Not found in ENV: ${AI(e.toString())}`,{logger:t?.logger})}},MG=(e,{preferredFile:t="config",...r}={})=>async()=>{let s=xI.getProfileName(r),{configFile:n,credentialsFile:o}=await xI.loadSharedConfigFiles(r),i=o[s]||{},a=n[s]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let l=e(c,t==="config"?n:o);if(l===void 0)throw new Error;return l}catch(d){throw new sc.CredentialsProviderError(d.message||`Not found in config files w/ profile [${s}]: ${AI(e.toString())}`,{logger:r.logger})}},LG=e=>typeof e=="function",qG=e=>LG(e)?async()=>await e():sc.fromStatic(e),FG=({environmentVariableSelector:e,configFileSelector:t,default:r},s={})=>{let{signingName:n,logger:o}=s,i={signingName:n,logger:o};return sc.memoize(sc.chain(kG(e,i),MG(t,s),qG(r)))};TI.loadConfig=FG});var OI=w(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.getEndpointUrlConfig=void 0;var PI=Ot(),II="AWS_ENDPOINT_URL",NI="endpoint_url",$G=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(o=>o.toUpperCase()),s=t[[II,...r].join("_")];if(s)return s;let n=t[II];if(n)return n},configFileSelector:(t,r)=>{if(r&&t.services){let n=r[["services",t.services].join(PI.CONFIG_PREFIX_SEPARATOR)];if(n){let o=e.split(" ").map(a=>a.toLowerCase()),i=n[[o.join("_"),NI].join(PI.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let s=t[NI];if(s)return s},default:void 0});Au.getEndpointUrlConfig=$G});var DI=w(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.getEndpointFromConfig=void 0;var UG=$t(),BG=OI(),HG=async e=>(0,UG.loadConfig)((0,BG.getEndpointUrlConfig)(e??""))();Tu.getEndpointFromConfig=HG});var Dt=w(Rs=>{"use strict";var MI=DI(),kI=or(),jG=(ve(),z(Gr)),Pu=it(),zG=nr(),VG=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),YG(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!KG(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},GG=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,WG=/(\d+\.){3}\d+/,QG=/\.\./,KG=e=>GG.test(e)&&!WG.test(e)&&!QG.test(e),YG=e=>{let[t,r,s,,,n]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,i=!!(o&&r&&s&&n);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},JG=(e,t,r)=>{let s=async()=>{let n=r[e]??r[t];return typeof n=="function"?n():n};return e==="credentialScope"||t==="CredentialScope"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return n?.credentialScope??n?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return n?.accountId??n?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let n=await s();if(n&&typeof n=="object"){if("url"in n)return n.url.href;if("hostname"in n){let{protocol:o,hostname:i,port:a,path:c}=n;return`${o}//${i}${a?":"+a:""}${c}`}}return n}:s},RE=e=>typeof e=="object"?"url"in e?kI.parseUrl(e.url):e:kI.parseUrl(e),LI=async(e,t,r,s)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await MI.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(RE(i)),r.isCustomEndpoint=!0)}let n=await qI(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,s)},qI=async(e,t,r)=>{let s={},n=t?.getEndpointParameterInstructions?.()||{};for(let[o,i]of Object.entries(n))switch(i.type){case"staticContextParams":s[o]=i.value;break;case"contextParams":s[o]=e[i.name];break;case"clientContextParams":case"builtInParams":s[o]=await JG(i.name,o,r)();break;case"operationContextParams":s[o]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(n).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await VG(s),s},FI=({config:e,instructions:t})=>(r,s)=>async n=>{e.isCustomEndpoint&&jG.setFeature(s,"ENDPOINT_OVERRIDE","N");let o=await LI(n.input,{getEndpointParameterInstructions(){return t}},{...e},s);s.endpointV2=o,s.authSchemes=o.properties?.authSchemes;let i=s.authSchemes?.[0];if(i){s.signing_region=i.signingRegion,s.signing_service=i.signingName;let c=Pu.getSmithyContext(s)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...n})},$I={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:zG.serializerMiddlewareOption.name},XG=(e,t)=>({applyToStack:r=>{r.addRelativeTo(FI({config:e,instructions:t}),$I)}}),ZG=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:s,useFipsEndpoint:n}=e,o=r!=null?async()=>RE(await Pu.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:o,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Pu.normalizeProvider(s??!1),useFipsEndpoint:Pu.normalizeProvider(n??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!c&&(c=MI.getEndpointFromConfig(e.serviceId)),c),a},e6=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};Rs.endpointMiddleware=FI;Rs.endpointMiddlewareOptions=$I;Rs.getEndpointFromInstructions=LI;Rs.getEndpointPlugin=XG;Rs.resolveEndpointConfig=ZG;Rs.resolveEndpointRequiredConfig=e6;Rs.resolveParams=qI;Rs.toEndpointV1=RE});var xE=w(un=>{"use strict";var t6=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],r6=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],s6=["TimeoutError","RequestTimeout","RequestTimeoutException"],n6=[500,502,503,504],o6=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],i6=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],UI=e=>e?.$retryable!==void 0,a6=e=>t6.includes(e.name),BI=e=>e.$metadata?.clockSkewCorrected,HI=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},c6=e=>e.$metadata?.httpStatusCode===429||r6.includes(e.name)||e.$retryable?.throttling==!0,vE=(e,t=0)=>UI(e)||BI(e)||s6.includes(e.name)||o6.includes(e?.code||"")||i6.includes(e?.code||"")||n6.includes(e.$metadata?.httpStatusCode||0)||HI(e)||e.cause!==void 0&&t<=10&&vE(e.cause,t+1),d6=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!vE(e)}return!1};un.isBrowserNetworkError=HI;un.isClockSkewCorrectedError=BI;un.isClockSkewError=a6;un.isRetryableByTrait=UI;un.isServerError=d6;un.isThrottlingError=c6;un.isTransientError=vE});var Yr=w(Ve=>{"use strict";var l6=xE();Ve.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Ve.RETRY_MODES||(Ve.RETRY_MODES={}));var AE=3,u6=Ve.RETRY_MODES.STANDARD,Iu=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>e.setTimeoutFn(s,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),l6.isThrottlingError(t)){let n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let s=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let s=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},nc=100,NE=20*1e3,zI=500,TE=500,VI=5,GI=10,WI=1,f6="amz-sdk-invocation-id",p6="amz-sdk-request",m6=()=>{let e=nc;return{computeNextBackoffDelay:s=>Math.floor(Math.min(NE,Math.random()*2**s*e)),setDelayBase:s=>{e=s}}},jI=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(NE,e),getRetryCost:()=>r}),oc=class{maxAttempts;mode=Ve.RETRY_MODES.STANDARD;capacity=TE;retryBackoffStrategy=m6();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return jI({retryDelay:nc,retryCount:0})}async refreshRetryTokenForRetry(t,r){let s=await this.getMaxAttempts();if(this.shouldRetry(t,r,s)){let n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?zI:nc);let o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(n);return this.capacity-=a,jI({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(TE,this.capacity+(t.getRetryCost()??WI))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${AE}`),AE}}shouldRetry(t,r,s){return t.getRetryCount()+1<s&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?GI:VI}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},PE=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Ve.RETRY_MODES.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:s}=r??{};this.rateLimiter=s??new Iu,this.standardRetryStrategy=new oc(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},IE=class extends oc{computeNextBackoffDelay;constructor(t,r=nc){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let s=await super.refreshRetryTokenForRetry(t,r);return s.getRetryDelay=()=>this.computeNextBackoffDelay(s.getRetryCount()),s}};Ve.AdaptiveRetryStrategy=PE;Ve.ConfiguredRetryStrategy=IE;Ve.DEFAULT_MAX_ATTEMPTS=AE;Ve.DEFAULT_RETRY_DELAY_BASE=nc;Ve.DEFAULT_RETRY_MODE=u6;Ve.DefaultRateLimiter=Iu;Ve.INITIAL_RETRY_TOKENS=TE;Ve.INVOCATION_ID_HEADER=f6;Ve.MAXIMUM_RETRY_DELAY=NE;Ve.NO_RETRY_INCREMENT=WI;Ve.REQUEST_HEADER=p6;Ve.RETRY_COST=VI;Ve.StandardRetryStrategy=oc;Ve.THROTTLING_RETRY_DELAY_BASE=zI;Ve.TIMEOUT_RETRY_COST=GI});var QI=w(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.isStreamingPayload=void 0;var h6=require("stream"),g6=e=>e?.body instanceof h6.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;Nu.isStreamingPayload=g6});var ft=w(st=>{"use strict";var Me=Yr(),ni=ce(),fn=xE(),YI=Cy(),KI=it(),y6=F(),S6=QI(),E6=(e,t)=>{let r=e,s=Me.NO_RETRY_INCREMENT,n=Me.RETRY_COST,o=Me.TIMEOUT_RETRY_COST,i=e,a=u=>u.name==="TimeoutError"?o:n,c=u=>a(u)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:u=>{if(!c(u))throw new Error("No retry token available");let h=a(u);return i-=h,h},releaseRetryTokens:u=>{i+=u??s,i=Math.min(i,r)}})},JI=(e,t)=>Math.floor(Math.min(Me.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),XI=e=>e?fn.isRetryableByTrait(e)||fn.isClockSkewError(e)||fn.isThrottlingError(e)||fn.isTransientError(e):!1,ZI=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Ou=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=Me.RETRY_MODES.STANDARD;constructor(t,r){this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??XI,this.delayDecider=r?.delayDecider??JI,this.retryQuota=r?.retryQuota??E6(Me.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,s){return r<s&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=Me.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,s){let n,o=0,i=0,a=await this.getMaxAttempts(),{request:c}=r;for(ni.HttpRequest.isInstance(c)&&(c.headers[Me.INVOCATION_ID_HEADER]=YI.v4());;)try{ni.HttpRequest.isInstance(c)&&(c.headers[Me.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),s?.beforeRequest&&await s.beforeRequest();let{response:d,output:l}=await t(r);return s?.afterRequest&&s.afterRequest(d),this.retryQuota.releaseRetryTokens(n),l.$metadata.attempts=o+1,l.$metadata.totalRetryDelay=i,{response:d,output:l}}catch(d){let l=ZI(d);if(o++,this.shouldRetry(l,o,a)){n=this.retryQuota.retrieveRetryTokens(l);let u=this.delayDecider(fn.isThrottlingError(l)?Me.THROTTLING_RETRY_DELAY_BASE:Me.DEFAULT_RETRY_DELAY_BASE,o),h=_6(l.$response),m=Math.max(h||0,u);i+=m,await new Promise(g=>setTimeout(g,m));continue}throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=o,l.$metadata.totalRetryDelay=i,l}}},_6=e=>{if(!ni.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],s=Number(r);return Number.isNaN(s)?new Date(r).getTime()-Date.now():s*1e3},OE=class extends Ou{rateLimiter;constructor(t,r){let{rateLimiter:s,...n}=r??{};super(t,n),this.rateLimiter=s??new Me.DefaultRateLimiter,this.mode=Me.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:s=>{this.rateLimiter.updateClientSendingRate(s)}})}},DE="AWS_MAX_ATTEMPTS",kE="max_attempts",w6={environmentVariableSelector:e=>{let t=e[DE];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${DE} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[kE];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${kE} mast be a number, got "${t}"`);return r},default:Me.DEFAULT_MAX_ATTEMPTS},b6=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:s}=e,n=KI.normalizeProvider(s??Me.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:n,retryStrategy:async()=>t||(await KI.normalizeProvider(r)()===Me.RETRY_MODES.ADAPTIVE?new Me.AdaptiveRetryStrategy(n):new Me.StandardRetryStrategy(n))})},e0="AWS_RETRY_MODE",t0="retry_mode",C6={environmentVariableSelector:e=>e[e0],configFileSelector:e=>e[t0],default:Me.DEFAULT_RETRY_MODE},r0=()=>e=>async t=>{let{request:r}=t;return ni.HttpRequest.isInstance(r)&&(delete r.headers[Me.INVOCATION_ID_HEADER],delete r.headers[Me.REQUEST_HEADER]),e(t)},s0={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},R6=e=>({applyToStack:t=>{t.addRelativeTo(r0(),s0)}}),n0=e=>(t,r)=>async s=>{let n=await e.retryStrategy(),o=await e.maxAttempts();if(v6(n)){n=n;let i=await n.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:l}=s,u=ni.HttpRequest.isInstance(l);for(u&&(l.headers[Me.INVOCATION_ID_HEADER]=YI.v4());;)try{u&&(l.headers[Me.REQUEST_HEADER]=`attempt=${c+1}; max=${o}`);let{response:h,output:m}=await t(s);return n.recordSuccess(i),m.$metadata.attempts=c+1,m.$metadata.totalRetryDelay=d,{response:h,output:m}}catch(h){let m=x6(h);if(a=ZI(h),u&&S6.isStreamingPayload(l))throw(r.logger instanceof y6.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await n.refreshRetryTokenForRetry(i,m)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let g=i.getRetryDelay();d+=g,await new Promise(C=>setTimeout(C,g))}}else return n=n,n?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(t,s)},v6=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",x6=e=>{let t={error:e,errorType:A6(e)},r=i0(e.$response);return r&&(t.retryAfterHint=r),t},A6=e=>fn.isThrottlingError(e)?"THROTTLING":fn.isTransientError(e)?"TRANSIENT":fn.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",o0={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},T6=e=>({applyToStack:t=>{t.add(n0(e),o0)}}),i0=e=>{if(!ni.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],s=Number(r);return Number.isNaN(s)?new Date(r):new Date(s*1e3)};st.AdaptiveRetryStrategy=OE;st.CONFIG_MAX_ATTEMPTS=kE;st.CONFIG_RETRY_MODE=t0;st.ENV_MAX_ATTEMPTS=DE;st.ENV_RETRY_MODE=e0;st.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=w6;st.NODE_RETRY_MODE_CONFIG_OPTIONS=C6;st.StandardRetryStrategy=Ou;st.defaultDelayDecider=JI;st.defaultRetryDecider=XI;st.getOmitRetryHeadersPlugin=R6;st.getRetryAfterHint=i0;st.getRetryPlugin=T6;st.omitRetryHeadersMiddleware=r0;st.omitRetryHeadersMiddlewareOptions=s0;st.resolveRetryConfig=b6;st.retryMiddleware=n0;st.retryMiddlewareOptions=o0});var LE=w(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.resolveHttpAuthSchemeConfig=pn.defaultSQSHttpAuthSchemeProvider=pn.defaultSQSHttpAuthSchemeParametersProvider=void 0;var P6=(at(),z(Qr)),ME=it(),I6=async(e,t,r)=>({operation:(0,ME.getSmithyContext)(t).operation,region:await(0,ME.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});pn.defaultSQSHttpAuthSchemeParametersProvider=I6;function N6(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sqs",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var O6=e=>{let t=[];switch(e.operation){default:t.push(N6(e))}return t};pn.defaultSQSHttpAuthSchemeProvider=O6;var D6=e=>{let t=(0,P6.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,ME.normalizeProvider)(e.authSchemePreference??[])})};pn.resolveHttpAuthSchemeConfig=D6});var a0=w((Jhe,k6)=>{k6.exports={name:"@aws-sdk/client-sqs",description:"AWS SDK for JavaScript Sqs Client for Node.js, Browser and React Native",version:"3.922.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sqs","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sqs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.922.0","@aws-sdk/credential-provider-node":"3.922.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-sdk-sqs":"3.922.0","@aws-sdk/middleware-user-agent":"3.922.0","@aws-sdk/region-config-resolver":"3.922.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.922.0","@smithy/config-resolver":"^4.4.1","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/md5-js":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.7","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sqs",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sqs"}}});var qE=w(mn=>{"use strict";var M6=(Fr(),z(tn)),L6=xe(),c0="AWS_ACCESS_KEY_ID",d0="AWS_SECRET_ACCESS_KEY",l0="AWS_SESSION_TOKEN",u0="AWS_CREDENTIAL_EXPIRATION",f0="AWS_CREDENTIAL_SCOPE",p0="AWS_ACCOUNT_ID",q6=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[c0],r=process.env[d0],s=process.env[l0],n=process.env[u0],o=process.env[f0],i=process.env[p0];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...s&&{sessionToken:s},...n&&{expiration:new Date(n)},...o&&{credentialScope:o},...i&&{accountId:i}};return M6.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new L6.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};mn.ENV_ACCOUNT_ID=p0;mn.ENV_CREDENTIAL_SCOPE=f0;mn.ENV_EXPIRATION=u0;mn.ENV_KEY=c0;mn.ENV_SECRET=d0;mn.ENV_SESSION=l0;mn.fromEnv=q6});var hn=w(Ct=>{"use strict";var Jr=xe(),F6=require("url"),$6=require("buffer"),U6=require("http"),HE=$t(),B6=or();function ic(e){return new Promise((t,r)=>{let s=U6.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});s.on("error",n=>{r(Object.assign(new Jr.ProviderError("Unable to connect to instance metadata service"),n)),s.destroy()}),s.on("timeout",()=>{r(new Jr.ProviderError("TimeoutError from instance metadata service")),s.destroy()}),s.on("response",n=>{let{statusCode:o=400}=n;(o<200||300<=o)&&(r(Object.assign(new Jr.ProviderError("Error response received from instance metadata service"),{statusCode:o})),s.destroy());let i=[];n.on("data",a=>{i.push(a)}),n.on("end",()=>{t($6.Buffer.concat(i)),s.destroy()})}),s.end()})}var y0=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",S0=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),E0=1e3,_0=0,jE=({maxRetries:e=_0,timeout:t=E0})=>({maxRetries:e,timeout:t}),$E=(e,t)=>{let r=e();for(let s=0;s<t;s++)r=r.catch(e);return r},Du="AWS_CONTAINER_CREDENTIALS_FULL_URI",ku="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",UE="AWS_CONTAINER_AUTHORIZATION_TOKEN",H6=(e={})=>{let{timeout:t,maxRetries:r}=jE(e);return()=>$E(async()=>{let s=await W6({logger:e.logger}),n=JSON.parse(await j6(t,s));if(!y0(n))throw new Jr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return S0(n)},r)},j6=async(e,t)=>(process.env[UE]&&(t.headers={...t.headers,Authorization:process.env[UE]}),(await ic({...t,timeout:e})).toString()),z6="169.254.170.2",V6={localhost:!0,"127.0.0.1":!0},G6={"http:":!0,"https:":!0},W6=async({logger:e})=>{if(process.env[ku])return{hostname:z6,path:process.env[ku]};if(process.env[Du]){let t=F6.parse(process.env[Du]);if(!t.hostname||!(t.hostname in V6))throw new Jr.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in G6))throw new Jr.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Jr.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${ku} or ${Du} environment variable is set`,{tryNextLink:!1,logger:e})},BE=class e extends Jr.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r),this.tryNextLink=r,Object.setPrototypeOf(this,e.prototype)}};Ct.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(Ct.Endpoint||(Ct.Endpoint={}));var Q6="AWS_EC2_METADATA_SERVICE_ENDPOINT",K6="ec2_metadata_service_endpoint",Y6={environmentVariableSelector:e=>e[Q6],configFileSelector:e=>e[K6],default:void 0},oi;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(oi||(oi={}));var J6="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",X6="ec2_metadata_service_endpoint_mode",Z6={environmentVariableSelector:e=>e[J6],configFileSelector:e=>e[X6],default:oi.IPv4},w0=async()=>B6.parseUrl(await eW()||await tW()),eW=async()=>HE.loadConfig(Y6)(),tW=async()=>{let e=await HE.loadConfig(Z6)();switch(e){case oi.IPv4:return Ct.Endpoint.IPv4;case oi.IPv6:return Ct.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(oi)}`)}},rW=300,sW=300,nW="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",m0=(e,t)=>{let r=rW+Math.floor(Math.random()*sW),s=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(s)}.
For more information, please visit: `+nW);let n=e.originalExpiration??e.expiration;return{...e,...n?{originalExpiration:n}:{},expiration:s}},oW=(e,t={})=>{let r=t?.logger||console,s;return async()=>{let n;try{n=await e(),n.expiration&&n.expiration.getTime()<Date.now()&&(n=m0(n,r))}catch(o){if(s)r.warn("Credential renew failed: ",o),n=m0(s,r);else throw o}return s=n,n}},b0="/latest/meta-data/iam/security-credentials/",iW="/latest/api/token",FE="AWS_EC2_METADATA_V1_DISABLED",h0="ec2_metadata_v1_disabled",g0="x-aws-ec2-metadata-token",aW=(e={})=>oW(cW(e),{logger:e.logger}),cW=(e={})=>{let t=!1,{logger:r,profile:s}=e,{timeout:n,maxRetries:o}=jE(e),i=async(a,c)=>{if(t||c.headers?.[g0]==null){let u=!1,h=!1,m=await HE.loadConfig({environmentVariableSelector:g=>{let C=g[FE];if(h=!!C&&C!=="false",C===void 0)throw new Jr.CredentialsProviderError(`${FE} not set in env, checking config file next.`,{logger:e.logger});return h},configFileSelector:g=>{let C=g[h0];return u=!!C&&C!=="false",u},default:!1},{profile:s})();if(e.ec2MetadataV1Disabled||m){let g=[];throw e.ec2MetadataV1Disabled&&g.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),u&&g.push(`config file profile (${h0})`),h&&g.push(`process environment variable (${FE})`),new BE(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${g.join(", ")}].`)}}let l=(await $E(async()=>{let u;try{u=await lW(c)}catch(h){throw h.statusCode===401&&(t=!1),h}return u},a)).trim();return $E(async()=>{let u;try{u=await uW(l,c,e)}catch(h){throw h.statusCode===401&&(t=!1),h}return u},a)};return async()=>{let a=await w0();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(o,{...a,timeout:n});{let c;try{c=(await dW({...a,timeout:n})).toString()}catch(d){if(d?.statusCode===400)throw Object.assign(d,{message:"EC2 Metadata token request returned error"});return(d.message==="TimeoutError"||[403,404,405].includes(d.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(o,{...a,timeout:n})}return i(o,{...a,headers:{[g0]:c},timeout:n})}}},dW=async e=>ic({...e,path:iW,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),lW=async e=>(await ic({...e,path:b0})).toString(),uW=async(e,t,r)=>{let s=JSON.parse((await ic({...t,path:b0+e})).toString());if(!y0(s))throw new Jr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return S0(s)};Ct.DEFAULT_MAX_RETRIES=_0;Ct.DEFAULT_TIMEOUT=E0;Ct.ENV_CMDS_AUTH_TOKEN=UE;Ct.ENV_CMDS_FULL_URI=Du;Ct.ENV_CMDS_RELATIVE_URI=ku;Ct.fromContainerMetadata=H6;Ct.fromInstanceMetadata=aW;Ct.getInstanceMetadataEndpoint=w0;Ct.httpRequest=ic;Ct.providerConfigFromInit=jE});var C0=w(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.checkUrl=void 0;var fW=xe(),pW="169.254.170.2",mW="169.254.170.23",hW="[fd00:ec2::23]",gW=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===pW||e.hostname===mW||e.hostname===hW)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),s=n=>{let o=parseInt(n,10);return 0<=o&&o<=255};if(r[0]==="127"&&s(r[1])&&s(r[2])&&s(r[3])&&r.length===4)return}throw new fW.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};Mu.checkUrl=gW});var R0=w(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.createGetRequest=_W;Lu.getCredentials=wW;var zE=xe(),yW=ce(),SW=F(),EW=Ra();function _W(e){return new yW.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,s])=>(t[r]=s,t),{}),fragment:e.hash})}async function wW(e,t){let s=await(0,EW.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let n=JSON.parse(s);if(typeof n.AccessKeyId!="string"||typeof n.SecretAccessKey!="string"||typeof n.Token!="string"||typeof n.Expiration!="string")throw new zE.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:(0,SW.parseRfc3339DateTime)(n.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let n={};try{n=JSON.parse(s)}catch{}throw Object.assign(new zE.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:n.Code,Message:n.Message})}throw new zE.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var v0=w(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.retryWrapper=void 0;var bW=(e,t,r)=>async()=>{for(let s=0;s<t;++s)try{return await e()}catch{await new Promise(o=>setTimeout(o,r))}return await e()};qu.retryWrapper=bW});var T0=w(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.fromHttp=void 0;var CW=(Xs(),z(Js)),RW=(Fr(),z(tn)),vW=sr(),x0=xe(),xW=CW.__importDefault(require("fs/promises")),AW=C0(),A0=R0(),TW=v0(),PW="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",IW="http://169.254.170.2",NW="AWS_CONTAINER_CREDENTIALS_FULL_URI",OW="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",DW="AWS_CONTAINER_AUTHORIZATION_TOKEN",kW=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[PW],s=e.awsContainerCredentialsFullUri??process.env[NW],n=e.awsContainerAuthorizationToken??process.env[DW],o=e.awsContainerAuthorizationTokenFile??process.env[OW],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),n&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),s)t=s;else if(r)t=`${IW}${r}`;else throw new x0.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,AW.checkUrl)(a,e.logger);let c=vW.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,TW.retryWrapper)(async()=>{let d=(0,A0.createGetRequest)(a);n?d.headers.Authorization=n:o&&(d.headers.Authorization=(await xW.default.readFile(o)).toString());try{let l=await c.handle(d);return(0,A0.getCredentials)(l.response).then(u=>(0,RW.setCredentialFeature)(u,"CREDENTIALS_HTTP","z"))}catch(l){throw new x0.CredentialsProviderError(String(l),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};Fu.fromHttp=kW});var VE=w($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.fromHttp=void 0;var MW=T0();Object.defineProperty($u,"fromHttp",{enumerable:!0,get:function(){return MW.fromHttp}})});function LW(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function qW(e){return{schemeId:"smithy.api#noAuth"}}var ac,P0,I0,N0,GE=S(()=>{at();ac=y(it()),P0=async(e,t,r)=>({operation:(0,ac.getSmithyContext)(t).operation,region:await(0,ac.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});I0=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(qW(e));break}default:t.push(LW(e))}return t},N0=e=>{let t=no(e);return Object.assign(t,{authSchemePreference:(0,ac.normalizeProvider)(e.authSchemePreference??[])})}});var O0,D0,WE=S(()=>{O0=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),D0={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Uu,QE=S(()=>{Uu={name:"@aws-sdk/nested-clients",version:"3.922.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.922.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.922.0","@aws-sdk/region-config-resolver":"3.922.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.922.0","@smithy/config-resolver":"^4.4.1","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.7","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var cc=w(fo=>{"use strict";var k0=require("os"),KE=require("process"),$W=ri(),M0={isCrtAvailable:!1},UW=()=>M0.isCrtAvailable?["md/crt-avail"]:null,L0=({serviceId:e,clientVersion:t})=>async r=>{let s=[["aws-sdk-js",t],["ua","2.1"],[`os/${k0.platform()}`,k0.release()],["lang/js"],["md/nodejs",`${KE.versions.node}`]],n=UW();n&&s.push(n),e&&s.push([`api/${e}`,t]),KE.env.AWS_EXECUTION_ENV&&s.push([`exec-env/${KE.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...s,[`app/${o}`]]:[...s]},BW=L0,q0="AWS_SDK_UA_APP_ID",F0="sdk_ua_app_id",HW="sdk-ua-app-id",jW={environmentVariableSelector:e=>e[q0],configFileSelector:e=>e[F0]??e[HW],default:$W.DEFAULT_UA_APP_ID};fo.NODE_APP_ID_CONFIG_OPTIONS=jW;fo.UA_APP_ID_ENV_NAME=q0;fo.UA_APP_ID_INI_NAME=F0;fo.createDefaultUserAgentProvider=L0;fo.crtAvailability=M0;fo.defaultUserAgent=BW});var vs=w(B0=>{"use strict";var YE=Do(),zW=Te(),VW=require("buffer"),$0=require("crypto"),JE=class{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(zW.toUint8Array(U0(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?$0.createHmac(this.algorithmIdentifier,U0(this.secret)):$0.createHash(this.algorithmIdentifier)}};function U0(e,t){return VW.Buffer.isBuffer(e)?e:typeof e=="string"?YE.fromString(e,t):ArrayBuffer.isView(e)?YE.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):YE.fromArrayBuffer(e)}B0.Hash=JE});var xs=w(H0=>{"use strict";var XE=require("node:fs"),GW=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof XE.ReadStream){if(e.path!=null)return XE.lstatSync(e.path).size;if(typeof e.fd=="number")return XE.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};H0.calculateBodyLength=GW});var X0,dr,j0,dc,ii,ai,As,ZE,e_,z0,V0,G0,Z0,eN,cr,W0,tN,Q0,K0,Y0,J0,WW,rN,sN=S(()=>{X0="required",dr="argv",j0="isSet",dc="booleanEquals",ii="error",ai="endpoint",As="tree",ZE="PartitionResult",e_="getAttr",z0={[X0]:!1,type:"string"},V0={[X0]:!0,default:!1,type:"boolean"},G0={ref:"Endpoint"},Z0={fn:dc,[dr]:[{ref:"UseFIPS"},!0]},eN={fn:dc,[dr]:[{ref:"UseDualStack"},!0]},cr={},W0={fn:e_,[dr]:[{ref:ZE},"supportsFIPS"]},tN={ref:ZE},Q0={fn:dc,[dr]:[!0,{fn:e_,[dr]:[tN,"supportsDualStack"]}]},K0=[Z0],Y0=[eN],J0=[{ref:"Region"}],WW={version:"1.0",parameters:{Region:z0,UseDualStack:V0,UseFIPS:V0,Endpoint:z0},rules:[{conditions:[{fn:j0,[dr]:[G0]}],rules:[{conditions:K0,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ii},{conditions:Y0,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ii},{endpoint:{url:G0,properties:cr,headers:cr},type:ai}],type:As},{conditions:[{fn:j0,[dr]:J0}],rules:[{conditions:[{fn:"aws.partition",[dr]:J0,assign:ZE}],rules:[{conditions:[Z0,eN],rules:[{conditions:[{fn:dc,[dr]:[!0,W0]},Q0],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:cr,headers:cr},type:ai}],type:As},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ii}],type:As},{conditions:K0,rules:[{conditions:[{fn:dc,[dr]:[W0,!0]}],rules:[{conditions:[{fn:"stringEquals",[dr]:[{fn:e_,[dr]:[tN,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:cr,headers:cr},type:ai},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:cr,headers:cr},type:ai}],type:As},{error:"FIPS is enabled but this partition does not support FIPS",type:ii}],type:As},{conditions:Y0,rules:[{conditions:[Q0],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:cr,headers:cr},type:ai}],type:As},{error:"DualStack is enabled but this partition does not support DualStack",type:ii}],type:As},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:cr,headers:cr},type:ai}],type:As}],type:As},{error:"Invalid Configuration: Missing Region",type:ii}]},rN=WW});var nN,ci,QW,oN,iN=S(()=>{nN=y(qr()),ci=y(Mr());sN();QW=new ci.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),oN=(e,t={})=>QW.get(e,()=>(0,ci.resolveEndpoint)(rN,{endpointParams:e,logger:t.logger}));ci.customEndpointFunctions.aws=nN.awsEndpointFunctions});var aN,cN,Bu,Hu,dN,lN=S(()=>{at();ve();aN=y(F()),cN=y(or()),Bu=y(Ae()),Hu=y(Te());GE();iN();dN=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Bu.fromBase64,base64Encoder:e?.base64Encoder??Bu.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??oN,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??I0,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new qt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Nt}],logger:e?.logger??new aN.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??cN.parseUrl,utf8Decoder:e?.utf8Decoder??Hu.fromUtf8,utf8Encoder:e?.utf8Encoder??Hu.toUtf8})});var Ts=w(mN=>{"use strict";var KW=ze(),uN=$t(),YW=xe(),JW="AWS_EXECUTION_ENV",fN="AWS_REGION",pN="AWS_DEFAULT_REGION",XW="AWS_EC2_METADATA_DISABLED",ZW=["in-region","cross-region","mobile","standard","legacy"],eQ="/latest/meta-data/placement/region",tQ="AWS_DEFAULTS_MODE",rQ="defaults_mode",sQ={environmentVariableSelector:e=>e[tQ],configFileSelector:e=>e[rQ],default:"legacy"},nQ=({region:e=uN.loadConfig(KW.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=uN.loadConfig(sQ)}={})=>YW.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return oQ(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${ZW.join(", ")}, got ${r}`)}}),oQ=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await iQ();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},iQ=async()=>{if(process.env[JW]&&(process.env[fN]||process.env[pN]))return process.env[fN]??process.env[pN];if(!process.env[XW])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>y(hn())),r=await e();return(await t({...r,path:eQ})).toString()}catch{}};mN.resolveDefaultsModeConfig=nQ});var ju,yn,hN,zu,gn,Vu,gN,yN,SN,EN,_N,wN,bN=S(()=>{QE();at();ju=y(cc()),yn=y(ze()),hN=y(vs()),zu=y(ft()),gn=y($t()),Vu=y(sr()),gN=y(xs()),yN=y(Yr());lN();SN=y(F()),EN=y(Ts()),_N=y(F()),wN=e=>{(0,_N.emitWarningIfUnsupportedVersion)(process.version);let t=(0,EN.resolveDefaultsModeConfig)(e),r=()=>t().then(SN.loadConfigsForDefaultMode),s=dN(e);zo(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,gn.loadConfig)(Wo,n),bodyLengthChecker:e?.bodyLengthChecker??gN.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,ju.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:Uu.version}),maxAttempts:e?.maxAttempts??(0,gn.loadConfig)(zu.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,gn.loadConfig)(yn.NODE_REGION_CONFIG_OPTIONS,{...yn.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:Vu.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,gn.loadConfig)({...zu.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||yN.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??hN.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Vu.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,gn.loadConfig)(yn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,gn.loadConfig)(yn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,gn.loadConfig)(ju.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var RN=w(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.warning=void 0;di.stsRegionDefaultResolver=cQ;var CN=ze(),aQ=$t();function cQ(e={}){return(0,aQ.loadConfig)({...CN.NODE_REGION_CONFIG_OPTIONS,async default(){return di.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...CN.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}di.warning={silence:!1}});var li=w(Xr=>{"use strict";var lc=ze(),vN=RN(),dQ=e=>({setRegion(t){e.region=t},region(){return e.region}}),lQ=e=>({region:e.region()});Object.defineProperty(Xr,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return lc.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Xr,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return lc.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Xr,"REGION_ENV_NAME",{enumerable:!0,get:function(){return lc.REGION_ENV_NAME}});Object.defineProperty(Xr,"REGION_INI_NAME",{enumerable:!0,get:function(){return lc.REGION_INI_NAME}});Object.defineProperty(Xr,"resolveRegionConfig",{enumerable:!0,get:function(){return lc.resolveRegionConfig}});Xr.getAwsRegionExtensionConfiguration=dQ;Xr.resolveAwsRegionExtensionConfiguration=lQ;Object.keys(vN).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xr,e)&&Object.defineProperty(Xr,e,{enumerable:!0,get:function(){return vN[e]}})})});var xN,AN,TN=S(()=>{xN=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},AN=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Gu,Wu,Qu,PN,IN=S(()=>{Gu=y(li()),Wu=y(ce()),Qu=y(F());TN();PN=(e,t)=>{let r=Object.assign((0,Gu.getAwsRegionExtensionConfiguration)(e),(0,Qu.getDefaultExtensionConfiguration)(e),(0,Wu.getHttpHandlerExtensionConfiguration)(e),xN(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,Gu.resolveAwsRegionExtensionConfiguration)(r),(0,Qu.resolveDefaultRuntimeConfig)(r),(0,Wu.resolveHttpHandlerRuntimeConfig)(r),AN(r))}});var Ku,NN,ON,Yu,DN,kN,MN,Ju,t_,uc,r_=S(()=>{Ku=y(ds()),NN=y(ls()),ON=y(us()),Yu=y(ri()),DN=y(ze());ve();kN=y(Cs()),MN=y(Dt()),Ju=y(ft()),t_=y(F());GE();WE();bN();IN();uc=class extends t_.Client{config;constructor(...[t]){let r=wN(t||{});super(r),this.initConfig=r;let s=O0(r),n=(0,Yu.resolveUserAgentConfig)(s),o=(0,Ju.resolveRetryConfig)(n),i=(0,DN.resolveRegionConfig)(o),a=(0,Ku.resolveHostHeaderConfig)(i),c=(0,MN.resolveEndpointConfig)(a),d=N0(c),l=PN(d,t?.extensions||[]);this.config=l,this.middlewareStack.use((0,Yu.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Ju.getRetryPlugin)(this.config)),this.middlewareStack.use((0,kN.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Ku.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,NN.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,ON.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(gs(this.config,{httpAuthSchemeParametersProvider:P0,identityProviderConfigProvider:async u=>new kr({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(ys(this.config))}destroy(){super.destroy()}}});var LN,ct,Xu=S(()=>{LN=y(F()),ct=class e extends LN.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var po,uQ,fc,pc,s_,n_,mc,hc,gc,yc,fQ,Sc,Ec,_c,wc,bc,Zu=S(()=>{po=y(F());Xu();uQ={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},fc=class e extends ct{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},pc=class e extends ct{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},s_=e=>({...e,...e.clientSecret&&{clientSecret:po.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:po.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:po.SENSITIVE_STRING}}),n_=e=>({...e,...e.accessToken&&{accessToken:po.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:po.SENSITIVE_STRING},...e.idToken&&{idToken:po.SENSITIVE_STRING}}),mc=class e extends ct{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},hc=class e extends ct{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},gc=class e extends ct{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},yc=class e extends ct{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},fQ={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},Sc=class e extends ct{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Ec=class e extends ct{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},_c=class e extends ct{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},wc=class e extends ct{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},bc=class e extends ct{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var M,qN,FN,pQ,mQ,hQ,gQ,yQ,SQ,EQ,_Q,wQ,bQ,CQ,RQ,vQ,lr,$N=S(()=>{at();ve();M=y(F());Zu();Xu();qN=async(e,t)=>{let r=eo(e,t),s={"content-type":"application/json"};r.bp("/token");let n;return n=JSON.stringify((0,M.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,M._json)(o)})),r.m("POST").h(s).b(n),r.build()},FN=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return pQ(e,t);let r=(0,M.map)({$metadata:lr(e)}),s=(0,M.expectNonNull)((0,M.expectObject)(await ei(e.body,t)),"body"),n=(0,M.take)(s,{accessToken:M.expectString,expiresIn:M.expectInt32,idToken:M.expectString,refreshToken:M.expectString,tokenType:M.expectString});return Object.assign(r,n),r},pQ=async(e,t)=>{let r={...e,body:await ZS(e.body,t)},s=oo(e,r.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await hQ(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await gQ(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await yQ(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await SQ(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await EQ(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await _Q(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await wQ(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await bQ(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await CQ(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await RQ(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await vQ(r,t);default:let n=r.body;return mQ({output:e,parsedBody:n,errorCode:s})}},mQ=(0,M.withBaseException)(ct),hQ=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString,reason:M.expectString});Object.assign(r,n);let o=new fc({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},gQ=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString});Object.assign(r,n);let o=new pc({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},yQ=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString});Object.assign(r,n);let o=new mc({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},SQ=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString});Object.assign(r,n);let o=new hc({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},EQ=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString});Object.assign(r,n);let o=new gc({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},_Q=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString});Object.assign(r,n);let o=new yc({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},wQ=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString,reason:M.expectString});Object.assign(r,n);let o=new Sc({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},bQ=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString});Object.assign(r,n);let o=new Ec({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},CQ=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString});Object.assign(r,n);let o=new _c({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},RQ=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString});Object.assign(r,n);let o=new wc({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},vQ=async(e,t)=>{let r=(0,M.map)({}),s=e.body,n=(0,M.take)(s,{error:M.expectString,error_description:M.expectString});Object.assign(r,n);let o=new bc({$metadata:lr(e),...r});return(0,M.decorateServiceException)(o,e.body)},lr=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var UN,BN,o_,Cc,i_=S(()=>{UN=y(Dt()),BN=y(nr()),o_=y(F());WE();Zu();$N();Cc=class extends o_.Command.classBuilder().ep(D0).m(function(t,r,s,n){return[(0,BN.getSerdePlugin)(s,this.serialize,this.deserialize),(0,UN.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(s_,n_).ser(qN).de(FN).build(){}});var HN,xQ,ef,jN=S(()=>{HN=y(F());i_();r_();xQ={CreateTokenCommand:Cc},ef=class extends uc{};(0,HN.createAggregatedClient)(xQ,ef)});var zN=S(()=>{i_()});var VN=S(()=>{Zu()});var a_={};tt(a_,{$Command:()=>o_.Command,AccessDeniedException:()=>fc,AccessDeniedExceptionReason:()=>uQ,AuthorizationPendingException:()=>pc,CreateTokenCommand:()=>Cc,CreateTokenRequestFilterSensitiveLog:()=>s_,CreateTokenResponseFilterSensitiveLog:()=>n_,ExpiredTokenException:()=>mc,InternalServerException:()=>hc,InvalidClientException:()=>gc,InvalidGrantException:()=>yc,InvalidRequestException:()=>Sc,InvalidRequestExceptionReason:()=>fQ,InvalidScopeException:()=>Ec,SSOOIDC:()=>ef,SSOOIDCClient:()=>uc,SSOOIDCServiceException:()=>ct,SlowDownException:()=>_c,UnauthorizedClientException:()=>wc,UnsupportedGrantTypeException:()=>bc,__Client:()=>t_.Client});var c_=S(()=>{r_();jN();zN();VN();Xu()});var KN=w(vc=>{"use strict";var AQ=(Fr(),z(tn)),TQ=(DS(),z(lP)),Xt=xe(),Rc=Ot(),PQ=require("fs"),IQ=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new Xt.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=TQ.getBearerTokenEnvKey(t);if(!(r in process.env))throw new Xt.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let s={token:process.env[r]};return AQ.setTokenFeature(s,"BEARER_SERVICE_ENV_VARS","3"),s},NQ=300*1e3,d_="To refresh this SSO session run 'aws sso login' with the corresponding profile.",OQ=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(c_(),a_)),s=o=>t.clientConfig?.[o]??t.parentClientConfig?.[o];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},DQ=async(e,t,r={})=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(c_(),a_));return(await OQ(t,r)).send(new s({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},GN=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new Xt.TokenProviderError(`Token is expired. ${d_}`,!1)},mo=(e,t,r=!1)=>{if(typeof t>"u")throw new Xt.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${d_}`,!1)},{writeFile:kQ}=PQ.promises,MQ=(e,t)=>{let r=Rc.getSSOTokenFilepath(e),s=JSON.stringify(t,null,2);return kQ(r,s)},WN=new Date(0),QN=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let s=await Rc.parseKnownFiles(r),n=Rc.getProfileName({profile:r.profile??t?.profile}),o=s[n];if(o){if(!o.sso_session)throw new Xt.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new Xt.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let i=o.sso_session,c=(await Rc.loadSsoSessionData(r))[i];if(!c)throw new Xt.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let g of["sso_start_url","sso_region"])if(!c[g])throw new Xt.TokenProviderError(`Sso session '${i}' is missing required property '${g}'.`,!1);c.sso_start_url;let d=c.sso_region,l;try{l=await Rc.getSSOTokenFromFile(i)}catch{throw new Xt.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${d_}`,!1)}mo("accessToken",l.accessToken),mo("expiresAt",l.expiresAt);let{accessToken:u,expiresAt:h}=l,m={token:u,expiration:new Date(h)};if(m.expiration.getTime()-Date.now()>NQ)return m;if(Date.now()-WN.getTime()<30*1e3)return GN(m),m;mo("clientId",l.clientId,!0),mo("clientSecret",l.clientSecret,!0),mo("refreshToken",l.refreshToken,!0);try{WN.setTime(Date.now());let g=await DQ(l,d,r);mo("accessToken",g.accessToken),mo("expiresIn",g.expiresIn);let C=new Date(Date.now()+g.expiresIn*1e3);try{await MQ(i,{...l,accessToken:g.accessToken,expiresAt:C.toISOString(),refreshToken:g.refreshToken})}catch{}return{token:g.accessToken,expiration:C}}catch{return GN(m),m}},LQ=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new Xt.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},qQ=(e={})=>Xt.memoize(Xt.chain(QN(e),async()=>{throw new Xt.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);vc.fromEnvSigningName=IQ;vc.fromSso=QN;vc.fromStatic=LQ;vc.nodeProvider=qQ});var u_=w(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.resolveHttpAuthSchemeConfig=Sn.defaultSSOHttpAuthSchemeProvider=Sn.defaultSSOHttpAuthSchemeParametersProvider=void 0;var FQ=(at(),z(Qr)),l_=it(),$Q=async(e,t,r)=>({operation:(0,l_.getSmithyContext)(t).operation,region:await(0,l_.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Sn.defaultSSOHttpAuthSchemeParametersProvider=$Q;function UQ(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function tf(e){return{schemeId:"smithy.api#noAuth"}}var BQ=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(tf(e));break}case"ListAccountRoles":{t.push(tf(e));break}case"ListAccounts":{t.push(tf(e));break}case"Logout":{t.push(tf(e));break}default:t.push(UQ(e))}return t};Sn.defaultSSOHttpAuthSchemeProvider=BQ;var HQ=e=>{let t=(0,FQ.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,l_.normalizeProvider)(e.authSchemePreference??[])})};Sn.resolveHttpAuthSchemeConfig=HQ});var YN=w((cye,jQ)=>{jQ.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.922.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.922.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.922.0","@aws-sdk/region-config-resolver":"3.922.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.922.0","@smithy/config-resolver":"^4.4.1","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.7","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var uO=w(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.ruleSet=void 0;var aO="required",fr="fn",pr="argv",pi="ref",JN=!0,XN="isSet",xc="booleanEquals",ui="error",fi="endpoint",Ps="tree",f_="PartitionResult",p_="getAttr",ZN={[aO]:!1,type:"string"},eO={[aO]:!0,default:!1,type:"boolean"},tO={[pi]:"Endpoint"},cO={[fr]:xc,[pr]:[{[pi]:"UseFIPS"},!0]},dO={[fr]:xc,[pr]:[{[pi]:"UseDualStack"},!0]},ur={},rO={[fr]:p_,[pr]:[{[pi]:f_},"supportsFIPS"]},lO={[pi]:f_},sO={[fr]:xc,[pr]:[!0,{[fr]:p_,[pr]:[lO,"supportsDualStack"]}]},nO=[cO],oO=[dO],iO=[{[pi]:"Region"}],zQ={version:"1.0",parameters:{Region:ZN,UseDualStack:eO,UseFIPS:eO,Endpoint:ZN},rules:[{conditions:[{[fr]:XN,[pr]:[tO]}],rules:[{conditions:nO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ui},{conditions:oO,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ui},{endpoint:{url:tO,properties:ur,headers:ur},type:fi}],type:Ps},{conditions:[{[fr]:XN,[pr]:iO}],rules:[{conditions:[{[fr]:"aws.partition",[pr]:iO,assign:f_}],rules:[{conditions:[cO,dO],rules:[{conditions:[{[fr]:xc,[pr]:[JN,rO]},sO],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ur,headers:ur},type:fi}],type:Ps},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ui}],type:Ps},{conditions:nO,rules:[{conditions:[{[fr]:xc,[pr]:[rO,JN]}],rules:[{conditions:[{[fr]:"stringEquals",[pr]:[{[fr]:p_,[pr]:[lO,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:ur,headers:ur},type:fi},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ur,headers:ur},type:fi}],type:Ps},{error:"FIPS is enabled but this partition does not support FIPS",type:ui}],type:Ps},{conditions:oO,rules:[{conditions:[sO],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ur,headers:ur},type:fi}],type:Ps},{error:"DualStack is enabled but this partition does not support DualStack",type:ui}],type:Ps},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:ur,headers:ur},type:fi}],type:Ps}],type:Ps},{error:"Invalid Configuration: Missing Region",type:ui}]};rf.ruleSet=zQ});var fO=w(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.defaultEndpointResolver=void 0;var VQ=qr(),m_=Mr(),GQ=uO(),WQ=new m_.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),QQ=(e,t={})=>WQ.get(e,()=>(0,m_.resolveEndpoint)(GQ.ruleSet,{endpointParams:e,logger:t.logger}));sf.defaultEndpointResolver=QQ;m_.customEndpointFunctions.aws=VQ.awsEndpointFunctions});var hO=w(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.getRuntimeConfig=void 0;var KQ=(at(),z(Qr)),YQ=(ve(),z(Gr)),JQ=F(),XQ=or(),pO=Ae(),mO=Te(),ZQ=u_(),eK=fO(),tK=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??pO.fromBase64,base64Encoder:e?.base64Encoder??pO.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??eK.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??ZQ.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new KQ.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new YQ.NoAuthSigner}],logger:e?.logger??new JQ.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??XQ.parseUrl,utf8Decoder:e?.utf8Decoder??mO.fromUtf8,utf8Encoder:e?.utf8Encoder??mO.toUtf8});nf.getRuntimeConfig=tK});var _O=w(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.getRuntimeConfig=void 0;var rK=(Xs(),z(Js)),sK=rK.__importDefault(YN()),gO=(at(),z(Qr)),yO=cc(),of=ze(),nK=vs(),SO=ft(),ho=$t(),EO=sr(),oK=xs(),iK=Yr(),aK=hO(),cK=F(),dK=Ts(),lK=F(),uK=e=>{(0,lK.emitWarningIfUnsupportedVersion)(process.version);let t=(0,dK.resolveDefaultsModeConfig)(e),r=()=>t().then(cK.loadConfigsForDefaultMode),s=(0,aK.getRuntimeConfig)(e);(0,gO.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,ho.loadConfig)(gO.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??oK.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,yO.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:sK.default.version}),maxAttempts:e?.maxAttempts??(0,ho.loadConfig)(SO.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,ho.loadConfig)(of.NODE_REGION_CONFIG_OPTIONS,{...of.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:EO.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,ho.loadConfig)({...SO.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||iK.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??nK.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??EO.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ho.loadConfig)(of.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,ho.loadConfig)(of.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,ho.loadConfig)(yO.NODE_APP_ID_CONFIG_OPTIONS,n)}};af.getRuntimeConfig=uK});var $O=w(Ge=>{"use strict";var wO=ds(),fK=ls(),pK=us(),bO=ri(),mK=ze(),Is=(ve(),z(Gr)),hK=Cs(),Ic=Dt(),CO=ft(),U=F(),RO=u_(),gK=_O(),vO=li(),xO=ce(),hf=nr(),Ac=(at(),z(Qr)),yK=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),gf={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},SK=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},EK=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),_K=(e,t)=>{let r=Object.assign(vO.getAwsRegionExtensionConfiguration(e),U.getDefaultExtensionConfiguration(e),xO.getHttpHandlerExtensionConfiguration(e),SK(e));return t.forEach(s=>s.configure(r)),Object.assign(e,vO.resolveAwsRegionExtensionConfiguration(r),U.resolveDefaultRuntimeConfig(r),xO.resolveHttpHandlerRuntimeConfig(r),EK(r))},mi=class extends U.Client{config;constructor(...[t]){let r=gK.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=yK(r),n=bO.resolveUserAgentConfig(s),o=CO.resolveRetryConfig(n),i=mK.resolveRegionConfig(o),a=wO.resolveHostHeaderConfig(i),c=Ic.resolveEndpointConfig(a),d=RO.resolveHttpAuthSchemeConfig(c),l=_K(d,t?.extensions||[]);this.config=l,this.middlewareStack.use(bO.getUserAgentPlugin(this.config)),this.middlewareStack.use(CO.getRetryPlugin(this.config)),this.middlewareStack.use(hK.getContentLengthPlugin(this.config)),this.middlewareStack.use(wO.getHostHeaderPlugin(this.config)),this.middlewareStack.use(fK.getLoggerPlugin(this.config)),this.middlewareStack.use(pK.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Is.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:RO.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async u=>new Is.DefaultIdentityProviderConfig({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(Is.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},En=class e extends U.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},cf=class e extends En{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},df=class e extends En{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},lf=class e extends En{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},uf=class e extends En{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},AO=e=>({...e,...e.accessToken&&{accessToken:U.SENSITIVE_STRING}}),TO=e=>({...e,...e.secretAccessKey&&{secretAccessKey:U.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:U.SENSITIVE_STRING}}),PO=e=>({...e,...e.roleCredentials&&{roleCredentials:TO(e.roleCredentials)}}),IO=e=>({...e,...e.accessToken&&{accessToken:U.SENSITIVE_STRING}}),NO=e=>({...e,...e.accessToken&&{accessToken:U.SENSITIVE_STRING}}),OO=e=>({...e,...e.accessToken&&{accessToken:U.SENSITIVE_STRING}}),wK=async(e,t)=>{let r=Is.requestBuilder(e,t),s=U.map({},U.isSerializableHeaderValue,{[Ef]:e[Sf]});r.bp("/federation/credentials");let n=U.map({[MK]:[,U.expectNonNull(e[kK],"roleName")],[kO]:[,U.expectNonNull(e[DO],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},bK=async(e,t)=>{let r=Is.requestBuilder(e,t),s=U.map({},U.isSerializableHeaderValue,{[Ef]:e[Sf]});r.bp("/assignment/roles");let n=U.map({[FO]:[,e[qO]],[LO]:[()=>e.maxResults!==void 0,()=>e[MO].toString()],[kO]:[,U.expectNonNull(e[DO],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},CK=async(e,t)=>{let r=Is.requestBuilder(e,t),s=U.map({},U.isSerializableHeaderValue,{[Ef]:e[Sf]});r.bp("/assignment/accounts");let n=U.map({[FO]:[,e[qO]],[LO]:[()=>e.maxResults!==void 0,()=>e[MO].toString()]});return r.m("GET").h(s).q(n).b(void 0),r.build()},RK=async(e,t)=>{let r=Is.requestBuilder(e,t),s=U.map({},U.isSerializableHeaderValue,{[Ef]:e[Sf]});return r.bp("/logout"),r.m("POST").h(s).b(void 0),r.build()},vK=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return yf(e,t);let r=U.map({$metadata:_n(e)}),s=U.expectNonNull(U.expectObject(await Ac.parseJsonBody(e.body,t)),"body"),n=U.take(s,{roleCredentials:U._json});return Object.assign(r,n),r},xK=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return yf(e,t);let r=U.map({$metadata:_n(e)}),s=U.expectNonNull(U.expectObject(await Ac.parseJsonBody(e.body,t)),"body"),n=U.take(s,{nextToken:U.expectString,roleList:U._json});return Object.assign(r,n),r},AK=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return yf(e,t);let r=U.map({$metadata:_n(e)}),s=U.expectNonNull(U.expectObject(await Ac.parseJsonBody(e.body,t)),"body"),n=U.take(s,{accountList:U._json,nextToken:U.expectString});return Object.assign(r,n),r},TK=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return yf(e,t);let r=U.map({$metadata:_n(e)});return await U.collectBody(e.body,t),r},yf=async(e,t)=>{let r={...e,body:await Ac.parseJsonErrorBody(e.body,t)},s=Ac.loadRestJsonErrorCode(e,r.body);switch(s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await IK(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await NK(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await OK(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await DK(r);default:let n=r.body;return PK({output:e,parsedBody:n,errorCode:s})}},PK=U.withBaseException(En),IK=async(e,t)=>{let r=U.map({}),s=e.body,n=U.take(s,{message:U.expectString});Object.assign(r,n);let o=new cf({$metadata:_n(e),...r});return U.decorateServiceException(o,e.body)},NK=async(e,t)=>{let r=U.map({}),s=e.body,n=U.take(s,{message:U.expectString});Object.assign(r,n);let o=new df({$metadata:_n(e),...r});return U.decorateServiceException(o,e.body)},OK=async(e,t)=>{let r=U.map({}),s=e.body,n=U.take(s,{message:U.expectString});Object.assign(r,n);let o=new lf({$metadata:_n(e),...r});return U.decorateServiceException(o,e.body)},DK=async(e,t)=>{let r=U.map({}),s=e.body,n=U.take(s,{message:U.expectString});Object.assign(r,n);let o=new uf({$metadata:_n(e),...r});return U.decorateServiceException(o,e.body)},_n=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),DO="accountId",Sf="accessToken",kO="account_id",MO="maxResults",LO="max_result",qO="nextToken",FO="next_token",kK="roleName",MK="role_name",Ef="x-amz-sso_bearer_token",ff=class extends U.Command.classBuilder().ep(gf).m(function(t,r,s,n){return[hf.getSerdePlugin(s,this.serialize,this.deserialize),Ic.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(AO,PO).ser(wK).de(vK).build(){},Tc=class extends U.Command.classBuilder().ep(gf).m(function(t,r,s,n){return[hf.getSerdePlugin(s,this.serialize,this.deserialize),Ic.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(IO,void 0).ser(bK).de(xK).build(){},Pc=class extends U.Command.classBuilder().ep(gf).m(function(t,r,s,n){return[hf.getSerdePlugin(s,this.serialize,this.deserialize),Ic.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(NO,void 0).ser(CK).de(AK).build(){},pf=class extends U.Command.classBuilder().ep(gf).m(function(t,r,s,n){return[hf.getSerdePlugin(s,this.serialize,this.deserialize),Ic.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(OO,void 0).ser(RK).de(TK).build(){},LK={GetRoleCredentialsCommand:ff,ListAccountRolesCommand:Tc,ListAccountsCommand:Pc,LogoutCommand:pf},mf=class extends mi{};U.createAggregatedClient(LK,mf);var qK=Is.createPaginator(mi,Tc,"nextToken","nextToken","maxResults"),FK=Is.createPaginator(mi,Pc,"nextToken","nextToken","maxResults");Object.defineProperty(Ge,"$Command",{enumerable:!0,get:function(){return U.Command}});Object.defineProperty(Ge,"__Client",{enumerable:!0,get:function(){return U.Client}});Ge.GetRoleCredentialsCommand=ff;Ge.GetRoleCredentialsRequestFilterSensitiveLog=AO;Ge.GetRoleCredentialsResponseFilterSensitiveLog=PO;Ge.InvalidRequestException=cf;Ge.ListAccountRolesCommand=Tc;Ge.ListAccountRolesRequestFilterSensitiveLog=IO;Ge.ListAccountsCommand=Pc;Ge.ListAccountsRequestFilterSensitiveLog=NO;Ge.LogoutCommand=pf;Ge.LogoutRequestFilterSensitiveLog=OO;Ge.ResourceNotFoundException=df;Ge.RoleCredentialsFilterSensitiveLog=TO;Ge.SSO=mf;Ge.SSOClient=mi;Ge.SSOServiceException=En;Ge.TooManyRequestsException=lf;Ge.UnauthorizedException=uf;Ge.paginateListAccountRoles=qK;Ge.paginateListAccounts=FK});var BO=w(h_=>{"use strict";var UO=$O();Object.defineProperty(h_,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return UO.GetRoleCredentialsCommand}});Object.defineProperty(h_,"SSOClient",{enumerable:!0,get:function(){return UO.SSOClient}})});var g_=w(wf=>{"use strict";var $r=xe(),_f=Ot(),HO=(Fr(),z(tn)),$K=KN(),zO=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),Nc=!1,jO=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:s,ssoRoleName:n,ssoClient:o,clientConfig:i,parentClientConfig:a,profile:c,filepath:d,configFilepath:l,ignoreCache:u,logger:h})=>{let m,g="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let Ee=await $K.fromSso({profile:c,filepath:d,configFilepath:l,ignoreCache:u})();m={accessToken:Ee.token,expiresAt:new Date(Ee.expiration).toISOString()}}catch(Ee){throw new $r.CredentialsProviderError(Ee.message,{tryNextLink:Nc,logger:h})}else try{m=await _f.getSSOTokenFromFile(e)}catch{throw new $r.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${g}`,{tryNextLink:Nc,logger:h})}if(new Date(m.expiresAt).getTime()-Date.now()<=0)throw new $r.CredentialsProviderError(`The SSO session associated with this profile has expired. ${g}`,{tryNextLink:Nc,logger:h});let{accessToken:C}=m,{SSOClient:v,GetRoleCredentialsCommand:A}=await Promise.resolve().then(function(){return BO()}),N=o||new v(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??s,userAgentAppId:i?.userAgentAppId??a?.userAgentAppId})),$;try{$=await N.send(new A({accountId:r,roleName:n,accessToken:C}))}catch(Ee){throw new $r.CredentialsProviderError(Ee,{tryNextLink:Nc,logger:h})}let{roleCredentials:{accessKeyId:H,secretAccessKey:Q,sessionToken:fe,expiration:Ce,credentialScope:K,accountId:ae}={}}=$;if(!H||!Q||!fe||!Ce)throw new $r.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Nc,logger:h});let pe={accessKeyId:H,secretAccessKey:Q,sessionToken:fe,expiration:new Date(Ce),...K&&{credentialScope:K},...ae&&{accountId:ae}};return t?HO.setCredentialFeature(pe,"CREDENTIALS_SSO","s"):HO.setCredentialFeature(pe,"CREDENTIALS_SSO_LEGACY","u"),pe},VO=(e,t)=>{let{sso_start_url:r,sso_account_id:s,sso_region:n,sso_role_name:o}=e;if(!r||!s||!n||!o)throw new $r.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},UK=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e,{ssoClient:a}=e,c=_f.getProfileName({profile:e.profile??t?.profile});if(!r&&!s&&!n&&!o&&!i){let l=(await _f.parseKnownFiles(e))[c];if(!l)throw new $r.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!zO(l))throw new $r.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(l?.sso_session){let A=(await _f.loadSsoSessionData(e))[l.sso_session],N=` configurations in profile ${c} and sso-session ${l.sso_session}`;if(n&&n!==A.sso_region)throw new $r.CredentialsProviderError("Conflicting SSO region"+N,{tryNextLink:!1,logger:e.logger});if(r&&r!==A.sso_start_url)throw new $r.CredentialsProviderError("Conflicting SSO start_url"+N,{tryNextLink:!1,logger:e.logger});l.sso_region=A.sso_region,l.sso_start_url=A.sso_start_url}let{sso_start_url:u,sso_account_id:h,sso_region:m,sso_role_name:g,sso_session:C}=VO(l,e.logger);return jO({ssoStartUrl:u,ssoSession:C,ssoAccountId:h,ssoRegion:m,ssoRoleName:g,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!s||!n||!o)throw new $r.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return jO({ssoStartUrl:r,ssoSession:i,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};wf.fromSSO=UK;wf.isSsoProfile=zO;wf.validateSsoProfile=VO});function BK(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function HK(e){return{schemeId:"smithy.api#noAuth"}}var Oc,GO,WO,jK,QO,y_=S(()=>{at();Oc=y(it());Dc();GO=async(e,t,r)=>({operation:(0,Oc.getSmithyContext)(t).operation,region:await(0,Oc.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});WO=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(HK(e));break}default:t.push(BK(e))}return t},jK=e=>Object.assign(e,{stsClientCtor:Zr}),QO=e=>{let t=jK(e),r=no(t);return Object.assign(r,{authSchemePreference:(0,Oc.normalizeProvider)(e.authSchemePreference??[])})}});var KO,bf,Cf=S(()=>{KO=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),bf={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var iD,ee,he,wn,pt,aD,cD,Pe,YO,es,hi,E_,JO,S_,dD,XO,mt,ZO,lD,uD,Rt,Zt,eD,fD,pD,tD,mD,rD,sD,nD,oD,zK,hD,gD=S(()=>{iD="required",ee="type",he="argv",wn="booleanEquals",pt="stringEquals",aD="sigv4",cD="us-east-1",Pe="endpoint",YO="https://sts.{Region}.{PartitionResult#dnsSuffix}",es="tree",hi="error",E_="getAttr",JO={[iD]:!1,[ee]:"string"},S_={[iD]:!0,default:!1,[ee]:"boolean"},dD={ref:"Endpoint"},XO={fn:"isSet",[he]:[{ref:"Region"}]},mt={ref:"Region"},ZO={fn:"aws.partition",[he]:[mt],assign:"PartitionResult"},lD={ref:"UseFIPS"},uD={ref:"UseDualStack"},Rt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:aD,signingName:"sts",signingRegion:cD}]},headers:{}},Zt={},eD={conditions:[{fn:pt,[he]:[mt,"aws-global"]}],[Pe]:Rt,[ee]:Pe},fD={fn:wn,[he]:[lD,!0]},pD={fn:wn,[he]:[uD,!0]},tD={fn:E_,[he]:[{ref:"PartitionResult"},"supportsFIPS"]},mD={ref:"PartitionResult"},rD={fn:wn,[he]:[!0,{fn:E_,[he]:[mD,"supportsDualStack"]}]},sD=[{fn:"isSet",[he]:[dD]}],nD=[fD],oD=[pD],zK={version:"1.0",parameters:{Region:JO,UseDualStack:S_,UseFIPS:S_,Endpoint:JO,UseGlobalEndpoint:S_},rules:[{conditions:[{fn:wn,[he]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[he]:sD},XO,ZO,{fn:wn,[he]:[lD,!1]},{fn:wn,[he]:[uD,!1]}],rules:[{conditions:[{fn:pt,[he]:[mt,"ap-northeast-1"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"ap-south-1"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"ap-southeast-1"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"ap-southeast-2"]}],endpoint:Rt,[ee]:Pe},eD,{conditions:[{fn:pt,[he]:[mt,"ca-central-1"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"eu-central-1"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"eu-north-1"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"eu-west-1"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"eu-west-2"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"eu-west-3"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"sa-east-1"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,cD]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"us-east-2"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"us-west-1"]}],endpoint:Rt,[ee]:Pe},{conditions:[{fn:pt,[he]:[mt,"us-west-2"]}],endpoint:Rt,[ee]:Pe},{endpoint:{url:YO,properties:{authSchemes:[{name:aD,signingName:"sts",signingRegion:"{Region}"}]},headers:Zt},[ee]:Pe}],[ee]:es},{conditions:sD,rules:[{conditions:nD,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[ee]:hi},{conditions:oD,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[ee]:hi},{endpoint:{url:dD,properties:Zt,headers:Zt},[ee]:Pe}],[ee]:es},{conditions:[XO],rules:[{conditions:[ZO],rules:[{conditions:[fD,pD],rules:[{conditions:[{fn:wn,[he]:[!0,tD]},rD],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Zt,headers:Zt},[ee]:Pe}],[ee]:es},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[ee]:hi}],[ee]:es},{conditions:nD,rules:[{conditions:[{fn:wn,[he]:[tD,!0]}],rules:[{conditions:[{fn:pt,[he]:[{fn:E_,[he]:[mD,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Zt,headers:Zt},[ee]:Pe},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Zt,headers:Zt},[ee]:Pe}],[ee]:es},{error:"FIPS is enabled but this partition does not support FIPS",[ee]:hi}],[ee]:es},{conditions:oD,rules:[{conditions:[rD],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Zt,headers:Zt},[ee]:Pe}],[ee]:es},{error:"DualStack is enabled but this partition does not support DualStack",[ee]:hi}],[ee]:es},eD,{endpoint:{url:YO,properties:Zt,headers:Zt},[ee]:Pe}],[ee]:es}],[ee]:es},{error:"Invalid Configuration: Missing Region",[ee]:hi}]},hD=zK});var yD,gi,VK,SD,ED=S(()=>{yD=y(qr()),gi=y(Mr());gD();VK=new gi.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),SD=(e,t={})=>VK.get(e,()=>(0,gi.resolveEndpoint)(hD,{endpointParams:e,logger:t.logger}));gi.customEndpointFunctions.aws=yD.awsEndpointFunctions});var _D,wD,Rf,vf,bD,CD=S(()=>{at();ve();_D=y(F()),wD=y(or()),Rf=y(Ae()),vf=y(Te());y_();ED();bD=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Rf.fromBase64,base64Encoder:e?.base64Encoder??Rf.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??SD,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??WO,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new qt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Nt}],logger:e?.logger??new _D.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??wD.parseUrl,utf8Decoder:e?.utf8Decoder??vf.fromUtf8,utf8Encoder:e?.utf8Encoder??vf.toUtf8})});var xf,Cn,RD,Af,bn,Tf,vD,xD,AD,TD,PD,ID,ND=S(()=>{QE();at();xf=y(cc()),Cn=y(ze());ve();RD=y(vs()),Af=y(ft()),bn=y($t()),Tf=y(sr()),vD=y(xs()),xD=y(Yr());CD();AD=y(F()),TD=y(Ts()),PD=y(F()),ID=e=>{(0,PD.emitWarningIfUnsupportedVersion)(process.version);let t=(0,TD.resolveDefaultsModeConfig)(e),r=()=>t().then(AD.loadConfigsForDefaultMode),s=bD(e);zo(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,bn.loadConfig)(Wo,n),bodyLengthChecker:e?.bodyLengthChecker??vD.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,xf.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:Uu.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new qt},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Nt}],maxAttempts:e?.maxAttempts??(0,bn.loadConfig)(Af.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,bn.loadConfig)(Cn.NODE_REGION_CONFIG_OPTIONS,{...Cn.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:Tf.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,bn.loadConfig)({...Af.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||xD.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??RD.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Tf.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,bn.loadConfig)(Cn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,bn.loadConfig)(Cn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,bn.loadConfig)(xf.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var OD,DD,kD=S(()=>{OD=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},DD=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Pf,If,Nf,MD,LD=S(()=>{Pf=y(li()),If=y(ce()),Nf=y(F());kD();MD=(e,t)=>{let r=Object.assign((0,Pf.getAwsRegionExtensionConfiguration)(e),(0,Nf.getDefaultExtensionConfiguration)(e),(0,If.getHttpHandlerExtensionConfiguration)(e),OD(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,Pf.resolveAwsRegionExtensionConfiguration)(r),(0,Nf.resolveDefaultRuntimeConfig)(r),(0,If.resolveHttpHandlerRuntimeConfig)(r),DD(r))}});var Of,qD,FD,Df,$D,UD,BD,kf,__,Zr,Dc=S(()=>{Of=y(ds()),qD=y(ls()),FD=y(us()),Df=y(ri()),$D=y(ze());ve();UD=y(Cs()),BD=y(Dt()),kf=y(ft()),__=y(F());y_();Cf();ND();LD();Zr=class extends __.Client{config;constructor(...[t]){let r=ID(t||{});super(r),this.initConfig=r;let s=KO(r),n=(0,Df.resolveUserAgentConfig)(s),o=(0,kf.resolveRetryConfig)(n),i=(0,$D.resolveRegionConfig)(o),a=(0,Of.resolveHostHeaderConfig)(i),c=(0,BD.resolveEndpointConfig)(a),d=QO(c),l=MD(d,t?.extensions||[]);this.config=l,this.middlewareStack.use((0,Df.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,kf.getRetryPlugin)(this.config)),this.middlewareStack.use((0,UD.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Of.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,qD.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,FD.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(gs(this.config,{httpAuthSchemeParametersProvider:GO,identityProviderConfigProvider:async u=>new kr({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(ys(this.config))}destroy(){super.destroy()}}});var HD,Ut,Mf=S(()=>{HD=y(F()),Ut=class e extends HD.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var w_,b_,C_,kc,Mc,Lc,qc,Fc,$c,R_,v_,Uc,Bc=S(()=>{w_=y(F());Mf();b_=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:w_.SENSITIVE_STRING}}),C_=e=>({...e,...e.Credentials&&{Credentials:b_(e.Credentials)}}),kc=class e extends Ut{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Mc=class e extends Ut{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Lc=class e extends Ut{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},qc=class e extends Ut{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Fc=class e extends Ut{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},$c=class e extends Ut{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},R_=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:w_.SENSITIVE_STRING}}),v_=e=>({...e,...e.Credentials&&{Credentials:b_(e.Credentials)}}),Uc=class e extends Ut{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var jD,se,zD,VD,GD,WD,QD,GK,WK,QK,KK,YK,JK,XK,ZK,e5,KD,t5,r5,s5,n5,o5,i5,YD,a5,c5,JD,d5,l5,u5,f5,p5,m5,h5,Os,g5,XD,ZD,ek,tk,x_,y5,A_,yi,S5,T_,P_,Si,I_,Ei,N_,O_,D_,_i,wi,k_,M_,L_,bi,q_,Ci,Ri,F_,$_,Ns,U_,B_,H_,j_,z_,rk,V_,G_,W_,Ye,sk,E5,Q_=S(()=>{at();jD=y(ce()),se=y(F());Bc();Mf();zD=async(e,t)=>{let r=ZD,s;return s=sk({...ZK(e,t),[tk]:y5,[rk]:ek}),XD(t,r,"/",void 0,s)},VD=async(e,t)=>{let r=ZD,s;return s=sk({...e5(e,t),[tk]:S5,[rk]:ek}),XD(t,r,"/",void 0,s)},GD=async(e,t)=>{if(e.statusCode>=300)return QD(e,t);let r=await Xa(e.body,t),s={};return s=a5(r.AssumeRoleResult,t),{$metadata:Os(e),...s}},WD=async(e,t)=>{if(e.statusCode>=300)return QD(e,t);let r=await Xa(e.body,t),s={};return s=c5(r.AssumeRoleWithWebIdentityResult,t),{$metadata:Os(e),...s}},QD=async(e,t)=>{let r={...e,body:await lE(e.body,t)},s=E5(e,r.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await GK(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await YK(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await JK(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await XK(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await WK(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await QK(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await KK(r,t);default:let n=r.body;return g5({output:e,parsedBody:n.Error,errorCode:s})}},GK=async(e,t)=>{let r=e.body,s=d5(r.Error,t),n=new kc({$metadata:Os(e),...s});return(0,se.decorateServiceException)(n,r)},WK=async(e,t)=>{let r=e.body,s=l5(r.Error,t),n=new Uc({$metadata:Os(e),...s});return(0,se.decorateServiceException)(n,r)},QK=async(e,t)=>{let r=e.body,s=u5(r.Error,t),n=new Fc({$metadata:Os(e),...s});return(0,se.decorateServiceException)(n,r)},KK=async(e,t)=>{let r=e.body,s=f5(r.Error,t),n=new $c({$metadata:Os(e),...s});return(0,se.decorateServiceException)(n,r)},YK=async(e,t)=>{let r=e.body,s=p5(r.Error,t),n=new Mc({$metadata:Os(e),...s});return(0,se.decorateServiceException)(n,r)},JK=async(e,t)=>{let r=e.body,s=m5(r.Error,t),n=new Lc({$metadata:Os(e),...s});return(0,se.decorateServiceException)(n,r)},XK=async(e,t)=>{let r=e.body,s=h5(r.Error,t),n=new qc({$metadata:Os(e),...s});return(0,se.decorateServiceException)(n,r)},ZK=(e,t)=>{let r={};if(e[Ci]!=null&&(r[Ci]=e[Ci]),e[Ri]!=null&&(r[Ri]=e[Ri]),e[wi]!=null){let s=KD(e[wi],t);e[wi]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}if(e[_i]!=null&&(r[_i]=e[_i]),e[Ei]!=null&&(r[Ei]=e[Ei]),e[H_]!=null){let s=i5(e[H_],t);e[H_]?.length===0&&(r.Tags=[]),Object.entries(s).forEach(([n,o])=>{let i=`Tags.${n}`;r[i]=o})}if(e[z_]!=null){let s=o5(e[z_],t);e[z_]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(s).forEach(([n,o])=>{let i=`TransitiveTagKeys.${n}`;r[i]=o})}if(e[O_]!=null&&(r[O_]=e[O_]),e[U_]!=null&&(r[U_]=e[U_]),e[j_]!=null&&(r[j_]=e[j_]),e[Ns]!=null&&(r[Ns]=e[Ns]),e[M_]!=null){let s=s5(e[M_],t);e[M_]?.length===0&&(r.ProvidedContexts=[]),Object.entries(s).forEach(([n,o])=>{let i=`ProvidedContexts.${n}`;r[i]=o})}return r},e5=(e,t)=>{let r={};if(e[Ci]!=null&&(r[Ci]=e[Ci]),e[Ri]!=null&&(r[Ri]=e[Ri]),e[G_]!=null&&(r[G_]=e[G_]),e[L_]!=null&&(r[L_]=e[L_]),e[wi]!=null){let s=KD(e[wi],t);e[wi]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}return e[_i]!=null&&(r[_i]=e[_i]),e[Ei]!=null&&(r[Ei]=e[Ei]),r},KD=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=t5(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},t5=(e,t)=>{let r={};return e[W_]!=null&&(r[W_]=e[W_]),r},r5=(e,t)=>{let r={};return e[k_]!=null&&(r[k_]=e[k_]),e[I_]!=null&&(r[I_]=e[I_]),r},s5=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=r5(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},n5=(e,t)=>{let r={};return e[D_]!=null&&(r[D_]=e[D_]),e[V_]!=null&&(r[V_]=e[V_]),r},o5=(e,t)=>{let r={},s=1;for(let n of e)n!==null&&(r[`member.${s}`]=n,s++);return r},i5=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=n5(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},YD=(e,t)=>{let r={};return e[A_]!=null&&(r[A_]=(0,se.expectString)(e[A_])),e[T_]!=null&&(r[T_]=(0,se.expectString)(e[T_])),r},a5=(e,t)=>{let r={};return e[Si]!=null&&(r[Si]=JD(e[Si],t)),e[yi]!=null&&(r[yi]=YD(e[yi],t)),e[bi]!=null&&(r[bi]=(0,se.strictParseInt32)(e[bi])),e[Ns]!=null&&(r[Ns]=(0,se.expectString)(e[Ns])),r},c5=(e,t)=>{let r={};return e[Si]!=null&&(r[Si]=JD(e[Si],t)),e[$_]!=null&&(r[$_]=(0,se.expectString)(e[$_])),e[yi]!=null&&(r[yi]=YD(e[yi],t)),e[bi]!=null&&(r[bi]=(0,se.strictParseInt32)(e[bi])),e[q_]!=null&&(r[q_]=(0,se.expectString)(e[q_])),e[P_]!=null&&(r[P_]=(0,se.expectString)(e[P_])),e[Ns]!=null&&(r[Ns]=(0,se.expectString)(e[Ns])),r},JD=(e,t)=>{let r={};return e[x_]!=null&&(r[x_]=(0,se.expectString)(e[x_])),e[F_]!=null&&(r[F_]=(0,se.expectString)(e[F_])),e[B_]!=null&&(r[B_]=(0,se.expectString)(e[B_])),e[N_]!=null&&(r[N_]=(0,se.expectNonNull)((0,se.parseRfc3339DateTimeWithOffset)(e[N_]))),r},d5=(e,t)=>{let r={};return e[Ye]!=null&&(r[Ye]=(0,se.expectString)(e[Ye])),r},l5=(e,t)=>{let r={};return e[Ye]!=null&&(r[Ye]=(0,se.expectString)(e[Ye])),r},u5=(e,t)=>{let r={};return e[Ye]!=null&&(r[Ye]=(0,se.expectString)(e[Ye])),r},f5=(e,t)=>{let r={};return e[Ye]!=null&&(r[Ye]=(0,se.expectString)(e[Ye])),r},p5=(e,t)=>{let r={};return e[Ye]!=null&&(r[Ye]=(0,se.expectString)(e[Ye])),r},m5=(e,t)=>{let r={};return e[Ye]!=null&&(r[Ye]=(0,se.expectString)(e[Ye])),r},h5=(e,t)=>{let r={};return e[Ye]!=null&&(r[Ye]=(0,se.expectString)(e[Ye])),r},Os=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),g5=(0,se.withBaseException)(Ut),XD=async(e,t,r,s,n)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return s!==void 0&&(d.hostname=s),n!==void 0&&(d.body=n),new jD.HttpRequest(d)},ZD={"content-type":"application/x-www-form-urlencoded"},ek="2011-06-15",tk="Action",x_="AccessKeyId",y5="AssumeRole",A_="AssumedRoleId",yi="AssumedRoleUser",S5="AssumeRoleWithWebIdentity",T_="Arn",P_="Audience",Si="Credentials",I_="ContextAssertion",Ei="DurationSeconds",N_="Expiration",O_="ExternalId",D_="Key",_i="Policy",wi="PolicyArns",k_="ProviderArn",M_="ProvidedContexts",L_="ProviderId",bi="PackedPolicySize",q_="Provider",Ci="RoleArn",Ri="RoleSessionName",F_="SecretAccessKey",$_="SubjectFromWebIdentityToken",Ns="SourceIdentity",U_="SerialNumber",B_="SessionToken",H_="Tags",j_="TokenCode",z_="TransitiveTagKeys",rk="Version",V_="Value",G_="WebIdentityToken",W_="arn",Ye="message",sk=e=>Object.entries(e).map(([t,r])=>(0,se.extendedEncodeURIComponent)(t)+"="+(0,se.extendedEncodeURIComponent)(r)).join("&"),E5=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var nk,ok,ik,go,Lf=S(()=>{nk=y(Dt()),ok=y(nr()),ik=y(F());Cf();Bc();Q_();go=class extends ik.Command.classBuilder().ep(bf).m(function(t,r,s,n){return[(0,ok.getSerdePlugin)(s,this.serialize,this.deserialize),(0,nk.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,C_).ser(zD).de(GD).build(){}});var ak,ck,dk,yo,qf=S(()=>{ak=y(Dt()),ck=y(nr()),dk=y(F());Cf();Bc();Q_();yo=class extends dk.Command.classBuilder().ep(bf).m(function(t,r,s,n){return[(0,ck.getSerdePlugin)(s,this.serialize,this.deserialize),(0,ak.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(R_,v_).ser(VD).de(WD).build(){}});var lk,_5,Ff,uk=S(()=>{lk=y(F());Lf();qf();Dc();_5={AssumeRoleCommand:go,AssumeRoleWithWebIdentityCommand:yo},Ff=class extends Zr{};(0,lk.createAggregatedClient)(_5,Ff)});var fk=S(()=>{Lf();qf()});var pk=S(()=>{Bc()});var mk,hk,gk,yk,Sk,Ek,_k=S(()=>{Fr();mk=y(li());Lf();qf();hk=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},gk=async(e,t,r,s={})=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t,i=await(0,mk.stsRegionDefaultResolver)(s)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),n??o??i},yk=(e,t)=>{let r,s;return async(n,o)=>{if(s=n,!r){let{logger:l=e?.parentClientConfig?.logger,profile:u=e?.parentClientConfig?.profile,region:h,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:C=e?.parentClientConfig?.userAgentAppId}=e,v=await gk(h,e?.parentClientConfig?.region,g,{logger:l,profile:u}),A=!Ek(m);r=new t({...e,userAgentAppId:C,profile:u,credentialDefaultProvider:()=>async()=>s,region:v,requestHandler:A?m:void 0,logger:l})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new go(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let c=hk(a),d={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return en(d,"CREDENTIALS_STS_ASSUME_ROLE","i"),d}},Sk=(e,t)=>{let r;return async s=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:d=e?.parentClientConfig?.profile,region:l,requestHandler:u=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:m=e?.parentClientConfig?.userAgentAppId}=e,g=await gk(l,e?.parentClientConfig?.region,h,{logger:c,profile:d}),C=!Ek(u);r=new t({...e,userAgentAppId:m,profile:d,region:g,requestHandler:C?u:void 0,logger:c})}let{Credentials:n,AssumedRoleUser:o}=await r.send(new yo(s));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);let i=hk(o),a={accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,...n.CredentialScope&&{credentialScope:n.CredentialScope},...i&&{accountId:i}};return i&&en(a,"RESOLVED_ACCOUNT_ID","T"),en(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},Ek=e=>e?.metadata?.handlerProtocol==="h2"});var wk,bk,Ck,w5,Rk=S(()=>{_k();Dc();wk=(e,t)=>t?class extends e{constructor(s){super(s);for(let n of t)this.middlewareStack.use(n)}}:e,bk=(e={},t)=>yk(e,wk(Zr,t)),Ck=(e={},t)=>Sk(e,wk(Zr,t)),w5=e=>t=>e({roleAssumer:bk(t),roleAssumerWithWebIdentity:Ck(t),...t})});var K_={};tt(K_,{AssumeRoleCommand:()=>go,AssumeRoleResponseFilterSensitiveLog:()=>C_,AssumeRoleWithWebIdentityCommand:()=>yo,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>R_,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>v_,CredentialsFilterSensitiveLog:()=>b_,ExpiredTokenException:()=>kc,IDPCommunicationErrorException:()=>Uc,IDPRejectedClaimException:()=>Fc,InvalidIdentityTokenException:()=>$c,MalformedPolicyDocumentException:()=>Mc,PackedPolicyTooLargeException:()=>Lc,RegionDisabledException:()=>qc,STS:()=>Ff,STSClient:()=>Zr,STSServiceException:()=>Ut,__Client:()=>__.Client,decorateDefaultCredentialProvider:()=>w5,getDefaultRoleAssumer:()=>bk,getDefaultRoleAssumerWithWebIdentity:()=>Ck});var Y_=S(()=>{Dc();uk();fk();pk();Rk();Mf()});var Z_=w(vk=>{"use strict";var X_=Ot(),J_=xe(),b5=require("child_process"),C5=require("util"),R5=(Fr(),z(tn)),v5=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let o=new Date;if(new Date(t.Expiration)<o)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let s=t.AccountId;!s&&r?.[e]?.aws_account_id&&(s=r[e].aws_account_id);let n={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...s&&{accountId:s}};return R5.setCredentialFeature(n,"CREDENTIALS_PROCESS","w"),n},x5=async(e,t,r)=>{let s=t[e];if(t[e]){let n=s.credential_process;if(n!==void 0){let o=C5.promisify(X_.externalDataInterceptor?.getTokenRecord?.().exec??b5.exec);try{let{stdout:i}=await o(n),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return v5(e,a,t)}catch(i){throw new J_.CredentialsProviderError(i.message,{logger:r})}}else throw new J_.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new J_.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},A5=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await X_.parseKnownFiles(e);return x5(X_.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};vk.fromProcess=A5});var ew=w(ts=>{"use strict";var T5=ts&&ts.__createBinding||(Object.create?(function(e,t,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]})),P5=ts&&ts.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),I5=ts&&ts.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var s=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[s.length]=n);return s},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s=e(t),n=0;n<s.length;n++)s[n]!=="default"&&T5(r,t,s[n]);return P5(r,t),r}})();Object.defineProperty(ts,"__esModule",{value:!0});ts.fromWebToken=void 0;var N5=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:s,webIdentityToken:n,providerId:o,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:d}=e;if(!d){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>I5((Y_(),z(K_))));d=l({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return d({RoleArn:r,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:c})};ts.fromWebToken=N5});var Ak=w($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.fromTokenFile=void 0;var O5=(Fr(),z(tn)),D5=xe(),k5=Ot(),M5=require("fs"),L5=ew(),xk="AWS_WEB_IDENTITY_TOKEN_FILE",q5="AWS_ROLE_ARN",F5="AWS_ROLE_SESSION_NAME",$5=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[xk],s=e?.roleArn??process.env[q5],n=e?.roleSessionName??process.env[F5];if(!r||!s)throw new D5.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,L5.fromWebToken)({...e,webIdentityToken:k5.externalDataInterceptor?.getTokenRecord?.()[r]??(0,M5.readFileSync)(r,{encoding:"ascii"}),roleArn:s,roleSessionName:n})(t);return r===process.env[xk]&&(0,O5.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};$f.fromTokenFile=$5});var tw=w(Hc=>{"use strict";var Tk=Ak(),Pk=ew();Object.keys(Tk).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Hc,e)&&Object.defineProperty(Hc,e,{enumerable:!0,get:function(){return Tk[e]}})});Object.keys(Pk).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Hc,e)&&Object.defineProperty(Hc,e,{enumerable:!0,get:function(){return Pk[e]}})})});var Mk=w(kk=>{"use strict";var sw=Ot(),jc=xe(),Rn=(Fr(),z(tn)),U5=(e,t,r)=>{let s={EcsContainer:async n=>{let{fromHttp:o}=await Promise.resolve().then(()=>y(VE())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>y(hn()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>jc.chain(o(n??{}),i(n))().then(rw)},Ec2InstanceMetadata:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>y(hn()));return async()=>o(n)().then(rw)},Environment:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>y(qE()));return async()=>o(n)().then(rw)}};if(e in s)return s[e];throw new jc.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},rw=e=>Rn.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),B5=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(H5(e,{profile:t,logger:r})||j5(e,{profile:t,logger:r})),H5=(e,{profile:t,logger:r})=>{let s=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return s&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),s},j5=(e,{profile:t,logger:r})=>{let s=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return s&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),s},z5=async(e,t,r,s={},n)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:i,region:a}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(Y_(),K_));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(i&&i in s)throw new jc.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${sw.getProfileName(r)}. Profiles visited: `+Object.keys(s).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${i?`source_profile=[${i}]`:`profile=[${e}]`}`);let c=i?n(i,t,r,{...s,[i]:!0},Ik(t[i]??{})):(await U5(o.credential_source,e,r.logger)(r))();if(Ik(o))return c.then(d=>Rn.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:l}=o;if(l){if(!r.mfaCodeProvider)throw new jc.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=l,d.TokenCode=await r.mfaCodeProvider(l)}let u=await c;return r.roleAssumer(u,d).then(h=>Rn.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},Ik=e=>!e.role_arn&&!!e.credential_source,V5=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",G5=async(e,t)=>Promise.resolve().then(()=>y(Z_())).then(({fromProcess:r})=>r({...e,profile:t})().then(s=>Rn.setCredentialFeature(s,"CREDENTIALS_PROFILE_PROCESS","v"))),W5=async(e,t,r={})=>{let{fromSSO:s}=await Promise.resolve().then(()=>y(g_()));return s({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(n=>t.sso_session?Rn.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO","r"):Rn.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},Q5=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),Nk=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,Ok=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return Rn.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},K5=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,Y5=async(e,t)=>Promise.resolve().then(()=>y(tw())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(s=>Rn.setCredentialFeature(s,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),Dk=async(e,t,r,s={},n=!1)=>{let o=t[e];if(Object.keys(s).length>0&&Nk(o))return Ok(o,r);if(n||B5(o,{profile:e,logger:r.logger}))return z5(e,t,r,s,Dk);if(Nk(o))return Ok(o,r);if(K5(o))return Y5(o,r);if(V5(o))return G5(r,e);if(Q5(o))return await W5(e,o,r);throw new jc.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},J5=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let s=await sw.parseKnownFiles(r);return Dk(sw.getProfileName({profile:e.profile??t?.profile}),s,r)};kk.fromIni=J5});var $k=w(Uf=>{"use strict";var nw=qE(),zc=xe(),X5=Ot(),Lk="AWS_EC2_METADATA_DISABLED",Z5=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:s,fromInstanceMetadata:n}=await Promise.resolve().then(()=>y(hn()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>y(VE()));return zc.chain(o(e),s(e))}return process.env[Lk]&&process.env[Lk]!=="false"?async()=>{throw new zc.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),n(e))};function e8(e,t){let r=t8(e),s,n,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),s)await s;else if(!o||t?.(o))if(o)n||(n=r(a).then(c=>{o=c,n=void 0}));else return s=r(a).then(c=>{o=c,s=void 0}),i(a);return o};return i}var t8=e=>async t=>{let r;for(let s of e)try{return await s(t)}catch(n){if(r=n,n?.tryNextLink)continue;throw n}throw r},qk=!1,r8=(e={})=>e8([async()=>{if(e.profile??process.env[X5.ENV_PROFILE])throw process.env[nw.ENV_KEY]&&process.env[nw.ENV_SECRET]&&(qk||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),qk=!0)),new zc.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),nw.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e;if(!r&&!s&&!n&&!o&&!i)throw new zc.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>y(g_()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>y(Mk()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>y(Z_()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>y(tw()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await Z5(e))()),async()=>{throw new zc.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],Fk),s8=e=>e?.expiration!==void 0,Fk=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;Uf.credentialsTreatedAsExpired=Fk;Uf.credentialsWillNeedRefresh=s8;Uf.defaultProvider=r8});var e1=w(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.ruleSet=void 0;var Yk="required",hr="fn",gr="argv",Ai="ref",Uk=!0,Bk="isSet",Vc="booleanEquals",vi="error",xi="endpoint",Ds="tree",ow="PartitionResult",iw="getAttr",Hk={[Yk]:!1,type:"string"},jk={[Yk]:!0,default:!1,type:"boolean"},zk={[Ai]:"Endpoint"},Jk={[hr]:Vc,[gr]:[{[Ai]:"UseFIPS"},!0]},Xk={[hr]:Vc,[gr]:[{[Ai]:"UseDualStack"},!0]},mr={},Vk={[hr]:iw,[gr]:[{[Ai]:ow},"supportsFIPS"]},Zk={[Ai]:ow},Gk={[hr]:Vc,[gr]:[!0,{[hr]:iw,[gr]:[Zk,"supportsDualStack"]}]},Wk=[Jk],Qk=[Xk],Kk=[{[Ai]:"Region"}],n8={version:"1.0",parameters:{Region:Hk,UseDualStack:jk,UseFIPS:jk,Endpoint:Hk},rules:[{conditions:[{[hr]:Bk,[gr]:[zk]}],rules:[{conditions:Wk,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:vi},{conditions:Qk,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:vi},{endpoint:{url:zk,properties:mr,headers:mr},type:xi}],type:Ds},{conditions:[{[hr]:Bk,[gr]:Kk}],rules:[{conditions:[{[hr]:"aws.partition",[gr]:Kk,assign:ow}],rules:[{conditions:[Jk,Xk],rules:[{conditions:[{[hr]:Vc,[gr]:[Uk,Vk]},Gk],rules:[{endpoint:{url:"https://sqs-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mr,headers:mr},type:xi}],type:Ds},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:vi}],type:Ds},{conditions:Wk,rules:[{conditions:[{[hr]:Vc,[gr]:[Vk,Uk]}],rules:[{conditions:[{[hr]:"stringEquals",[gr]:[{[hr]:iw,[gr]:[Zk,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sqs.{Region}.amazonaws.com",properties:mr,headers:mr},type:xi},{endpoint:{url:"https://sqs-fips.{Region}.{PartitionResult#dnsSuffix}",properties:mr,headers:mr},type:xi}],type:Ds},{error:"FIPS is enabled but this partition does not support FIPS",type:vi}],type:Ds},{conditions:Qk,rules:[{conditions:[Gk],rules:[{endpoint:{url:"https://sqs.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mr,headers:mr},type:xi}],type:Ds},{error:"DualStack is enabled but this partition does not support DualStack",type:vi}],type:Ds},{endpoint:{url:"https://sqs.{Region}.{PartitionResult#dnsSuffix}",properties:mr,headers:mr},type:xi}],type:Ds}],type:Ds},{error:"Invalid Configuration: Missing Region",type:vi}]};Bf.ruleSet=n8});var t1=w(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.defaultEndpointResolver=void 0;var o8=qr(),aw=Mr(),i8=e1(),a8=new aw.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),c8=(e,t={})=>a8.get(e,()=>(0,aw.resolveEndpoint)(i8.ruleSet,{endpointParams:e,logger:t.logger}));Hf.defaultEndpointResolver=c8;aw.customEndpointFunctions.aws=o8.awsEndpointFunctions});var n1=w(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.getRuntimeConfig=void 0;var d8=(at(),z(Qr)),l8=F(),u8=or(),r1=Ae(),s1=Te(),f8=LE(),p8=t1(),m8=e=>({apiVersion:"2012-11-05",base64Decoder:e?.base64Decoder??r1.fromBase64,base64Encoder:e?.base64Encoder??r1.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??p8.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??f8.defaultSQSHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new d8.AwsSdkSigV4Signer}],logger:e?.logger??new l8.NoOpLogger,serviceId:e?.serviceId??"SQS",urlParser:e?.urlParser??u8.parseUrl,utf8Decoder:e?.utf8Decoder??s1.fromUtf8,utf8Encoder:e?.utf8Encoder??s1.toUtf8});jf.getRuntimeConfig=m8});var l1=w(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.getRuntimeConfig=void 0;var h8=(Xs(),z(Js)),g8=h8.__importDefault(a0()),o1=(at(),z(Qr)),y8=$k(),i1=cc(),zf=ze(),a1=vs(),c1=ft(),So=$t(),d1=sr(),S8=xs(),E8=Yr(),_8=n1(),w8=F(),b8=Ts(),C8=F(),R8=e=>{(0,C8.emitWarningIfUnsupportedVersion)(process.version);let t=(0,b8.resolveDefaultsModeConfig)(e),r=()=>t().then(w8.loadConfigsForDefaultMode),s=(0,_8.getRuntimeConfig)(e);(0,o1.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,So.loadConfig)(o1.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??S8.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??y8.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,i1.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:g8.default.version}),maxAttempts:e?.maxAttempts??(0,So.loadConfig)(c1.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),md5:e?.md5??a1.Hash.bind(null,"md5"),region:e?.region??(0,So.loadConfig)(zf.NODE_REGION_CONFIG_OPTIONS,{...zf.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:d1.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,So.loadConfig)({...c1.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||E8.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??a1.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??d1.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,So.loadConfig)(zf.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,So.loadConfig)(zf.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,So.loadConfig)(i1.NODE_APP_ID_CONFIG_OPTIONS,n)}};Vf.getRuntimeConfig=R8});var C1=w(j=>{"use strict";var u1=ds(),v8=ls(),x8=us(),Wc=pA(),f1=ri(),A8=ze(),Gc=(ve(),z(Gr)),T8=Cs(),Ie=Dt(),p1=ft(),x=F(),m1=LE(),P8=l1(),h1=li(),cw=ce(),Le=nr(),k=(at(),z(Qr)),I8=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sqs"}),qe={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},N8=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},O8=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),D8=(e,t)=>{let r=Object.assign(h1.getAwsRegionExtensionConfiguration(e),x.getDefaultExtensionConfiguration(e),cw.getHttpHandlerExtensionConfiguration(e),N8(e));return t.forEach(s=>s.configure(r)),Object.assign(e,h1.resolveAwsRegionExtensionConfiguration(r),x.resolveDefaultRuntimeConfig(r),cw.resolveHttpHandlerRuntimeConfig(r),O8(r))},Ti=class extends x.Client{config;constructor(...[t]){let r=P8.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=I8(r),n=f1.resolveUserAgentConfig(s),o=p1.resolveRetryConfig(n),i=A8.resolveRegionConfig(o),a=u1.resolveHostHeaderConfig(i),c=Ie.resolveEndpointConfig(a),d=Wc.resolveQueueUrlConfig(c),l=m1.resolveHttpAuthSchemeConfig(d),u=D8(l,t?.extensions||[]);this.config=u,this.middlewareStack.use(f1.getUserAgentPlugin(this.config)),this.middlewareStack.use(p1.getRetryPlugin(this.config)),this.middlewareStack.use(T8.getContentLengthPlugin(this.config)),this.middlewareStack.use(u1.getHostHeaderPlugin(this.config)),this.middlewareStack.use(v8.getLoggerPlugin(this.config)),this.middlewareStack.use(x8.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Wc.getQueueUrlPlugin(this.config)),this.middlewareStack.use(Gc.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:m1.defaultSQSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async h=>new Gc.DefaultIdentityProviderConfig({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Gc.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},ge=class e extends x.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Gf=class e extends ge{name="InvalidAddress";$fault="client";constructor(t){super({name:"InvalidAddress",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Wf=class e extends ge{name="InvalidSecurity";$fault="client";constructor(t){super({name:"InvalidSecurity",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Qf=class e extends ge{name="OverLimit";$fault="client";constructor(t){super({name:"OverLimit",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Kf=class e extends ge{name="QueueDoesNotExist";$fault="client";constructor(t){super({name:"QueueDoesNotExist",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Yf=class e extends ge{name="RequestThrottled";$fault="client";constructor(t){super({name:"RequestThrottled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Jf=class e extends ge{name="UnsupportedOperation";$fault="client";constructor(t){super({name:"UnsupportedOperation",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Xf=class e extends ge{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Zf=class e extends ge{name="MessageNotInflight";$fault="client";constructor(t){super({name:"MessageNotInflight",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ep=class e extends ge{name="ReceiptHandleIsInvalid";$fault="client";constructor(t){super({name:"ReceiptHandleIsInvalid",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},tp=class e extends ge{name="BatchEntryIdsNotDistinct";$fault="client";constructor(t){super({name:"BatchEntryIdsNotDistinct",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},rp=class e extends ge{name="EmptyBatchRequest";$fault="client";constructor(t){super({name:"EmptyBatchRequest",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},sp=class e extends ge{name="InvalidBatchEntryId";$fault="client";constructor(t){super({name:"InvalidBatchEntryId",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},np=class e extends ge{name="TooManyEntriesInBatchRequest";$fault="client";constructor(t){super({name:"TooManyEntriesInBatchRequest",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},k8={All:"All",ApproximateNumberOfMessages:"ApproximateNumberOfMessages",ApproximateNumberOfMessagesDelayed:"ApproximateNumberOfMessagesDelayed",ApproximateNumberOfMessagesNotVisible:"ApproximateNumberOfMessagesNotVisible",ContentBasedDeduplication:"ContentBasedDeduplication",CreatedTimestamp:"CreatedTimestamp",DeduplicationScope:"DeduplicationScope",DelaySeconds:"DelaySeconds",FifoQueue:"FifoQueue",FifoThroughputLimit:"FifoThroughputLimit",KmsDataKeyReusePeriodSeconds:"KmsDataKeyReusePeriodSeconds",KmsMasterKeyId:"KmsMasterKeyId",LastModifiedTimestamp:"LastModifiedTimestamp",MaximumMessageSize:"MaximumMessageSize",MessageRetentionPeriod:"MessageRetentionPeriod",Policy:"Policy",QueueArn:"QueueArn",ReceiveMessageWaitTimeSeconds:"ReceiveMessageWaitTimeSeconds",RedriveAllowPolicy:"RedriveAllowPolicy",RedrivePolicy:"RedrivePolicy",SqsManagedSseEnabled:"SqsManagedSseEnabled",VisibilityTimeout:"VisibilityTimeout"},op=class e extends ge{name="InvalidAttributeName";$fault="client";constructor(t){super({name:"InvalidAttributeName",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ip=class e extends ge{name="InvalidAttributeValue";$fault="client";constructor(t){super({name:"InvalidAttributeValue",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ap=class e extends ge{name="QueueDeletedRecently";$fault="client";constructor(t){super({name:"QueueDeletedRecently",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},cp=class e extends ge{name="QueueNameExists";$fault="client";constructor(t){super({name:"QueueNameExists",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},dp=class e extends ge{name="InvalidIdFormat";$fault="client";constructor(t){super({name:"InvalidIdFormat",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},lp=class e extends ge{name="PurgeQueueInProgress";$fault="client";constructor(t){super({name:"PurgeQueueInProgress",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},up=class e extends ge{name="KmsAccessDenied";$fault="client";constructor(t){super({name:"KmsAccessDenied",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},fp=class e extends ge{name="KmsDisabled";$fault="client";constructor(t){super({name:"KmsDisabled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},pp=class e extends ge{name="KmsInvalidKeyUsage";$fault="client";constructor(t){super({name:"KmsInvalidKeyUsage",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},mp=class e extends ge{name="KmsInvalidState";$fault="client";constructor(t){super({name:"KmsInvalidState",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},hp=class e extends ge{name="KmsNotFound";$fault="client";constructor(t){super({name:"KmsNotFound",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},gp=class e extends ge{name="KmsOptInRequired";$fault="client";constructor(t){super({name:"KmsOptInRequired",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},yp=class e extends ge{name="KmsThrottled";$fault="client";constructor(t){super({name:"KmsThrottled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},M8={AWSTraceHeader:"AWSTraceHeader",All:"All",ApproximateFirstReceiveTimestamp:"ApproximateFirstReceiveTimestamp",ApproximateReceiveCount:"ApproximateReceiveCount",DeadLetterQueueSourceArn:"DeadLetterQueueSourceArn",MessageDeduplicationId:"MessageDeduplicationId",MessageGroupId:"MessageGroupId",SenderId:"SenderId",SentTimestamp:"SentTimestamp",SequenceNumber:"SequenceNumber"},Sp=class e extends ge{name="InvalidMessageContents";$fault="client";constructor(t){super({name:"InvalidMessageContents",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},L8={AWSTraceHeader:"AWSTraceHeader"},Ep=class e extends ge{name="BatchRequestTooLong";$fault="client";constructor(t){super({name:"BatchRequestTooLong",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},q8=async(e,t)=>{let r=Ue("AddPermission"),s;return s=JSON.stringify(nY(e)),$e(t,r,"/",void 0,s)},F8=async(e,t)=>{let r=Ue("CancelMessageMoveTask"),s;return s=JSON.stringify(iY(e)),$e(t,r,"/",void 0,s)},$8=async(e,t)=>{let r=Ue("ChangeMessageVisibility"),s;return s=JSON.stringify(lY(e)),$e(t,r,"/",void 0,s)},U8=async(e,t)=>{let r=Ue("ChangeMessageVisibilityBatch"),s;return s=JSON.stringify(aY(e)),$e(t,r,"/",void 0,s)},B8=async(e,t)=>{let r=Ue("CreateQueue"),s;return s=JSON.stringify(uY(e)),$e(t,r,"/",void 0,s)},H8=async(e,t)=>{let r=Ue("DeleteMessage"),s;return s=JSON.stringify(hY(e)),$e(t,r,"/",void 0,s)},j8=async(e,t)=>{let r=Ue("DeleteMessageBatch"),s;return s=JSON.stringify(fY(e)),$e(t,r,"/",void 0,s)},z8=async(e,t)=>{let r=Ue("DeleteQueue"),s;return s=JSON.stringify(gY(e)),$e(t,r,"/",void 0,s)},V8=async(e,t)=>{let r=Ue("GetQueueAttributes"),s;return s=JSON.stringify(yY(e)),$e(t,r,"/",void 0,s)},G8=async(e,t)=>{let r=Ue("GetQueueUrl"),s;return s=JSON.stringify(SY(e)),$e(t,r,"/",void 0,s)},W8=async(e,t)=>{let r=Ue("ListDeadLetterSourceQueues"),s;return s=JSON.stringify(EY(e)),$e(t,r,"/",void 0,s)},Q8=async(e,t)=>{let r=Ue("ListMessageMoveTasks"),s;return s=JSON.stringify(_Y(e)),$e(t,r,"/",void 0,s)},K8=async(e,t)=>{let r=Ue("ListQueues"),s;return s=JSON.stringify(wY(e)),$e(t,r,"/",void 0,s)},Y8=async(e,t)=>{let r=Ue("ListQueueTags"),s;return s=JSON.stringify(bY(e)),$e(t,r,"/",void 0,s)},J8=async(e,t)=>{let r=Ue("PurgeQueue"),s;return s=JSON.stringify(AY(e)),$e(t,r,"/",void 0,s)},X8=async(e,t)=>{let r=Ue("ReceiveMessage"),s;return s=JSON.stringify(TY(e)),$e(t,r,"/",void 0,s)},Z8=async(e,t)=>{let r=Ue("RemovePermission"),s;return s=JSON.stringify(PY(e)),$e(t,r,"/",void 0,s)},e9=async(e,t)=>{let r=Ue("SendMessage"),s;return s=JSON.stringify(DY(e,t)),$e(t,r,"/",void 0,s)},t9=async(e,t)=>{let r=Ue("SendMessageBatch"),s;return s=JSON.stringify(IY(e,t)),$e(t,r,"/",void 0,s)},r9=async(e,t)=>{let r=Ue("SetQueueAttributes"),s;return s=JSON.stringify(kY(e)),$e(t,r,"/",void 0,s)},s9=async(e,t)=>{let r=Ue("StartMessageMoveTask"),s;return s=JSON.stringify(MY(e)),$e(t,r,"/",void 0,s)},n9=async(e,t)=>{let r=Ue("TagQueue"),s;return s=JSON.stringify(qY(e)),$e(t,r,"/",void 0,s)},o9=async(e,t)=>{let r=Ue("UntagQueue"),s;return s=JSON.stringify(FY(e)),$e(t,r,"/",void 0,s)},i9=async(e,t)=>e.statusCode>=300?Fe(e,t):(await x.collectBody(e.body,t),{$metadata:W(e)}),a9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},c9=async(e,t)=>e.statusCode>=300?Fe(e,t):(await x.collectBody(e.body,t),{$metadata:W(e)}),d9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},l9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},u9=async(e,t)=>e.statusCode>=300?Fe(e,t):(await x.collectBody(e.body,t),{$metadata:W(e)}),f9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},p9=async(e,t)=>e.statusCode>=300?Fe(e,t):(await x.collectBody(e.body,t),{$metadata:W(e)}),m9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},h9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},g9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},y9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},S9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},E9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},_9=async(e,t)=>e.statusCode>=300?Fe(e,t):(await x.collectBody(e.body,t),{$metadata:W(e)}),w9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=zY(r,t),{$metadata:W(e),...s}},b9=async(e,t)=>e.statusCode>=300?Fe(e,t):(await x.collectBody(e.body,t),{$metadata:W(e)}),C9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},R9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},v9=async(e,t)=>e.statusCode>=300?Fe(e,t):(await x.collectBody(e.body,t),{$metadata:W(e)}),x9=async(e,t)=>{if(e.statusCode>=300)return Fe(e,t);let r=await k.parseJsonBody(e.body,t),s={};return s=x._json(r),{$metadata:W(e),...s}},A9=async(e,t)=>e.statusCode>=300?Fe(e,t):(await x.collectBody(e.body,t),{$metadata:W(e)}),T9=async(e,t)=>e.statusCode>=300?Fe(e,t):(await x.collectBody(e.body,t),{$metadata:W(e)}),Fe=async(e,t)=>{let r={...e,body:await k.parseJsonErrorBody(e.body,t)};GY(r,e.headers);let s=k.loadRestJsonErrorCode(e,r.body);switch(s){case"InvalidAddress":case"com.amazonaws.sqs#InvalidAddress":throw await O9(r);case"InvalidSecurity":case"com.amazonaws.sqs#InvalidSecurity":throw await F9(r);case"OverLimit":case"com.amazonaws.sqs#OverLimit":throw await W9(r);case"QueueDoesNotExist":case"com.amazonaws.sqs#QueueDoesNotExist":case"AWS.SimpleQueueService.NonExistentQueue":throw await Y9(r);case"RequestThrottled":case"com.amazonaws.sqs#RequestThrottled":throw await Z9(r);case"UnsupportedOperation":case"com.amazonaws.sqs#UnsupportedOperation":case"AWS.SimpleQueueService.UnsupportedOperation":throw await rY(r);case"ResourceNotFoundException":case"com.amazonaws.sqs#ResourceNotFoundException":throw await eY(r);case"MessageNotInflight":case"com.amazonaws.sqs#MessageNotInflight":case"AWS.SimpleQueueService.MessageNotInflight":throw await G9(r);case"ReceiptHandleIsInvalid":case"com.amazonaws.sqs#ReceiptHandleIsInvalid":throw await X9(r);case"BatchEntryIdsNotDistinct":case"com.amazonaws.sqs#BatchEntryIdsNotDistinct":case"AWS.SimpleQueueService.BatchEntryIdsNotDistinct":throw await P9(r);case"EmptyBatchRequest":case"com.amazonaws.sqs#EmptyBatchRequest":case"AWS.SimpleQueueService.EmptyBatchRequest":throw await N9(r);case"InvalidBatchEntryId":case"com.amazonaws.sqs#InvalidBatchEntryId":case"AWS.SimpleQueueService.InvalidBatchEntryId":throw await M9(r);case"TooManyEntriesInBatchRequest":case"com.amazonaws.sqs#TooManyEntriesInBatchRequest":case"AWS.SimpleQueueService.TooManyEntriesInBatchRequest":throw await tY(r);case"InvalidAttributeName":case"com.amazonaws.sqs#InvalidAttributeName":throw await D9(r);case"InvalidAttributeValue":case"com.amazonaws.sqs#InvalidAttributeValue":throw await k9(r);case"QueueDeletedRecently":case"com.amazonaws.sqs#QueueDeletedRecently":case"AWS.SimpleQueueService.QueueDeletedRecently":throw await K9(r);case"QueueNameExists":case"com.amazonaws.sqs#QueueNameExists":case"QueueAlreadyExists":throw await J9(r);case"InvalidIdFormat":case"com.amazonaws.sqs#InvalidIdFormat":throw await L9(r);case"PurgeQueueInProgress":case"com.amazonaws.sqs#PurgeQueueInProgress":case"AWS.SimpleQueueService.PurgeQueueInProgress":throw await Q9(r);case"KmsAccessDenied":case"com.amazonaws.sqs#KmsAccessDenied":case"KMS.AccessDeniedException":throw await $9(r);case"KmsDisabled":case"com.amazonaws.sqs#KmsDisabled":case"KMS.DisabledException":throw await U9(r);case"KmsInvalidKeyUsage":case"com.amazonaws.sqs#KmsInvalidKeyUsage":case"KMS.InvalidKeyUsageException":throw await B9(r);case"KmsInvalidState":case"com.amazonaws.sqs#KmsInvalidState":case"KMS.InvalidStateException":throw await H9(r);case"KmsNotFound":case"com.amazonaws.sqs#KmsNotFound":case"KMS.NotFoundException":throw await j9(r);case"KmsOptInRequired":case"com.amazonaws.sqs#KmsOptInRequired":case"KMS.OptInRequired":throw await z9(r);case"KmsThrottled":case"com.amazonaws.sqs#KmsThrottled":case"KMS.ThrottlingException":throw await V9(r);case"InvalidMessageContents":case"com.amazonaws.sqs#InvalidMessageContents":throw await q9(r);case"BatchRequestTooLong":case"com.amazonaws.sqs#BatchRequestTooLong":case"AWS.SimpleQueueService.BatchRequestTooLong":throw await I9(r);default:let n=r.body;return VY({output:e,parsedBody:n,errorCode:s})}},P9=async(e,t)=>{let r=e.body,s=x._json(r),n=new tp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},I9=async(e,t)=>{let r=e.body,s=x._json(r),n=new Ep({$metadata:W(e),...s});return x.decorateServiceException(n,r)},N9=async(e,t)=>{let r=e.body,s=x._json(r),n=new rp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},O9=async(e,t)=>{let r=e.body,s=x._json(r),n=new Gf({$metadata:W(e),...s});return x.decorateServiceException(n,r)},D9=async(e,t)=>{let r=e.body,s=x._json(r),n=new op({$metadata:W(e),...s});return x.decorateServiceException(n,r)},k9=async(e,t)=>{let r=e.body,s=x._json(r),n=new ip({$metadata:W(e),...s});return x.decorateServiceException(n,r)},M9=async(e,t)=>{let r=e.body,s=x._json(r),n=new sp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},L9=async(e,t)=>{let r=e.body,s=x._json(r),n=new dp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},q9=async(e,t)=>{let r=e.body,s=x._json(r),n=new Sp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},F9=async(e,t)=>{let r=e.body,s=x._json(r),n=new Wf({$metadata:W(e),...s});return x.decorateServiceException(n,r)},$9=async(e,t)=>{let r=e.body,s=x._json(r),n=new up({$metadata:W(e),...s});return x.decorateServiceException(n,r)},U9=async(e,t)=>{let r=e.body,s=x._json(r),n=new fp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},B9=async(e,t)=>{let r=e.body,s=x._json(r),n=new pp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},H9=async(e,t)=>{let r=e.body,s=x._json(r),n=new mp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},j9=async(e,t)=>{let r=e.body,s=x._json(r),n=new hp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},z9=async(e,t)=>{let r=e.body,s=x._json(r),n=new gp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},V9=async(e,t)=>{let r=e.body,s=x._json(r),n=new yp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},G9=async(e,t)=>{let r=e.body,s=x._json(r),n=new Zf({$metadata:W(e),...s});return x.decorateServiceException(n,r)},W9=async(e,t)=>{let r=e.body,s=x._json(r),n=new Qf({$metadata:W(e),...s});return x.decorateServiceException(n,r)},Q9=async(e,t)=>{let r=e.body,s=x._json(r),n=new lp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},K9=async(e,t)=>{let r=e.body,s=x._json(r),n=new ap({$metadata:W(e),...s});return x.decorateServiceException(n,r)},Y9=async(e,t)=>{let r=e.body,s=x._json(r),n=new Kf({$metadata:W(e),...s});return x.decorateServiceException(n,r)},J9=async(e,t)=>{let r=e.body,s=x._json(r),n=new cp({$metadata:W(e),...s});return x.decorateServiceException(n,r)},X9=async(e,t)=>{let r=e.body,s=x._json(r),n=new ep({$metadata:W(e),...s});return x.decorateServiceException(n,r)},Z9=async(e,t)=>{let r=e.body,s=x._json(r),n=new Yf({$metadata:W(e),...s});return x.decorateServiceException(n,r)},eY=async(e,t)=>{let r=e.body,s=x._json(r),n=new Xf({$metadata:W(e),...s});return x.decorateServiceException(n,r)},tY=async(e,t)=>{let r=e.body,s=x._json(r),n=new np({$metadata:W(e),...s});return x.decorateServiceException(n,r)},rY=async(e,t)=>{let r=e.body,s=x._json(r),n=new Jf({$metadata:W(e),...s});return x.decorateServiceException(n,r)},sY=(e,t)=>e.filter(r=>r!=null).map(r=>k._toStr(r)),nY=(e,t)=>x.take(e,{AWSAccountIds:r=>oY(r),Actions:r=>sY(r),Label:k._toStr,QueueUrl:k._toStr}),g1=(e,t)=>e.filter(r=>r!=null).map(r=>k._toStr(r)),oY=(e,t)=>e.filter(r=>r!=null).map(r=>k._toStr(r)),y1=(e,t)=>e.filter(r=>r!=null).map(r=>t.base64Encoder(r)),iY=(e,t)=>x.take(e,{TaskHandle:k._toStr}),aY=(e,t)=>x.take(e,{Entries:r=>dY(r),QueueUrl:k._toStr}),cY=(e,t)=>x.take(e,{Id:k._toStr,ReceiptHandle:k._toStr,VisibilityTimeout:k._toNum}),dY=(e,t)=>e.filter(r=>r!=null).map(r=>cY(r)),lY=(e,t)=>x.take(e,{QueueUrl:k._toStr,ReceiptHandle:k._toStr,VisibilityTimeout:k._toNum}),uY=(e,t)=>x.take(e,{Attributes:r=>_1(r),QueueName:k._toStr,tags:r=>b1(r)}),fY=(e,t)=>x.take(e,{Entries:r=>mY(r),QueueUrl:k._toStr}),pY=(e,t)=>x.take(e,{Id:k._toStr,ReceiptHandle:k._toStr}),mY=(e,t)=>e.filter(r=>r!=null).map(r=>pY(r)),hY=(e,t)=>x.take(e,{QueueUrl:k._toStr,ReceiptHandle:k._toStr}),gY=(e,t)=>x.take(e,{QueueUrl:k._toStr}),yY=(e,t)=>x.take(e,{AttributeNames:r=>g1(r),QueueUrl:k._toStr}),SY=(e,t)=>x.take(e,{QueueName:k._toStr,QueueOwnerAWSAccountId:k._toStr}),EY=(e,t)=>x.take(e,{MaxResults:k._toNum,NextToken:k._toStr,QueueUrl:k._toStr}),_Y=(e,t)=>x.take(e,{MaxResults:k._toNum,SourceArn:k._toStr}),wY=(e,t)=>x.take(e,{MaxResults:k._toNum,NextToken:k._toStr,QueueNamePrefix:k._toStr}),bY=(e,t)=>x.take(e,{QueueUrl:k._toStr}),CY=(e,t)=>e.filter(r=>r!=null).map(r=>k._toStr(r)),RY=(e,t)=>x.take(e,{BinaryListValues:r=>y1(r,t),BinaryValue:t.base64Encoder,DataType:k._toStr,StringListValues:r=>w1(r),StringValue:k._toStr}),S1=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=RY(n,t)),r),{}),E1=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=xY(n,t)),r),{}),vY=(e,t)=>e.filter(r=>r!=null).map(r=>k._toStr(r)),xY=(e,t)=>x.take(e,{BinaryListValues:r=>y1(r,t),BinaryValue:t.base64Encoder,DataType:k._toStr,StringListValues:r=>w1(r),StringValue:k._toStr}),AY=(e,t)=>x.take(e,{QueueUrl:k._toStr}),_1=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=k._toStr(n)),r),{}),TY=(e,t)=>x.take(e,{AttributeNames:r=>g1(r),MaxNumberOfMessages:k._toNum,MessageAttributeNames:r=>CY(r),MessageSystemAttributeNames:r=>vY(r),QueueUrl:k._toStr,ReceiveRequestAttemptId:k._toStr,VisibilityTimeout:k._toNum,WaitTimeSeconds:k._toNum}),PY=(e,t)=>x.take(e,{Label:k._toStr,QueueUrl:k._toStr}),IY=(e,t)=>x.take(e,{Entries:r=>OY(r,t),QueueUrl:k._toStr}),NY=(e,t)=>x.take(e,{DelaySeconds:k._toNum,Id:k._toStr,MessageAttributes:r=>S1(r,t),MessageBody:k._toStr,MessageDeduplicationId:k._toStr,MessageGroupId:k._toStr,MessageSystemAttributes:r=>E1(r,t)}),OY=(e,t)=>e.filter(r=>r!=null).map(r=>NY(r,t)),DY=(e,t)=>x.take(e,{DelaySeconds:k._toNum,MessageAttributes:r=>S1(r,t),MessageBody:k._toStr,MessageDeduplicationId:k._toStr,MessageGroupId:k._toStr,MessageSystemAttributes:r=>E1(r,t),QueueUrl:k._toStr}),kY=(e,t)=>x.take(e,{Attributes:r=>_1(r),QueueUrl:k._toStr}),MY=(e,t)=>x.take(e,{DestinationArn:k._toStr,MaxNumberOfMessagesPerSecond:k._toNum,SourceArn:k._toStr}),w1=(e,t)=>e.filter(r=>r!=null).map(r=>k._toStr(r)),LY=(e,t)=>e.filter(r=>r!=null).map(r=>k._toStr(r)),b1=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=k._toStr(n)),r),{}),qY=(e,t)=>x.take(e,{QueueUrl:k._toStr,Tags:r=>b1(r)}),FY=(e,t)=>x.take(e,{QueueUrl:k._toStr,TagKeys:r=>LY(r)}),$Y=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>t.base64Decoder(s)),UY=(e,t)=>x.take(e,{Attributes:x._json,Body:x.expectString,MD5OfBody:x.expectString,MD5OfMessageAttributes:x.expectString,MessageAttributes:r=>HY(r,t),MessageId:x.expectString,ReceiptHandle:x.expectString}),BY=(e,t)=>x.take(e,{BinaryListValues:r=>$Y(r,t),BinaryValue:t.base64Decoder,DataType:x.expectString,StringListValues:x._json,StringValue:x.expectString}),HY=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=BY(n,t)),r),{}),jY=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>UY(s,t)),zY=(e,t)=>x.take(e,{Messages:r=>jY(r,t)}),W=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),VY=x.withBaseException(ge),$e=async(e,t,r,s,n)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.body=n),new cw.HttpRequest(d)};function Ue(e){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`AmazonSQS.${e}`,"x-amzn-query-mode":"true"}}var GY=(e,t)=>{let r=t["x-amzn-query-error"];if(e.body!==void 0&&r!=null){let[s,n]=r.split(";"),o=Object.entries(e.body),i={Type:n,Code:s};Object.assign(e.body,i);for(let[a,c]of o)i[a]=c;delete i.__type,e.body.Error=i}},_p=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","AddPermission",{}).n("SQSClient","AddPermissionCommand").f(void 0,void 0).ser(q8).de(i9).build(){},wp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","CancelMessageMoveTask",{}).n("SQSClient","CancelMessageMoveTaskCommand").f(void 0,void 0).ser(F8).de(a9).build(){},bp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ChangeMessageVisibilityBatch",{}).n("SQSClient","ChangeMessageVisibilityBatchCommand").f(void 0,void 0).ser(U8).de(d9).build(){},Cp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ChangeMessageVisibility",{}).n("SQSClient","ChangeMessageVisibilityCommand").f(void 0,void 0).ser($8).de(c9).build(){},Rp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","CreateQueue",{}).n("SQSClient","CreateQueueCommand").f(void 0,void 0).ser(B8).de(l9).build(){},vp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteMessageBatch",{}).n("SQSClient","DeleteMessageBatchCommand").f(void 0,void 0).ser(j8).de(f9).build(){},xp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteMessage",{}).n("SQSClient","DeleteMessageCommand").f(void 0,void 0).ser(H8).de(u9).build(){},Ap=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteQueue",{}).n("SQSClient","DeleteQueueCommand").f(void 0,void 0).ser(z8).de(p9).build(){},Tp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","GetQueueAttributes",{}).n("SQSClient","GetQueueAttributesCommand").f(void 0,void 0).ser(V8).de(m9).build(){},Pp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","GetQueueUrl",{}).n("SQSClient","GetQueueUrlCommand").f(void 0,void 0).ser(G8).de(h9).build(){},Qc=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListDeadLetterSourceQueues",{}).n("SQSClient","ListDeadLetterSourceQueuesCommand").f(void 0,void 0).ser(W8).de(g9).build(){},Ip=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListMessageMoveTasks",{}).n("SQSClient","ListMessageMoveTasksCommand").f(void 0,void 0).ser(Q8).de(y9).build(){},Kc=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListQueues",{}).n("SQSClient","ListQueuesCommand").f(void 0,void 0).ser(K8).de(S9).build(){},Np=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListQueueTags",{}).n("SQSClient","ListQueueTagsCommand").f(void 0,void 0).ser(Y8).de(E9).build(){},Op=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","PurgeQueue",{}).n("SQSClient","PurgeQueueCommand").f(void 0,void 0).ser(J8).de(_9).build(){},Dp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions()),Wc.getReceiveMessagePlugin(s)]}).s("AmazonSQS","ReceiveMessage",{}).n("SQSClient","ReceiveMessageCommand").f(void 0,void 0).ser(X8).de(w9).build(){},kp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","RemovePermission",{}).n("SQSClient","RemovePermissionCommand").f(void 0,void 0).ser(Z8).de(b9).build(){},Mp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions()),Wc.getSendMessageBatchPlugin(s)]}).s("AmazonSQS","SendMessageBatch",{}).n("SQSClient","SendMessageBatchCommand").f(void 0,void 0).ser(t9).de(R9).build(){},Lp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions()),Wc.getSendMessagePlugin(s)]}).s("AmazonSQS","SendMessage",{}).n("SQSClient","SendMessageCommand").f(void 0,void 0).ser(e9).de(C9).build(){},qp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","SetQueueAttributes",{}).n("SQSClient","SetQueueAttributesCommand").f(void 0,void 0).ser(r9).de(v9).build(){},Fp=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","StartMessageMoveTask",{}).n("SQSClient","StartMessageMoveTaskCommand").f(void 0,void 0).ser(s9).de(x9).build(){},$p=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","TagQueue",{}).n("SQSClient","TagQueueCommand").f(void 0,void 0).ser(n9).de(A9).build(){},Up=class extends x.Command.classBuilder().ep(qe).m(function(t,r,s,n){return[Le.getSerdePlugin(s,this.serialize,this.deserialize),Ie.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","UntagQueue",{}).n("SQSClient","UntagQueueCommand").f(void 0,void 0).ser(o9).de(T9).build(){},WY={AddPermissionCommand:_p,CancelMessageMoveTaskCommand:wp,ChangeMessageVisibilityCommand:Cp,ChangeMessageVisibilityBatchCommand:bp,CreateQueueCommand:Rp,DeleteMessageCommand:xp,DeleteMessageBatchCommand:vp,DeleteQueueCommand:Ap,GetQueueAttributesCommand:Tp,GetQueueUrlCommand:Pp,ListDeadLetterSourceQueuesCommand:Qc,ListMessageMoveTasksCommand:Ip,ListQueuesCommand:Kc,ListQueueTagsCommand:Np,PurgeQueueCommand:Op,ReceiveMessageCommand:Dp,RemovePermissionCommand:kp,SendMessageCommand:Lp,SendMessageBatchCommand:Mp,SetQueueAttributesCommand:qp,StartMessageMoveTaskCommand:Fp,TagQueueCommand:$p,UntagQueueCommand:Up},Bp=class extends Ti{};x.createAggregatedClient(WY,Bp);var QY=Gc.createPaginator(Ti,Qc,"NextToken","NextToken","MaxResults"),KY=Gc.createPaginator(Ti,Kc,"NextToken","NextToken","MaxResults");Object.defineProperty(j,"$Command",{enumerable:!0,get:function(){return x.Command}});Object.defineProperty(j,"__Client",{enumerable:!0,get:function(){return x.Client}});j.AddPermissionCommand=_p;j.BatchEntryIdsNotDistinct=tp;j.BatchRequestTooLong=Ep;j.CancelMessageMoveTaskCommand=wp;j.ChangeMessageVisibilityBatchCommand=bp;j.ChangeMessageVisibilityCommand=Cp;j.CreateQueueCommand=Rp;j.DeleteMessageBatchCommand=vp;j.DeleteMessageCommand=xp;j.DeleteQueueCommand=Ap;j.EmptyBatchRequest=rp;j.GetQueueAttributesCommand=Tp;j.GetQueueUrlCommand=Pp;j.InvalidAddress=Gf;j.InvalidAttributeName=op;j.InvalidAttributeValue=ip;j.InvalidBatchEntryId=sp;j.InvalidIdFormat=dp;j.InvalidMessageContents=Sp;j.InvalidSecurity=Wf;j.KmsAccessDenied=up;j.KmsDisabled=fp;j.KmsInvalidKeyUsage=pp;j.KmsInvalidState=mp;j.KmsNotFound=hp;j.KmsOptInRequired=gp;j.KmsThrottled=yp;j.ListDeadLetterSourceQueuesCommand=Qc;j.ListMessageMoveTasksCommand=Ip;j.ListQueueTagsCommand=Np;j.ListQueuesCommand=Kc;j.MessageNotInflight=Zf;j.MessageSystemAttributeName=M8;j.MessageSystemAttributeNameForSends=L8;j.OverLimit=Qf;j.PurgeQueueCommand=Op;j.PurgeQueueInProgress=lp;j.QueueAttributeName=k8;j.QueueDeletedRecently=ap;j.QueueDoesNotExist=Kf;j.QueueNameExists=cp;j.ReceiptHandleIsInvalid=ep;j.ReceiveMessageCommand=Dp;j.RemovePermissionCommand=kp;j.RequestThrottled=Yf;j.ResourceNotFoundException=Xf;j.SQS=Bp;j.SQSClient=Ti;j.SQSServiceException=ge;j.SendMessageBatchCommand=Mp;j.SendMessageCommand=Lp;j.SetQueueAttributesCommand=qp;j.StartMessageMoveTaskCommand=Fp;j.TagQueueCommand=$p;j.TooManyEntriesInBatchRequest=np;j.UnsupportedOperation=Jf;j.UntagQueueCommand=Up;j.paginateListDeadLetterSourceQueues=QY;j.paginateListQueues=KY});var Hp,Pi,R1=S(()=>{Hp={warningEmitted:!1},Pi=e=>{e&&!Hp.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(Hp.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function vn(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var v1=S(()=>{});function x1(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var A1=S(()=>{});function T1(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var P1=S(()=>{});var xn={};tt(xn,{emitWarningIfUnsupportedVersion:()=>Pi,setCredentialFeature:()=>vn,setFeature:()=>x1,setTokenFeature:()=>T1,state:()=>Hp});var Ur=S(()=>{R1();v1();A1();P1()});var I1,dw,N1=S(()=>{I1=y(ce()),dw=e=>I1.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var Ii,lw=S(()=>{Ii=e=>new Date(Date.now()+e)});var O1,D1=S(()=>{lw();O1=(e,t)=>Math.abs(Ii(t).getTime()-e)>=3e5});var uw,k1=S(()=>{D1();uw=(e,t)=>{let r=Date.parse(e);return O1(r,t)?r-Date.now():t}});var fw=S(()=>{N1();lw();k1()});var M1,Yc,Ni,Bt,pw,mw=S(()=>{M1=y(ce());fw();Yc=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Ni=async e=>{let t=Yc("context",e.context),r=Yc("config",e.config),s=t.endpointV2?.properties?.authSchemes?.[0],o=await Yc("signer",r.signer)(s),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}},Bt=class{async sign(t,r,s){if(!M1.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let n=await Ni(s),{config:o,signer:i}=n,{signingRegion:a,signingName:c}=n,d=s.context;if(d?.authSchemes?.length??!1){let[u,h]=d.authSchemes;u?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await i.sign(t,{signingDate:Ii(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let s=r.ServerTime??dw(r.$response);if(s){let n=Yc("config",t.config),o=n.systemClockOffset;n.systemClockOffset=uw(s,n.systemClockOffset),n.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let s=dw(t);if(s){let n=Yc("config",r.config);n.systemClockOffset=uw(s,n.systemClockOffset)}}},pw=Bt});var L1,Jc,q1=S(()=>{L1=y(ce());fw();mw();Jc=class extends Bt{async sign(t,r,s){if(!L1.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:n,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}=await Ni(s),l=(await n.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(t,{signingDate:Ii(n.systemClockOffset),signingRegion:l,signingService:c})}}});var hw,F1=S(()=>{hw=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var jp,gw=S(()=>{jp=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var $1,U1,Oi,B1=S(()=>{F1();gw();$1="AWS_AUTH_SCHEME_PREFERENCE",U1="auth_scheme_preference",Oi={environmentVariableSelector:(e,t)=>{if(t?.signingName&&jp(t.signingName)in e)return["httpBearerAuth"];if($1 in e)return hw(e[$1])},configFileSelector:e=>{if(U1 in e)return hw(e[U1])},default:[]}});var yw,H1,j1,z1=S(()=>{ve();yw=y(xe()),H1=e=>(e.sigv4aSigningRegionSet=It(e.sigv4aSigningRegionSet),e),j1={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new yw.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new yw.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});function YY(e,{credentials:t,credentialDefaultProvider:r}){let s;return t?t?.memoized?s=t:s=Ua(t,$a,Ho):r?s=It(r(Object.assign({},e,{parentClientConfig:e}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function JY(e,t){if(t.configBound)return t;let r=async s=>t({...s,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var Sw,Eo,V1,G1=S(()=>{Ur();ve();Sw=y(NS()),Eo=e=>{let t=e.credentials,r=!!e.credentials,s;Object.defineProperty(e,"credentials",{set(d){d&&d!==t&&d!==s&&(r=!0),t=d;let l=YY(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),u=JY(e,l);r&&!u.attributed?(s=async h=>u(h).then(m=>vn(m,"CREDENTIALS_CODE","e")),s.memoized=u.memoized,s.configBound=u.configBound,s.attributed=!0):s=u},get(){return s},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=It(e.signer):e.regionInfoProvider?a=()=>It(e.region)().then(async d=>[await e.regionInfoProvider(d,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},d]).then(([d,l])=>{let{signingRegion:u,signingService:h}=d;e.signingRegion=e.signingRegion||u||l,e.signingName=e.signingName||h||e.serviceId;let m={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},g=e.signerConstructor||Sw.SignatureV4;return new g(m)}):a=async d=>{d=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await It(e.region)(),properties:{}},d);let l=d.signingRegion,u=d.signingName;e.signingRegion=e.signingRegion||l,e.signingName=e.signingName||u||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},m=e.signerConstructor||Sw.SignatureV4;return new m(h)},Object.assign(e,{systemClockOffset:o,signingEscapePath:n,signer:a})},V1=Eo});var W1=S(()=>{mw();q1();B1();z1();G1()});var Q1={};tt(Q1,{AWSSDKSigV4Signer:()=>pw,AwsSdkSigV4ASigner:()=>Jc,AwsSdkSigV4Signer:()=>Bt,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Oi,NODE_SIGV4A_CONFIG_OPTIONS:()=>j1,getBearerTokenEnvKey:()=>jp,resolveAWSSDKSigV4Config:()=>V1,resolveAwsSdkSigV4AConfig:()=>H1,resolveAwsSdkSigV4Config:()=>Eo,validateSigningProperties:()=>Ni});var Ew=S(()=>{W1();gw()});var yr,Di=S(()=>{le();yr=class{resolveRestContentType(t,r){let s=r.getMemberSchemas(),n=Object.values(s).find(o=>!!o.getMergedTraits().httpPayload);if(n){let o=n.getMergedTraits().mediaType;return o||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(s).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:d,httpLabel:l,httpPrefixHeaders:u}=i.getMergedTraits();return!a&&!c&&!d&&!l&&u===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,s,n,o,i){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let d={$metadata:o,$response:s,$fault:s.statusCode<500?"client":"server"},l=me.for(a);try{return{errorSchema:i?.(l,c)??l.getSchema(t),errorMetadata:d}}catch{n.message=n.message??n.Message??"UnknownError";let h=me.for("smithy.ts.sdk.synthetic."+a),m=h.getBaseException();if(m){let g=h.getErrorCtor(m)??Error;throw Object.assign(new g({name:c}),d,n)}throw Object.assign(new Error(c),d,n)}}setQueryCompatError(t,r){let s=r.headers?.["x-amzn-query-error"];if(t!==void 0&&s!=null){let[n,o]=s.split(";"),i=Object.entries(t),a={Code:n,Type:o};Object.assign(t,a);for(let[c,d]of i)a[c]=d;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var zp,K1=S(()=>{YS();le();Di();zp=class extends Xo{awsQueryCompatible;mixin=new yr;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),n}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=Jo(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),l=n.message??n.Message??"Unknown",u=me.for(a[1]).getErrorCtor(a)??Error,h=new u(l),m={};for(let[g,C]of d.structIterator())m[g]=this.deserializer.readValue(C,n[g]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:l},m)}}});var Y1,J1,X1,Z1=S(()=>{Y1=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},J1=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},X1=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var vt,An=S(()=>{vt=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function eM(e,t,r){if(r?.source){let s=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||s!==String(t)))return s.includes(".")?new oe(s,"bigDecimal"):BigInt(s)}return t}var tM=S(()=>{Ze()});var rM,sM,Vp,_w=S(()=>{rM=y(F()),sM=y(Te()),Vp=(e,t)=>(0,rM.collectBody)(e,t).then(r=>(t?.utf8Encoder??sM.toUtf8)(r))});var _o,Gp,Tn,Xc=S(()=>{_w();_o=(e,t)=>Vp(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(s){throw s?.name==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:r}),s}return{}}),Gp=async(e,t)=>{let r=await _o(e,t);return r.message=r.message??r.Message,r},Tn=(e,t)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),s=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return s(e.headers[n]);if(t&&typeof t=="object"){let o=r(t,"code");if(o&&t[o]!==void 0)return s(t[o]);if(t.__type!==void 0)return s(t.__type)}}});var nM,ki,ww=S(()=>{ke();le();Ze();nM=y(Ae());An();tM();Xc();ki=class extends vt{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,eM):await _o(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let s=r!==null&&typeof r=="object",n=D.of(t);if(n.isListSchema()&&Array.isArray(r)){let i=n.getValueSchema(),a=[],c=!!n.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._read(i,d));return a}else if(n.isMapSchema()&&s){let i=n.getValueSchema(),a={},c=!!n.getMergedTraits().sparse;for(let[d,l]of Object.entries(r))(c||l!=null)&&(a[d]=this._read(i,l));return a}else if(n.isStructSchema()&&s){let i={};for(let[a,c]of n.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,l=this._read(c,r[d]);l!=null&&(i[a]=l)}return i}if(n.isBlobSchema()&&typeof r=="string")return(0,nM.fromBase64)(r);let o=n.getMergedTraits().mediaType;if(n.isStringSchema()&&typeof r=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return rt.from(r);if(n.isTimestampSchema()&&r!=null)switch(Ke(n,this.settings)){case 5:return Oa(r);case 6:return Da(r);case 7:return ka(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(n.isBigDecimalSchema()&&r!=null){if(r instanceof oe)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new oe(i.string,i.type):new oe(String(r),"bigDecimal")}if(n.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(n.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof oe?i[a]=c:i[a]=this._read(n,c);return i}else return structuredClone(r);return r}}});var oM,Wp,iM=S(()=>{Ze();oM="\u039D",Wp=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof oe){let s=`${oM+"nv"+this.counter++}_`+r.string;return this.values.set(`"${s}"`,r.string),s}if(typeof r=="bigint"){let s=r.toString(),n=`${oM+"b"+this.counter++}_`+s;return this.values.set(`"${n}"`,s),n}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,s]of this.values)t=t.replace(r,s);return t}}});var aM,Mi,bw=S(()=>{ke();le();Ze();aM=y(Ae());An();iM();Mi=class extends vt{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=D.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=D.of(t).getName(!0))}flush(){let{rootSchema:t}=this;if(this.rootSchema=void 0,t?.isStructSchema()||t?.isDocumentSchema()){let r=new Wp;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(t,r,s){let n=r!==null&&typeof r=="object",o=D.of(t);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._write(i,d));return a}else if(o.isMapSchema()&&n){let i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(let[d,l]of Object.entries(r))(c||l!=null)&&(a[d]=this._write(i,l));return a}else if(o.isStructSchema()&&n){let i={};for(let[a,c]of o.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,l=this._write(c,r[a],o);l!==void 0&&(i[d]=l)}return i}if(!(r===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||o.isDocumentSchema()&&r instanceof Uint8Array)return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??aM.toBase64)(r);if((o.isTimestampSchema()||o.isDocumentSchema())&&r instanceof Date)switch(Ke(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return Xn(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(o.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,_t.v4)();let i=o.getMergedTraits().mediaType;if(r!=null&&i&&(i==="application/json"||i.endsWith("+json")))return rt.from(r)}if(o.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof oe?i[a]=c:i[a]=this._write(o,c);return i}else return structuredClone(r);return r}}}});var Pn,Qp=S(()=>{An();ww();bw();Pn=class extends vt{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new Mi(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new ki(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var In,Kp=S(()=>{ke();le();Di();Qp();Xc();In=class extends Yt{serializer;deserializer;serviceTarget;codec;mixin=new yr;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=new Pn({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),(Tt(t.input)==="unit"||!n.body)&&(n.body="{}"),n}getPayloadCodec(){return this.codec}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=Tn(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),l=n.message??n.Message??"Unknown",u=me.for(a[1]).getErrorCtor(a)??Error,h=new u(l),m={};for(let[g,C]of d.structIterator()){let v=C.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(C,n[v])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:l},m)}}});var Yp,cM=S(()=>{Kp();Yp=class extends In{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var Jp,dM=S(()=>{Kp();Jp=class extends In{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Xp,lM=S(()=>{ke();le();Di();Qp();Xc();Xp=class extends Nr{serializer;deserializer;codec;mixin=new yr;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Pn(r),this.serializer=new Dr(this.codec.createSerializer(),r),this.deserializer=new Or(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=D.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]&&!n.body&&(n.body="{}"),n}async handleError(t,r,s,n,o){let i=Tn(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),l=n.message??n.Message??"Unknown",u=me.for(a[1]).getErrorCtor(a)??Error,h=new u(l);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,C]of d.structIterator()){let v=C.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(C,n[v])}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:l},m)}getDefaultContentType(){return"application/json"}}});var uM,fM,pM=S(()=>{uM=y(F()),fM=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,uM.expectUnion)(e)}});var mM,hM,gM,Nn,Zp=S(()=>{mM=y(co());ke();le();hM=y(F()),gM=y(Te());An();Nn=class extends vt{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new hs(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,s){let n=D.of(t),o=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(o).find(d=>!!d.getMemberTraits().eventPayload)){let d={},l=Object.keys(o)[0];return o[l].isBlobSchema()?d[l]=r:d[l]=this.read(o[l],r),d}let a=(this.serdeContext?.utf8Encoder??gM.toUtf8)(r),c=this.parseXml(a);return this.readSchema(t,s?c[s]:c)}readSchema(t,r){let s=D.of(t);if(s.isUnitSchema())return;let n=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(r))return this.readSchema(s,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!n.sparse,i=!!n.xmlFlattened;if(s.isListSchema()){let c=s.getValueSchema(),d=[],l=c.getMergedTraits().xmlName??"member",u=i?r:(r[0]??r)[l],h=Array.isArray(u)?u:[u];for(let m of h)(m!=null||o)&&d.push(this.readSchema(c,m));return d}let a={};if(s.isMapSchema()){let c=s.getKeySchema(),d=s.getValueSchema(),l;i?l=Array.isArray(r)?r:[r]:l=Array.isArray(r.entry)?r.entry:[r.entry];let u=c.getMergedTraits().xmlName??"key",h=d.getMergedTraits().xmlName??"value";for(let m of l){let g=m[u],C=m[h];(C!=null||o)&&(a[g]=this.readSchema(d,C))}return a}if(s.isStructSchema()){for(let[c,d]of s.structIterator()){let l=d.getMergedTraits(),u=l.httpPayload?l.xmlName??d.getName():d.getMemberTraits().xmlName??c;r[u]!=null&&(a[c]=this.readSchema(d,r[u]))}return a}if(s.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,r)}parseXml(t){if(t.length){let r;try{r=(0,mM.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let s="#text",n=Object.keys(r)[0],o=r[n];return o[s]&&(o[n]=o[s],delete o[s]),(0,hM.getValueFromTextNode)(o)}return{}}}});var yM,SM,em,EM=S(()=>{ke();le();Ze();yM=y(F()),SM=y(Ae());An();em=class extends vt{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,s=""){this.buffer===void 0&&(this.buffer="");let n=D.of(t);if(s&&!s.endsWith(".")&&(s+="."),n.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??SM.toBase64)(r)));else if(n.isBooleanSchema()||n.isNumericSchema()||n.isStringSchema())r!=null?(this.writeKey(s),this.writeValue(String(r))):n.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,_t.v4)()));else if(n.isBigIntegerSchema())r!=null&&(this.writeKey(s),this.writeValue(String(r)));else if(n.isBigDecimalSchema())r!=null&&(this.writeKey(s),this.writeValue(r instanceof oe?r.string:String(r)));else if(n.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(s),Ke(n,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,yM.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(n.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${n.getName(!0)}`);if(n.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let o=n.getValueSchema(),i=this.settings.flattenLists||n.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let d=this.getKey("member",o.getMergedTraits().xmlName),l=i?`${s}${a}`:`${s}${d}.${a}`;this.write(o,c,l),++a}}}else if(n.isMapSchema()){if(r&&typeof r=="object"){let o=n.getKeySchema(),i=n.getValueSchema(),a=n.getMergedTraits().xmlFlattened,c=1;for(let[d,l]of Object.entries(r)){if(l==null)continue;let u=this.getKey("key",o.getMergedTraits().xmlName),h=a?`${s}${c}.${u}`:`${s}entry.${c}.${u}`,m=this.getKey("value",i.getMergedTraits().xmlName),g=a?`${s}${c}.${m}`:`${s}entry.${c}.${m}`;this.write(o,d,h),this.write(i,l,g),++c}}}else if(n.isStructSchema()){if(r&&typeof r=="object")for(let[o,i]of n.structIterator()){if(r[o]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(o,i.getMergedTraits().xmlName),c=`${s}${a}`;this.write(i,r[o],c)}}else if(!n.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${n.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let s=r??t;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${Kt(t)}=`}writeValue(t){this.buffer+=Kt(t)}}});var Li,Cw=S(()=>{ke();le();Di();Zp();EM();Li=class extends Yt{options;serializer;deserializer;mixin=new yr;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new em(r),this.deserializer=new Nn(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":"application/x-www-form-urlencoded"}),(Tt(t.input)==="unit"||!n.body)&&(n.body="");let o=t.name.split("#")[1]??t.name;return n.body=`Action=${o}&Version=${this.options.version}`+n.body,n.body.endsWith("&")&&(n.body=n.body.slice(-1)),n}async deserializeResponse(t,r,s){let n=this.deserializer,o=D.of(t.output),i={};if(s.statusCode>=300){let u=await Mt(s.body,r);u.byteLength>0&&Object.assign(i,await n.read(15,u)),await this.handleError(t,r,s,i,this.deserializeMetadata(s))}for(let u in s.headers){let h=s.headers[u];delete s.headers[u],s.headers[u.toLowerCase()]=h}let a=t.name.split("#")[1]??t.name,c=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,d=await Mt(s.body,r);return d.byteLength>0&&Object.assign(i,await n.read(o,d,c)),{$metadata:this.deserializeMetadata(s),...i}}useNestedResult(){return!0}async handleError(t,r,s,n,o){let i=this.loadQueryErrorCode(s,n)??"Unknown",a=this.loadQueryError(n),c=this.loadQueryErrorMessage(n);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:d,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,a,o,(C,v)=>{try{return C.getSchema(v)}catch{return C.find(N=>D.of(N).getMergedTraits().awsQueryError?.[0]===v)}}),u=D.of(d),h=me.for(d[1]).getErrorCtor(d)??Error,m=new h(c),g={Error:a.Error};for(let[C,v]of u.structIterator()){let A=v.getMergedTraits().xmlName??C,N=a[A]??n[A];g[C]=this.deserializer.readSchema(v,N)}throw Object.assign(m,l,{$fault:u.getMergedTraits().error,message:c},g)}loadQueryErrorCode(t,r){let s=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(s!==void 0)return s;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var tm,_M=S(()=>{Cw();tm=class extends Li{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var wM,bM,qi,rm,sm,Rw=S(()=>{wM=y(co()),bM=y(F());_w();qi=(e,t)=>Vp(e,t).then(r=>{if(r.length){let s;try{s=(0,wM.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let n="#text",o=Object.keys(s)[0],i=s[o];return i[n]&&(i[o]=i[n],delete i[n]),(0,bM.getValueFromTextNode)(i)}return{}}),rm=async(e,t)=>{let r=await qi(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},sm=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var Sr,vw,nm,Fi,xw=S(()=>{Sr=y(co());ke();le();Ze();vw=y(F()),nm=y(Ae());An();Fi=class extends vt{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let s=D.of(t);if(s.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(s.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??nm.fromBase64)(r);else{this.buffer=this.writeStruct(s,r,void 0);let n=s.getMergedTraits();n.httpPayload&&!n.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,s){let n=t.getMergedTraits(),o=t.isMemberSchema()&&!n.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():n.xmlName??t.getName();if(!o||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=Sr.XmlNode.of(o),[a,c]=this.getXmlnsAttribute(t,s);for(let[d,l]of t.structIterator()){let u=r[d];if(u!=null||l.isIdempotencyToken()){if(l.getMergedTraits().xmlAttribute){i.addAttribute(l.getMergedTraits().xmlName??d,this.writeSimple(l,u));continue}if(l.isListSchema())this.writeList(l,u,i,c);else if(l.isMapSchema())this.writeMap(l,u,i,c);else if(l.isStructSchema())i.addChildNode(this.writeStruct(l,u,c));else{let h=Sr.XmlNode.of(l.getMergedTraits().xmlName??l.getMemberName());this.writeSimpleInto(l,u,h,c),i.addChildNode(h)}}}return c&&i.addAttribute(a,c),i}writeList(t,r,s,n){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let o=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),c=!!a.sparse,d=!!o.xmlFlattened,[l,u]=this.getXmlnsAttribute(t,n),h=(m,g)=>{if(i.isListSchema())this.writeList(i,Array.isArray(g)?g:[g],m,u);else if(i.isMapSchema())this.writeMap(i,g,m,u);else if(i.isStructSchema()){let C=this.writeStruct(i,g,u);m.addChildNode(C.withName(d?o.xmlName??t.getMemberName():a.xmlName??"member"))}else{let C=Sr.XmlNode.of(d?o.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,g,C,u),m.addChildNode(C)}};if(d)for(let m of r)(c||m!=null)&&h(s,m);else{let m=Sr.XmlNode.of(o.xmlName??t.getMemberName());u&&m.addAttribute(l,u);for(let g of r)(c||g!=null)&&h(m,g);s.addChildNode(m)}}writeMap(t,r,s,n,o=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),d=a.getMergedTraits().xmlName??"key",l=t.getValueSchema(),u=l.getMergedTraits(),h=u.xmlName??"value",m=!!u.sparse,g=!!i.xmlFlattened,[C,v]=this.getXmlnsAttribute(t,n),A=(N,$,H)=>{let Q=Sr.XmlNode.of(d,$),[fe,Ce]=this.getXmlnsAttribute(a,v);Ce&&Q.addAttribute(fe,Ce),N.addChildNode(Q);let K=Sr.XmlNode.of(h);l.isListSchema()?this.writeList(l,H,K,v):l.isMapSchema()?this.writeMap(l,H,K,v,!0):l.isStructSchema()?K=this.writeStruct(l,H,v):this.writeSimpleInto(l,H,K,v),N.addChildNode(K)};if(g){for(let[N,$]of Object.entries(r))if(m||$!=null){let H=Sr.XmlNode.of(i.xmlName??t.getMemberName());A(H,N,$),s.addChildNode(H)}}else{let N;o||(N=Sr.XmlNode.of(i.xmlName??t.getMemberName()),v&&N.addAttribute(C,v),s.addChildNode(N));for(let[$,H]of Object.entries(r))if(m||H!=null){let Q=Sr.XmlNode.of("entry");A(Q,$,H),(o?s:N).addChildNode(Q)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=D.of(t),n=null;if(r&&typeof r=="object")if(s.isBlobSchema())n=(this.serdeContext?.base64Encoder??nm.toBase64)(r);else if(s.isTimestampSchema()&&r instanceof Date)switch(Ke(s,this.settings)){case 5:n=r.toISOString().replace(".000Z","Z");break;case 6:n=(0,vw.dateToUtcString)(r);break;case 7:n=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),n=(0,vw.dateToUtcString)(r);break}else{if(s.isBigDecimalSchema()&&r)return r instanceof oe?r.string:String(r);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(n=String(r)),s.isStringSchema()&&(r===void 0&&s.isIdempotencyToken()?n=(0,_t.v4)():n=String(r)),n===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${r}`);return n}writeSimpleInto(t,r,s,n){let o=this.writeSimple(t,r),i=D.of(t),a=new Sr.XmlText(o),[c,d]=this.getXmlnsAttribute(i,n);d&&s.addAttribute(c,d),s.addChildNode(a)}getXmlnsAttribute(t,r){let s=t.getMergedTraits(),[n,o]=s.xmlNamespace??[];return o&&o!==r?[n?`xmlns:${n}`:"xmlns",o]:[void 0,void 0]}}});var $i,Aw=S(()=>{An();Zp();xw();$i=class extends vt{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new Fi(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Nn(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var om,CM=S(()=>{ke();le();Di();Rw();Aw();om=class extends Nr{codec;serializer;deserializer;mixin=new yr;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new $i(r),this.serializer=new Dr(this.codec.createSerializer(),r),this.deserializer=new Or(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=D.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]===this.getDefaultContentType()&&typeof n.body=="string"&&(n.body='<?xml version="1.0" encoding="UTF-8"?>'+n.body),n}async deserializeResponse(t,r,s){return super.deserializeResponse(t,r,s)}async handleError(t,r,s,n,o){let i=sm(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=D.of(a),l=n.Error?.message??n.Error?.Message??n.message??n.Message??"Unknown",u=me.for(a[1]).getErrorCtor(a)??Error,h=new u(l);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,C]of d.structIterator()){let v=C.getMergedTraits().xmlName??g,A=n.Error?.[v]??n[v];m[g]=this.codec.createDeserializer().readSchema(C,A)}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:l},m)}getDefaultContentType(){return"application/xml"}}});var RM={};tt(RM,{AwsEc2QueryProtocol:()=>tm,AwsJson1_0Protocol:()=>Yp,AwsJson1_1Protocol:()=>Jp,AwsJsonRpcProtocol:()=>In,AwsQueryProtocol:()=>Li,AwsRestJsonProtocol:()=>Xp,AwsRestXmlProtocol:()=>om,AwsSmithyRpcV2CborProtocol:()=>zp,JsonCodec:()=>Pn,JsonShapeDeserializer:()=>ki,JsonShapeSerializer:()=>Mi,XmlCodec:()=>$i,XmlShapeDeserializer:()=>Nn,XmlShapeSerializer:()=>Fi,_toBool:()=>J1,_toNum:()=>X1,_toStr:()=>Y1,awsExpectUnion:()=>fM,loadRestJsonErrorCode:()=>Tn,loadRestXmlErrorCode:()=>sm,parseJsonBody:()=>_o,parseJsonErrorBody:()=>Gp,parseXmlBody:()=>qi,parseXmlErrorBody:()=>rm});var Tw=S(()=>{K1();Z1();cM();dM();Kp();lM();Qp();ww();bw();pM();Xc();_M();Cw();CM();Aw();Zp();xw();Rw()});var ks={};tt(ks,{AWSSDKSigV4Signer:()=>pw,AwsEc2QueryProtocol:()=>tm,AwsJson1_0Protocol:()=>Yp,AwsJson1_1Protocol:()=>Jp,AwsJsonRpcProtocol:()=>In,AwsQueryProtocol:()=>Li,AwsRestJsonProtocol:()=>Xp,AwsRestXmlProtocol:()=>om,AwsSdkSigV4ASigner:()=>Jc,AwsSdkSigV4Signer:()=>Bt,AwsSmithyRpcV2CborProtocol:()=>zp,JsonCodec:()=>Pn,JsonShapeDeserializer:()=>ki,JsonShapeSerializer:()=>Mi,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Oi,NODE_SIGV4A_CONFIG_OPTIONS:()=>j1,XmlCodec:()=>$i,XmlShapeDeserializer:()=>Nn,XmlShapeSerializer:()=>Fi,_toBool:()=>J1,_toNum:()=>X1,_toStr:()=>Y1,awsExpectUnion:()=>fM,emitWarningIfUnsupportedVersion:()=>Pi,getBearerTokenEnvKey:()=>jp,loadRestJsonErrorCode:()=>Tn,loadRestXmlErrorCode:()=>sm,parseJsonBody:()=>_o,parseJsonErrorBody:()=>Gp,parseXmlBody:()=>qi,parseXmlErrorBody:()=>rm,resolveAWSSDKSigV4Config:()=>V1,resolveAwsSdkSigV4AConfig:()=>H1,resolveAwsSdkSigV4Config:()=>Eo,setCredentialFeature:()=>vn,setFeature:()=>x1,setTokenFeature:()=>T1,state:()=>Hp,validateSigningProperties:()=>Ni});var ht=S(()=>{Ur();Ew();Tw()});var Bi=w(Ui=>{"use strict";var XY=(ve(),z(Gr)),ZY=qr(),eJ=ce(),rs=(ht(),z(ks)),TM=void 0;function tJ(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function rJ(e){let t=XY.normalizeProvider(e.userAgentAppId??TM),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let s=await t();if(!tJ(s)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof s!="string"?n?.warn("userAgentAppId must be a string or undefined."):s.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return s}})}var sJ=/\d{12}\.ddb/;async function nJ(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&rs.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?rs.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):rs.setFeature(e,"RETRY_MODE_STANDARD","E"):rs.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let o=e.endpointV2;switch(String(o?.url?.hostname).match(sJ)&&rs.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":rs.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":rs.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":rs.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let o=n;o.accountId&&rs.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))rs.setFeature(e,i,a)}}var vM="user-agent",Pw="x-amz-user-agent",xM=" ",Iw="/",oJ=/[^!$%&'*+\-.^_`|~\w]/g,iJ=/[^!$%&'*+\-.^_`|~\w#]/g,AM="-",aJ=1024;function cJ(e){let t="";for(let r in e){let s=e[r];if(t.length+s.length+1<=aJ){t.length?t+=","+s:t+=s;continue}break}return t}var PM=e=>(t,r)=>async s=>{let{request:n}=s;if(!eJ.HttpRequest.isInstance(n))return t(s);let{headers:o}=n,i=r?.userAgent?.map(im)||[],a=(await e.defaultUserAgentProvider()).map(im);await nJ(r,e,s);let c=r;a.push(`m/${cJ(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let d=e?.customUserAgent?.map(im)||[],l=await e.userAgentAppId();l&&a.push(im(["app",`${l}`]));let u=ZY.getUserAgentPrefix(),h=(u?[u]:[]).concat([...a,...i,...d]).join(xM),m=[...a.filter(g=>g.startsWith("aws-sdk-")),...d].join(xM);return e.runtime!=="browser"?(m&&(o[Pw]=o[Pw]?`${o[vM]} ${m}`:m),o[vM]=h):o[Pw]=h,t({...s,request:n})},im=e=>{let t=e[0].split(Iw).map(i=>i.replace(oJ,AM)).join(Iw),r=e[1]?.replace(iJ,AM),s=t.indexOf(Iw),n=t.substring(0,s),o=t.substring(s+1);return n==="api"&&(o=o.toLowerCase()),[n,o,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},IM={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},dJ=e=>({applyToStack:t=>{t.add(PM(e),IM)}});Ui.DEFAULT_UA_APP_ID=TM;Ui.getUserAgentMiddlewareOptions=IM;Ui.getUserAgentPlugin=dJ;Ui.resolveUserAgentConfig=rJ;Ui.userAgentMiddleware=PM});var Ow=w(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.resolveHttpAuthSchemeConfig=On.defaultSecretsManagerHttpAuthSchemeProvider=On.defaultSecretsManagerHttpAuthSchemeParametersProvider=void 0;var lJ=(ht(),z(ks)),Nw=it(),uJ=async(e,t,r)=>({operation:(0,Nw.getSmithyContext)(t).operation,region:await(0,Nw.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});On.defaultSecretsManagerHttpAuthSchemeParametersProvider=uJ;function fJ(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"secretsmanager",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var pJ=e=>{let t=[];switch(e.operation){default:t.push(fJ(e))}return t};On.defaultSecretsManagerHttpAuthSchemeProvider=pJ;var mJ=e=>{let t=(0,lJ.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,Nw.normalizeProvider)(e.authSchemePreference??[])})};On.resolveHttpAuthSchemeConfig=mJ});var NM=w((bwe,hJ)=>{hJ.exports={name:"@aws-sdk/client-secrets-manager",description:"AWS SDK for JavaScript Secrets Manager Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-secrets-manager","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo secrets-manager"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/credential-provider-node":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-secrets-manager",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-secrets-manager"}}});var Dw=w(Dn=>{"use strict";var gJ=(Ur(),z(xn)),yJ=xe(),OM="AWS_ACCESS_KEY_ID",DM="AWS_SECRET_ACCESS_KEY",kM="AWS_SESSION_TOKEN",MM="AWS_CREDENTIAL_EXPIRATION",LM="AWS_CREDENTIAL_SCOPE",qM="AWS_ACCOUNT_ID",SJ=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[OM],r=process.env[DM],s=process.env[kM],n=process.env[MM],o=process.env[LM],i=process.env[qM];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...s&&{sessionToken:s},...n&&{expiration:new Date(n)},...o&&{credentialScope:o},...i&&{accountId:i}};return gJ.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new yJ.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};Dn.ENV_ACCOUNT_ID=qM;Dn.ENV_CREDENTIAL_SCOPE=LM;Dn.ENV_EXPIRATION=MM;Dn.ENV_KEY=OM;Dn.ENV_SECRET=DM;Dn.ENV_SESSION=kM;Dn.fromEnv=SJ});var FM=w(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});am.checkUrl=void 0;var EJ=xe(),_J="169.254.170.2",wJ="169.254.170.23",bJ="[fd00:ec2::23]",CJ=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===_J||e.hostname===wJ||e.hostname===bJ)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),s=n=>{let o=parseInt(n,10);return 0<=o&&o<=255};if(r[0]==="127"&&s(r[1])&&s(r[2])&&s(r[3])&&r.length===4)return}throw new EJ.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};am.checkUrl=CJ});var $M=w(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.createGetRequest=AJ;cm.getCredentials=TJ;var kw=xe(),RJ=ce(),vJ=F(),xJ=Ra();function AJ(e){return new RJ.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,s])=>(t[r]=s,t),{}),fragment:e.hash})}async function TJ(e,t){let s=await(0,xJ.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let n=JSON.parse(s);if(typeof n.AccessKeyId!="string"||typeof n.SecretAccessKey!="string"||typeof n.Token!="string"||typeof n.Expiration!="string")throw new kw.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:(0,vJ.parseRfc3339DateTime)(n.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let n={};try{n=JSON.parse(s)}catch{}throw Object.assign(new kw.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:n.Code,Message:n.Message})}throw new kw.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var UM=w(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.retryWrapper=void 0;var PJ=(e,t,r)=>async()=>{for(let s=0;s<t;++s)try{return await e()}catch{await new Promise(o=>setTimeout(o,r))}return await e()};dm.retryWrapper=PJ});var jM=w(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});lm.fromHttp=void 0;var IJ=(Xs(),z(Js)),NJ=(Ur(),z(xn)),OJ=sr(),BM=xe(),DJ=IJ.__importDefault(require("fs/promises")),kJ=FM(),HM=$M(),MJ=UM(),LJ="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",qJ="http://169.254.170.2",FJ="AWS_CONTAINER_CREDENTIALS_FULL_URI",$J="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",UJ="AWS_CONTAINER_AUTHORIZATION_TOKEN",BJ=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[LJ],s=e.awsContainerCredentialsFullUri??process.env[FJ],n=e.awsContainerAuthorizationToken??process.env[UJ],o=e.awsContainerAuthorizationTokenFile??process.env[$J],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),n&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),s)t=s;else if(r)t=`${qJ}${r}`;else throw new BM.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,kJ.checkUrl)(a,e.logger);let c=OJ.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,MJ.retryWrapper)(async()=>{let d=(0,HM.createGetRequest)(a);n?d.headers.Authorization=n:o&&(d.headers.Authorization=(await DJ.default.readFile(o)).toString());try{let l=await c.handle(d);return(0,HM.getCredentials)(l.response).then(u=>(0,NJ.setCredentialFeature)(u,"CREDENTIALS_HTTP","z"))}catch(l){throw new BM.CredentialsProviderError(String(l),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};lm.fromHttp=BJ});var Mw=w(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.fromHttp=void 0;var HJ=jM();Object.defineProperty(um,"fromHttp",{enumerable:!0,get:function(){return HJ.fromHttp}})});function jJ(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function zJ(e){return{schemeId:"smithy.api#noAuth"}}var Zc,zM,VM,GM,Lw=S(()=>{ht();Zc=y(it()),zM=async(e,t,r)=>({operation:(0,Zc.getSmithyContext)(t).operation,region:await(0,Zc.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});VM=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(zJ(e));break}default:t.push(jJ(e))}return t},GM=e=>{let t=Eo(e);return Object.assign(t,{authSchemePreference:(0,Zc.normalizeProvider)(e.authSchemePreference??[])})}});var WM,QM,qw=S(()=>{WM=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),QM={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var fm,Fw=S(()=>{fm={name:"@aws-sdk/nested-clients",version:"3.928.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var ed=w(wo=>{"use strict";var KM=require("os"),$w=require("process"),GJ=Bi(),YM={isCrtAvailable:!1},WJ=()=>YM.isCrtAvailable?["md/crt-avail"]:null,JM=({serviceId:e,clientVersion:t})=>async r=>{let s=[["aws-sdk-js",t],["ua","2.1"],[`os/${KM.platform()}`,KM.release()],["lang/js"],["md/nodejs",`${$w.versions.node}`]],n=WJ();n&&s.push(n),e&&s.push([`api/${e}`,t]),$w.env.AWS_EXECUTION_ENV&&s.push([`exec-env/${$w.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...s,[`app/${o}`]]:[...s]},QJ=JM,XM="AWS_SDK_UA_APP_ID",ZM="sdk_ua_app_id",KJ="sdk-ua-app-id",YJ={environmentVariableSelector:e=>e[XM],configFileSelector:e=>e[ZM]??e[KJ],default:GJ.DEFAULT_UA_APP_ID};wo.NODE_APP_ID_CONFIG_OPTIONS=YJ;wo.UA_APP_ID_ENV_NAME=XM;wo.UA_APP_ID_INI_NAME=ZM;wo.createDefaultUserAgentProvider=JM;wo.crtAvailability=YM;wo.defaultUserAgent=QJ});var dL,_r,eL,td,Hi,ji,Ms,Uw,Bw,tL,rL,sL,lL,uL,Er,nL,fL,oL,iL,aL,cL,JJ,pL,mL=S(()=>{dL="required",_r="argv",eL="isSet",td="booleanEquals",Hi="error",ji="endpoint",Ms="tree",Uw="PartitionResult",Bw="getAttr",tL={[dL]:!1,type:"string"},rL={[dL]:!0,default:!1,type:"boolean"},sL={ref:"Endpoint"},lL={fn:td,[_r]:[{ref:"UseFIPS"},!0]},uL={fn:td,[_r]:[{ref:"UseDualStack"},!0]},Er={},nL={fn:Bw,[_r]:[{ref:Uw},"supportsFIPS"]},fL={ref:Uw},oL={fn:td,[_r]:[!0,{fn:Bw,[_r]:[fL,"supportsDualStack"]}]},iL=[lL],aL=[uL],cL=[{ref:"Region"}],JJ={version:"1.0",parameters:{Region:tL,UseDualStack:rL,UseFIPS:rL,Endpoint:tL},rules:[{conditions:[{fn:eL,[_r]:[sL]}],rules:[{conditions:iL,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Hi},{conditions:aL,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Hi},{endpoint:{url:sL,properties:Er,headers:Er},type:ji}],type:Ms},{conditions:[{fn:eL,[_r]:cL}],rules:[{conditions:[{fn:"aws.partition",[_r]:cL,assign:Uw}],rules:[{conditions:[lL,uL],rules:[{conditions:[{fn:td,[_r]:[!0,nL]},oL],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Er,headers:Er},type:ji}],type:Ms},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Hi}],type:Ms},{conditions:iL,rules:[{conditions:[{fn:td,[_r]:[nL,!0]}],rules:[{conditions:[{fn:"stringEquals",[_r]:[{fn:Bw,[_r]:[fL,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Er,headers:Er},type:ji},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Er,headers:Er},type:ji}],type:Ms},{error:"FIPS is enabled but this partition does not support FIPS",type:Hi}],type:Ms},{conditions:aL,rules:[{conditions:[oL],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Er,headers:Er},type:ji}],type:Ms},{error:"DualStack is enabled but this partition does not support DualStack",type:Hi}],type:Ms},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Er,headers:Er},type:ji}],type:Ms}],type:Ms},{error:"Invalid Configuration: Missing Region",type:Hi}]},pL=JJ});var hL,zi,XJ,gL,yL=S(()=>{hL=y(qr()),zi=y(Mr());mL();XJ=new zi.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),gL=(e,t={})=>XJ.get(e,()=>(0,zi.resolveEndpoint)(pL,{endpointParams:e,logger:t.logger}));zi.customEndpointFunctions.aws=hL.awsEndpointFunctions});var SL,EL,pm,mm,_L,wL=S(()=>{ht();ve();SL=y(F()),EL=y(or()),pm=y(Ae()),mm=y(Te());Lw();yL();_L=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??pm.fromBase64,base64Encoder:e?.base64Encoder??pm.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??gL,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??VM,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Bt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Nt}],logger:e?.logger??new SL.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??EL.parseUrl,utf8Decoder:e?.utf8Decoder??mm.fromUtf8,utf8Encoder:e?.utf8Encoder??mm.toUtf8})});var hm,Mn,bL,gm,kn,ym,CL,RL,vL,xL,AL,TL,PL=S(()=>{Fw();ht();hm=y(ed()),Mn=y(ze()),bL=y(vs()),gm=y(ft()),kn=y($t()),ym=y(sr()),CL=y(xs()),RL=y(Yr());wL();vL=y(F()),xL=y(Ts()),AL=y(F()),TL=e=>{(0,AL.emitWarningIfUnsupportedVersion)(process.version);let t=(0,xL.resolveDefaultsModeConfig)(e),r=()=>t().then(vL.loadConfigsForDefaultMode),s=_L(e);Pi(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,kn.loadConfig)(Oi,n),bodyLengthChecker:e?.bodyLengthChecker??CL.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,hm.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:fm.version}),maxAttempts:e?.maxAttempts??(0,kn.loadConfig)(gm.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,kn.loadConfig)(Mn.NODE_REGION_CONFIG_OPTIONS,{...Mn.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:ym.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,kn.loadConfig)({...gm.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||RL.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??bL.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??ym.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,kn.loadConfig)(Mn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,kn.loadConfig)(Mn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,kn.loadConfig)(hm.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var NL=w(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.warning=void 0;Vi.stsRegionDefaultResolver=eX;var IL=ze(),ZJ=$t();function eX(e={}){return(0,ZJ.loadConfig)({...IL.NODE_REGION_CONFIG_OPTIONS,async default(){return Vi.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...IL.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}Vi.warning={silence:!1}});var Gi=w(ss=>{"use strict";var rd=ze(),OL=NL(),tX=e=>({setRegion(t){e.region=t},region(){return e.region}}),rX=e=>({region:e.region()});Object.defineProperty(ss,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return rd.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(ss,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return rd.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(ss,"REGION_ENV_NAME",{enumerable:!0,get:function(){return rd.REGION_ENV_NAME}});Object.defineProperty(ss,"REGION_INI_NAME",{enumerable:!0,get:function(){return rd.REGION_INI_NAME}});Object.defineProperty(ss,"resolveRegionConfig",{enumerable:!0,get:function(){return rd.resolveRegionConfig}});ss.getAwsRegionExtensionConfiguration=tX;ss.resolveAwsRegionExtensionConfiguration=rX;Object.keys(OL).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ss,e)&&Object.defineProperty(ss,e,{enumerable:!0,get:function(){return OL[e]}})})});var DL,kL,ML=S(()=>{DL=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},kL=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Sm,Em,_m,LL,qL=S(()=>{Sm=y(Gi()),Em=y(ce()),_m=y(F());ML();LL=(e,t)=>{let r=Object.assign((0,Sm.getAwsRegionExtensionConfiguration)(e),(0,_m.getDefaultExtensionConfiguration)(e),(0,Em.getHttpHandlerExtensionConfiguration)(e),DL(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,Sm.resolveAwsRegionExtensionConfiguration)(r),(0,_m.resolveDefaultRuntimeConfig)(r),(0,Em.resolveHttpHandlerRuntimeConfig)(r),kL(r))}});var wm,FL,$L,bm,UL,BL,HL,Cm,Hw,sd,jw=S(()=>{wm=y(ds()),FL=y(ls()),$L=y(us()),bm=y(Bi()),UL=y(ze());ve();BL=y(Cs()),HL=y(Dt()),Cm=y(ft()),Hw=y(F());Lw();qw();PL();qL();sd=class extends Hw.Client{config;constructor(...[t]){let r=TL(t||{});super(r),this.initConfig=r;let s=WM(r),n=(0,bm.resolveUserAgentConfig)(s),o=(0,Cm.resolveRetryConfig)(n),i=(0,UL.resolveRegionConfig)(o),a=(0,wm.resolveHostHeaderConfig)(i),c=(0,HL.resolveEndpointConfig)(a),d=GM(c),l=LL(d,t?.extensions||[]);this.config=l,this.middlewareStack.use((0,bm.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Cm.getRetryPlugin)(this.config)),this.middlewareStack.use((0,BL.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,wm.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,FL.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,$L.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(gs(this.config,{httpAuthSchemeParametersProvider:zM,identityProviderConfigProvider:async u=>new kr({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(ys(this.config))}destroy(){super.destroy()}}});var jL,dt,Rm=S(()=>{jL=y(F()),dt=class e extends jL.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var bo,sX,nd,od,zw,Vw,id,ad,cd,dd,nX,ld,ud,fd,pd,md,vm=S(()=>{bo=y(F());Rm();sX={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},nd=class e extends dt{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},od=class e extends dt{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},zw=e=>({...e,...e.clientSecret&&{clientSecret:bo.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:bo.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:bo.SENSITIVE_STRING}}),Vw=e=>({...e,...e.accessToken&&{accessToken:bo.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:bo.SENSITIVE_STRING},...e.idToken&&{idToken:bo.SENSITIVE_STRING}}),id=class e extends dt{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ad=class e extends dt{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},cd=class e extends dt{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},dd=class e extends dt{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},nX={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},ld=class e extends dt{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},ud=class e extends dt{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},fd=class e extends dt{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},pd=class e extends dt{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},md=class e extends dt{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var L,zL,VL,oX,iX,aX,cX,dX,lX,uX,fX,pX,mX,hX,gX,yX,wr,GL=S(()=>{ht();ve();L=y(F());vm();Rm();zL=async(e,t)=>{let r=eo(e,t),s={"content-type":"application/json"};r.bp("/token");let n;return n=JSON.stringify((0,L.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,L._json)(o)})),r.m("POST").h(s).b(n),r.build()},VL=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return oX(e,t);let r=(0,L.map)({$metadata:wr(e)}),s=(0,L.expectNonNull)((0,L.expectObject)(await _o(e.body,t)),"body"),n=(0,L.take)(s,{accessToken:L.expectString,expiresIn:L.expectInt32,idToken:L.expectString,refreshToken:L.expectString,tokenType:L.expectString});return Object.assign(r,n),r},oX=async(e,t)=>{let r={...e,body:await Gp(e.body,t)},s=Tn(e,r.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await aX(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await cX(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await dX(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await lX(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await uX(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await fX(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await pX(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await mX(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await hX(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await gX(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await yX(r,t);default:let n=r.body;return iX({output:e,parsedBody:n,errorCode:s})}},iX=(0,L.withBaseException)(dt),aX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString,reason:L.expectString});Object.assign(r,n);let o=new nd({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},cX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new od({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},dX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new id({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},lX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new ad({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},uX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new cd({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},fX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new dd({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},pX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString,reason:L.expectString});Object.assign(r,n);let o=new ld({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},mX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new ud({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},hX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new fd({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},gX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new pd({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},yX=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new md({$metadata:wr(e),...r});return(0,L.decorateServiceException)(o,e.body)},wr=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var WL,QL,Gw,hd,Ww=S(()=>{WL=y(Dt()),QL=y(nr()),Gw=y(F());qw();vm();GL();hd=class extends Gw.Command.classBuilder().ep(QM).m(function(t,r,s,n){return[(0,QL.getSerdePlugin)(s,this.serialize,this.deserialize),(0,WL.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(zw,Vw).ser(zL).de(VL).build(){}});var KL,SX,xm,YL=S(()=>{KL=y(F());Ww();jw();SX={CreateTokenCommand:hd},xm=class extends sd{};(0,KL.createAggregatedClient)(SX,xm)});var JL=S(()=>{Ww()});var XL=S(()=>{vm()});var Qw={};tt(Qw,{$Command:()=>Gw.Command,AccessDeniedException:()=>nd,AccessDeniedExceptionReason:()=>sX,AuthorizationPendingException:()=>od,CreateTokenCommand:()=>hd,CreateTokenRequestFilterSensitiveLog:()=>zw,CreateTokenResponseFilterSensitiveLog:()=>Vw,ExpiredTokenException:()=>id,InternalServerException:()=>ad,InvalidClientException:()=>cd,InvalidGrantException:()=>dd,InvalidRequestException:()=>ld,InvalidRequestExceptionReason:()=>nX,InvalidScopeException:()=>ud,SSOOIDC:()=>xm,SSOOIDCClient:()=>sd,SSOOIDCServiceException:()=>dt,SlowDownException:()=>fd,UnauthorizedClientException:()=>pd,UnsupportedGrantTypeException:()=>md,__Client:()=>Hw.Client});var Kw=S(()=>{jw();YL();JL();XL();Rm()});var rq=w(yd=>{"use strict";var EX=(Ur(),z(xn)),_X=(Ew(),z(Q1)),er=xe(),gd=Ot(),wX=require("fs"),bX=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new er.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=_X.getBearerTokenEnvKey(t);if(!(r in process.env))throw new er.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let s={token:process.env[r]};return EX.setTokenFeature(s,"BEARER_SERVICE_ENV_VARS","3"),s},CX=300*1e3,Yw="To refresh this SSO session run 'aws sso login' with the corresponding profile.",RX=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(Kw(),Qw)),s=o=>t.clientConfig?.[o]??t.parentClientConfig?.[o];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},vX=async(e,t,r={})=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(Kw(),Qw));return(await RX(t,r)).send(new s({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},ZL=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new er.TokenProviderError(`Token is expired. ${Yw}`,!1)},Co=(e,t,r=!1)=>{if(typeof t>"u")throw new er.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Yw}`,!1)},{writeFile:xX}=wX.promises,AX=(e,t)=>{let r=gd.getSSOTokenFilepath(e),s=JSON.stringify(t,null,2);return xX(r,s)},eq=new Date(0),tq=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let s=await gd.parseKnownFiles(r),n=gd.getProfileName({profile:r.profile??t?.profile}),o=s[n];if(o){if(!o.sso_session)throw new er.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new er.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let i=o.sso_session,c=(await gd.loadSsoSessionData(r))[i];if(!c)throw new er.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let g of["sso_start_url","sso_region"])if(!c[g])throw new er.TokenProviderError(`Sso session '${i}' is missing required property '${g}'.`,!1);c.sso_start_url;let d=c.sso_region,l;try{l=await gd.getSSOTokenFromFile(i)}catch{throw new er.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${Yw}`,!1)}Co("accessToken",l.accessToken),Co("expiresAt",l.expiresAt);let{accessToken:u,expiresAt:h}=l,m={token:u,expiration:new Date(h)};if(m.expiration.getTime()-Date.now()>CX)return m;if(Date.now()-eq.getTime()<30*1e3)return ZL(m),m;Co("clientId",l.clientId,!0),Co("clientSecret",l.clientSecret,!0),Co("refreshToken",l.refreshToken,!0);try{eq.setTime(Date.now());let g=await vX(l,d,r);Co("accessToken",g.accessToken),Co("expiresIn",g.expiresIn);let C=new Date(Date.now()+g.expiresIn*1e3);try{await AX(i,{...l,accessToken:g.accessToken,expiresAt:C.toISOString(),refreshToken:g.refreshToken})}catch{}return{token:g.accessToken,expiration:C}}catch{return ZL(m),m}},TX=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new er.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},PX=(e={})=>er.memoize(er.chain(tq(e),async()=>{throw new er.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);yd.fromEnvSigningName=bX;yd.fromSso=tq;yd.fromStatic=TX;yd.nodeProvider=PX});var Xw=w(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.resolveHttpAuthSchemeConfig=Ln.defaultSSOHttpAuthSchemeProvider=Ln.defaultSSOHttpAuthSchemeParametersProvider=void 0;var IX=(ht(),z(ks)),Jw=it(),NX=async(e,t,r)=>({operation:(0,Jw.getSmithyContext)(t).operation,region:await(0,Jw.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Ln.defaultSSOHttpAuthSchemeParametersProvider=NX;function OX(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Am(e){return{schemeId:"smithy.api#noAuth"}}var DX=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Am(e));break}case"ListAccountRoles":{t.push(Am(e));break}case"ListAccounts":{t.push(Am(e));break}case"Logout":{t.push(Am(e));break}default:t.push(OX(e))}return t};Ln.defaultSSOHttpAuthSchemeProvider=DX;var kX=e=>{let t=(0,IX.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,Jw.normalizeProvider)(e.authSchemePreference??[])})};Ln.resolveHttpAuthSchemeConfig=kX});var sq=w((Pbe,MX)=>{MX.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Sq=w(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});Tm.ruleSet=void 0;var mq="required",Cr="fn",Rr="argv",Ki="ref",nq=!0,oq="isSet",Sd="booleanEquals",Wi="error",Qi="endpoint",Ls="tree",Zw="PartitionResult",eb="getAttr",iq={[mq]:!1,type:"string"},aq={[mq]:!0,default:!1,type:"boolean"},cq={[Ki]:"Endpoint"},hq={[Cr]:Sd,[Rr]:[{[Ki]:"UseFIPS"},!0]},gq={[Cr]:Sd,[Rr]:[{[Ki]:"UseDualStack"},!0]},br={},dq={[Cr]:eb,[Rr]:[{[Ki]:Zw},"supportsFIPS"]},yq={[Ki]:Zw},lq={[Cr]:Sd,[Rr]:[!0,{[Cr]:eb,[Rr]:[yq,"supportsDualStack"]}]},uq=[hq],fq=[gq],pq=[{[Ki]:"Region"}],LX={version:"1.0",parameters:{Region:iq,UseDualStack:aq,UseFIPS:aq,Endpoint:iq},rules:[{conditions:[{[Cr]:oq,[Rr]:[cq]}],rules:[{conditions:uq,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Wi},{conditions:fq,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Wi},{endpoint:{url:cq,properties:br,headers:br},type:Qi}],type:Ls},{conditions:[{[Cr]:oq,[Rr]:pq}],rules:[{conditions:[{[Cr]:"aws.partition",[Rr]:pq,assign:Zw}],rules:[{conditions:[hq,gq],rules:[{conditions:[{[Cr]:Sd,[Rr]:[nq,dq]},lq],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:br,headers:br},type:Qi}],type:Ls},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Wi}],type:Ls},{conditions:uq,rules:[{conditions:[{[Cr]:Sd,[Rr]:[dq,nq]}],rules:[{conditions:[{[Cr]:"stringEquals",[Rr]:[{[Cr]:eb,[Rr]:[yq,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:br,headers:br},type:Qi},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:br,headers:br},type:Qi}],type:Ls},{error:"FIPS is enabled but this partition does not support FIPS",type:Wi}],type:Ls},{conditions:fq,rules:[{conditions:[lq],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:br,headers:br},type:Qi}],type:Ls},{error:"DualStack is enabled but this partition does not support DualStack",type:Wi}],type:Ls},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:br,headers:br},type:Qi}],type:Ls}],type:Ls},{error:"Invalid Configuration: Missing Region",type:Wi}]};Tm.ruleSet=LX});var Eq=w(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.defaultEndpointResolver=void 0;var qX=qr(),tb=Mr(),FX=Sq(),$X=new tb.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),UX=(e,t={})=>$X.get(e,()=>(0,tb.resolveEndpoint)(FX.ruleSet,{endpointParams:e,logger:t.logger}));Pm.defaultEndpointResolver=UX;tb.customEndpointFunctions.aws=qX.awsEndpointFunctions});var bq=w(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.getRuntimeConfig=void 0;var BX=(ht(),z(ks)),HX=(ve(),z(Gr)),jX=F(),zX=or(),_q=Ae(),wq=Te(),VX=Xw(),GX=Eq(),WX=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??_q.fromBase64,base64Encoder:e?.base64Encoder??_q.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??GX.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??VX.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new BX.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new HX.NoAuthSigner}],logger:e?.logger??new jX.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??zX.parseUrl,utf8Decoder:e?.utf8Decoder??wq.fromUtf8,utf8Encoder:e?.utf8Encoder??wq.toUtf8});Im.getRuntimeConfig=WX});var Aq=w(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.getRuntimeConfig=void 0;var QX=(Xs(),z(Js)),KX=QX.__importDefault(sq()),Cq=(ht(),z(ks)),Rq=ed(),Nm=ze(),YX=vs(),vq=ft(),Ro=$t(),xq=sr(),JX=xs(),XX=Yr(),ZX=bq(),e7=F(),t7=Ts(),r7=F(),s7=e=>{(0,r7.emitWarningIfUnsupportedVersion)(process.version);let t=(0,t7.resolveDefaultsModeConfig)(e),r=()=>t().then(e7.loadConfigsForDefaultMode),s=(0,ZX.getRuntimeConfig)(e);(0,Cq.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Ro.loadConfig)(Cq.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??JX.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Rq.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:KX.default.version}),maxAttempts:e?.maxAttempts??(0,Ro.loadConfig)(vq.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Ro.loadConfig)(Nm.NODE_REGION_CONFIG_OPTIONS,{...Nm.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:xq.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Ro.loadConfig)({...vq.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||XX.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??YX.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??xq.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Ro.loadConfig)(Nm.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,Ro.loadConfig)(Nm.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,Ro.loadConfig)(Rq.NODE_APP_ID_CONFIG_OPTIONS,n)}};Om.getRuntimeConfig=s7});var Gq=w(We=>{"use strict";var Tq=ds(),n7=ls(),o7=us(),Pq=Bi(),i7=ze(),qs=(ve(),z(Gr)),a7=Cs(),bd=Dt(),Iq=ft(),B=F(),Nq=Xw(),c7=Aq(),Oq=Gi(),Dq=ce(),Um=nr(),Ed=(ht(),z(ks)),d7=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Bm={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},l7=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},u7=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),f7=(e,t)=>{let r=Object.assign(Oq.getAwsRegionExtensionConfiguration(e),B.getDefaultExtensionConfiguration(e),Dq.getHttpHandlerExtensionConfiguration(e),l7(e));return t.forEach(s=>s.configure(r)),Object.assign(e,Oq.resolveAwsRegionExtensionConfiguration(r),B.resolveDefaultRuntimeConfig(r),Dq.resolveHttpHandlerRuntimeConfig(r),u7(r))},Yi=class extends B.Client{config;constructor(...[t]){let r=c7.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=d7(r),n=Pq.resolveUserAgentConfig(s),o=Iq.resolveRetryConfig(n),i=i7.resolveRegionConfig(o),a=Tq.resolveHostHeaderConfig(i),c=bd.resolveEndpointConfig(a),d=Nq.resolveHttpAuthSchemeConfig(c),l=f7(d,t?.extensions||[]);this.config=l,this.middlewareStack.use(Pq.getUserAgentPlugin(this.config)),this.middlewareStack.use(Iq.getRetryPlugin(this.config)),this.middlewareStack.use(a7.getContentLengthPlugin(this.config)),this.middlewareStack.use(Tq.getHostHeaderPlugin(this.config)),this.middlewareStack.use(n7.getLoggerPlugin(this.config)),this.middlewareStack.use(o7.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(qs.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:Nq.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async u=>new qs.DefaultIdentityProviderConfig({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(qs.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},qn=class e extends B.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Dm=class e extends qn{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},km=class e extends qn{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Mm=class e extends qn{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Lm=class e extends qn{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},kq=e=>({...e,...e.accessToken&&{accessToken:B.SENSITIVE_STRING}}),Mq=e=>({...e,...e.secretAccessKey&&{secretAccessKey:B.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:B.SENSITIVE_STRING}}),Lq=e=>({...e,...e.roleCredentials&&{roleCredentials:Mq(e.roleCredentials)}}),qq=e=>({...e,...e.accessToken&&{accessToken:B.SENSITIVE_STRING}}),Fq=e=>({...e,...e.accessToken&&{accessToken:B.SENSITIVE_STRING}}),$q=e=>({...e,...e.accessToken&&{accessToken:B.SENSITIVE_STRING}}),p7=async(e,t)=>{let r=qs.requestBuilder(e,t),s=B.map({},B.isSerializableHeaderValue,{[zm]:e[jm]});r.bp("/federation/credentials");let n=B.map({[A7]:[,B.expectNonNull(e[x7],"roleName")],[Bq]:[,B.expectNonNull(e[Uq],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},m7=async(e,t)=>{let r=qs.requestBuilder(e,t),s=B.map({},B.isSerializableHeaderValue,{[zm]:e[jm]});r.bp("/assignment/roles");let n=B.map({[Vq]:[,e[zq]],[jq]:[()=>e.maxResults!==void 0,()=>e[Hq].toString()],[Bq]:[,B.expectNonNull(e[Uq],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},h7=async(e,t)=>{let r=qs.requestBuilder(e,t),s=B.map({},B.isSerializableHeaderValue,{[zm]:e[jm]});r.bp("/assignment/accounts");let n=B.map({[Vq]:[,e[zq]],[jq]:[()=>e.maxResults!==void 0,()=>e[Hq].toString()]});return r.m("GET").h(s).q(n).b(void 0),r.build()},g7=async(e,t)=>{let r=qs.requestBuilder(e,t),s=B.map({},B.isSerializableHeaderValue,{[zm]:e[jm]});return r.bp("/logout"),r.m("POST").h(s).b(void 0),r.build()},y7=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Hm(e,t);let r=B.map({$metadata:Fn(e)}),s=B.expectNonNull(B.expectObject(await Ed.parseJsonBody(e.body,t)),"body"),n=B.take(s,{roleCredentials:B._json});return Object.assign(r,n),r},S7=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Hm(e,t);let r=B.map({$metadata:Fn(e)}),s=B.expectNonNull(B.expectObject(await Ed.parseJsonBody(e.body,t)),"body"),n=B.take(s,{nextToken:B.expectString,roleList:B._json});return Object.assign(r,n),r},E7=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Hm(e,t);let r=B.map({$metadata:Fn(e)}),s=B.expectNonNull(B.expectObject(await Ed.parseJsonBody(e.body,t)),"body"),n=B.take(s,{accountList:B._json,nextToken:B.expectString});return Object.assign(r,n),r},_7=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Hm(e,t);let r=B.map({$metadata:Fn(e)});return await B.collectBody(e.body,t),r},Hm=async(e,t)=>{let r={...e,body:await Ed.parseJsonErrorBody(e.body,t)},s=Ed.loadRestJsonErrorCode(e,r.body);switch(s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await b7(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await C7(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await R7(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await v7(r);default:let n=r.body;return w7({output:e,parsedBody:n,errorCode:s})}},w7=B.withBaseException(qn),b7=async(e,t)=>{let r=B.map({}),s=e.body,n=B.take(s,{message:B.expectString});Object.assign(r,n);let o=new Dm({$metadata:Fn(e),...r});return B.decorateServiceException(o,e.body)},C7=async(e,t)=>{let r=B.map({}),s=e.body,n=B.take(s,{message:B.expectString});Object.assign(r,n);let o=new km({$metadata:Fn(e),...r});return B.decorateServiceException(o,e.body)},R7=async(e,t)=>{let r=B.map({}),s=e.body,n=B.take(s,{message:B.expectString});Object.assign(r,n);let o=new Mm({$metadata:Fn(e),...r});return B.decorateServiceException(o,e.body)},v7=async(e,t)=>{let r=B.map({}),s=e.body,n=B.take(s,{message:B.expectString});Object.assign(r,n);let o=new Lm({$metadata:Fn(e),...r});return B.decorateServiceException(o,e.body)},Fn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Uq="accountId",jm="accessToken",Bq="account_id",Hq="maxResults",jq="max_result",zq="nextToken",Vq="next_token",x7="roleName",A7="role_name",zm="x-amz-sso_bearer_token",qm=class extends B.Command.classBuilder().ep(Bm).m(function(t,r,s,n){return[Um.getSerdePlugin(s,this.serialize,this.deserialize),bd.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(kq,Lq).ser(p7).de(y7).build(){},_d=class extends B.Command.classBuilder().ep(Bm).m(function(t,r,s,n){return[Um.getSerdePlugin(s,this.serialize,this.deserialize),bd.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(qq,void 0).ser(m7).de(S7).build(){},wd=class extends B.Command.classBuilder().ep(Bm).m(function(t,r,s,n){return[Um.getSerdePlugin(s,this.serialize,this.deserialize),bd.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(Fq,void 0).ser(h7).de(E7).build(){},Fm=class extends B.Command.classBuilder().ep(Bm).m(function(t,r,s,n){return[Um.getSerdePlugin(s,this.serialize,this.deserialize),bd.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f($q,void 0).ser(g7).de(_7).build(){},T7={GetRoleCredentialsCommand:qm,ListAccountRolesCommand:_d,ListAccountsCommand:wd,LogoutCommand:Fm},$m=class extends Yi{};B.createAggregatedClient(T7,$m);var P7=qs.createPaginator(Yi,_d,"nextToken","nextToken","maxResults"),I7=qs.createPaginator(Yi,wd,"nextToken","nextToken","maxResults");Object.defineProperty(We,"$Command",{enumerable:!0,get:function(){return B.Command}});Object.defineProperty(We,"__Client",{enumerable:!0,get:function(){return B.Client}});We.GetRoleCredentialsCommand=qm;We.GetRoleCredentialsRequestFilterSensitiveLog=kq;We.GetRoleCredentialsResponseFilterSensitiveLog=Lq;We.InvalidRequestException=Dm;We.ListAccountRolesCommand=_d;We.ListAccountRolesRequestFilterSensitiveLog=qq;We.ListAccountsCommand=wd;We.ListAccountsRequestFilterSensitiveLog=Fq;We.LogoutCommand=Fm;We.LogoutRequestFilterSensitiveLog=$q;We.ResourceNotFoundException=km;We.RoleCredentialsFilterSensitiveLog=Mq;We.SSO=$m;We.SSOClient=Yi;We.SSOServiceException=qn;We.TooManyRequestsException=Mm;We.UnauthorizedException=Lm;We.paginateListAccountRoles=P7;We.paginateListAccounts=I7});var Qq=w(rb=>{"use strict";var Wq=Gq();Object.defineProperty(rb,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return Wq.GetRoleCredentialsCommand}});Object.defineProperty(rb,"SSOClient",{enumerable:!0,get:function(){return Wq.SSOClient}})});var sb=w(Gm=>{"use strict";var Br=xe(),Vm=Ot(),Kq=(Ur(),z(xn)),N7=rq(),Jq=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),Cd=!1,Yq=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:s,ssoRoleName:n,ssoClient:o,clientConfig:i,parentClientConfig:a,profile:c,filepath:d,configFilepath:l,ignoreCache:u,logger:h})=>{let m,g="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let Ee=await N7.fromSso({profile:c,filepath:d,configFilepath:l,ignoreCache:u})();m={accessToken:Ee.token,expiresAt:new Date(Ee.expiration).toISOString()}}catch(Ee){throw new Br.CredentialsProviderError(Ee.message,{tryNextLink:Cd,logger:h})}else try{m=await Vm.getSSOTokenFromFile(e)}catch{throw new Br.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${g}`,{tryNextLink:Cd,logger:h})}if(new Date(m.expiresAt).getTime()-Date.now()<=0)throw new Br.CredentialsProviderError(`The SSO session associated with this profile has expired. ${g}`,{tryNextLink:Cd,logger:h});let{accessToken:C}=m,{SSOClient:v,GetRoleCredentialsCommand:A}=await Promise.resolve().then(function(){return Qq()}),N=o||new v(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??s,userAgentAppId:i?.userAgentAppId??a?.userAgentAppId})),$;try{$=await N.send(new A({accountId:r,roleName:n,accessToken:C}))}catch(Ee){throw new Br.CredentialsProviderError(Ee,{tryNextLink:Cd,logger:h})}let{roleCredentials:{accessKeyId:H,secretAccessKey:Q,sessionToken:fe,expiration:Ce,credentialScope:K,accountId:ae}={}}=$;if(!H||!Q||!fe||!Ce)throw new Br.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Cd,logger:h});let pe={accessKeyId:H,secretAccessKey:Q,sessionToken:fe,expiration:new Date(Ce),...K&&{credentialScope:K},...ae&&{accountId:ae}};return t?Kq.setCredentialFeature(pe,"CREDENTIALS_SSO","s"):Kq.setCredentialFeature(pe,"CREDENTIALS_SSO_LEGACY","u"),pe},Xq=(e,t)=>{let{sso_start_url:r,sso_account_id:s,sso_region:n,sso_role_name:o}=e;if(!r||!s||!n||!o)throw new Br.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},O7=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e,{ssoClient:a}=e,c=Vm.getProfileName({profile:e.profile??t?.profile});if(!r&&!s&&!n&&!o&&!i){let l=(await Vm.parseKnownFiles(e))[c];if(!l)throw new Br.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!Jq(l))throw new Br.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(l?.sso_session){let A=(await Vm.loadSsoSessionData(e))[l.sso_session],N=` configurations in profile ${c} and sso-session ${l.sso_session}`;if(n&&n!==A.sso_region)throw new Br.CredentialsProviderError("Conflicting SSO region"+N,{tryNextLink:!1,logger:e.logger});if(r&&r!==A.sso_start_url)throw new Br.CredentialsProviderError("Conflicting SSO start_url"+N,{tryNextLink:!1,logger:e.logger});l.sso_region=A.sso_region,l.sso_start_url=A.sso_start_url}let{sso_start_url:u,sso_account_id:h,sso_region:m,sso_role_name:g,sso_session:C}=Xq(l,e.logger);return Yq({ssoStartUrl:u,ssoSession:C,ssoAccountId:h,ssoRegion:m,ssoRoleName:g,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!s||!n||!o)throw new Br.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return Yq({ssoStartUrl:r,ssoSession:i,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};Gm.fromSSO=O7;Gm.isSsoProfile=Jq;Gm.validateSsoProfile=Xq});function D7(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function k7(e){return{schemeId:"smithy.api#noAuth"}}var Rd,Zq,eF,M7,tF,nb=S(()=>{ht();Rd=y(it());vd();Zq=async(e,t,r)=>({operation:(0,Rd.getSmithyContext)(t).operation,region:await(0,Rd.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});eF=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(k7(e));break}default:t.push(D7(e))}return t},M7=e=>Object.assign(e,{stsClientCtor:ns}),tF=e=>{let t=M7(e),r=Eo(t);return Object.assign(r,{authSchemePreference:(0,Rd.normalizeProvider)(e.authSchemePreference??[])})}});var rF,Wm,Qm=S(()=>{rF=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Wm={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var pF,te,ye,$n,gt,mF,hF,Ne,sF,os,Ji,ib,nF,ob,gF,oF,yt,iF,yF,SF,xt,tr,aF,EF,_F,cF,wF,dF,lF,uF,fF,L7,bF,CF=S(()=>{pF="required",te="type",ye="argv",$n="booleanEquals",gt="stringEquals",mF="sigv4",hF="us-east-1",Ne="endpoint",sF="https://sts.{Region}.{PartitionResult#dnsSuffix}",os="tree",Ji="error",ib="getAttr",nF={[pF]:!1,[te]:"string"},ob={[pF]:!0,default:!1,[te]:"boolean"},gF={ref:"Endpoint"},oF={fn:"isSet",[ye]:[{ref:"Region"}]},yt={ref:"Region"},iF={fn:"aws.partition",[ye]:[yt],assign:"PartitionResult"},yF={ref:"UseFIPS"},SF={ref:"UseDualStack"},xt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:mF,signingName:"sts",signingRegion:hF}]},headers:{}},tr={},aF={conditions:[{fn:gt,[ye]:[yt,"aws-global"]}],[Ne]:xt,[te]:Ne},EF={fn:$n,[ye]:[yF,!0]},_F={fn:$n,[ye]:[SF,!0]},cF={fn:ib,[ye]:[{ref:"PartitionResult"},"supportsFIPS"]},wF={ref:"PartitionResult"},dF={fn:$n,[ye]:[!0,{fn:ib,[ye]:[wF,"supportsDualStack"]}]},lF=[{fn:"isSet",[ye]:[gF]}],uF=[EF],fF=[_F],L7={version:"1.0",parameters:{Region:nF,UseDualStack:ob,UseFIPS:ob,Endpoint:nF,UseGlobalEndpoint:ob},rules:[{conditions:[{fn:$n,[ye]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[ye]:lF},oF,iF,{fn:$n,[ye]:[yF,!1]},{fn:$n,[ye]:[SF,!1]}],rules:[{conditions:[{fn:gt,[ye]:[yt,"ap-northeast-1"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"ap-south-1"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"ap-southeast-1"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"ap-southeast-2"]}],endpoint:xt,[te]:Ne},aF,{conditions:[{fn:gt,[ye]:[yt,"ca-central-1"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"eu-central-1"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"eu-north-1"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"eu-west-1"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"eu-west-2"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"eu-west-3"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"sa-east-1"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,hF]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"us-east-2"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"us-west-1"]}],endpoint:xt,[te]:Ne},{conditions:[{fn:gt,[ye]:[yt,"us-west-2"]}],endpoint:xt,[te]:Ne},{endpoint:{url:sF,properties:{authSchemes:[{name:mF,signingName:"sts",signingRegion:"{Region}"}]},headers:tr},[te]:Ne}],[te]:os},{conditions:lF,rules:[{conditions:uF,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[te]:Ji},{conditions:fF,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[te]:Ji},{endpoint:{url:gF,properties:tr,headers:tr},[te]:Ne}],[te]:os},{conditions:[oF],rules:[{conditions:[iF],rules:[{conditions:[EF,_F],rules:[{conditions:[{fn:$n,[ye]:[!0,cF]},dF],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:tr,headers:tr},[te]:Ne}],[te]:os},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[te]:Ji}],[te]:os},{conditions:uF,rules:[{conditions:[{fn:$n,[ye]:[cF,!0]}],rules:[{conditions:[{fn:gt,[ye]:[{fn:ib,[ye]:[wF,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:tr,headers:tr},[te]:Ne},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:tr,headers:tr},[te]:Ne}],[te]:os},{error:"FIPS is enabled but this partition does not support FIPS",[te]:Ji}],[te]:os},{conditions:fF,rules:[{conditions:[dF],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:tr,headers:tr},[te]:Ne}],[te]:os},{error:"DualStack is enabled but this partition does not support DualStack",[te]:Ji}],[te]:os},aF,{endpoint:{url:sF,properties:tr,headers:tr},[te]:Ne}],[te]:os}],[te]:os},{error:"Invalid Configuration: Missing Region",[te]:Ji}]},bF=L7});var RF,Xi,q7,vF,xF=S(()=>{RF=y(qr()),Xi=y(Mr());CF();q7=new Xi.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),vF=(e,t={})=>q7.get(e,()=>(0,Xi.resolveEndpoint)(bF,{endpointParams:e,logger:t.logger}));Xi.customEndpointFunctions.aws=RF.awsEndpointFunctions});var AF,TF,Km,Ym,PF,IF=S(()=>{ht();ve();AF=y(F()),TF=y(or()),Km=y(Ae()),Ym=y(Te());nb();xF();PF=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Km.fromBase64,base64Encoder:e?.base64Encoder??Km.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??vF,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??eF,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Bt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Nt}],logger:e?.logger??new AF.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??TF.parseUrl,utf8Decoder:e?.utf8Decoder??Ym.fromUtf8,utf8Encoder:e?.utf8Encoder??Ym.toUtf8})});var Jm,Bn,NF,Xm,Un,Zm,OF,DF,kF,MF,LF,qF,FF=S(()=>{Fw();ht();Jm=y(ed()),Bn=y(ze());ve();NF=y(vs()),Xm=y(ft()),Un=y($t()),Zm=y(sr()),OF=y(xs()),DF=y(Yr());IF();kF=y(F()),MF=y(Ts()),LF=y(F()),qF=e=>{(0,LF.emitWarningIfUnsupportedVersion)(process.version);let t=(0,MF.resolveDefaultsModeConfig)(e),r=()=>t().then(kF.loadConfigsForDefaultMode),s=PF(e);Pi(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Un.loadConfig)(Oi,n),bodyLengthChecker:e?.bodyLengthChecker??OF.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Jm.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:fm.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new Bt},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Nt}],maxAttempts:e?.maxAttempts??(0,Un.loadConfig)(Xm.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Un.loadConfig)(Bn.NODE_REGION_CONFIG_OPTIONS,{...Bn.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:Zm.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Un.loadConfig)({...Xm.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||DF.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??NF.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Zm.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Un.loadConfig)(Bn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,Un.loadConfig)(Bn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,Un.loadConfig)(Jm.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var $F,UF,BF=S(()=>{$F=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},UF=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var eh,th,rh,HF,jF=S(()=>{eh=y(Gi()),th=y(ce()),rh=y(F());BF();HF=(e,t)=>{let r=Object.assign((0,eh.getAwsRegionExtensionConfiguration)(e),(0,rh.getDefaultExtensionConfiguration)(e),(0,th.getHttpHandlerExtensionConfiguration)(e),$F(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,eh.resolveAwsRegionExtensionConfiguration)(r),(0,rh.resolveDefaultRuntimeConfig)(r),(0,th.resolveHttpHandlerRuntimeConfig)(r),UF(r))}});var sh,zF,VF,nh,GF,WF,QF,oh,ab,ns,vd=S(()=>{sh=y(ds()),zF=y(ls()),VF=y(us()),nh=y(Bi()),GF=y(ze());ve();WF=y(Cs()),QF=y(Dt()),oh=y(ft()),ab=y(F());nb();Qm();FF();jF();ns=class extends ab.Client{config;constructor(...[t]){let r=qF(t||{});super(r),this.initConfig=r;let s=rF(r),n=(0,nh.resolveUserAgentConfig)(s),o=(0,oh.resolveRetryConfig)(n),i=(0,GF.resolveRegionConfig)(o),a=(0,sh.resolveHostHeaderConfig)(i),c=(0,QF.resolveEndpointConfig)(a),d=tF(c),l=HF(d,t?.extensions||[]);this.config=l,this.middlewareStack.use((0,nh.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,oh.getRetryPlugin)(this.config)),this.middlewareStack.use((0,WF.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,sh.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,zF.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,VF.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(gs(this.config,{httpAuthSchemeParametersProvider:Zq,identityProviderConfigProvider:async u=>new kr({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(ys(this.config))}destroy(){super.destroy()}}});var KF,Ht,ih=S(()=>{KF=y(F()),Ht=class e extends KF.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var cb,db,lb,xd,Ad,Td,Pd,Id,Nd,ub,fb,Od,Dd=S(()=>{cb=y(F());ih();db=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:cb.SENSITIVE_STRING}}),lb=e=>({...e,...e.Credentials&&{Credentials:db(e.Credentials)}}),xd=class e extends Ht{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ad=class e extends Ht{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Td=class e extends Ht{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Pd=class e extends Ht{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Id=class e extends Ht{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Nd=class e extends Ht{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ub=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:cb.SENSITIVE_STRING}}),fb=e=>({...e,...e.Credentials&&{Credentials:db(e.Credentials)}}),Od=class e extends Ht{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var YF,ne,JF,XF,ZF,e$,t$,F7,$7,U7,B7,H7,j7,z7,V7,G7,r$,W7,Q7,K7,Y7,J7,X7,s$,Z7,eZ,n$,tZ,rZ,sZ,nZ,oZ,iZ,aZ,$s,cZ,o$,i$,a$,c$,pb,dZ,mb,Zi,lZ,hb,gb,ea,yb,ta,Sb,Eb,_b,ra,sa,wb,bb,Cb,na,Rb,oa,ia,vb,xb,Fs,Ab,Tb,Pb,Ib,Nb,d$,Ob,Db,kb,Je,l$,uZ,Mb=S(()=>{ht();YF=y(ce()),ne=y(F());Dd();ih();JF=async(e,t)=>{let r=i$,s;return s=l$({...V7(e,t),[c$]:dZ,[d$]:a$}),o$(t,r,"/",void 0,s)},XF=async(e,t)=>{let r=i$,s;return s=l$({...G7(e,t),[c$]:lZ,[d$]:a$}),o$(t,r,"/",void 0,s)},ZF=async(e,t)=>{if(e.statusCode>=300)return t$(e,t);let r=await qi(e.body,t),s={};return s=Z7(r.AssumeRoleResult,t),{$metadata:$s(e),...s}},e$=async(e,t)=>{if(e.statusCode>=300)return t$(e,t);let r=await qi(e.body,t),s={};return s=eZ(r.AssumeRoleWithWebIdentityResult,t),{$metadata:$s(e),...s}},t$=async(e,t)=>{let r={...e,body:await rm(e.body,t)},s=uZ(e,r.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await F7(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await H7(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await j7(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await z7(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await $7(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await U7(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await B7(r,t);default:let n=r.body;return cZ({output:e,parsedBody:n.Error,errorCode:s})}},F7=async(e,t)=>{let r=e.body,s=tZ(r.Error,t),n=new xd({$metadata:$s(e),...s});return(0,ne.decorateServiceException)(n,r)},$7=async(e,t)=>{let r=e.body,s=rZ(r.Error,t),n=new Od({$metadata:$s(e),...s});return(0,ne.decorateServiceException)(n,r)},U7=async(e,t)=>{let r=e.body,s=sZ(r.Error,t),n=new Id({$metadata:$s(e),...s});return(0,ne.decorateServiceException)(n,r)},B7=async(e,t)=>{let r=e.body,s=nZ(r.Error,t),n=new Nd({$metadata:$s(e),...s});return(0,ne.decorateServiceException)(n,r)},H7=async(e,t)=>{let r=e.body,s=oZ(r.Error,t),n=new Ad({$metadata:$s(e),...s});return(0,ne.decorateServiceException)(n,r)},j7=async(e,t)=>{let r=e.body,s=iZ(r.Error,t),n=new Td({$metadata:$s(e),...s});return(0,ne.decorateServiceException)(n,r)},z7=async(e,t)=>{let r=e.body,s=aZ(r.Error,t),n=new Pd({$metadata:$s(e),...s});return(0,ne.decorateServiceException)(n,r)},V7=(e,t)=>{let r={};if(e[oa]!=null&&(r[oa]=e[oa]),e[ia]!=null&&(r[ia]=e[ia]),e[sa]!=null){let s=r$(e[sa],t);e[sa]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}if(e[ra]!=null&&(r[ra]=e[ra]),e[ta]!=null&&(r[ta]=e[ta]),e[Pb]!=null){let s=X7(e[Pb],t);e[Pb]?.length===0&&(r.Tags=[]),Object.entries(s).forEach(([n,o])=>{let i=`Tags.${n}`;r[i]=o})}if(e[Nb]!=null){let s=J7(e[Nb],t);e[Nb]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(s).forEach(([n,o])=>{let i=`TransitiveTagKeys.${n}`;r[i]=o})}if(e[Eb]!=null&&(r[Eb]=e[Eb]),e[Ab]!=null&&(r[Ab]=e[Ab]),e[Ib]!=null&&(r[Ib]=e[Ib]),e[Fs]!=null&&(r[Fs]=e[Fs]),e[bb]!=null){let s=K7(e[bb],t);e[bb]?.length===0&&(r.ProvidedContexts=[]),Object.entries(s).forEach(([n,o])=>{let i=`ProvidedContexts.${n}`;r[i]=o})}return r},G7=(e,t)=>{let r={};if(e[oa]!=null&&(r[oa]=e[oa]),e[ia]!=null&&(r[ia]=e[ia]),e[Db]!=null&&(r[Db]=e[Db]),e[Cb]!=null&&(r[Cb]=e[Cb]),e[sa]!=null){let s=r$(e[sa],t);e[sa]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}return e[ra]!=null&&(r[ra]=e[ra]),e[ta]!=null&&(r[ta]=e[ta]),r},r$=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=W7(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},W7=(e,t)=>{let r={};return e[kb]!=null&&(r[kb]=e[kb]),r},Q7=(e,t)=>{let r={};return e[wb]!=null&&(r[wb]=e[wb]),e[yb]!=null&&(r[yb]=e[yb]),r},K7=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=Q7(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},Y7=(e,t)=>{let r={};return e[_b]!=null&&(r[_b]=e[_b]),e[Ob]!=null&&(r[Ob]=e[Ob]),r},J7=(e,t)=>{let r={},s=1;for(let n of e)n!==null&&(r[`member.${s}`]=n,s++);return r},X7=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=Y7(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},s$=(e,t)=>{let r={};return e[mb]!=null&&(r[mb]=(0,ne.expectString)(e[mb])),e[hb]!=null&&(r[hb]=(0,ne.expectString)(e[hb])),r},Z7=(e,t)=>{let r={};return e[ea]!=null&&(r[ea]=n$(e[ea],t)),e[Zi]!=null&&(r[Zi]=s$(e[Zi],t)),e[na]!=null&&(r[na]=(0,ne.strictParseInt32)(e[na])),e[Fs]!=null&&(r[Fs]=(0,ne.expectString)(e[Fs])),r},eZ=(e,t)=>{let r={};return e[ea]!=null&&(r[ea]=n$(e[ea],t)),e[xb]!=null&&(r[xb]=(0,ne.expectString)(e[xb])),e[Zi]!=null&&(r[Zi]=s$(e[Zi],t)),e[na]!=null&&(r[na]=(0,ne.strictParseInt32)(e[na])),e[Rb]!=null&&(r[Rb]=(0,ne.expectString)(e[Rb])),e[gb]!=null&&(r[gb]=(0,ne.expectString)(e[gb])),e[Fs]!=null&&(r[Fs]=(0,ne.expectString)(e[Fs])),r},n$=(e,t)=>{let r={};return e[pb]!=null&&(r[pb]=(0,ne.expectString)(e[pb])),e[vb]!=null&&(r[vb]=(0,ne.expectString)(e[vb])),e[Tb]!=null&&(r[Tb]=(0,ne.expectString)(e[Tb])),e[Sb]!=null&&(r[Sb]=(0,ne.expectNonNull)((0,ne.parseRfc3339DateTimeWithOffset)(e[Sb]))),r},tZ=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=(0,ne.expectString)(e[Je])),r},rZ=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=(0,ne.expectString)(e[Je])),r},sZ=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=(0,ne.expectString)(e[Je])),r},nZ=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=(0,ne.expectString)(e[Je])),r},oZ=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=(0,ne.expectString)(e[Je])),r},iZ=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=(0,ne.expectString)(e[Je])),r},aZ=(e,t)=>{let r={};return e[Je]!=null&&(r[Je]=(0,ne.expectString)(e[Je])),r},$s=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),cZ=(0,ne.withBaseException)(Ht),o$=async(e,t,r,s,n)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return s!==void 0&&(d.hostname=s),n!==void 0&&(d.body=n),new YF.HttpRequest(d)},i$={"content-type":"application/x-www-form-urlencoded"},a$="2011-06-15",c$="Action",pb="AccessKeyId",dZ="AssumeRole",mb="AssumedRoleId",Zi="AssumedRoleUser",lZ="AssumeRoleWithWebIdentity",hb="Arn",gb="Audience",ea="Credentials",yb="ContextAssertion",ta="DurationSeconds",Sb="Expiration",Eb="ExternalId",_b="Key",ra="Policy",sa="PolicyArns",wb="ProviderArn",bb="ProvidedContexts",Cb="ProviderId",na="PackedPolicySize",Rb="Provider",oa="RoleArn",ia="RoleSessionName",vb="SecretAccessKey",xb="SubjectFromWebIdentityToken",Fs="SourceIdentity",Ab="SerialNumber",Tb="SessionToken",Pb="Tags",Ib="TokenCode",Nb="TransitiveTagKeys",d$="Version",Ob="Value",Db="WebIdentityToken",kb="arn",Je="message",l$=e=>Object.entries(e).map(([t,r])=>(0,ne.extendedEncodeURIComponent)(t)+"="+(0,ne.extendedEncodeURIComponent)(r)).join("&"),uZ=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var u$,f$,p$,vo,ah=S(()=>{u$=y(Dt()),f$=y(nr()),p$=y(F());Qm();Dd();Mb();vo=class extends p$.Command.classBuilder().ep(Wm).m(function(t,r,s,n){return[(0,f$.getSerdePlugin)(s,this.serialize,this.deserialize),(0,u$.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,lb).ser(JF).de(ZF).build(){}});var m$,h$,g$,xo,ch=S(()=>{m$=y(Dt()),h$=y(nr()),g$=y(F());Qm();Dd();Mb();xo=class extends g$.Command.classBuilder().ep(Wm).m(function(t,r,s,n){return[(0,h$.getSerdePlugin)(s,this.serialize,this.deserialize),(0,m$.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(ub,fb).ser(XF).de(e$).build(){}});var y$,fZ,dh,S$=S(()=>{y$=y(F());ah();ch();vd();fZ={AssumeRoleCommand:vo,AssumeRoleWithWebIdentityCommand:xo},dh=class extends ns{};(0,y$.createAggregatedClient)(fZ,dh)});var E$=S(()=>{ah();ch()});var _$=S(()=>{Dd()});var w$,b$,C$,R$,v$,x$,A$=S(()=>{Ur();w$=y(Gi());ah();ch();b$=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},C$=async(e,t,r,s={})=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t,i=await(0,w$.stsRegionDefaultResolver)(s)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),n??o??i},R$=(e,t)=>{let r,s;return async(n,o)=>{if(s=n,!r){let{logger:l=e?.parentClientConfig?.logger,profile:u=e?.parentClientConfig?.profile,region:h,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:C=e?.parentClientConfig?.userAgentAppId}=e,v=await C$(h,e?.parentClientConfig?.region,g,{logger:l,profile:u}),A=!x$(m);r=new t({...e,userAgentAppId:C,profile:u,credentialDefaultProvider:()=>async()=>s,region:v,requestHandler:A?m:void 0,logger:l})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new vo(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let c=b$(a),d={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return vn(d,"CREDENTIALS_STS_ASSUME_ROLE","i"),d}},v$=(e,t)=>{let r;return async s=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:d=e?.parentClientConfig?.profile,region:l,requestHandler:u=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:m=e?.parentClientConfig?.userAgentAppId}=e,g=await C$(l,e?.parentClientConfig?.region,h,{logger:c,profile:d}),C=!x$(u);r=new t({...e,userAgentAppId:m,profile:d,region:g,requestHandler:C?u:void 0,logger:c})}let{Credentials:n,AssumedRoleUser:o}=await r.send(new xo(s));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);let i=b$(o),a={accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,...n.CredentialScope&&{credentialScope:n.CredentialScope},...i&&{accountId:i}};return i&&vn(a,"RESOLVED_ACCOUNT_ID","T"),vn(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},x$=e=>e?.metadata?.handlerProtocol==="h2"});var T$,P$,I$,pZ,N$=S(()=>{A$();vd();T$=(e,t)=>t?class extends e{constructor(s){super(s);for(let n of t)this.middlewareStack.use(n)}}:e,P$=(e={},t)=>R$(e,T$(ns,t)),I$=(e={},t)=>v$(e,T$(ns,t)),pZ=e=>t=>e({roleAssumer:P$(t),roleAssumerWithWebIdentity:I$(t),...t})});var Lb={};tt(Lb,{AssumeRoleCommand:()=>vo,AssumeRoleResponseFilterSensitiveLog:()=>lb,AssumeRoleWithWebIdentityCommand:()=>xo,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>ub,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>fb,CredentialsFilterSensitiveLog:()=>db,ExpiredTokenException:()=>xd,IDPCommunicationErrorException:()=>Od,IDPRejectedClaimException:()=>Id,InvalidIdentityTokenException:()=>Nd,MalformedPolicyDocumentException:()=>Ad,PackedPolicyTooLargeException:()=>Td,RegionDisabledException:()=>Pd,STS:()=>dh,STSClient:()=>ns,STSServiceException:()=>Ht,__Client:()=>ab.Client,decorateDefaultCredentialProvider:()=>pZ,getDefaultRoleAssumer:()=>P$,getDefaultRoleAssumerWithWebIdentity:()=>I$});var qb=S(()=>{vd();S$();E$();_$();N$();ih()});var Ub=w(O$=>{"use strict";var $b=Ot(),Fb=xe(),mZ=require("child_process"),hZ=require("util"),gZ=(Ur(),z(xn)),yZ=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let o=new Date;if(new Date(t.Expiration)<o)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let s=t.AccountId;!s&&r?.[e]?.aws_account_id&&(s=r[e].aws_account_id);let n={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...s&&{accountId:s}};return gZ.setCredentialFeature(n,"CREDENTIALS_PROCESS","w"),n},SZ=async(e,t,r)=>{let s=t[e];if(t[e]){let n=s.credential_process;if(n!==void 0){let o=hZ.promisify($b.externalDataInterceptor?.getTokenRecord?.().exec??mZ.exec);try{let{stdout:i}=await o(n),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return yZ(e,a,t)}catch(i){throw new Fb.CredentialsProviderError(i.message,{logger:r})}}else throw new Fb.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new Fb.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},EZ=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await $b.parseKnownFiles(e);return SZ($b.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};O$.fromProcess=EZ});var Bb=w(is=>{"use strict";var _Z=is&&is.__createBinding||(Object.create?(function(e,t,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]})),wZ=is&&is.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),bZ=is&&is.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var s=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[s.length]=n);return s},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s=e(t),n=0;n<s.length;n++)s[n]!=="default"&&_Z(r,t,s[n]);return wZ(r,t),r}})();Object.defineProperty(is,"__esModule",{value:!0});is.fromWebToken=void 0;var CZ=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:s,webIdentityToken:n,providerId:o,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:d}=e;if(!d){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>bZ((qb(),z(Lb))));d=l({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return d({RoleArn:r,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:c})};is.fromWebToken=CZ});var k$=w(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.fromTokenFile=void 0;var RZ=(Ur(),z(xn)),vZ=xe(),xZ=Ot(),AZ=require("fs"),TZ=Bb(),D$="AWS_WEB_IDENTITY_TOKEN_FILE",PZ="AWS_ROLE_ARN",IZ="AWS_ROLE_SESSION_NAME",NZ=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[D$],s=e?.roleArn??process.env[PZ],n=e?.roleSessionName??process.env[IZ];if(!r||!s)throw new vZ.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,TZ.fromWebToken)({...e,webIdentityToken:xZ.externalDataInterceptor?.getTokenRecord?.()[r]??(0,AZ.readFileSync)(r,{encoding:"ascii"}),roleArn:s,roleSessionName:n})(t);return r===process.env[D$]&&(0,RZ.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};lh.fromTokenFile=NZ});var Hb=w(kd=>{"use strict";var M$=k$(),L$=Bb();Object.keys(M$).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(kd,e)&&Object.defineProperty(kd,e,{enumerable:!0,get:function(){return M$[e]}})});Object.keys(L$).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(kd,e)&&Object.defineProperty(kd,e,{enumerable:!0,get:function(){return L$[e]}})})});var H$=w(B$=>{"use strict";var zb=Ot(),Md=xe(),Hn=(Ur(),z(xn)),OZ=(e,t,r)=>{let s={EcsContainer:async n=>{let{fromHttp:o}=await Promise.resolve().then(()=>y(Mw())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>y(hn()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Md.chain(o(n??{}),i(n))().then(jb)},Ec2InstanceMetadata:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>y(hn()));return async()=>o(n)().then(jb)},Environment:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>y(Dw()));return async()=>o(n)().then(jb)}};if(e in s)return s[e];throw new Md.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},jb=e=>Hn.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),DZ=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(kZ(e,{profile:t,logger:r})||MZ(e,{profile:t,logger:r})),kZ=(e,{profile:t,logger:r})=>{let s=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return s&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),s},MZ=(e,{profile:t,logger:r})=>{let s=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return s&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),s},LZ=async(e,t,r,s={},n)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:i,region:a}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(qb(),Lb));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(i&&i in s)throw new Md.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${zb.getProfileName(r)}. Profiles visited: `+Object.keys(s).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${i?`source_profile=[${i}]`:`profile=[${e}]`}`);let c=i?n(i,t,r,{...s,[i]:!0},q$(t[i]??{})):(await OZ(o.credential_source,e,r.logger)(r))();if(q$(o))return c.then(d=>Hn.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:l}=o;if(l){if(!r.mfaCodeProvider)throw new Md.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=l,d.TokenCode=await r.mfaCodeProvider(l)}let u=await c;return r.roleAssumer(u,d).then(h=>Hn.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},q$=e=>!e.role_arn&&!!e.credential_source,qZ=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",FZ=async(e,t)=>Promise.resolve().then(()=>y(Ub())).then(({fromProcess:r})=>r({...e,profile:t})().then(s=>Hn.setCredentialFeature(s,"CREDENTIALS_PROFILE_PROCESS","v"))),$Z=async(e,t,r={})=>{let{fromSSO:s}=await Promise.resolve().then(()=>y(sb()));return s({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(n=>t.sso_session?Hn.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO","r"):Hn.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},UZ=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),F$=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,$$=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return Hn.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},BZ=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,HZ=async(e,t)=>Promise.resolve().then(()=>y(Hb())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(s=>Hn.setCredentialFeature(s,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),U$=async(e,t,r,s={},n=!1)=>{let o=t[e];if(Object.keys(s).length>0&&F$(o))return $$(o,r);if(n||DZ(o,{profile:e,logger:r.logger}))return LZ(e,t,r,s,U$);if(F$(o))return $$(o,r);if(BZ(o))return HZ(o,r);if(qZ(o))return FZ(r,e);if(UZ(o))return await $Z(e,o,r);throw new Md.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},jZ=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let s=await zb.parseKnownFiles(r);return U$(zb.getProfileName({profile:e.profile??t?.profile}),s,r)};B$.fromIni=jZ});var G$=w(uh=>{"use strict";var Vb=Dw(),Ld=xe(),zZ=Ot(),j$="AWS_EC2_METADATA_DISABLED",VZ=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:s,fromInstanceMetadata:n}=await Promise.resolve().then(()=>y(hn()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>y(Mw()));return Ld.chain(o(e),s(e))}return process.env[j$]&&process.env[j$]!=="false"?async()=>{throw new Ld.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),n(e))};function GZ(e,t){let r=WZ(e),s,n,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),s)await s;else if(!o||t?.(o))if(o)n||(n=r(a).then(c=>{o=c,n=void 0}));else return s=r(a).then(c=>{o=c,s=void 0}),i(a);return o};return i}var WZ=e=>async t=>{let r;for(let s of e)try{return await s(t)}catch(n){if(r=n,n?.tryNextLink)continue;throw n}throw r},z$=!1,QZ=(e={})=>GZ([async()=>{if(e.profile??process.env[zZ.ENV_PROFILE])throw process.env[Vb.ENV_KEY]&&process.env[Vb.ENV_SECRET]&&(z$||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),z$=!0)),new Ld.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Vb.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e;if(!r&&!s&&!n&&!o&&!i)throw new Ld.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>y(sb()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>y(H$()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>y(Ub()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>y(Hb()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await VZ(e))()),async()=>{throw new Ld.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],V$),KZ=e=>e?.expiration!==void 0,V$=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;uh.credentialsTreatedAsExpired=V$;uh.credentialsWillNeedRefresh=KZ;uh.defaultProvider=QZ});var lU=w(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.ruleSet=void 0;var aU="required",jt="fn",zt="argv",Ao="ref",jn="properties",zn="headers",W$=!0,Q$="isSet",qd="booleanEquals",aa="error",as="endpoint",Us="tree",fh="PartitionResult",Gb="stringEquals",K$={[aU]:!1,type:"string"},Y$={[aU]:!0,default:!1,type:"boolean"},J$={[Ao]:"Endpoint"},cU={[jt]:qd,[zt]:[{[Ao]:"UseFIPS"},!0]},dU={[jt]:qd,[zt]:[{[Ao]:"UseDualStack"},!0]},vr={},X$={[jt]:"getAttr",[zt]:[{[Ao]:fh},"supportsFIPS"]},Z$={[jt]:qd,[zt]:[!0,{[jt]:"getAttr",[zt]:[{[Ao]:fh},"supportsDualStack"]}]},Wb={[jt]:"getAttr",[zt]:[{[Ao]:fh},"name"]},eU={url:"https://secretsmanager-fips.{Region}.amazonaws.com",[jn]:{},[zn]:{}},tU={url:"https://secretsmanager.{Region}.amazonaws.com",[jn]:{},[zn]:{}},rU=[cU],sU=[dU],nU=[{[Ao]:"Region"}],oU=[{[jt]:Gb,[zt]:["aws",Wb]}],iU=[{[jt]:Gb,[zt]:["aws-us-gov",Wb]}],YZ={version:"1.0",parameters:{Region:K$,UseDualStack:Y$,UseFIPS:Y$,Endpoint:K$},rules:[{conditions:[{[jt]:Q$,[zt]:[J$]}],rules:[{conditions:rU,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:aa},{conditions:sU,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:aa},{endpoint:{url:J$,[jn]:vr,[zn]:vr},type:as}],type:Us},{conditions:[{[jt]:Q$,[zt]:nU}],rules:[{conditions:[{[jt]:"aws.partition",[zt]:nU,assign:fh}],rules:[{conditions:[cU,dU],rules:[{conditions:[{[jt]:qd,[zt]:[W$,X$]},Z$],rules:[{conditions:oU,endpoint:eU,type:as},{conditions:iU,endpoint:eU,type:as},{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[jn]:vr,[zn]:vr},type:as}],type:Us},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:aa}],type:Us},{conditions:rU,rules:[{conditions:[{[jt]:qd,[zt]:[X$,W$]}],rules:[{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dnsSuffix}",[jn]:vr,[zn]:vr},type:as}],type:Us},{error:"FIPS is enabled but this partition does not support FIPS",type:aa}],type:Us},{conditions:sU,rules:[{conditions:[Z$],rules:[{conditions:oU,endpoint:tU,type:as},{conditions:[{[jt]:Gb,[zt]:["aws-cn",Wb]}],endpoint:{url:"https://secretsmanager.{Region}.amazonaws.com.cn",[jn]:vr,[zn]:vr},type:as},{conditions:iU,endpoint:tU,type:as},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dualStackDnsSuffix}",[jn]:vr,[zn]:vr},type:as}],type:Us},{error:"DualStack is enabled but this partition does not support DualStack",type:aa}],type:Us},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dnsSuffix}",[jn]:vr,[zn]:vr},type:as}],type:Us}],type:Us},{error:"Invalid Configuration: Missing Region",type:aa}]};ph.ruleSet=YZ});var uU=w(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.defaultEndpointResolver=void 0;var JZ=qr(),Qb=Mr(),XZ=lU(),ZZ=new Qb.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),eee=(e,t={})=>ZZ.get(e,()=>(0,Qb.resolveEndpoint)(XZ.ruleSet,{endpointParams:e,logger:t.logger}));mh.defaultEndpointResolver=eee;Qb.customEndpointFunctions.aws=JZ.awsEndpointFunctions});var mU=w(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.getRuntimeConfig=void 0;var tee=(ht(),z(ks)),ree=(Tw(),z(RM)),see=F(),nee=or(),fU=Ae(),pU=Te(),oee=Ow(),iee=uU(),aee=e=>({apiVersion:"2017-10-17",base64Decoder:e?.base64Decoder??fU.fromBase64,base64Encoder:e?.base64Encoder??fU.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??iee.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??oee.defaultSecretsManagerHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new tee.AwsSdkSigV4Signer}],logger:e?.logger??new see.NoOpLogger,protocol:e?.protocol??new ree.AwsJson1_1Protocol({defaultNamespace:"com.amazonaws.secretsmanager",serviceTarget:"secretsmanager",awsQueryCompatible:!1}),serviceId:e?.serviceId??"Secrets Manager",urlParser:e?.urlParser??nee.parseUrl,utf8Decoder:e?.utf8Decoder??pU.fromUtf8,utf8Encoder:e?.utf8Encoder??pU.toUtf8});hh.getRuntimeConfig=aee});var EU=w(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.getRuntimeConfig=void 0;var cee=(Xs(),z(Js)),dee=cee.__importDefault(NM()),hU=(ht(),z(ks)),lee=G$(),gU=ed(),gh=ze(),uee=vs(),yU=ft(),To=$t(),SU=sr(),fee=xs(),pee=Yr(),mee=mU(),hee=F(),gee=Ts(),yee=F(),See=e=>{(0,yee.emitWarningIfUnsupportedVersion)(process.version);let t=(0,gee.resolveDefaultsModeConfig)(e),r=()=>t().then(hee.loadConfigsForDefaultMode),s=(0,mee.getRuntimeConfig)(e);(0,hU.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,To.loadConfig)(hU.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??fee.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??lee.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,gU.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:dee.default.version}),maxAttempts:e?.maxAttempts??(0,To.loadConfig)(yU.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,To.loadConfig)(gh.NODE_REGION_CONFIG_OPTIONS,{...gh.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:SU.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,To.loadConfig)({...yU.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||pee.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??uee.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??SU.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,To.loadConfig)(gh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,To.loadConfig)(gh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,To.loadConfig)(gU.NODE_APP_ID_CONFIG_OPTIONS,n)}};yh.getRuntimeConfig=See});var h2=w(Y=>{"use strict";var _U=ds(),Eee=ls(),_ee=us(),wU=Bi(),wee=ze(),ca=(ve(),z(Gr)),Vt=(le(),z(dy)),bee=Cs(),Oe=Dt(),bU=ft(),Se=F(),CU=Ow(),Cee=EU(),RU=Gi(),vU=ce(),Ree=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"secretsmanager"}),Be={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},vee=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},xee=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Aee=(e,t)=>{let r=Object.assign(RU.getAwsRegionExtensionConfiguration(e),Se.getDefaultExtensionConfiguration(e),vU.getHttpHandlerExtensionConfiguration(e),vee(e));return t.forEach(s=>s.configure(r)),Object.assign(e,RU.resolveAwsRegionExtensionConfiguration(r),Se.resolveDefaultRuntimeConfig(r),vU.resolveHttpHandlerRuntimeConfig(r),xee(r))},Po=class extends Se.Client{config;constructor(...[t]){let r=Cee.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=Ree(r),n=wU.resolveUserAgentConfig(s),o=bU.resolveRetryConfig(n),i=wee.resolveRegionConfig(o),a=_U.resolveHostHeaderConfig(i),c=Oe.resolveEndpointConfig(a),d=CU.resolveHttpAuthSchemeConfig(c),l=Aee(d,t?.extensions||[]);this.config=l,this.middlewareStack.use(Vt.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(wU.getUserAgentPlugin(this.config)),this.middlewareStack.use(bU.getRetryPlugin(this.config)),this.middlewareStack.use(bee.getContentLengthPlugin(this.config)),this.middlewareStack.use(_U.getHostHeaderPlugin(this.config)),this.middlewareStack.use(Eee.getLoggerPlugin(this.config)),this.middlewareStack.use(_ee.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(ca.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:CU.defaultSecretsManagerHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async u=>new ca.DefaultIdentityProviderConfig({"aws.auth#sigv4":u.credentials})})),this.middlewareStack.use(ca.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Gt=class xU extends Se.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,xU.prototype)}},Tee={all:"all",description:"description",name:"name",owning_service:"owning-service",primary_region:"primary-region",tag_key:"tag-key",tag_value:"tag-value"},AU=class TU extends Gt{name="DecryptionFailure";$fault="client";Message;constructor(t){super({name:"DecryptionFailure",$fault:"client",...t}),Object.setPrototypeOf(this,TU.prototype),this.Message=t.Message}},PU=class IU extends Gt{name="InternalServiceError";$fault="server";Message;constructor(t){super({name:"InternalServiceError",$fault:"server",...t}),Object.setPrototypeOf(this,IU.prototype),this.Message=t.Message}},NU=class OU extends Gt{name="InvalidNextTokenException";$fault="client";Message;constructor(t){super({name:"InvalidNextTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,OU.prototype),this.Message=t.Message}},DU=class kU extends Gt{name="InvalidParameterException";$fault="client";Message;constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),Object.setPrototypeOf(this,kU.prototype),this.Message=t.Message}},MU=class LU extends Gt{name="InvalidRequestException";$fault="client";Message;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,LU.prototype),this.Message=t.Message}},qU=class FU extends Gt{name="ResourceNotFoundException";$fault="client";Message;constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,FU.prototype),this.Message=t.Message}},Pee={Failed:"Failed",InProgress:"InProgress",InSync:"InSync"},$U=class UU extends Gt{name="EncryptionFailure";$fault="client";Message;constructor(t){super({name:"EncryptionFailure",$fault:"client",...t}),Object.setPrototypeOf(this,UU.prototype),this.Message=t.Message}},BU=class HU extends Gt{name="LimitExceededException";$fault="client";Message;constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,HU.prototype),this.Message=t.Message}},jU=class zU extends Gt{name="MalformedPolicyDocumentException";$fault="client";Message;constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,zU.prototype),this.Message=t.Message}},VU=class GU extends Gt{name="PreconditionNotMetException";$fault="client";Message;constructor(t){super({name:"PreconditionNotMetException",$fault:"client",...t}),Object.setPrototypeOf(this,GU.prototype),this.Message=t.Message}},WU=class QU extends Gt{name="ResourceExistsException";$fault="client";Message;constructor(t){super({name:"ResourceExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,QU.prototype),this.Message=t.Message}},Iee={asc:"asc",desc:"desc"},KU=class YU extends Gt{name="PublicPolicyException";$fault="client";Message;constructor(t){super({name:"PublicPolicyException",$fault:"client",...t}),Object.setPrototypeOf(this,YU.prototype),this.Message=t.Message}},Nee="AutomaticallyAfterDays",Oee="APIErrorListType",Dee="APIErrorType",nt="ARN",JU="AddReplicaRegions",kee="AddReplicaRegionListType",Mee="BatchGetSecretValue",Lee="BatchGetSecretValueRequest",qee="BatchGetSecretValueResponse",Fee="BlockPublicPolicy",Bd="CreatedDate",$ee="CheckName",Uee="CancelRotateSecret",Bee="CancelRotateSecretRequest",Hee="CancelRotateSecretResponse",$h="ClientRequestToken",jee="CreateSecret",zee="CreateSecretRequest",Vee="CreateSecretResponse",Uh="Description",Gee="DeletionDate",XU="DeletedDate",Wee="DecryptionFailure",Qee="DeleteResourcePolicy",Kee="DeleteResourcePolicyRequest",Yee="DeleteResourcePolicyResponse",Jee="DeleteSecret",Xee="DeleteSecretRequest",Zee="DeleteSecretResponse",ete="DescribeSecretRequest",tte="DescribeSecretResponse",rte="DescribeSecret",ste="Duration",nte="Errors",ote="ErrorCode",ite="ExcludeCharacters",ate="EncryptionFailure",cte="ExcludeLowercase",dte="ErrorMessage",lte="ExcludeNumbers",ute="ExcludePunctuation",fte="ExcludeUppercase",ZU="Filters",pte="ForceDeleteWithoutRecovery",mte="FiltersListType",e2="ForceOverwriteReplicaSecret",hte="Filter",gte="GetRandomPassword",yte="GetRandomPasswordRequest",Ste="GetRandomPasswordResponse",Ete="GetResourcePolicyRequest",_te="GetResourcePolicyResponse",wte="GetResourcePolicy",bte="GetSecretValue",Cte="GetSecretValueRequest",Rte="GetSecretValueResponse",vte="IncludeDeprecated",xte="InvalidNextTokenException",Ate="IncludePlannedDeletion",Tte="InvalidParameterException",Pte="InvalidRequestException",Ite="IncludeSpace",Nte="InternalServiceError",t2="Key",da="KmsKeyId",Ote="KmsKeyIds",Bh="LastAccessedDate",r2="LastChangedDate",Dte="LimitExceededException",s2="LastRotatedDate",kte="ListSecrets",Mte="ListSecretsRequest",Lte="ListSecretsResponse",qte="ListSecretVersionIds",Fte="ListSecretVersionIdsRequest",$te="ListSecretVersionIdsResponse",rr="Message",Ute="MalformedPolicyDocumentException",Kb="MaxResults",Bte="MoveToVersionId",St="Name",n2="NextRotationDate",la="NextToken",o2="OwningService",Hte="PasswordLength",jte="PreconditionNotMetException",zte="PublicPolicyException",i2="PrimaryRegion",Vte="PutResourcePolicy",Gte="PutResourcePolicyRequest",Wte="PutResourcePolicyResponse",Qte="PutSecretValue",Kte="PutSecretValueRequest",Yte="PutSecretValueResponse",Jte="PolicyValidationPassed",a2="Region",c2="RotationEnabled",Xte="ResourceExistsException",Zte="RequireEachIncludedType",ere="RemoveFromVersionId",tre="RotateImmediately",Yb="RotationLambdaARN",rre="ResourceNotFoundException",sre="RandomPassword",nre="RandomPasswordType",Jb="ResourcePolicy",Xb="RotationRules",ore="RemoveRegionsFromReplication",ire="RemoveRegionsFromReplicationRequest",are="RemoveRegionsFromReplicationResponse",cre="RemoveReplicaRegions",dre="ReplicaRegionType",lre="RotationRulesType",Hh="ReplicationStatus",ure="ReplicationStatusListType",fre="RestoreSecretRequest",pre="RestoreSecretResponse",mre="RotateSecretRequest",hre="RotateSecretResponse",gre="ReplicationStatusType",yre="ReplicateSecretToRegions",Sre="ReplicateSecretToRegionsRequest",Ere="ReplicateSecretToRegionsResponse",_re="RestoreSecret",wre="RotateSecret",bre="RotationToken",Cre="RotationTokenType",Rre="RecoveryWindowInDays",vre="Status",Hd="SecretBinary",xre="SecretBinaryType",Are="ScheduleExpression",et="SecretId",Tre="SecretIdList",Pre="SecretList",Ire="SecretListEntry",Nre="SecretListType",Ore="StatusMessage",Dre="SortOrder",kre="StopReplicationToReplica",Mre="StopReplicationToReplicaRequest",Lre="StopReplicationToReplicaResponse",jd="SecretString",qre="SecretStringType",Fre="SecretValues",$re="SecretValueEntry",Ure="SecretVersionsListEntry",Bre="SecretVersionsListType",Hre="SecretValuesType",jre="SecretVersionsToStages",d2="SecretVersionsToStagesMapType",jh="Tags",zre="TagKeys",Vre="TagListType",Gre="TagResource",Wre="TagResourceRequest",Qre="Tag",Kre="UntagResource",Yre="UntagResourceRequest",Jre="UpdateSecret",Xre="UpdateSecretRequest",Zre="UpdateSecretResponse",ese="UpdateSecretVersionStage",tse="UpdateSecretVersionStageRequest",rse="UpdateSecretVersionStageResponse",sse="Values",nse="ValidationErrors",ose="ValidationErrorsEntry",ise="ValidationErrorsType",Bs="VersionId",ase="VersionIdsToStages",cse="ValidateResourcePolicy",dse="ValidateResourcePolicyRequest",lse="ValidateResourcePolicyResponse",l2="VersionStage",zd="VersionStages",use="Value",fse="Versions",Hr="client",xr="error",pse="server",u2="smithy.ts.sdk.synthetic.com.amazonaws.secretsmanager",I="com.amazonaws.secretsmanager",mse=[0,I,nre,8,0],hse=[0,I,Cre,8,0],Vd=[0,I,xre,8,21],Gd=[0,I,qre,8,0],gse=[3,I,Dee,0,[et,ote,rr],[0,0,0]],yse=[3,I,Lee,0,[Tre,ZU,Kb,la],[64,()=>m2,1,0]],Sse=[3,I,qee,0,[Fre,la,nte],[[()=>Ine,0],0,()=>Tne]],Ese=[3,I,Bee,0,[et],[0]],_se=[3,I,Hee,0,[nt,St,Bs],[0,0,0]],wse=[3,I,zee,0,[St,$h,Uh,da,Hd,jd,jh,JU,e2],[0,[0,4],0,0,[()=>Vd,0],[()=>Gd,0],()=>Vh,()=>p2,2]],bse=[3,I,Vee,0,[nt,St,Bs,Hh],[0,0,0,()=>zh]],Cse=[-3,I,Wee,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError(Cse,AU);var Rse=[3,I,Kee,0,[et],[0]],vse=[3,I,Yee,0,[nt,St],[0,0]],xse=[3,I,Xee,0,[et,Rre,pte],[0,1,2]],Ase=[3,I,Zee,0,[nt,St,Gee],[0,0,4]],Tse=[3,I,ete,0,[et],[0]],Pse=[3,I,tte,0,[nt,St,Uh,da,c2,Yb,Xb,s2,r2,Bh,XU,n2,jh,ase,o2,Bd,i2,Hh],[0,0,0,0,2,0,()=>Zb,4,4,4,4,4,()=>Vh,[2,I,d2,0,0,64],0,4,0,()=>zh]],Ise=[-3,I,ate,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError(Ise,$U);var Nse=[3,I,hte,0,[t2,sse],[0,64]],Ose=[3,I,yte,0,[Hte,ite,lte,ute,fte,cte,Ite,Zte],[1,0,2,2,2,2,2,2]],Dse=[3,I,Ste,0,[sre],[[()=>mse,0]]],kse=[3,I,Ete,0,[et],[0]],Mse=[3,I,_te,0,[nt,St,Jb],[0,0,0]],Lse=[3,I,Cte,0,[et,Bs,l2],[0,0,0]],qse=[3,I,Rte,0,[nt,St,Bs,Hd,jd,zd,Bd],[0,0,0,[()=>Vd,0],[()=>Gd,0],64,4]],Fse=[-3,I,Nte,{[xr]:pse},[rr],[0]];Vt.TypeRegistry.for(I).registerError(Fse,PU);var $se=[-3,I,xte,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError($se,NU);var Use=[-3,I,Tte,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError(Use,DU);var Bse=[-3,I,Pte,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError(Bse,MU);var Hse=[-3,I,Dte,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError(Hse,BU);var jse=[3,I,Mte,0,[Ate,Kb,la,ZU,Dre],[2,1,0,()=>m2,0]],zse=[3,I,Lte,0,[Pre,la],[()=>Pne,0]],Vse=[3,I,Fte,0,[et,Kb,la,vte],[0,1,0,2]],Gse=[3,I,$te,0,[fse,la,nt,St],[()=>Nne,0,0,0]],Wse=[-3,I,Ute,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError(Wse,jU);var Qse=[-3,I,jte,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError(Qse,VU);var Kse=[-3,I,zte,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError(Kse,KU);var Yse=[3,I,Gte,0,[et,Jb,Fee],[0,0,2]],Jse=[3,I,Wte,0,[nt,St],[0,0]],Xse=[3,I,Kte,0,[et,$h,Hd,jd,zd,bre],[0,[0,4],[()=>Vd,0],[()=>Gd,0],64,[()=>hse,0]]],Zse=[3,I,Yte,0,[nt,St,Bs,zd],[0,0,0,64]],ene=[3,I,ire,0,[et,cre],[0,64]],tne=[3,I,are,0,[nt,Hh],[0,()=>zh]],rne=[3,I,dre,0,[a2,da],[0,0]],sne=[3,I,Sre,0,[et,JU,e2],[0,()=>p2,2]],nne=[3,I,Ere,0,[nt,Hh],[0,()=>zh]],one=[3,I,gre,0,[a2,da,vre,Ore,Bh],[0,0,0,0,4]],ine=[-3,I,Xte,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError(ine,WU);var ane=[-3,I,rre,{[xr]:Hr},[rr],[0]];Vt.TypeRegistry.for(I).registerError(ane,qU);var cne=[3,I,fre,0,[et],[0]],dne=[3,I,pre,0,[nt,St],[0,0]],lne=[3,I,mre,0,[et,$h,Yb,Xb,tre],[0,[0,4],0,()=>Zb,2]],une=[3,I,hre,0,[nt,St,Bs],[0,0,0]],Zb=[3,I,lre,0,[Nee,ste,Are],[1,0,0]],fne=[3,I,Ire,0,[nt,St,Uh,da,c2,Yb,Xb,s2,r2,Bh,XU,n2,jh,jre,o2,Bd,i2],[0,0,0,0,2,0,()=>Zb,4,4,4,4,4,()=>Vh,[2,I,d2,0,0,64],0,4,0]],pne=[3,I,$re,0,[nt,St,Bs,Hd,jd,zd,Bd],[0,0,0,[()=>Vd,0],[()=>Gd,0],64,4]],mne=[3,I,Ure,0,[Bs,zd,Bh,Bd,Ote],[0,64,4,4,64]],hne=[3,I,Mre,0,[et],[0]],gne=[3,I,Lre,0,[nt],[0]],yne=[3,I,Qre,0,[t2,use],[0,0]],Sne=[3,I,Wre,0,[et,jh],[0,()=>Vh]],Ene=[3,I,Yre,0,[et,zre],[0,64]],_ne=[3,I,Xre,0,[et,$h,Uh,da,Hd,jd],[0,[0,4],0,0,[()=>Vd,0],[()=>Gd,0]]],wne=[3,I,Zre,0,[nt,St,Bs],[0,0,0]],bne=[3,I,tse,0,[et,l2,ere,Bte],[0,0,0,0]],Cne=[3,I,rse,0,[nt,St],[0,0]],Rne=[3,I,dse,0,[et,Jb],[0,0]],vne=[3,I,lse,0,[Jte,nse],[2,()=>One]],xne=[3,I,ose,0,[$ee,dte],[0,0]],f2="unit",Ane=[-3,u2,"SecretsManagerServiceException",0,[],[]];Vt.TypeRegistry.for(u2).registerError(Ane,Gt);var p2=[1,I,kee,0,()=>rne],Tne=[1,I,Oee,0,()=>gse],m2=[1,I,mte,0,()=>Nse],zh=[1,I,ure,0,()=>one],Pne=[1,I,Nre,0,()=>fne],Ine=[1,I,Hre,0,[()=>pne,0]],Nne=[1,I,Bre,0,()=>mne],Vh=[1,I,Vre,0,()=>yne],One=[1,I,ise,0,()=>xne],Dne=[9,I,Mee,0,()=>yse,()=>Sse],kne=[9,I,Uee,0,()=>Ese,()=>_se],Mne=[9,I,jee,0,()=>wse,()=>bse],Lne=[9,I,Qee,0,()=>Rse,()=>vse],qne=[9,I,Jee,0,()=>xse,()=>Ase],Fne=[9,I,rte,0,()=>Tse,()=>Pse],$ne=[9,I,gte,0,()=>Ose,()=>Dse],Une=[9,I,wte,0,()=>kse,()=>Mse],Bne=[9,I,bte,0,()=>Lse,()=>qse],Hne=[9,I,kte,0,()=>jse,()=>zse],jne=[9,I,qte,0,()=>Vse,()=>Gse],zne=[9,I,Vte,0,()=>Yse,()=>Jse],Vne=[9,I,Qte,0,()=>Xse,()=>Zse],Gne=[9,I,ore,0,()=>ene,()=>tne],Wne=[9,I,yre,0,()=>sne,()=>nne],Qne=[9,I,_re,0,()=>cne,()=>dne],Kne=[9,I,wre,0,()=>lne,()=>une],Yne=[9,I,kre,0,()=>hne,()=>gne],Jne=[9,I,Gre,0,()=>Sne,()=>f2],Xne=[9,I,Kre,0,()=>Ene,()=>f2],Zne=[9,I,Jre,0,()=>_ne,()=>wne],eoe=[9,I,ese,0,()=>bne,()=>Cne],toe=[9,I,cse,0,()=>Rne,()=>vne],Fd=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","BatchGetSecretValue",{}).n("SecretsManagerClient","BatchGetSecretValueCommand").sc(Dne).build(){},Sh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","CancelRotateSecret",{}).n("SecretsManagerClient","CancelRotateSecretCommand").sc(kne).build(){},Eh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","CreateSecret",{}).n("SecretsManagerClient","CreateSecretCommand").sc(Mne).build(){},_h=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteResourcePolicy",{}).n("SecretsManagerClient","DeleteResourcePolicyCommand").sc(Lne).build(){},wh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteSecret",{}).n("SecretsManagerClient","DeleteSecretCommand").sc(qne).build(){},bh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","DescribeSecret",{}).n("SecretsManagerClient","DescribeSecretCommand").sc(Fne).build(){},Ch=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetRandomPassword",{}).n("SecretsManagerClient","GetRandomPasswordCommand").sc($ne).build(){},Rh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetResourcePolicy",{}).n("SecretsManagerClient","GetResourcePolicyCommand").sc(Une).build(){},vh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetSecretValue",{}).n("SecretsManagerClient","GetSecretValueCommand").sc(Bne).build(){},$d=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecrets",{}).n("SecretsManagerClient","ListSecretsCommand").sc(Hne).build(){},Ud=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecretVersionIds",{}).n("SecretsManagerClient","ListSecretVersionIdsCommand").sc(jne).build(){},xh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","PutResourcePolicy",{}).n("SecretsManagerClient","PutResourcePolicyCommand").sc(zne).build(){},Ah=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","PutSecretValue",{}).n("SecretsManagerClient","PutSecretValueCommand").sc(Vne).build(){},Th=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","RemoveRegionsFromReplication",{}).n("SecretsManagerClient","RemoveRegionsFromReplicationCommand").sc(Gne).build(){},Ph=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ReplicateSecretToRegions",{}).n("SecretsManagerClient","ReplicateSecretToRegionsCommand").sc(Wne).build(){},Ih=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","RestoreSecret",{}).n("SecretsManagerClient","RestoreSecretCommand").sc(Qne).build(){},Nh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","RotateSecret",{}).n("SecretsManagerClient","RotateSecretCommand").sc(Kne).build(){},Oh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","StopReplicationToReplica",{}).n("SecretsManagerClient","StopReplicationToReplicaCommand").sc(Yne).build(){},Dh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","TagResource",{}).n("SecretsManagerClient","TagResourceCommand").sc(Jne).build(){},kh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","UntagResource",{}).n("SecretsManagerClient","UntagResourceCommand").sc(Xne).build(){},Mh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecret",{}).n("SecretsManagerClient","UpdateSecretCommand").sc(Zne).build(){},Lh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecretVersionStage",{}).n("SecretsManagerClient","UpdateSecretVersionStageCommand").sc(eoe).build(){},qh=class extends Se.Command.classBuilder().ep(Be).m(function(t,r,s,n){return[Oe.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ValidateResourcePolicy",{}).n("SecretsManagerClient","ValidateResourcePolicyCommand").sc(toe).build(){},roe={BatchGetSecretValueCommand:Fd,CancelRotateSecretCommand:Sh,CreateSecretCommand:Eh,DeleteResourcePolicyCommand:_h,DeleteSecretCommand:wh,DescribeSecretCommand:bh,GetRandomPasswordCommand:Ch,GetResourcePolicyCommand:Rh,GetSecretValueCommand:vh,ListSecretsCommand:$d,ListSecretVersionIdsCommand:Ud,PutResourcePolicyCommand:xh,PutSecretValueCommand:Ah,RemoveRegionsFromReplicationCommand:Th,ReplicateSecretToRegionsCommand:Ph,RestoreSecretCommand:Ih,RotateSecretCommand:Nh,StopReplicationToReplicaCommand:Oh,TagResourceCommand:Dh,UntagResourceCommand:kh,UpdateSecretCommand:Mh,UpdateSecretVersionStageCommand:Lh,ValidateResourcePolicyCommand:qh},Fh=class extends Po{};Se.createAggregatedClient(roe,Fh);var soe=ca.createPaginator(Po,Fd,"NextToken","NextToken","MaxResults"),noe=ca.createPaginator(Po,Ud,"NextToken","NextToken","MaxResults"),ooe=ca.createPaginator(Po,$d,"NextToken","NextToken","MaxResults");Object.defineProperty(Y,"$Command",{enumerable:!0,get:function(){return Se.Command}});Object.defineProperty(Y,"__Client",{enumerable:!0,get:function(){return Se.Client}});Y.BatchGetSecretValueCommand=Fd;Y.CancelRotateSecretCommand=Sh;Y.CreateSecretCommand=Eh;Y.DecryptionFailure=AU;Y.DeleteResourcePolicyCommand=_h;Y.DeleteSecretCommand=wh;Y.DescribeSecretCommand=bh;Y.EncryptionFailure=$U;Y.FilterNameStringType=Tee;Y.GetRandomPasswordCommand=Ch;Y.GetResourcePolicyCommand=Rh;Y.GetSecretValueCommand=vh;Y.InternalServiceError=PU;Y.InvalidNextTokenException=NU;Y.InvalidParameterException=DU;Y.InvalidRequestException=MU;Y.LimitExceededException=BU;Y.ListSecretVersionIdsCommand=Ud;Y.ListSecretsCommand=$d;Y.MalformedPolicyDocumentException=jU;Y.PreconditionNotMetException=VU;Y.PublicPolicyException=KU;Y.PutResourcePolicyCommand=xh;Y.PutSecretValueCommand=Ah;Y.RemoveRegionsFromReplicationCommand=Th;Y.ReplicateSecretToRegionsCommand=Ph;Y.ResourceExistsException=WU;Y.ResourceNotFoundException=qU;Y.RestoreSecretCommand=Ih;Y.RotateSecretCommand=Nh;Y.SecretsManager=Fh;Y.SecretsManagerClient=Po;Y.SecretsManagerServiceException=Gt;Y.SortOrderType=Iee;Y.StatusType=Pee;Y.StopReplicationToReplicaCommand=Oh;Y.TagResourceCommand=Dh;Y.UntagResourceCommand=kh;Y.UpdateSecretCommand=Mh;Y.UpdateSecretVersionStageCommand=Lh;Y.ValidateResourcePolicyCommand=qh;Y.paginateBatchGetSecretValue=soe;Y.paginateListSecretVersionIds=noe;Y.paginateListSecrets=ooe});var tC=w(g2=>{"use strict";g2.parse=function(e,t){return new eC(e,t).parse()};var eC=class e{constructor(t,r){this.source=t,this.transform=r||ioe,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var t=this.source[this.position++];return t==="\\"?{value:this.source[this.position++],escaped:!0}:{value:t,escaped:!1}}record(t){this.recorded.push(t)}newEntry(t){var r;(this.recorded.length>0||t)&&(r=this.recorded.join(""),r==="NULL"&&!t&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var t=this.nextCharacter();if(t.value==="=")break}}parse(t){var r,s,n;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!n)this.dimension++,this.dimension>1&&(s=new e(this.source.substr(this.position-1),this.transform),this.entries.push(s.parse(!0)),this.position+=s.position-2);else if(r.value==="}"&&!n){if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else r.value==='"'&&!r.escaped?(n&&this.newEntry(!0),n=!n):r.value===","&&!n?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function ioe(e){return e}});var rC=w((oRe,y2)=>{var aoe=tC();y2.exports={create:function(e,t){return{parse:function(){return aoe.parse(e,t)}}}}});var _2=w((iRe,E2)=>{"use strict";var coe=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,doe=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,loe=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,uoe=/^-?infinity$/;E2.exports=function(t){if(uoe.test(t))return Number(t.replace("i","I"));var r=coe.exec(t);if(!r)return foe(t)||null;var s=!!r[8],n=parseInt(r[1],10);s&&(n=S2(n));var o=parseInt(r[2],10)-1,i=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),d=parseInt(r[6],10),l=r[7];l=l?1e3*parseFloat(l):0;var u,h=poe(t);return h!=null?(u=new Date(Date.UTC(n,o,i,a,c,d,l)),sC(n)&&u.setUTCFullYear(n),h!==0&&u.setTime(u.getTime()-h)):(u=new Date(n,o,i,a,c,d,l),sC(n)&&u.setFullYear(n)),u};function foe(e){var t=doe.exec(e);if(t){var r=parseInt(t[1],10),s=!!t[4];s&&(r=S2(r));var n=parseInt(t[2],10)-1,o=t[3],i=new Date(r,n,o);return sC(r)&&i.setFullYear(r),i}}function poe(e){if(e.endsWith("+00"))return 0;var t=loe.exec(e.split(" ")[1]);if(t){var r=t[1];if(r==="Z")return 0;var s=r==="-"?-1:1,n=parseInt(t[2],10)*3600+parseInt(t[3]||0,10)*60+parseInt(t[4]||0,10);return n*s*1e3}}function S2(e){return-(e-1)}function sC(e){return e>=0&&e<100}});var b2=w((aRe,w2)=>{w2.exports=hoe;var moe=Object.prototype.hasOwnProperty;function hoe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)moe.call(r,s)&&(e[s]=r[s])}return e}});var v2=w((cRe,R2)=>{"use strict";var goe=b2();R2.exports=ua;function ua(e){if(!(this instanceof ua))return new ua(e);goe(this,Toe(e))}var yoe=["seconds","minutes","hours","days","months","years"];ua.prototype.toPostgres=function(){var e=yoe.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),e.length===0?"0":e.map(function(t){var r=this[t]||0;return t==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+t},this).join(" ")};var Soe={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},Eoe=["years","months","days"],_oe=["hours","minutes","seconds"];ua.prototype.toISOString=ua.prototype.toISO=function(){var e=Eoe.map(r,this).join(""),t=_oe.map(r,this).join("");return"P"+e+"T"+t;function r(s){var n=this[s]||0;return s==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),n+Soe[s]}};var nC="([+-]?\\d+)",woe=nC+"\\s+years?",boe=nC+"\\s+mons?",Coe=nC+"\\s+days?",Roe="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",voe=new RegExp([woe,boe,Coe,Roe].map(function(e){return"("+e+")?"}).join("\\s*")),C2={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},xoe=["hours","minutes","seconds","milliseconds"];function Aoe(e){var t=e+"000000".slice(e.length);return parseInt(t,10)/1e3}function Toe(e){if(!e)return{};var t=voe.exec(e),r=t[8]==="-";return Object.keys(C2).reduce(function(s,n){var o=C2[n],i=t[o];return!i||(i=n==="milliseconds"?Aoe(i):parseInt(i,10),!i)||(r&&~xoe.indexOf(n)&&(i*=-1),s[n]=i),s},{})}});var A2=w((dRe,x2)=>{"use strict";x2.exports=function(t){if(/^\\x/.test(t))return new Buffer(t.substr(2),"hex");for(var r="",s=0;s<t.length;)if(t[s]!=="\\")r+=t[s],++s;else if(/[0-7]{3}/.test(t.substr(s+1,3)))r+=String.fromCharCode(parseInt(t.substr(s+1,3),8)),s+=4;else{for(var n=1;s+n<t.length&&t[s+n]==="\\";)n++;for(var o=0;o<Math.floor(n/2);++o)r+="\\";s+=Math.floor(n/2)*2}return new Buffer(r,"binary")}});var k2=w((lRe,D2)=>{var Wd=tC(),Qd=rC(),Gh=_2(),P2=v2(),I2=A2();function Wh(e){return function(r){return r===null?r:e(r)}}function N2(e){return e===null?e:e==="TRUE"||e==="t"||e==="true"||e==="y"||e==="yes"||e==="on"||e==="1"}function Poe(e){return e?Wd.parse(e,N2):null}function Ioe(e){return parseInt(e,10)}function oC(e){return e?Wd.parse(e,Wh(Ioe)):null}function Noe(e){return e?Wd.parse(e,Wh(function(t){return O2(t).trim()})):null}var Ooe=function(e){if(!e)return null;var t=Qd.create(e,function(r){return r!==null&&(r=dC(r)),r});return t.parse()},iC=function(e){if(!e)return null;var t=Qd.create(e,function(r){return r!==null&&(r=parseFloat(r)),r});return t.parse()},Ar=function(e){if(!e)return null;var t=Qd.create(e);return t.parse()},aC=function(e){if(!e)return null;var t=Qd.create(e,function(r){return r!==null&&(r=Gh(r)),r});return t.parse()},Doe=function(e){if(!e)return null;var t=Qd.create(e,function(r){return r!==null&&(r=P2(r)),r});return t.parse()},koe=function(e){return e?Wd.parse(e,Wh(I2)):null},cC=function(e){return parseInt(e,10)},O2=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},T2=function(e){return e?Wd.parse(e,Wh(JSON.parse)):null},dC=function(e){return e[0]!=="("?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},Moe=function(e){if(e[0]!=="<"&&e[1]!=="(")return null;for(var t="(",r="",s=!1,n=2;n<e.length-1;n++){if(s||(t+=e[n]),e[n]===")"){s=!0;continue}else if(!s)continue;e[n]!==","&&(r+=e[n])}var o=dC(t);return o.radius=parseFloat(r),o},Loe=function(e){e(20,O2),e(21,cC),e(23,cC),e(26,cC),e(700,parseFloat),e(701,parseFloat),e(16,N2),e(1082,Gh),e(1114,Gh),e(1184,Gh),e(600,dC),e(651,Ar),e(718,Moe),e(1e3,Poe),e(1001,koe),e(1005,oC),e(1007,oC),e(1028,oC),e(1016,Noe),e(1017,Ooe),e(1021,iC),e(1022,iC),e(1231,iC),e(1014,Ar),e(1015,Ar),e(1008,Ar),e(1009,Ar),e(1040,Ar),e(1041,Ar),e(1115,aC),e(1182,aC),e(1185,aC),e(1186,P2),e(1187,Doe),e(17,I2),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,T2),e(3807,T2),e(3907,Ar),e(2951,Ar),e(791,Ar),e(1183,Ar),e(1270,Ar)};D2.exports={init:Loe}});var L2=w((uRe,M2)=>{"use strict";var Wt=1e6;function qoe(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),s="";t<0&&(t=~t+(r===0),r=~r+1>>>0,s="-");var n="",o,i,a,c,d,l;{if(o=t%Wt,t=t/Wt>>>0,i=4294967296*o+r,r=i/Wt>>>0,a=""+(i-Wt*r),r===0&&t===0)return s+a+n;for(c="",d=6-a.length,l=0;l<d;l++)c+="0";n=c+a+n}{if(o=t%Wt,t=t/Wt>>>0,i=4294967296*o+r,r=i/Wt>>>0,a=""+(i-Wt*r),r===0&&t===0)return s+a+n;for(c="",d=6-a.length,l=0;l<d;l++)c+="0";n=c+a+n}{if(o=t%Wt,t=t/Wt>>>0,i=4294967296*o+r,r=i/Wt>>>0,a=""+(i-Wt*r),r===0&&t===0)return s+a+n;for(c="",d=6-a.length,l=0;l<d;l++)c+="0";n=c+a+n}return o=t%Wt,i=4294967296*o+r,a=""+i%Wt,s+a+n}M2.exports=qoe});var B2=w((fRe,U2)=>{var Foe=L2(),He=function(e,t,r,s,n){r=r||0,s=s||!1,n=n||function(m,g,C){return m*Math.pow(2,C)+g};var o=r>>3,i=function(m){return s?~m&255:m},a=255,c=8-r%8;t<c&&(a=255<<8-t&255,c=t),r&&(a=a>>r%8);var d=0;r%8+t>=8&&(d=n(0,i(e[o])&a,c));for(var l=t+r>>3,u=o+1;u<l;u++)d=n(d,i(e[u]),8);var h=(t+r)%8;return h>0&&(d=n(d,i(e[l])>>8-h,h)),d},$2=function(e,t,r){var s=Math.pow(2,r-1)-1,n=He(e,1),o=He(e,r,1);if(o===0)return 0;var i=1,a=function(d,l,u){d===0&&(d=1);for(var h=1;h<=u;h++)i/=2,(l&1<<u-h)>0&&(d+=i);return d},c=He(e,t,r+1,!1,a);return o==Math.pow(2,r+1)-1?c===0?n===0?1/0:-1/0:NaN:(n===0?1:-1)*Math.pow(2,o-s)*c},$oe=function(e){return He(e,1)==1?-1*(He(e,15,1,!0)+1):He(e,15,1)},q2=function(e){return He(e,1)==1?-1*(He(e,31,1,!0)+1):He(e,31,1)},Uoe=function(e){return $2(e,23,8)},Boe=function(e){return $2(e,52,11)},Hoe=function(e){var t=He(e,16,32);if(t==49152)return NaN;for(var r=Math.pow(1e4,He(e,16,16)),s=0,n=[],o=He(e,16),i=0;i<o;i++)s+=He(e,16,64+16*i)*r,r/=1e4;var a=Math.pow(10,He(e,16,48));return(t===0?1:-1)*Math.round(s*a)/a},F2=function(e,t){var r=He(t,1),s=He(t,63,1),n=new Date((r===0?1:-1)*s/1e3+9466848e5);return e||n.setTime(n.getTime()+n.getTimezoneOffset()*6e4),n.usec=s%1e3,n.getMicroSeconds=function(){return this.usec},n.setMicroSeconds=function(o){this.usec=o},n.getUTCMicroSeconds=function(){return this.usec},n},Kd=function(e){for(var t=He(e,32),r=He(e,32,32),s=He(e,32,64),n=96,o=[],i=0;i<t;i++)o[i]=He(e,32,n),n+=32,n+=32;var a=function(d){var l=He(e,32,n);if(n+=32,l==4294967295)return null;var u;if(d==23||d==20)return u=He(e,l*8,n),n+=l*8,u;if(d==25)return u=e.toString(this.encoding,n>>3,(n+=l<<3)>>3),u;console.log("ERROR: ElementType not implemented: "+d)},c=function(d,l){var u=[],h;if(d.length>1){var m=d.shift();for(h=0;h<m;h++)u[h]=c(d,l);d.unshift(m)}else for(h=0;h<d[0];h++)u[h]=a(l);return u};return c(o,s)},joe=function(e){return e.toString("utf8")},zoe=function(e){return e===null?null:He(e,8)>0},Voe=function(e){e(20,Foe),e(21,$oe),e(23,q2),e(26,q2),e(1700,Hoe),e(700,Uoe),e(701,Boe),e(16,zoe),e(1114,F2.bind(null,!1)),e(1184,F2.bind(null,!0)),e(1e3,Kd),e(1007,Kd),e(1016,Kd),e(1008,Kd),e(1009,Kd),e(25,joe)};U2.exports={init:Voe}});var j2=w((pRe,H2)=>{H2.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Xd=w(Jd=>{var Goe=k2(),Woe=B2(),Qoe=rC(),Koe=j2();Jd.getTypeParser=Yoe;Jd.setTypeParser=Joe;Jd.arrayParser=Qoe;Jd.builtins=Koe;var Yd={text:{},binary:{}};function z2(e){return String(e)}function Yoe(e,t){return t=t||"text",Yd[t]&&Yd[t][e]||z2}function Joe(e,t,r){typeof t=="function"&&(r=t,t="text"),Yd[t][e]=r}Goe.init(function(e,t){Yd.text[e]=t});Woe.init(function(e,t){Yd.binary[e]=t})});var Zd=w((hRe,lC)=>{"use strict";lC.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var fa=Xd(),Xoe=fa.getTypeParser(20,"text"),Zoe=fa.getTypeParser(1016,"text");lC.exports.__defineSetter__("parseInt8",function(e){fa.setTypeParser(20,"text",e?fa.getTypeParser(23,"text"):Xoe),fa.setTypeParser(1016,"text",e?fa.getTypeParser(1007,"text"):Zoe)})});var pa=w((gRe,W2)=>{"use strict";var eie=Zd(),V2=require("util"),{isDate:tie}=V2.types||V2;function rie(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function G2(e){let t="{";for(let r=0;r<e.length;r++)if(r>0&&(t=t+","),e[r]===null||typeof e[r]>"u")t=t+"NULL";else if(Array.isArray(e[r]))t=t+G2(e[r]);else if(ArrayBuffer.isView(e[r])){let s=e[r];if(!(s instanceof Buffer)){let n=Buffer.from(s.buffer,s.byteOffset,s.byteLength);n.length===s.byteLength?s=n:s=n.slice(s.byteOffset,s.byteOffset+s.byteLength)}t+="\\\\x"+s.toString("hex")}else t+=rie(Qh(e[r]));return t=t+"}",t}var Qh=function(e,t){if(e==null)return null;if(typeof e=="object"){if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){let r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return tie(e)?eie.parseInputDatesAsUTC?oie(e):nie(e):Array.isArray(e)?G2(e):sie(e,t)}return e.toString()};function sie(e,t){if(e&&typeof e.toPostgres=="function"){if(t=t||[],t.indexOf(e)!==-1)throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),Qh(e.toPostgres(Qh),t)}return JSON.stringify(e)}function nie(e){let t=-e.getTimezoneOffset(),r=e.getFullYear(),s=r<1;s&&(r=Math.abs(r)+1);let n=String(r).padStart(4,"0")+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+String(e.getMilliseconds()).padStart(3,"0");return t<0?(n+="-",t*=-1):n+="+",n+=String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0"),s&&(n+=" BC"),n}function oie(e){let t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);let s=String(t).padStart(4,"0")+"-"+String(e.getUTCMonth()+1).padStart(2,"0")+"-"+String(e.getUTCDate()).padStart(2,"0")+"T"+String(e.getUTCHours()).padStart(2,"0")+":"+String(e.getUTCMinutes()).padStart(2,"0")+":"+String(e.getUTCSeconds()).padStart(2,"0")+"."+String(e.getUTCMilliseconds()).padStart(3,"0");return s+="+00:00",r&&(s+=" BC"),s}function iie(e,t,r){return e=typeof e=="string"?{text:e}:e,t&&(typeof t=="function"?e.callback=t:e.values=t),r&&(e.callback=r),e}var aie=function(e){return'"'+e.replace(/"/g,'""')+'"'},cie=function(e){let t=!1,r="'";if(e==null||typeof e!="string")return"''";for(let s=0;s<e.length;s++){let n=e[s];n==="'"?r+=n+n:n==="\\"?(r+=n+n,t=!0):r+=n}return r+="'",t===!0&&(r=" E"+r),r};W2.exports={prepareValue:function(t){return Qh(t)},normalizeQueryConfig:iie,escapeIdentifier:aie,escapeLiteral:cie}});var K2=w((yRe,Q2)=>{"use strict";var ma=require("crypto");function uC(e){return ma.createHash("md5").update(e,"utf-8").digest("hex")}function die(e,t,r){let s=uC(t+e);return"md5"+uC(Buffer.concat([Buffer.from(s),r]))}function lie(e){return ma.createHash("sha256").update(e).digest()}function uie(e,t){return e=e.replace(/(\D)-/,"$1"),ma.createHash(e).update(t).digest()}function fie(e,t){return ma.createHmac("sha256",e).update(t).digest()}async function pie(e,t,r){return ma.pbkdf2Sync(e,t,r,32,"sha256")}Q2.exports={postgresMd5PasswordHash:die,randomBytes:ma.randomBytes,deriveKey:pie,sha256:lie,hashByName:uie,hmacSha256:fie,md5:uC}});var Z2=w((SRe,X2)=>{var Y2=require("crypto");X2.exports={postgresMd5PasswordHash:hie,randomBytes:mie,deriveKey:Eie,sha256:gie,hashByName:yie,hmacSha256:Sie,md5:fC};var J2=Y2.webcrypto||globalThis.crypto,Io=J2.subtle,pC=new TextEncoder;function mie(e){return J2.getRandomValues(Buffer.alloc(e))}async function fC(e){try{return Y2.createHash("md5").update(e,"utf-8").digest("hex")}catch{let r=typeof e=="string"?pC.encode(e):e,s=await Io.digest("MD5",r);return Array.from(new Uint8Array(s)).map(n=>n.toString(16).padStart(2,"0")).join("")}}async function hie(e,t,r){let s=await fC(t+e);return"md5"+await fC(Buffer.concat([Buffer.from(s),r]))}async function gie(e){return await Io.digest("SHA-256",e)}async function yie(e,t){return await Io.digest(e,t)}async function Sie(e,t){let r=await Io.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Io.sign("HMAC",r,pC.encode(t))}async function Eie(e,t,r){let s=await Io.importKey("raw",pC.encode(e),"PBKDF2",!1,["deriveBits"]),n={name:"PBKDF2",hash:"SHA-256",salt:t,iterations:r};return await Io.deriveBits(n,s,256,["deriveBits"])}});var hC=w((ERe,mC)=>{"use strict";var _ie=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;_ie?mC.exports=K2():mC.exports=Z2()});var rB=w((_Re,tB)=>{function No(e,t){return new Error("SASL channel binding: "+e+" when parsing public certificate "+t.toString("base64"))}function gC(e,t){let r=e[t++];if(r<128)return{length:r,index:t};let s=r&127;if(s>4)throw No("bad length",e);r=0;for(let n=0;n<s;n++)r=r<<8|e[t++];return{length:r,index:t}}function eB(e,t){if(e[t++]!==6)throw No("non-OID data",e);let{length:r,index:s}=gC(e,t);t=s;let n=t+r,o=e[t++],i=(o/40>>0)+"."+o%40;for(;t<n;){let a=0;for(;t<n;){let c=e[t++];if(a=a<<7|c&127,c<128)break}i+="."+a}return{oid:i,index:t}}function el(e,t){if(e[t++]!==48)throw No("non-sequence data",e);return gC(e,t)}function wie(e,t){t===void 0&&(t=0),t=el(e,t).index;let{length:r,index:s}=el(e,t);t=s+r,t=el(e,t).index;let{oid:n,index:o}=eB(e,t);switch(n){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(t=o,t=el(e,t).index,e[t++]!==160)throw No("non-tag data",e);t=gC(e,t).index,t=el(e,t).index;let{oid:i}=eB(e,t);switch(i){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw No("unknown hash OID "+i,e)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw No("Ed448 certificate channel binding is not currently supported by Postgres")}throw No("unknown OID "+n,e)}tB.exports={signatureAlgorithmHashFromCertificate:wie}});var iB=w((wRe,oB)=>{"use strict";var Vn=hC(),{signatureAlgorithmHashFromCertificate:bie}=rB();function Cie(e,t){let r=["SCRAM-SHA-256"];t&&r.unshift("SCRAM-SHA-256-PLUS");let s=r.find(i=>e.includes(i));if(!s)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(s==="SCRAM-SHA-256-PLUS"&&typeof t.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let n=Vn.randomBytes(18).toString("base64");return{mechanism:s,clientNonce:n,response:(s==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":t?"y":"n")+",,n=*,r="+n,message:"SASLInitialResponse"}}async function Rie(e,t,r,s){if(e.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(t==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let n=Aie(r);if(n.nonce.startsWith(e.clientNonce)){if(n.nonce.length===e.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let o="n=*,r="+e.clientNonce,i="r="+n.nonce+",s="+n.salt+",i="+n.iteration,a=s?"eSws":"biws";if(e.mechanism==="SCRAM-SHA-256-PLUS"){let N=s.getPeerCertificate().raw,$=bie(N);($==="MD5"||$==="SHA-1")&&($="SHA-256");let H=await Vn.hashByName($,N);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(H)]).toString("base64")}let c="c="+a+",r="+n.nonce,d=o+","+i+","+c,l=Buffer.from(n.salt,"base64"),u=await Vn.deriveKey(t,l,n.iteration),h=await Vn.hmacSha256(u,"Client Key"),m=await Vn.sha256(h),g=await Vn.hmacSha256(m,d),C=Pie(Buffer.from(h),Buffer.from(g)).toString("base64"),v=await Vn.hmacSha256(u,"Server Key"),A=await Vn.hmacSha256(v,d);e.message="SASLResponse",e.serverSignature=Buffer.from(A).toString("base64"),e.response=c+",p="+C}function vie(e,t){if(e.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=Tie(t);if(r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function xie(e){if(typeof e!="string")throw new TypeError("SASL: text must be a string");return e.split("").map((t,r)=>e.charCodeAt(r)).every(t=>t>=33&&t<=43||t>=45&&t<=126)}function sB(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function nB(e){if(typeof e!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(t=>{if(!/^.=/.test(t))throw new Error("SASL: Invalid attribute pair entry");let r=t[0],s=t.substring(2);return[r,s]}))}function Aie(e){let t=nB(e),r=t.get("r");if(r){if(!xie(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let s=t.get("s");if(s){if(!sB(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let n=t.get("i");if(n){if(!/^[1-9][0-9]*$/.test(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let o=parseInt(n,10);return{nonce:r,salt:s,iteration:o}}function Tie(e){let r=nB(e).get("v");if(r){if(!sB(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function Pie(e,t){if(!Buffer.isBuffer(e))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(t))throw new TypeError("second argument must be a Buffer");if(e.length!==t.length)throw new Error("Buffer lengths must match");if(e.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(e.map((r,s)=>e[s]^t[s]))}oB.exports={startSession:Cie,continueSession:Rie,finalizeSession:vie}});var Yh=w((bRe,aB)=>{"use strict";var Iie=Xd();function Kh(e){this._types=e||Iie,this.text={},this.binary={}}Kh.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}};Kh.prototype.setTypeParser=function(e,t,r){typeof t=="function"&&(r=t,t="text"),this.getOverrides(t)[e]=r};Kh.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)};aB.exports=Kh});var lB=w((CRe,dB)=>{"use strict";function ha(e,t={}){if(e.charAt(0)==="/"){let c=e.split(" ");return{host:c[0],database:c[1]}}let r={},s,n=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)&&(e=encodeURI(e).replace(/%25(\d\d)/g,"%$1"));try{try{s=new URL(e,"postgres://base")}catch{s=new URL(e.replace("@/","@___DUMMY___/"),"postgres://base"),n=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of s.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(s.username),r.password=r.password||decodeURIComponent(s.password),s.protocol=="socket:")return r.host=decodeURI(s.pathname),r.database=s.searchParams.get("db"),r.client_encoding=s.searchParams.get("encoding"),r;let o=n?"":s.hostname;r.host?o&&/^%2f/i.test(o)&&(s.pathname=o+s.pathname):r.host=decodeURIComponent(o),r.port||(r.port=s.port);let i=s.pathname.slice(1)||null;r.database=i?decodeURI(i):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),t.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||t.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function Nie(e){return Object.entries(e).reduce((r,[s,n])=>(n!=null&&(r[s]=n),r),{})}function cB(e){return Object.entries(e).reduce((r,[s,n])=>{if(s==="ssl"){let o=n;typeof o=="boolean"&&(r[s]=o),typeof o=="object"&&(r[s]=Nie(o))}else if(n!=null)if(s==="port"){if(n!==""){let o=parseInt(n,10);if(isNaN(o))throw new Error(`Invalid ${s}: ${n}`);r[s]=o}}else r[s]=n;return r},{})}function Oie(e){return cB(ha(e))}dB.exports=ha;ha.parse=ha;ha.toClientConfig=cB;ha.parseIntoClientConfig=Oie});var SC=w((RRe,pB)=>{"use strict";var Die=require("dns"),fB=Zd(),uB=lB().parse,kt=function(e,t,r){return r===void 0?r=process.env["PG"+e.toUpperCase()]:r===!1||(r=process.env[r]),t[e]||r||fB[e]},kie=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return fB.ssl},ga=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},Tr=function(e,t,r){let s=t[r];s!=null&&e.push(r+"="+ga(s))},yC=class{constructor(t){t=typeof t=="string"?uB(t):t||{},t.connectionString&&(t=Object.assign({},t,uB(t.connectionString))),this.user=kt("user",t),this.database=kt("database",t),this.database===void 0&&(this.database=this.user),this.port=parseInt(kt("port",t),10),this.host=kt("host",t),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:kt("password",t)}),this.binary=kt("binary",t),this.options=kt("options",t),this.ssl=typeof t.ssl>"u"?kie():t.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=kt("client_encoding",t),this.replication=kt("replication",t),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=kt("application_name",t,"PGAPPNAME"),this.fallback_application_name=kt("fallback_application_name",t,!1),this.statement_timeout=kt("statement_timeout",t,!1),this.lock_timeout=kt("lock_timeout",t,!1),this.idle_in_transaction_session_timeout=kt("idle_in_transaction_session_timeout",t,!1),this.query_timeout=kt("query_timeout",t,!1),t.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(t.connectionTimeoutMillis/1e3),t.keepAlive===!1?this.keepalives=0:t.keepAlive===!0&&(this.keepalives=1),typeof t.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(t.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(t){let r=[];Tr(r,this,"user"),Tr(r,this,"password"),Tr(r,this,"port"),Tr(r,this,"application_name"),Tr(r,this,"fallback_application_name"),Tr(r,this,"connect_timeout"),Tr(r,this,"options");let s=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(Tr(r,s,"sslmode"),Tr(r,s,"sslca"),Tr(r,s,"sslkey"),Tr(r,s,"sslcert"),Tr(r,s,"sslrootcert"),this.database&&r.push("dbname="+ga(this.database)),this.replication&&r.push("replication="+ga(this.replication)),this.host&&r.push("host="+ga(this.host)),this.isDomainSocket)return t(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+ga(this.client_encoding)),Die.lookup(this.host,function(n,o){return n?t(n,null):(r.push("hostaddr="+ga(o)),t(null,r.join(" ")))})}};pB.exports=yC});var _C=w((vRe,hB)=>{"use strict";var Mie=Xd(),mB=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,EC=class{constructor(t,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=t==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(t){let r;t.text?r=mB.exec(t.text):r=mB.exec(t.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(t){let r=new Array(t.length);for(let s=0,n=t.length;s<n;s++){let o=t[s];o!==null?r[s]=this._parsers[s](o):r[s]=null}return r}parseRow(t){let r={...this._prebuiltEmptyResultObject};for(let s=0,n=t.length;s<n;s++){let o=t[s],i=this.fields[s].name;if(o!==null){let a=this.fields[s].format==="binary"?Buffer.from(o):o;r[i]=this._parsers[s](a)}else r[i]=null}return r}addRow(t){this.rows.push(t)}addFields(t){this.fields=t,this.fields.length&&(this._parsers=new Array(t.length));let r={};for(let s=0;s<t.length;s++){let n=t[s];r[n.name]=null,this._types?this._parsers[s]=this._types.getTypeParser(n.dataTypeID,n.format||"text"):this._parsers[s]=Mie.getTypeParser(n.dataTypeID,n.format||"text")}this._prebuiltEmptyResultObject={...r}}};hB.exports=EC});var EB=w((xRe,SB)=>{"use strict";var{EventEmitter:Lie}=require("events"),gB=_C(),yB=pa(),wC=class extends Lie{constructor(t,r,s){super(),t=yB.normalizeQueryConfig(t,r,s),this.text=t.text,this.values=t.values,this.rows=t.rows,this.types=t.types,this.name=t.name,this.queryMode=t.queryMode,this.binary=t.binary,this.portal=t.portal||"",this.callback=t.callback,this._rowMode=t.rowMode,process.domain&&t.callback&&(this.callback=process.domain.bind(t.callback)),this._result=new gB(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new gB(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(t){this._checkForMultirow(),this._result.addFields(t.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(t){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(t.fields)}catch(s){this._canceledDueToError=s;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(t,r){this._checkForMultirow(),this._result.addCommandComplete(t),this.rows&&r.sync()}handleEmptyQuery(t){this.rows&&t.sync()}handleError(t,r){if(this._canceledDueToError&&(t=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(t);this.emit("error",t)}handleReadyForQuery(t){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,t);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(t){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=t.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){t.stream.cork&&t.stream.cork();try{this.prepare(t)}finally{t.stream.uncork&&t.stream.uncork()}}else t.query(this.text);return null}hasBeenParsed(t){return this.name&&t.parsedStatements[this.name]}handlePortalSuspended(t){this._getRows(t,this.rows)}_getRows(t,r){t.execute({portal:this.portal,rows:r}),r?t.flush():t.sync()}prepare(t){this.hasBeenParsed(t)||t.parse({text:this.text,name:this.name,types:this.types});try{t.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:yB.prepareValue})}catch(r){this.handleError(r,t);return}t.describe({type:"P",name:this.portal||""}),this._getRows(t,this.rows)}handleCopyInResponse(t){t.sendCopyFail("No source stream defined")}handleCopyData(t,r){}};SB.exports=wC});var LC=w(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.NoticeMessage=X.DataRowMessage=X.CommandCompleteMessage=X.ReadyForQueryMessage=X.NotificationResponseMessage=X.BackendKeyDataMessage=X.AuthenticationMD5Password=X.ParameterStatusMessage=X.ParameterDescriptionMessage=X.RowDescriptionMessage=X.Field=X.CopyResponse=X.CopyDataMessage=X.DatabaseError=X.copyDone=X.emptyQuery=X.replicationStart=X.portalSuspended=X.noData=X.closeComplete=X.bindComplete=X.parseComplete=void 0;X.parseComplete={name:"parseComplete",length:5};X.bindComplete={name:"bindComplete",length:5};X.closeComplete={name:"closeComplete",length:5};X.noData={name:"noData",length:5};X.portalSuspended={name:"portalSuspended",length:5};X.replicationStart={name:"replicationStart",length:4};X.emptyQuery={name:"emptyQuery",length:4};X.copyDone={name:"copyDone",length:4};var bC=class extends Error{constructor(t,r,s){super(t),this.length=r,this.name=s}};X.DatabaseError=bC;var CC=class{constructor(t,r){this.length=t,this.chunk=r,this.name="copyData"}};X.CopyDataMessage=CC;var RC=class{constructor(t,r,s,n){this.length=t,this.name=r,this.binary=s,this.columnTypes=new Array(n)}};X.CopyResponse=RC;var vC=class{constructor(t,r,s,n,o,i,a){this.name=t,this.tableID=r,this.columnID=s,this.dataTypeID=n,this.dataTypeSize=o,this.dataTypeModifier=i,this.format=a}};X.Field=vC;var xC=class{constructor(t,r){this.length=t,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};X.RowDescriptionMessage=xC;var AC=class{constructor(t,r){this.length=t,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};X.ParameterDescriptionMessage=AC;var TC=class{constructor(t,r,s){this.length=t,this.parameterName=r,this.parameterValue=s,this.name="parameterStatus"}};X.ParameterStatusMessage=TC;var PC=class{constructor(t,r){this.length=t,this.salt=r,this.name="authenticationMD5Password"}};X.AuthenticationMD5Password=PC;var IC=class{constructor(t,r,s){this.length=t,this.processID=r,this.secretKey=s,this.name="backendKeyData"}};X.BackendKeyDataMessage=IC;var NC=class{constructor(t,r,s,n){this.length=t,this.processId=r,this.channel=s,this.payload=n,this.name="notification"}};X.NotificationResponseMessage=NC;var OC=class{constructor(t,r){this.length=t,this.status=r,this.name="readyForQuery"}};X.ReadyForQueryMessage=OC;var DC=class{constructor(t,r){this.length=t,this.text=r,this.name="commandComplete"}};X.CommandCompleteMessage=DC;var kC=class{constructor(t,r){this.length=t,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};X.DataRowMessage=kC;var MC=class{constructor(t,r){this.length=t,this.message=r,this.name="notice"}};X.NoticeMessage=MC});var _B=w(Jh=>{"use strict";Object.defineProperty(Jh,"__esModule",{value:!0});Jh.Writer=void 0;var qC=class{constructor(t=256){this.size=t,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(t)}ensure(t){if(this.buffer.length-this.offset<t){let s=this.buffer,n=s.length+(s.length>>1)+t;this.buffer=Buffer.allocUnsafe(n),s.copy(this.buffer)}}addInt32(t){return this.ensure(4),this.buffer[this.offset++]=t>>>24&255,this.buffer[this.offset++]=t>>>16&255,this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addInt16(t){return this.ensure(2),this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addCString(t){if(!t)this.ensure(1);else{let r=Buffer.byteLength(t);this.ensure(r+1),this.buffer.write(t,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(t=""){let r=Buffer.byteLength(t);return this.ensure(r),this.buffer.write(t,this.offset),this.offset+=r,this}add(t){return this.ensure(t.length),t.copy(this.buffer,this.offset),this.offset+=t.length,this}join(t){if(t){this.buffer[this.headerPosition]=t;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(t?0:5,this.offset)}flush(t){let r=this.join(t);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Jh.Writer=qC});var bB=w(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.serialize=void 0;var FC=_B(),De=new FC.Writer,qie=e=>{De.addInt16(3).addInt16(0);for(let s of Object.keys(e))De.addCString(s).addCString(e[s]);De.addCString("client_encoding").addCString("UTF8");let t=De.addCString("").flush(),r=t.length+4;return new FC.Writer().addInt32(r).add(t).flush()},Fie=()=>{let e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},$ie=e=>De.addCString(e).flush(112),Uie=function(e,t){return De.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),De.flush(112)},Bie=function(e){return De.addString(e).flush(112)},Hie=e=>De.addCString(e).flush(81),wB=[],jie=e=>{let t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));let r=e.types||wB,s=r.length,n=De.addCString(t).addCString(e.text).addInt16(s);for(let o=0;o<s;o++)n.addInt32(r[o]);return De.flush(80)},ya=new FC.Writer,zie=function(e,t){for(let r=0;r<e.length;r++){let s=t?t(e[r],r):e[r];s==null?(De.addInt16(0),ya.addInt32(-1)):s instanceof Buffer?(De.addInt16(1),ya.addInt32(s.length),ya.add(s)):(De.addInt16(0),ya.addInt32(Buffer.byteLength(s)),ya.addString(s))}},Vie=(e={})=>{let t=e.portal||"",r=e.statement||"",s=e.binary||!1,n=e.values||wB,o=n.length;return De.addCString(t).addCString(r),De.addInt16(o),zie(n,e.valueMapper),De.addInt16(o),De.add(ya.flush()),De.addInt16(1),De.addInt16(s?1:0),De.flush(66)},Gie=Buffer.from([69,0,0,0,9,0,0,0,0,0]),Wie=e=>{if(!e||!e.portal&&!e.rows)return Gie;let t=e.portal||"",r=e.rows||0,s=Buffer.byteLength(t),n=4+s+1+4,o=Buffer.allocUnsafe(1+n);return o[0]=69,o.writeInt32BE(n,1),o.write(t,5,"utf-8"),o[s+5]=0,o.writeUInt32BE(r,o.length-4),o},Qie=(e,t)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r},$C=(e,t)=>{let s=4+Buffer.byteLength(t)+1,n=Buffer.allocUnsafe(1+s);return n[0]=e,n.writeInt32BE(s,1),n.write(t,5,"utf-8"),n[s]=0,n},Kie=De.addCString("P").flush(68),Yie=De.addCString("S").flush(68),Jie=e=>e.name?$C(68,`${e.type}${e.name||""}`):e.type==="P"?Kie:Yie,Xie=e=>{let t=`${e.type}${e.name||""}`;return $C(67,t)},Zie=e=>De.add(e).flush(100),eae=e=>$C(102,e),Xh=e=>Buffer.from([e,0,0,0,4]),tae=Xh(72),rae=Xh(83),sae=Xh(88),nae=Xh(99),oae={startup:qie,password:$ie,requestSsl:Fie,sendSASLInitialResponseMessage:Uie,sendSCRAMClientFinalMessage:Bie,query:Hie,parse:jie,bind:Vie,execute:Wie,describe:Jie,close:Xie,flush:()=>tae,sync:()=>rae,end:()=>sae,copyData:Zie,copyDone:()=>nae,copyFail:eae,cancel:Qie};Zh.serialize=oae});var CB=w(eg=>{"use strict";Object.defineProperty(eg,"__esModule",{value:!0});eg.BufferReader=void 0;var iae=Buffer.allocUnsafe(0),UC=class{constructor(t=0){this.offset=t,this.buffer=iae,this.encoding="utf-8"}setBuffer(t,r){this.offset=t,this.buffer=r}int16(){let t=this.buffer.readInt16BE(this.offset);return this.offset+=2,t}byte(){let t=this.buffer[this.offset];return this.offset++,t}int32(){let t=this.buffer.readInt32BE(this.offset);return this.offset+=4,t}uint32(){let t=this.buffer.readUInt32BE(this.offset);return this.offset+=4,t}string(t){let r=this.buffer.toString(this.encoding,this.offset,this.offset+t);return this.offset+=t,r}cstring(){let t=this.offset,r=t;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,t,r-1)}bytes(t){let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}};eg.BufferReader=UC});var xB=w(tg=>{"use strict";Object.defineProperty(tg,"__esModule",{value:!0});tg.Parser=void 0;var je=LC(),aae=CB(),BC=1,cae=4,RB=BC+cae,vB=Buffer.allocUnsafe(0),HC=class{constructor(t){if(this.buffer=vB,this.bufferLength=0,this.bufferOffset=0,this.reader=new aae.BufferReader,t?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=t?.mode||"text"}parse(t,r){this.mergeBuffer(t);let s=this.bufferOffset+this.bufferLength,n=this.bufferOffset;for(;n+RB<=s;){let o=this.buffer[n],i=this.buffer.readUInt32BE(n+BC),a=BC+i;if(a+n<=s){let c=this.handlePacket(n+RB,o,i,this.buffer);r(c),n+=a}else break}n===s?(this.buffer=vB,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=s-n,this.bufferOffset=n)}mergeBuffer(t){if(this.bufferLength>0){let r=this.bufferLength+t.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let n;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)n=this.buffer;else{let o=this.buffer.byteLength*2;for(;r>=o;)o*=2;n=Buffer.allocUnsafe(o)}this.buffer.copy(n,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=n,this.bufferOffset=0}t.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=t,this.bufferOffset=0,this.bufferLength=t.byteLength}handlePacket(t,r,s,n){switch(r){case 50:return je.bindComplete;case 49:return je.parseComplete;case 51:return je.closeComplete;case 110:return je.noData;case 115:return je.portalSuspended;case 99:return je.copyDone;case 87:return je.replicationStart;case 73:return je.emptyQuery;case 68:return this.parseDataRowMessage(t,s,n);case 67:return this.parseCommandCompleteMessage(t,s,n);case 90:return this.parseReadyForQueryMessage(t,s,n);case 65:return this.parseNotificationMessage(t,s,n);case 82:return this.parseAuthenticationResponse(t,s,n);case 83:return this.parseParameterStatusMessage(t,s,n);case 75:return this.parseBackendKeyData(t,s,n);case 69:return this.parseErrorMessage(t,s,n,"error");case 78:return this.parseErrorMessage(t,s,n,"notice");case 84:return this.parseRowDescriptionMessage(t,s,n);case 116:return this.parseParameterDescriptionMessage(t,s,n);case 71:return this.parseCopyInMessage(t,s,n);case 72:return this.parseCopyOutMessage(t,s,n);case 100:return this.parseCopyData(t,s,n);default:return new je.DatabaseError("received invalid response: "+r.toString(16),s,"error")}}parseReadyForQueryMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.string(1);return new je.ReadyForQueryMessage(r,n)}parseCommandCompleteMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.cstring();return new je.CommandCompleteMessage(r,n)}parseCopyData(t,r,s){let n=s.slice(t,t+(r-4));return new je.CopyDataMessage(r,n)}parseCopyInMessage(t,r,s){return this.parseCopyMessage(t,r,s,"copyInResponse")}parseCopyOutMessage(t,r,s){return this.parseCopyMessage(t,r,s,"copyOutResponse")}parseCopyMessage(t,r,s,n){this.reader.setBuffer(t,s);let o=this.reader.byte()!==0,i=this.reader.int16(),a=new je.CopyResponse(r,n,o,i);for(let c=0;c<i;c++)a.columnTypes[c]=this.reader.int16();return a}parseNotificationMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int32(),o=this.reader.cstring(),i=this.reader.cstring();return new je.NotificationResponseMessage(r,n,o,i)}parseRowDescriptionMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int16(),o=new je.RowDescriptionMessage(r,n);for(let i=0;i<n;i++)o.fields[i]=this.parseField();return o}parseField(){let t=this.reader.cstring(),r=this.reader.uint32(),s=this.reader.int16(),n=this.reader.uint32(),o=this.reader.int16(),i=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new je.Field(t,r,s,n,o,i,a)}parseParameterDescriptionMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int16(),o=new je.ParameterDescriptionMessage(r,n);for(let i=0;i<n;i++)o.dataTypeIDs[i]=this.reader.int32();return o}parseDataRowMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int16(),o=new Array(n);for(let i=0;i<n;i++){let a=this.reader.int32();o[i]=a===-1?null:this.reader.string(a)}return new je.DataRowMessage(r,o)}parseParameterStatusMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.cstring(),o=this.reader.cstring();return new je.ParameterStatusMessage(r,n,o)}parseBackendKeyData(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int32(),o=this.reader.int32();return new je.BackendKeyDataMessage(r,n,o)}parseAuthenticationResponse(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int32(),o={name:"authenticationOk",length:r};switch(n){case 0:break;case 3:o.length===8&&(o.name="authenticationCleartextPassword");break;case 5:if(o.length===12){o.name="authenticationMD5Password";let i=this.reader.bytes(4);return new je.AuthenticationMD5Password(r,i)}break;case 10:{o.name="authenticationSASL",o.mechanisms=[];let i;do i=this.reader.cstring(),i&&o.mechanisms.push(i);while(i)}break;case 11:o.name="authenticationSASLContinue",o.data=this.reader.string(r-8);break;case 12:o.name="authenticationSASLFinal",o.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+n)}return o}parseErrorMessage(t,r,s,n){this.reader.setBuffer(t,s);let o={},i=this.reader.string(1);for(;i!=="\0";)o[i]=this.reader.cstring(),i=this.reader.string(1);let a=o.M,c=n==="notice"?new je.NoticeMessage(r,a):new je.DatabaseError(a,r,n);return c.severity=o.S,c.code=o.C,c.detail=o.D,c.hint=o.H,c.position=o.P,c.internalPosition=o.p,c.internalQuery=o.q,c.where=o.W,c.schema=o.s,c.table=o.t,c.column=o.c,c.dataType=o.d,c.constraint=o.n,c.file=o.F,c.line=o.L,c.routine=o.R,c}};tg.Parser=HC});var jC=w(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.DatabaseError=Gn.serialize=Gn.parse=void 0;var dae=LC();Object.defineProperty(Gn,"DatabaseError",{enumerable:!0,get:function(){return dae.DatabaseError}});var lae=bB();Object.defineProperty(Gn,"serialize",{enumerable:!0,get:function(){return lae.serialize}});var uae=xB();function fae(e,t){let r=new uae.Parser;return e.on("data",s=>r.parse(s,t)),new Promise(s=>e.on("end",()=>s()))}Gn.parse=fae});var AB=w(zC=>{"use strict";Object.defineProperty(zC,"__esModule",{value:!0});zC.default={}});var PB=w((kRe,TB)=>{var{getStream:pae,getSecureStream:mae}=Sae();TB.exports={getStream:pae,getSecureStream:mae};function hae(){function e(r){let s=require("net");return new s.Socket}function t(r){return require("tls").connect(r)}return{getStream:e,getSecureStream:t}}function gae(){function e(r){let{CloudflareSocket:s}=AB();return new s(r)}function t(r){return r.socket.startTls(r),r.socket}return{getStream:e,getSecureStream:t}}function yae(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let e=new Response(null,{cf:{thing:!0}});if(typeof e.cf=="object"&&e.cf!==null&&e.cf.thing)return!0}return!1}function Sae(){return yae()?gae():hae()}});var GC=w((MRe,IB)=>{"use strict";var Eae=require("events").EventEmitter,{parse:_ae,serialize:lt}=jC(),{getStream:wae,getSecureStream:bae}=PB(),Cae=lt.flush(),Rae=lt.sync(),vae=lt.end(),VC=class extends Eae{constructor(t){super(),t=t||{},this.stream=t.stream||wae(t.ssl),typeof this.stream=="function"&&(this.stream=this.stream(t)),this._keepAlive=t.keepAlive,this._keepAliveInitialDelayMillis=t.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=t.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(s){s==="message"&&(r._emitMessage=!0)})}connect(t,r){let s=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(t,r),this.stream.once("connect",function(){s._keepAlive&&s.stream.setKeepAlive(!0,s._keepAliveInitialDelayMillis),s.emit("connect")});let n=function(o){s._ending&&(o.code==="ECONNRESET"||o.code==="EPIPE")||s.emit("error",o)};if(this.stream.on("error",n),this.stream.on("close",function(){s.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(o){switch(o.toString("utf8")){case"S":break;case"N":return s.stream.end(),s.emit("error",new Error("The server does not support SSL connections"));default:return s.stream.end(),s.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:s.stream};s.ssl!==!0&&(Object.assign(a,s.ssl),"key"in s.ssl&&(a.key=s.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{s.stream=bae(a)}catch(d){return s.emit("error",d)}s.attachListeners(s.stream),s.stream.on("error",n),s.emit("sslconnect")})}attachListeners(t){_ae(t,r=>{let s=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(s,r)})}requestSsl(){this.stream.write(lt.requestSsl())}startup(t){this.stream.write(lt.startup(t))}cancel(t,r){this._send(lt.cancel(t,r))}password(t){this._send(lt.password(t))}sendSASLInitialResponseMessage(t,r){this._send(lt.sendSASLInitialResponseMessage(t,r))}sendSCRAMClientFinalMessage(t){this._send(lt.sendSCRAMClientFinalMessage(t))}_send(t){return this.stream.writable?this.stream.write(t):!1}query(t){this._send(lt.query(t))}parse(t){this._send(lt.parse(t))}bind(t){this._send(lt.bind(t))}execute(t){this._send(lt.execute(t))}flush(){this.stream.writable&&this.stream.write(Cae)}sync(){this._ending=!0,this._send(Rae)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(vae,()=>{this.stream.end()})}close(t){this._send(lt.close(t))}describe(t){this._send(lt.describe(t))}sendCopyFromChunk(t){this._send(lt.copyData(t))}endCopyFrom(){this._send(lt.copyDone())}sendCopyFail(t){this._send(lt.copyFail(t))}};IB.exports=VC});var kB=w((LRe,DB)=>{"use strict";var{Transform:xae}=require("stream"),{StringDecoder:Aae}=require("string_decoder"),Wn=Symbol("last"),rg=Symbol("decoder");function Tae(e,t,r){let s;if(this.overflow){if(s=this[rg].write(e).split(this.matcher),s.length===1)return r();s.shift(),this.overflow=!1}else this[Wn]+=this[rg].write(e),s=this[Wn].split(this.matcher);this[Wn]=s.pop();for(let n=0;n<s.length;n++)try{OB(this,this.mapper(s[n]))}catch(o){return r(o)}if(this.overflow=this[Wn].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function Pae(e){if(this[Wn]+=this[rg].end(),this[Wn])try{OB(this,this.mapper(this[Wn]))}catch(t){return e(t)}e()}function OB(e,t){t!==void 0&&e.push(t)}function NB(e){return e}function Iae(e,t,r){switch(e=e||/\r?\n/,t=t||NB,r=r||{},arguments.length){case 1:typeof e=="function"?(t=e,e=/\r?\n/):typeof e=="object"&&!(e instanceof RegExp)&&!e[Symbol.split]&&(r=e,e=/\r?\n/);break;case 2:typeof e=="function"?(r=t,t=e,e=/\r?\n/):typeof t=="object"&&(r=t,t=NB)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=Tae,r.flush=Pae,r.readableObjectMode=!0;let s=new xae(r);return s[Wn]="",s[rg]=new Aae("utf8"),s.matcher=e,s.mapper=t,s.maxLength=r.maxLength,s.skipOverflow=r.skipOverflow||!1,s.overflow=!1,s._destroy=function(n,o){this._writableState.errorEmitted=!1,o(n)},s}DB.exports=Iae});var qB=w((qRe,Hs)=>{"use strict";var MB=require("path"),Nae=require("stream").Stream,Oae=kB(),LB=require("util"),Dae=5432,sg=process.platform==="win32",tl=process.stderr,kae=56,Mae=7,Lae=61440,qae=32768;function Fae(e){return(e&Lae)==qae}var Sa=["host","port","database","user","password"],WC=Sa.length,$ae=Sa[WC-1];function QC(){var e=tl instanceof Nae&&tl.writable===!0;if(e){var t=Array.prototype.slice.call(arguments).concat(`
`);tl.write(LB.format.apply(LB,t))}}Object.defineProperty(Hs.exports,"isWin",{get:function(){return sg},set:function(e){sg=e}});Hs.exports.warnTo=function(e){var t=tl;return tl=e,t};Hs.exports.getFileName=function(e){var t=e||process.env,r=t.PGPASSFILE||(sg?MB.join(t.APPDATA||"./","postgresql","pgpass.conf"):MB.join(t.HOME||"./",".pgpass"));return r};Hs.exports.usePgPass=function(e,t){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:sg?!0:(t=t||"<unkn>",Fae(e.mode)?e.mode&(kae|Mae)?(QC('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):!0:(QC('WARNING: password file "%s" is not a plain file',t),!1))};var Uae=Hs.exports.match=function(e,t){return Sa.slice(0,-1).reduce(function(r,s,n){return n==1&&Number(e[s]||Dae)===Number(t[s])?r&&!0:r&&(t[s]==="*"||t[s]===e[s])},!0)};Hs.exports.getPassword=function(e,t,r){var s,n=t.pipe(Oae());function o(c){var d=Bae(c);d&&Hae(d)&&Uae(e,d)&&(s=d[$ae],n.end())}var i=function(){t.destroy(),r(s)},a=function(c){t.destroy(),QC("WARNING: error on reading file: %s",c),r(void 0)};t.on("error",a),n.on("data",o).on("end",i).on("error",a)};var Bae=Hs.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",s=0,n=0,o=0,i={},a=!1,c=function(l,u,h){var m=e.substring(u,h);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(m=m.replace(/\\([:\\])/g,"$1")),i[Sa[l]]=m},d=0;d<e.length-1;d+=1){if(t=e.charAt(d+1),r=e.charAt(d),a=s==WC-1,a){c(s,n);break}d>=0&&t==":"&&r!=="\\"&&(c(s,n,d+1),n=d+2,s+=1)}return i=Object.keys(i).length===WC?i:null,i},Hae=Hs.exports.isValidEntry=function(e){for(var t={0:function(i){return i.length>0},1:function(i){return i==="*"?!0:(i=Number(i),isFinite(i)&&i>0&&i<9007199254740992&&Math.floor(i)===i)},2:function(i){return i.length>0},3:function(i){return i.length>0},4:function(i){return i.length>0}},r=0;r<Sa.length;r+=1){var s=t[r],n=e[Sa[r]]||"",o=s(n);if(!o)return!1}return!0}});var $B=w(($Re,KC)=>{"use strict";var FRe=require("path"),FB=require("fs"),ng=qB();KC.exports=function(e,t){var r=ng.getFileName();FB.stat(r,function(s,n){if(s||!ng.usePgPass(n,r))return t(void 0);var o=FB.createReadStream(r);ng.getPassword(e,o,t)})};KC.exports.warnTo=ng.warnTo});var jB=w((URe,HB)=>{"use strict";var jae=require("events").EventEmitter,UB=pa(),YC=iB(),zae=Yh(),Vae=SC(),BB=EB(),Gae=Zd(),Wae=GC(),Qae=hC(),og=class extends jae{constructor(t){super(),this.connectionParameters=new Vae(t),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=t||{};this._Promise=r.Promise||global.Promise,this._types=new zae(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new Wae({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||Gae.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(t){let r=s=>{process.nextTick(()=>{s.handleError(t,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(t){let r=this,s=this.connection;if(this._connectionCallback=t,this._connecting||this._connected){let n=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{t(n)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{s._ending=!0,s.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?s.connect(this.host+"/.s.PGSQL."+this.port):s.connect(this.port,this.host),s.on("connect",function(){r.ssl?s.requestSsl():s.startup(r.getStartupConf())}),s.on("sslconnect",function(){s.startup(r.getStartupConf())}),this._attachListeners(s),s.once("end",()=>{let n=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(n),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(n):this._handleErrorEvent(n):this._connectionError||this._handleErrorEvent(n)),process.nextTick(()=>{this.emit("end")})})}connect(t){if(t){this._connect(t);return}return new this._Promise((r,s)=>{this._connect(n=>{n?s(n):r()})})}_attachListeners(t){t.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),t.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),t.on("authenticationSASL",this._handleAuthSASL.bind(this)),t.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),t.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),t.on("backendKeyData",this._handleBackendKeyData.bind(this)),t.on("error",this._handleErrorEvent.bind(this)),t.on("errorMessage",this._handleErrorMessage.bind(this)),t.on("readyForQuery",this._handleReadyForQuery.bind(this)),t.on("notice",this._handleNotice.bind(this)),t.on("rowDescription",this._handleRowDescription.bind(this)),t.on("dataRow",this._handleDataRow.bind(this)),t.on("portalSuspended",this._handlePortalSuspended.bind(this)),t.on("emptyQuery",this._handleEmptyQuery.bind(this)),t.on("commandComplete",this._handleCommandComplete.bind(this)),t.on("parseComplete",this._handleParseComplete.bind(this)),t.on("copyInResponse",this._handleCopyInResponse.bind(this)),t.on("copyData",this._handleCopyData.bind(this)),t.on("notification",this._handleNotification.bind(this))}_checkPgPass(t){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(s=>{if(s!==void 0){if(typeof s!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=s}else this.connectionParameters.password=this.password=null;t()}).catch(s=>{r.emit("error",s)});else if(this.password!==null)t();else try{$B()(this.connectionParameters,n=>{n!==void 0&&(this.connectionParameters.password=this.password=n),t()})}catch(s){this.emit("error",s)}}_handleAuthCleartextPassword(t){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(t){this._checkPgPass(async()=>{try{let r=await Qae.postgresMd5PasswordHash(this.user,this.password,t.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(t){this._checkPgPass(()=>{try{this.saslSession=YC.startSession(t.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(t){try{await YC.continueSession(this.saslSession,this.password,t.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(t){try{YC.finalizeSession(this.saslSession,t.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(t){this.processID=t.processID,this.secretKey=t.secretKey}_handleReadyForQuery(t){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(t){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(t);this.emit("error",t)}}_handleErrorEvent(t){if(this._connecting)return this._handleErrorWhileConnecting(t);this._queryable=!1,this._errorAllQueries(t),this.emit("error",t)}_handleErrorMessage(t){if(this._connecting)return this._handleErrorWhileConnecting(t);let r=this.activeQuery;if(!r){this._handleErrorEvent(t);return}this.activeQuery=null,r.handleError(t,this.connection)}_handleRowDescription(t){this.activeQuery.handleRowDescription(t)}_handleDataRow(t){this.activeQuery.handleDataRow(t)}_handlePortalSuspended(t){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(t){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(t){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(t,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let t=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(t);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(t){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(t){this.activeQuery.handleCopyData(t,this.connection)}_handleNotification(t){this.emit("notification",t)}_handleNotice(t){this.emit("notice",t)}getStartupConf(){let t=this.connectionParameters,r={user:t.user,database:t.database},s=t.application_name||t.fallback_application_name;return s&&(r.application_name=s),t.replication&&(r.replication=""+t.replication),t.statement_timeout&&(r.statement_timeout=String(parseInt(t.statement_timeout,10))),t.lock_timeout&&(r.lock_timeout=String(parseInt(t.lock_timeout,10))),t.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(t.idle_in_transaction_session_timeout,10))),t.options&&(r.options=t.options),r}cancel(t,r){if(t.activeQuery===r){let s=this.connection;this.host&&this.host.indexOf("/")===0?s.connect(this.host+"/.s.PGSQL."+this.port):s.connect(this.port,this.host),s.on("connect",function(){s.cancel(t.processID,t.secretKey)})}else t.queryQueue.indexOf(r)!==-1&&t.queryQueue.splice(t.queryQueue.indexOf(r),1)}setTypeParser(t,r,s){return this._types.setTypeParser(t,r,s)}getTypeParser(t,r){return this._types.getTypeParser(t,r)}escapeIdentifier(t){return UB.escapeIdentifier(t)}escapeLiteral(t){return UB.escapeLiteral(t)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let t=this.activeQuery.submit(this.connection);t&&process.nextTick(()=>{this.activeQuery.handleError(t,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(t,r,s){let n,o,i,a,c;if(t==null)throw new TypeError("Client was passed a null or undefined query");return typeof t.submit=="function"?(i=t.query_timeout||this.connectionParameters.query_timeout,o=n=t,typeof r=="function"&&(n.callback=n.callback||r)):(i=t.query_timeout||this.connectionParameters.query_timeout,n=new BB(t,r,s),n.callback||(o=new this._Promise((d,l)=>{n.callback=(u,h)=>u?l(u):d(h)}).catch(d=>{throw Error.captureStackTrace(d),d}))),i&&(c=n.callback,a=setTimeout(()=>{let d=new Error("Query read timeout");process.nextTick(()=>{n.handleError(d,this.connection)}),c(d),n.callback=()=>{};let l=this.queryQueue.indexOf(n);l>-1&&this.queryQueue.splice(l,1),this._pulseQueryQueue()},i),n.callback=(d,l)=>{clearTimeout(a),c(d,l)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),o):(this.queryQueue.push(n),this._pulseQueryQueue(),o):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),o)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(t){if(this._ending=!0,!this.connection._connecting||this._ended)if(t)t();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),t)this.connection.once("end",t);else return new this._Promise(r=>{this.connection.once("end",r)})}};og.Query=BB;HB.exports=og});var WB=w((BRe,GB)=>{"use strict";var Kae=require("events").EventEmitter,zB=function(){},VB=(e,t)=>{let r=e.findIndex(t);return r===-1?void 0:e.splice(r,1)[0]},JC=class{constructor(t,r,s){this.client=t,this.idleListener=r,this.timeoutId=s}},Ea=class{constructor(t){this.callback=t}};function Yae(){throw new Error("Release called on client which has already been released to the pool.")}function ig(e,t){if(t)return{callback:t,result:void 0};let r,s,n=function(i,a){i?r(i):s(a)},o=new e(function(i,a){s=i,r=a}).catch(i=>{throw Error.captureStackTrace(i),i});return{callback:n,result:o}}function Jae(e,t){return function r(s){s.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",s)}),e._remove(t),e.emit("error",s,t)}}var XC=class extends Kae{constructor(t,r){super(),this.options=Object.assign({},t),t!=null&&"password"in t&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),t!=null&&t.ssl&&t.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||ZC().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let t=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let s=r.client;s.ref&&s.ref();let n=r.idleListener;return this._acquireClient(s,t,n,!1)}if(!this._isFull())return this.newClient(t);throw new Error("unexpected condition")}_remove(t,r){let s=VB(this._idle,o=>o.client===t);s!==void 0&&clearTimeout(s.timeoutId),this._clients=this._clients.filter(o=>o!==t);let n=this;t.end(()=>{n.emit("remove",t),typeof r=="function"&&r()})}connect(t){if(this.ending){let n=new Error("Cannot use a pool after calling end on the pool");return t?t(n):this.Promise.reject(n)}let r=ig(this.Promise,t),s=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Ea(r.callback)),s;let n=(a,c,d)=>{clearTimeout(i),r.callback(a,c,d)},o=new Ea(n),i=setTimeout(()=>{VB(this._pendingQueue,a=>a.callback===n),o.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return i.unref&&i.unref(),this._pendingQueue.push(o),s}return this.newClient(new Ea(r.callback)),s}newClient(t){let r=new this.Client(this.options);this._clients.push(r);let s=Jae(this,r);this.log("checking client timeout");let n,o=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),o=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(i=>{if(n&&clearTimeout(n),r.on("error",s),i)this.log("client failed to connect",i),this._clients=this._clients.filter(a=>a!==r),o&&(i=new Error("Connection terminated due to connection timeout",{cause:i})),this._pulseQueue(),t.timedOut||t.callback(i,void 0,zB);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(d=>d.client===r)!==-1&&this._acquireClient(r,new Ea((d,l,u)=>u()),s,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,t,s,!0)}})}_acquireClient(t,r,s,n){n&&this.emit("connect",t),this.emit("acquire",t),t.release=this._releaseOnce(t,s),t.removeListener("error",s),r.timedOut?n&&this.options.verify?this.options.verify(t,t.release):t.release():n&&this.options.verify?this.options.verify(t,o=>{if(o)return t.release(o),r.callback(o,void 0,zB);r.callback(void 0,t,t.release)}):r.callback(void 0,t,t.release)}_releaseOnce(t,r){let s=!1;return n=>{s&&Yae(),s=!0,this._release(t,r,n)}}_release(t,r,s){if(t.on("error",r),t._poolUseCount=(t._poolUseCount||0)+1,this.emit("release",s,t),s||this.ending||!t._queryable||t._ending||t._poolUseCount>=this.options.maxUses)return t._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(t,this._pulseQueue.bind(this));if(this._expired.has(t))return this.log("remove expired client"),this._expired.delete(t),this._remove(t,this._pulseQueue.bind(this));let o;this.options.idleTimeoutMillis&&this._isAboveMin()&&(o=setTimeout(()=>{this.log("remove idle client"),this._remove(t,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&o.unref()),this.options.allowExitOnIdle&&t.unref(),this._idle.push(new JC(t,r,o)),this._pulseQueue()}query(t,r,s){if(typeof t=="function"){let o=ig(this.Promise,t);return setImmediate(function(){return o.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),o.result}typeof r=="function"&&(s=r,r=void 0);let n=ig(this.Promise,s);return s=n.callback,this.connect((o,i)=>{if(o)return s(o);let a=!1,c=d=>{a||(a=!0,i.release(d),s(d))};i.once("error",c),this.log("dispatching query");try{i.query(t,r,(d,l)=>{if(this.log("query dispatched"),i.removeListener("error",c),!a)return a=!0,i.release(d),d?s(d):s(void 0,l)})}catch(d){return i.release(d),s(d)}}),n.result}end(t){if(this.log("ending"),this.ending){let s=new Error("Called end on pool more than once");return t?t(s):this.Promise.reject(s)}this.ending=!0;let r=ig(this.Promise,t);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((t,r)=>t+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};GB.exports=XC});var YB=w((HRe,KB)=>{"use strict";var QB=require("events").EventEmitter,Xae=require("util"),eR=pa(),_a=KB.exports=function(e,t,r){QB.call(this),e=eR.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.queryMode=e.queryMode,this.callback=e.callback,this.state="new",this._arrayMode=e.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(s){s==="row"&&(this._emitRowEvents=!0)}.bind(this))};Xae.inherits(_a,QB);var Zae={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};_a.prototype.handleError=function(e){let t=this.native.pq.resultErrorFields();if(t)for(let r in t){let s=Zae[r]||r;e[s]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"};_a.prototype.then=function(e,t){return this._getPromise().then(e,t)};_a.prototype.catch=function(e){return this._getPromise().catch(e)};_a.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this)),this._promise)};_a.prototype.submit=function(e){this.state="running";let t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;let r=function(s,n,o){if(e.native.arrayMode=!1,setImmediate(function(){t.emit("_done")}),s)return t.handleError(s);t._emitRowEvents&&(o.length>1?n.forEach((i,a)=>{i.forEach(c=>{t.emit("row",c,o[a])})}):n.forEach(function(i){t.emit("row",i,o)})),t.state="end",t.emit("end",o),t.callback&&t.callback(null,o)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let s=(this.values||[]).map(eR.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let n=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(n)}return e.native.execute(this.name,s,r)}return e.native.prepare(this.name,this.text,s.length,function(n){return n?r(n):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,s,r))})}else if(this.values){if(!Array.isArray(this.values)){let n=new Error("Query values must be an array");return r(n)}let s=this.values.map(eR.prepareValue);e.native.query(this.text,s,r)}else this.queryMode==="extended"?e.native.query(this.text,[],r):e.native.query(this.text,r)}});var tH=w((jRe,eH)=>{"use strict";var JB;try{JB=require("pg-native")}catch(e){throw e}var ece=Yh(),XB=require("events").EventEmitter,tce=require("util"),rce=SC(),ZB=YB(),Qt=eH.exports=function(e){XB.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new ece(e.types),this.native=new JB({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let t=this.connectionParameters=new rce(e);e.nativeConnectionString&&(t.nativeConnectionString=e.nativeConnectionString),this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};Qt.Query=ZB;tce.inherits(Qt,XB);Qt.prototype._errorAllQueries=function(e){let t=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0};Qt.prototype._connect=function(e){let t=this;if(this._connecting){process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,s){if(t.connectionParameters.nativeConnectionString&&(s=t.connectionParameters.nativeConnectionString),r)return e(r);t.native.connect(s,function(n){if(n)return t.native.end(),e(n);t._connected=!0,t.native.on("error",function(o){t._queryable=!1,t._errorAllQueries(o),t.emit("error",o)}),t.native.on("notification",function(o){t.emit("notification",{channel:o.relname,payload:o.extra})}),t.emit("connect"),t._pulseQueryQueue(!0),e()})})};Qt.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((t,r)=>{this._connect(s=>{s?r(s):t()})})};Qt.prototype.query=function(e,t,r){let s,n,o,i,a;if(e==null)throw new TypeError("Client was passed a null or undefined query");if(typeof e.submit=="function")o=e.query_timeout||this.connectionParameters.query_timeout,n=s=e,typeof t=="function"&&(e.callback=t);else if(o=e.query_timeout||this.connectionParameters.query_timeout,s=new ZB(e,t,r),!s.callback){let c,d;n=new this._Promise((l,u)=>{c=l,d=u}).catch(l=>{throw Error.captureStackTrace(l),l}),s.callback=(l,u)=>l?d(l):c(u)}return o&&(a=s.callback,i=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{s.handleError(c,this.connection)}),a(c),s.callback=()=>{};let d=this._queryQueue.indexOf(s);d>-1&&this._queryQueue.splice(d,1),this._pulseQueryQueue()},o),s.callback=(c,d)=>{clearTimeout(i),a(c,d)}),this._queryable?this._ending?(s.native=this.native,process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"))}),n):(this._queryQueue.push(s),this._pulseQueryQueue(),n):(s.native=this.native,process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"))}),n)};Qt.prototype.end=function(e){let t=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e));let r;return e||(r=new this._Promise(function(s,n){e=o=>o?n(o):s()})),this.native.end(function(){t._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{t.emit("end"),e&&e()})}),r};Qt.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};Qt.prototype._pulseQueryQueue=function(e){if(!this._connected||this._hasActiveQuery())return;let t=this._queryQueue.shift();if(!t){e||this.emit("drain");return}this._activeQuery=t,t.submit(this);let r=this;t.once("_done",function(){r._pulseQueryQueue()})};Qt.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):this._queryQueue.indexOf(e)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)};Qt.prototype.ref=function(){};Qt.prototype.unref=function(){};Qt.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)};Qt.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}});var tR=w((zRe,rH)=>{"use strict";rH.exports=tH()});var ZC=w((GRe,rl)=>{"use strict";var sce=jB(),nce=Zd(),oce=GC(),ice=_C(),ace=pa(),cce=WB(),dce=Yh(),{DatabaseError:lce}=jC(),{escapeIdentifier:uce,escapeLiteral:fce}=pa(),pce=e=>class extends cce{constructor(r){super(r,e)}},rR=function(e){this.defaults=nce,this.Client=e,this.Query=this.Client.Query,this.Pool=pce(this.Client),this._pools=[],this.Connection=oce,this.types=Xd(),this.DatabaseError=lce,this.TypeOverrides=dce,this.escapeIdentifier=uce,this.escapeLiteral=fce,this.Result=ice,this.utils=ace};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?rl.exports=new rR(tR()):(rl.exports=new rR(sce),Object.defineProperty(rl.exports,"native",{configurable:!0,enumerable:!1,get(){let e=null;try{e=new rR(tR())}catch(t){if(t.code!=="MODULE_NOT_FOUND")throw t}return Object.defineProperty(rl.exports,"native",{value:e}),e}}))});var vce={};tt(vce,{handler:()=>Rce});module.exports=z(vce);var hg=y(C1());var ug=y(h2());var Pr=y(ZC(),1),WRe=Pr.default.Client,sH=Pr.default.Pool,QRe=Pr.default.Connection,KRe=Pr.default.types,YRe=Pr.default.Query,JRe=Pr.default.DatabaseError,XRe=Pr.default.escapeIdentifier,ZRe=Pr.default.escapeLiteral,eve=Pr.default.Result,tve=Pr.default.TypeOverrides,rve=Pr.default.defaults;var ag=(e,t,r,s)=>{let n={level:e,message:t,timestamp:new Date().toISOString(),...r};return JSON.stringify(s!==void 0?{...n,meta:s}:n)},cs={debug(e,t,r){console.debug(ag("debug",e,t,r))},info(e,t,r){console.info(ag("info",e,t,r))},warn(e,t,r){console.warn(ag("warn",e,t,r))},error(e,t,r){console.error(ag("error",e,t,r))}};var mce=process.env.AWS_REGION||process.env.COGNITO_REGION||"ap-southeast-2",hce=new ug.SecretsManagerClient({region:mce}),cg=null,dg=null,lg=null,gce=()=>{let e=process.env.DB_HOST,t=process.env.DB_USER,r=process.env.DB_PASS,s=process.env.DB_NAME;if(!e||!t||!r||!s)return null;let n=process.env.DB_SSL,o=n?n.toLowerCase()==="true":void 0;return{host:e,port:Number(process.env.DB_PORT||5432),username:t,password:r,dbname:s,ssl:o}},yce=e=>{if(!e)throw new Error("Database secret string is empty");let t=JSON.parse(e);if(!t.host||!t.username||!t.password||!t.dbname)throw new Error("Database secret is missing required properties");return{host:t.host,port:Number(t.port||5432),username:t.username,password:t.password,dbname:t.dbname,ssl:typeof t.ssl=="boolean"?t.ssl:void 0}},Sce=async()=>{if(lg&&lg.expiresAt>Date.now())return lg.value;let e=process.env.DB_SECRET_ARN;if(!e)throw new Error("DB_SECRET_ARN environment variable is not set");let t=new ug.GetSecretValueCommand({SecretId:e}),r=await hce.send(t),s=yce(r.SecretString);return lg={value:s,expiresAt:Date.now()+Number(process.env.DB_SECRET_CACHE_MS||6e4)},s},Ece=async()=>{let e=gce()??await Sce(),t=Number(process.env.DB_POOL_MAX||10),r=typeof e.ssl=="boolean"?e.ssl?{rejectUnauthorized:!1}:void 0:process.env.DB_SSL?.toLowerCase()==="true"?{rejectUnauthorized:!1}:void 0,s=new sH({host:e.host,port:e.port,user:e.username,password:e.password,database:e.dbname,max:t,idleTimeoutMillis:Number(process.env.DB_IDLE_TIMEOUT_MS||3e4),connectionTimeoutMillis:Number(process.env.DB_CONNECT_TIMEOUT_MS||5e3),ssl:r});return s.on("error",n=>{cs.error("Unexpected database error",void 0,{err:n})}),s},nH=async()=>(cg||(dg||(dg=Ece().then(e=>(cg=e,e)).finally(()=>{dg=null})),cg=await dg),cg),js=async(e,t)=>{let r=await nH();return typeof e=="string"?r.query(e,t):r.query(e)},sR=async e=>{let r=await(await nH()).connect();try{await r.query("BEGIN");let s=await e(r);return await r.query("COMMIT"),s}catch(s){throw await r.query("ROLLBACK"),s}finally{r.release()}};var Ir=class extends Error{code;statusCode;details;constructor(t,r,s=400,n){super(r),this.code=t,this.statusCode=s,this.details=n,Object.setPrototypeOf(this,new.target.prototype)}};var sl=class extends Ir{constructor(t="Validation failed",r){super("VALIDATION_ERROR",t,422,r)}};var oH=Number(process.env.MAX_PAGE_SIZE||100),iH=e=>{let t=e.page?Number(e.page):1,r=e.size?Number(e.size):25,s=e.sort??"created_at,desc";if(!Number.isFinite(t)||t<1)throw new sl("`page` must be a positive integer");if(!Number.isFinite(r)||r<1||r>oH)throw new sl(`\`size\` must be between 1 and ${oH}`);return{page:t,size:r,sort:s}},aH=(e,t,r)=>({items:e,page:t.page??1,size:t.size??e.length,total:r}),cH=(e,t,r="created_at,desc")=>{let s=e??r,[n,o]=s.split(","),i=t.includes(n)?n:t[0],a=o?.toUpperCase()==="ASC"?"ASC":"DESC";return{field:i,direction:a}};var _ce=["created_at","updated_at","start_date","end_date","status"],wce=e=>({balanceId:e.balance_id,policyId:e.policy_id,policyName:e.policy_name,balanceDays:Number(e.balance_days),year:e.year}),fg=e=>({requestId:e.request_id,userId:e.user_id,userEmail:e.user_email,userName:e.user_name,userTeamId:e.user_team_id,policyId:e.policy_id,policyName:e.policy_name,status:e.status,startDate:e.start_date,endDate:e.end_date,halfDay:e.half_day,reason:e.reason,graphEventId:e.graph_event_id,createdAt:e.created_at,updatedAt:e.updated_at,daysRequested:Number(e.days_requested)}),pg=class{async getLeaveBalances(t,r){return(await js(`
      SELECT
        lb.balance_id,
        lb.policy_id,
        lp.name AS policy_name,
        lb.balance_days,
        lb.year
      FROM leave_balances lb
      INNER JOIN leave_policies lp ON lb.policy_id = lp.policy_id
      WHERE lb.user_id = $1 AND lb.year = $2
      ORDER BY lp.name ASC
      `,[t,r])).rows.map(wce)}async getLeavePolicies(){return(await js("SELECT policy_id, name, annual_limit FROM leave_policies WHERE is_active = true ORDER BY name")).rows}async initializeLeaveBalance(t,r,s,n){await js(`
      INSERT INTO leave_balances (user_id, policy_id, balance_days, year)
      VALUES ($1, $2, $3, $4)
      ON CONFLICT (user_id, policy_id, year)
      DO NOTHING
      `,[t,r,s,n])}async getLeaveRequests(t){let r=iH({page:t.page?.toString(),size:t.size?.toString(),sort:t.sort}),{field:s,direction:n}=cH(r.sort,_ce),o=(r.page-1)*r.size,i=[],a=1,c=`
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE 1=1
    `;t.userId!==void 0&&t.userId!==null&&(c+=` AND lr.user_id = $${a++}`,i.push(t.userId)),t.status&&(c+=` AND lr.status = $${a++}`,i.push(t.status)),t.startDate&&(c+=` AND lr.start_date >= $${a++}`,i.push(t.startDate)),t.endDate&&(c+=` AND lr.end_date <= $${a++}`,i.push(t.endDate));let d=`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      ${c}
      ORDER BY lr.${s} ${n}
      LIMIT $${a++} OFFSET $${a++}
    `;i.push(r.size,o);let[l,u]=await Promise.all([js(d,i),js(`SELECT COUNT(*) ${c}`,i.slice(0,-2))]),h=Number(u.rows[0]?.count??0);return aH(l.rows.map(fg),r,h)}async getLeaveRequestById(t){let r=await js(`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE lr.request_id = $1
      `,[t]);return r.rowCount===0?null:fg(r.rows[0])}async insertLeaveRequest(t,r){let n=(await t.query(`
      INSERT INTO leave_requests (
        user_id,
        user_email,
        user_name,
        user_team_id,
        policy_id,
        start_date,
        end_date,
        half_day,
        reason,
        status
      )
      VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, 'PENDING')
      RETURNING request_id
      `,[r.userId,r.userEmail,r.userName??null,r.userTeamId,r.policyId,r.startDate,r.endDate,r.halfDay,r.reason??null])).rows[0].request_id,o=await t.query(`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE lr.request_id = $1
      `,[n]);return fg(o.rows[0])}async updateLeaveRequestStatus(t,r,s,n,o){if((await t.query(`
      UPDATE leave_requests
      SET status = $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE request_id = $2
      RETURNING request_id
      `,[s,r])).rowCount===0)throw new Error("Leave request not found");await t.query(`
      INSERT INTO leave_audit (request_id, action, actor_id, actor_email, actor_name, notes)
      VALUES ($1, $2, $3, $4, $5, $6)
      `,[r,s,n.id,n.email,n.name??null,o??null]);let a=await t.query(`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE lr.request_id = $1
      `,[r]);return fg(a.rows[0])}async adjustLeaveBalance(t,r,s,n,o){await t.query(`
      INSERT INTO leave_balances (user_id, policy_id, balance_days, year)
      VALUES ($1, $2, 0, $3)
      ON CONFLICT (user_id, policy_id, year) DO NOTHING
      `,[r,s,n]),await t.query(`
      UPDATE leave_balances
      SET balance_days = balance_days - $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE user_id = $2 AND policy_id = $3 AND year = $4
      `,[o,r,s,n])}async restoreLeaveBalance(t,r,s,n,o){await t.query(`
      UPDATE leave_balances
      SET balance_days = balance_days + $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE user_id = $2 AND policy_id = $3 AND year = $4
      `,[o,r,s,n])}async hasOverlappingRequest(t,r,s,n,o){let i=[t,r,s,n],a=i.length+1,c=`
      SELECT COUNT(*)::INT AS count
      FROM leave_requests
      WHERE user_id = $1
        AND policy_id = $2
        AND status IN ('PENDING', 'APPROVED')
        AND start_date <= $4
        AND end_date >= $3
    `;return o&&(c+=` AND request_id <> $${a++}`,i.push(o)),(await js(c,i)).rows[0].count>0}createLeaveRequest(t){return sR(r=>this.insertLeaveRequest(r,t))}async transitionLeaveRequest(t){return sR(async r=>{if((await r.query(`
        SELECT
          lr.request_id,
          lr.user_id,
          lr.user_email,
          lr.user_name,
          lr.user_team_id,
          lr.policy_id,
          (SELECT name FROM leave_policies WHERE policy_id = lr.policy_id) AS policy_name,
          lr.status,
          lr.start_date,
          lr.end_date,
          lr.half_day,
          lr.reason,
          lr.graph_event_id,
          lr.created_at,
          lr.updated_at,
          CASE
            WHEN lr.half_day THEN 0.5
            ELSE (lr.end_date - lr.start_date) + 1
          END AS days_requested
        FROM leave_requests lr
        WHERE lr.request_id = $1
        FOR UPDATE
        `,[t.requestId])).rowCount===0)throw new Error("Leave request not found");let n=await this.updateLeaveRequestStatus(r,t.requestId,t.newStatus,{id:t.actorId,email:t.actorEmail,name:t.actorName},t.notes),o=new Date(n.startDate).getFullYear();return t.daysToAdjust&&t.daysToAdjust>0&&(t.newStatus==="APPROVED"?await this.adjustLeaveBalance(r,n.userId,n.policyId,o,t.daysToAdjust):(t.newStatus==="CANCELLED"||t.newStatus==="REJECTED")&&await this.restoreLeaveBalance(r,n.userId,n.policyId,o,t.daysToAdjust)),n})}async updateGraphEventId(t,r){await js(`
      UPDATE leave_requests
      SET graph_event_id = $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE request_id = $2
      `,[r,t])}};var bce=e=>e.endsWith(".fifo"),dH=()=>process.env.CALENDAR_SYNC_ENABLED?.toLowerCase()==="true",mg=class{constructor(t=new pg){this.leaveRepository=t}sqsClient=new hg.SQSClient({region:process.env.AWS_REGION||"ap-southeast-2"});async enqueueCalendarSync(t){if(!dH()){cs.info("Calendar sync disabled, skipping enqueue",{requestId:t});return}let r=process.env.CALENDAR_SYNC_QUEUE_URL;if(!r)throw new Ir("QUEUE_NOT_CONFIGURED","Calendar sync queue URL is not configured",500);let s={requestId:t,attempt:1},n=new hg.SendMessageCommand({QueueUrl:r,MessageBody:JSON.stringify(s),...bce(r)?{MessageGroupId:`leave-${t}`,MessageDeduplicationId:`leave-${t}-${Date.now().toString()}`}:{}});await this.sqsClient.send(n),cs.info("Enqueued calendar sync",{requestId:t})}async syncLeaveRequest(t){if(!dH()){cs.info("Calendar sync disabled, skipping sync",{requestId:t});return}let r=await this.leaveRepository.getLeaveRequestById(t);if(!r||r.status!=="APPROVED")throw new Ir("LEAVE_NOT_APPROVED","Leave request is not approved",409);let s=process.env.GRAPH_TENANT,n=process.env.GRAPH_CLIENT_ID,o=process.env.GRAPH_CLIENT_SECRET,i=process.env.GRAPH_SCOPE||"https://graph.microsoft.com/.default";if(!s||!n||!o)throw new Ir("GRAPH_CONFIG_MISSING","Microsoft Graph credentials not configured",500);let a=`https://login.microsoftonline.com/${s}/oauth2/v2.0/token`,c=await fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:n,client_secret:o,scope:i,grant_type:"client_credentials"})});if(!c.ok){let m=await c.text();throw new Ir("GRAPH_TOKEN_ERROR",m,c.status)}let l=(await c.json()).access_token;if(!l)throw new Ir("GRAPH_TOKEN_ERROR","Access token missing from response",500);let u=await fetch(`https://graph.microsoft.com/v1.0/users/${r.userEmail}/calendar/events`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify({subject:`Leave: ${r.policyName}`,body:{contentType:"HTML",content:r.reason??"Leave request"},start:{dateTime:`${r.startDate}T00:00:00`,timeZone:"UTC"},end:{dateTime:`${r.endDate}T23:59:59`,timeZone:"UTC"},isAllDay:!r.halfDay})});if(!u.ok){let m=await u.text();throw new Ir("GRAPH_EVENT_ERROR",m,u.status)}let h=await u.json();await this.leaveRepository.updateGraphEventId(t,h.id),cs.info("Leave request synced to Microsoft Graph",{requestId:t,eventId:h.id})}};var Cce=new mg,Rce=async e=>{for(let t of e.Records)try{let r=JSON.parse(t.body);if(!r.requestId)throw new Ir("INVALID_MESSAGE","Message missing requestId",400);await Cce.syncLeaveRequest(r.requestId),cs.info("Calendar sync processed",{requestId:r.requestId.toString()})}catch(r){throw cs.error("Failed to process calendar sync message",{messageId:t.messageId},{error:r}),r}};0&&(module.exports={handler});
