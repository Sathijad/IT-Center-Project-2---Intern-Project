"use strict";var Rz=Object.create;var dl=Object.defineProperty;var Tz=Object.getOwnPropertyDescriptor;var Az=Object.getOwnPropertyNames;var Iz=Object.getPrototypeOf,Pz=Object.prototype.hasOwnProperty;var S=(e,t)=>()=>(e&&(t=e(e=0)),t);var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),dt=(e,t)=>{for(var r in t)dl(e,r,{get:t[r],enumerable:!0})},IC=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Az(t))!Pz.call(e,n)&&n!==r&&dl(e,n,{get:()=>t[n],enumerable:!(s=Tz(t,n))||s.enumerable});return e};var y=(e,t,r)=>(r=e!=null?Rz(Iz(e)):{},IC(t||!e||!e.__esModule?dl(r,"default",{value:e,enumerable:!0}):r,e)),Q=e=>IC(dl({},"__esModule",{value:!0}),e);var vn=b(ke=>{"use strict";ke.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ke.HttpAuthLocation||(ke.HttpAuthLocation={}));ke.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ke.HttpApiKeyAuthLocation||(ke.HttpApiKeyAuthLocation={}));ke.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(ke.EndpointURLScheme||(ke.EndpointURLScheme={}));ke.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(ke.AlgorithmId||(ke.AlgorithmId={}));var j4=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>ke.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>ke.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},B4=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},H4=e=>j4(e),z4=e=>B4(e);ke.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(ke.FieldPosition||(ke.FieldPosition={}));var V4="__smithy_context";ke.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(ke.IniSectionType||(ke.IniSectionType={}));ke.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ke.RequestHandlerProtocol||(ke.RequestHandlerProtocol={}));ke.SMITHY_CONTEXT_KEY=V4;ke.getDefaultClientConfiguration=H4;ke.resolveDefaultRuntimeConfig=z4});var ye=b(xn=>{"use strict";var G4=vn(),W4=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),Q4=e=>({httpHandler:e.httpHandler()}),Ly=class{name;kind;values;constructor({name:t,kind:r=G4.FieldPosition.HEADER,values:s=[]}){this.name=t,this.kind=r,this.values=s}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},qy=class{entries={};encoding;constructor({fields:t=[],encoding:r="utf-8"}){t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},Fy=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=K4(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function K4(e){return Object.keys(e).reduce((t,r)=>{let s=e[r];return{...t,[r]:Array.isArray(s)?[...s]:s}},{})}var $y=class{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function J4(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}xn.Field=Ly;xn.Fields=qy;xn.HttpRequest=Fy;xn.HttpResponse=$y;xn.getHttpHandlerExtensionConfiguration=W4;xn.isValidHostname=J4;xn.resolveHttpHandlerRuntimeConfig=Q4});var Ls=b(Tc=>{"use strict";var Y4=ye();function X4(e){return e}var BC=e=>t=>async r=>{if(!Y4.HttpRequest.isInstance(r.request))return t(r);let{request:s}=r,{handlerProtocol:n=""}=e.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let o=s.hostname;s.port!=null&&(o+=`:${s.port}`),s.headers.host=o}return t(r)},HC={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Z4=e=>({applyToStack:t=>{t.add(BC(e),HC)}});Tc.getHostHeaderPlugin=Z4;Tc.hostHeaderMiddleware=BC;Tc.hostHeaderMiddlewareOptions=HC;Tc.resolveHostHeaderConfig=X4});var qs=b(yl=>{"use strict";var zC=()=>(e,t)=>async r=>{try{let s=await e(r),{clientName:n,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=a,u=c??t.inputFilterSensitiveLog,l=d??t.outputFilterSensitiveLog,{$metadata:h,...m}=s.output;return i?.info?.({clientName:n,commandName:o,input:u(r.input),output:l(m),metadata:h}),s}catch(s){let{clientName:n,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,d=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:n,commandName:o,input:d(r.input),error:s,metadata:s.$metadata}),s}},VC={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},eV=e=>({applyToStack:t=>{t.add(zC(),VC)}});yl.getLoggerPlugin=eV;yl.loggerMiddleware=zC;yl.loggerMiddlewareOptions=VC});var WC={};dt(WC,{InvokeStore:()=>rV});var GC,Uy,tV,jy,Sl,rV,QC=S(()=>{GC=require("async_hooks"),Uy=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";Uy||(globalThis.awslambda=globalThis.awslambda||{});tV={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol("_AWS_LAMBDA_TENANT_ID")},jy=class{static storage=new GC.AsyncLocalStorage;static PROTECTED_KEYS=tV;static run(t,r){return this.storage.run({...t},r)}static getContext(){return this.storage.getStore()}static get(t){return this.storage.getStore()?.[t]}static set(t,r){if(this.isProtectedKey(t))throw new Error("Cannot modify protected Lambda context field");let s=this.storage.getStore();s&&(s[t]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static getTenantId(){return this.get(this.PROTECTED_KEYS.TENANT_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(t){return t===this.PROTECTED_KEYS.REQUEST_ID||t===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};!Uy&&globalThis.awslambda?.InvokeStore?Sl=globalThis.awslambda.InvokeStore:(Sl=jy,!Uy&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=Sl));rV=Sl});var KC=b(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.recursionDetectionMiddleware=void 0;var sV=(QC(),Q(WC)),nV=ye(),By="X-Amzn-Trace-Id",oV="AWS_LAMBDA_FUNCTION_NAME",iV="_X_AMZN_TRACE_ID",aV=()=>e=>async t=>{let{request:r}=t;if(!nV.HttpRequest.isInstance(r))return e(t);let s=Object.keys(r.headers??{}).find(d=>d.toLowerCase()===By.toLowerCase())??By;if(r.headers.hasOwnProperty(s))return e(t);let n=process.env[oV],o=process.env[iV],a=sV.InvokeStore.getXRayTraceId()??o,c=d=>typeof d=="string"&&d.length>0;return c(n)&&c(a)&&(r.headers[By]=a),e({...t,request:r})};_l.recursionDetectionMiddleware=aV});var Fs=b(El=>{"use strict";var Hy=KC(),cV={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},dV=e=>({applyToStack:t=>{t.add(Hy.recursionDetectionMiddleware(),cV)}});El.getRecursionDetectionPlugin=dV;Object.keys(Hy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(El,e)&&Object.defineProperty(El,e,{enumerable:!0,get:function(){return Hy[e]}})})});var zy,uV,JC=S(()=>{zy=y(vn()),uV=e=>e[zy.SMITHY_CONTEXT_KEY]||(e[zy.SMITHY_CONTEXT_KEY]={})});var gt=b(Vy=>{"use strict";var YC=vn(),lV=e=>e[YC.SMITHY_CONTEXT_KEY]||(e[YC.SMITHY_CONTEXT_KEY]={}),fV=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};Vy.getSmithyContext=lV;Vy.normalizeProvider=fV});var XC,ZC=S(()=>{XC=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let s of t)for(let n of e)n.schemeId.split("#")[1]===s&&r.push(n);for(let s of e)r.find(({schemeId:n})=>n===s.schemeId)||r.push(s);return r}});function pV(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var eR,Ac,wl=S(()=>{eR=y(gt());ZC();Ac=(e,t)=>(r,s)=>async n=>{let o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,s,n.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=XC(o,i),c=pV(e.httpAuthSchemes),d=(0,eR.getSmithyContext)(s),u=[];for(let l of a){let h=c.get(l.schemeId);if(!h){u.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}let m=h.identityProvider(await t.identityProviderConfigProvider(e));if(!m){u.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:g={},signingProperties:w={}}=l.propertiesExtractor?.(e,s)||{};l.identityProperties=Object.assign(l.identityProperties||{},g),l.signingProperties=Object.assign(l.signingProperties||{},w),d.selectedHttpAuthScheme={httpAuthOption:l,identity:await m(l.identityProperties),signer:h.signer};break}if(!d.selectedHttpAuthScheme)throw new Error(u.join(`
`));return r(n)}});var tR,$s,rR=S(()=>{wl();tR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},$s=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(Ac(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),tR)}})});var wr=b(ki=>{"use strict";var mV=ye(),sR=(e,t)=>(r,s)=>async n=>{let{response:o}=await r(n);try{let i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!s.logger||s.logger?.constructor?.name==="NoOpLogger"?console.warn(a):s.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(mV.HttpResponse.isInstance(o)){let{headers:c={}}=o,d=Object.entries(c);i.$metadata={httpStatusCode:o.statusCode,requestId:Gy(/^x-[\w-]+-request-?id$/,d),extendedRequestId:Gy(/^x-[\w-]+-id-2$/,d),cfId:Gy(/^x-[\w-]+-cf-id$/,d)}}}catch{}}throw i}},Gy=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],nR=(e,t)=>(r,s)=>async n=>{let o=e,i=s.endpointV2?.url&&o.urlParser?async()=>o.urlParser(s.endpointV2.url):o.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(n.input,{...e,endpoint:i});return r({...n,request:a})},oR={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},iR={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function hV(e,t,r){return{applyToStack:s=>{s.add(sR(e,r),oR),s.add(nR(e,t),iR)}}}ki.deserializerMiddleware=sR;ki.deserializerMiddlewareOption=oR;ki.getSerdePlugin=hV;ki.serializerMiddleware=nR;ki.serializerMiddlewareOption=iR});var aR,cR,gV,dR=S(()=>{aR=y(wr());wl();cR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:aR.serializerMiddlewareOption.name},gV=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(Ac(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),cR)}})});var uR=S(()=>{wl();rR();dR()});var lR,fR,yV,SV,Wy,Qy=S(()=>{lR=y(ye()),fR=y(gt()),yV=e=>t=>{throw t},SV=(e,t)=>{},Wy=e=>(t,r)=>async s=>{if(!lR.HttpRequest.isInstance(s.request))return t(s);let o=(0,fR.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,d=await t({...s,request:await c.sign(s.request,a,i)}).catch((c.errorHandler||yV)(i));return(c.successHandler||SV)(d.response,i),d}});var pR,Us,mR=S(()=>{Qy();pR={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Us=e=>({applyToStack:t=>{t.addRelativeTo(Wy(e),pR)}})});var hR=S(()=>{Qy();mR()});var jt,gR=S(()=>{jt=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function yR(e,t,r,s,n){return async function*(i,a,...c){let d=a,u=i.startingToken??d[r],l=!0,h;for(;l;){if(d[r]=u,n&&(d[n]=d[n]??i.pageSize),i.client instanceof e)h=await _V(t,i.client,a,i.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield h;let m=u;u=EV(h,s),l=!!(u&&(!i.stopOnSameToken||u!==m))}return void 0}}var _V,EV,SR=S(()=>{_V=async(e,t,r,s=o=>o,...n)=>{let o=new e(r);return o=s(o)??o,await t.send(o,...n)};EV=(e,t)=>{let r=e,s=t.split(".");for(let n of s){if(!r||typeof r!="object")return;r=r[n]}return r}});var Ky=b(_R=>{"use strict";var wV=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";_R.isArrayBuffer=wV});var Mi=b(Yy=>{"use strict";var bV=Ky(),Jy=require("buffer"),vV=(e,t=0,r=e.byteLength-t)=>{if(!bV.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Jy.Buffer.from(e,t,r)},xV=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Jy.Buffer.from(e,t):Jy.Buffer.from(e)};Yy.fromArrayBuffer=vV;Yy.fromString=xV});var ER=b(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.fromBase64=void 0;var CV=Mi(),RV=/^[A-Za-z0-9+/]*={0,2}$/,TV=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!RV.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,CV.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};bl.fromBase64=TV});var Fe=b(vl=>{"use strict";var wR=Mi(),bR=e=>{let t=wR.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},AV=e=>typeof e=="string"?bR(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),IV=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return wR.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};vl.fromUtf8=bR;vl.toUint8Array=AV;vl.toUtf8=IV});var vR=b(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.toBase64=void 0;var PV=Mi(),NV=Fe(),OV=e=>{let t;if(typeof e=="string"?t=(0,NV.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,PV.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};xl.toBase64=OV});var qe=b(Ic=>{"use strict";var xR=ER(),CR=vR();Object.keys(xR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ic,e)&&Object.defineProperty(Ic,e,{enumerable:!0,get:function(){return xR[e]}})});Object.keys(CR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ic,e)&&Object.defineProperty(Ic,e,{enumerable:!0,get:function(){return CR[e]}})})});var Zy=b(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.ChecksumStream=void 0;var DV=qe(),kV=require("stream"),Xy=class extends kV.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:t,checksum:r,source:s,checksumSourceLocation:n,base64Encoder:o}){if(super(),typeof s.pipe=="function")this.source=s;else throw new Error(`@smithy/util-stream: unsupported source type ${s?.constructor?.name??s} in ChecksumStream.`);this.base64Encoder=o??DV.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=n,this.source.pipe(this)}_read(t){}_write(t,r,s){try{this.checksum.update(t),this.push(t)}catch(n){return s(n)}return s()}async _final(t){try{let r=await this.checksum.digest(),s=this.base64Encoder(r);if(this.expectedChecksum!==s)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${s}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};Cl.ChecksumStream=Xy});var Cn=b(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.isBlob=Li.isReadableStream=void 0;var MV=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);Li.isReadableStream=MV;var LV=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);Li.isBlob=LV});var RR=b(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.ChecksumStream=void 0;var qV=typeof ReadableStream=="function"?ReadableStream:function(){},eS=class extends qV{};Rl.ChecksumStream=eS});var TR=b(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.createChecksumStream=void 0;var FV=qe(),$V=Cn(),UV=RR(),jV=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:s,base64Encoder:n})=>{if(!(0,$V.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let o=n??FV.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(c,d){t.update(c),d.enqueue(c)},async flush(c){let d=await t.digest(),u=o(d);if(e!==u){let l=new Error(`Checksum mismatch: expected "${e}" but received "${u}" in response header "${s}".`);c.error(l)}else c.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,UV.ChecksumStream.prototype),a};Tl.createChecksumStream=jV});var AR=b(tS=>{"use strict";Object.defineProperty(tS,"__esModule",{value:!0});tS.createChecksumStream=VV;var BV=Cn(),HV=Zy(),zV=TR();function VV(e){return typeof ReadableStream=="function"&&(0,BV.isReadableStream)(e.source)?(0,zV.createChecksumStream)(e):new HV.ChecksumStream(e)}});var sS=b(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.ByteArrayCollector=void 0;var rS=class{allocByteArray;byteLength=0;byteArrays=[];constructor(t){this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let s=this.byteArrays[0];return this.reset(),s}let t=this.allocByteArray(this.byteLength),r=0;for(let s=0;s<this.byteArrays.length;++s){let n=this.byteArrays[s];t.set(n,r),r+=n.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};Al.ByteArrayCollector=rS});var OR=b(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.createBufferedReadable=void 0;js.createBufferedReadableStream=IR;js.merge=PR;js.flush=Il;js.sizeOf=qi;js.modeOf=NR;var GV=sS();function IR(e,t,r){let s=e.getReader(),n=!1,o=0,i=["",new GV.ByteArrayCollector(d=>new Uint8Array(d))],a=-1,c=async d=>{let{value:u,done:l}=await s.read(),h=u;if(l){if(a!==-1){let m=Il(i,a);qi(m)>0&&d.enqueue(m)}d.close()}else{let m=NR(h,!1);if(a!==m&&(a>=0&&d.enqueue(Il(i,a)),a=m),a===-1){d.enqueue(h);return}let g=qi(h);o+=g;let w=qi(i[a]);if(g>=t&&w===0)d.enqueue(h);else{let C=PR(i,a,h);!n&&o>t*2&&(n=!0,r?.warn(`@smithy/util-stream - stream chunk size ${g} is below threshold of ${t}, automatically buffering.`)),C>=t?d.enqueue(Il(i,a)):await c(d)}}};return new ReadableStream({pull:c})}js.createBufferedReadable=IR;function PR(e,t,r){switch(t){case 0:return e[0]+=r,qi(e[0]);case 1:case 2:return e[t].push(r),qi(e[t])}}function Il(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function qi(e){return e?.byteLength??e?.length??0}function NR(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var kR=b(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});nS.createBufferedReadable=KV;var WV=require("node:stream"),DR=sS(),Bs=OR(),QV=Cn();function KV(e,t,r){if((0,QV.isReadableStream)(e))return(0,Bs.createBufferedReadableStream)(e,t,r);let s=new WV.Readable({read(){}}),n=!1,o=0,i=["",new DR.ByteArrayCollector(c=>new Uint8Array(c)),new DR.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return e.on("data",c=>{let d=(0,Bs.modeOf)(c,!0);if(a!==d&&(a>=0&&s.push((0,Bs.flush)(i,a)),a=d),a===-1){s.push(c);return}let u=(0,Bs.sizeOf)(c);o+=u;let l=(0,Bs.sizeOf)(i[a]);if(u>=t&&l===0)s.push(c);else{let h=(0,Bs.merge)(i,a,c);!n&&o>t*2&&(n=!0,r?.warn(`@smithy/util-stream - stream chunk size ${u} is below threshold of ${t}, automatically buffering.`)),h>=t&&s.push((0,Bs.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let c=(0,Bs.flush)(i,a);(0,Bs.sizeOf)(c)>0&&s.push(c)}s.push(null)}),s}});var MR=b(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.getAwsChunkedEncodingStream=void 0;var JV=require("stream"),YV=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:s,checksumAlgorithmFn:n,checksumLocationName:o,streamHasher:i}=t,a=r!==void 0&&n!==void 0&&o!==void 0&&i!==void 0,c=a?i(n,e):void 0,d=new JV.Readable({read:()=>{}});return e.on("data",u=>{let l=s(u)||0;d.push(`${l.toString(16)}\r
`),d.push(u),d.push(`\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),a){let u=r(await c);d.push(`${o}:${u}\r
`),d.push(`\r
`)}d.push(null)}),d};Pl.getAwsChunkedEncodingStream=YV});var LR=b(oS=>{"use strict";Object.defineProperty(oS,"__esModule",{value:!0});oS.headStream=XV;async function XV(e,t){let r=0,s=[],n=e.getReader(),o=!1;for(;!o;){let{done:c,value:d}=await n.read();if(d&&(s.push(d),r+=d?.byteLength??0),r>=t)break;o=c}n.releaseLock();let i=new Uint8Array(Math.min(t,r)),a=0;for(let c of s){if(c.byteLength>i.byteLength-a){i.set(c.subarray(0,i.byteLength-a),a);break}else i.set(c,a);a+=c.length}return i}});var qR=b(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.headStream=void 0;var ZV=require("stream"),e3=LR(),t3=Cn(),r3=(e,t)=>(0,t3.isReadableStream)(e)?(0,e3.headStream)(e,t):new Promise((r,s)=>{let n=new iS;n.limit=t,e.pipe(n),e.on("error",o=>{n.end(),s(o)}),n.on("error",s),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})});Nl.headStream=r3;var iS=class extends ZV.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(t,r,s){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let n=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-n),this.emit("finish")}s()}}});var cS=b(aS=>{"use strict";var FR=e=>encodeURIComponent(e).replace(/[!'()*]/g,s3),s3=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,n3=e=>e.split("/").map(FR).join("/");aS.escapeUri=FR;aS.escapeUriPath=n3});var uS=b($R=>{"use strict";var dS=cS();function o3(e){let t=[];for(let r of Object.keys(e).sort()){let s=e[r];if(r=dS.escapeUri(r),Array.isArray(s))for(let n=0,o=s.length;n<o;n++)t.push(`${r}=${dS.escapeUri(s[n])}`);else{let n=r;(s||typeof s=="string")&&(n+=`=${dS.escapeUri(s)}`),t.push(n)}}return t.join("&")}$R.buildQueryString=o3});var br=b(Pc=>{"use strict";var HR=ye(),zR=uS(),Ol=require("http"),Dl=require("https"),VR=require("stream"),lS=require("http2"),i3=["ECONNRESET","EPIPE","ETIMEDOUT"],GR=e=>{let t={};for(let r of Object.keys(e)){let s=e[r];t[r]=Array.isArray(s)?s.join(","):s}return t},Bt={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},UR=1e3,a3=(e,t,r=0)=>{if(!r)return-1;let s=n=>{let o=Bt.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-n),i=a=>{a?.connecting?a.on("connect",()=>{Bt.clearTimeout(o)}):Bt.clearTimeout(o)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(s(0),0):Bt.setTimeout(s.bind(null,UR),UR)},c3=(e,t,r=0,s,n)=>r?Bt.setTimeout(()=>{let o=`@smithy/node-http-handler - [${s?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(s){let i=Object.assign(new Error(o),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(i),t(i)}else o+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",n?.warn?.(o)},r):-1,d3=3e3,u3=(e,{keepAlive:t,keepAliveMsecs:r},s=d3)=>{if(t!==!0)return-1;let n=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",o=>{o.setKeepAlive(t,r||0)})};return s===0?(n(),0):Bt.setTimeout(n,s)},jR=3e3,l3=(e,t,r=0)=>{let s=n=>{let o=r-n,i=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(o,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(o,i)};return 0<r&&r<6e3?(s(0),0):Bt.setTimeout(s.bind(null,r===0?0:jR),jR)},BR=6e3;async function WR(e,t,r=BR,s=!1){let n=t.headers??{},o=n.Expect||n.expect,i=-1,a=!0;!s&&o==="100-continue"&&(a=await Promise.race([new Promise(c=>{i=Number(Bt.setTimeout(()=>c(!0),Math.max(BR,r)))}),new Promise(c=>{e.on("continue",()=>{Bt.clearTimeout(i),c(!0)}),e.on("response",()=>{Bt.clearTimeout(i),c(!1)}),e.on("error",()=>{Bt.clearTimeout(i),c(!1)})})])),a&&f3(e,t.body)}function f3(e,t){if(t instanceof VR.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var p3=0,fS=class e{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,s=console){let{sockets:n,requests:o,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(n&&o)for(let c in n){let d=n[c]?.length??0,u=o[c]?.length??0;if(d>=i&&u>=2*i)return s?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${d} and ${u} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,s)=>{typeof t=="function"?t().then(n=>{r(this.resolveDefaultConfig(n))}).catch(s):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:s,socketTimeout:n,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:c}=t||{},d=!0,u=50;return{connectionTimeout:s,requestTimeout:r,socketTimeout:n,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:c,httpAgent:i instanceof Ol.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new Ol.Agent({keepAlive:d,maxSockets:u,...i}),httpsAgent:a instanceof Dl.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new Dl.Agent({keepAlive:d,maxSockets:u,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:s}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let i=this.config,a,c=[],d=async te=>{await a,c.forEach(Bt.clearTimeout),n(te)},u=async te=>{await a,c.forEach(Bt.clearTimeout),o(te)};if(r?.aborted){let te=new Error("Request aborted");te.name="AbortError",u(te);return}let l=t.protocol==="https:",h=t.headers??{},m=(h.Expect??h.expect)==="100-continue",g=l?i.httpsAgent:i.httpAgent;m&&!this.externalAgent&&(g=new(l?Dl.Agent:Ol.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(Bt.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(g,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let w=zR.buildQueryString(t.query||{}),C;if(t.username!=null||t.password!=null){let te=t.username??"",he=t.password??"";C=`${te}:${he}`}let R=t.path;w&&(R+=`?${w}`),t.fragment&&(R+=`#${t.fragment}`);let N=t.hostname??"";N[0]==="["&&N.endsWith("]")?N=t.hostname.slice(1,-1):N=t.hostname;let B={headers:t.headers,host:N,method:t.method,path:R,port:t.port,agent:g,auth:C},Y=(l?Dl.request:Ol.request)(B,te=>{let he=new HR.HttpResponse({statusCode:te.statusCode||-1,reason:te.statusMessage,headers:GR(te.headers),body:te});d({response:he})});if(Y.on("error",te=>{i3.includes(te.code)?u(Object.assign(te,{name:"TimeoutError"})):u(te)}),r){let te=()=>{Y.destroy();let he=new Error("Request aborted");he.name="AbortError",u(he)};if(typeof r.addEventListener=="function"){let he=r;he.addEventListener("abort",te,{once:!0}),Y.once("close",()=>he.removeEventListener("abort",te))}else r.onabort=te}let we=s??i.requestTimeout;c.push(a3(Y,u,i.connectionTimeout)),c.push(c3(Y,u,we,i.throwOnRequestTimeout,i.logger??console)),c.push(l3(Y,u,i.socketTimeout));let De=B.agent;typeof De=="object"&&"keepAlive"in De&&c.push(u3(Y,{keepAlive:De.keepAlive,keepAliveMsecs:De.keepAliveMsecs})),a=WR(Y,t,we,this.externalAgent).catch(te=>(c.forEach(Bt.clearTimeout),o(te)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>({...s,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},pS=class{sessions=[];constructor(t){this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},mS=class{constructor(t){if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(t,r){let s=this.getUrlString(t),n=this.sessionCache.get(s);if(n){let c=n.poll();if(c&&!this.config.disableConcurrency)return c}let o=lS.connect(s);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),o.unref();let i=()=>{o.destroy(),this.deleteSession(s,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(s,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(s)||new pS;return a.offerLast(o),this.sessionCache.set(s,a),o}deleteSession(t,r){let s=this.sessionCache.get(t);s&&s.contains(r)&&(s.remove(r),this.sessionCache.set(t,s))}release(t,r){let s=this.getUrlString(t);this.sessionCache.get(s)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let s of r)s.destroyed||s.destroy(),r.remove(s);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},hS=class e{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new mS({});static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){this.configProvider=new Promise((r,s)=>{typeof t=="function"?t().then(n=>{r(n||{})}).catch(s):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:s}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:n,disableConcurrentStreams:o}=this.config,i=s??n;return new Promise((a,c)=>{let d=!1,u,l=async be=>{await u,a(be)},h=async be=>{await u,c(be)};if(r?.aborted){d=!0;let be=new Error("Request aborted");be.name="AbortError",h(be);return}let{hostname:m,method:g,port:w,protocol:C,query:R}=t,N="";if(t.username!=null||t.password!=null){let be=t.username??"",Ie=t.password??"";N=`${be}:${Ie}@`}let B=`${C}//${N}${m}${w?`:${w}`:""}`,j={destination:new URL(B)},Y=this.connectionManager.lease(j,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:o||!1}),we=be=>{o&&this.destroySession(Y),d=!0,h(be)},De=zR.buildQueryString(R||{}),te=t.path;De&&(te+=`?${De}`),t.fragment&&(te+=`#${t.fragment}`);let he=Y.request({...t.headers,[lS.constants.HTTP2_HEADER_PATH]:te,[lS.constants.HTTP2_HEADER_METHOD]:g});if(Y.ref(),he.on("response",be=>{let Ie=new HR.HttpResponse({statusCode:be[":status"]||-1,headers:GR(be),body:he});d=!0,l({response:Ie}),o&&(Y.close(),this.connectionManager.deleteSession(B,Y))}),i&&he.setTimeout(i,()=>{he.close();let be=new Error(`Stream timed out because of no activity for ${i} ms`);be.name="TimeoutError",we(be)}),r){let be=()=>{he.close();let Ie=new Error("Request aborted");Ie.name="AbortError",we(Ie)};if(typeof r.addEventListener=="function"){let Ie=r;Ie.addEventListener("abort",be,{once:!0}),he.once("close",()=>Ie.removeEventListener("abort",be))}else r.onabort=be}he.on("frameError",(be,Ie,Ci)=>{we(new Error(`Frame type id ${be} in stream id ${Ci} has failed with code ${Ie}.`))}),he.on("error",we),he.on("aborted",()=>{we(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${he.rstCode}.`))}),he.on("close",()=>{Y.unref(),o&&Y.destroy(),d||we(new Error("Unexpected error: http2 request did not get a response"))}),u=WR(he,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>({...s,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},gS=class extends VR.Writable{bufferedBytes=[];_write(t,r,s){this.bufferedBytes.push(t),s()}},m3=e=>h3(e)?g3(e):new Promise((t,r)=>{let s=new gS;e.pipe(s),e.on("error",n=>{s.end(),r(n)}),s.on("error",r),s.on("finish",function(){let n=new Uint8Array(Buffer.concat(this.bufferedBytes));t(n)})}),h3=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function g3(e){let t=[],r=e.getReader(),s=!1,n=0;for(;!s;){let{done:a,value:c}=await r.read();c&&(t.push(c),n+=c.length),s=a}let o=new Uint8Array(n),i=0;for(let a of t)o.set(a,i),i+=a.length;return o}Pc.DEFAULT_REQUEST_TIMEOUT=p3;Pc.NodeHttp2Handler=hS;Pc.NodeHttpHandler=fS;Pc.streamCollector=m3});var JR=b(Ml=>{"use strict";var QR=ye(),y3=uS(),S3=qe();function KR(e,t){return new Request(e,t)}function _3(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let s=new Error(`Request did not complete within ${e} ms`);s.name="TimeoutError",r(s)},e)})}var kl={supported:void 0},yS=class e{config;configProvider;static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),kl.supported===void 0&&(kl.supported=typeof Request<"u"&&"keepalive"in KR("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:s}={}){this.config||(this.config=await this.configProvider);let n=s??this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let N=new Error("Request aborted");return N.name="AbortError",Promise.reject(N)}let a=t.path,c=y3.buildQueryString(t.query||{});c&&(a+=`?${c}`),t.fragment&&(a+=`#${t.fragment}`);let d="";if(t.username!=null||t.password!=null){let N=t.username??"",B=t.password??"";d=`${N}:${B}@`}let{port:u,method:l}=t,h=`${t.protocol}//${d}${t.hostname}${u?`:${u}`:""}${a}`,m=l==="GET"||l==="HEAD"?void 0:t.body,g={body:m,headers:new Headers(t.headers),method:l,credentials:i};this.config?.cache&&(g.cache=this.config.cache),m&&(g.duplex="half"),typeof AbortController<"u"&&(g.signal=r),kl.supported&&(g.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(g,this.config.requestInit(t));let w=()=>{},C=KR(h,g),R=[fetch(C).then(N=>{let B=N.headers,j={};for(let we of B.entries())j[we[0]]=we[1];return N.body!=null?{response:new QR.HttpResponse({headers:j,reason:N.statusText,statusCode:N.status,body:N.body})}:N.blob().then(we=>({response:new QR.HttpResponse({headers:j,reason:N.statusText,statusCode:N.status,body:we})}))}),_3(n)];return r&&R.push(new Promise((N,B)=>{let j=()=>{let Y=new Error("Request aborted");Y.name="AbortError",B(Y)};if(typeof r.addEventListener=="function"){let Y=r;Y.addEventListener("abort",j,{once:!0}),w=()=>Y.removeEventListener("abort",j)}else r.onabort=j})),Promise.race(R).finally(w)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(s=>(s[t]=r,s))}httpHandlerConfigs(){return this.config??{}}},E3=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):w3(e):b3(e);async function w3(e){let t=await v3(e),r=S3.fromBase64(t);return new Uint8Array(r)}async function b3(e){let t=[],r=e.getReader(),s=!1,n=0;for(;!s;){let{done:a,value:c}=await r.read();c&&(t.push(c),n+=c.length),s=a}let o=new Uint8Array(n),i=0;for(let a of t)o.set(a,i),i+=a.length;return o}function v3(e){return new Promise((t,r)=>{let s=new FileReader;s.onloadend=()=>{if(s.readyState!==2)return r(new Error("Reader aborted too early"));let n=s.result??"",o=n.indexOf(","),i=o>-1?o+1:n.length;t(n.substring(i))},s.onabort=()=>r(new Error("Read aborted")),s.onerror=()=>r(s.error),s.readAsDataURL(e)})}Ml.FetchHttpHandler=yS;Ml.keepAliveSupport=kl;Ml.streamCollector=E3});var Ll=b(_S=>{"use strict";var YR={},SS={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),YR[e]=t,SS[t]=e}function x3(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let s=e.slice(r,r+2).toLowerCase();if(s in SS)t[r/2]=SS[s];else throw new Error(`Cannot decode unrecognized sequence ${s} as hexadecimal`)}return t}function C3(e){let t="";for(let r=0;r<e.byteLength;r++)t+=YR[e[r]];return t}_S.fromHex=x3;_S.toHex=C3});var tT=b(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.sdkStreamMixin=void 0;var R3=JR(),T3=qe(),A3=Ll(),I3=Fe(),XR=Cn(),ZR="The stream has already been transformed.",P3=e=>{if(!eT(e)&&!(0,XR.isReadableStream)(e)){let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(ZR);return t=!0,await(0,R3.streamCollector)(e)},s=n=>{if(typeof n.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return n.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();if(n==="base64")return(0,T3.toBase64)(o);if(n==="hex")return(0,A3.toHex)(o);if(n===void 0||n==="utf8"||n==="utf-8")return(0,I3.toUtf8)(o);if(typeof TextDecoder=="function")return new TextDecoder(n).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(ZR);if(t=!0,eT(e))return s(e);if((0,XR.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};ql.sdkStreamMixin=P3;var eT=e=>typeof Blob=="function"&&e instanceof Blob});var sT=b(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.sdkStreamMixin=void 0;var N3=br(),O3=Mi(),ES=require("stream"),D3=tT(),rT="The stream has already been transformed.",k3=e=>{if(!(e instanceof ES.Readable))try{return(0,D3.sdkStreamMixin)(e)}catch{let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(rT);return t=!0,await(0,N3.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{let n=await r();return s===void 0||Buffer.isEncoding(s)?(0,O3.fromArrayBuffer)(n.buffer,n.byteOffset,n.byteLength).toString(s):new TextDecoder(s).decode(n)},transformToWebStream:()=>{if(t)throw new Error(rT);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof ES.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,ES.Readable.toWeb(e)}})};Fl.sdkStreamMixin=k3});var nT=b(wS=>{"use strict";Object.defineProperty(wS,"__esModule",{value:!0});wS.splitStream=M3;async function M3(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var aT=b(bS=>{"use strict";Object.defineProperty(bS,"__esModule",{value:!0});bS.splitStream=q3;var oT=require("stream"),L3=nT(),iT=Cn();async function q3(e){if((0,iT.isReadableStream)(e)||(0,iT.isBlob)(e))return(0,L3.splitStream)(e);let t=new oT.PassThrough,r=new oT.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var Nc=b(yt=>{"use strict";var cT=qe(),dT=Fe(),uT=Zy(),lT=AR(),fT=kR(),pT=MR(),mT=qR(),hT=sT(),gT=aT(),yT=Cn(),vS=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?e.mutate(cT.fromBase64(t)):e.mutate(dT.fromUtf8(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return t==="base64"?cT.toBase64(this):dT.toUtf8(this)}};yt.Uint8ArrayBlobAdapter=vS;Object.keys(uT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(yt,e)&&Object.defineProperty(yt,e,{enumerable:!0,get:function(){return uT[e]}})});Object.keys(lT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(yt,e)&&Object.defineProperty(yt,e,{enumerable:!0,get:function(){return lT[e]}})});Object.keys(fT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(yt,e)&&Object.defineProperty(yt,e,{enumerable:!0,get:function(){return fT[e]}})});Object.keys(pT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(yt,e)&&Object.defineProperty(yt,e,{enumerable:!0,get:function(){return pT[e]}})});Object.keys(mT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(yt,e)&&Object.defineProperty(yt,e,{enumerable:!0,get:function(){return mT[e]}})});Object.keys(hT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(yt,e)&&Object.defineProperty(yt,e,{enumerable:!0,get:function(){return hT[e]}})});Object.keys(gT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(yt,e)&&Object.defineProperty(yt,e,{enumerable:!0,get:function(){return gT[e]}})});Object.keys(yT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(yt,e)&&Object.defineProperty(yt,e,{enumerable:!0,get:function(){return yT[e]}})})});var $l,Jt,Ul=S(()=>{$l=y(Nc()),Jt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return $l.Uint8ArrayBlobAdapter.mutate(e);if(!e)return $l.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return $l.Uint8ArrayBlobAdapter.mutate(await r)}});function ur(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var jl=S(()=>{});var Ht,xS=S(()=>{Ht=e=>typeof e=="function"?e():e});var Oc,Bl=S(()=>{Oc=(e,t,r,s,n)=>({name:t,namespace:e,traits:r,input:s,output:n})});var ST,_T,ET,CS,wT=S(()=>{ST=y(ye()),_T=y(gt());Bl();ET=e=>(t,r)=>async s=>{let{response:n}=await t(s),{operationSchema:o}=(0,_T.getSmithyContext)(r),[,i,a,c,d,u]=o??[];try{let l=await e.protocol.deserializeResponse(Oc(i,a,c,d,u),{...e,...r},n);return{response:n,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:n}),!("$metadata"in l)){let h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+h}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(h):r.logger?.warn?.(h)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText);try{if(ST.HttpResponse.isInstance(n)){let{headers:m={}}=n,g=Object.entries(m);l.$metadata={httpStatusCode:n.statusCode,requestId:CS(/^x-[\w-]+-request-?id$/,g),extendedRequestId:CS(/^x-[\w-]+-id-2$/,g),cfId:CS(/^x-[\w-]+-cf-id$/,g)}}}catch{}}throw l}},CS=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var bT,vT,xT=S(()=>{bT=y(gt());Bl();vT=e=>(t,r)=>async s=>{let{operationSchema:n}=(0,bT.getSmithyContext)(r),[,o,i,a,c,d]=n??[],u=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,l=await e.protocol.serializeRequest(Oc(o,i,a,c,d),s.input,{...e,...r,endpoint:u});return t({...s,request:l})}});function F3(e){return{applyToStack:t=>{t.add(vT(e),RT),t.add(ET(e),CT),e.protocol.setSerdeContext(e)}}}var CT,RT,TT=S(()=>{wT();xT();CT={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},RT={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var nt,Rn=S(()=>{nt=class{name;namespace;traits;static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Hl,$3,AT=S(()=>{Rn();Hl=class e extends nt{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=e.symbol},$3=(e,t,r,s)=>nt.assign(new Hl,{name:t,namespace:e,traits:r,valueSchema:s})});var zl,U3,IT=S(()=>{Rn();zl=class e extends nt{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=e.symbol},U3=(e,t,r,s,n)=>nt.assign(new zl,{name:t,namespace:e,traits:r,keySchema:s,valueSchema:n})});var Vl,j3,PT=S(()=>{Rn();Vl=class e extends nt{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=e.symbol},j3=(e,t,r,s,n)=>nt.assign(new Vl,{name:t,namespace:e,traits:r,input:s,output:n})});var Fi,B3,RS=S(()=>{Rn();Fi=class e extends nt{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=e.symbol},B3=(e,t,r,s,n)=>nt.assign(new Fi,{name:t,namespace:e,traits:r,memberNames:s,memberList:n})});var Gl,H3,NT=S(()=>{Rn();RS();Gl=class e extends Fi{static symbol=Symbol.for("@smithy/err");ctor;symbol=e.symbol},H3=(e,t,r,s,n,o)=>nt.assign(new Gl,{name:t,namespace:e,traits:r,memberNames:s,memberList:n,ctor:null})});function ps(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let s of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[s]=1);return t}var TS=S(()=>{});function Dc(e,t){if(e instanceof k)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=k;return new r(e,t)}var k,AS,OT,DT=S(()=>{xS();TS();k=class e{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let s=[],n=t,o=t;for(this._isMemberSchema=!1;AS(n);)s.push(n[1]),n=n[0],o=Ht(n),this._isMemberSchema=!0;if(s.length>0){this.memberTraits={};for(let i=s.length-1;i>=0;--i){let a=s[i];Object.assign(this.memberTraits,ps(a))}}else this.memberTraits=0;if(o instanceof e){let i=this.memberTraits;Object.assign(this,o),this.memberTraits=Object.assign({},i,o.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??o.memberName;return}if(this.schema=Ht(o),OT(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(o),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){let r=Ht(t);if(r instanceof e)return r;if(AS(r)){let[s,n]=r;if(s instanceof e)return Object.assign(s.getMergedTraits(),ps(n)),s;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(r)}getSchema(){let t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let t=this.getSchema();return t[0]===3||t[0]===-3}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=o=>(o&4)===4||!!o?.idempotencyToken,{normalizedTraits:r,traits:s,memberTraits:n}=this;return t(r)||t(s)||t(n)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return ps(this.memberTraits)}getOwnTraits(){return ps(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let s=this.getSchema(),n=t?15:s[4]??0;return Dc([n,0],"key")}getValueSchema(){let t=this.getSchema(),[r,s,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],o=typeof t=="number"?63&t:t&&typeof t=="object"&&(s||n)?t[3+t[0]]:r?15:void 0;if(o!=null)return Dc([o,0],s?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let s=r[4].indexOf(t),n=r[5][s];return Dc(AS(n)?n:[n,0],t)}if(this.isDocumentSchema())return Dc([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,s]of this.structIterator())t[r]=s}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],Dc([t[5][r],0],t[4][r])]}};AS=e=>Array.isArray(e)&&e.length===2,OT=e=>Array.isArray(e)&&e.length>=5});var kc,z3,V3,kT=S(()=>{Rn();kc=class e extends nt{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=e.symbol},z3=(e,t,r,s)=>nt.assign(new kc,{name:t,namespace:e,traits:s,schemaRef:r}),V3=(e,t,r,s)=>nt.assign(new kc,{name:t,namespace:e,traits:r,schemaRef:s})});var G3,MT=S(()=>{G3={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var ve,LT=S(()=>{ve=class e{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,s=new Map){this.namespace=t,this.schemas=r,this.exceptions=s}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let s=this.normalizeShapeId(t);e.for(s.split("#")[0]).schemas.set(s,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let s=t,n=e.for(s[1]);n.schemas.set(s[1]+"#"+s[2],s),n.exceptions.set(s,r)}getErrorCtor(t){let r=t;return e.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,s]=t,n=r+"#"+s;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}}});var IS={};dt(IS,{ErrorSchema:()=>Gl,ListSchema:()=>Hl,MapSchema:()=>zl,NormalizedSchema:()=>k,OperationSchema:()=>Vl,SCHEMA:()=>G3,Schema:()=>nt,SimpleSchema:()=>kc,StructureSchema:()=>Fi,TypeRegistry:()=>ve,deref:()=>Ht,deserializerMiddlewareOption:()=>CT,error:()=>H3,getSchemaSerdePlugin:()=>F3,isStaticSchema:()=>OT,list:()=>$3,map:()=>U3,op:()=>j3,operation:()=>Oc,serializerMiddlewareOption:()=>RT,sim:()=>z3,simAdapter:()=>V3,struct:()=>B3,translateTraits:()=>ps});var _e=S(()=>{xS();TT();AT();IT();PT();Bl();NT();DT();Rn();kT();RS();MT();TS();LT()});var W3,qT=S(()=>{W3=(e,t,r=s=>s)=>e});var Q3,K3,Mc,J3,Wl,Lc,Y3,PS,NS,OS,DS,X3,Z3,FT,e6,t6,Kl,r6,kS,s6,$i,MS,n6,o6,i6,$T,UT,a6,c6,zo,LS,Ql,qc,qS=S(()=>{Q3=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},K3=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&qc.warn(Ql(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&qc.warn(Ql(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},Mc=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&qc.warn(Ql(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},J3=Math.ceil(34028234663852886e22),Wl=e=>{let t=Mc(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>J3)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Lc=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},Y3=Lc,PS=e=>DS(e,32),NS=e=>DS(e,16),OS=e=>DS(e,8),DS=(e,t)=>{let r=Lc(e);if(r!==void 0&&X3(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},X3=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Z3=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},FT=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},e6=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return qc.warn(Ql(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},t6=e=>{if(e==null)return;let t=FT(e),r=Object.entries(t).filter(([,s])=>s!=null).map(([s])=>s);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},Kl=e=>Mc(typeof e=="string"?$i(e):e),r6=Kl,kS=e=>Wl(typeof e=="string"?$i(e):e),s6=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,$i=e=>{let t=e.match(s6);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},MS=e=>typeof e=="string"?$T(e):Mc(e),n6=MS,o6=MS,i6=e=>typeof e=="string"?$T(e):Wl(e),$T=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},UT=e=>Lc(typeof e=="string"?$i(e):e),a6=UT,c6=e=>PS(typeof e=="string"?$i(e):e),zo=e=>NS(typeof e=="string"?$i(e):e),LS=e=>OS(typeof e=="string"?$i(e):e),Ql=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),qc={warn:console.warn}});function Vo(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),s=e.getUTCDay(),n=e.getUTCDate(),o=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=n<10?`0${n}`:`${n}`,d=o<10?`0${o}`:`${o}`,u=i<10?`0${i}`:`${i}`,l=a<10?`0${a}`:`${a}`;return`${d6[s]}, ${c} ${$S[r]} ${t} ${d}:${u}:${l} GMT`}var d6,$S,u6,l6,f6,$c,p6,m6,h6,Uc,jc,Fc,g6,y6,S6,FS,_6,E6,w6,ms,b6,v6,Ui,jT=S(()=>{qS();d6=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],$S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];u6=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),l6=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=u6.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,s,n,o,i,a,c,d]=t,u=zo(Ui(s)),l=ms(n,"month",1,12),h=ms(o,"day",1,31);return Fc(u,l,h,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})},f6=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),$c=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=f6.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,s,n,o,i,a,c,d,u]=t,l=zo(Ui(s)),h=ms(n,"month",1,12),m=ms(o,"day",1,31),g=Fc(l,h,m,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return u.toUpperCase()!="Z"&&g.setTime(g.getTime()-v6(u)),g},p6=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),m6=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),h6=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Uc=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=p6.exec(e);if(t){let[r,s,n,o,i,a,c,d]=t;return Fc(zo(Ui(o)),FS(n),ms(s,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})}if(t=m6.exec(e),t){let[r,s,n,o,i,a,c,d]=t;return S6(Fc(g6(o),FS(n),ms(s,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d}))}if(t=h6.exec(e),t){let[r,s,n,o,i,a,c,d]=t;return Fc(zo(Ui(d)),FS(s),ms(n.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},jc=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Kl(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Fc=(e,t,r,s)=>{let n=t-1;return E6(e,n,r),new Date(Date.UTC(e,n,r,ms(s.hours,"hour",0,23),ms(s.minutes,"minute",0,59),ms(s.seconds,"seconds",0,60),b6(s.fractionalMilliseconds)))},g6=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+zo(Ui(e));return r<t?r+100:r},y6=50*365*24*60*60*1e3,S6=e=>e.getTime()-new Date().getTime()>y6?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,FS=e=>{let t=$S.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},_6=[31,28,31,30,31,30,31,31,30,31,30,31],E6=(e,t,r)=>{let s=_6[t];if(t===1&&w6(e)&&(s=29),r>s)throw new TypeError(`Invalid day for ${$S[t]} in ${e}: ${r}`)},w6=e=>e%4===0&&(e%100!==0||e%400===0),ms=(e,t,r,s)=>{let n=LS(Ui(e));if(n<r||n>s)throw new TypeError(`${t} must be between ${r} and ${s}, inclusive`);return n},b6=e=>e==null?0:kS("0."+e)*1e3,v6=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let s=Number(e.substring(1,3)),n=Number(e.substring(4,6));return r*(s*60+n)*60*1e3},Ui=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Tn={};dt(Tn,{__addDisposableResource:()=>fA,__assign:()=>Jl,__asyncDelegator:()=>nA,__asyncGenerator:()=>sA,__asyncValues:()=>oA,__await:()=>ji,__awaiter:()=>YT,__classPrivateFieldGet:()=>dA,__classPrivateFieldIn:()=>lA,__classPrivateFieldSet:()=>uA,__createBinding:()=>Xl,__decorate:()=>zT,__disposeResources:()=>pA,__esDecorate:()=>GT,__exportStar:()=>ZT,__extends:()=>BT,__generator:()=>XT,__importDefault:()=>cA,__importStar:()=>aA,__makeTemplateObject:()=>iA,__metadata:()=>JT,__param:()=>VT,__propKey:()=>QT,__read:()=>BS,__rest:()=>HT,__rewriteRelativeImportExtension:()=>mA,__runInitializers:()=>WT,__setFunctionName:()=>KT,__spread:()=>eA,__spreadArray:()=>rA,__spreadArrays:()=>tA,__values:()=>Yl,default:()=>R6});function BT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");US(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function HT(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}function zT(e,t,r,s){var n=arguments.length,o=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(n<3?i(o):n>3?i(t,r,o):i(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function VT(e,t){return function(r,s){t(r,s,e)}}function GT(e,t,r,s,n,o){function i(R){if(R!==void 0&&typeof R!="function")throw new TypeError("Function expected");return R}for(var a=s.kind,c=a==="getter"?"get":a==="setter"?"set":"value",d=!t&&e?s.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,s.name):{}),l,h=!1,m=r.length-1;m>=0;m--){var g={};for(var w in s)g[w]=w==="access"?{}:s[w];for(var w in s.access)g.access[w]=s.access[w];g.addInitializer=function(R){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(R||null))};var C=(0,r[m])(a==="accessor"?{get:u.get,set:u.set}:u[c],g);if(a==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(l=i(C.get))&&(u.get=l),(l=i(C.set))&&(u.set=l),(l=i(C.init))&&n.unshift(l)}else(l=i(C))&&(a==="field"?n.unshift(l):u[c]=l)}d&&Object.defineProperty(d,s.name,u),h=!0}function WT(e,t,r){for(var s=arguments.length>2,n=0;n<t.length;n++)r=s?t[n].call(e,r):t[n].call(e);return s?r:void 0}function QT(e){return typeof e=="symbol"?e:"".concat(e)}function KT(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function JT(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function YT(e,t,r,s){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(u){try{d(s.next(u))}catch(l){i(l)}}function c(u){try{d(s.throw(u))}catch(l){i(l)}}function d(u){u.done?o(u.value):n(u.value).then(a,c)}d((s=s.apply(e,t||[])).next())})}function XT(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,n,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(u){return c([d,u])}}function c(d){if(s)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(s=1,n&&(o=d[0]&2?n.return:d[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,d[1])).done)return o;switch(n=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],n=0}finally{s=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function ZT(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Xl(t,e,r)}function Yl(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function BS(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var s=r.call(e),n,o=[],i;try{for(;(t===void 0||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function eA(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(BS(arguments[t]));return e}function tA(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var s=Array(e),n=0,t=0;t<r;t++)for(var o=arguments[t],i=0,a=o.length;i<a;i++,n++)s[n]=o[i];return s}function rA(e,t,r){if(r||arguments.length===2)for(var s=0,n=t.length,o;s<n;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}function ji(e){return this instanceof ji?(this.v=e,this):new ji(e)}function sA(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(e,t||[]),n,o=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),n[Symbol.asyncIterator]=function(){return this},n;function i(m){return function(g){return Promise.resolve(g).then(m,l)}}function a(m,g){s[m]&&(n[m]=function(w){return new Promise(function(C,R){o.push([m,w,C,R])>1||c(m,w)})},g&&(n[m]=g(n[m])))}function c(m,g){try{d(s[m](g))}catch(w){h(o[0][3],w)}}function d(m){m.value instanceof ji?Promise.resolve(m.value.v).then(u,l):h(o[0][2],m)}function u(m){c("next",m)}function l(m){c("throw",m)}function h(m,g){m(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function nA(e){var t,r;return t={},s("next"),s("throw",function(n){throw n}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(n,o){t[n]=e[n]?function(i){return(r=!r)?{value:ji(e[n](i)),done:!1}:o?o(i):i}:o}}function oA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Yl=="function"?Yl(e):e[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(o){r[o]=e[o]&&function(i){return new Promise(function(a,c){i=e[o](i),n(a,c,i.done,i.value)})}}function n(o,i,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},i)}}function iA(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function aA(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=jS(e),s=0;s<r.length;s++)r[s]!=="default"&&Xl(t,e,r[s]);return x6(t,e),t}function cA(e){return e&&e.__esModule?e:{default:e}}function dA(e,t,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(e):s?s.value:t.get(e)}function uA(e,t,r,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r}function lA(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function fA(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var s,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],r&&(n=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0});return t}function pA(e){function t(o){e.error=e.hasError?new C6(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,s=0;function n(){for(;r=e.stack.pop();)try{if(!r.async&&s===1)return s=0,e.stack.push(r),Promise.resolve().then(n);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(o).then(n,function(i){return t(i),n()})}else s|=1}catch(i){t(i)}if(s===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return n()}function mA(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,n,o,i){return s?t?".jsx":".js":n&&(!o||!i)?r:n+o+"."+i.toLowerCase()+"js"}):e}var US,Jl,Xl,x6,jS,C6,R6,An=S(()=>{US=function(e,t){return US=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},US(e,t)};Jl=function(){return Jl=Object.assign||function(t){for(var r,s=1,n=arguments.length;s<n;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Jl.apply(this,arguments)};Xl=Object.create?(function(e,t,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]});x6=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},jS=function(e){return jS=Object.getOwnPropertyNames||function(t){var r=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[r.length]=s);return r},jS(e)};C6=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var s=new Error(r);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};R6={__extends:BT,__assign:Jl,__rest:HT,__decorate:zT,__param:VT,__esDecorate:GT,__runInitializers:WT,__propKey:QT,__setFunctionName:KT,__metadata:JT,__awaiter:YT,__generator:XT,__createBinding:Xl,__exportStar:ZT,__values:Yl,__read:BS,__spread:eA,__spreadArrays:tA,__spreadArray:rA,__await:ji,__asyncGenerator:sA,__asyncDelegator:nA,__asyncValues:oA,__makeTemplateObject:iA,__importStar:aA,__importDefault:cA,__classPrivateFieldGet:dA,__classPrivateFieldSet:uA,__classPrivateFieldIn:lA,__addDisposableResource:fA,__disposeResources:pA,__rewriteRelativeImportExtension:mA}});var gA=b(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.randomUUID=void 0;var T6=(An(),Q(Tn)),hA=T6.__importDefault(require("crypto"));Zl.randomUUID=hA.default.randomUUID.bind(hA.default)});var HS=b(SA=>{"use strict";var yA=gA(),Dt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),A6=()=>{if(yA.randomUUID)return yA.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,Dt[e[0]]+Dt[e[1]]+Dt[e[2]]+Dt[e[3]]+"-"+Dt[e[4]]+Dt[e[5]]+"-"+Dt[e[6]]+Dt[e[7]]+"-"+Dt[e[8]]+Dt[e[9]]+"-"+Dt[e[10]]+Dt[e[11]]+Dt[e[12]]+Dt[e[13]]+Dt[e[14]]+Dt[e[15]]};SA.v4=A6});var kt,_A=S(()=>{kt=y(HS())});var pt,EA=S(()=>{pt=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};pt.from=e=>e&&typeof e=="object"&&(e instanceof pt||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?pt(String(e)):pt(JSON.stringify(e));pt.fromObject=pt.from});function zS(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var wA=S(()=>{});function Hs(e,t,r){let s=Number(e);if(s<t||s>r)throw new Error(`Value ${s} out of range [${t}, ${r}]`)}var VS,GS,WS,bA,vA,I6,P6,N6,O6,D6,Bc,QS,KS,xA=S(()=>{VS="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",GS="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",WS="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",bA="(\\d?\\d)",vA="(\\d{4})",I6=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),P6=new RegExp(`^${VS}, ${bA} ${GS} ${vA} ${WS} GMT$`),N6=new RegExp(`^${VS}, ${bA}-${GS}-(\\d\\d) ${WS} GMT$`),O6=new RegExp(`^${VS} ${GS} ( [1-9]|\\d\\d) ${WS} ${vA}$`),D6=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Bc=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},QS=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=I6.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,s,n,o,i,a,,c,d]=t;Hs(s,1,12),Hs(n,1,31),Hs(o,0,23),Hs(i,0,59),Hs(a,0,60);let u=new Date(Date.UTC(Number(r),Number(s)-1,Number(n),Number(o),Number(i),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(u.setUTCFullYear(Number(r)),d.toUpperCase()!="Z"){let[,l,h,m]=/([+-])(\d\d):(\d\d)/.exec(d)||[void 0,"+",0,0],g=l==="-"?1:-1;u.setTime(u.getTime()+g*(Number(h)*60*60*1e3+Number(m)*60*1e3))}return u},KS=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,s,n,o,i,a,c;if((c=P6.exec(e))?[,t,r,s,n,o,i,a]=c:(c=N6.exec(e))?([,t,r,s,n,o,i,a]=c,s=(Number(s)+1900).toString()):(c=O6.exec(e))&&([,r,t,n,o,i,a,s]=c),s&&i){let d=Date.UTC(Number(s),D6.indexOf(r),Number(t),Number(n),Number(o),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);Hs(t,1,31),Hs(n,0,23),Hs(o,0,59),Hs(i,0,60);let u=new Date(d);return u.setUTCFullYear(Number(s)),u}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function JS(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let s=e.split(t);if(r===1)return s;let n=[],o="";for(let i=0;i<s.length;i++)o===""?o=s[i]:o+=t+s[i],(i+1)%r===0&&(n.push(o),o="");return o!==""&&n.push(o),n}var CA=S(()=>{});var Hc,RA=S(()=>{Hc=e=>{let t=e.length,r=[],s=!1,n,o=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':n!=="\\"&&(s=!s);break;case",":s||(r.push(e.slice(o,i)),o=i+1);break;default:}n=a}return r.push(e.slice(o)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function YS(e){return new pe(String(e),"bigDecimal")}var TA,pe,AA=S(()=>{TA=/^-?\d*(\.\d+)?$/,pe=class e{string;type;constructor(t,r){if(this.string=t,this.type=r,!TA.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&TA.test(r.string)}}});var IA={};dt(IA,{LazyJsonString:()=>pt,NumericValue:()=>pe,_parseEpochTimestamp:()=>Bc,_parseRfc3339DateTimeWithOffset:()=>QS,_parseRfc7231DateTime:()=>KS,copyDocumentWithTransform:()=>W3,dateToUtcString:()=>Vo,expectBoolean:()=>K3,expectByte:()=>OS,expectFloat32:()=>Wl,expectInt:()=>Y3,expectInt32:()=>PS,expectLong:()=>Lc,expectNonNull:()=>Z3,expectNumber:()=>Mc,expectObject:()=>FT,expectShort:()=>NS,expectString:()=>e6,expectUnion:()=>t6,generateIdempotencyToken:()=>kt.v4,handleFloat:()=>n6,limitedParseDouble:()=>MS,limitedParseFloat:()=>o6,limitedParseFloat32:()=>i6,logger:()=>qc,nv:()=>YS,parseBoolean:()=>Q3,parseEpochTimestamp:()=>jc,parseRfc3339DateTime:()=>l6,parseRfc3339DateTimeWithOffset:()=>$c,parseRfc7231DateTime:()=>Uc,quoteHeader:()=>zS,splitEvery:()=>JS,splitHeader:()=>Hc,strictParseByte:()=>LS,strictParseDouble:()=>Kl,strictParseFloat:()=>r6,strictParseFloat32:()=>kS,strictParseInt:()=>a6,strictParseInt32:()=>c6,strictParseLong:()=>UT,strictParseShort:()=>zo});var ut=S(()=>{qT();jT();_A();EA();qS();wA();xA();CA();RA();AA()});var zt,Bi=S(()=>{zt=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});var PA,XS,NA=S(()=>{PA=y(Fe()),XS=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:s,serdeContext:n,defaultContentType:o}){this.marshaller=t,this.serializer=r,this.deserializer=s,this.serdeContext=n,this.defaultContentType=o}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:s}){let n=this.marshaller,o=r.getEventStreamMember(),i=r.getMemberSchema(o),a=this.serializer,c=this.defaultContentType,d=Symbol("initialRequestMarker"),u={async*[Symbol.asyncIterator](){if(s){let l={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,s);let h=a.flush();yield{[d]:!0,headers:l,body:h}}for await(let l of t)yield l}};return n.serialize(u,l=>{if(l[d])return{headers:l.headers,body:l.body};let h=Object.keys(l).find(N=>N!=="__type")??"",{additionalHeaders:m,body:g,eventType:w,explicitPayloadContentType:C}=this.writeEventBody(h,i,l);return{headers:{":event-type":{type:"string",value:w},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:C??c},...m},body:g}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:s}){let n=this.marshaller,o=r.getEventStreamMember(),a=r.getMemberSchema(o).getMemberSchemas(),c=Symbol("initialResponseMarker"),d=n.deserialize(t.body,async h=>{let m=Object.keys(h).find(g=>g!=="__type")??"";if(m==="initial-response"){let g=await this.deserializer.read(r,h[m].body);return delete g[o],{[c]:!0,...g}}else if(m in a){let g=a[m];return{[m]:await this.deserializer.read(g,h[m].body)}}else return{$unknown:h}}),u=d[Symbol.asyncIterator](),l=await u.next();if(l.done)return d;if(l.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[h,m]of Object.entries(l.value))s[h]=m}return{async*[Symbol.asyncIterator](){for(l?.value?.[c]||(yield l.value);;){let{done:h,value:m}=await u.next();if(h)break;yield m}}}}writeEventBody(t,r,s){let n=this.serializer,o=t,i=null,a,c=r.getSchema()[4].includes(t),d={};if(c){let h=r.getMemberSchema(t);if(h.isStructSchema()){for(let[m,g]of h.structIterator()){let{eventHeader:w,eventPayload:C}=g.getMergedTraits();if(C){i=m;break}else if(w){let R=s[t][m],N="binary";g.isNumericSchema()?(-2)**31<=R&&R<=2**31-1?N="integer":N="long":g.isTimestampSchema()?N="timestamp":g.isStringSchema()?N="string":g.isBooleanSchema()&&(N="boolean"),R!=null&&(d[m]={type:N,value:R},delete s[t][m])}}if(i!==null){let m=h.getMemberSchema(i);m.isBlobSchema()?a="application/octet-stream":m.isStringSchema()&&(a="text/plain"),n.write(m,s[t][i])}else n.write(h,s[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[h,m]=s[t];o=h,n.write(15,m)}let u=n.flush();return{body:typeof u=="string"?(this.serdeContext?.utf8Decoder??PA.fromUtf8)(u):u,eventType:o,explicitPayloadContentType:a,additionalHeaders:d}}}});var OA={};dt(OA,{EventStreamSerde:()=>XS});var DA=S(()=>{NA()});var ef,Go,tf=S(()=>{_e();ef=y(ye());Bi();Go=class extends zt{options;constructor(t){super(),this.options=t}getRequestType(){return ef.HttpRequest}getResponseType(){return ef.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,t.query||(t.query={});for(let[s,n]of r.url.searchParams.entries())t.query[s]=n;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,s){let n=k.of(r.input),o=ps(r.traits??{});if(o.endpoint){let i=o.endpoint?.[0];if(typeof i=="string"){let a=[...n.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let d=s[c];if(typeof d!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);i=i.replace(`{${c}}`,d)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:s})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:s})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(()=>(DA(),OA));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,s,n,o){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}});var kA,MA,Yr,LA=S(()=>{_e();ut();kA=y(ye()),MA=y(Nc());Ul();jl();tf();Yr=class extends Go{async serializeRequest(t,r,s){let n={...r??{}},o=this.serializer,i={},a={},c=await s.endpoint(),d=k.of(t?.input),u=d.getSchema(),l=!1,h,m=new kA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(c){this.updateServiceEndpoint(m,c),this.setHostPrefix(m,t,n);let g=ps(t.traits);if(g.http){m.method=g.http[0];let[w,C]=g.http[1].split("?");m.path=="/"?m.path=w:m.path+=w;let R=new URLSearchParams(C??"");Object.assign(i,Object.fromEntries(R))}}for(let[g,w]of d.structIterator()){let C=w.getMergedTraits()??{},R=n[g];if(R!=null)if(C.httpPayload)w.isStreaming()?w.isStructSchema()?n[g]&&(h=await this.serializeEventStream({eventStream:n[g],requestSchema:d})):h=R:(o.write(w,R),h=o.flush()),delete n[g];else if(C.httpLabel){o.write(w,R);let N=o.flush();m.path.includes(`{${g}+}`)?m.path=m.path.replace(`{${g}+}`,N.split("/").map(ur).join("/")):m.path.includes(`{${g}}`)&&(m.path=m.path.replace(`{${g}}`,ur(N))),delete n[g]}else if(C.httpHeader)o.write(w,R),a[C.httpHeader.toLowerCase()]=String(o.flush()),delete n[g];else if(typeof C.httpPrefixHeaders=="string"){for(let[N,B]of Object.entries(R)){let j=C.httpPrefixHeaders+N;o.write([w.getValueSchema(),{httpHeader:j}],B),a[j.toLowerCase()]=o.flush()}delete n[g]}else C.httpQuery||C.httpQueryParams?(this.serializeQuery(w,R,i),delete n[g]):l=!0}return l&&n&&(o.write(u,n),h=o.flush()),m.headers=a,m.query=i,m.body=h,m}serializeQuery(t,r,s){let n=this.serializer,o=t.getMergedTraits();if(o.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in s)){let c=t.getValueSchema();Object.assign(c.getMergedTraits(),{...o,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(c,a,s)}return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let c of r){n.write([t.getValueSchema(),o],c);let d=n.flush();(i||d!==void 0)&&a.push(d)}s[o.httpQuery]=a}else n.write([t,o],r),s[o.httpQuery]=n.flush()}async deserializeResponse(t,r,s){let n=this.deserializer,o=k.of(t.output),i={};if(s.statusCode>=300){let c=await Jt(s.body,r);throw c.byteLength>0&&Object.assign(i,await n.read(15,c)),await this.handleError(t,r,s,i,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in s.headers){let d=s.headers[c];delete s.headers[c],s.headers[c.toLowerCase()]=d}let a=await this.deserializeHttpMessage(o,r,s,i);if(a.length){let c=await Jt(s.body,r);if(c.byteLength>0){let d=await n.read(o,c);for(let u of a)i[u]=d[u]}}return i.$metadata=this.deserializeMetadata(s),i}async deserializeHttpMessage(t,r,s,n,o){let i;n instanceof Set?i=o:i=n;let a=this.deserializer,c=k.of(t),d=[];for(let[u,l]of c.structIterator()){let h=l.getMemberTraits();if(h.httpPayload){if(l.isStreaming())l.isStructSchema()?i[u]=await this.deserializeEventStream({response:s,responseSchema:c}):i[u]=(0,MA.sdkStreamMixin)(s.body);else if(s.body){let g=await Jt(s.body,r);g.byteLength>0&&(i[u]=await a.read(l,g))}}else if(h.httpHeader){let m=String(h.httpHeader).toLowerCase(),g=s.headers[m];if(g!=null)if(l.isListSchema()){let w=l.getValueSchema();w.getMergedTraits().httpHeader=m;let C;w.isTimestampSchema()&&w.getSchema()===4?C=JS(g,",",2):C=Hc(g);let R=[];for(let N of C)R.push(await a.read(w,N.trim()));i[u]=R}else i[u]=await a.read(l,g)}else if(h.httpPrefixHeaders!==void 0){i[u]={};for(let[m,g]of Object.entries(s.headers))if(m.startsWith(h.httpPrefixHeaders)){let w=l.getValueSchema();w.getMergedTraits().httpHeader=m,i[u][m.slice(h.httpPrefixHeaders.length)]=await a.read(w,g)}}else h.httpResponseCode?i[u]=s.statusCode:d.push(u)}return d}}});var qA,lr,FA=S(()=>{_e();qA=y(ye());Ul();tf();lr=class extends Go{async serializeRequest(t,r,s){let n=this.serializer,o={},i={},a=await s.endpoint(),c=k.of(t?.input),d=c.getSchema(),u,l=new qA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:o,headers:i,body:void 0});a&&(this.updateServiceEndpoint(l,a),this.setHostPrefix(l,t,r));let h={...r};if(r){let m=c.getEventStreamMember();if(m){if(h[m]){let g={};for(let[w,C]of c.structIterator())w!==m&&h[w]&&(n.write(C,h[w]),g[w]=n.flush());u=await this.serializeEventStream({eventStream:h[m],requestSchema:c,initialRequest:g})}}else n.write(d,h),u=n.flush()}return l.headers=i,l.query=o,l.body=u,l.method="POST",l}async deserializeResponse(t,r,s){let n=this.deserializer,o=k.of(t.output),i={};if(s.statusCode>=300){let c=await Jt(s.body,r);throw c.byteLength>0&&Object.assign(i,await n.read(15,c)),await this.handleError(t,r,s,i,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in s.headers){let d=s.headers[c];delete s.headers[c],s.headers[c.toLowerCase()]=d}let a=o.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:s,responseSchema:o,initialResponseContainer:i});else{let c=await Jt(s.body,r);c.byteLength>0&&Object.assign(i,await n.read(o,c))}return i.$metadata=this.deserializeMetadata(s),i}}});var ZS,e_=S(()=>{jl();ZS=(e,t,r,s,n,o)=>{if(t!=null&&t[r]!==void 0){let i=s();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(n,o?i.split("/").map(a=>ur(a)).join("/"):ur(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function Wo(e,t){return new rf(e,t)}var $A,rf,UA=S(()=>{$A=y(ye());e_();rf=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(t,r){this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:s,path:n}=await this.context.endpoint();this.path=n;for(let o of this.resolvePathStack)o(this.path);return new $A.HttpRequest({protocol:r,hostname:this.hostname||t,port:s,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,s,n){return this.resolvePathStack.push(o=>{this.path=ZS(o,this.input,t,r,s,n)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function ot(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:s,httpHeader:n,httpQuery:o}=e.getMergedTraits();return(t.httpBindings?typeof s=="string"||n?6:o||r?5:void 0:void 0)??t.timestampFormat.default}var sf=S(()=>{});var t_,jA,zs,r_=S(()=>{_e();ut();t_=y(qe()),jA=y(Fe());Bi();sf();zs=class extends zt{settings;constructor(t){super(),this.settings=t}read(t,r){let s=k.of(t);if(s.isListSchema())return Hc(r).map(n=>this.read(s.getValueSchema(),n));if(s.isBlobSchema())return(this.serdeContext?.base64Decoder??t_.fromBase64)(r);if(s.isTimestampSchema())switch(ot(s,this.settings)){case 5:return QS(r);case 6:return KS(r);case 7:return Bc(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isStringSchema()){let n=s.getMergedTraits().mediaType,o=r;if(n)return s.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(n==="application/json"||n.endsWith("+json"))&&(o=pt.from(o)),o}return s.isNumericSchema()?Number(r):s.isBigIntegerSchema()?BigInt(r):s.isBigDecimalSchema()?new pe(r,"bigDecimal"):s.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??jA.toUtf8)((this.serdeContext?.base64Decoder??t_.fromBase64)(t))}}});var nf,Xr,BA=S(()=>{_e();nf=y(Fe());Bi();r_();Xr=class extends zt{codecDeserializer;stringDeserializer;constructor(t,r){super(),this.codecDeserializer=t,this.stringDeserializer=new zs(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let s=k.of(t),n=s.getMergedTraits(),o=this.serdeContext?.utf8Encoder??nf.toUtf8;if(n.httpHeader||n.httpResponseCode)return this.stringDeserializer.read(s,o(r));if(n.httpPayload){if(s.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??nf.fromUtf8;return typeof r=="string"?i(r):r}else if(s.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(s,r)}}});var s_,zc,n_=S(()=>{_e();ut();s_=y(qe());Bi();sf();zc=class extends zt{settings;stringBuffer="";constructor(t){super(),this.settings=t}write(t,r){let s=k.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${s.getName(!0)}`);switch(ot(s,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Vo(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??s_.toBase64)(r);return}if(s.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([s.getValueSchema(),s.getMergedTraits()],a);let c=this.flush(),d=s.getValueSchema().isTimestampSchema()?c:zS(c);i!==""&&(i+=", "),i+=d}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let n=s.getMergedTraits().mediaType,o=r;if(n&&((n==="application/json"||n.endsWith("+json"))&&(o=pt.from(o)),s.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??s_.toBase64)(o.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var Zr,HA=S(()=>{_e();n_();Zr=class{codecSerializer;stringSerializer;buffer;constructor(t,r,s=new zc(r)){this.codecSerializer=t,this.stringSerializer=s}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let s=k.of(t),n=s.getMergedTraits();if(n.httpHeader||n.httpLabel||n.httpQuery){this.stringSerializer.write(s,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(s,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var zA={};dt(zA,{FromStringShapeDeserializer:()=>zs,HttpBindingProtocol:()=>Yr,HttpInterceptingShapeDeserializer:()=>Xr,HttpInterceptingShapeSerializer:()=>Zr,HttpProtocol:()=>Go,RequestBuilder:()=>rf,RpcProtocol:()=>lr,SerdeContext:()=>zt,ToStringShapeSerializer:()=>zc,collectBody:()=>Jt,determineTimestampFormat:()=>ot,extendedEncodeURIComponent:()=>ur,requestBuilder:()=>Wo,resolvedPath:()=>ZS});var ze=S(()=>{Ul();jl();LA();tf();FA();UA();e_();r_();BA();HA();n_();sf();Bi()});var VA=S(()=>{ze()});function k6(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var GA=S(()=>{});var es,WA=S(()=>{es=class{authSchemes=new Map;constructor(t){for(let[r,s]of Object.entries(t))s!==void 0&&this.authSchemes.set(r,s)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var QA,o_,i_,KA=S(()=>{QA=y(ye()),o_=y(vn()),i_=class{async sign(t,r,s){if(!s)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!s.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!s.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let n=QA.HttpRequest.clone(t);if(s.in===o_.HttpApiKeyAuthLocation.QUERY)n.query[s.name]=r.apiKey;else if(s.in===o_.HttpApiKeyAuthLocation.HEADER)n.headers[s.name]=s.scheme?`${s.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+s.in+"`");return n}}});var JA,a_,YA=S(()=>{JA=y(ye()),a_=class{async sign(t,r,s){let n=JA.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return n.headers.Authorization=`Bearer ${r.token}`,n}}});var Vt,XA=S(()=>{Vt=class{async sign(t,r,s){return t}}});var ZA=S(()=>{KA();YA();XA()});var eI,M6,Vc,Hi,Gc,tI=S(()=>{eI=e=>function(r){return Hi(r)&&r.expiration.getTime()-Date.now()<e},M6=3e5,Vc=eI(3e5),Hi=e=>e.expiration!==void 0,Gc=(e,t,r)=>{if(e===void 0)return;let s=typeof e!="function"?async()=>Promise.resolve(e):e,n,o,i,a=!1,c=async d=>{o||(o=s(d));try{n=await o,i=!0,a=!1}finally{o=void 0}return n};return t===void 0?async d=>((!i||d?.forceRefresh)&&(n=await c(d)),n):async d=>((!i||d?.forceRefresh)&&(n=await c(d)),a?n:r(n)?(t(n)&&await c(d),n):(a=!0,n))}});var rI=S(()=>{WA();ZA();tI()});var hs={};dt(hs,{DefaultIdentityProviderConfig:()=>es,EXPIRATION_MS:()=>M6,HttpApiKeyAuthSigner:()=>i_,HttpBearerAuthSigner:()=>a_,NoAuthSigner:()=>Vt,createIsIdentityExpiredFunction:()=>eI,createPaginator:()=>yR,doesIdentityRequireRefresh:()=>Hi,getHttpAuthSchemeEndpointRuleSetPlugin:()=>$s,getHttpAuthSchemePlugin:()=>gV,getHttpSigningPlugin:()=>Us,getSmithyContext:()=>uV,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>tR,httpAuthSchemeMiddleware:()=>Ac,httpAuthSchemeMiddlewareOptions:()=>cR,httpSigningMiddleware:()=>Wy,httpSigningMiddlewareOptions:()=>pR,isIdentityExpired:()=>Vc,memoizeIdentityProvider:()=>Gc,normalizeProvider:()=>jt,requestBuilder:()=>Wo,setFeature:()=>k6});var Me=S(()=>{JC();uR();hR();gR();SR();VA();GA();rI()});var ts=b(Qo=>{"use strict";var d_=vn(),u_=class{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let s=this.hash(t);if(s===!1)return r();if(!this.data.has(s)){if(this.data.size>this.capacity+10){let n=this.data.keys(),o=0;for(;;){let{value:i,done:a}=n.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(s,r())}return this.data.get(s)}size(){return this.data.size}hash(t){let r="",{parameters:s}=this;if(s.length===0)return!1;for(let n of s){let o=String(t[n]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}},L6=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),sI=e=>L6.test(e)||e.startsWith("[")&&e.endsWith("]"),q6=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),f_=(e,t=!1)=>{if(!t)return q6.test(e);let r=e.split(".");for(let s of r)if(!f_(s))return!1;return!0},l_={},Wc="endpoints";function In(e){return typeof e!="object"||e==null?e:"ref"in e?`$${In(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(In).join(", ")})`:JSON.stringify(e,null,2)}var Mt=class extends Error{constructor(t){super(t),this.name="EndpointError"}},F6=(e,t)=>e===t,$6=e=>{let t=e.split("."),r=[];for(let s of t){let n=s.indexOf("[");if(n!==-1){if(s.indexOf("]")!==s.length-1)throw new Mt(`Path: '${e}' does not end with ']'`);let o=s.slice(n+1,-1);if(Number.isNaN(parseInt(o)))throw new Mt(`Invalid array index: '${o}' in path: '${e}'`);n!==0&&r.push(s.slice(0,n)),r.push(o)}else r.push(s)}return r},nI=(e,t)=>$6(t).reduce((r,s)=>{if(typeof r!="object")throw new Mt(`Index '${s}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(s)]:r[s]},e),U6=e=>e!=null,j6=e=>!e,c_={[d_.EndpointURLScheme.HTTP]:80,[d_.EndpointURLScheme.HTTPS]:443},B6=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:h,port:m,protocol:g="",path:w="",query:C={}}=e,R=new URL(`${g}//${h}${m?`:${m}`:""}${w}`);return R.search=Object.entries(C).map(([N,B])=>`${N}=${B}`).join("&"),R}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:s,hostname:n,pathname:o,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(d_.EndpointURLScheme).includes(c))return null;let d=sI(n),u=r.includes(`${s}:${c_[c]}`)||typeof e=="string"&&e.includes(`${s}:${c_[c]}`),l=`${s}${u?`:${c_[c]}`:""}`;return{scheme:c,authority:l,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:d}},H6=(e,t)=>e===t,z6=(e,t,r,s)=>t>=r||e.length<r?null:s?e.substring(e.length-r,e.length-t):e.substring(t,r),V6=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),G6={booleanEquals:F6,getAttr:nI,isSet:U6,isValidHostLabel:f_,not:j6,parseURL:B6,stringEquals:H6,substring:z6,uriEncode:V6},oI=(e,t)=>{let r=[],s={...t.endpointParams,...t.referenceRecord},n=0;for(;n<e.length;){let o=e.indexOf("{",n);if(o===-1){r.push(e.slice(n));break}r.push(e.slice(n,o));let i=e.indexOf("}",o);if(i===-1){r.push(e.slice(o));break}e[o+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(o+1,i)),n=i+2);let a=e.substring(o+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(nI(s[c],d))}else r.push(s[a]);n=i+1}return r.join("")},W6=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],of=(e,t,r)=>{if(typeof e=="string")return oI(e,r);if(e.fn)return aI.callFunction(e,r);if(e.ref)return W6(e,r);throw new Mt(`'${t}': ${String(e)} is not a string, function or reference.`)},iI=({fn:e,argv:t},r)=>{let s=t.map(o=>["boolean","number"].includes(typeof o)?o:aI.evaluateExpression(o,"arg",r)),n=e.split(".");return n[0]in l_&&n[1]!=null?l_[n[0]][n[1]](...s):G6[e](...s)},aI={evaluateExpression:of,callFunction:iI},Q6=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new Mt(`'${e}' is already defined in Reference Record.`);let s=iI(t,r);return r.logger?.debug?.(`${Wc} evaluateCondition: ${In(t)} = ${In(s)}`),{result:s===""?!0:!!s,...e!=null&&{toAssign:{name:e,value:s}}}},p_=(e=[],t)=>{let r={};for(let s of e){let{result:n,toAssign:o}=Q6(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!n)return{result:n};o&&(r[o.name]=o.value,t.logger?.debug?.(`${Wc} assign: ${o.name} := ${In(o.value)}`))}return{result:!0,referenceRecord:r}},K6=(e,t)=>Object.entries(e).reduce((r,[s,n])=>({...r,[s]:n.map(o=>{let i=of(o,"Header value entry",t);if(typeof i!="string")throw new Mt(`Header '${s}' value '${i}' is not a string`);return i})}),{}),cI=(e,t)=>Object.entries(e).reduce((r,[s,n])=>({...r,[s]:uI.getEndpointProperty(n,t)}),{}),dI=(e,t)=>{if(Array.isArray(e))return e.map(r=>dI(r,t));switch(typeof e){case"string":return oI(e,t);case"object":if(e===null)throw new Mt(`Unexpected endpoint property: ${e}`);return uI.getEndpointProperties(e,t);case"boolean":return e;default:throw new Mt(`Unexpected endpoint property type: ${typeof e}`)}},uI={getEndpointProperty:dI,getEndpointProperties:cI},J6=(e,t)=>{let r=of(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(s){throw console.error(`Failed to construct URL with ${r}`,s),s}throw new Mt(`Endpoint URL must be a string, got ${typeof r}`)},Y6=(e,t)=>{let{conditions:r,endpoint:s}=e,{result:n,referenceRecord:o}=p_(r,t);if(!n)return;let i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:a,properties:c,headers:d}=s;return t.logger?.debug?.(`${Wc} Resolving endpoint from template: ${In(s)}`),{...d!=null&&{headers:K6(d,i)},...c!=null&&{properties:cI(c,i)},url:J6(a,i)}},X6=(e,t)=>{let{conditions:r,error:s}=e,{result:n,referenceRecord:o}=p_(r,t);if(n)throw new Mt(of(s,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},lI=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let s=Y6(r,t);if(s)return s}else if(r.type==="error")X6(r,t);else if(r.type==="tree"){let s=fI.evaluateTreeRule(r,t);if(s)return s}else throw new Mt(`Unknown endpoint rule: ${r}`);throw new Mt("Rules evaluation failed")},Z6=(e,t)=>{let{conditions:r,rules:s}=e,{result:n,referenceRecord:o}=p_(r,t);if(n)return fI.evaluateRules(s,{...t,referenceRecord:{...t.referenceRecord,...o}})},fI={evaluateRules:lI,evaluateTreeRule:Z6},eG=(e,t)=>{let{endpointParams:r,logger:s}=t,{parameters:n,rules:o}=e;t.logger?.debug?.(`${Wc} Initial EndpointParams: ${In(r)}`);let i=Object.entries(n).filter(([,d])=>d.default!=null).map(([d,u])=>[d,u.default]);if(i.length>0)for(let[d,u]of i)r[d]=r[d]??u;let a=Object.entries(n).filter(([,d])=>d.required).map(([d])=>d);for(let d of a)if(r[d]==null)throw new Mt(`Missing required parameter: '${d}'`);let c=lI(o,{endpointParams:r,logger:s,referenceRecord:{}});return t.logger?.debug?.(`${Wc} Resolved endpoint: ${In(c)}`),c};Qo.EndpointCache=u_;Qo.EndpointError=Mt;Qo.customEndpointFunctions=l_;Qo.isIpAddress=sI;Qo.isValidHostLabel=f_;Qo.resolveEndpoint=eG});var mI=b(pI=>{"use strict";function tG(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[s,n=null]=r.split("=");s=decodeURIComponent(s),n&&(n=decodeURIComponent(n)),s in t?Array.isArray(t[s])?t[s].push(n):t[s]=[t[s],n]:t[s]=n}return t}pI.parseQueryString=tG});var vr=b(gI=>{"use strict";var rG=mI(),hI=e=>{if(typeof e=="string")return hI(new URL(e));let{hostname:t,pathname:r,port:s,protocol:n,search:o}=e,i;return o&&(i=rG.parseQueryString(o)),{hostname:t,port:s?parseInt(s):void 0,protocol:n,path:r,query:i}};gI.parseUrl=hI});var ss=b(rs=>{"use strict";var zi=ts(),sG=vr(),SI=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!SI(r))return!1;return!0}return!(!zi.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||zi.isIpAddress(e))},yI=":",nG="/",oG=e=>{let t=e.split(yI);if(t.length<6)return null;let[r,s,n,o,i,...a]=t;if(r!=="arn"||s===""||n===""||a.join(yI)==="")return null;let c=a.map(d=>d.split(nG)).flat();return{partition:s,service:n,region:o,accountId:i,resourceId:c}},iG=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],aG="1.1",_I={partitions:iG,version:aG},EI=_I,wI="",bI=e=>{let{partitions:t}=EI;for(let s of t){let{regions:n,outputs:o}=s;for(let[i,a]of Object.entries(n))if(i===e)return{...o,...a}}for(let s of t){let{regionRegex:n,outputs:o}=s;if(new RegExp(n).test(e))return{...o}}let r=t.find(s=>s.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},vI=(e,t="")=>{EI=e,wI=t},cG=()=>{vI(_I,"")},dG=()=>wI,xI={isVirtualHostableS3Bucket:SI,parseArn:oG,partition:bI};zi.customEndpointFunctions.aws=xI;var uG=e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>CI(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},CI=e=>sG.parseUrl(e.url);Object.defineProperty(rs,"EndpointError",{enumerable:!0,get:function(){return zi.EndpointError}});Object.defineProperty(rs,"isIpAddress",{enumerable:!0,get:function(){return zi.isIpAddress}});Object.defineProperty(rs,"resolveEndpoint",{enumerable:!0,get:function(){return zi.resolveEndpoint}});rs.awsEndpointFunctions=xI;rs.getUserAgentPrefix=dG;rs.partition=bI;rs.resolveDefaultAwsRegionalEndpointsConfig=uG;rs.setPartitionInfo=vI;rs.toEndpointV1=CI;rs.useDefaultPartitionInfo=cG});var af,Vi,RI=S(()=>{af={warningEmitted:!1},Vi=e=>{e&&!af.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(af.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function Pn(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var TI=S(()=>{});function AI(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var II=S(()=>{});function PI(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var NI=S(()=>{});var Nn={};dt(Nn,{emitWarningIfUnsupportedVersion:()=>Vi,setCredentialFeature:()=>Pn,setFeature:()=>AI,setTokenFeature:()=>PI,state:()=>af});var ns=S(()=>{RI();TI();II();NI()});var OI,m_,DI=S(()=>{OI=y(ye()),m_=e=>OI.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var Gi,h_=S(()=>{Gi=e=>new Date(Date.now()+e)});var kI,MI=S(()=>{h_();kI=(e,t)=>Math.abs(Gi(t).getTime()-e)>=3e5});var g_,LI=S(()=>{MI();g_=(e,t)=>{let r=Date.parse(e);return kI(r,t)?r-Date.now():t}});var y_=S(()=>{DI();h_();LI()});var qI,Qc,Wi,Yt,S_,__=S(()=>{qI=y(ye());y_();Qc=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Wi=async e=>{let t=Qc("context",e.context),r=Qc("config",e.config),s=t.endpointV2?.properties?.authSchemes?.[0],o=await Qc("signer",r.signer)(s),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}},Yt=class{async sign(t,r,s){if(!qI.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let n=await Wi(s),{config:o,signer:i}=n,{signingRegion:a,signingName:c}=n,d=s.context;if(d?.authSchemes?.length??!1){let[l,h]=d.authSchemes;l?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await i.sign(t,{signingDate:Gi(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let s=r.ServerTime??m_(r.$response);if(s){let n=Qc("config",t.config),o=n.systemClockOffset;n.systemClockOffset=g_(s,n.systemClockOffset),n.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let s=m_(t);if(s){let n=Qc("config",r.config);n.systemClockOffset=g_(s,n.systemClockOffset)}}},S_=Yt});var FI,Kc,$I=S(()=>{FI=y(ye());y_();__();Kc=class extends Yt{async sign(t,r,s){if(!FI.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:n,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}=await Wi(s),u=(await n.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(t,{signingDate:Gi(n.systemClockOffset),signingRegion:u,signingService:c})}}});var E_,UI=S(()=>{E_=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var cf,w_=S(()=>{cf=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var jI,BI,Qi,HI=S(()=>{UI();w_();jI="AWS_AUTH_SCHEME_PREFERENCE",BI="auth_scheme_preference",Qi={environmentVariableSelector:(e,t)=>{if(t?.signingName&&cf(t.signingName)in e)return["httpBearerAuth"];if(jI in e)return E_(e[jI])},configFileSelector:e=>{if(BI in e)return E_(e[BI])},default:[]}});var Le=b(Ko=>{"use strict";var Ki=class e extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let s,n=!0;typeof r=="boolean"?(s=void 0,n=r):r!=null&&typeof r=="object"&&(s=r.logger,n=r.tryNextLink??!0),super(t),this.tryNextLink=n,Object.setPrototypeOf(this,e.prototype),s?.debug?.(`@smithy/property-provider ${n?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},b_=class e extends Ki{name="CredentialsProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},v_=class e extends Ki{name="TokenProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},lG=(...e)=>async()=>{if(e.length===0)throw new Ki("No providers in chain");let t;for(let r of e)try{return await r()}catch(s){if(t=s,s?.tryNextLink)continue;throw s}throw t},fG=e=>()=>Promise.resolve(e),pG=(e,t,r)=>{let s,n,o,i=!1,a=async()=>{n||(n=e());try{s=await n,o=!0,i=!1}finally{n=void 0}return s};return t===void 0?async c=>((!o||c?.forceRefresh)&&(s=await a()),s):async c=>((!o||c?.forceRefresh)&&(s=await a()),i?s:r&&!r(s)?(i=!0,s):(t(s)&&await a(),s))};Ko.CredentialsProviderError=b_;Ko.ProviderError=Ki;Ko.TokenProviderError=v_;Ko.chain=lG;Ko.fromStatic=fG;Ko.memoize=pG});var x_,zI,VI,GI=S(()=>{Me();x_=y(Le()),zI=e=>(e.sigv4aSigningRegionSet=jt(e.sigv4aSigningRegionSet),e),VI={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new x_.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new x_.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var L_=b(ue=>{"use strict";var On=Ll(),Jo=Fe(),mG=Ky(),JI=ye(),WI=gt(),df=cS(),YI="X-Amz-Algorithm",XI="X-Amz-Credential",P_="X-Amz-Date",ZI="X-Amz-SignedHeaders",eP="X-Amz-Expires",N_="X-Amz-Signature",O_="X-Amz-Security-Token",hG="X-Amz-Region-Set",D_="authorization",k_=P_.toLowerCase(),tP="date",rP=[D_,k_,tP],sP=N_.toLowerCase(),mf="x-amz-content-sha256",nP=O_.toLowerCase(),gG="host",oP={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},iP=/^proxy-/,aP=/^sec-/,yG=[/^proxy-/i,/^sec-/i],uf="AWS4-HMAC-SHA256",SG="AWS4-ECDSA-P256-SHA256",cP="AWS4-HMAC-SHA256-PAYLOAD",dP="UNSIGNED-PAYLOAD",uP=50,M_="aws4_request",lP=3600*24*7,Ji={},lf=[],ff=(e,t,r)=>`${e}/${t}/${r}/${M_}`,fP=async(e,t,r,s,n)=>{let o=await QI(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${s}:${n}:${On.toHex(o)}:${t.sessionToken}`;if(i in Ji)return Ji[i];for(lf.push(i);lf.length>uP;)delete Ji[lf.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,s,n,M_])a=await QI(e,a,c);return Ji[i]=a},_G=()=>{lf.length=0,Object.keys(Ji).forEach(e=>{delete Ji[e]})},QI=(e,t,r)=>{let s=new e(t);return s.update(Jo.toUint8Array(r)),s.digest()},C_=({headers:e},t,r)=>{let s={};for(let n of Object.keys(e).sort()){if(e[n]==null)continue;let o=n.toLowerCase();(o in oP||t?.has(o)||iP.test(o)||aP.test(o))&&(!r||r&&!r.has(o))||(s[o]=e[n].trim().replace(/\s+/g," "))}return s},pf=async({headers:e,body:t},r)=>{for(let s of Object.keys(e))if(s.toLowerCase()===mf)return e[s];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||mG.isArrayBuffer(t)){let s=new r;return s.update(Jo.toUint8Array(t)),On.toHex(await s.digest())}return dP},R_=class{format(t){let r=[];for(let o of Object.keys(t)){let i=Jo.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[o]))}let s=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),n=0;for(let o of r)s.set(o,n),n+=o.byteLength;return s}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let s=new DataView(new ArrayBuffer(5));return s.setUint8(0,4),s.setInt32(1,t.value,!1),new Uint8Array(s.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(t.value.bytes,1),n;case"binary":let o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(t.value,3),i;case"string":let a=Jo.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let u=new Uint8Array(9);return u[0]=8,u.set(T_.fromNumber(t.value.valueOf()).bytes,1),u;case"uuid":if(!EG.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let l=new Uint8Array(17);return l[0]=9,l.set(On.fromHex(t.value.replace(/\-/g,"")),1),l}}},EG=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,T_=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let s=7,n=Math.abs(Math.round(t));s>-1&&n>0;s--,n/=256)r[s]=n;return t<0&&KI(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&KI(t),parseInt(On.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function KI(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var pP=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},mP=(e,t={})=>{let{headers:r,query:s={}}=JI.HttpRequest.clone(e);for(let n of Object.keys(r)){let o=n.toLowerCase();(o.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(o)||t.hoistableHeaders?.has(o))&&(s[n]=r[n],delete r[n])}return{...e,headers:r,query:s}},A_=e=>{e=JI.HttpRequest.clone(e);for(let t of Object.keys(e.headers))rP.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},hP=({query:e={}})=>{let t=[],r={};for(let s of Object.keys(e)){if(s.toLowerCase()===sP)continue;let n=df.escapeUri(s);t.push(n);let o=e[s];typeof o=="string"?r[n]=`${n}=${df.escapeUri(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((i,a)=>i.concat([`${n}=${df.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(s=>r[s]).filter(s=>s).join("&")},wG=e=>bG(e).toISOString().replace(/\.\d{3}Z$/,"Z"),bG=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,hf=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:s,service:n,sha256:o,uriEscapePath:i=!0}){this.service=n,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=WI.normalizeProvider(s),this.credentialProvider=WI.normalizeProvider(r)}createCanonicalRequest(t,r,s){let n=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${hP(t)}
${n.map(o=>`${o}:${r[o]}`).join(`
`)}

${n.join(";")}
${s}`}async createStringToSign(t,r,s,n){let o=new this.sha256;o.update(Jo.toUint8Array(s));let i=await o.digest();return`${n}
${t}
${r}
${On.toHex(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let o of t.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let s=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return df.escapeUri(s).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=wG(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},I_=class extends hf{headerFormatter=new R_;constructor({applyChecksum:t,credentials:r,region:s,service:n,sha256:o,uriEscapePath:i=!0}){super({applyChecksum:t,credentials:r,region:s,service:n,sha256:o,uriEscapePath:i})}async presign(t,r={}){let{signingDate:s=new Date,expiresIn:n=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:d,signingService:u}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let h=d??await this.regionProvider(),{longDate:m,shortDate:g}=this.formatDate(s);if(n>lP)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let w=ff(g,h,u??this.service),C=mP(A_(t),{unhoistableHeaders:i,hoistableHeaders:c});l.sessionToken&&(C.query[O_]=l.sessionToken),C.query[YI]=uf,C.query[XI]=`${l.accessKeyId}/${w}`,C.query[P_]=m,C.query[eP]=n.toString(10);let R=C_(C,o,a);return C.query[ZI]=this.getCanonicalHeaderList(R),C.query[N_]=await this.getSignature(m,w,this.getSigningKey(l,h,g,u),this.createCanonicalRequest(C,R,await pf(t,this.sha256))),C}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:s=new Date,priorSignature:n,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:c,longDate:d}=this.formatDate(s),u=ff(c,a,i??this.service),l=await pf({headers:{},body:r},this.sha256),h=new this.sha256;h.update(t);let m=On.toHex(await h.digest()),g=[cP,d,u,n,m,l].join(`
`);return this.signString(g,{signingDate:s,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:s,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:s,signingService:n,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:s,signingService:n}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=s??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(o,i,a,n));return c.update(Jo.toUint8Array(t)),On.toHex(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:s,unsignableHeaders:n,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=o??await this.regionProvider(),d=A_(t),{longDate:u,shortDate:l}=this.formatDate(r),h=ff(l,c,i??this.service);d.headers[k_]=u,a.sessionToken&&(d.headers[nP]=a.sessionToken);let m=await pf(d,this.sha256);!pP(mf,d.headers)&&this.applyChecksum&&(d.headers[mf]=m);let g=C_(d,n,s),w=await this.getSignature(u,h,this.getSigningKey(a,c,l,i),this.createCanonicalRequest(d,g,m));return d.headers[D_]=`${uf} Credential=${a.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(g)}, Signature=${w}`,d}async getSignature(t,r,s,n){let o=await this.createStringToSign(t,r,n,uf),i=new this.sha256(await s);return i.update(Jo.toUint8Array(o)),On.toHex(await i.digest())}getSigningKey(t,r,s,n){return fP(this.sha256,t,s,r,n||this.service)}},vG={SignatureV4a:null};ue.ALGORITHM_IDENTIFIER=uf;ue.ALGORITHM_IDENTIFIER_V4A=SG;ue.ALGORITHM_QUERY_PARAM=YI;ue.ALWAYS_UNSIGNABLE_HEADERS=oP;ue.AMZ_DATE_HEADER=k_;ue.AMZ_DATE_QUERY_PARAM=P_;ue.AUTH_HEADER=D_;ue.CREDENTIAL_QUERY_PARAM=XI;ue.DATE_HEADER=tP;ue.EVENT_ALGORITHM_IDENTIFIER=cP;ue.EXPIRES_QUERY_PARAM=eP;ue.GENERATED_HEADERS=rP;ue.HOST_HEADER=gG;ue.KEY_TYPE_IDENTIFIER=M_;ue.MAX_CACHE_SIZE=uP;ue.MAX_PRESIGNED_TTL=lP;ue.PROXY_HEADER_PATTERN=iP;ue.REGION_SET_PARAM=hG;ue.SEC_HEADER_PATTERN=aP;ue.SHA256_HEADER=mf;ue.SIGNATURE_HEADER=sP;ue.SIGNATURE_QUERY_PARAM=N_;ue.SIGNED_HEADERS_QUERY_PARAM=ZI;ue.SignatureV4=I_;ue.SignatureV4Base=hf;ue.TOKEN_HEADER=nP;ue.TOKEN_QUERY_PARAM=O_;ue.UNSIGNABLE_PATTERNS=yG;ue.UNSIGNED_PAYLOAD=dP;ue.clearCredentialCache=_G;ue.createScope=ff;ue.getCanonicalHeaders=C_;ue.getCanonicalQuery=hP;ue.getPayloadHash=pf;ue.getSigningKey=fP;ue.hasHeader=pP;ue.moveHeadersToQuery=mP;ue.prepareRequest=A_;ue.signatureV4aContainer=vG});function xG(e,{credentials:t,credentialDefaultProvider:r}){let s;return t?t?.memoized?s=t:s=Gc(t,Vc,Hi):r?s=jt(r(Object.assign({},e,{parentClientConfig:e}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function CG(e,t){if(t.configBound)return t;let r=async s=>t({...s,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var q_,Yo,gP,yP=S(()=>{ns();Me();q_=y(L_()),Yo=e=>{let t=e.credentials,r=!!e.credentials,s;Object.defineProperty(e,"credentials",{set(d){d&&d!==t&&d!==s&&(r=!0),t=d;let u=xG(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),l=CG(e,u);r&&!l.attributed?(s=async h=>l(h).then(m=>Pn(m,"CREDENTIALS_CODE","e")),s.memoized=l.memoized,s.configBound=l.configBound,s.attributed=!0):s=l},get(){return s},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=jt(e.signer):e.regionInfoProvider?a=()=>jt(e.region)().then(async d=>[await e.regionInfoProvider(d,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},d]).then(([d,u])=>{let{signingRegion:l,signingService:h}=d;e.signingRegion=e.signingRegion||l||u,e.signingName=e.signingName||h||e.serviceId;let m={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},g=e.signerConstructor||q_.SignatureV4;return new g(m)}):a=async d=>{d=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await jt(e.region)(),properties:{}},d);let u=d.signingRegion,l=d.signingName;e.signingRegion=e.signingRegion||u,e.signingName=e.signingName||l||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},m=e.signerConstructor||q_.SignatureV4;return new m(h)},Object.assign(e,{systemClockOffset:o,signingEscapePath:n,signer:a})},gP=Yo});var SP=S(()=>{__();$I();HI();GI();yP()});var _P={};dt(_P,{AWSSDKSigV4Signer:()=>S_,AwsSdkSigV4ASigner:()=>Kc,AwsSdkSigV4Signer:()=>Yt,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Qi,NODE_SIGV4A_CONFIG_OPTIONS:()=>VI,getBearerTokenEnvKey:()=>cf,resolveAWSSDKSigV4Config:()=>gP,resolveAwsSdkSigV4AConfig:()=>zI,resolveAwsSdkSigV4Config:()=>Yo,validateSigningProperties:()=>Wi});var F_=S(()=>{SP();w_()});function Dn(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function gf(e){return e[$_]=!0,e}var $_,yf=S(()=>{$_=Symbol("@smithy/core/cbor::tagSymbol")});function bP(e){Oe=e,Gs=new DataView(Oe.buffer,Oe.byteOffset,Oe.byteLength)}function gs(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(Oe[e]&224)>>5,s=Oe[e]&31;switch(r){case 0:case 1:case 6:let n,o;if(s<24)n=s,o=1;else switch(s){case 24:case 25:case 26:case 27:let i=xP[s],a=i+1;if(o=a,t-e<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let c=e+1;i===1?n=Oe[c]:i===2?n=Gs.getUint16(c):i===4?n=Gs.getUint32(c):n=Gs.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${s}.`)}if(r===0)return me=o,U_(n);if(r===1){let i;return typeof n=="bigint"?i=BigInt(-1)-n:i=-1-n,me=o,U_(i)}else if(s===2||s===3){let i=Zc(e+o,t),a=BigInt(0),c=e+o+me;for(let d=c;d<c+i;++d)a=a<<BigInt(8)|BigInt(Oe[d]);return me=o+me+i,s===3?-a-BigInt(1):a}else if(s===4){let i=gs(e+o,t),[a,c]=i,d=c<0?-1:1,u="0".repeat(Math.abs(a)+1)+String(BigInt(d)*BigInt(c)),l,h=c<0?"-":"";return l=a===0?u:u.slice(0,u.length+a)+"."+u.slice(a),l=l.replace(/^0+/g,""),l===""&&(l="0"),l[0]==="."&&(l="0"+l),l=h+l,me=o+me,YS(l)}else{let i=gs(e+o,t);return me=o+me,gf({tag:U_(n),value:i})}case 3:case 5:case 4:case 2:if(s===31)switch(r){case 3:return OG(e,t);case 5:return qG(e,t);case 4:return MG(e,t);case 2:return DG(e,t)}else switch(r){case 3:return NG(e,t);case 5:return LG(e,t);case 4:return kG(e,t);case 2:return G_(e,t)}default:return FG(e,t)}}function vP(e,t,r){return AG&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):EP?EP.decode(e.subarray(t,r)):(0,wP.toUtf8)(e.subarray(t,r))}function IG(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function PG(e,t){let r=e>>7,s=(e&124)>>2,n=(e&3)<<8|t,o=r===0?1:-1,i,a;if(s===0){if(n===0)return 0;i=Math.pow(2,-14),a=0}else{if(s===31)return n===0?o*(1/0):NaN;i=Math.pow(2,s-15),a=1}return a+=n/1024,o*(i*a)}function Zc(e,t){let r=Oe[e]&31;if(r<24)return me=1,r;if(r===24||r===25||r===26||r===27){let s=xP[r];if(me=s+1,t-e<me)throw new Error(`countLength ${s} greater than remaining buf len.`);let n=e+1;return s===1?Oe[n]:s===2?Gs.getUint16(n):s===4?Gs.getUint32(n):IG(Gs.getBigUint64(n))}throw new Error(`unexpected minor value ${r}.`)}function NG(e,t){let r=Zc(e,t),s=me;if(e+=s,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let n=vP(Oe,e,e+r);return me=s+r,n}function OG(e,t){e+=1;let r=[];for(let s=e;e<t;){if(Oe[e]===255){let c=Dn(r.length);return c.set(r,0),me=e-s+2,vP(c,0,c.length)}let n=(Oe[e]&224)>>5,o=Oe[e]&31;if(n!==3)throw new Error(`unexpected major type ${n} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=G_(e,t);e+=me;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function G_(e,t){let r=Zc(e,t),s=me;if(e+=s,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let n=Oe.subarray(e,e+r);return me=s+r,n}function DG(e,t){e+=1;let r=[];for(let s=e;e<t;){if(Oe[e]===255){let c=Dn(r.length);return c.set(r,0),me=e-s+2,c}let n=(Oe[e]&224)>>5,o=Oe[e]&31;if(n!==2)throw new Error(`unexpected major type ${n} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=G_(e,t);e+=me;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function kG(e,t){let r=Zc(e,t),s=me;e+=s;let n=e,o=Array(r);for(let i=0;i<r;++i){let a=gs(e,t),c=me;o[i]=a,e+=c}return me=s+(e-n),o}function MG(e,t){e+=1;let r=[];for(let s=e;e<t;){if(Oe[e]===255)return me=e-s+2,r;let n=gs(e,t);e+=me,r.push(n)}throw new Error("expected break marker.")}function LG(e,t){let r=Zc(e,t),s=me;e+=s;let n=e,o={};for(let i=0;i<r;++i){if(e>=t)throw new Error("unexpected end of map payload.");let a=(Oe[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let c=gs(e,t);e+=me;let d=gs(e,t);e+=me,o[c]=d}return me=s+(e-n),o}function qG(e,t){e+=1;let r=e,s={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(Oe[e]===255)return me=e-r+2,s;let n=(Oe[e]&224)>>5;if(n!==3)throw new Error(`unexpected major type ${n} for map key.`);let o=gs(e,t);e+=me;let i=gs(e,t);e+=me,s[o]=i}throw new Error("expected break marker.")}function FG(e,t){let r=Oe[e]&31;switch(r){case 21:case 20:return me=1,r===21;case 22:return me=1,null;case 23:return me=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return me=3,PG(Oe[e+1],Oe[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return me=5,Gs.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return me=9,Gs.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function U_(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var wP,TG,AG,Oe,Gs,EP,me,xP,CP=S(()=>{ut();wP=y(Fe());yf();TG=typeof TextDecoder<"u",AG=typeof Buffer<"u",Oe=Dn(0),Gs=new DataView(Oe.buffer,Oe.byteOffset,Oe.byteLength),EP=TG?new TextDecoder:null,me=0;xP={24:1,25:2,26:4,27:8}});function Q_(e){se.byteLength-K<e&&(K<16e6?_f(Math.max(se.byteLength*4,se.byteLength+e)):_f(se.byteLength+e+16e6))}function K_(){let e=Dn(K);return e.set(se.subarray(0,K),0),K=0,e}function _f(e){let t=se;se=Dn(e),t&&(t.copy?t.copy(se,0,0,t.byteLength):se.set(t,0)),Ks=new DataView(se.buffer,se.byteOffset,se.byteLength)}function Qs(e,t){t<24?se[K++]=e<<5|t:t<256?(se[K++]=e<<5|24,se[K++]=t):t<65536?(se[K++]=e<<5|25,Ks.setUint16(K,t),K+=2):t<2**32?(se[K++]=e<<5|26,Ks.setUint32(K,t),K+=4):(se[K++]=e<<5|27,Ks.setBigUint64(K,typeof t=="bigint"?t:BigInt(t)),K+=8)}function AP(e){let t=[e];for(;t.length;){let r=t.pop();if(Q_(typeof r=="string"?r.length*4:64),typeof r=="string"){if(RP)Qs(3,Buffer.byteLength(r)),K+=se.write(r,K);else{let s=(0,TP.fromUtf8)(r);Qs(3,s.byteLength),se.set(s,K),K+=s.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let s=r>=0,n=s?0:1,o=s?r:-r-1;o<24?se[K++]=n<<5|o:o<256?(se[K++]=n<<5|24,se[K++]=o):o<65536?(se[K++]=n<<5|25,se[K++]=o>>8,se[K++]=o):o<4294967296?(se[K++]=n<<5|26,Ks.setUint32(K,o),K+=4):(se[K++]=n<<5|27,Ks.setBigUint64(K,BigInt(o)),K+=8);continue}se[K++]=251,Ks.setFloat64(K,r),K+=8;continue}else if(typeof r=="bigint"){let s=r>=0,n=s?0:1,o=s?r:-r-BigInt(1),i=Number(o);if(i<24)se[K++]=n<<5|i;else if(i<256)se[K++]=n<<5|24,se[K++]=i;else if(i<65536)se[K++]=n<<5|25,se[K++]=i>>8,se[K++]=i&255;else if(i<4294967296)se[K++]=n<<5|26,Ks.setUint32(K,i),K+=4;else if(o<BigInt("18446744073709551616"))se[K++]=n<<5|27,Ks.setBigUint64(K,o),K+=8;else{let a=o.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),d=o,u=0;for(;c.byteLength-++u>=0;)c[c.byteLength-u]=Number(d&BigInt(255)),d>>=BigInt(8);Q_(c.byteLength*2),se[K++]=s?194:195,RP?Qs(2,Buffer.byteLength(c)):Qs(2,c.byteLength),se.set(c,K),K+=c.byteLength}continue}else if(r===null){se[K++]=246;continue}else if(typeof r=="boolean"){se[K++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let s=r.length-1;s>=0;--s)t.push(r[s]);Qs(4,r.length);continue}else if(typeof r.byteLength=="number"){Q_(r.length*2),Qs(2,r.length),se.set(r,K),K+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof pe){let n=r.string.indexOf("."),o=n===-1?0:n-r.string.length+1,i=BigInt(r.string.replace(".",""));se[K++]=196,t.push(i),t.push(o),Qs(4,2);continue}if(r[$_])if("tag"in r&&"value"in r){t.push(r.value),Qs(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let s=Object.keys(r);for(let n=s.length-1;n>=0;--n){let o=s[n];t.push(r[o]),t.push(o)}Qs(5,s.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var TP,RP,$G,se,Ks,K,IP=S(()=>{ut();TP=y(Fe());yf();RP=typeof Buffer<"u",$G=2048,se=Dn($G),Ks=new DataView(se.buffer,se.byteOffset,se.byteLength),K=0});var J_,PP=S(()=>{CP();IP();J_={deserialize(e){return bP(e),gs(0,e.length)},serialize(e){try{return AP(e),K_()}catch(t){throw K_(),t}},resizeEncodingBuffer(e){_f(e)}}});var Ef,Xi,wf=S(()=>{yf();Ef=e=>gf({tag:1,value:e.getTime()/1e3}),Xi=(e,t)=>{let r=n=>{let o=n;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o};if(t.__type!==void 0)return r(t.__type);let s=Object.keys(t).find(n=>n.toLowerCase()==="code");if(s&&t[s]!==void 0)return r(t[s])}});var Z_,bf,Y_,X_,eE=S(()=>{ze();_e();ut();Z_=y(qe());PP();wf();bf=class extends zt{createSerializer(){let t=new Y_;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new X_;return t.setSerdeContext(this.serdeContext),t}},Y_=class extends zt{value;write(t,r){this.value=this.serialize(t,r)}serialize(t,r){let s=k.of(t);if(r==null)return s.isIdempotencyToken()?(0,kt.v4)():r;if(s.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Z_.fromBase64)(r):r;if(s.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?Ef(new Date(Number(r)/1e3|0)):Ef(r);if(typeof r=="function"||typeof r=="object"){let n=r;if(s.isListSchema()&&Array.isArray(n)){let i=!!s.getMergedTraits().sparse,a=[],c=0;for(let d of n){let u=this.serialize(s.getValueSchema(),d);(u!=null||i)&&(a[c++]=u)}return a}if(n instanceof Date)return Ef(n);let o={};if(s.isMapSchema()){let i=!!s.getMergedTraits().sparse;for(let a of Object.keys(n)){let c=this.serialize(s.getValueSchema(),n[a]);(c!=null||i)&&(o[a]=c)}}else if(s.isStructSchema())for(let[i,a]of s.structIterator()){let c=this.serialize(a,n[i]);c!=null&&(o[i]=c)}else if(s.isDocumentSchema())for(let i of Object.keys(n))o[i]=this.serialize(s.getValueSchema(),n[i]);return o}return r}flush(){let t=J_.serialize(this.value);return this.value=void 0,t}},X_=class extends zt{read(t,r){let s=J_.deserialize(r);return this.readValue(t,s)}readValue(t,r){let s=k.of(t);if(s.isTimestampSchema()&&typeof r=="number")return Bc(r);if(s.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Z_.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||s.isDocumentSchema())return r;if(s.isListSchema()){let o=[],i=s.getValueSchema(),a=!!s.getMergedTraits().sparse;for(let c of r){let d=this.readValue(i,c);(d!=null||a)&&o.push(d)}return o}let n={};if(s.isMapSchema()){let o=!!s.getMergedTraits().sparse,i=s.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(i,r[a]);(c!=null||o)&&(n[a]=c)}}else if(s.isStructSchema())for(let[o,i]of s.structIterator())n[o]=this.readValue(i,r[o]);return n}else return r}}});var NP,Zi,OP=S(()=>{ze();_e();NP=y(gt());eE();wf();Zi=class extends lr{codec=new bf;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);if(Object.assign(n.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Ht(t.input)==="unit")delete n.body,delete n.headers["content-type"];else{n.body||(this.serializer.write(15,{}),n.body=this.serializer.flush());try{n.headers["content-length"]=String(n.body.byteLength)}catch{}}let{service:o,operation:i}=(0,NP.getSmithyContext)(s),a=`/service/${o}/operation/${i}`;return n.path.endsWith("/")?n.path+=a.slice(1):n.path+=a,n}async deserializeResponse(t,r,s){return super.deserializeResponse(t,r,s)}async handleError(t,r,s,n,o){let i=Xi(s,n)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let c={$metadata:o,$response:s,$fault:s.statusCode<=500?"client":"server"},d=ve.for(a),u;try{u=d.getSchema(i)}catch{n.Message&&(n.message=n.Message);let R=ve.for("smithy.ts.sdk.synthetic."+a),N=R.getBaseException();if(N){let B=R.getErrorCtor(N);throw Object.assign(new B({name:i}),c,n)}throw Object.assign(new Error(i),c,n)}let l=k.of(u),h=d.getErrorCtor(u),m=n.message??n.Message??"Unknown",g=new h(m),w={};for(let[C,R]of l.structIterator())w[C]=this.deserializer.readValue(R,n[C]);throw Object.assign(g,c,{$fault:l.getMergedTraits().error,message:m},w)}getDefaultContentType(){return"application/cbor"}}});var tE=S(()=>{wf();OP();eE()});var xr,ea=S(()=>{_e();xr=class{resolveRestContentType(t,r){let s=r.getMemberSchemas(),n=Object.values(s).find(o=>!!o.getMergedTraits().httpPayload);if(n){let o=n.getMergedTraits().mediaType;return o||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(s).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:d,httpLabel:u,httpPrefixHeaders:l}=i.getMergedTraits();return!a&&!c&&!d&&!u&&l===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,s,n,o,i){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let d={$metadata:o,$response:s,$fault:s.statusCode<500?"client":"server"},u=ve.for(a);try{return{errorSchema:i?.(u,c)??u.getSchema(t),errorMetadata:d}}catch{n.message=n.message??n.Message??"UnknownError";let h=ve.for("smithy.ts.sdk.synthetic."+a),m=h.getBaseException();if(m){let g=h.getErrorCtor(m)??Error;throw Object.assign(new g({name:c}),d,n)}throw Object.assign(new Error(c),d,n)}}setQueryCompatError(t,r){let s=r.headers?.["x-amzn-query-error"];if(t!==void 0&&s!=null){let[n,o]=s.split(";"),i=Object.entries(t),a={Code:n,Type:o};Object.assign(t,a);for(let[c,d]of i)a[c]=d;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var vf,DP=S(()=>{tE();_e();ea();vf=class extends Zi{awsQueryCompatible;mixin=new xr;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),n}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=Xi(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=k.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u),m={};for(let[g,w]of d.structIterator())m[g]=this.deserializer.readValue(w,n[g]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}}});var kP,MP,LP,qP=S(()=>{kP=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},MP=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},LP=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var Lt,qn=S(()=>{Lt=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function FP(e,t,r){if(r?.source){let s=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||s!==String(t)))return s.includes(".")?new pe(s,"bigDecimal"):BigInt(s)}return t}var $P=S(()=>{ut()});var HP=b(BP=>{"use strict";var Xo=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let s of t)r.push(s);return r},Fn=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,rE=()=>{let e=[],t=[],r=!1,s=new Set,n=l=>l.sort((h,m)=>UP[m.step]-UP[h.step]||jP[m.priority||"normal"]-jP[h.priority||"normal"]),o=l=>{let h=!1,m=g=>{let w=Xo(g.name,g.aliases);if(w.includes(l)){h=!0;for(let C of w)s.delete(C);return!1}return!0};return e=e.filter(m),t=t.filter(m),h},i=l=>{let h=!1,m=g=>{if(g.middleware===l){h=!0;for(let w of Xo(g.name,g.aliases))s.delete(w);return!1}return!0};return e=e.filter(m),t=t.filter(m),h},a=l=>(e.forEach(h=>{l.add(h.middleware,{...h})}),t.forEach(h=>{l.addRelativeTo(h.middleware,{...h})}),l.identifyOnResolve?.(u.identifyOnResolve()),l),c=l=>{let h=[];return l.before.forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h.push(l),l.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h},d=(l=!1)=>{let h=[],m=[],g={};return e.forEach(C=>{let R={...C,before:[],after:[]};for(let N of Xo(R.name,R.aliases))g[N]=R;h.push(R)}),t.forEach(C=>{let R={...C,before:[],after:[]};for(let N of Xo(R.name,R.aliases))g[N]=R;m.push(R)}),m.forEach(C=>{if(C.toMiddleware){let R=g[C.toMiddleware];if(R===void 0){if(l)return;throw new Error(`${C.toMiddleware} is not found when adding ${Fn(C.name,C.aliases)} middleware ${C.relation} ${C.toMiddleware}`)}C.relation==="after"&&R.after.push(C),C.relation==="before"&&R.before.push(C)}}),n(h).map(c).reduce((C,R)=>(C.push(...R),C),[])},u={add:(l,h={})=>{let{name:m,override:g,aliases:w}=h,C={step:"initialize",priority:"normal",middleware:l,...h},R=Xo(m,w);if(R.length>0){if(R.some(N=>s.has(N))){if(!g)throw new Error(`Duplicate middleware name '${Fn(m,w)}'`);for(let N of R){let B=e.findIndex(Y=>Y.name===N||Y.aliases?.some(we=>we===N));if(B===-1)continue;let j=e[B];if(j.step!==C.step||C.priority!==j.priority)throw new Error(`"${Fn(j.name,j.aliases)}" middleware with ${j.priority} priority in ${j.step} step cannot be overridden by "${Fn(m,w)}" middleware with ${C.priority} priority in ${C.step} step.`);e.splice(B,1)}}for(let N of R)s.add(N)}e.push(C)},addRelativeTo:(l,h)=>{let{name:m,override:g,aliases:w}=h,C={middleware:l,...h},R=Xo(m,w);if(R.length>0){if(R.some(N=>s.has(N))){if(!g)throw new Error(`Duplicate middleware name '${Fn(m,w)}'`);for(let N of R){let B=t.findIndex(Y=>Y.name===N||Y.aliases?.some(we=>we===N));if(B===-1)continue;let j=t[B];if(j.toMiddleware!==C.toMiddleware||j.relation!==C.relation)throw new Error(`"${Fn(j.name,j.aliases)}" middleware ${j.relation} "${j.toMiddleware}" middleware cannot be overridden by "${Fn(m,w)}" middleware ${C.relation} "${C.toMiddleware}" middleware.`);t.splice(B,1)}}for(let N of R)s.add(N)}t.push(C)},clone:()=>a(rE()),use:l=>{l.applyToStack(u)},remove:l=>typeof l=="string"?o(l):i(l),removeByTag:l=>{let h=!1,m=g=>{let{tags:w,name:C,aliases:R}=g;if(w&&w.includes(l)){let N=Xo(C,R);for(let B of N)s.delete(B);return h=!0,!1}return!0};return e=e.filter(m),t=t.filter(m),h},concat:l=>{let h=a(rE());return h.use(l),h.identifyOnResolve(r||h.identifyOnResolve()||(l.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>d(!0).map(l=>{let h=l.step??l.relation+" "+l.toMiddleware;return Fn(l.name,l.aliases)+" - "+h}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,h)=>{for(let m of d().map(g=>g.middleware).reverse())l=m(l,h);return r&&console.log(u.identify()),l}};return u},UP={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},jP={high:3,normal:2,low:1};BP.constructStack=rE});var U=b(Ne=>{"use strict";var GP=HP(),lE=(ze(),Q(zA)),nE=vn(),UG=(_e(),Q(IS)),zP=(ut(),Q(IA)),oE=class{config;middlewareStack=GP.constructStack();initConfig;handlers;constructor(t){this.config=t}send(t,r,s){let n=typeof r!="function"?r:void 0,o=typeof r=="function"?r:s,i=n===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,n),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,n);if(o)a(t).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},sE="***SensitiveInformation***";function iE(e,t){if(t==null)return t;let r=UG.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return sE;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return sE}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return sE}else if(r.isStructSchema()&&typeof t=="object"){let s=t,n={};for(let[o,i]of r.structIterator())s[o]!=null&&(n[o]=iE(i,s[o]));return n}return t}var xf=class{middlewareStack=GP.constructStack();schema;static classBuilder(){return new aE}resolveMiddlewareWithContext(t,r,s,{middlewareFn:n,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:d,additionalContext:u,CommandCtor:l}){for(let C of n.bind(this)(l,t,r,s))this.middlewareStack.use(C);let h=t.concat(this.middlewareStack),{logger:m}=r,g={logger:m,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[nE.SMITHY_CONTEXT_KEY]:{commandInstance:this,...d},...u},{requestHandler:w}=r;return h.resolve(C=>w.handle(C.request,s||{}),g)}},aE=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,s={}){return this._smithyContext={service:t,operation:r,...s},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=s=>s,r=s=>s){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends xf{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[s]){super(),this.input=s??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(s,n,o){let i=t._operationSchema,a=i?.[4]??i?.input,c=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(s,n,o,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(i?iE.bind(null,a):d=>d),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(i?iE.bind(null,c):d=>d),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}},jG="***SensitiveInformation***",BG=(e,t)=>{for(let r of Object.keys(e)){let s=e[r],n=async function(i,a,c){let d=new s(i);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[o]=n}},cE=class e extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},WP=(e,t={})=>{Object.entries(t).filter(([,s])=>s!==void 0).forEach(([s,n])=>{(e[s]==null||e[s]==="")&&(e[s]=n)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},QP=({output:e,parsedBody:t,exceptionCtor:r,errorCode:s})=>{let n=zG(e),o=n.httpStatusCode?n.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||s||o||"UnknownError",$fault:"client",$metadata:n});throw WP(i,t)},HG=e=>({output:t,parsedBody:r,errorCode:s})=>{QP({output:t,parsedBody:r,exceptionCtor:e,errorCode:s})},zG=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),VG=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},VP=!1,GG=e=>{e&&!VP&&parseInt(e.substring(1,e.indexOf(".")))<16&&(VP=!0)},WG=e=>{let t=[];for(let r in nE.AlgorithmId){let s=nE.AlgorithmId[r];e[s]!==void 0&&t.push({algorithmId:()=>s,checksumConstructor:()=>e[s]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},QG=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},KG=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),JG=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},KP=e=>Object.assign(WG(e),KG(e)),YG=KP,XG=e=>Object.assign(QG(e),JG(e)),ZG=e=>Array.isArray(e)?e:[e],JP=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=JP(e[r]));return e},eW=e=>e!=null,dE=class{trace(){}debug(){}info(){}warn(){}error(){}};function YP(e,t,r){let s,n,o;if(typeof t>"u"&&typeof r>"u")s={},o=e;else{if(s=e,typeof t=="function")return n=t,o=r,sW(s,n,o);o=t}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){s[i]=o[i];continue}XP(s,null,o,i)}return s}var tW=e=>{let t={};for(let[r,s]of Object.entries(e||{}))t[r]=[,s];return t},rW=(e,t)=>{let r={};for(let s in t)XP(r,e,t,s);return r},sW=(e,t,r)=>YP(e,Object.entries(r).reduce((s,[n,o])=>(Array.isArray(o)?s[n]=o:typeof o=="function"?s[n]=[t,o()]:s[n]=[t,o],s),{})),XP=(e,t,r,s)=>{if(t!==null){let i=r[s];typeof i=="function"&&(i=[,i]);let[a=nW,c=oW,d=s]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[s]=c(t[d]));return}let[n,o]=r[s];if(typeof o=="function"){let i,a=n===void 0&&(i=o())!=null,c=typeof n=="function"&&!!n(void 0)||typeof n!="function"&&!!n;a?e[s]=i:c&&(e[s]=o())}else{let i=n===void 0&&o!=null,a=typeof n=="function"&&!!n(o)||typeof n!="function"&&!!n;(i||a)&&(e[s]=o)}},nW=e=>e!=null,oW=e=>e,iW=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},aW=e=>e.toISOString().replace(".000Z","Z"),uE=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(uE);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=uE(e[r]));return t}return e};Object.defineProperty(Ne,"collectBody",{enumerable:!0,get:function(){return lE.collectBody}});Object.defineProperty(Ne,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return lE.extendedEncodeURIComponent}});Object.defineProperty(Ne,"resolvedPath",{enumerable:!0,get:function(){return lE.resolvedPath}});Ne.Client=oE;Ne.Command=xf;Ne.NoOpLogger=dE;Ne.SENSITIVE_STRING=jG;Ne.ServiceException=cE;Ne._json=uE;Ne.convertMap=tW;Ne.createAggregatedClient=BG;Ne.decorateServiceException=WP;Ne.emitWarningIfUnsupportedVersion=GG;Ne.getArrayIfSingleItem=ZG;Ne.getDefaultClientConfiguration=YG;Ne.getDefaultExtensionConfiguration=KP;Ne.getValueFromTextNode=JP;Ne.isSerializableHeaderValue=eW;Ne.loadConfigsForDefaultMode=VG;Ne.map=YP;Ne.resolveDefaultRuntimeConfig=XG;Ne.serializeDateTime=aW;Ne.serializeFloat=iW;Ne.take=rW;Ne.throwDefaultError=QP;Ne.withBaseException=HG;Object.keys(zP).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ne,e)&&Object.defineProperty(Ne,e,{enumerable:!0,get:function(){return zP[e]}})})});var ZP,e0,Cf,fE=S(()=>{ZP=y(U()),e0=y(Fe()),Cf=(e,t)=>(0,ZP.collectBody)(e,t).then(r=>(t?.utf8Encoder??e0.toUtf8)(r))});var Zo,Rf,$n,ed=S(()=>{fE();Zo=(e,t)=>Cf(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(s){throw s?.name==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:r}),s}return{}}),Rf=async(e,t)=>{let r=await Zo(e,t);return r.message=r.message??r.Message,r},$n=(e,t)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),s=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return s(e.headers[n]);if(t&&typeof t=="object"){let o=r(t,"code");if(o&&t[o]!==void 0)return s(t[o]);if(t.__type!==void 0)return s(t.__type)}}});var t0,ta,pE=S(()=>{ze();_e();ut();t0=y(qe());qn();$P();ed();ta=class extends Lt{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,FP):await Zo(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let s=r!==null&&typeof r=="object",n=k.of(t);if(n.isListSchema()&&Array.isArray(r)){let i=n.getValueSchema(),a=[],c=!!n.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._read(i,d));return a}else if(n.isMapSchema()&&s){let i=n.getValueSchema(),a={},c=!!n.getMergedTraits().sparse;for(let[d,u]of Object.entries(r))(c||u!=null)&&(a[d]=this._read(i,u));return a}else if(n.isStructSchema()&&s){let i={};for(let[a,c]of n.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,u=this._read(c,r[d]);u!=null&&(i[a]=u)}return i}if(n.isBlobSchema()&&typeof r=="string")return(0,t0.fromBase64)(r);let o=n.getMergedTraits().mediaType;if(n.isStringSchema()&&typeof r=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return pt.from(r);if(n.isTimestampSchema()&&r!=null)switch(ot(n,this.settings)){case 5:return $c(r);case 6:return Uc(r);case 7:return jc(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(n.isBigDecimalSchema()&&r!=null){if(r instanceof pe)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new pe(i.string,i.type):new pe(String(r),"bigDecimal")}if(n.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(n.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof pe?i[a]=c:i[a]=this._read(n,c);return i}else return structuredClone(r);return r}}});var r0,Tf,s0=S(()=>{ut();r0="\u039D",Tf=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof pe){let s=`${r0+"nv"+this.counter++}_`+r.string;return this.values.set(`"${s}"`,r.string),s}if(typeof r=="bigint"){let s=r.toString(),n=`${r0+"b"+this.counter++}_`+s;return this.values.set(`"${n}"`,s),n}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,s]of this.values)t=t.replace(r,s);return t}}});var n0,ra,mE=S(()=>{ze();_e();ut();n0=y(qe());qn();s0();ra=class extends Lt{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=k.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=k.of(t).getName(!0))}flush(){let{rootSchema:t}=this;if(this.rootSchema=void 0,t?.isStructSchema()||t?.isDocumentSchema()){let r=new Tf;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(t,r,s){let n=r!==null&&typeof r=="object",o=k.of(t);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._write(i,d));return a}else if(o.isMapSchema()&&n){let i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(let[d,u]of Object.entries(r))(c||u!=null)&&(a[d]=this._write(i,u));return a}else if(o.isStructSchema()&&n){let i={};for(let[a,c]of o.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,u=this._write(c,r[a],o);u!==void 0&&(i[d]=u)}return i}if(!(r===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||o.isDocumentSchema()&&r instanceof Uint8Array)return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??n0.toBase64)(r);if((o.isTimestampSchema()||o.isDocumentSchema())&&r instanceof Date)switch(ot(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return Vo(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(o.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,kt.v4)();let i=o.getMergedTraits().mediaType;if(r!=null&&i&&(i==="application/json"||i.endsWith("+json")))return pt.from(r)}if(o.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof pe?i[a]=c:i[a]=this._write(o,c);return i}else return structuredClone(r);return r}}}});var Un,Af=S(()=>{qn();pE();mE();Un=class extends Lt{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new ra(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new ta(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var jn,If=S(()=>{ze();_e();ea();Af();ed();jn=class extends lr{serializer;deserializer;serviceTarget;codec;mixin=new xr;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=new Un({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),(Ht(t.input)==="unit"||!n.body)&&(n.body="{}"),n}getPayloadCodec(){return this.codec}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=$n(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=k.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u),m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(w,n[C])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}}});var Pf,o0=S(()=>{If();Pf=class extends jn{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var Nf,i0=S(()=>{If();Nf=class extends jn{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Of,a0=S(()=>{ze();_e();ea();Af();ed();Of=class extends Yr{serializer;deserializer;codec;mixin=new xr;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Un(r),this.serializer=new Zr(this.codec.createSerializer(),r),this.deserializer=new Xr(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=k.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]&&!n.body&&(n.body="{}"),n}async handleError(t,r,s,n,o){let i=$n(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=k.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(w,n[C])}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}getDefaultContentType(){return"application/json"}}});var c0,d0,u0=S(()=>{c0=y(U()),d0=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,c0.expectUnion)(e)}});var f0=b((cSe,l0)=>{(()=>{"use strict";var e={d:(f,p)=>{for(var _ in p)e.o(p,_)&&!e.o(f,_)&&Object.defineProperty(f,_,{enumerable:!0,get:p[_]})},o:(f,p)=>Object.prototype.hasOwnProperty.call(f,p),r:f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>yn,XMLParser:()=>yz,XMLValidator:()=>Cz});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function n(f,p){let _=[],x=p.exec(f);for(;x;){let E=[];E.startIndex=p.lastIndex-x[0].length;let v=x.length;for(let I=0;I<v;I++)E.push(x[I]);_.push(E),x=p.exec(f)}return _}let o=function(f){return s.exec(f)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(f,p){p=Object.assign({},i,p);let _=[],x=!1,E=!1;f[0]==="\uFEFF"&&(f=f.substr(1));for(let v=0;v<f.length;v++)if(f[v]==="<"&&f[v+1]==="?"){if(v+=2,v=d(f,v),v.err)return v}else{if(f[v]!=="<"){if(c(f[v]))continue;return R("InvalidChar","char '"+f[v]+"' is not expected.",B(f,v))}{let I=v;if(v++,f[v]==="!"){v=u(f,v);continue}{let A=!1;f[v]==="/"&&(A=!0,v++);let O="";for(;v<f.length&&f[v]!==">"&&f[v]!==" "&&f[v]!=="	"&&f[v]!==`
`&&f[v]!=="\r";v++)O+=f[v];if(O=O.trim(),O[O.length-1]==="/"&&(O=O.substring(0,O.length-1),v--),!o(O)){let J;return J=O.trim().length===0?"Invalid space after '<'.":"Tag '"+O+"' is an invalid name.",R("InvalidTag",J,B(f,v))}let $=m(f,v);if($===!1)return R("InvalidAttr","Attributes for '"+O+"' have open quote.",B(f,v));let oe=$.value;if(v=$.index,oe[oe.length-1]==="/"){let J=v-oe.length;oe=oe.substring(0,oe.length-1);let Se=w(oe,p);if(Se!==!0)return R(Se.err.code,Se.err.msg,B(f,J+Se.err.line));x=!0}else if(A){if(!$.tagClosed)return R("InvalidTag","Closing tag '"+O+"' doesn't have proper closing.",B(f,v));if(oe.trim().length>0)return R("InvalidTag","Closing tag '"+O+"' can't have attributes or invalid starting.",B(f,I));if(_.length===0)return R("InvalidTag","Closing tag '"+O+"' has not been opened.",B(f,I));{let J=_.pop();if(O!==J.tagName){let Se=B(f,J.tagStartPos);return R("InvalidTag","Expected closing tag '"+J.tagName+"' (opened in line "+Se.line+", col "+Se.col+") instead of closing tag '"+O+"'.",B(f,I))}_.length==0&&(E=!0)}}else{let J=w(oe,p);if(J!==!0)return R(J.err.code,J.err.msg,B(f,v-oe.length+J.err.line));if(E===!0)return R("InvalidXml","Multiple possible root nodes found.",B(f,v));p.unpairedTags.indexOf(O)!==-1||_.push({tagName:O,tagStartPos:I}),x=!0}for(v++;v<f.length;v++)if(f[v]==="<"){if(f[v+1]==="!"){v++,v=u(f,v);continue}if(f[v+1]!=="?")break;if(v=d(f,++v),v.err)return v}else if(f[v]==="&"){let J=C(f,v);if(J==-1)return R("InvalidChar","char '&' is not expected.",B(f,v));v=J}else if(E===!0&&!c(f[v]))return R("InvalidXml","Extra text at the end",B(f,v));f[v]==="<"&&v--}}}return x?_.length==1?R("InvalidTag","Unclosed tag '"+_[0].tagName+"'.",B(f,_[0].tagStartPos)):!(_.length>0)||R("InvalidXml","Invalid '"+JSON.stringify(_.map((v=>v.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):R("InvalidXml","Start tag expected.",1)}function c(f){return f===" "||f==="	"||f===`
`||f==="\r"}function d(f,p){let _=p;for(;p<f.length;p++)if(!(f[p]!="?"&&f[p]!=" ")){let x=f.substr(_,p-_);if(p>5&&x==="xml")return R("InvalidXml","XML declaration allowed only at the start of the document.",B(f,p));if(f[p]=="?"&&f[p+1]==">"){p++;break}}return p}function u(f,p){if(f.length>p+5&&f[p+1]==="-"&&f[p+2]==="-"){for(p+=3;p<f.length;p++)if(f[p]==="-"&&f[p+1]==="-"&&f[p+2]===">"){p+=2;break}}else if(f.length>p+8&&f[p+1]==="D"&&f[p+2]==="O"&&f[p+3]==="C"&&f[p+4]==="T"&&f[p+5]==="Y"&&f[p+6]==="P"&&f[p+7]==="E"){let _=1;for(p+=8;p<f.length;p++)if(f[p]==="<")_++;else if(f[p]===">"&&(_--,_===0))break}else if(f.length>p+9&&f[p+1]==="["&&f[p+2]==="C"&&f[p+3]==="D"&&f[p+4]==="A"&&f[p+5]==="T"&&f[p+6]==="A"&&f[p+7]==="["){for(p+=8;p<f.length;p++)if(f[p]==="]"&&f[p+1]==="]"&&f[p+2]===">"){p+=2;break}}return p}let l='"',h="'";function m(f,p){let _="",x="",E=!1;for(;p<f.length;p++){if(f[p]===l||f[p]===h)x===""?x=f[p]:x!==f[p]||(x="");else if(f[p]===">"&&x===""){E=!0;break}_+=f[p]}return x===""&&{value:_,index:p,tagClosed:E}}let g=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function w(f,p){let _=n(f,g),x={};for(let E=0;E<_.length;E++){if(_[E][1].length===0)return R("InvalidAttr","Attribute '"+_[E][2]+"' has no space in starting.",j(_[E]));if(_[E][3]!==void 0&&_[E][4]===void 0)return R("InvalidAttr","Attribute '"+_[E][2]+"' is without value.",j(_[E]));if(_[E][3]===void 0&&!p.allowBooleanAttributes)return R("InvalidAttr","boolean attribute '"+_[E][2]+"' is not allowed.",j(_[E]));let v=_[E][2];if(!N(v))return R("InvalidAttr","Attribute '"+v+"' is an invalid name.",j(_[E]));if(x.hasOwnProperty(v))return R("InvalidAttr","Attribute '"+v+"' is repeated.",j(_[E]));x[v]=1}return!0}function C(f,p){if(f[++p]===";")return-1;if(f[p]==="#")return(function(x,E){let v=/\d/;for(x[E]==="x"&&(E++,v=/[\da-fA-F]/);E<x.length;E++){if(x[E]===";")return E;if(!x[E].match(v))break}return-1})(f,++p);let _=0;for(;p<f.length;p++,_++)if(!(f[p].match(/\w/)&&_<20)){if(f[p]===";")break;return-1}return p}function R(f,p,_){return{err:{code:f,msg:p,line:_.line||_,col:_.col}}}function N(f){return o(f)}function B(f,p){let _=f.substring(0,p).split(/\r?\n/);return{line:_.length,col:_[_.length-1].length+1}}function j(f){return f.startIndex+f[1].length}let Y={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(f,p){return p},attributeValueProcessor:function(f,p){return p},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(f,p,_){return f},captureMetaData:!1},we;we=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class De{constructor(p){this.tagname=p,this.child=[],this[":@"]={}}add(p,_){p==="__proto__"&&(p="#__proto__"),this.child.push({[p]:_})}addChild(p,_){p.tagname==="__proto__"&&(p.tagname="#__proto__"),p[":@"]&&Object.keys(p[":@"]).length>0?this.child.push({[p.tagname]:p.child,":@":p[":@"]}):this.child.push({[p.tagname]:p.child}),_!==void 0&&(this.child[this.child.length-1][we]={startIndex:_})}static getMetaDataSymbol(){return we}}function te(f,p){let _={};if(f[p+3]!=="O"||f[p+4]!=="C"||f[p+5]!=="T"||f[p+6]!=="Y"||f[p+7]!=="P"||f[p+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{p+=9;let x=1,E=!1,v=!1,I="";for(;p<f.length;p++)if(f[p]!=="<"||v)if(f[p]===">"){if(v?f[p-1]==="-"&&f[p-2]==="-"&&(v=!1,x--):x--,x===0)break}else f[p]==="["?E=!0:I+=f[p];else{if(E&&Co(f,"!ENTITY",p)){let A,O;p+=7,[A,O,p]=be(f,p+1),O.indexOf("&")===-1&&(_[A]={regx:RegExp(`&${A};`,"g"),val:O})}else if(E&&Co(f,"!ELEMENT",p)){p+=8;let{index:A}=JH(f,p+1);p=A}else if(E&&Co(f,"!ATTLIST",p))p+=8;else if(E&&Co(f,"!NOTATION",p)){p+=9;let{index:A}=Ie(f,p+1);p=A}else{if(!Co(f,"!--",p))throw new Error("Invalid DOCTYPE");v=!0}x++,I=""}if(x!==0)throw new Error("Unclosed DOCTYPE")}return{entities:_,i:p}}let he=(f,p)=>{for(;p<f.length&&/\s/.test(f[p]);)p++;return p};function be(f,p){p=he(f,p);let _="";for(;p<f.length&&!/\s/.test(f[p])&&f[p]!=='"'&&f[p]!=="'";)_+=f[p],p++;if(Py(_),p=he(f,p),f.substring(p,p+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(f[p]==="%")throw new Error("Parameter entities are not supported");let x="";return[p,x]=Ci(f,p,"entity"),[_,x,--p]}function Ie(f,p){p=he(f,p);let _="";for(;p<f.length&&!/\s/.test(f[p]);)_+=f[p],p++;Py(_),p=he(f,p);let x=f.substring(p,p+6).toUpperCase();if(x!=="SYSTEM"&&x!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${x}"`);p+=x.length,p=he(f,p);let E=null,v=null;if(x==="PUBLIC")[p,E]=Ci(f,p,"publicIdentifier"),f[p=he(f,p)]!=='"'&&f[p]!=="'"||([p,v]=Ci(f,p,"systemIdentifier"));else if(x==="SYSTEM"&&([p,v]=Ci(f,p,"systemIdentifier"),!v))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:_,publicIdentifier:E,systemIdentifier:v,index:--p}}function Ci(f,p,_){let x="",E=f[p];if(E!=='"'&&E!=="'")throw new Error(`Expected quoted string, found "${E}"`);for(p++;p<f.length&&f[p]!==E;)x+=f[p],p++;if(f[p]!==E)throw new Error(`Unterminated ${_} value`);return[++p,x]}function JH(f,p){p=he(f,p);let _="";for(;p<f.length&&!/\s/.test(f[p]);)_+=f[p],p++;if(!Py(_))throw new Error(`Invalid element name: "${_}"`);let x="";if(f[p=he(f,p)]==="E"&&Co(f,"MPTY",p))p+=4;else if(f[p]==="A"&&Co(f,"NY",p))p+=2;else{if(f[p]!=="(")throw new Error(`Invalid Element Expression, found "${f[p]}"`);for(p++;p<f.length&&f[p]!==")";)x+=f[p],p++;if(f[p]!==")")throw new Error("Unterminated content model")}return{elementName:_,contentModel:x.trim(),index:p}}function Co(f,p,_){for(let x=0;x<p.length;x++)if(p[x]!==f[_+x+1])return!1;return!0}function Py(f){if(o(f))return f;throw new Error(`Invalid entity name ${f}`)}let YH=/^[-+]?0x[a-fA-F0-9]+$/,XH=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,ZH={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},ez=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function vC(f){return typeof f=="function"?f:Array.isArray(f)?p=>{for(let _ of f)if(typeof _=="string"&&p===_||_ instanceof RegExp&&_.test(p))return!0}:()=>!1}class tz{constructor(p){this.options=p,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(_,x)=>String.fromCodePoint(Number.parseInt(x,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(_,x)=>String.fromCodePoint(Number.parseInt(x,16))}},this.addExternalEntities=rz,this.parseXml=az,this.parseTextData=sz,this.resolveNameSpace=nz,this.buildAttributesMap=iz,this.isItStopNode=lz,this.replaceEntitiesValue=dz,this.readStopNodeData=fz,this.saveTextToParentTag=uz,this.addChild=cz,this.ignoreAttributesFn=vC(this.options.ignoreAttributes)}}function rz(f){let p=Object.keys(f);for(let _=0;_<p.length;_++){let x=p[_];this.lastEntities[x]={regex:new RegExp("&"+x+";","g"),val:f[x]}}}function sz(f,p,_,x,E,v,I){if(f!==void 0&&(this.options.trimValues&&!x&&(f=f.trim()),f.length>0)){I||(f=this.replaceEntitiesValue(f));let A=this.options.tagValueProcessor(p,f,_,E,v);return A==null?f:typeof A!=typeof f||A!==f?A:this.options.trimValues||f.trim()===f?xC(f,this.options.parseTagValue,this.options.numberParseOptions):f}}function nz(f){if(this.options.removeNSPrefix){let p=f.split(":"),_=f.charAt(0)==="/"?"/":"";if(p[0]==="xmlns")return"";p.length===2&&(f=_+p[1])}return f}let oz=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function iz(f,p,_){if(this.options.ignoreAttributes!==!0&&typeof f=="string"){let x=n(f,oz),E=x.length,v={};for(let I=0;I<E;I++){let A=this.resolveNameSpace(x[I][1]);if(this.ignoreAttributesFn(A,p))continue;let O=x[I][4],$=this.options.attributeNamePrefix+A;if(A.length)if(this.options.transformAttributeName&&($=this.options.transformAttributeName($)),$==="__proto__"&&($="#__proto__"),O!==void 0){this.options.trimValues&&(O=O.trim()),O=this.replaceEntitiesValue(O);let oe=this.options.attributeValueProcessor(A,O,p);v[$]=oe==null?O:typeof oe!=typeof O||oe!==O?oe:xC(O,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(v[$]=!0)}if(!Object.keys(v).length)return;if(this.options.attributesGroupName){let I={};return I[this.options.attributesGroupName]=v,I}return v}}let az=function(f){f=f.replace(/\r\n?/g,`
`);let p=new De("!xml"),_=p,x="",E="";for(let v=0;v<f.length;v++)if(f[v]==="<")if(f[v+1]==="/"){let I=Ro(f,">",v,"Closing Tag is not closed."),A=f.substring(v+2,I).trim();if(this.options.removeNSPrefix){let oe=A.indexOf(":");oe!==-1&&(A=A.substr(oe+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),_&&(x=this.saveTextToParentTag(x,_,E));let O=E.substring(E.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let $=0;O&&this.options.unpairedTags.indexOf(O)!==-1?($=E.lastIndexOf(".",E.lastIndexOf(".")-1),this.tagsNodeStack.pop()):$=E.lastIndexOf("."),E=E.substring(0,$),_=this.tagsNodeStack.pop(),x="",v=I}else if(f[v+1]==="?"){let I=Ny(f,v,!1,"?>");if(!I)throw new Error("Pi Tag is not closed.");if(x=this.saveTextToParentTag(x,_,E),!(this.options.ignoreDeclaration&&I.tagName==="?xml"||this.options.ignorePiTags)){let A=new De(I.tagName);A.add(this.options.textNodeName,""),I.tagName!==I.tagExp&&I.attrExpPresent&&(A[":@"]=this.buildAttributesMap(I.tagExp,E,I.tagName)),this.addChild(_,A,E,v)}v=I.closeIndex+1}else if(f.substr(v+1,3)==="!--"){let I=Ro(f,"-->",v+4,"Comment is not closed.");if(this.options.commentPropName){let A=f.substring(v+4,I-2);x=this.saveTextToParentTag(x,_,E),_.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}v=I}else if(f.substr(v+1,2)==="!D"){let I=te(f,v);this.docTypeEntities=I.entities,v=I.i}else if(f.substr(v+1,2)==="!["){let I=Ro(f,"]]>",v,"CDATA is not closed.")-2,A=f.substring(v+9,I);x=this.saveTextToParentTag(x,_,E);let O=this.parseTextData(A,_.tagname,E,!0,!1,!0,!0);O==null&&(O=""),this.options.cdataPropName?_.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):_.add(this.options.textNodeName,O),v=I+2}else{let I=Ny(f,v,this.options.removeNSPrefix),A=I.tagName,O=I.rawTagName,$=I.tagExp,oe=I.attrExpPresent,J=I.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),_&&x&&_.tagname!=="!xml"&&(x=this.saveTextToParentTag(x,_,E,!1));let Se=_;Se&&this.options.unpairedTags.indexOf(Se.tagname)!==-1&&(_=this.tagsNodeStack.pop(),E=E.substring(0,E.lastIndexOf("."))),A!==p.tagname&&(E+=E?"."+A:A);let Pe=v;if(this.isItStopNode(this.options.stopNodes,E,A)){let Ee="";if($.length>0&&$.lastIndexOf("/")===$.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),E=E.substr(0,E.length-1),$=A):$=$.substr(0,$.length-1),v=I.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)v=I.closeIndex;else{let ds=this.readStopNodeData(f,O,J+1);if(!ds)throw new Error(`Unexpected end of ${O}`);v=ds.i,Ee=ds.tagContent}let ct=new De(A);A!==$&&oe&&(ct[":@"]=this.buildAttributesMap($,E,A)),Ee&&(Ee=this.parseTextData(Ee,A,E,!0,oe,!0,!0)),E=E.substr(0,E.lastIndexOf(".")),ct.add(this.options.textNodeName,Ee),this.addChild(_,ct,E,Pe)}else{if($.length>0&&$.lastIndexOf("/")===$.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),E=E.substr(0,E.length-1),$=A):$=$.substr(0,$.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));let Ee=new De(A);A!==$&&oe&&(Ee[":@"]=this.buildAttributesMap($,E,A)),this.addChild(_,Ee,E,Pe),E=E.substr(0,E.lastIndexOf("."))}else{let Ee=new De(A);this.tagsNodeStack.push(_),A!==$&&oe&&(Ee[":@"]=this.buildAttributesMap($,E,A)),this.addChild(_,Ee,E,Pe),_=Ee}x="",v=J}}else x+=f[v];return p.child};function cz(f,p,_,x){this.options.captureMetaData||(x=void 0);let E=this.options.updateTag(p.tagname,_,p[":@"]);E===!1||(typeof E=="string"&&(p.tagname=E),f.addChild(p,x))}let dz=function(f){if(this.options.processEntities){for(let p in this.docTypeEntities){let _=this.docTypeEntities[p];f=f.replace(_.regx,_.val)}for(let p in this.lastEntities){let _=this.lastEntities[p];f=f.replace(_.regex,_.val)}if(this.options.htmlEntities)for(let p in this.htmlEntities){let _=this.htmlEntities[p];f=f.replace(_.regex,_.val)}f=f.replace(this.ampEntity.regex,this.ampEntity.val)}return f};function uz(f,p,_,x){return f&&(x===void 0&&(x=p.child.length===0),(f=this.parseTextData(f,p.tagname,_,!1,!!p[":@"]&&Object.keys(p[":@"]).length!==0,x))!==void 0&&f!==""&&p.add(this.options.textNodeName,f),f=""),f}function lz(f,p,_){let x="*."+_;for(let E in f){let v=f[E];if(x===v||p===v)return!0}return!1}function Ro(f,p,_,x){let E=f.indexOf(p,_);if(E===-1)throw new Error(x);return E+p.length-1}function Ny(f,p,_,x=">"){let E=(function(J,Se,Pe=">"){let Ee,ct="";for(let ds=Se;ds<J.length;ds++){let Sn=J[ds];if(Ee)Sn===Ee&&(Ee="");else if(Sn==='"'||Sn==="'")Ee=Sn;else if(Sn===Pe[0]){if(!Pe[1])return{data:ct,index:ds};if(J[ds+1]===Pe[1])return{data:ct,index:ds}}else Sn==="	"&&(Sn=" ");ct+=Sn}})(f,p+1,x);if(!E)return;let v=E.data,I=E.index,A=v.search(/\s/),O=v,$=!0;A!==-1&&(O=v.substring(0,A),v=v.substring(A+1).trimStart());let oe=O;if(_){let J=O.indexOf(":");J!==-1&&(O=O.substr(J+1),$=O!==E.data.substr(J+1))}return{tagName:O,tagExp:v,closeIndex:I,attrExpPresent:$,rawTagName:oe}}function fz(f,p,_){let x=_,E=1;for(;_<f.length;_++)if(f[_]==="<")if(f[_+1]==="/"){let v=Ro(f,">",_,`${p} is not closed`);if(f.substring(_+2,v).trim()===p&&(E--,E===0))return{tagContent:f.substring(x,_),i:v};_=v}else if(f[_+1]==="?")_=Ro(f,"?>",_+1,"StopNode is not closed.");else if(f.substr(_+1,3)==="!--")_=Ro(f,"-->",_+3,"StopNode is not closed.");else if(f.substr(_+1,2)==="![")_=Ro(f,"]]>",_,"StopNode is not closed.")-2;else{let v=Ny(f,_,">");v&&((v&&v.tagName)===p&&v.tagExp[v.tagExp.length-1]!=="/"&&E++,_=v.closeIndex)}}function xC(f,p,_){if(p&&typeof f=="string"){let x=f.trim();return x==="true"||x!=="false"&&(function(E,v={}){if(v=Object.assign({},ZH,v),!E||typeof E!="string")return E;let I=E.trim();if(v.skipLike!==void 0&&v.skipLike.test(I))return E;if(E==="0")return 0;if(v.hex&&YH.test(I))return(function(O){if(parseInt)return parseInt(O,16);if(Number.parseInt)return Number.parseInt(O,16);if(window&&window.parseInt)return window.parseInt(O,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(I);if(I.search(/.+[eE].+/)!==-1)return(function(O,$,oe){if(!oe.eNotation)return O;let J=$.match(ez);if(J){let Se=J[1]||"",Pe=J[3].indexOf("e")===-1?"E":"e",Ee=J[2],ct=Se?O[Ee.length+1]===Pe:O[Ee.length]===Pe;return Ee.length>1&&ct?O:Ee.length!==1||!J[3].startsWith(`.${Pe}`)&&J[3][0]!==Pe?oe.leadingZeros&&!ct?($=(J[1]||"")+J[3],Number($)):O:Number($)}return O})(E,I,v);{let O=XH.exec(I);if(O){let $=O[1]||"",oe=O[2],J=((A=O[3])&&A.indexOf(".")!==-1&&((A=A.replace(/0+$/,""))==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substring(0,A.length-1))),A),Se=$?E[oe.length+1]===".":E[oe.length]===".";if(!v.leadingZeros&&(oe.length>1||oe.length===1&&!Se))return E;{let Pe=Number(I),Ee=String(Pe);if(Pe===0||Pe===-0)return Pe;if(Ee.search(/[eE]/)!==-1)return v.eNotation?Pe:E;if(I.indexOf(".")!==-1)return Ee==="0"||Ee===J||Ee===`${$}${J}`?Pe:E;let ct=oe?J:I;return oe?ct===Ee||$+ct===Ee?Pe:E:ct===Ee||ct===$+Ee?Pe:E}}return E}var A})(f,_)}return f!==void 0?f:""}let Oy=De.getMetaDataSymbol();function pz(f,p){return CC(f,p)}function CC(f,p,_){let x,E={};for(let v=0;v<f.length;v++){let I=f[v],A=mz(I),O="";if(O=_===void 0?A:_+"."+A,A===p.textNodeName)x===void 0?x=I[A]:x+=""+I[A];else{if(A===void 0)continue;if(I[A]){let $=CC(I[A],p,O),oe=gz($,p);I[Oy]!==void 0&&($[Oy]=I[Oy]),I[":@"]?hz($,I[":@"],O,p):Object.keys($).length!==1||$[p.textNodeName]===void 0||p.alwaysCreateTextNode?Object.keys($).length===0&&(p.alwaysCreateTextNode?$[p.textNodeName]="":$=""):$=$[p.textNodeName],E[A]!==void 0&&E.hasOwnProperty(A)?(Array.isArray(E[A])||(E[A]=[E[A]]),E[A].push($)):p.isArray(A,O,oe)?E[A]=[$]:E[A]=$}}}return typeof x=="string"?x.length>0&&(E[p.textNodeName]=x):x!==void 0&&(E[p.textNodeName]=x),E}function mz(f){let p=Object.keys(f);for(let _=0;_<p.length;_++){let x=p[_];if(x!==":@")return x}}function hz(f,p,_,x){if(p){let E=Object.keys(p),v=E.length;for(let I=0;I<v;I++){let A=E[I];x.isArray(A,_+"."+A,!0,!0)?f[A]=[p[A]]:f[A]=p[A]}}}function gz(f,p){let{textNodeName:_}=p,x=Object.keys(f).length;return x===0||!(x!==1||!f[_]&&typeof f[_]!="boolean"&&f[_]!==0)}class yz{constructor(p){this.externalEntities={},this.options=(function(_){return Object.assign({},Y,_)})(p)}parse(p,_){if(typeof p!="string"){if(!p.toString)throw new Error("XML data is accepted in String or Bytes[] form.");p=p.toString()}if(_){_===!0&&(_={});let v=a(p,_);if(v!==!0)throw Error(`${v.err.msg}:${v.err.line}:${v.err.col}`)}let x=new tz(this.options);x.addExternalEntities(this.externalEntities);let E=x.parseXml(p);return this.options.preserveOrder||E===void 0?E:pz(E,this.options)}addEntity(p,_){if(_.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(p.indexOf("&")!==-1||p.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(_==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[p]=_}static getMetaDataSymbol(){return De.getMetaDataSymbol()}}function Sz(f,p){let _="";return p.format&&p.indentBy.length>0&&(_=`
`),RC(f,p,"",_)}function RC(f,p,_,x){let E="",v=!1;for(let I=0;I<f.length;I++){let A=f[I],O=_z(A);if(O===void 0)continue;let $="";if($=_.length===0?O:`${_}.${O}`,O===p.textNodeName){let Pe=A[O];Ez($,p)||(Pe=p.tagValueProcessor(O,Pe),Pe=AC(Pe,p)),v&&(E+=x),E+=Pe,v=!1;continue}if(O===p.cdataPropName){v&&(E+=x),E+=`<![CDATA[${A[O][0][p.textNodeName]}]]>`,v=!1;continue}if(O===p.commentPropName){E+=x+`<!--${A[O][0][p.textNodeName]}-->`,v=!0;continue}if(O[0]==="?"){let Pe=TC(A[":@"],p),Ee=O==="?xml"?"":x,ct=A[O][0][p.textNodeName];ct=ct.length!==0?" "+ct:"",E+=Ee+`<${O}${ct}${Pe}?>`,v=!0;continue}let oe=x;oe!==""&&(oe+=p.indentBy);let J=x+`<${O}${TC(A[":@"],p)}`,Se=RC(A[O],p,$,oe);p.unpairedTags.indexOf(O)!==-1?p.suppressUnpairedNode?E+=J+">":E+=J+"/>":Se&&Se.length!==0||!p.suppressEmptyNode?Se&&Se.endsWith(">")?E+=J+`>${Se}${x}</${O}>`:(E+=J+">",Se&&x!==""&&(Se.includes("/>")||Se.includes("</"))?E+=x+p.indentBy+Se+x:E+=Se,E+=`</${O}>`):E+=J+"/>",v=!0}return E}function _z(f){let p=Object.keys(f);for(let _=0;_<p.length;_++){let x=p[_];if(f.hasOwnProperty(x)&&x!==":@")return x}}function TC(f,p){let _="";if(f&&!p.ignoreAttributes)for(let x in f){if(!f.hasOwnProperty(x))continue;let E=p.attributeValueProcessor(x,f[x]);E=AC(E,p),E===!0&&p.suppressBooleanAttributes?_+=` ${x.substr(p.attributeNamePrefix.length)}`:_+=` ${x.substr(p.attributeNamePrefix.length)}="${E}"`}return _}function Ez(f,p){let _=(f=f.substr(0,f.length-p.textNodeName.length-1)).substr(f.lastIndexOf(".")+1);for(let x in p.stopNodes)if(p.stopNodes[x]===f||p.stopNodes[x]==="*."+_)return!0;return!1}function AC(f,p){if(f&&f.length>0&&p.processEntities)for(let _=0;_<p.entities.length;_++){let x=p.entities[_];f=f.replace(x.regex,x.val)}return f}let wz={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(f,p){return p},attributeValueProcessor:function(f,p){return p},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function yn(f){this.options=Object.assign({},wz,f),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=vC(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=xz),this.processTextOrObjNode=bz,this.options.format?(this.indentate=vz,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function bz(f,p,_,x){let E=this.j2x(f,_+1,x.concat(p));return f[this.options.textNodeName]!==void 0&&Object.keys(f).length===1?this.buildTextValNode(f[this.options.textNodeName],p,E.attrStr,_):this.buildObjectNode(E.val,p,E.attrStr,_)}function vz(f){return this.options.indentBy.repeat(f)}function xz(f){return!(!f.startsWith(this.options.attributeNamePrefix)||f===this.options.textNodeName)&&f.substr(this.attrPrefixLen)}yn.prototype.build=function(f){return this.options.preserveOrder?Sz(f,this.options):(Array.isArray(f)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(f={[this.options.arrayNodeName]:f}),this.j2x(f,0,[]).val)},yn.prototype.j2x=function(f,p,_){let x="",E="",v=_.join(".");for(let I in f)if(Object.prototype.hasOwnProperty.call(f,I))if(f[I]===void 0)this.isAttribute(I)&&(E+="");else if(f[I]===null)this.isAttribute(I)||I===this.options.cdataPropName?E+="":I[0]==="?"?E+=this.indentate(p)+"<"+I+"?"+this.tagEndChar:E+=this.indentate(p)+"<"+I+"/"+this.tagEndChar;else if(f[I]instanceof Date)E+=this.buildTextValNode(f[I],I,"",p);else if(typeof f[I]!="object"){let A=this.isAttribute(I);if(A&&!this.ignoreAttributesFn(A,v))x+=this.buildAttrPairStr(A,""+f[I]);else if(!A)if(I===this.options.textNodeName){let O=this.options.tagValueProcessor(I,""+f[I]);E+=this.replaceEntitiesValue(O)}else E+=this.buildTextValNode(f[I],I,"",p)}else if(Array.isArray(f[I])){let A=f[I].length,O="",$="";for(let oe=0;oe<A;oe++){let J=f[I][oe];if(J!==void 0)if(J===null)I[0]==="?"?E+=this.indentate(p)+"<"+I+"?"+this.tagEndChar:E+=this.indentate(p)+"<"+I+"/"+this.tagEndChar;else if(typeof J=="object")if(this.options.oneListGroup){let Se=this.j2x(J,p+1,_.concat(I));O+=Se.val,this.options.attributesGroupName&&J.hasOwnProperty(this.options.attributesGroupName)&&($+=Se.attrStr)}else O+=this.processTextOrObjNode(J,I,p,_);else if(this.options.oneListGroup){let Se=this.options.tagValueProcessor(I,J);Se=this.replaceEntitiesValue(Se),O+=Se}else O+=this.buildTextValNode(J,I,"",p)}this.options.oneListGroup&&(O=this.buildObjectNode(O,I,$,p)),E+=O}else if(this.options.attributesGroupName&&I===this.options.attributesGroupName){let A=Object.keys(f[I]),O=A.length;for(let $=0;$<O;$++)x+=this.buildAttrPairStr(A[$],""+f[I][A[$]])}else E+=this.processTextOrObjNode(f[I],I,p,_);return{attrStr:x,val:E}},yn.prototype.buildAttrPairStr=function(f,p){return p=this.options.attributeValueProcessor(f,""+p),p=this.replaceEntitiesValue(p),this.options.suppressBooleanAttributes&&p==="true"?" "+f:" "+f+'="'+p+'"'},yn.prototype.buildObjectNode=function(f,p,_,x){if(f==="")return p[0]==="?"?this.indentate(x)+"<"+p+_+"?"+this.tagEndChar:this.indentate(x)+"<"+p+_+this.closeTag(p)+this.tagEndChar;{let E="</"+p+this.tagEndChar,v="";return p[0]==="?"&&(v="?",E=""),!_&&_!==""||f.indexOf("<")!==-1?this.options.commentPropName!==!1&&p===this.options.commentPropName&&v.length===0?this.indentate(x)+`<!--${f}-->`+this.newLine:this.indentate(x)+"<"+p+_+v+this.tagEndChar+f+this.indentate(x)+E:this.indentate(x)+"<"+p+_+v+">"+f+E}},yn.prototype.closeTag=function(f){let p="";return this.options.unpairedTags.indexOf(f)!==-1?this.options.suppressUnpairedNode||(p="/"):p=this.options.suppressEmptyNode?"/":`></${f}`,p},yn.prototype.buildTextValNode=function(f,p,_,x){if(this.options.cdataPropName!==!1&&p===this.options.cdataPropName)return this.indentate(x)+`<![CDATA[${f}]]>`+this.newLine;if(this.options.commentPropName!==!1&&p===this.options.commentPropName)return this.indentate(x)+`<!--${f}-->`+this.newLine;if(p[0]==="?")return this.indentate(x)+"<"+p+_+"?"+this.tagEndChar;{let E=this.options.tagValueProcessor(p,f);return E=this.replaceEntitiesValue(E),E===""?this.indentate(x)+"<"+p+_+this.closeTag(p)+this.tagEndChar:this.indentate(x)+"<"+p+_+">"+E+"</"+p+this.tagEndChar}},yn.prototype.replaceEntitiesValue=function(f){if(f&&f.length>0&&this.options.processEntities)for(let p=0;p<this.options.entities.length;p++){let _=this.options.entities[p];f=f.replace(_.regex,_.val)}return f};let Cz={validate:a};l0.exports=t})()});var p0=b(gE=>{"use strict";Object.defineProperty(gE,"__esModule",{value:!0});gE.parseXML=dW;var cW=f0(),hE=new cW.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});hE.addEntity("#xD","\r");hE.addEntity("#10",`
`);function dW(e){return hE.parse(e,!0)}});var ei=b(kf=>{"use strict";var uW=p0();function lW(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function fW(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var Df=class{value;constructor(t){this.value=t}toString(){return fW(""+this.value)}},yE=class e{name;children;attributes={};static of(t,r,s){let n=new e(t);return r!==void 0&&n.addChildNode(new Df(r)),s!==void 0&&n.withName(s),n}constructor(t,r=[]){this.name=t,this.children=r}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,s=r){if(t[r]!=null){let n=e.of(r,t[r]).withName(s);this.c(n)}}l(t,r,s,n){t[r]!=null&&n().map(i=>{i.withName(s),this.c(i)})}lc(t,r,s,n){if(t[r]!=null){let o=n(),i=new e(s);o.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,s=this.attributes;for(let n of Object.keys(s)){let o=s[n];o!=null&&(r+=` ${n}="${lW(""+o)}"`)}return r+=t?`>${this.children.map(n=>n.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(kf,"parseXML",{enumerable:!0,get:function(){return uW.parseXML}});kf.XmlNode=yE;kf.XmlText=Df});var m0,h0,g0,Bn,Mf=S(()=>{m0=y(ei());ze();_e();h0=y(U()),g0=y(Fe());qn();Bn=class extends Lt{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new zs(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,s){let n=k.of(t),o=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(o).find(d=>!!d.getMemberTraits().eventPayload)){let d={},u=Object.keys(o)[0];return o[u].isBlobSchema()?d[u]=r:d[u]=this.read(o[u],r),d}let a=(this.serdeContext?.utf8Encoder??g0.toUtf8)(r),c=this.parseXml(a);return this.readSchema(t,s?c[s]:c)}readSchema(t,r){let s=k.of(t);if(s.isUnitSchema())return;let n=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(r))return this.readSchema(s,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!n.sparse,i=!!n.xmlFlattened;if(s.isListSchema()){let c=s.getValueSchema(),d=[],u=c.getMergedTraits().xmlName??"member",l=i?r:(r[0]??r)[u],h=Array.isArray(l)?l:[l];for(let m of h)(m!=null||o)&&d.push(this.readSchema(c,m));return d}let a={};if(s.isMapSchema()){let c=s.getKeySchema(),d=s.getValueSchema(),u;i?u=Array.isArray(r)?r:[r]:u=Array.isArray(r.entry)?r.entry:[r.entry];let l=c.getMergedTraits().xmlName??"key",h=d.getMergedTraits().xmlName??"value";for(let m of u){let g=m[l],w=m[h];(w!=null||o)&&(a[g]=this.readSchema(d,w))}return a}if(s.isStructSchema()){for(let[c,d]of s.structIterator()){let u=d.getMergedTraits(),l=u.httpPayload?u.xmlName??d.getName():d.getMemberTraits().xmlName??c;r[l]!=null&&(a[c]=this.readSchema(d,r[l]))}return a}if(s.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,r)}parseXml(t){if(t.length){let r;try{r=(0,m0.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let s="#text",n=Object.keys(r)[0],o=r[n];return o[s]&&(o[n]=o[s],delete o[s]),(0,h0.getValueFromTextNode)(o)}return{}}}});var y0,S0,Lf,_0=S(()=>{ze();_e();ut();y0=y(U()),S0=y(qe());qn();Lf=class extends Lt{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,s=""){this.buffer===void 0&&(this.buffer="");let n=k.of(t);if(s&&!s.endsWith(".")&&(s+="."),n.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??S0.toBase64)(r)));else if(n.isBooleanSchema()||n.isNumericSchema()||n.isStringSchema())r!=null?(this.writeKey(s),this.writeValue(String(r))):n.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,kt.v4)()));else if(n.isBigIntegerSchema())r!=null&&(this.writeKey(s),this.writeValue(String(r)));else if(n.isBigDecimalSchema())r!=null&&(this.writeKey(s),this.writeValue(r instanceof pe?r.string:String(r)));else if(n.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(s),ot(n,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,y0.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(n.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${n.getName(!0)}`);if(n.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let o=n.getValueSchema(),i=this.settings.flattenLists||n.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let d=this.getKey("member",o.getMergedTraits().xmlName),u=i?`${s}${a}`:`${s}${d}.${a}`;this.write(o,c,u),++a}}}else if(n.isMapSchema()){if(r&&typeof r=="object"){let o=n.getKeySchema(),i=n.getValueSchema(),a=n.getMergedTraits().xmlFlattened,c=1;for(let[d,u]of Object.entries(r)){if(u==null)continue;let l=this.getKey("key",o.getMergedTraits().xmlName),h=a?`${s}${c}.${l}`:`${s}entry.${c}.${l}`,m=this.getKey("value",i.getMergedTraits().xmlName),g=a?`${s}${c}.${m}`:`${s}entry.${c}.${m}`;this.write(o,d,h),this.write(i,u,g),++c}}}else if(n.isStructSchema()){if(r&&typeof r=="object")for(let[o,i]of n.structIterator()){if(r[o]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(o,i.getMergedTraits().xmlName),c=`${s}${a}`;this.write(i,r[o],c)}}else if(!n.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${n.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let s=r??t;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${ur(t)}=`}writeValue(t){this.buffer+=ur(t)}}});var sa,SE=S(()=>{ze();_e();ea();Mf();_0();sa=class extends lr{options;serializer;deserializer;mixin=new xr;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Lf(r),this.deserializer=new Bn(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":"application/x-www-form-urlencoded"}),(Ht(t.input)==="unit"||!n.body)&&(n.body="");let o=t.name.split("#")[1]??t.name;return n.body=`Action=${o}&Version=${this.options.version}`+n.body,n.body.endsWith("&")&&(n.body=n.body.slice(-1)),n}async deserializeResponse(t,r,s){let n=this.deserializer,o=k.of(t.output),i={};if(s.statusCode>=300){let l=await Jt(s.body,r);l.byteLength>0&&Object.assign(i,await n.read(15,l)),await this.handleError(t,r,s,i,this.deserializeMetadata(s))}for(let l in s.headers){let h=s.headers[l];delete s.headers[l],s.headers[l.toLowerCase()]=h}let a=t.name.split("#")[1]??t.name,c=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,d=await Jt(s.body,r);return d.byteLength>0&&Object.assign(i,await n.read(o,d,c)),{$metadata:this.deserializeMetadata(s),...i}}useNestedResult(){return!0}async handleError(t,r,s,n,o){let i=this.loadQueryErrorCode(s,n)??"Unknown",a=this.loadQueryError(n),c=this.loadQueryErrorMessage(n);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:d,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,a,o,(w,C)=>{try{return w.getSchema(C)}catch{return w.find(N=>k.of(N).getMergedTraits().awsQueryError?.[0]===C)}}),l=k.of(d),h=ve.for(d[1]).getErrorCtor(d)??Error,m=new h(c),g={Error:a.Error};for(let[w,C]of l.structIterator()){let R=C.getMergedTraits().xmlName??w,N=a[R]??n[R];g[w]=this.deserializer.readSchema(C,N)}throw Object.assign(m,u,{$fault:l.getMergedTraits().error,message:c},g)}loadQueryErrorCode(t,r){let s=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(s!==void 0)return s;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var qf,E0=S(()=>{SE();qf=class extends sa{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var w0,b0,na,Ff,$f,_E=S(()=>{w0=y(ei()),b0=y(U());fE();na=(e,t)=>Cf(e,t).then(r=>{if(r.length){let s;try{s=(0,w0.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let n="#text",o=Object.keys(s)[0],i=s[o];return i[n]&&(i[o]=i[n],delete i[n]),(0,b0.getValueFromTextNode)(i)}return{}}),Ff=async(e,t)=>{let r=await na(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},$f=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var Cr,EE,Uf,oa,wE=S(()=>{Cr=y(ei());ze();_e();ut();EE=y(U()),Uf=y(qe());qn();oa=class extends Lt{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let s=k.of(t);if(s.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(s.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Uf.fromBase64)(r);else{this.buffer=this.writeStruct(s,r,void 0);let n=s.getMergedTraits();n.httpPayload&&!n.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,s){let n=t.getMergedTraits(),o=t.isMemberSchema()&&!n.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():n.xmlName??t.getName();if(!o||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=Cr.XmlNode.of(o),[a,c]=this.getXmlnsAttribute(t,s);for(let[d,u]of t.structIterator()){let l=r[d];if(l!=null||u.isIdempotencyToken()){if(u.getMergedTraits().xmlAttribute){i.addAttribute(u.getMergedTraits().xmlName??d,this.writeSimple(u,l));continue}if(u.isListSchema())this.writeList(u,l,i,c);else if(u.isMapSchema())this.writeMap(u,l,i,c);else if(u.isStructSchema())i.addChildNode(this.writeStruct(u,l,c));else{let h=Cr.XmlNode.of(u.getMergedTraits().xmlName??u.getMemberName());this.writeSimpleInto(u,l,h,c),i.addChildNode(h)}}}return c&&i.addAttribute(a,c),i}writeList(t,r,s,n){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let o=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),c=!!a.sparse,d=!!o.xmlFlattened,[u,l]=this.getXmlnsAttribute(t,n),h=(m,g)=>{if(i.isListSchema())this.writeList(i,Array.isArray(g)?g:[g],m,l);else if(i.isMapSchema())this.writeMap(i,g,m,l);else if(i.isStructSchema()){let w=this.writeStruct(i,g,l);m.addChildNode(w.withName(d?o.xmlName??t.getMemberName():a.xmlName??"member"))}else{let w=Cr.XmlNode.of(d?o.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,g,w,l),m.addChildNode(w)}};if(d)for(let m of r)(c||m!=null)&&h(s,m);else{let m=Cr.XmlNode.of(o.xmlName??t.getMemberName());l&&m.addAttribute(u,l);for(let g of r)(c||g!=null)&&h(m,g);s.addChildNode(m)}}writeMap(t,r,s,n,o=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),d=a.getMergedTraits().xmlName??"key",u=t.getValueSchema(),l=u.getMergedTraits(),h=l.xmlName??"value",m=!!l.sparse,g=!!i.xmlFlattened,[w,C]=this.getXmlnsAttribute(t,n),R=(N,B,j)=>{let Y=Cr.XmlNode.of(d,B),[we,De]=this.getXmlnsAttribute(a,C);De&&Y.addAttribute(we,De),N.addChildNode(Y);let te=Cr.XmlNode.of(h);u.isListSchema()?this.writeList(u,j,te,C):u.isMapSchema()?this.writeMap(u,j,te,C,!0):u.isStructSchema()?te=this.writeStruct(u,j,C):this.writeSimpleInto(u,j,te,C),N.addChildNode(te)};if(g){for(let[N,B]of Object.entries(r))if(m||B!=null){let j=Cr.XmlNode.of(i.xmlName??t.getMemberName());R(j,N,B),s.addChildNode(j)}}else{let N;o||(N=Cr.XmlNode.of(i.xmlName??t.getMemberName()),C&&N.addAttribute(w,C),s.addChildNode(N));for(let[B,j]of Object.entries(r))if(m||j!=null){let Y=Cr.XmlNode.of("entry");R(Y,B,j),(o?s:N).addChildNode(Y)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=k.of(t),n=null;if(r&&typeof r=="object")if(s.isBlobSchema())n=(this.serdeContext?.base64Encoder??Uf.toBase64)(r);else if(s.isTimestampSchema()&&r instanceof Date)switch(ot(s,this.settings)){case 5:n=r.toISOString().replace(".000Z","Z");break;case 6:n=(0,EE.dateToUtcString)(r);break;case 7:n=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),n=(0,EE.dateToUtcString)(r);break}else{if(s.isBigDecimalSchema()&&r)return r instanceof pe?r.string:String(r);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(n=String(r)),s.isStringSchema()&&(r===void 0&&s.isIdempotencyToken()?n=(0,kt.v4)():n=String(r)),n===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${r}`);return n}writeSimpleInto(t,r,s,n){let o=this.writeSimple(t,r),i=k.of(t),a=new Cr.XmlText(o),[c,d]=this.getXmlnsAttribute(i,n);d&&s.addAttribute(c,d),s.addChildNode(a)}getXmlnsAttribute(t,r){let s=t.getMergedTraits(),[n,o]=s.xmlNamespace??[];return o&&o!==r?[n?`xmlns:${n}`:"xmlns",o]:[void 0,void 0]}}});var ia,bE=S(()=>{qn();Mf();wE();ia=class extends Lt{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new oa(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Bn(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var jf,v0=S(()=>{ze();_e();ea();_E();bE();jf=class extends Yr{codec;serializer;deserializer;mixin=new xr;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new ia(r),this.serializer=new Zr(this.codec.createSerializer(),r),this.deserializer=new Xr(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=k.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]===this.getDefaultContentType()&&typeof n.body=="string"&&(n.body='<?xml version="1.0" encoding="UTF-8"?>'+n.body),n}async deserializeResponse(t,r,s){return super.deserializeResponse(t,r,s)}async handleError(t,r,s,n,o){let i=$f(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=k.of(a),u=n.Error?.message??n.Error?.Message??n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().xmlName??g,R=n.Error?.[C]??n[C];m[g]=this.codec.createDeserializer().readSchema(w,R)}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}getDefaultContentType(){return"application/xml"}}});var x0={};dt(x0,{AwsEc2QueryProtocol:()=>qf,AwsJson1_0Protocol:()=>Pf,AwsJson1_1Protocol:()=>Nf,AwsJsonRpcProtocol:()=>jn,AwsQueryProtocol:()=>sa,AwsRestJsonProtocol:()=>Of,AwsRestXmlProtocol:()=>jf,AwsSmithyRpcV2CborProtocol:()=>vf,JsonCodec:()=>Un,JsonShapeDeserializer:()=>ta,JsonShapeSerializer:()=>ra,XmlCodec:()=>ia,XmlShapeDeserializer:()=>Bn,XmlShapeSerializer:()=>oa,_toBool:()=>MP,_toNum:()=>LP,_toStr:()=>kP,awsExpectUnion:()=>d0,loadRestJsonErrorCode:()=>$n,loadRestXmlErrorCode:()=>$f,parseJsonBody:()=>Zo,parseJsonErrorBody:()=>Rf,parseXmlBody:()=>na,parseXmlErrorBody:()=>Ff});var vE=S(()=>{DP();qP();o0();i0();If();a0();Af();pE();mE();u0();ed();E0();SE();v0();bE();Mf();wE();_E()});var Js={};dt(Js,{AWSSDKSigV4Signer:()=>S_,AwsEc2QueryProtocol:()=>qf,AwsJson1_0Protocol:()=>Pf,AwsJson1_1Protocol:()=>Nf,AwsJsonRpcProtocol:()=>jn,AwsQueryProtocol:()=>sa,AwsRestJsonProtocol:()=>Of,AwsRestXmlProtocol:()=>jf,AwsSdkSigV4ASigner:()=>Kc,AwsSdkSigV4Signer:()=>Yt,AwsSmithyRpcV2CborProtocol:()=>vf,JsonCodec:()=>Un,JsonShapeDeserializer:()=>ta,JsonShapeSerializer:()=>ra,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Qi,NODE_SIGV4A_CONFIG_OPTIONS:()=>VI,XmlCodec:()=>ia,XmlShapeDeserializer:()=>Bn,XmlShapeSerializer:()=>oa,_toBool:()=>MP,_toNum:()=>LP,_toStr:()=>kP,awsExpectUnion:()=>d0,emitWarningIfUnsupportedVersion:()=>Vi,getBearerTokenEnvKey:()=>cf,loadRestJsonErrorCode:()=>$n,loadRestXmlErrorCode:()=>$f,parseJsonBody:()=>Zo,parseJsonErrorBody:()=>Rf,parseXmlBody:()=>na,parseXmlErrorBody:()=>Ff,resolveAWSSDKSigV4Config:()=>gP,resolveAwsSdkSigV4AConfig:()=>zI,resolveAwsSdkSigV4Config:()=>Yo,setCredentialFeature:()=>Pn,setFeature:()=>AI,setTokenFeature:()=>PI,state:()=>af,validateSigningProperties:()=>Wi});var vt=S(()=>{ns();F_();vE()});var ca=b(aa=>{"use strict";var pW=(Me(),Q(hs)),mW=ss(),hW=ye(),ys=(vt(),Q(Js)),A0=void 0;function gW(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function yW(e){let t=pW.normalizeProvider(e.userAgentAppId??A0),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let s=await t();if(!gW(s)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof s!="string"?n?.warn("userAgentAppId must be a string or undefined."):s.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return s}})}var SW=/\d{12}\.ddb/;async function _W(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&ys.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?ys.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):ys.setFeature(e,"RETRY_MODE_STANDARD","E"):ys.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let o=e.endpointV2;switch(String(o?.url?.hostname).match(SW)&&ys.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":ys.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":ys.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":ys.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let o=n;o.accountId&&ys.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))ys.setFeature(e,i,a)}}var C0="user-agent",xE="x-amz-user-agent",R0=" ",CE="/",EW=/[^!$%&'*+\-.^_`|~\w]/g,wW=/[^!$%&'*+\-.^_`|~\w#]/g,T0="-",bW=1024;function vW(e){let t="";for(let r in e){let s=e[r];if(t.length+s.length+1<=bW){t.length?t+=","+s:t+=s;continue}break}return t}var I0=e=>(t,r)=>async s=>{let{request:n}=s;if(!hW.HttpRequest.isInstance(n))return t(s);let{headers:o}=n,i=r?.userAgent?.map(Bf)||[],a=(await e.defaultUserAgentProvider()).map(Bf);await _W(r,e,s);let c=r;a.push(`m/${vW(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let d=e?.customUserAgent?.map(Bf)||[],u=await e.userAgentAppId();u&&a.push(Bf(["app",`${u}`]));let l=mW.getUserAgentPrefix(),h=(l?[l]:[]).concat([...a,...i,...d]).join(R0),m=[...a.filter(g=>g.startsWith("aws-sdk-")),...d].join(R0);return e.runtime!=="browser"?(m&&(o[xE]=o[xE]?`${o[C0]} ${m}`:m),o[C0]=h):o[xE]=h,t({...s,request:n})},Bf=e=>{let t=e[0].split(CE).map(i=>i.replace(EW,T0)).join(CE),r=e[1]?.replace(wW,T0),s=t.indexOf(CE),n=t.substring(0,s),o=t.substring(s+1);return n==="api"&&(o=o.toLowerCase()),[n,o,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},P0={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},xW=e=>({applyToStack:t=>{t.add(I0(e),P0)}});aa.DEFAULT_UA_APP_ID=A0;aa.getUserAgentMiddlewareOptions=P0;aa.getUserAgentPlugin=xW;aa.resolveUserAgentConfig=yW;aa.userAgentMiddleware=I0});var N0=b(da=>{"use strict";var CW=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},RW=(e,t,r)=>{if(!(t in e))return;let s=parseInt(e[t],10);if(Number.isNaN(s))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return s};da.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(da.SelectorType||(da.SelectorType={}));da.booleanSelector=CW;da.numberSelector=RW});var et=b(xt=>{"use strict";var Hn=N0(),Hf=gt(),TW=ts(),k0="AWS_USE_DUALSTACK_ENDPOINT",M0="use_dualstack_endpoint",AW=!1,IW={environmentVariableSelector:e=>Hn.booleanSelector(e,k0,Hn.SelectorType.ENV),configFileSelector:e=>Hn.booleanSelector(e,M0,Hn.SelectorType.CONFIG),default:!1},L0="AWS_USE_FIPS_ENDPOINT",q0="use_fips_endpoint",PW=!1,NW={environmentVariableSelector:e=>Hn.booleanSelector(e,L0,Hn.SelectorType.ENV),configFileSelector:e=>Hn.booleanSelector(e,q0,Hn.SelectorType.CONFIG),default:!1},OW=e=>{let{tls:t,endpoint:r,urlParser:s,useDualstackEndpoint:n}=e;return Object.assign(e,{tls:t??!0,endpoint:Hf.normalizeProvider(typeof r=="string"?s(r):r),isCustomEndpoint:!0,useDualstackEndpoint:Hf.normalizeProvider(n??!1)})},DW=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let n=await e.useDualstackEndpoint(),o=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:n,useFipsEndpoint:o})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},kW=e=>{let t=Hf.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:s,urlParser:n,tls:o}=e;return Object.assign(e,{tls:o??!0,endpoint:r?Hf.normalizeProvider(typeof r=="string"?n(r):r):()=>DW({...e,useDualstackEndpoint:t,useFipsEndpoint:s}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},F0="AWS_REGION",$0="region",MW={environmentVariableSelector:e=>e[F0],configFileSelector:e=>e[$0],default:()=>{throw new Error("Region is missing")}},LW={preferredFile:"credentials"},O0=new Set,qW=(e,t=TW.isValidHostLabel)=>{if(!O0.has(e)&&!t(e))if(e==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else O0.add(e)},U0=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),FW=e=>U0(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,$W=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{let s=typeof t=="function"?await t():t,n=FW(s);return qW(n),n},useFipsEndpoint:async()=>{let s=typeof t=="string"?t:await t();return U0(s)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},D0=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:s})=>t===s.includes("fips")&&r===s.includes("dualstack"))?.hostname,UW=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),jW=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",BW=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:s})=>{if(t)return t;if(s){let n=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=e.match(n);if(o)return o[0].slice(1,-1)}},HW=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:s,regionHash:n,partitionHash:o})=>{let i=jW(e,{partitionHash:o}),a=e in n?e:o[i]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:r},d=D0(n[a]?.variants,c),u=D0(o[i]?.variants,c),l=UW(a,{regionHostname:d,partitionHostname:u});if(l===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let h=BW(l,{signingRegion:n[a]?.signingRegion,regionRegex:o[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:s,hostname:l,...h&&{signingRegion:h},...n[a]?.signingService&&{signingService:n[a].signingService}}};xt.CONFIG_USE_DUALSTACK_ENDPOINT=M0;xt.CONFIG_USE_FIPS_ENDPOINT=q0;xt.DEFAULT_USE_DUALSTACK_ENDPOINT=AW;xt.DEFAULT_USE_FIPS_ENDPOINT=PW;xt.ENV_USE_DUALSTACK_ENDPOINT=k0;xt.ENV_USE_FIPS_ENDPOINT=L0;xt.NODE_REGION_CONFIG_FILE_OPTIONS=LW;xt.NODE_REGION_CONFIG_OPTIONS=MW;xt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=IW;xt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=NW;xt.REGION_ENV_NAME=F0;xt.REGION_INI_NAME=$0;xt.getRegionInfo=HW;xt.resolveCustomEndpointsConfig=OW;xt.resolveEndpointsConfig=kW;xt.resolveRegionConfig=$W});var Ys=b(zf=>{"use strict";var zW=ye(),j0="content-length";function B0(e){return t=>async r=>{let s=r.request;if(zW.HttpRequest.isInstance(s)){let{body:n,headers:o}=s;if(n&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(j0)===-1)try{let i=e(n);s.headers={...s.headers,[j0]:String(i)}}catch{}}return t({...r,request:s})}}var H0={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},VW=e=>({applyToStack:t=>{t.add(B0(e.bodyLengthChecker),H0)}});zf.contentLengthMiddleware=B0;zf.contentLengthMiddlewareOptions=H0;zf.getContentLengthPlugin=VW});var TE=b(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.getHomeDir=void 0;var GW=require("os"),WW=require("path"),RE={},QW=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",KW=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:s=`C:${WW.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${s}${r}`;let n=QW();return RE[n]||(RE[n]=(0,GW.homedir)()),RE[n]};Vf.getHomeDir=KW});var AE=b(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.getSSOTokenFilepath=void 0;var JW=require("crypto"),YW=require("path"),XW=TE(),ZW=e=>{let r=(0,JW.createHash)("sha1").update(e).digest("hex");return(0,YW.join)((0,XW.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Gf.getSSOTokenFilepath=ZW});var z0=b(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.getSSOTokenFromFile=zn.tokenIntercept=void 0;var eQ=require("fs"),tQ=AE(),{readFile:rQ}=eQ.promises;zn.tokenIntercept={};var sQ=async e=>{if(zn.tokenIntercept[e])return zn.tokenIntercept[e];let t=(0,tQ.getSSOTokenFilepath)(e),r=await rQ(t,"utf8");return JSON.parse(r)};zn.getSSOTokenFromFile=sQ});var V0=b(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.slurpFile=fr.fileIntercept=fr.filePromisesHash=void 0;var nQ=require("fs"),{readFile:oQ}=nQ.promises;fr.filePromisesHash={};fr.fileIntercept={};var iQ=(e,t)=>fr.fileIntercept[e]!==void 0?fr.fileIntercept[e]:((!fr.filePromisesHash[e]||t?.ignoreCache)&&(fr.filePromisesHash[e]=oQ(e,"utf8")),fr.filePromisesHash[e]);fr.slurpFile=iQ});var Gt=b(Xt=>{"use strict";var td=TE(),G0=AE(),IE=z0(),Wf=require("path"),Qf=vn(),rd=V0(),Q0="AWS_PROFILE",K0="default",aQ=e=>e.profile||process.env[Q0]||K0,ti=".",cQ=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(ti);return r===-1?!1:Object.values(Qf.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,s])=>{let n=r.indexOf(ti),o=r.substring(0,n)===Qf.IniSectionType.PROFILE?r.substring(n+1):r;return t[o]=s,t},{...e.default&&{default:e.default}}),dQ="AWS_CONFIG_FILE",J0=()=>process.env[dQ]||Wf.join(td.getHomeDir(),".aws","config"),uQ="AWS_SHARED_CREDENTIALS_FILE",lQ=()=>process.env[uQ]||Wf.join(td.getHomeDir(),".aws","credentials"),fQ=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,pQ=["__proto__","profile __proto__"],PE=e=>{let t={},r,s;for(let n of e.split(/\r?\n/)){let o=n.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,s=void 0;let a=o.substring(1,o.length-1),c=fQ.exec(a);if(c){let[,d,,u]=c;Object.values(Qf.IniSectionType).includes(d)&&(r=[d,u].join(ti))}else r=a;if(pQ.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[c,d]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(d==="")s=c;else{s&&n.trimStart()===n&&(s=void 0),t[r]=t[r]||{};let u=s?[s,c].join(ti):c;t[r][u]=d}}}}return t},W0=()=>({}),Y0=async(e={})=>{let{filepath:t=lQ(),configFilepath:r=J0()}=e,s=td.getHomeDir(),n="~/",o=t;t.startsWith(n)&&(o=Wf.join(s,t.slice(2)));let i=r;r.startsWith(n)&&(i=Wf.join(s,r.slice(2)));let a=await Promise.all([rd.slurpFile(i,{ignoreCache:e.ignoreCache}).then(PE).then(cQ).catch(W0),rd.slurpFile(o,{ignoreCache:e.ignoreCache}).then(PE).catch(W0)]);return{configFile:a[0],credentialsFile:a[1]}},mQ=e=>Object.entries(e).filter(([t])=>t.startsWith(Qf.IniSectionType.SSO_SESSION+ti)).reduce((t,[r,s])=>({...t,[r.substring(r.indexOf(ti)+1)]:s}),{}),hQ=()=>({}),gQ=async(e={})=>rd.slurpFile(e.configFilepath??J0()).then(PE).then(mQ).catch(hQ),yQ=(...e)=>{let t={};for(let r of e)for(let[s,n]of Object.entries(r))t[s]!==void 0?Object.assign(t[s],n):t[s]=n;return t},SQ=async e=>{let t=await Y0(e);return yQ(t.configFile,t.credentialsFile)},_Q={getFileRecord(){return rd.fileIntercept},interceptFile(e,t){rd.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return IE.tokenIntercept},interceptToken(e,t){IE.tokenIntercept[e]=t}};Object.defineProperty(Xt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return IE.getSSOTokenFromFile}});Xt.CONFIG_PREFIX_SEPARATOR=ti;Xt.DEFAULT_PROFILE=K0;Xt.ENV_PROFILE=Q0;Xt.externalDataInterceptor=_Q;Xt.getProfileName=aQ;Xt.loadSharedConfigFiles=Y0;Xt.loadSsoSessionData=gQ;Xt.parseKnownFiles=SQ;Object.keys(td).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xt,e)&&Object.defineProperty(Xt,e,{enumerable:!0,get:function(){return td[e]}})});Object.keys(G0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xt,e)&&Object.defineProperty(Xt,e,{enumerable:!0,get:function(){return G0[e]}})})});var Zt=b(eN=>{"use strict";var sd=Le(),X0=Gt();function Z0(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var EQ=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new sd.CredentialsProviderError(r.message||`Not found in ENV: ${Z0(e.toString())}`,{logger:t?.logger})}},wQ=(e,{preferredFile:t="config",...r}={})=>async()=>{let s=X0.getProfileName(r),{configFile:n,credentialsFile:o}=await X0.loadSharedConfigFiles(r),i=o[s]||{},a=n[s]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let u=e(c,t==="config"?n:o);if(u===void 0)throw new Error;return u}catch(d){throw new sd.CredentialsProviderError(d.message||`Not found in config files w/ profile [${s}]: ${Z0(e.toString())}`,{logger:r.logger})}},bQ=e=>typeof e=="function",vQ=e=>bQ(e)?async()=>await e():sd.fromStatic(e),xQ=({environmentVariableSelector:e,configFileSelector:t,default:r},s={})=>{let{signingName:n,logger:o}=s,i={signingName:n,logger:o};return sd.memoize(sd.chain(EQ(e,i),wQ(t,s),vQ(r)))};eN.loadConfig=xQ});var nN=b(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.getEndpointUrlConfig=void 0;var tN=Gt(),rN="AWS_ENDPOINT_URL",sN="endpoint_url",CQ=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(o=>o.toUpperCase()),s=t[[rN,...r].join("_")];if(s)return s;let n=t[rN];if(n)return n},configFileSelector:(t,r)=>{if(r&&t.services){let n=r[["services",t.services].join(tN.CONFIG_PREFIX_SEPARATOR)];if(n){let o=e.split(" ").map(a=>a.toLowerCase()),i=n[[o.join("_"),sN].join(tN.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let s=t[sN];if(s)return s},default:void 0});Kf.getEndpointUrlConfig=CQ});var oN=b(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.getEndpointFromConfig=void 0;var RQ=Zt(),TQ=nN(),AQ=async e=>(0,RQ.loadConfig)((0,TQ.getEndpointUrlConfig)(e??""))();Jf.getEndpointFromConfig=AQ});var Wt=b(Xs=>{"use strict";var aN=oN(),iN=vr(),IQ=(Me(),Q(hs)),Yf=gt(),PQ=wr(),NQ=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),LQ(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!MQ(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},OQ=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,DQ=/(\d+\.){3}\d+/,kQ=/\.\./,MQ=e=>OQ.test(e)&&!DQ.test(e)&&!kQ.test(e),LQ=e=>{let[t,r,s,,,n]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,i=!!(o&&r&&s&&n);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},qQ=(e,t,r)=>{let s=async()=>{let n=r[e]??r[t];return typeof n=="function"?n():n};return e==="credentialScope"||t==="CredentialScope"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return n?.credentialScope??n?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return n?.accountId??n?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let n=await s();if(n&&typeof n=="object"){if("url"in n)return n.url.href;if("hostname"in n){let{protocol:o,hostname:i,port:a,path:c}=n;return`${o}//${i}${a?":"+a:""}${c}`}}return n}:s},NE=e=>typeof e=="object"?"url"in e?iN.parseUrl(e.url):e:iN.parseUrl(e),cN=async(e,t,r,s)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await aN.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(NE(i)),r.isCustomEndpoint=!0)}let n=await dN(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,s)},dN=async(e,t,r)=>{let s={},n=t?.getEndpointParameterInstructions?.()||{};for(let[o,i]of Object.entries(n))switch(i.type){case"staticContextParams":s[o]=i.value;break;case"contextParams":s[o]=e[i.name];break;case"clientContextParams":case"builtInParams":s[o]=await qQ(i.name,o,r)();break;case"operationContextParams":s[o]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(n).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await NQ(s),s},uN=({config:e,instructions:t})=>(r,s)=>async n=>{e.isCustomEndpoint&&IQ.setFeature(s,"ENDPOINT_OVERRIDE","N");let o=await cN(n.input,{getEndpointParameterInstructions(){return t}},{...e},s);s.endpointV2=o,s.authSchemes=o.properties?.authSchemes;let i=s.authSchemes?.[0];if(i){s.signing_region=i.signingRegion,s.signing_service=i.signingName;let c=Yf.getSmithyContext(s)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...n})},lN={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:PQ.serializerMiddlewareOption.name},FQ=(e,t)=>({applyToStack:r=>{r.addRelativeTo(uN({config:e,instructions:t}),lN)}}),$Q=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:s,useFipsEndpoint:n}=e,o=r!=null?async()=>NE(await Yf.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:o,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Yf.normalizeProvider(s??!1),useFipsEndpoint:Yf.normalizeProvider(n??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!c&&(c=aN.getEndpointFromConfig(e.serviceId)),c),a},UQ=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};Xs.endpointMiddleware=uN;Xs.endpointMiddlewareOptions=lN;Xs.getEndpointFromInstructions=cN;Xs.getEndpointPlugin=FQ;Xs.resolveEndpointConfig=$Q;Xs.resolveEndpointRequiredConfig=UQ;Xs.resolveParams=dN;Xs.toEndpointV1=NE});var DE=b(Vn=>{"use strict";var jQ=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],BQ=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],HQ=["TimeoutError","RequestTimeout","RequestTimeoutException"],zQ=[500,502,503,504],VQ=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],GQ=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],fN=e=>e?.$retryable!==void 0,WQ=e=>jQ.includes(e.name),pN=e=>e.$metadata?.clockSkewCorrected,mN=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},QQ=e=>e.$metadata?.httpStatusCode===429||BQ.includes(e.name)||e.$retryable?.throttling==!0,OE=(e,t=0)=>fN(e)||pN(e)||HQ.includes(e.name)||VQ.includes(e?.code||"")||GQ.includes(e?.code||"")||zQ.includes(e.$metadata?.httpStatusCode||0)||mN(e)||e.cause!==void 0&&t<=10&&OE(e.cause,t+1),KQ=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!OE(e)}return!1};Vn.isBrowserNetworkError=mN;Vn.isClockSkewCorrectedError=pN;Vn.isClockSkewError=WQ;Vn.isRetryableByTrait=fN;Vn.isServerError=KQ;Vn.isThrottlingError=QQ;Vn.isTransientError=OE});var Ss=b(tt=>{"use strict";var JQ=DE();tt.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(tt.RETRY_MODES||(tt.RETRY_MODES={}));var kE=3,YQ=tt.RETRY_MODES.STANDARD,Xf=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>e.setTimeoutFn(s,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),JQ.isThrottlingError(t)){let n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let s=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let s=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},nd=100,FE=20*1e3,gN=500,ME=500,yN=5,SN=10,_N=1,XQ="amz-sdk-invocation-id",ZQ="amz-sdk-request",eK=()=>{let e=nd;return{computeNextBackoffDelay:s=>Math.floor(Math.min(FE,Math.random()*2**s*e)),setDelayBase:s=>{e=s}}},hN=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(FE,e),getRetryCost:()=>r}),od=class{maxAttempts;mode=tt.RETRY_MODES.STANDARD;capacity=ME;retryBackoffStrategy=eK();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return hN({retryDelay:nd,retryCount:0})}async refreshRetryTokenForRetry(t,r){let s=await this.getMaxAttempts();if(this.shouldRetry(t,r,s)){let n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?gN:nd);let o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(n);return this.capacity-=a,hN({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(ME,this.capacity+(t.getRetryCost()??_N))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${kE}`),kE}}shouldRetry(t,r,s){return t.getRetryCount()+1<s&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?SN:yN}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},LE=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=tt.RETRY_MODES.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:s}=r??{};this.rateLimiter=s??new Xf,this.standardRetryStrategy=new od(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},qE=class extends od{computeNextBackoffDelay;constructor(t,r=nd){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let s=await super.refreshRetryTokenForRetry(t,r);return s.getRetryDelay=()=>this.computeNextBackoffDelay(s.getRetryCount()),s}};tt.AdaptiveRetryStrategy=LE;tt.ConfiguredRetryStrategy=qE;tt.DEFAULT_MAX_ATTEMPTS=kE;tt.DEFAULT_RETRY_DELAY_BASE=nd;tt.DEFAULT_RETRY_MODE=YQ;tt.DefaultRateLimiter=Xf;tt.INITIAL_RETRY_TOKENS=ME;tt.INVOCATION_ID_HEADER=XQ;tt.MAXIMUM_RETRY_DELAY=FE;tt.NO_RETRY_INCREMENT=_N;tt.REQUEST_HEADER=ZQ;tt.RETRY_COST=yN;tt.StandardRetryStrategy=od;tt.THROTTLING_RETRY_DELAY_BASE=gN;tt.TIMEOUT_RETRY_COST=SN});var EN=b(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.isStreamingPayload=void 0;var tK=require("stream"),rK=e=>e?.body instanceof tK.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;Zf.isStreamingPayload=rK});var Ct=b(mt=>{"use strict";var Ve=Ss(),ua=ye(),Gn=DE(),bN=HS(),wN=gt(),sK=U(),nK=EN(),oK=(e,t)=>{let r=e,s=Ve.NO_RETRY_INCREMENT,n=Ve.RETRY_COST,o=Ve.TIMEOUT_RETRY_COST,i=e,a=l=>l.name==="TimeoutError"?o:n,c=l=>a(l)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:l=>{if(!c(l))throw new Error("No retry token available");let h=a(l);return i-=h,h},releaseRetryTokens:l=>{i+=l??s,i=Math.min(i,r)}})},vN=(e,t)=>Math.floor(Math.min(Ve.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),xN=e=>e?Gn.isRetryableByTrait(e)||Gn.isClockSkewError(e)||Gn.isThrottlingError(e)||Gn.isTransientError(e):!1,CN=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),ep=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=Ve.RETRY_MODES.STANDARD;constructor(t,r){this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??xN,this.delayDecider=r?.delayDecider??vN,this.retryQuota=r?.retryQuota??oK(Ve.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,s){return r<s&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=Ve.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,s){let n,o=0,i=0,a=await this.getMaxAttempts(),{request:c}=r;for(ua.HttpRequest.isInstance(c)&&(c.headers[Ve.INVOCATION_ID_HEADER]=bN.v4());;)try{ua.HttpRequest.isInstance(c)&&(c.headers[Ve.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),s?.beforeRequest&&await s.beforeRequest();let{response:d,output:u}=await t(r);return s?.afterRequest&&s.afterRequest(d),this.retryQuota.releaseRetryTokens(n),u.$metadata.attempts=o+1,u.$metadata.totalRetryDelay=i,{response:d,output:u}}catch(d){let u=CN(d);if(o++,this.shouldRetry(u,o,a)){n=this.retryQuota.retrieveRetryTokens(u);let l=this.delayDecider(Gn.isThrottlingError(u)?Ve.THROTTLING_RETRY_DELAY_BASE:Ve.DEFAULT_RETRY_DELAY_BASE,o),h=iK(u.$response),m=Math.max(h||0,l);i+=m,await new Promise(g=>setTimeout(g,m));continue}throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=o,u.$metadata.totalRetryDelay=i,u}}},iK=e=>{if(!ua.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],s=Number(r);return Number.isNaN(s)?new Date(r).getTime()-Date.now():s*1e3},$E=class extends ep{rateLimiter;constructor(t,r){let{rateLimiter:s,...n}=r??{};super(t,n),this.rateLimiter=s??new Ve.DefaultRateLimiter,this.mode=Ve.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:s=>{this.rateLimiter.updateClientSendingRate(s)}})}},UE="AWS_MAX_ATTEMPTS",jE="max_attempts",aK={environmentVariableSelector:e=>{let t=e[UE];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${UE} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[jE];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${jE} mast be a number, got "${t}"`);return r},default:Ve.DEFAULT_MAX_ATTEMPTS},cK=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:s}=e,n=wN.normalizeProvider(s??Ve.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:n,retryStrategy:async()=>t||(await wN.normalizeProvider(r)()===Ve.RETRY_MODES.ADAPTIVE?new Ve.AdaptiveRetryStrategy(n):new Ve.StandardRetryStrategy(n))})},RN="AWS_RETRY_MODE",TN="retry_mode",dK={environmentVariableSelector:e=>e[RN],configFileSelector:e=>e[TN],default:Ve.DEFAULT_RETRY_MODE},AN=()=>e=>async t=>{let{request:r}=t;return ua.HttpRequest.isInstance(r)&&(delete r.headers[Ve.INVOCATION_ID_HEADER],delete r.headers[Ve.REQUEST_HEADER]),e(t)},IN={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},uK=e=>({applyToStack:t=>{t.addRelativeTo(AN(),IN)}}),PN=e=>(t,r)=>async s=>{let n=await e.retryStrategy(),o=await e.maxAttempts();if(lK(n)){n=n;let i=await n.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:u}=s,l=ua.HttpRequest.isInstance(u);for(l&&(u.headers[Ve.INVOCATION_ID_HEADER]=bN.v4());;)try{l&&(u.headers[Ve.REQUEST_HEADER]=`attempt=${c+1}; max=${o}`);let{response:h,output:m}=await t(s);return n.recordSuccess(i),m.$metadata.attempts=c+1,m.$metadata.totalRetryDelay=d,{response:h,output:m}}catch(h){let m=fK(h);if(a=CN(h),l&&nK.isStreamingPayload(u))throw(r.logger instanceof sK.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await n.refreshRetryTokenForRetry(i,m)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let g=i.getRetryDelay();d+=g,await new Promise(w=>setTimeout(w,g))}}else return n=n,n?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(t,s)},lK=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",fK=e=>{let t={error:e,errorType:pK(e)},r=ON(e.$response);return r&&(t.retryAfterHint=r),t},pK=e=>Gn.isThrottlingError(e)?"THROTTLING":Gn.isTransientError(e)?"TRANSIENT":Gn.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",NN={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},mK=e=>({applyToStack:t=>{t.add(PN(e),NN)}}),ON=e=>{if(!ua.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],s=Number(r);return Number.isNaN(s)?new Date(r):new Date(s*1e3)};mt.AdaptiveRetryStrategy=$E;mt.CONFIG_MAX_ATTEMPTS=jE;mt.CONFIG_RETRY_MODE=TN;mt.ENV_MAX_ATTEMPTS=UE;mt.ENV_RETRY_MODE=RN;mt.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=aK;mt.NODE_RETRY_MODE_CONFIG_OPTIONS=dK;mt.StandardRetryStrategy=ep;mt.defaultDelayDecider=vN;mt.defaultRetryDecider=xN;mt.getOmitRetryHeadersPlugin=uK;mt.getRetryAfterHint=ON;mt.getRetryPlugin=mK;mt.omitRetryHeadersMiddleware=AN;mt.omitRetryHeadersMiddlewareOptions=IN;mt.resolveRetryConfig=cK;mt.retryMiddleware=PN;mt.retryMiddlewareOptions=NN});var HE=b(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.resolveHttpAuthSchemeConfig=Wn.defaultSecretsManagerHttpAuthSchemeProvider=Wn.defaultSecretsManagerHttpAuthSchemeParametersProvider=void 0;var hK=(vt(),Q(Js)),BE=gt(),gK=async(e,t,r)=>({operation:(0,BE.getSmithyContext)(t).operation,region:await(0,BE.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Wn.defaultSecretsManagerHttpAuthSchemeParametersProvider=gK;function yK(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"secretsmanager",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var SK=e=>{let t=[];switch(e.operation){default:t.push(yK(e))}return t};Wn.defaultSecretsManagerHttpAuthSchemeProvider=SK;var _K=e=>{let t=(0,hK.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,BE.normalizeProvider)(e.authSchemePreference??[])})};Wn.resolveHttpAuthSchemeConfig=_K});var DN=b((P_e,EK)=>{EK.exports={name:"@aws-sdk/client-secrets-manager",description:"AWS SDK for JavaScript Secrets Manager Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-secrets-manager","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo secrets-manager"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/credential-provider-node":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-secrets-manager",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-secrets-manager"}}});var zE=b(Qn=>{"use strict";var wK=(ns(),Q(Nn)),bK=Le(),kN="AWS_ACCESS_KEY_ID",MN="AWS_SECRET_ACCESS_KEY",LN="AWS_SESSION_TOKEN",qN="AWS_CREDENTIAL_EXPIRATION",FN="AWS_CREDENTIAL_SCOPE",$N="AWS_ACCOUNT_ID",vK=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[kN],r=process.env[MN],s=process.env[LN],n=process.env[qN],o=process.env[FN],i=process.env[$N];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...s&&{sessionToken:s},...n&&{expiration:new Date(n)},...o&&{credentialScope:o},...i&&{accountId:i}};return wK.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new bK.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};Qn.ENV_ACCOUNT_ID=$N;Qn.ENV_CREDENTIAL_SCOPE=FN;Qn.ENV_EXPIRATION=qN;Qn.ENV_KEY=kN;Qn.ENV_SECRET=MN;Qn.ENV_SESSION=LN;Qn.fromEnv=vK});var Kn=b(qt=>{"use strict";var _s=Le(),xK=require("url"),CK=require("buffer"),RK=require("http"),KE=Zt(),TK=vr();function id(e){return new Promise((t,r)=>{let s=RK.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});s.on("error",n=>{r(Object.assign(new _s.ProviderError("Unable to connect to instance metadata service"),n)),s.destroy()}),s.on("timeout",()=>{r(new _s.ProviderError("TimeoutError from instance metadata service")),s.destroy()}),s.on("response",n=>{let{statusCode:o=400}=n;(o<200||300<=o)&&(r(Object.assign(new _s.ProviderError("Error response received from instance metadata service"),{statusCode:o})),s.destroy());let i=[];n.on("data",a=>{i.push(a)}),n.on("end",()=>{t(CK.Buffer.concat(i)),s.destroy()})}),s.end()})}var HN=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",zN=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),VN=1e3,GN=0,JE=({maxRetries:e=GN,timeout:t=VN})=>({maxRetries:e,timeout:t}),GE=(e,t)=>{let r=e();for(let s=0;s<t;s++)r=r.catch(e);return r},tp="AWS_CONTAINER_CREDENTIALS_FULL_URI",rp="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",WE="AWS_CONTAINER_AUTHORIZATION_TOKEN",AK=(e={})=>{let{timeout:t,maxRetries:r}=JE(e);return()=>GE(async()=>{let s=await DK({logger:e.logger}),n=JSON.parse(await IK(t,s));if(!HN(n))throw new _s.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return zN(n)},r)},IK=async(e,t)=>(process.env[WE]&&(t.headers={...t.headers,Authorization:process.env[WE]}),(await id({...t,timeout:e})).toString()),PK="169.254.170.2",NK={localhost:!0,"127.0.0.1":!0},OK={"http:":!0,"https:":!0},DK=async({logger:e})=>{if(process.env[rp])return{hostname:PK,path:process.env[rp]};if(process.env[tp]){let t=xK.parse(process.env[tp]);if(!t.hostname||!(t.hostname in NK))throw new _s.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in OK))throw new _s.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new _s.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${rp} or ${tp} environment variable is set`,{tryNextLink:!1,logger:e})},QE=class e extends _s.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r),this.tryNextLink=r,Object.setPrototypeOf(this,e.prototype)}};qt.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(qt.Endpoint||(qt.Endpoint={}));var kK="AWS_EC2_METADATA_SERVICE_ENDPOINT",MK="ec2_metadata_service_endpoint",LK={environmentVariableSelector:e=>e[kK],configFileSelector:e=>e[MK],default:void 0},la;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(la||(la={}));var qK="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",FK="ec2_metadata_service_endpoint_mode",$K={environmentVariableSelector:e=>e[qK],configFileSelector:e=>e[FK],default:la.IPv4},WN=async()=>TK.parseUrl(await UK()||await jK()),UK=async()=>KE.loadConfig(LK)(),jK=async()=>{let e=await KE.loadConfig($K)();switch(e){case la.IPv4:return qt.Endpoint.IPv4;case la.IPv6:return qt.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(la)}`)}},BK=300,HK=300,zK="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",UN=(e,t)=>{let r=BK+Math.floor(Math.random()*HK),s=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(s)}.
For more information, please visit: `+zK);let n=e.originalExpiration??e.expiration;return{...e,...n?{originalExpiration:n}:{},expiration:s}},VK=(e,t={})=>{let r=t?.logger||console,s;return async()=>{let n;try{n=await e(),n.expiration&&n.expiration.getTime()<Date.now()&&(n=UN(n,r))}catch(o){if(s)r.warn("Credential renew failed: ",o),n=UN(s,r);else throw o}return s=n,n}},QN="/latest/meta-data/iam/security-credentials/",GK="/latest/api/token",VE="AWS_EC2_METADATA_V1_DISABLED",jN="ec2_metadata_v1_disabled",BN="x-aws-ec2-metadata-token",WK=(e={})=>VK(QK(e),{logger:e.logger}),QK=(e={})=>{let t=!1,{logger:r,profile:s}=e,{timeout:n,maxRetries:o}=JE(e),i=async(a,c)=>{if(t||c.headers?.[BN]==null){let l=!1,h=!1,m=await KE.loadConfig({environmentVariableSelector:g=>{let w=g[VE];if(h=!!w&&w!=="false",w===void 0)throw new _s.CredentialsProviderError(`${VE} not set in env, checking config file next.`,{logger:e.logger});return h},configFileSelector:g=>{let w=g[jN];return l=!!w&&w!=="false",l},default:!1},{profile:s})();if(e.ec2MetadataV1Disabled||m){let g=[];throw e.ec2MetadataV1Disabled&&g.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),l&&g.push(`config file profile (${jN})`),h&&g.push(`process environment variable (${VE})`),new QE(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${g.join(", ")}].`)}}let u=(await GE(async()=>{let l;try{l=await JK(c)}catch(h){throw h.statusCode===401&&(t=!1),h}return l},a)).trim();return GE(async()=>{let l;try{l=await YK(u,c,e)}catch(h){throw h.statusCode===401&&(t=!1),h}return l},a)};return async()=>{let a=await WN();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(o,{...a,timeout:n});{let c;try{c=(await KK({...a,timeout:n})).toString()}catch(d){if(d?.statusCode===400)throw Object.assign(d,{message:"EC2 Metadata token request returned error"});return(d.message==="TimeoutError"||[403,404,405].includes(d.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(o,{...a,timeout:n})}return i(o,{...a,headers:{[BN]:c},timeout:n})}}},KK=async e=>id({...e,path:GK,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),JK=async e=>(await id({...e,path:QN})).toString(),YK=async(e,t,r)=>{let s=JSON.parse((await id({...t,path:QN+e})).toString());if(!HN(s))throw new _s.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return zN(s)};qt.DEFAULT_MAX_RETRIES=GN;qt.DEFAULT_TIMEOUT=VN;qt.ENV_CMDS_AUTH_TOKEN=WE;qt.ENV_CMDS_FULL_URI=tp;qt.ENV_CMDS_RELATIVE_URI=rp;qt.fromContainerMetadata=AK;qt.fromInstanceMetadata=WK;qt.getInstanceMetadataEndpoint=WN;qt.httpRequest=id;qt.providerConfigFromInit=JE});var KN=b(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.checkUrl=void 0;var XK=Le(),ZK="169.254.170.2",e5="169.254.170.23",t5="[fd00:ec2::23]",r5=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===ZK||e.hostname===e5||e.hostname===t5)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),s=n=>{let o=parseInt(n,10);return 0<=o&&o<=255};if(r[0]==="127"&&s(r[1])&&s(r[2])&&s(r[3])&&r.length===4)return}throw new XK.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};sp.checkUrl=r5});var JN=b(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.createGetRequest=i5;np.getCredentials=a5;var YE=Le(),s5=ye(),n5=U(),o5=Nc();function i5(e){return new s5.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,s])=>(t[r]=s,t),{}),fragment:e.hash})}async function a5(e,t){let s=await(0,o5.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let n=JSON.parse(s);if(typeof n.AccessKeyId!="string"||typeof n.SecretAccessKey!="string"||typeof n.Token!="string"||typeof n.Expiration!="string")throw new YE.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:(0,n5.parseRfc3339DateTime)(n.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let n={};try{n=JSON.parse(s)}catch{}throw Object.assign(new YE.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:n.Code,Message:n.Message})}throw new YE.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var YN=b(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.retryWrapper=void 0;var c5=(e,t,r)=>async()=>{for(let s=0;s<t;++s)try{return await e()}catch{await new Promise(o=>setTimeout(o,r))}return await e()};op.retryWrapper=c5});var eO=b(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.fromHttp=void 0;var d5=(An(),Q(Tn)),u5=(ns(),Q(Nn)),l5=br(),XN=Le(),f5=d5.__importDefault(require("fs/promises")),p5=KN(),ZN=JN(),m5=YN(),h5="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",g5="http://169.254.170.2",y5="AWS_CONTAINER_CREDENTIALS_FULL_URI",S5="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",_5="AWS_CONTAINER_AUTHORIZATION_TOKEN",E5=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[h5],s=e.awsContainerCredentialsFullUri??process.env[y5],n=e.awsContainerAuthorizationToken??process.env[_5],o=e.awsContainerAuthorizationTokenFile??process.env[S5],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),n&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),s)t=s;else if(r)t=`${g5}${r}`;else throw new XN.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,p5.checkUrl)(a,e.logger);let c=l5.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,m5.retryWrapper)(async()=>{let d=(0,ZN.createGetRequest)(a);n?d.headers.Authorization=n:o&&(d.headers.Authorization=(await f5.default.readFile(o)).toString());try{let u=await c.handle(d);return(0,ZN.getCredentials)(u.response).then(l=>(0,u5.setCredentialFeature)(l,"CREDENTIALS_HTTP","z"))}catch(u){throw new XN.CredentialsProviderError(String(u),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};ip.fromHttp=E5});var XE=b(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.fromHttp=void 0;var w5=eO();Object.defineProperty(ap,"fromHttp",{enumerable:!0,get:function(){return w5.fromHttp}})});function b5(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function v5(e){return{schemeId:"smithy.api#noAuth"}}var ad,tO,rO,sO,ZE=S(()=>{vt();ad=y(gt()),tO=async(e,t,r)=>({operation:(0,ad.getSmithyContext)(t).operation,region:await(0,ad.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});rO=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(v5(e));break}default:t.push(b5(e))}return t},sO=e=>{let t=Yo(e);return Object.assign(t,{authSchemePreference:(0,ad.normalizeProvider)(e.authSchemePreference??[])})}});var nO,oO,ew=S(()=>{nO=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),oO={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var cp,tw=S(()=>{cp={name:"@aws-sdk/nested-clients",version:"3.928.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var cd=b(ri=>{"use strict";var iO=require("os"),rw=require("process"),C5=ca(),aO={isCrtAvailable:!1},R5=()=>aO.isCrtAvailable?["md/crt-avail"]:null,cO=({serviceId:e,clientVersion:t})=>async r=>{let s=[["aws-sdk-js",t],["ua","2.1"],[`os/${iO.platform()}`,iO.release()],["lang/js"],["md/nodejs",`${rw.versions.node}`]],n=R5();n&&s.push(n),e&&s.push([`api/${e}`,t]),rw.env.AWS_EXECUTION_ENV&&s.push([`exec-env/${rw.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...s,[`app/${o}`]]:[...s]},T5=cO,dO="AWS_SDK_UA_APP_ID",uO="sdk_ua_app_id",A5="sdk-ua-app-id",I5={environmentVariableSelector:e=>e[dO],configFileSelector:e=>e[uO]??e[A5],default:C5.DEFAULT_UA_APP_ID};ri.NODE_APP_ID_CONFIG_OPTIONS=I5;ri.UA_APP_ID_ENV_NAME=dO;ri.UA_APP_ID_INI_NAME=uO;ri.createDefaultUserAgentProvider=cO;ri.crtAvailability=aO;ri.defaultUserAgent=T5});var Zs=b(pO=>{"use strict";var sw=Mi(),P5=Fe(),N5=require("buffer"),lO=require("crypto"),nw=class{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(P5.toUint8Array(fO(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?lO.createHmac(this.algorithmIdentifier,fO(this.secret)):lO.createHash(this.algorithmIdentifier)}};function fO(e,t){return N5.Buffer.isBuffer(e)?e:typeof e=="string"?sw.fromString(e,t):ArrayBuffer.isView(e)?sw.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):sw.fromArrayBuffer(e)}pO.Hash=nw});var en=b(mO=>{"use strict";var ow=require("node:fs"),O5=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof ow.ReadStream){if(e.path!=null)return ow.lstatSync(e.path).size;if(typeof e.fd=="number")return ow.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};mO.calculateBodyLength=O5});var xO,Tr,hO,dd,fa,pa,tn,iw,aw,gO,yO,SO,CO,RO,Rr,_O,TO,EO,wO,bO,vO,D5,AO,IO=S(()=>{xO="required",Tr="argv",hO="isSet",dd="booleanEquals",fa="error",pa="endpoint",tn="tree",iw="PartitionResult",aw="getAttr",gO={[xO]:!1,type:"string"},yO={[xO]:!0,default:!1,type:"boolean"},SO={ref:"Endpoint"},CO={fn:dd,[Tr]:[{ref:"UseFIPS"},!0]},RO={fn:dd,[Tr]:[{ref:"UseDualStack"},!0]},Rr={},_O={fn:aw,[Tr]:[{ref:iw},"supportsFIPS"]},TO={ref:iw},EO={fn:dd,[Tr]:[!0,{fn:aw,[Tr]:[TO,"supportsDualStack"]}]},wO=[CO],bO=[RO],vO=[{ref:"Region"}],D5={version:"1.0",parameters:{Region:gO,UseDualStack:yO,UseFIPS:yO,Endpoint:gO},rules:[{conditions:[{fn:hO,[Tr]:[SO]}],rules:[{conditions:wO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:fa},{conditions:bO,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:fa},{endpoint:{url:SO,properties:Rr,headers:Rr},type:pa}],type:tn},{conditions:[{fn:hO,[Tr]:vO}],rules:[{conditions:[{fn:"aws.partition",[Tr]:vO,assign:iw}],rules:[{conditions:[CO,RO],rules:[{conditions:[{fn:dd,[Tr]:[!0,_O]},EO],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Rr,headers:Rr},type:pa}],type:tn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:fa}],type:tn},{conditions:wO,rules:[{conditions:[{fn:dd,[Tr]:[_O,!0]}],rules:[{conditions:[{fn:"stringEquals",[Tr]:[{fn:aw,[Tr]:[TO,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Rr,headers:Rr},type:pa},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Rr,headers:Rr},type:pa}],type:tn},{error:"FIPS is enabled but this partition does not support FIPS",type:fa}],type:tn},{conditions:bO,rules:[{conditions:[EO],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Rr,headers:Rr},type:pa}],type:tn},{error:"DualStack is enabled but this partition does not support DualStack",type:fa}],type:tn},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Rr,headers:Rr},type:pa}],type:tn}],type:tn},{error:"Invalid Configuration: Missing Region",type:fa}]},AO=D5});var PO,ma,k5,NO,OO=S(()=>{PO=y(ss()),ma=y(ts());IO();k5=new ma.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),NO=(e,t={})=>k5.get(e,()=>(0,ma.resolveEndpoint)(AO,{endpointParams:e,logger:t.logger}));ma.customEndpointFunctions.aws=PO.awsEndpointFunctions});var DO,kO,dp,up,MO,LO=S(()=>{vt();Me();DO=y(U()),kO=y(vr()),dp=y(qe()),up=y(Fe());ZE();OO();MO=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??dp.fromBase64,base64Encoder:e?.base64Encoder??dp.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??NO,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??rO,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Yt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Vt}],logger:e?.logger??new DO.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??kO.parseUrl,utf8Decoder:e?.utf8Decoder??up.fromUtf8,utf8Encoder:e?.utf8Encoder??up.toUtf8})});var rn=b(UO=>{"use strict";var M5=et(),qO=Zt(),L5=Le(),q5="AWS_EXECUTION_ENV",FO="AWS_REGION",$O="AWS_DEFAULT_REGION",F5="AWS_EC2_METADATA_DISABLED",$5=["in-region","cross-region","mobile","standard","legacy"],U5="/latest/meta-data/placement/region",j5="AWS_DEFAULTS_MODE",B5="defaults_mode",H5={environmentVariableSelector:e=>e[j5],configFileSelector:e=>e[B5],default:"legacy"},z5=({region:e=qO.loadConfig(M5.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=qO.loadConfig(H5)}={})=>L5.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return V5(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${$5.join(", ")}, got ${r}`)}}),V5=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await G5();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},G5=async()=>{if(process.env[q5]&&(process.env[FO]||process.env[$O]))return process.env[FO]??process.env[$O];if(!process.env[F5])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>y(Kn())),r=await e();return(await t({...r,path:U5})).toString()}catch{}};UO.resolveDefaultsModeConfig=z5});var lp,Yn,jO,fp,Jn,pp,BO,HO,zO,VO,GO,WO,QO=S(()=>{tw();vt();lp=y(cd()),Yn=y(et()),jO=y(Zs()),fp=y(Ct()),Jn=y(Zt()),pp=y(br()),BO=y(en()),HO=y(Ss());LO();zO=y(U()),VO=y(rn()),GO=y(U()),WO=e=>{(0,GO.emitWarningIfUnsupportedVersion)(process.version);let t=(0,VO.resolveDefaultsModeConfig)(e),r=()=>t().then(zO.loadConfigsForDefaultMode),s=MO(e);Vi(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Jn.loadConfig)(Qi,n),bodyLengthChecker:e?.bodyLengthChecker??BO.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,lp.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:cp.version}),maxAttempts:e?.maxAttempts??(0,Jn.loadConfig)(fp.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Jn.loadConfig)(Yn.NODE_REGION_CONFIG_OPTIONS,{...Yn.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:pp.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Jn.loadConfig)({...fp.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||HO.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??jO.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??pp.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Jn.loadConfig)(Yn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,Jn.loadConfig)(Yn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,Jn.loadConfig)(lp.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var JO=b(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.warning=void 0;ha.stsRegionDefaultResolver=Q5;var KO=et(),W5=Zt();function Q5(e={}){return(0,W5.loadConfig)({...KO.NODE_REGION_CONFIG_OPTIONS,async default(){return ha.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...KO.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}ha.warning={silence:!1}});var ga=b(Es=>{"use strict";var ud=et(),YO=JO(),K5=e=>({setRegion(t){e.region=t},region(){return e.region}}),J5=e=>({region:e.region()});Object.defineProperty(Es,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return ud.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Es,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return ud.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Es,"REGION_ENV_NAME",{enumerable:!0,get:function(){return ud.REGION_ENV_NAME}});Object.defineProperty(Es,"REGION_INI_NAME",{enumerable:!0,get:function(){return ud.REGION_INI_NAME}});Object.defineProperty(Es,"resolveRegionConfig",{enumerable:!0,get:function(){return ud.resolveRegionConfig}});Es.getAwsRegionExtensionConfiguration=K5;Es.resolveAwsRegionExtensionConfiguration=J5;Object.keys(YO).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Es,e)&&Object.defineProperty(Es,e,{enumerable:!0,get:function(){return YO[e]}})})});var XO,ZO,eD=S(()=>{XO=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},ZO=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var mp,hp,gp,tD,rD=S(()=>{mp=y(ga()),hp=y(ye()),gp=y(U());eD();tD=(e,t)=>{let r=Object.assign((0,mp.getAwsRegionExtensionConfiguration)(e),(0,gp.getDefaultExtensionConfiguration)(e),(0,hp.getHttpHandlerExtensionConfiguration)(e),XO(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,mp.resolveAwsRegionExtensionConfiguration)(r),(0,gp.resolveDefaultRuntimeConfig)(r),(0,hp.resolveHttpHandlerRuntimeConfig)(r),ZO(r))}});var yp,sD,nD,Sp,oD,iD,aD,_p,cw,ld,dw=S(()=>{yp=y(Ls()),sD=y(qs()),nD=y(Fs()),Sp=y(ca()),oD=y(et());Me();iD=y(Ys()),aD=y(Wt()),_p=y(Ct()),cw=y(U());ZE();ew();QO();rD();ld=class extends cw.Client{config;constructor(...[t]){let r=WO(t||{});super(r),this.initConfig=r;let s=nO(r),n=(0,Sp.resolveUserAgentConfig)(s),o=(0,_p.resolveRetryConfig)(n),i=(0,oD.resolveRegionConfig)(o),a=(0,yp.resolveHostHeaderConfig)(i),c=(0,aD.resolveEndpointConfig)(a),d=sO(c),u=tD(d,t?.extensions||[]);this.config=u,this.middlewareStack.use((0,Sp.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,_p.getRetryPlugin)(this.config)),this.middlewareStack.use((0,iD.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,yp.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,sD.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,nD.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use($s(this.config,{httpAuthSchemeParametersProvider:tO,identityProviderConfigProvider:async l=>new es({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(Us(this.config))}destroy(){super.destroy()}}});var cD,St,Ep=S(()=>{cD=y(U()),St=class e extends cD.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var si,Y5,fd,pd,uw,lw,md,hd,gd,yd,X5,Sd,_d,Ed,wd,bd,wp=S(()=>{si=y(U());Ep();Y5={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},fd=class e extends St{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},pd=class e extends St{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},uw=e=>({...e,...e.clientSecret&&{clientSecret:si.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:si.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:si.SENSITIVE_STRING}}),lw=e=>({...e,...e.accessToken&&{accessToken:si.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:si.SENSITIVE_STRING},...e.idToken&&{idToken:si.SENSITIVE_STRING}}),md=class e extends St{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},hd=class e extends St{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},gd=class e extends St{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},yd=class e extends St{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},X5={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},Sd=class e extends St{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},_d=class e extends St{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ed=class e extends St{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},wd=class e extends St{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},bd=class e extends St{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var L,dD,uD,Z5,e8,t8,r8,s8,n8,o8,i8,a8,c8,d8,u8,l8,Ar,lD=S(()=>{vt();Me();L=y(U());wp();Ep();dD=async(e,t)=>{let r=Wo(e,t),s={"content-type":"application/json"};r.bp("/token");let n;return n=JSON.stringify((0,L.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,L._json)(o)})),r.m("POST").h(s).b(n),r.build()},uD=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Z5(e,t);let r=(0,L.map)({$metadata:Ar(e)}),s=(0,L.expectNonNull)((0,L.expectObject)(await Zo(e.body,t)),"body"),n=(0,L.take)(s,{accessToken:L.expectString,expiresIn:L.expectInt32,idToken:L.expectString,refreshToken:L.expectString,tokenType:L.expectString});return Object.assign(r,n),r},Z5=async(e,t)=>{let r={...e,body:await Rf(e.body,t)},s=$n(e,r.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await t8(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await r8(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await s8(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await n8(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await o8(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await i8(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await a8(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await c8(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await d8(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await u8(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await l8(r,t);default:let n=r.body;return e8({output:e,parsedBody:n,errorCode:s})}},e8=(0,L.withBaseException)(St),t8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString,reason:L.expectString});Object.assign(r,n);let o=new fd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},r8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new pd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},s8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new md({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},n8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new hd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},o8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new gd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},i8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new yd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},a8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString,reason:L.expectString});Object.assign(r,n);let o=new Sd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},c8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new _d({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},d8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new Ed({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},u8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new wd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},l8=async(e,t)=>{let r=(0,L.map)({}),s=e.body,n=(0,L.take)(s,{error:L.expectString,error_description:L.expectString});Object.assign(r,n);let o=new bd({$metadata:Ar(e),...r});return(0,L.decorateServiceException)(o,e.body)},Ar=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var fD,pD,fw,vd,pw=S(()=>{fD=y(Wt()),pD=y(wr()),fw=y(U());ew();wp();lD();vd=class extends fw.Command.classBuilder().ep(oO).m(function(t,r,s,n){return[(0,pD.getSerdePlugin)(s,this.serialize,this.deserialize),(0,fD.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(uw,lw).ser(dD).de(uD).build(){}});var mD,f8,bp,hD=S(()=>{mD=y(U());pw();dw();f8={CreateTokenCommand:vd},bp=class extends ld{};(0,mD.createAggregatedClient)(f8,bp)});var gD=S(()=>{pw()});var yD=S(()=>{wp()});var mw={};dt(mw,{$Command:()=>fw.Command,AccessDeniedException:()=>fd,AccessDeniedExceptionReason:()=>Y5,AuthorizationPendingException:()=>pd,CreateTokenCommand:()=>vd,CreateTokenRequestFilterSensitiveLog:()=>uw,CreateTokenResponseFilterSensitiveLog:()=>lw,ExpiredTokenException:()=>md,InternalServerException:()=>hd,InvalidClientException:()=>gd,InvalidGrantException:()=>yd,InvalidRequestException:()=>Sd,InvalidRequestExceptionReason:()=>X5,InvalidScopeException:()=>_d,SSOOIDC:()=>bp,SSOOIDCClient:()=>ld,SSOOIDCServiceException:()=>St,SlowDownException:()=>Ed,UnauthorizedClientException:()=>wd,UnsupportedGrantTypeException:()=>bd,__Client:()=>cw.Client});var hw=S(()=>{dw();hD();gD();yD();Ep()});var wD=b(Cd=>{"use strict";var p8=(ns(),Q(Nn)),m8=(F_(),Q(_P)),pr=Le(),xd=Gt(),h8=require("fs"),g8=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new pr.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=m8.getBearerTokenEnvKey(t);if(!(r in process.env))throw new pr.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let s={token:process.env[r]};return p8.setTokenFeature(s,"BEARER_SERVICE_ENV_VARS","3"),s},y8=300*1e3,gw="To refresh this SSO session run 'aws sso login' with the corresponding profile.",S8=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(hw(),mw)),s=o=>t.clientConfig?.[o]??t.parentClientConfig?.[o];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},_8=async(e,t,r={})=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(hw(),mw));return(await S8(t,r)).send(new s({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},SD=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new pr.TokenProviderError(`Token is expired. ${gw}`,!1)},ni=(e,t,r=!1)=>{if(typeof t>"u")throw new pr.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${gw}`,!1)},{writeFile:E8}=h8.promises,w8=(e,t)=>{let r=xd.getSSOTokenFilepath(e),s=JSON.stringify(t,null,2);return E8(r,s)},_D=new Date(0),ED=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let s=await xd.parseKnownFiles(r),n=xd.getProfileName({profile:r.profile??t?.profile}),o=s[n];if(o){if(!o.sso_session)throw new pr.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new pr.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let i=o.sso_session,c=(await xd.loadSsoSessionData(r))[i];if(!c)throw new pr.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let g of["sso_start_url","sso_region"])if(!c[g])throw new pr.TokenProviderError(`Sso session '${i}' is missing required property '${g}'.`,!1);c.sso_start_url;let d=c.sso_region,u;try{u=await xd.getSSOTokenFromFile(i)}catch{throw new pr.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${gw}`,!1)}ni("accessToken",u.accessToken),ni("expiresAt",u.expiresAt);let{accessToken:l,expiresAt:h}=u,m={token:l,expiration:new Date(h)};if(m.expiration.getTime()-Date.now()>y8)return m;if(Date.now()-_D.getTime()<30*1e3)return SD(m),m;ni("clientId",u.clientId,!0),ni("clientSecret",u.clientSecret,!0),ni("refreshToken",u.refreshToken,!0);try{_D.setTime(Date.now());let g=await _8(u,d,r);ni("accessToken",g.accessToken),ni("expiresIn",g.expiresIn);let w=new Date(Date.now()+g.expiresIn*1e3);try{await w8(i,{...u,accessToken:g.accessToken,expiresAt:w.toISOString(),refreshToken:g.refreshToken})}catch{}return{token:g.accessToken,expiration:w}}catch{return SD(m),m}},b8=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new pr.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},v8=(e={})=>pr.memoize(pr.chain(ED(e),async()=>{throw new pr.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);Cd.fromEnvSigningName=g8;Cd.fromSso=ED;Cd.fromStatic=b8;Cd.nodeProvider=v8});var Sw=b(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.resolveHttpAuthSchemeConfig=Xn.defaultSSOHttpAuthSchemeProvider=Xn.defaultSSOHttpAuthSchemeParametersProvider=void 0;var x8=(vt(),Q(Js)),yw=gt(),C8=async(e,t,r)=>({operation:(0,yw.getSmithyContext)(t).operation,region:await(0,yw.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Xn.defaultSSOHttpAuthSchemeParametersProvider=C8;function R8(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function vp(e){return{schemeId:"smithy.api#noAuth"}}var T8=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(vp(e));break}case"ListAccountRoles":{t.push(vp(e));break}case"ListAccounts":{t.push(vp(e));break}case"Logout":{t.push(vp(e));break}default:t.push(R8(e))}return t};Xn.defaultSSOHttpAuthSchemeProvider=T8;var A8=e=>{let t=(0,x8.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,yw.normalizeProvider)(e.authSchemePreference??[])})};Xn.resolveHttpAuthSchemeConfig=A8});var bD=b((jEe,I8)=>{I8.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var qD=b(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.ruleSet=void 0;var DD="required",Pr="fn",Nr="argv",_a="ref",vD=!0,xD="isSet",Rd="booleanEquals",ya="error",Sa="endpoint",sn="tree",_w="PartitionResult",Ew="getAttr",CD={[DD]:!1,type:"string"},RD={[DD]:!0,default:!1,type:"boolean"},TD={[_a]:"Endpoint"},kD={[Pr]:Rd,[Nr]:[{[_a]:"UseFIPS"},!0]},MD={[Pr]:Rd,[Nr]:[{[_a]:"UseDualStack"},!0]},Ir={},AD={[Pr]:Ew,[Nr]:[{[_a]:_w},"supportsFIPS"]},LD={[_a]:_w},ID={[Pr]:Rd,[Nr]:[!0,{[Pr]:Ew,[Nr]:[LD,"supportsDualStack"]}]},PD=[kD],ND=[MD],OD=[{[_a]:"Region"}],P8={version:"1.0",parameters:{Region:CD,UseDualStack:RD,UseFIPS:RD,Endpoint:CD},rules:[{conditions:[{[Pr]:xD,[Nr]:[TD]}],rules:[{conditions:PD,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ya},{conditions:ND,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ya},{endpoint:{url:TD,properties:Ir,headers:Ir},type:Sa}],type:sn},{conditions:[{[Pr]:xD,[Nr]:OD}],rules:[{conditions:[{[Pr]:"aws.partition",[Nr]:OD,assign:_w}],rules:[{conditions:[kD,MD],rules:[{conditions:[{[Pr]:Rd,[Nr]:[vD,AD]},ID],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ir,headers:Ir},type:Sa}],type:sn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ya}],type:sn},{conditions:PD,rules:[{conditions:[{[Pr]:Rd,[Nr]:[AD,vD]}],rules:[{conditions:[{[Pr]:"stringEquals",[Nr]:[{[Pr]:Ew,[Nr]:[LD,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Ir,headers:Ir},type:Sa},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ir,headers:Ir},type:Sa}],type:sn},{error:"FIPS is enabled but this partition does not support FIPS",type:ya}],type:sn},{conditions:ND,rules:[{conditions:[ID],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ir,headers:Ir},type:Sa}],type:sn},{error:"DualStack is enabled but this partition does not support DualStack",type:ya}],type:sn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ir,headers:Ir},type:Sa}],type:sn}],type:sn},{error:"Invalid Configuration: Missing Region",type:ya}]};xp.ruleSet=P8});var FD=b(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.defaultEndpointResolver=void 0;var N8=ss(),ww=ts(),O8=qD(),D8=new ww.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),k8=(e,t={})=>D8.get(e,()=>(0,ww.resolveEndpoint)(O8.ruleSet,{endpointParams:e,logger:t.logger}));Cp.defaultEndpointResolver=k8;ww.customEndpointFunctions.aws=N8.awsEndpointFunctions});var jD=b(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.getRuntimeConfig=void 0;var M8=(vt(),Q(Js)),L8=(Me(),Q(hs)),q8=U(),F8=vr(),$D=qe(),UD=Fe(),$8=Sw(),U8=FD(),j8=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??$D.fromBase64,base64Encoder:e?.base64Encoder??$D.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??U8.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??$8.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new M8.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new L8.NoAuthSigner}],logger:e?.logger??new q8.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??F8.parseUrl,utf8Decoder:e?.utf8Decoder??UD.fromUtf8,utf8Encoder:e?.utf8Encoder??UD.toUtf8});Rp.getRuntimeConfig=j8});var GD=b(Ap=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});Ap.getRuntimeConfig=void 0;var B8=(An(),Q(Tn)),H8=B8.__importDefault(bD()),BD=(vt(),Q(Js)),HD=cd(),Tp=et(),z8=Zs(),zD=Ct(),oi=Zt(),VD=br(),V8=en(),G8=Ss(),W8=jD(),Q8=U(),K8=rn(),J8=U(),Y8=e=>{(0,J8.emitWarningIfUnsupportedVersion)(process.version);let t=(0,K8.resolveDefaultsModeConfig)(e),r=()=>t().then(Q8.loadConfigsForDefaultMode),s=(0,W8.getRuntimeConfig)(e);(0,BD.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,oi.loadConfig)(BD.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??V8.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,HD.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:H8.default.version}),maxAttempts:e?.maxAttempts??(0,oi.loadConfig)(zD.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,oi.loadConfig)(Tp.NODE_REGION_CONFIG_OPTIONS,{...Tp.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:VD.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,oi.loadConfig)({...zD.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||G8.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??z8.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??VD.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,oi.loadConfig)(Tp.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,oi.loadConfig)(Tp.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,oi.loadConfig)(HD.NODE_APP_ID_CONFIG_OPTIONS,n)}};Ap.getRuntimeConfig=Y8});var lk=b(rt=>{"use strict";var WD=Ls(),X8=qs(),Z8=Fs(),QD=ca(),e9=et(),nn=(Me(),Q(hs)),t9=Ys(),Pd=Wt(),KD=Ct(),z=U(),JD=Sw(),r9=GD(),YD=ga(),XD=ye(),Lp=wr(),Td=(vt(),Q(Js)),s9=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),qp={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},n9=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},o9=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),i9=(e,t)=>{let r=Object.assign(YD.getAwsRegionExtensionConfiguration(e),z.getDefaultExtensionConfiguration(e),XD.getHttpHandlerExtensionConfiguration(e),n9(e));return t.forEach(s=>s.configure(r)),Object.assign(e,YD.resolveAwsRegionExtensionConfiguration(r),z.resolveDefaultRuntimeConfig(r),XD.resolveHttpHandlerRuntimeConfig(r),o9(r))},Ea=class extends z.Client{config;constructor(...[t]){let r=r9.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=s9(r),n=QD.resolveUserAgentConfig(s),o=KD.resolveRetryConfig(n),i=e9.resolveRegionConfig(o),a=WD.resolveHostHeaderConfig(i),c=Pd.resolveEndpointConfig(a),d=JD.resolveHttpAuthSchemeConfig(c),u=i9(d,t?.extensions||[]);this.config=u,this.middlewareStack.use(QD.getUserAgentPlugin(this.config)),this.middlewareStack.use(KD.getRetryPlugin(this.config)),this.middlewareStack.use(t9.getContentLengthPlugin(this.config)),this.middlewareStack.use(WD.getHostHeaderPlugin(this.config)),this.middlewareStack.use(X8.getLoggerPlugin(this.config)),this.middlewareStack.use(Z8.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(nn.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:JD.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new nn.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(nn.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Zn=class e extends z.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Ip=class e extends Zn{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Pp=class e extends Zn{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Np=class e extends Zn{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Op=class e extends Zn{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ZD=e=>({...e,...e.accessToken&&{accessToken:z.SENSITIVE_STRING}}),ek=e=>({...e,...e.secretAccessKey&&{secretAccessKey:z.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:z.SENSITIVE_STRING}}),tk=e=>({...e,...e.roleCredentials&&{roleCredentials:ek(e.roleCredentials)}}),rk=e=>({...e,...e.accessToken&&{accessToken:z.SENSITIVE_STRING}}),sk=e=>({...e,...e.accessToken&&{accessToken:z.SENSITIVE_STRING}}),nk=e=>({...e,...e.accessToken&&{accessToken:z.SENSITIVE_STRING}}),a9=async(e,t)=>{let r=nn.requestBuilder(e,t),s=z.map({},z.isSerializableHeaderValue,{[Up]:e[$p]});r.bp("/federation/credentials");let n=z.map({[w9]:[,z.expectNonNull(e[E9],"roleName")],[ik]:[,z.expectNonNull(e[ok],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},c9=async(e,t)=>{let r=nn.requestBuilder(e,t),s=z.map({},z.isSerializableHeaderValue,{[Up]:e[$p]});r.bp("/assignment/roles");let n=z.map({[uk]:[,e[dk]],[ck]:[()=>e.maxResults!==void 0,()=>e[ak].toString()],[ik]:[,z.expectNonNull(e[ok],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},d9=async(e,t)=>{let r=nn.requestBuilder(e,t),s=z.map({},z.isSerializableHeaderValue,{[Up]:e[$p]});r.bp("/assignment/accounts");let n=z.map({[uk]:[,e[dk]],[ck]:[()=>e.maxResults!==void 0,()=>e[ak].toString()]});return r.m("GET").h(s).q(n).b(void 0),r.build()},u9=async(e,t)=>{let r=nn.requestBuilder(e,t),s=z.map({},z.isSerializableHeaderValue,{[Up]:e[$p]});return r.bp("/logout"),r.m("POST").h(s).b(void 0),r.build()},l9=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Fp(e,t);let r=z.map({$metadata:eo(e)}),s=z.expectNonNull(z.expectObject(await Td.parseJsonBody(e.body,t)),"body"),n=z.take(s,{roleCredentials:z._json});return Object.assign(r,n),r},f9=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Fp(e,t);let r=z.map({$metadata:eo(e)}),s=z.expectNonNull(z.expectObject(await Td.parseJsonBody(e.body,t)),"body"),n=z.take(s,{nextToken:z.expectString,roleList:z._json});return Object.assign(r,n),r},p9=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Fp(e,t);let r=z.map({$metadata:eo(e)}),s=z.expectNonNull(z.expectObject(await Td.parseJsonBody(e.body,t)),"body"),n=z.take(s,{accountList:z._json,nextToken:z.expectString});return Object.assign(r,n),r},m9=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Fp(e,t);let r=z.map({$metadata:eo(e)});return await z.collectBody(e.body,t),r},Fp=async(e,t)=>{let r={...e,body:await Td.parseJsonErrorBody(e.body,t)},s=Td.loadRestJsonErrorCode(e,r.body);switch(s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await g9(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await y9(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await S9(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await _9(r);default:let n=r.body;return h9({output:e,parsedBody:n,errorCode:s})}},h9=z.withBaseException(Zn),g9=async(e,t)=>{let r=z.map({}),s=e.body,n=z.take(s,{message:z.expectString});Object.assign(r,n);let o=new Ip({$metadata:eo(e),...r});return z.decorateServiceException(o,e.body)},y9=async(e,t)=>{let r=z.map({}),s=e.body,n=z.take(s,{message:z.expectString});Object.assign(r,n);let o=new Pp({$metadata:eo(e),...r});return z.decorateServiceException(o,e.body)},S9=async(e,t)=>{let r=z.map({}),s=e.body,n=z.take(s,{message:z.expectString});Object.assign(r,n);let o=new Np({$metadata:eo(e),...r});return z.decorateServiceException(o,e.body)},_9=async(e,t)=>{let r=z.map({}),s=e.body,n=z.take(s,{message:z.expectString});Object.assign(r,n);let o=new Op({$metadata:eo(e),...r});return z.decorateServiceException(o,e.body)},eo=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ok="accountId",$p="accessToken",ik="account_id",ak="maxResults",ck="max_result",dk="nextToken",uk="next_token",E9="roleName",w9="role_name",Up="x-amz-sso_bearer_token",Dp=class extends z.Command.classBuilder().ep(qp).m(function(t,r,s,n){return[Lp.getSerdePlugin(s,this.serialize,this.deserialize),Pd.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(ZD,tk).ser(a9).de(l9).build(){},Ad=class extends z.Command.classBuilder().ep(qp).m(function(t,r,s,n){return[Lp.getSerdePlugin(s,this.serialize,this.deserialize),Pd.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(rk,void 0).ser(c9).de(f9).build(){},Id=class extends z.Command.classBuilder().ep(qp).m(function(t,r,s,n){return[Lp.getSerdePlugin(s,this.serialize,this.deserialize),Pd.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(sk,void 0).ser(d9).de(p9).build(){},kp=class extends z.Command.classBuilder().ep(qp).m(function(t,r,s,n){return[Lp.getSerdePlugin(s,this.serialize,this.deserialize),Pd.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(nk,void 0).ser(u9).de(m9).build(){},b9={GetRoleCredentialsCommand:Dp,ListAccountRolesCommand:Ad,ListAccountsCommand:Id,LogoutCommand:kp},Mp=class extends Ea{};z.createAggregatedClient(b9,Mp);var v9=nn.createPaginator(Ea,Ad,"nextToken","nextToken","maxResults"),x9=nn.createPaginator(Ea,Id,"nextToken","nextToken","maxResults");Object.defineProperty(rt,"$Command",{enumerable:!0,get:function(){return z.Command}});Object.defineProperty(rt,"__Client",{enumerable:!0,get:function(){return z.Client}});rt.GetRoleCredentialsCommand=Dp;rt.GetRoleCredentialsRequestFilterSensitiveLog=ZD;rt.GetRoleCredentialsResponseFilterSensitiveLog=tk;rt.InvalidRequestException=Ip;rt.ListAccountRolesCommand=Ad;rt.ListAccountRolesRequestFilterSensitiveLog=rk;rt.ListAccountsCommand=Id;rt.ListAccountsRequestFilterSensitiveLog=sk;rt.LogoutCommand=kp;rt.LogoutRequestFilterSensitiveLog=nk;rt.ResourceNotFoundException=Pp;rt.RoleCredentialsFilterSensitiveLog=ek;rt.SSO=Mp;rt.SSOClient=Ea;rt.SSOServiceException=Zn;rt.TooManyRequestsException=Np;rt.UnauthorizedException=Op;rt.paginateListAccountRoles=v9;rt.paginateListAccounts=x9});var pk=b(bw=>{"use strict";var fk=lk();Object.defineProperty(bw,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return fk.GetRoleCredentialsCommand}});Object.defineProperty(bw,"SSOClient",{enumerable:!0,get:function(){return fk.SSOClient}})});var vw=b(Bp=>{"use strict";var os=Le(),jp=Gt(),mk=(ns(),Q(Nn)),C9=wD(),gk=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),Nd=!1,hk=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:s,ssoRoleName:n,ssoClient:o,clientConfig:i,parentClientConfig:a,profile:c,filepath:d,configFilepath:u,ignoreCache:l,logger:h})=>{let m,g="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let Ie=await C9.fromSso({profile:c,filepath:d,configFilepath:u,ignoreCache:l})();m={accessToken:Ie.token,expiresAt:new Date(Ie.expiration).toISOString()}}catch(Ie){throw new os.CredentialsProviderError(Ie.message,{tryNextLink:Nd,logger:h})}else try{m=await jp.getSSOTokenFromFile(e)}catch{throw new os.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${g}`,{tryNextLink:Nd,logger:h})}if(new Date(m.expiresAt).getTime()-Date.now()<=0)throw new os.CredentialsProviderError(`The SSO session associated with this profile has expired. ${g}`,{tryNextLink:Nd,logger:h});let{accessToken:w}=m,{SSOClient:C,GetRoleCredentialsCommand:R}=await Promise.resolve().then(function(){return pk()}),N=o||new C(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??s,userAgentAppId:i?.userAgentAppId??a?.userAgentAppId})),B;try{B=await N.send(new R({accountId:r,roleName:n,accessToken:w}))}catch(Ie){throw new os.CredentialsProviderError(Ie,{tryNextLink:Nd,logger:h})}let{roleCredentials:{accessKeyId:j,secretAccessKey:Y,sessionToken:we,expiration:De,credentialScope:te,accountId:he}={}}=B;if(!j||!Y||!we||!De)throw new os.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Nd,logger:h});let be={accessKeyId:j,secretAccessKey:Y,sessionToken:we,expiration:new Date(De),...te&&{credentialScope:te},...he&&{accountId:he}};return t?mk.setCredentialFeature(be,"CREDENTIALS_SSO","s"):mk.setCredentialFeature(be,"CREDENTIALS_SSO_LEGACY","u"),be},yk=(e,t)=>{let{sso_start_url:r,sso_account_id:s,sso_region:n,sso_role_name:o}=e;if(!r||!s||!n||!o)throw new os.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},R9=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e,{ssoClient:a}=e,c=jp.getProfileName({profile:e.profile??t?.profile});if(!r&&!s&&!n&&!o&&!i){let u=(await jp.parseKnownFiles(e))[c];if(!u)throw new os.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!gk(u))throw new os.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(u?.sso_session){let R=(await jp.loadSsoSessionData(e))[u.sso_session],N=` configurations in profile ${c} and sso-session ${u.sso_session}`;if(n&&n!==R.sso_region)throw new os.CredentialsProviderError("Conflicting SSO region"+N,{tryNextLink:!1,logger:e.logger});if(r&&r!==R.sso_start_url)throw new os.CredentialsProviderError("Conflicting SSO start_url"+N,{tryNextLink:!1,logger:e.logger});u.sso_region=R.sso_region,u.sso_start_url=R.sso_start_url}let{sso_start_url:l,sso_account_id:h,sso_region:m,sso_role_name:g,sso_session:w}=yk(u,e.logger);return hk({ssoStartUrl:l,ssoSession:w,ssoAccountId:h,ssoRegion:m,ssoRoleName:g,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!s||!n||!o)throw new os.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return hk({ssoStartUrl:r,ssoSession:i,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};Bp.fromSSO=R9;Bp.isSsoProfile=gk;Bp.validateSsoProfile=yk});function T9(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function A9(e){return{schemeId:"smithy.api#noAuth"}}var Od,Sk,_k,I9,Ek,xw=S(()=>{vt();Od=y(gt());Dd();Sk=async(e,t,r)=>({operation:(0,Od.getSmithyContext)(t).operation,region:await(0,Od.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});_k=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(A9(e));break}default:t.push(T9(e))}return t},I9=e=>Object.assign(e,{stsClientCtor:ws}),Ek=e=>{let t=I9(e),r=Yo(t);return Object.assign(r,{authSchemePreference:(0,Od.normalizeProvider)(e.authSchemePreference??[])})}});var wk,Hp,zp=S(()=>{wk=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Hp={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Ok,ae,xe,to,Rt,Dk,kk,$e,bk,bs,wa,Rw,vk,Cw,Mk,xk,Tt,Ck,Lk,qk,Ft,mr,Rk,Fk,$k,Tk,Uk,Ak,Ik,Pk,Nk,P9,jk,Bk=S(()=>{Ok="required",ae="type",xe="argv",to="booleanEquals",Rt="stringEquals",Dk="sigv4",kk="us-east-1",$e="endpoint",bk="https://sts.{Region}.{PartitionResult#dnsSuffix}",bs="tree",wa="error",Rw="getAttr",vk={[Ok]:!1,[ae]:"string"},Cw={[Ok]:!0,default:!1,[ae]:"boolean"},Mk={ref:"Endpoint"},xk={fn:"isSet",[xe]:[{ref:"Region"}]},Tt={ref:"Region"},Ck={fn:"aws.partition",[xe]:[Tt],assign:"PartitionResult"},Lk={ref:"UseFIPS"},qk={ref:"UseDualStack"},Ft={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Dk,signingName:"sts",signingRegion:kk}]},headers:{}},mr={},Rk={conditions:[{fn:Rt,[xe]:[Tt,"aws-global"]}],[$e]:Ft,[ae]:$e},Fk={fn:to,[xe]:[Lk,!0]},$k={fn:to,[xe]:[qk,!0]},Tk={fn:Rw,[xe]:[{ref:"PartitionResult"},"supportsFIPS"]},Uk={ref:"PartitionResult"},Ak={fn:to,[xe]:[!0,{fn:Rw,[xe]:[Uk,"supportsDualStack"]}]},Ik=[{fn:"isSet",[xe]:[Mk]}],Pk=[Fk],Nk=[$k],P9={version:"1.0",parameters:{Region:vk,UseDualStack:Cw,UseFIPS:Cw,Endpoint:vk,UseGlobalEndpoint:Cw},rules:[{conditions:[{fn:to,[xe]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[xe]:Ik},xk,Ck,{fn:to,[xe]:[Lk,!1]},{fn:to,[xe]:[qk,!1]}],rules:[{conditions:[{fn:Rt,[xe]:[Tt,"ap-northeast-1"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"ap-south-1"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"ap-southeast-1"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"ap-southeast-2"]}],endpoint:Ft,[ae]:$e},Rk,{conditions:[{fn:Rt,[xe]:[Tt,"ca-central-1"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"eu-central-1"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"eu-north-1"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"eu-west-1"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"eu-west-2"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"eu-west-3"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"sa-east-1"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,kk]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"us-east-2"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"us-west-1"]}],endpoint:Ft,[ae]:$e},{conditions:[{fn:Rt,[xe]:[Tt,"us-west-2"]}],endpoint:Ft,[ae]:$e},{endpoint:{url:bk,properties:{authSchemes:[{name:Dk,signingName:"sts",signingRegion:"{Region}"}]},headers:mr},[ae]:$e}],[ae]:bs},{conditions:Ik,rules:[{conditions:Pk,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[ae]:wa},{conditions:Nk,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[ae]:wa},{endpoint:{url:Mk,properties:mr,headers:mr},[ae]:$e}],[ae]:bs},{conditions:[xk],rules:[{conditions:[Ck],rules:[{conditions:[Fk,$k],rules:[{conditions:[{fn:to,[xe]:[!0,Tk]},Ak],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mr,headers:mr},[ae]:$e}],[ae]:bs},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[ae]:wa}],[ae]:bs},{conditions:Pk,rules:[{conditions:[{fn:to,[xe]:[Tk,!0]}],rules:[{conditions:[{fn:Rt,[xe]:[{fn:Rw,[xe]:[Uk,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:mr,headers:mr},[ae]:$e},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:mr,headers:mr},[ae]:$e}],[ae]:bs},{error:"FIPS is enabled but this partition does not support FIPS",[ae]:wa}],[ae]:bs},{conditions:Nk,rules:[{conditions:[Ak],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mr,headers:mr},[ae]:$e}],[ae]:bs},{error:"DualStack is enabled but this partition does not support DualStack",[ae]:wa}],[ae]:bs},Rk,{endpoint:{url:bk,properties:mr,headers:mr},[ae]:$e}],[ae]:bs}],[ae]:bs},{error:"Invalid Configuration: Missing Region",[ae]:wa}]},jk=P9});var Hk,ba,N9,zk,Vk=S(()=>{Hk=y(ss()),ba=y(ts());Bk();N9=new ba.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),zk=(e,t={})=>N9.get(e,()=>(0,ba.resolveEndpoint)(jk,{endpointParams:e,logger:t.logger}));ba.customEndpointFunctions.aws=Hk.awsEndpointFunctions});var Gk,Wk,Vp,Gp,Qk,Kk=S(()=>{vt();Me();Gk=y(U()),Wk=y(vr()),Vp=y(qe()),Gp=y(Fe());xw();Vk();Qk=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Vp.fromBase64,base64Encoder:e?.base64Encoder??Vp.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??zk,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??_k,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Yt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Vt}],logger:e?.logger??new Gk.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??Wk.parseUrl,utf8Decoder:e?.utf8Decoder??Gp.fromUtf8,utf8Encoder:e?.utf8Encoder??Gp.toUtf8})});var Wp,so,Jk,Qp,ro,Kp,Yk,Xk,Zk,e1,t1,r1,s1=S(()=>{tw();vt();Wp=y(cd()),so=y(et());Me();Jk=y(Zs()),Qp=y(Ct()),ro=y(Zt()),Kp=y(br()),Yk=y(en()),Xk=y(Ss());Kk();Zk=y(U()),e1=y(rn()),t1=y(U()),r1=e=>{(0,t1.emitWarningIfUnsupportedVersion)(process.version);let t=(0,e1.resolveDefaultsModeConfig)(e),r=()=>t().then(Zk.loadConfigsForDefaultMode),s=Qk(e);Vi(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,ro.loadConfig)(Qi,n),bodyLengthChecker:e?.bodyLengthChecker??Yk.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Wp.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:cp.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new Yt},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Vt}],maxAttempts:e?.maxAttempts??(0,ro.loadConfig)(Qp.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,ro.loadConfig)(so.NODE_REGION_CONFIG_OPTIONS,{...so.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:Kp.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,ro.loadConfig)({...Qp.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Xk.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Jk.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Kp.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ro.loadConfig)(so.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,ro.loadConfig)(so.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,ro.loadConfig)(Wp.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var n1,o1,i1=S(()=>{n1=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},o1=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Jp,Yp,Xp,a1,c1=S(()=>{Jp=y(ga()),Yp=y(ye()),Xp=y(U());i1();a1=(e,t)=>{let r=Object.assign((0,Jp.getAwsRegionExtensionConfiguration)(e),(0,Xp.getDefaultExtensionConfiguration)(e),(0,Yp.getHttpHandlerExtensionConfiguration)(e),n1(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,Jp.resolveAwsRegionExtensionConfiguration)(r),(0,Xp.resolveDefaultRuntimeConfig)(r),(0,Yp.resolveHttpHandlerRuntimeConfig)(r),o1(r))}});var Zp,d1,u1,em,l1,f1,p1,tm,Tw,ws,Dd=S(()=>{Zp=y(Ls()),d1=y(qs()),u1=y(Fs()),em=y(ca()),l1=y(et());Me();f1=y(Ys()),p1=y(Wt()),tm=y(Ct()),Tw=y(U());xw();zp();s1();c1();ws=class extends Tw.Client{config;constructor(...[t]){let r=r1(t||{});super(r),this.initConfig=r;let s=wk(r),n=(0,em.resolveUserAgentConfig)(s),o=(0,tm.resolveRetryConfig)(n),i=(0,l1.resolveRegionConfig)(o),a=(0,Zp.resolveHostHeaderConfig)(i),c=(0,p1.resolveEndpointConfig)(a),d=Ek(c),u=a1(d,t?.extensions||[]);this.config=u,this.middlewareStack.use((0,em.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,tm.getRetryPlugin)(this.config)),this.middlewareStack.use((0,f1.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Zp.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,d1.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,u1.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use($s(this.config,{httpAuthSchemeParametersProvider:Sk,identityProviderConfigProvider:async l=>new es({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(Us(this.config))}destroy(){super.destroy()}}});var m1,er,rm=S(()=>{m1=y(U()),er=class e extends m1.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Aw,Iw,Pw,kd,Md,Ld,qd,Fd,$d,Nw,Ow,Ud,jd=S(()=>{Aw=y(U());rm();Iw=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Aw.SENSITIVE_STRING}}),Pw=e=>({...e,...e.Credentials&&{Credentials:Iw(e.Credentials)}}),kd=class e extends er{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Md=class e extends er{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ld=class e extends er{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},qd=class e extends er{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Fd=class e extends er{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},$d=class e extends er{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Nw=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Aw.SENSITIVE_STRING}}),Ow=e=>({...e,...e.Credentials&&{Credentials:Iw(e.Credentials)}}),Ud=class e extends er{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var h1,le,g1,y1,S1,_1,E1,O9,D9,k9,M9,L9,q9,F9,$9,U9,w1,j9,B9,H9,z9,V9,G9,b1,W9,Q9,v1,K9,J9,Y9,X9,Z9,eJ,tJ,an,rJ,x1,C1,R1,T1,Dw,sJ,kw,va,nJ,Mw,Lw,xa,qw,Ca,Fw,$w,Uw,Ra,Ta,jw,Bw,Hw,Aa,zw,Ia,Pa,Vw,Gw,on,Ww,Qw,Kw,Jw,Yw,A1,Xw,Zw,eb,it,I1,oJ,tb=S(()=>{vt();h1=y(ye()),le=y(U());jd();rm();g1=async(e,t)=>{let r=C1,s;return s=I1({...$9(e,t),[T1]:sJ,[A1]:R1}),x1(t,r,"/",void 0,s)},y1=async(e,t)=>{let r=C1,s;return s=I1({...U9(e,t),[T1]:nJ,[A1]:R1}),x1(t,r,"/",void 0,s)},S1=async(e,t)=>{if(e.statusCode>=300)return E1(e,t);let r=await na(e.body,t),s={};return s=W9(r.AssumeRoleResult,t),{$metadata:an(e),...s}},_1=async(e,t)=>{if(e.statusCode>=300)return E1(e,t);let r=await na(e.body,t),s={};return s=Q9(r.AssumeRoleWithWebIdentityResult,t),{$metadata:an(e),...s}},E1=async(e,t)=>{let r={...e,body:await Ff(e.body,t)},s=oJ(e,r.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await O9(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await L9(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await q9(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await F9(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await D9(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await k9(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await M9(r,t);default:let n=r.body;return rJ({output:e,parsedBody:n.Error,errorCode:s})}},O9=async(e,t)=>{let r=e.body,s=K9(r.Error,t),n=new kd({$metadata:an(e),...s});return(0,le.decorateServiceException)(n,r)},D9=async(e,t)=>{let r=e.body,s=J9(r.Error,t),n=new Ud({$metadata:an(e),...s});return(0,le.decorateServiceException)(n,r)},k9=async(e,t)=>{let r=e.body,s=Y9(r.Error,t),n=new Fd({$metadata:an(e),...s});return(0,le.decorateServiceException)(n,r)},M9=async(e,t)=>{let r=e.body,s=X9(r.Error,t),n=new $d({$metadata:an(e),...s});return(0,le.decorateServiceException)(n,r)},L9=async(e,t)=>{let r=e.body,s=Z9(r.Error,t),n=new Md({$metadata:an(e),...s});return(0,le.decorateServiceException)(n,r)},q9=async(e,t)=>{let r=e.body,s=eJ(r.Error,t),n=new Ld({$metadata:an(e),...s});return(0,le.decorateServiceException)(n,r)},F9=async(e,t)=>{let r=e.body,s=tJ(r.Error,t),n=new qd({$metadata:an(e),...s});return(0,le.decorateServiceException)(n,r)},$9=(e,t)=>{let r={};if(e[Ia]!=null&&(r[Ia]=e[Ia]),e[Pa]!=null&&(r[Pa]=e[Pa]),e[Ta]!=null){let s=w1(e[Ta],t);e[Ta]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}if(e[Ra]!=null&&(r[Ra]=e[Ra]),e[Ca]!=null&&(r[Ca]=e[Ca]),e[Kw]!=null){let s=G9(e[Kw],t);e[Kw]?.length===0&&(r.Tags=[]),Object.entries(s).forEach(([n,o])=>{let i=`Tags.${n}`;r[i]=o})}if(e[Yw]!=null){let s=V9(e[Yw],t);e[Yw]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(s).forEach(([n,o])=>{let i=`TransitiveTagKeys.${n}`;r[i]=o})}if(e[$w]!=null&&(r[$w]=e[$w]),e[Ww]!=null&&(r[Ww]=e[Ww]),e[Jw]!=null&&(r[Jw]=e[Jw]),e[on]!=null&&(r[on]=e[on]),e[Bw]!=null){let s=H9(e[Bw],t);e[Bw]?.length===0&&(r.ProvidedContexts=[]),Object.entries(s).forEach(([n,o])=>{let i=`ProvidedContexts.${n}`;r[i]=o})}return r},U9=(e,t)=>{let r={};if(e[Ia]!=null&&(r[Ia]=e[Ia]),e[Pa]!=null&&(r[Pa]=e[Pa]),e[Zw]!=null&&(r[Zw]=e[Zw]),e[Hw]!=null&&(r[Hw]=e[Hw]),e[Ta]!=null){let s=w1(e[Ta],t);e[Ta]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}return e[Ra]!=null&&(r[Ra]=e[Ra]),e[Ca]!=null&&(r[Ca]=e[Ca]),r},w1=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=j9(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},j9=(e,t)=>{let r={};return e[eb]!=null&&(r[eb]=e[eb]),r},B9=(e,t)=>{let r={};return e[jw]!=null&&(r[jw]=e[jw]),e[qw]!=null&&(r[qw]=e[qw]),r},H9=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=B9(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},z9=(e,t)=>{let r={};return e[Uw]!=null&&(r[Uw]=e[Uw]),e[Xw]!=null&&(r[Xw]=e[Xw]),r},V9=(e,t)=>{let r={},s=1;for(let n of e)n!==null&&(r[`member.${s}`]=n,s++);return r},G9=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=z9(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},b1=(e,t)=>{let r={};return e[kw]!=null&&(r[kw]=(0,le.expectString)(e[kw])),e[Mw]!=null&&(r[Mw]=(0,le.expectString)(e[Mw])),r},W9=(e,t)=>{let r={};return e[xa]!=null&&(r[xa]=v1(e[xa],t)),e[va]!=null&&(r[va]=b1(e[va],t)),e[Aa]!=null&&(r[Aa]=(0,le.strictParseInt32)(e[Aa])),e[on]!=null&&(r[on]=(0,le.expectString)(e[on])),r},Q9=(e,t)=>{let r={};return e[xa]!=null&&(r[xa]=v1(e[xa],t)),e[Gw]!=null&&(r[Gw]=(0,le.expectString)(e[Gw])),e[va]!=null&&(r[va]=b1(e[va],t)),e[Aa]!=null&&(r[Aa]=(0,le.strictParseInt32)(e[Aa])),e[zw]!=null&&(r[zw]=(0,le.expectString)(e[zw])),e[Lw]!=null&&(r[Lw]=(0,le.expectString)(e[Lw])),e[on]!=null&&(r[on]=(0,le.expectString)(e[on])),r},v1=(e,t)=>{let r={};return e[Dw]!=null&&(r[Dw]=(0,le.expectString)(e[Dw])),e[Vw]!=null&&(r[Vw]=(0,le.expectString)(e[Vw])),e[Qw]!=null&&(r[Qw]=(0,le.expectString)(e[Qw])),e[Fw]!=null&&(r[Fw]=(0,le.expectNonNull)((0,le.parseRfc3339DateTimeWithOffset)(e[Fw]))),r},K9=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,le.expectString)(e[it])),r},J9=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,le.expectString)(e[it])),r},Y9=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,le.expectString)(e[it])),r},X9=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,le.expectString)(e[it])),r},Z9=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,le.expectString)(e[it])),r},eJ=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,le.expectString)(e[it])),r},tJ=(e,t)=>{let r={};return e[it]!=null&&(r[it]=(0,le.expectString)(e[it])),r},an=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),rJ=(0,le.withBaseException)(er),x1=async(e,t,r,s,n)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return s!==void 0&&(d.hostname=s),n!==void 0&&(d.body=n),new h1.HttpRequest(d)},C1={"content-type":"application/x-www-form-urlencoded"},R1="2011-06-15",T1="Action",Dw="AccessKeyId",sJ="AssumeRole",kw="AssumedRoleId",va="AssumedRoleUser",nJ="AssumeRoleWithWebIdentity",Mw="Arn",Lw="Audience",xa="Credentials",qw="ContextAssertion",Ca="DurationSeconds",Fw="Expiration",$w="ExternalId",Uw="Key",Ra="Policy",Ta="PolicyArns",jw="ProviderArn",Bw="ProvidedContexts",Hw="ProviderId",Aa="PackedPolicySize",zw="Provider",Ia="RoleArn",Pa="RoleSessionName",Vw="SecretAccessKey",Gw="SubjectFromWebIdentityToken",on="SourceIdentity",Ww="SerialNumber",Qw="SessionToken",Kw="Tags",Jw="TokenCode",Yw="TransitiveTagKeys",A1="Version",Xw="Value",Zw="WebIdentityToken",eb="arn",it="message",I1=e=>Object.entries(e).map(([t,r])=>(0,le.extendedEncodeURIComponent)(t)+"="+(0,le.extendedEncodeURIComponent)(r)).join("&"),oJ=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var P1,N1,O1,ii,sm=S(()=>{P1=y(Wt()),N1=y(wr()),O1=y(U());zp();jd();tb();ii=class extends O1.Command.classBuilder().ep(Hp).m(function(t,r,s,n){return[(0,N1.getSerdePlugin)(s,this.serialize,this.deserialize),(0,P1.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Pw).ser(g1).de(S1).build(){}});var D1,k1,M1,ai,nm=S(()=>{D1=y(Wt()),k1=y(wr()),M1=y(U());zp();jd();tb();ai=class extends M1.Command.classBuilder().ep(Hp).m(function(t,r,s,n){return[(0,k1.getSerdePlugin)(s,this.serialize,this.deserialize),(0,D1.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Nw,Ow).ser(y1).de(_1).build(){}});var L1,iJ,om,q1=S(()=>{L1=y(U());sm();nm();Dd();iJ={AssumeRoleCommand:ii,AssumeRoleWithWebIdentityCommand:ai},om=class extends ws{};(0,L1.createAggregatedClient)(iJ,om)});var F1=S(()=>{sm();nm()});var $1=S(()=>{jd()});var U1,j1,B1,H1,z1,V1,G1=S(()=>{ns();U1=y(ga());sm();nm();j1=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},B1=async(e,t,r,s={})=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t,i=await(0,U1.stsRegionDefaultResolver)(s)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),n??o??i},H1=(e,t)=>{let r,s;return async(n,o)=>{if(s=n,!r){let{logger:u=e?.parentClientConfig?.logger,profile:l=e?.parentClientConfig?.profile,region:h,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:w=e?.parentClientConfig?.userAgentAppId}=e,C=await B1(h,e?.parentClientConfig?.region,g,{logger:u,profile:l}),R=!V1(m);r=new t({...e,userAgentAppId:w,profile:l,credentialDefaultProvider:()=>async()=>s,region:C,requestHandler:R?m:void 0,logger:u})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new ii(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let c=j1(a),d={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return Pn(d,"CREDENTIALS_STS_ASSUME_ROLE","i"),d}},z1=(e,t)=>{let r;return async s=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:d=e?.parentClientConfig?.profile,region:u,requestHandler:l=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:m=e?.parentClientConfig?.userAgentAppId}=e,g=await B1(u,e?.parentClientConfig?.region,h,{logger:c,profile:d}),w=!V1(l);r=new t({...e,userAgentAppId:m,profile:d,region:g,requestHandler:w?l:void 0,logger:c})}let{Credentials:n,AssumedRoleUser:o}=await r.send(new ai(s));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);let i=j1(o),a={accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,...n.CredentialScope&&{credentialScope:n.CredentialScope},...i&&{accountId:i}};return i&&Pn(a,"RESOLVED_ACCOUNT_ID","T"),Pn(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},V1=e=>e?.metadata?.handlerProtocol==="h2"});var W1,Q1,K1,aJ,J1=S(()=>{G1();Dd();W1=(e,t)=>t?class extends e{constructor(s){super(s);for(let n of t)this.middlewareStack.use(n)}}:e,Q1=(e={},t)=>H1(e,W1(ws,t)),K1=(e={},t)=>z1(e,W1(ws,t)),aJ=e=>t=>e({roleAssumer:Q1(t),roleAssumerWithWebIdentity:K1(t),...t})});var rb={};dt(rb,{AssumeRoleCommand:()=>ii,AssumeRoleResponseFilterSensitiveLog:()=>Pw,AssumeRoleWithWebIdentityCommand:()=>ai,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Nw,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Ow,CredentialsFilterSensitiveLog:()=>Iw,ExpiredTokenException:()=>kd,IDPCommunicationErrorException:()=>Ud,IDPRejectedClaimException:()=>Fd,InvalidIdentityTokenException:()=>$d,MalformedPolicyDocumentException:()=>Md,PackedPolicyTooLargeException:()=>Ld,RegionDisabledException:()=>qd,STS:()=>om,STSClient:()=>ws,STSServiceException:()=>er,__Client:()=>Tw.Client,decorateDefaultCredentialProvider:()=>aJ,getDefaultRoleAssumer:()=>Q1,getDefaultRoleAssumerWithWebIdentity:()=>K1});var sb=S(()=>{Dd();q1();F1();$1();J1();rm()});var ib=b(Y1=>{"use strict";var ob=Gt(),nb=Le(),cJ=require("child_process"),dJ=require("util"),uJ=(ns(),Q(Nn)),lJ=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let o=new Date;if(new Date(t.Expiration)<o)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let s=t.AccountId;!s&&r?.[e]?.aws_account_id&&(s=r[e].aws_account_id);let n={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...s&&{accountId:s}};return uJ.setCredentialFeature(n,"CREDENTIALS_PROCESS","w"),n},fJ=async(e,t,r)=>{let s=t[e];if(t[e]){let n=s.credential_process;if(n!==void 0){let o=dJ.promisify(ob.externalDataInterceptor?.getTokenRecord?.().exec??cJ.exec);try{let{stdout:i}=await o(n),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return lJ(e,a,t)}catch(i){throw new nb.CredentialsProviderError(i.message,{logger:r})}}else throw new nb.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new nb.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},pJ=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await ob.parseKnownFiles(e);return fJ(ob.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};Y1.fromProcess=pJ});var ab=b(vs=>{"use strict";var mJ=vs&&vs.__createBinding||(Object.create?(function(e,t,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]})),hJ=vs&&vs.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),gJ=vs&&vs.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var s=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[s.length]=n);return s},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s=e(t),n=0;n<s.length;n++)s[n]!=="default"&&mJ(r,t,s[n]);return hJ(r,t),r}})();Object.defineProperty(vs,"__esModule",{value:!0});vs.fromWebToken=void 0;var yJ=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:s,webIdentityToken:n,providerId:o,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:d}=e;if(!d){let{getDefaultRoleAssumerWithWebIdentity:u}=await Promise.resolve().then(()=>gJ((sb(),Q(rb))));d=u({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return d({RoleArn:r,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:c})};vs.fromWebToken=yJ});var Z1=b(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.fromTokenFile=void 0;var SJ=(ns(),Q(Nn)),_J=Le(),EJ=Gt(),wJ=require("fs"),bJ=ab(),X1="AWS_WEB_IDENTITY_TOKEN_FILE",vJ="AWS_ROLE_ARN",xJ="AWS_ROLE_SESSION_NAME",CJ=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[X1],s=e?.roleArn??process.env[vJ],n=e?.roleSessionName??process.env[xJ];if(!r||!s)throw new _J.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,bJ.fromWebToken)({...e,webIdentityToken:EJ.externalDataInterceptor?.getTokenRecord?.()[r]??(0,wJ.readFileSync)(r,{encoding:"ascii"}),roleArn:s,roleSessionName:n})(t);return r===process.env[X1]&&(0,SJ.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};im.fromTokenFile=CJ});var cb=b(Bd=>{"use strict";var eM=Z1(),tM=ab();Object.keys(eM).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Bd,e)&&Object.defineProperty(Bd,e,{enumerable:!0,get:function(){return eM[e]}})});Object.keys(tM).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Bd,e)&&Object.defineProperty(Bd,e,{enumerable:!0,get:function(){return tM[e]}})})});var aM=b(iM=>{"use strict";var ub=Gt(),Hd=Le(),no=(ns(),Q(Nn)),RJ=(e,t,r)=>{let s={EcsContainer:async n=>{let{fromHttp:o}=await Promise.resolve().then(()=>y(XE())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>y(Kn()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Hd.chain(o(n??{}),i(n))().then(db)},Ec2InstanceMetadata:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>y(Kn()));return async()=>o(n)().then(db)},Environment:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>y(zE()));return async()=>o(n)().then(db)}};if(e in s)return s[e];throw new Hd.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},db=e=>no.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),TJ=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(AJ(e,{profile:t,logger:r})||IJ(e,{profile:t,logger:r})),AJ=(e,{profile:t,logger:r})=>{let s=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return s&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),s},IJ=(e,{profile:t,logger:r})=>{let s=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return s&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),s},PJ=async(e,t,r,s={},n)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:i,region:a}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(sb(),rb));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(i&&i in s)throw new Hd.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${ub.getProfileName(r)}. Profiles visited: `+Object.keys(s).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${i?`source_profile=[${i}]`:`profile=[${e}]`}`);let c=i?n(i,t,r,{...s,[i]:!0},rM(t[i]??{})):(await RJ(o.credential_source,e,r.logger)(r))();if(rM(o))return c.then(d=>no.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:u}=o;if(u){if(!r.mfaCodeProvider)throw new Hd.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=u,d.TokenCode=await r.mfaCodeProvider(u)}let l=await c;return r.roleAssumer(l,d).then(h=>no.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},rM=e=>!e.role_arn&&!!e.credential_source,NJ=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",OJ=async(e,t)=>Promise.resolve().then(()=>y(ib())).then(({fromProcess:r})=>r({...e,profile:t})().then(s=>no.setCredentialFeature(s,"CREDENTIALS_PROFILE_PROCESS","v"))),DJ=async(e,t,r={})=>{let{fromSSO:s}=await Promise.resolve().then(()=>y(vw()));return s({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(n=>t.sso_session?no.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO","r"):no.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},kJ=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),sM=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,nM=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return no.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},MJ=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,LJ=async(e,t)=>Promise.resolve().then(()=>y(cb())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(s=>no.setCredentialFeature(s,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),oM=async(e,t,r,s={},n=!1)=>{let o=t[e];if(Object.keys(s).length>0&&sM(o))return nM(o,r);if(n||TJ(o,{profile:e,logger:r.logger}))return PJ(e,t,r,s,oM);if(sM(o))return nM(o,r);if(MJ(o))return LJ(o,r);if(NJ(o))return OJ(r,e);if(kJ(o))return await DJ(e,o,r);throw new Hd.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},qJ=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let s=await ub.parseKnownFiles(r);return oM(ub.getProfileName({profile:e.profile??t?.profile}),s,r)};iM.fromIni=qJ});var lM=b(am=>{"use strict";var lb=zE(),zd=Le(),FJ=Gt(),cM="AWS_EC2_METADATA_DISABLED",$J=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:s,fromInstanceMetadata:n}=await Promise.resolve().then(()=>y(Kn()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>y(XE()));return zd.chain(o(e),s(e))}return process.env[cM]&&process.env[cM]!=="false"?async()=>{throw new zd.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),n(e))};function UJ(e,t){let r=jJ(e),s,n,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),s)await s;else if(!o||t?.(o))if(o)n||(n=r(a).then(c=>{o=c,n=void 0}));else return s=r(a).then(c=>{o=c,s=void 0}),i(a);return o};return i}var jJ=e=>async t=>{let r;for(let s of e)try{return await s(t)}catch(n){if(r=n,n?.tryNextLink)continue;throw n}throw r},dM=!1,BJ=(e={})=>UJ([async()=>{if(e.profile??process.env[FJ.ENV_PROFILE])throw process.env[lb.ENV_KEY]&&process.env[lb.ENV_SECRET]&&(dM||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),dM=!0)),new zd.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),lb.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e;if(!r&&!s&&!n&&!o&&!i)throw new zd.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>y(vw()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>y(aM()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>y(ib()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>y(cb()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await $J(e))()),async()=>{throw new zd.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],uM),HJ=e=>e?.expiration!==void 0,uM=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;am.credentialsTreatedAsExpired=uM;am.credentialsWillNeedRefresh=HJ;am.defaultProvider=BJ});var IM=b(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.ruleSet=void 0;var RM="required",tr="fn",rr="argv",ci="ref",oo="properties",io="headers",fM=!0,pM="isSet",Vd="booleanEquals",Na="error",xs="endpoint",cn="tree",cm="PartitionResult",fb="stringEquals",mM={[RM]:!1,type:"string"},hM={[RM]:!0,default:!1,type:"boolean"},gM={[ci]:"Endpoint"},TM={[tr]:Vd,[rr]:[{[ci]:"UseFIPS"},!0]},AM={[tr]:Vd,[rr]:[{[ci]:"UseDualStack"},!0]},Or={},yM={[tr]:"getAttr",[rr]:[{[ci]:cm},"supportsFIPS"]},SM={[tr]:Vd,[rr]:[!0,{[tr]:"getAttr",[rr]:[{[ci]:cm},"supportsDualStack"]}]},pb={[tr]:"getAttr",[rr]:[{[ci]:cm},"name"]},_M={url:"https://secretsmanager-fips.{Region}.amazonaws.com",[oo]:{},[io]:{}},EM={url:"https://secretsmanager.{Region}.amazonaws.com",[oo]:{},[io]:{}},wM=[TM],bM=[AM],vM=[{[ci]:"Region"}],xM=[{[tr]:fb,[rr]:["aws",pb]}],CM=[{[tr]:fb,[rr]:["aws-us-gov",pb]}],zJ={version:"1.0",parameters:{Region:mM,UseDualStack:hM,UseFIPS:hM,Endpoint:mM},rules:[{conditions:[{[tr]:pM,[rr]:[gM]}],rules:[{conditions:wM,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Na},{conditions:bM,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Na},{endpoint:{url:gM,[oo]:Or,[io]:Or},type:xs}],type:cn},{conditions:[{[tr]:pM,[rr]:vM}],rules:[{conditions:[{[tr]:"aws.partition",[rr]:vM,assign:cm}],rules:[{conditions:[TM,AM],rules:[{conditions:[{[tr]:Vd,[rr]:[fM,yM]},SM],rules:[{conditions:xM,endpoint:_M,type:xs},{conditions:CM,endpoint:_M,type:xs},{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[oo]:Or,[io]:Or},type:xs}],type:cn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Na}],type:cn},{conditions:wM,rules:[{conditions:[{[tr]:Vd,[rr]:[yM,fM]}],rules:[{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dnsSuffix}",[oo]:Or,[io]:Or},type:xs}],type:cn},{error:"FIPS is enabled but this partition does not support FIPS",type:Na}],type:cn},{conditions:bM,rules:[{conditions:[SM],rules:[{conditions:xM,endpoint:EM,type:xs},{conditions:[{[tr]:fb,[rr]:["aws-cn",pb]}],endpoint:{url:"https://secretsmanager.{Region}.amazonaws.com.cn",[oo]:Or,[io]:Or},type:xs},{conditions:CM,endpoint:EM,type:xs},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dualStackDnsSuffix}",[oo]:Or,[io]:Or},type:xs}],type:cn},{error:"DualStack is enabled but this partition does not support DualStack",type:Na}],type:cn},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dnsSuffix}",[oo]:Or,[io]:Or},type:xs}],type:cn}],type:cn},{error:"Invalid Configuration: Missing Region",type:Na}]};dm.ruleSet=zJ});var PM=b(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.defaultEndpointResolver=void 0;var VJ=ss(),mb=ts(),GJ=IM(),WJ=new mb.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),QJ=(e,t={})=>WJ.get(e,()=>(0,mb.resolveEndpoint)(GJ.ruleSet,{endpointParams:e,logger:t.logger}));um.defaultEndpointResolver=QJ;mb.customEndpointFunctions.aws=VJ.awsEndpointFunctions});var DM=b(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});lm.getRuntimeConfig=void 0;var KJ=(vt(),Q(Js)),JJ=(vE(),Q(x0)),YJ=U(),XJ=vr(),NM=qe(),OM=Fe(),ZJ=HE(),eY=PM(),tY=e=>({apiVersion:"2017-10-17",base64Decoder:e?.base64Decoder??NM.fromBase64,base64Encoder:e?.base64Encoder??NM.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??eY.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??ZJ.defaultSecretsManagerHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new KJ.AwsSdkSigV4Signer}],logger:e?.logger??new YJ.NoOpLogger,protocol:e?.protocol??new JJ.AwsJson1_1Protocol({defaultNamespace:"com.amazonaws.secretsmanager",serviceTarget:"secretsmanager",awsQueryCompatible:!1}),serviceId:e?.serviceId??"Secrets Manager",urlParser:e?.urlParser??XJ.parseUrl,utf8Decoder:e?.utf8Decoder??OM.fromUtf8,utf8Encoder:e?.utf8Encoder??OM.toUtf8});lm.getRuntimeConfig=tY});var FM=b(pm=>{"use strict";Object.defineProperty(pm,"__esModule",{value:!0});pm.getRuntimeConfig=void 0;var rY=(An(),Q(Tn)),sY=rY.__importDefault(DN()),kM=(vt(),Q(Js)),nY=lM(),MM=cd(),fm=et(),oY=Zs(),LM=Ct(),di=Zt(),qM=br(),iY=en(),aY=Ss(),cY=DM(),dY=U(),uY=rn(),lY=U(),fY=e=>{(0,lY.emitWarningIfUnsupportedVersion)(process.version);let t=(0,uY.resolveDefaultsModeConfig)(e),r=()=>t().then(dY.loadConfigsForDefaultMode),s=(0,cY.getRuntimeConfig)(e);(0,kM.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,di.loadConfig)(kM.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??iY.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??nY.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,MM.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:sY.default.version}),maxAttempts:e?.maxAttempts??(0,di.loadConfig)(LM.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,di.loadConfig)(fm.NODE_REGION_CONFIG_OPTIONS,{...fm.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:qM.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,di.loadConfig)({...LM.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||aY.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??oY.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??qM.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,di.loadConfig)(fm.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,di.loadConfig)(fm.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,di.loadConfig)(MM.NODE_APP_ID_CONFIG_OPTIONS,n)}};pm.getRuntimeConfig=fY});var kL=b(re=>{"use strict";var $M=Ls(),pY=qs(),mY=Fs(),UM=ca(),hY=et(),Oa=(Me(),Q(hs)),sr=(_e(),Q(IS)),gY=Ys(),Ue=Wt(),jM=Ct(),Ae=U(),BM=HE(),yY=FM(),HM=ga(),zM=ye(),SY=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"secretsmanager"}),Ge={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},_Y=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},EY=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),wY=(e,t)=>{let r=Object.assign(HM.getAwsRegionExtensionConfiguration(e),Ae.getDefaultExtensionConfiguration(e),zM.getHttpHandlerExtensionConfiguration(e),_Y(e));return t.forEach(s=>s.configure(r)),Object.assign(e,HM.resolveAwsRegionExtensionConfiguration(r),Ae.resolveDefaultRuntimeConfig(r),zM.resolveHttpHandlerRuntimeConfig(r),EY(r))},ui=class extends Ae.Client{config;constructor(...[t]){let r=yY.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=SY(r),n=UM.resolveUserAgentConfig(s),o=jM.resolveRetryConfig(n),i=hY.resolveRegionConfig(o),a=$M.resolveHostHeaderConfig(i),c=Ue.resolveEndpointConfig(a),d=BM.resolveHttpAuthSchemeConfig(c),u=wY(d,t?.extensions||[]);this.config=u,this.middlewareStack.use(sr.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(UM.getUserAgentPlugin(this.config)),this.middlewareStack.use(jM.getRetryPlugin(this.config)),this.middlewareStack.use(gY.getContentLengthPlugin(this.config)),this.middlewareStack.use($M.getHostHeaderPlugin(this.config)),this.middlewareStack.use(pY.getLoggerPlugin(this.config)),this.middlewareStack.use(mY.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Oa.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:BM.defaultSecretsManagerHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new Oa.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(Oa.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},nr=class VM extends Ae.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,VM.prototype)}},bY={all:"all",description:"description",name:"name",owning_service:"owning-service",primary_region:"primary-region",tag_key:"tag-key",tag_value:"tag-value"},GM=class WM extends nr{name="DecryptionFailure";$fault="client";Message;constructor(t){super({name:"DecryptionFailure",$fault:"client",...t}),Object.setPrototypeOf(this,WM.prototype),this.Message=t.Message}},QM=class KM extends nr{name="InternalServiceError";$fault="server";Message;constructor(t){super({name:"InternalServiceError",$fault:"server",...t}),Object.setPrototypeOf(this,KM.prototype),this.Message=t.Message}},JM=class YM extends nr{name="InvalidNextTokenException";$fault="client";Message;constructor(t){super({name:"InvalidNextTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,YM.prototype),this.Message=t.Message}},XM=class ZM extends nr{name="InvalidParameterException";$fault="client";Message;constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),Object.setPrototypeOf(this,ZM.prototype),this.Message=t.Message}},eL=class tL extends nr{name="InvalidRequestException";$fault="client";Message;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,tL.prototype),this.Message=t.Message}},rL=class sL extends nr{name="ResourceNotFoundException";$fault="client";Message;constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,sL.prototype),this.Message=t.Message}},vY={Failed:"Failed",InProgress:"InProgress",InSync:"InSync"},nL=class oL extends nr{name="EncryptionFailure";$fault="client";Message;constructor(t){super({name:"EncryptionFailure",$fault:"client",...t}),Object.setPrototypeOf(this,oL.prototype),this.Message=t.Message}},iL=class aL extends nr{name="LimitExceededException";$fault="client";Message;constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,aL.prototype),this.Message=t.Message}},cL=class dL extends nr{name="MalformedPolicyDocumentException";$fault="client";Message;constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,dL.prototype),this.Message=t.Message}},uL=class lL extends nr{name="PreconditionNotMetException";$fault="client";Message;constructor(t){super({name:"PreconditionNotMetException",$fault:"client",...t}),Object.setPrototypeOf(this,lL.prototype),this.Message=t.Message}},fL=class pL extends nr{name="ResourceExistsException";$fault="client";Message;constructor(t){super({name:"ResourceExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,pL.prototype),this.Message=t.Message}},xY={asc:"asc",desc:"desc"},mL=class hL extends nr{name="PublicPolicyException";$fault="client";Message;constructor(t){super({name:"PublicPolicyException",$fault:"client",...t}),Object.setPrototypeOf(this,hL.prototype),this.Message=t.Message}},CY="AutomaticallyAfterDays",RY="APIErrorListType",TY="APIErrorType",ht="ARN",gL="AddReplicaRegions",AY="AddReplicaRegionListType",IY="BatchGetSecretValue",PY="BatchGetSecretValueRequest",NY="BatchGetSecretValueResponse",OY="BlockPublicPolicy",Kd="CreatedDate",DY="CheckName",kY="CancelRotateSecret",MY="CancelRotateSecretRequest",LY="CancelRotateSecretResponse",Mm="ClientRequestToken",qY="CreateSecret",FY="CreateSecretRequest",$Y="CreateSecretResponse",Lm="Description",UY="DeletionDate",yL="DeletedDate",jY="DecryptionFailure",BY="DeleteResourcePolicy",HY="DeleteResourcePolicyRequest",zY="DeleteResourcePolicyResponse",VY="DeleteSecret",GY="DeleteSecretRequest",WY="DeleteSecretResponse",QY="DescribeSecretRequest",KY="DescribeSecretResponse",JY="DescribeSecret",YY="Duration",XY="Errors",ZY="ErrorCode",eX="ExcludeCharacters",tX="EncryptionFailure",rX="ExcludeLowercase",sX="ErrorMessage",nX="ExcludeNumbers",oX="ExcludePunctuation",iX="ExcludeUppercase",SL="Filters",aX="ForceDeleteWithoutRecovery",cX="FiltersListType",_L="ForceOverwriteReplicaSecret",dX="Filter",uX="GetRandomPassword",lX="GetRandomPasswordRequest",fX="GetRandomPasswordResponse",pX="GetResourcePolicyRequest",mX="GetResourcePolicyResponse",hX="GetResourcePolicy",gX="GetSecretValue",yX="GetSecretValueRequest",SX="GetSecretValueResponse",_X="IncludeDeprecated",EX="InvalidNextTokenException",wX="IncludePlannedDeletion",bX="InvalidParameterException",vX="InvalidRequestException",xX="IncludeSpace",CX="InternalServiceError",EL="Key",Da="KmsKeyId",RX="KmsKeyIds",qm="LastAccessedDate",wL="LastChangedDate",TX="LimitExceededException",bL="LastRotatedDate",AX="ListSecrets",IX="ListSecretsRequest",PX="ListSecretsResponse",NX="ListSecretVersionIds",OX="ListSecretVersionIdsRequest",DX="ListSecretVersionIdsResponse",hr="Message",kX="MalformedPolicyDocumentException",hb="MaxResults",MX="MoveToVersionId",At="Name",vL="NextRotationDate",ka="NextToken",xL="OwningService",LX="PasswordLength",qX="PreconditionNotMetException",FX="PublicPolicyException",CL="PrimaryRegion",$X="PutResourcePolicy",UX="PutResourcePolicyRequest",jX="PutResourcePolicyResponse",BX="PutSecretValue",HX="PutSecretValueRequest",zX="PutSecretValueResponse",VX="PolicyValidationPassed",RL="Region",TL="RotationEnabled",GX="ResourceExistsException",WX="RequireEachIncludedType",QX="RemoveFromVersionId",KX="RotateImmediately",gb="RotationLambdaARN",JX="ResourceNotFoundException",YX="RandomPassword",XX="RandomPasswordType",yb="ResourcePolicy",Sb="RotationRules",ZX="RemoveRegionsFromReplication",e7="RemoveRegionsFromReplicationRequest",t7="RemoveRegionsFromReplicationResponse",r7="RemoveReplicaRegions",s7="ReplicaRegionType",n7="RotationRulesType",Fm="ReplicationStatus",o7="ReplicationStatusListType",i7="RestoreSecretRequest",a7="RestoreSecretResponse",c7="RotateSecretRequest",d7="RotateSecretResponse",u7="ReplicationStatusType",l7="ReplicateSecretToRegions",f7="ReplicateSecretToRegionsRequest",p7="ReplicateSecretToRegionsResponse",m7="RestoreSecret",h7="RotateSecret",g7="RotationToken",y7="RotationTokenType",S7="RecoveryWindowInDays",_7="Status",Jd="SecretBinary",E7="SecretBinaryType",w7="ScheduleExpression",lt="SecretId",b7="SecretIdList",v7="SecretList",x7="SecretListEntry",C7="SecretListType",R7="StatusMessage",T7="SortOrder",A7="StopReplicationToReplica",I7="StopReplicationToReplicaRequest",P7="StopReplicationToReplicaResponse",Yd="SecretString",N7="SecretStringType",O7="SecretValues",D7="SecretValueEntry",k7="SecretVersionsListEntry",M7="SecretVersionsListType",L7="SecretValuesType",q7="SecretVersionsToStages",AL="SecretVersionsToStagesMapType",$m="Tags",F7="TagKeys",$7="TagListType",U7="TagResource",j7="TagResourceRequest",B7="Tag",H7="UntagResource",z7="UntagResourceRequest",V7="UpdateSecret",G7="UpdateSecretRequest",W7="UpdateSecretResponse",Q7="UpdateSecretVersionStage",K7="UpdateSecretVersionStageRequest",J7="UpdateSecretVersionStageResponse",Y7="Values",X7="ValidationErrors",Z7="ValidationErrorsEntry",eZ="ValidationErrorsType",dn="VersionId",tZ="VersionIdsToStages",rZ="ValidateResourcePolicy",sZ="ValidateResourcePolicyRequest",nZ="ValidateResourcePolicyResponse",IL="VersionStage",Xd="VersionStages",oZ="Value",iZ="Versions",is="client",Dr="error",aZ="server",PL="smithy.ts.sdk.synthetic.com.amazonaws.secretsmanager",P="com.amazonaws.secretsmanager",cZ=[0,P,XX,8,0],dZ=[0,P,y7,8,0],Zd=[0,P,E7,8,21],eu=[0,P,N7,8,0],uZ=[3,P,TY,0,[lt,ZY,hr],[0,0,0]],lZ=[3,P,PY,0,[b7,SL,hb,ka],[64,()=>DL,1,0]],fZ=[3,P,NY,0,[O7,ka,XY],[[()=>xee,0],0,()=>bee]],pZ=[3,P,MY,0,[lt],[0]],mZ=[3,P,LY,0,[ht,At,dn],[0,0,0]],hZ=[3,P,FY,0,[At,Mm,Lm,Da,Jd,Yd,$m,gL,_L],[0,[0,4],0,0,[()=>Zd,0],[()=>eu,0],()=>jm,()=>OL,2]],gZ=[3,P,$Y,0,[ht,At,dn,Fm],[0,0,0,()=>Um]],yZ=[-3,P,jY,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(yZ,GM);var SZ=[3,P,HY,0,[lt],[0]],_Z=[3,P,zY,0,[ht,At],[0,0]],EZ=[3,P,GY,0,[lt,S7,aX],[0,1,2]],wZ=[3,P,WY,0,[ht,At,UY],[0,0,4]],bZ=[3,P,QY,0,[lt],[0]],vZ=[3,P,KY,0,[ht,At,Lm,Da,TL,gb,Sb,bL,wL,qm,yL,vL,$m,tZ,xL,Kd,CL,Fm],[0,0,0,0,2,0,()=>_b,4,4,4,4,4,()=>jm,[2,P,AL,0,0,64],0,4,0,()=>Um]],xZ=[-3,P,tX,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(xZ,nL);var CZ=[3,P,dX,0,[EL,Y7],[0,64]],RZ=[3,P,lX,0,[LX,eX,nX,oX,iX,rX,xX,WX],[1,0,2,2,2,2,2,2]],TZ=[3,P,fX,0,[YX],[[()=>cZ,0]]],AZ=[3,P,pX,0,[lt],[0]],IZ=[3,P,mX,0,[ht,At,yb],[0,0,0]],PZ=[3,P,yX,0,[lt,dn,IL],[0,0,0]],NZ=[3,P,SX,0,[ht,At,dn,Jd,Yd,Xd,Kd],[0,0,0,[()=>Zd,0],[()=>eu,0],64,4]],OZ=[-3,P,CX,{[Dr]:aZ},[hr],[0]];sr.TypeRegistry.for(P).registerError(OZ,QM);var DZ=[-3,P,EX,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(DZ,JM);var kZ=[-3,P,bX,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(kZ,XM);var MZ=[-3,P,vX,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(MZ,eL);var LZ=[-3,P,TX,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(LZ,iL);var qZ=[3,P,IX,0,[wX,hb,ka,SL,T7],[2,1,0,()=>DL,0]],FZ=[3,P,PX,0,[v7,ka],[()=>vee,0]],$Z=[3,P,OX,0,[lt,hb,ka,_X],[0,1,0,2]],UZ=[3,P,DX,0,[iZ,ka,ht,At],[()=>Cee,0,0,0]],jZ=[-3,P,kX,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(jZ,cL);var BZ=[-3,P,qX,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(BZ,uL);var HZ=[-3,P,FX,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(HZ,mL);var zZ=[3,P,UX,0,[lt,yb,OY],[0,0,2]],VZ=[3,P,jX,0,[ht,At],[0,0]],GZ=[3,P,HX,0,[lt,Mm,Jd,Yd,Xd,g7],[0,[0,4],[()=>Zd,0],[()=>eu,0],64,[()=>dZ,0]]],WZ=[3,P,zX,0,[ht,At,dn,Xd],[0,0,0,64]],QZ=[3,P,e7,0,[lt,r7],[0,64]],KZ=[3,P,t7,0,[ht,Fm],[0,()=>Um]],JZ=[3,P,s7,0,[RL,Da],[0,0]],YZ=[3,P,f7,0,[lt,gL,_L],[0,()=>OL,2]],XZ=[3,P,p7,0,[ht,Fm],[0,()=>Um]],ZZ=[3,P,u7,0,[RL,Da,_7,R7,qm],[0,0,0,0,4]],eee=[-3,P,GX,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(eee,fL);var tee=[-3,P,JX,{[Dr]:is},[hr],[0]];sr.TypeRegistry.for(P).registerError(tee,rL);var ree=[3,P,i7,0,[lt],[0]],see=[3,P,a7,0,[ht,At],[0,0]],nee=[3,P,c7,0,[lt,Mm,gb,Sb,KX],[0,[0,4],0,()=>_b,2]],oee=[3,P,d7,0,[ht,At,dn],[0,0,0]],_b=[3,P,n7,0,[CY,YY,w7],[1,0,0]],iee=[3,P,x7,0,[ht,At,Lm,Da,TL,gb,Sb,bL,wL,qm,yL,vL,$m,q7,xL,Kd,CL],[0,0,0,0,2,0,()=>_b,4,4,4,4,4,()=>jm,[2,P,AL,0,0,64],0,4,0]],aee=[3,P,D7,0,[ht,At,dn,Jd,Yd,Xd,Kd],[0,0,0,[()=>Zd,0],[()=>eu,0],64,4]],cee=[3,P,k7,0,[dn,Xd,qm,Kd,RX],[0,64,4,4,64]],dee=[3,P,I7,0,[lt],[0]],uee=[3,P,P7,0,[ht],[0]],lee=[3,P,B7,0,[EL,oZ],[0,0]],fee=[3,P,j7,0,[lt,$m],[0,()=>jm]],pee=[3,P,z7,0,[lt,F7],[0,64]],mee=[3,P,G7,0,[lt,Mm,Lm,Da,Jd,Yd],[0,[0,4],0,0,[()=>Zd,0],[()=>eu,0]]],hee=[3,P,W7,0,[ht,At,dn],[0,0,0]],gee=[3,P,K7,0,[lt,IL,QX,MX],[0,0,0,0]],yee=[3,P,J7,0,[ht,At],[0,0]],See=[3,P,sZ,0,[lt,yb],[0,0]],_ee=[3,P,nZ,0,[VX,X7],[2,()=>Ree]],Eee=[3,P,Z7,0,[DY,sX],[0,0]],NL="unit",wee=[-3,PL,"SecretsManagerServiceException",0,[],[]];sr.TypeRegistry.for(PL).registerError(wee,nr);var OL=[1,P,AY,0,()=>JZ],bee=[1,P,RY,0,()=>uZ],DL=[1,P,cX,0,()=>CZ],Um=[1,P,o7,0,()=>ZZ],vee=[1,P,C7,0,()=>iee],xee=[1,P,L7,0,[()=>aee,0]],Cee=[1,P,M7,0,()=>cee],jm=[1,P,$7,0,()=>lee],Ree=[1,P,eZ,0,()=>Eee],Tee=[9,P,IY,0,()=>lZ,()=>fZ],Aee=[9,P,kY,0,()=>pZ,()=>mZ],Iee=[9,P,qY,0,()=>hZ,()=>gZ],Pee=[9,P,BY,0,()=>SZ,()=>_Z],Nee=[9,P,VY,0,()=>EZ,()=>wZ],Oee=[9,P,JY,0,()=>bZ,()=>vZ],Dee=[9,P,uX,0,()=>RZ,()=>TZ],kee=[9,P,hX,0,()=>AZ,()=>IZ],Mee=[9,P,gX,0,()=>PZ,()=>NZ],Lee=[9,P,AX,0,()=>qZ,()=>FZ],qee=[9,P,NX,0,()=>$Z,()=>UZ],Fee=[9,P,$X,0,()=>zZ,()=>VZ],$ee=[9,P,BX,0,()=>GZ,()=>WZ],Uee=[9,P,ZX,0,()=>QZ,()=>KZ],jee=[9,P,l7,0,()=>YZ,()=>XZ],Bee=[9,P,m7,0,()=>ree,()=>see],Hee=[9,P,h7,0,()=>nee,()=>oee],zee=[9,P,A7,0,()=>dee,()=>uee],Vee=[9,P,U7,0,()=>fee,()=>NL],Gee=[9,P,H7,0,()=>pee,()=>NL],Wee=[9,P,V7,0,()=>mee,()=>hee],Qee=[9,P,Q7,0,()=>gee,()=>yee],Kee=[9,P,rZ,0,()=>See,()=>_ee],Gd=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","BatchGetSecretValue",{}).n("SecretsManagerClient","BatchGetSecretValueCommand").sc(Tee).build(){},mm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","CancelRotateSecret",{}).n("SecretsManagerClient","CancelRotateSecretCommand").sc(Aee).build(){},hm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","CreateSecret",{}).n("SecretsManagerClient","CreateSecretCommand").sc(Iee).build(){},gm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteResourcePolicy",{}).n("SecretsManagerClient","DeleteResourcePolicyCommand").sc(Pee).build(){},ym=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteSecret",{}).n("SecretsManagerClient","DeleteSecretCommand").sc(Nee).build(){},Sm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","DescribeSecret",{}).n("SecretsManagerClient","DescribeSecretCommand").sc(Oee).build(){},_m=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetRandomPassword",{}).n("SecretsManagerClient","GetRandomPasswordCommand").sc(Dee).build(){},Em=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetResourcePolicy",{}).n("SecretsManagerClient","GetResourcePolicyCommand").sc(kee).build(){},wm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetSecretValue",{}).n("SecretsManagerClient","GetSecretValueCommand").sc(Mee).build(){},Wd=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecrets",{}).n("SecretsManagerClient","ListSecretsCommand").sc(Lee).build(){},Qd=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecretVersionIds",{}).n("SecretsManagerClient","ListSecretVersionIdsCommand").sc(qee).build(){},bm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","PutResourcePolicy",{}).n("SecretsManagerClient","PutResourcePolicyCommand").sc(Fee).build(){},vm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","PutSecretValue",{}).n("SecretsManagerClient","PutSecretValueCommand").sc($ee).build(){},xm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","RemoveRegionsFromReplication",{}).n("SecretsManagerClient","RemoveRegionsFromReplicationCommand").sc(Uee).build(){},Cm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ReplicateSecretToRegions",{}).n("SecretsManagerClient","ReplicateSecretToRegionsCommand").sc(jee).build(){},Rm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","RestoreSecret",{}).n("SecretsManagerClient","RestoreSecretCommand").sc(Bee).build(){},Tm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","RotateSecret",{}).n("SecretsManagerClient","RotateSecretCommand").sc(Hee).build(){},Am=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","StopReplicationToReplica",{}).n("SecretsManagerClient","StopReplicationToReplicaCommand").sc(zee).build(){},Im=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","TagResource",{}).n("SecretsManagerClient","TagResourceCommand").sc(Vee).build(){},Pm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","UntagResource",{}).n("SecretsManagerClient","UntagResourceCommand").sc(Gee).build(){},Nm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecret",{}).n("SecretsManagerClient","UpdateSecretCommand").sc(Wee).build(){},Om=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecretVersionStage",{}).n("SecretsManagerClient","UpdateSecretVersionStageCommand").sc(Qee).build(){},Dm=class extends Ae.Command.classBuilder().ep(Ge).m(function(t,r,s,n){return[Ue.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("secretsmanager","ValidateResourcePolicy",{}).n("SecretsManagerClient","ValidateResourcePolicyCommand").sc(Kee).build(){},Jee={BatchGetSecretValueCommand:Gd,CancelRotateSecretCommand:mm,CreateSecretCommand:hm,DeleteResourcePolicyCommand:gm,DeleteSecretCommand:ym,DescribeSecretCommand:Sm,GetRandomPasswordCommand:_m,GetResourcePolicyCommand:Em,GetSecretValueCommand:wm,ListSecretsCommand:Wd,ListSecretVersionIdsCommand:Qd,PutResourcePolicyCommand:bm,PutSecretValueCommand:vm,RemoveRegionsFromReplicationCommand:xm,ReplicateSecretToRegionsCommand:Cm,RestoreSecretCommand:Rm,RotateSecretCommand:Tm,StopReplicationToReplicaCommand:Am,TagResourceCommand:Im,UntagResourceCommand:Pm,UpdateSecretCommand:Nm,UpdateSecretVersionStageCommand:Om,ValidateResourcePolicyCommand:Dm},km=class extends ui{};Ae.createAggregatedClient(Jee,km);var Yee=Oa.createPaginator(ui,Gd,"NextToken","NextToken","MaxResults"),Xee=Oa.createPaginator(ui,Qd,"NextToken","NextToken","MaxResults"),Zee=Oa.createPaginator(ui,Wd,"NextToken","NextToken","MaxResults");Object.defineProperty(re,"$Command",{enumerable:!0,get:function(){return Ae.Command}});Object.defineProperty(re,"__Client",{enumerable:!0,get:function(){return Ae.Client}});re.BatchGetSecretValueCommand=Gd;re.CancelRotateSecretCommand=mm;re.CreateSecretCommand=hm;re.DecryptionFailure=GM;re.DeleteResourcePolicyCommand=gm;re.DeleteSecretCommand=ym;re.DescribeSecretCommand=Sm;re.EncryptionFailure=nL;re.FilterNameStringType=bY;re.GetRandomPasswordCommand=_m;re.GetResourcePolicyCommand=Em;re.GetSecretValueCommand=wm;re.InternalServiceError=QM;re.InvalidNextTokenException=JM;re.InvalidParameterException=XM;re.InvalidRequestException=eL;re.LimitExceededException=iL;re.ListSecretVersionIdsCommand=Qd;re.ListSecretsCommand=Wd;re.MalformedPolicyDocumentException=cL;re.PreconditionNotMetException=uL;re.PublicPolicyException=mL;re.PutResourcePolicyCommand=bm;re.PutSecretValueCommand=vm;re.RemoveRegionsFromReplicationCommand=xm;re.ReplicateSecretToRegionsCommand=Cm;re.ResourceExistsException=fL;re.ResourceNotFoundException=rL;re.RestoreSecretCommand=Rm;re.RotateSecretCommand=Tm;re.SecretsManager=km;re.SecretsManagerClient=ui;re.SecretsManagerServiceException=nr;re.SortOrderType=xY;re.StatusType=vY;re.StopReplicationToReplicaCommand=Am;re.TagResourceCommand=Im;re.UntagResourceCommand=Pm;re.UpdateSecretCommand=Nm;re.UpdateSecretVersionStageCommand=Om;re.ValidateResourcePolicyCommand=Dm;re.paginateBatchGetSecretValue=Yee;re.paginateListSecretVersionIds=Xee;re.paginateListSecrets=Zee});var wb=b(ML=>{"use strict";ML.parse=function(e,t){return new Eb(e,t).parse()};var Eb=class e{constructor(t,r){this.source=t,this.transform=r||ete,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var t=this.source[this.position++];return t==="\\"?{value:this.source[this.position++],escaped:!0}:{value:t,escaped:!1}}record(t){this.recorded.push(t)}newEntry(t){var r;(this.recorded.length>0||t)&&(r=this.recorded.join(""),r==="NULL"&&!t&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var t=this.nextCharacter();if(t.value==="=")break}}parse(t){var r,s,n;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!n)this.dimension++,this.dimension>1&&(s=new e(this.source.substr(this.position-1),this.transform),this.entries.push(s.parse(!0)),this.position+=s.position-2);else if(r.value==="}"&&!n){if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else r.value==='"'&&!r.escaped?(n&&this.newEntry(!0),n=!n):r.value===","&&!n?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function ete(e){return e}});var bb=b((ybe,LL)=>{var tte=wb();LL.exports={create:function(e,t){return{parse:function(){return tte.parse(e,t)}}}}});var $L=b((Sbe,FL)=>{"use strict";var rte=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,ste=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,nte=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,ote=/^-?infinity$/;FL.exports=function(t){if(ote.test(t))return Number(t.replace("i","I"));var r=rte.exec(t);if(!r)return ite(t)||null;var s=!!r[8],n=parseInt(r[1],10);s&&(n=qL(n));var o=parseInt(r[2],10)-1,i=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),d=parseInt(r[6],10),u=r[7];u=u?1e3*parseFloat(u):0;var l,h=ate(t);return h!=null?(l=new Date(Date.UTC(n,o,i,a,c,d,u)),vb(n)&&l.setUTCFullYear(n),h!==0&&l.setTime(l.getTime()-h)):(l=new Date(n,o,i,a,c,d,u),vb(n)&&l.setFullYear(n)),l};function ite(e){var t=ste.exec(e);if(t){var r=parseInt(t[1],10),s=!!t[4];s&&(r=qL(r));var n=parseInt(t[2],10)-1,o=t[3],i=new Date(r,n,o);return vb(r)&&i.setFullYear(r),i}}function ate(e){if(e.endsWith("+00"))return 0;var t=nte.exec(e.split(" ")[1]);if(t){var r=t[1];if(r==="Z")return 0;var s=r==="-"?-1:1,n=parseInt(t[2],10)*3600+parseInt(t[3]||0,10)*60+parseInt(t[4]||0,10);return n*s*1e3}}function qL(e){return-(e-1)}function vb(e){return e>=0&&e<100}});var jL=b((_be,UL)=>{UL.exports=dte;var cte=Object.prototype.hasOwnProperty;function dte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)cte.call(r,s)&&(e[s]=r[s])}return e}});var zL=b((Ebe,HL)=>{"use strict";var ute=jL();HL.exports=Ma;function Ma(e){if(!(this instanceof Ma))return new Ma(e);ute(this,bte(e))}var lte=["seconds","minutes","hours","days","months","years"];Ma.prototype.toPostgres=function(){var e=lte.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),e.length===0?"0":e.map(function(t){var r=this[t]||0;return t==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+t},this).join(" ")};var fte={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},pte=["years","months","days"],mte=["hours","minutes","seconds"];Ma.prototype.toISOString=Ma.prototype.toISO=function(){var e=pte.map(r,this).join(""),t=mte.map(r,this).join("");return"P"+e+"T"+t;function r(s){var n=this[s]||0;return s==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),n+fte[s]}};var xb="([+-]?\\d+)",hte=xb+"\\s+years?",gte=xb+"\\s+mons?",yte=xb+"\\s+days?",Ste="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",_te=new RegExp([hte,gte,yte,Ste].map(function(e){return"("+e+")?"}).join("\\s*")),BL={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},Ete=["hours","minutes","seconds","milliseconds"];function wte(e){var t=e+"000000".slice(e.length);return parseInt(t,10)/1e3}function bte(e){if(!e)return{};var t=_te.exec(e),r=t[8]==="-";return Object.keys(BL).reduce(function(s,n){var o=BL[n],i=t[o];return!i||(i=n==="milliseconds"?wte(i):parseInt(i,10),!i)||(r&&~Ete.indexOf(n)&&(i*=-1),s[n]=i),s},{})}});var GL=b((wbe,VL)=>{"use strict";VL.exports=function(t){if(/^\\x/.test(t))return new Buffer(t.substr(2),"hex");for(var r="",s=0;s<t.length;)if(t[s]!=="\\")r+=t[s],++s;else if(/[0-7]{3}/.test(t.substr(s+1,3)))r+=String.fromCharCode(parseInt(t.substr(s+1,3),8)),s+=4;else{for(var n=1;s+n<t.length&&t[s+n]==="\\";)n++;for(var o=0;o<Math.floor(n/2);++o)r+="\\";s+=Math.floor(n/2)*2}return new Buffer(r,"binary")}});var ZL=b((bbe,XL)=>{var tu=wb(),ru=bb(),Bm=$L(),QL=zL(),KL=GL();function Hm(e){return function(r){return r===null?r:e(r)}}function JL(e){return e===null?e:e==="TRUE"||e==="t"||e==="true"||e==="y"||e==="yes"||e==="on"||e==="1"}function vte(e){return e?tu.parse(e,JL):null}function xte(e){return parseInt(e,10)}function Cb(e){return e?tu.parse(e,Hm(xte)):null}function Cte(e){return e?tu.parse(e,Hm(function(t){return YL(t).trim()})):null}var Rte=function(e){if(!e)return null;var t=ru.create(e,function(r){return r!==null&&(r=Ib(r)),r});return t.parse()},Rb=function(e){if(!e)return null;var t=ru.create(e,function(r){return r!==null&&(r=parseFloat(r)),r});return t.parse()},kr=function(e){if(!e)return null;var t=ru.create(e);return t.parse()},Tb=function(e){if(!e)return null;var t=ru.create(e,function(r){return r!==null&&(r=Bm(r)),r});return t.parse()},Tte=function(e){if(!e)return null;var t=ru.create(e,function(r){return r!==null&&(r=QL(r)),r});return t.parse()},Ate=function(e){return e?tu.parse(e,Hm(KL)):null},Ab=function(e){return parseInt(e,10)},YL=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},WL=function(e){return e?tu.parse(e,Hm(JSON.parse)):null},Ib=function(e){return e[0]!=="("?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},Ite=function(e){if(e[0]!=="<"&&e[1]!=="(")return null;for(var t="(",r="",s=!1,n=2;n<e.length-1;n++){if(s||(t+=e[n]),e[n]===")"){s=!0;continue}else if(!s)continue;e[n]!==","&&(r+=e[n])}var o=Ib(t);return o.radius=parseFloat(r),o},Pte=function(e){e(20,YL),e(21,Ab),e(23,Ab),e(26,Ab),e(700,parseFloat),e(701,parseFloat),e(16,JL),e(1082,Bm),e(1114,Bm),e(1184,Bm),e(600,Ib),e(651,kr),e(718,Ite),e(1e3,vte),e(1001,Ate),e(1005,Cb),e(1007,Cb),e(1028,Cb),e(1016,Cte),e(1017,Rte),e(1021,Rb),e(1022,Rb),e(1231,Rb),e(1014,kr),e(1015,kr),e(1008,kr),e(1009,kr),e(1040,kr),e(1041,kr),e(1115,Tb),e(1182,Tb),e(1185,Tb),e(1186,QL),e(1187,Tte),e(17,KL),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,WL),e(3807,WL),e(3907,kr),e(2951,kr),e(791,kr),e(1183,kr),e(1270,kr)};XL.exports={init:Pte}});var tq=b((vbe,eq)=>{"use strict";var or=1e6;function Nte(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),s="";t<0&&(t=~t+(r===0),r=~r+1>>>0,s="-");var n="",o,i,a,c,d,u;{if(o=t%or,t=t/or>>>0,i=4294967296*o+r,r=i/or>>>0,a=""+(i-or*r),r===0&&t===0)return s+a+n;for(c="",d=6-a.length,u=0;u<d;u++)c+="0";n=c+a+n}{if(o=t%or,t=t/or>>>0,i=4294967296*o+r,r=i/or>>>0,a=""+(i-or*r),r===0&&t===0)return s+a+n;for(c="",d=6-a.length,u=0;u<d;u++)c+="0";n=c+a+n}{if(o=t%or,t=t/or>>>0,i=4294967296*o+r,r=i/or>>>0,a=""+(i-or*r),r===0&&t===0)return s+a+n;for(c="",d=6-a.length,u=0;u<d;u++)c+="0";n=c+a+n}return o=t%or,i=4294967296*o+r,a=""+i%or,s+a+n}eq.exports=Nte});var iq=b((xbe,oq)=>{var Ote=tq(),We=function(e,t,r,s,n){r=r||0,s=s||!1,n=n||function(m,g,w){return m*Math.pow(2,w)+g};var o=r>>3,i=function(m){return s?~m&255:m},a=255,c=8-r%8;t<c&&(a=255<<8-t&255,c=t),r&&(a=a>>r%8);var d=0;r%8+t>=8&&(d=n(0,i(e[o])&a,c));for(var u=t+r>>3,l=o+1;l<u;l++)d=n(d,i(e[l]),8);var h=(t+r)%8;return h>0&&(d=n(d,i(e[u])>>8-h,h)),d},nq=function(e,t,r){var s=Math.pow(2,r-1)-1,n=We(e,1),o=We(e,r,1);if(o===0)return 0;var i=1,a=function(d,u,l){d===0&&(d=1);for(var h=1;h<=l;h++)i/=2,(u&1<<l-h)>0&&(d+=i);return d},c=We(e,t,r+1,!1,a);return o==Math.pow(2,r+1)-1?c===0?n===0?1/0:-1/0:NaN:(n===0?1:-1)*Math.pow(2,o-s)*c},Dte=function(e){return We(e,1)==1?-1*(We(e,15,1,!0)+1):We(e,15,1)},rq=function(e){return We(e,1)==1?-1*(We(e,31,1,!0)+1):We(e,31,1)},kte=function(e){return nq(e,23,8)},Mte=function(e){return nq(e,52,11)},Lte=function(e){var t=We(e,16,32);if(t==49152)return NaN;for(var r=Math.pow(1e4,We(e,16,16)),s=0,n=[],o=We(e,16),i=0;i<o;i++)s+=We(e,16,64+16*i)*r,r/=1e4;var a=Math.pow(10,We(e,16,48));return(t===0?1:-1)*Math.round(s*a)/a},sq=function(e,t){var r=We(t,1),s=We(t,63,1),n=new Date((r===0?1:-1)*s/1e3+9466848e5);return e||n.setTime(n.getTime()+n.getTimezoneOffset()*6e4),n.usec=s%1e3,n.getMicroSeconds=function(){return this.usec},n.setMicroSeconds=function(o){this.usec=o},n.getUTCMicroSeconds=function(){return this.usec},n},su=function(e){for(var t=We(e,32),r=We(e,32,32),s=We(e,32,64),n=96,o=[],i=0;i<t;i++)o[i]=We(e,32,n),n+=32,n+=32;var a=function(d){var u=We(e,32,n);if(n+=32,u==4294967295)return null;var l;if(d==23||d==20)return l=We(e,u*8,n),n+=u*8,l;if(d==25)return l=e.toString(this.encoding,n>>3,(n+=u<<3)>>3),l;console.log("ERROR: ElementType not implemented: "+d)},c=function(d,u){var l=[],h;if(d.length>1){var m=d.shift();for(h=0;h<m;h++)l[h]=c(d,u);d.unshift(m)}else for(h=0;h<d[0];h++)l[h]=a(u);return l};return c(o,s)},qte=function(e){return e.toString("utf8")},Fte=function(e){return e===null?null:We(e,8)>0},$te=function(e){e(20,Ote),e(21,Dte),e(23,rq),e(26,rq),e(1700,Lte),e(700,kte),e(701,Mte),e(16,Fte),e(1114,sq.bind(null,!1)),e(1184,sq.bind(null,!0)),e(1e3,su),e(1007,su),e(1016,su),e(1008,su),e(1009,su),e(25,qte)};oq.exports={init:$te}});var cq=b((Cbe,aq)=>{aq.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var iu=b(ou=>{var Ute=ZL(),jte=iq(),Bte=bb(),Hte=cq();ou.getTypeParser=zte;ou.setTypeParser=Vte;ou.arrayParser=Bte;ou.builtins=Hte;var nu={text:{},binary:{}};function dq(e){return String(e)}function zte(e,t){return t=t||"text",nu[t]&&nu[t][e]||dq}function Vte(e,t,r){typeof t=="function"&&(r=t,t="text"),nu[t][e]=r}Ute.init(function(e,t){nu.text[e]=t});jte.init(function(e,t){nu.binary[e]=t})});var au=b((Tbe,Pb)=>{"use strict";Pb.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var La=iu(),Gte=La.getTypeParser(20,"text"),Wte=La.getTypeParser(1016,"text");Pb.exports.__defineSetter__("parseInt8",function(e){La.setTypeParser(20,"text",e?La.getTypeParser(23,"text"):Gte),La.setTypeParser(1016,"text",e?La.getTypeParser(1007,"text"):Wte)})});var qa=b((Abe,fq)=>{"use strict";var Qte=au(),uq=require("util"),{isDate:Kte}=uq.types||uq;function Jte(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function lq(e){let t="{";for(let r=0;r<e.length;r++)if(r>0&&(t=t+","),e[r]===null||typeof e[r]>"u")t=t+"NULL";else if(Array.isArray(e[r]))t=t+lq(e[r]);else if(ArrayBuffer.isView(e[r])){let s=e[r];if(!(s instanceof Buffer)){let n=Buffer.from(s.buffer,s.byteOffset,s.byteLength);n.length===s.byteLength?s=n:s=n.slice(s.byteOffset,s.byteOffset+s.byteLength)}t+="\\\\x"+s.toString("hex")}else t+=Jte(zm(e[r]));return t=t+"}",t}var zm=function(e,t){if(e==null)return null;if(typeof e=="object"){if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){let r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return Kte(e)?Qte.parseInputDatesAsUTC?Zte(e):Xte(e):Array.isArray(e)?lq(e):Yte(e,t)}return e.toString()};function Yte(e,t){if(e&&typeof e.toPostgres=="function"){if(t=t||[],t.indexOf(e)!==-1)throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),zm(e.toPostgres(zm),t)}return JSON.stringify(e)}function Xte(e){let t=-e.getTimezoneOffset(),r=e.getFullYear(),s=r<1;s&&(r=Math.abs(r)+1);let n=String(r).padStart(4,"0")+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+String(e.getMilliseconds()).padStart(3,"0");return t<0?(n+="-",t*=-1):n+="+",n+=String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0"),s&&(n+=" BC"),n}function Zte(e){let t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);let s=String(t).padStart(4,"0")+"-"+String(e.getUTCMonth()+1).padStart(2,"0")+"-"+String(e.getUTCDate()).padStart(2,"0")+"T"+String(e.getUTCHours()).padStart(2,"0")+":"+String(e.getUTCMinutes()).padStart(2,"0")+":"+String(e.getUTCSeconds()).padStart(2,"0")+"."+String(e.getUTCMilliseconds()).padStart(3,"0");return s+="+00:00",r&&(s+=" BC"),s}function ere(e,t,r){return e=typeof e=="string"?{text:e}:e,t&&(typeof t=="function"?e.callback=t:e.values=t),r&&(e.callback=r),e}var tre=function(e){return'"'+e.replace(/"/g,'""')+'"'},rre=function(e){let t=!1,r="'";if(e==null||typeof e!="string")return"''";for(let s=0;s<e.length;s++){let n=e[s];n==="'"?r+=n+n:n==="\\"?(r+=n+n,t=!0):r+=n}return r+="'",t===!0&&(r=" E"+r),r};fq.exports={prepareValue:function(t){return zm(t)},normalizeQueryConfig:ere,escapeIdentifier:tre,escapeLiteral:rre}});var mq=b((Ibe,pq)=>{"use strict";var Fa=require("crypto");function Nb(e){return Fa.createHash("md5").update(e,"utf-8").digest("hex")}function sre(e,t,r){let s=Nb(t+e);return"md5"+Nb(Buffer.concat([Buffer.from(s),r]))}function nre(e){return Fa.createHash("sha256").update(e).digest()}function ore(e,t){return e=e.replace(/(\D)-/,"$1"),Fa.createHash(e).update(t).digest()}function ire(e,t){return Fa.createHmac("sha256",e).update(t).digest()}async function are(e,t,r){return Fa.pbkdf2Sync(e,t,r,32,"sha256")}pq.exports={postgresMd5PasswordHash:sre,randomBytes:Fa.randomBytes,deriveKey:are,sha256:nre,hashByName:ore,hmacSha256:ire,md5:Nb}});var Sq=b((Pbe,yq)=>{var hq=require("crypto");yq.exports={postgresMd5PasswordHash:dre,randomBytes:cre,deriveKey:pre,sha256:ure,hashByName:lre,hmacSha256:fre,md5:Ob};var gq=hq.webcrypto||globalThis.crypto,li=gq.subtle,Db=new TextEncoder;function cre(e){return gq.getRandomValues(Buffer.alloc(e))}async function Ob(e){try{return hq.createHash("md5").update(e,"utf-8").digest("hex")}catch{let r=typeof e=="string"?Db.encode(e):e,s=await li.digest("MD5",r);return Array.from(new Uint8Array(s)).map(n=>n.toString(16).padStart(2,"0")).join("")}}async function dre(e,t,r){let s=await Ob(t+e);return"md5"+await Ob(Buffer.concat([Buffer.from(s),r]))}async function ure(e){return await li.digest("SHA-256",e)}async function lre(e,t){return await li.digest(e,t)}async function fre(e,t){let r=await li.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await li.sign("HMAC",r,Db.encode(t))}async function pre(e,t,r){let s=await li.importKey("raw",Db.encode(e),"PBKDF2",!1,["deriveBits"]),n={name:"PBKDF2",hash:"SHA-256",salt:t,iterations:r};return await li.deriveBits(n,s,256,["deriveBits"])}});var Mb=b((Nbe,kb)=>{"use strict";var mre=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;mre?kb.exports=mq():kb.exports=Sq()});var wq=b((Obe,Eq)=>{function fi(e,t){return new Error("SASL channel binding: "+e+" when parsing public certificate "+t.toString("base64"))}function Lb(e,t){let r=e[t++];if(r<128)return{length:r,index:t};let s=r&127;if(s>4)throw fi("bad length",e);r=0;for(let n=0;n<s;n++)r=r<<8|e[t++];return{length:r,index:t}}function _q(e,t){if(e[t++]!==6)throw fi("non-OID data",e);let{length:r,index:s}=Lb(e,t);t=s;let n=t+r,o=e[t++],i=(o/40>>0)+"."+o%40;for(;t<n;){let a=0;for(;t<n;){let c=e[t++];if(a=a<<7|c&127,c<128)break}i+="."+a}return{oid:i,index:t}}function cu(e,t){if(e[t++]!==48)throw fi("non-sequence data",e);return Lb(e,t)}function hre(e,t){t===void 0&&(t=0),t=cu(e,t).index;let{length:r,index:s}=cu(e,t);t=s+r,t=cu(e,t).index;let{oid:n,index:o}=_q(e,t);switch(n){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(t=o,t=cu(e,t).index,e[t++]!==160)throw fi("non-tag data",e);t=Lb(e,t).index,t=cu(e,t).index;let{oid:i}=_q(e,t);switch(i){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw fi("unknown hash OID "+i,e)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw fi("Ed448 certificate channel binding is not currently supported by Postgres")}throw fi("unknown OID "+n,e)}Eq.exports={signatureAlgorithmHashFromCertificate:hre}});var Cq=b((Dbe,xq)=>{"use strict";var ao=Mb(),{signatureAlgorithmHashFromCertificate:gre}=wq();function yre(e,t){let r=["SCRAM-SHA-256"];t&&r.unshift("SCRAM-SHA-256-PLUS");let s=r.find(i=>e.includes(i));if(!s)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(s==="SCRAM-SHA-256-PLUS"&&typeof t.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let n=ao.randomBytes(18).toString("base64");return{mechanism:s,clientNonce:n,response:(s==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":t?"y":"n")+",,n=*,r="+n,message:"SASLInitialResponse"}}async function Sre(e,t,r,s){if(e.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(t==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let n=wre(r);if(n.nonce.startsWith(e.clientNonce)){if(n.nonce.length===e.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let o="n=*,r="+e.clientNonce,i="r="+n.nonce+",s="+n.salt+",i="+n.iteration,a=s?"eSws":"biws";if(e.mechanism==="SCRAM-SHA-256-PLUS"){let N=s.getPeerCertificate().raw,B=gre(N);(B==="MD5"||B==="SHA-1")&&(B="SHA-256");let j=await ao.hashByName(B,N);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(j)]).toString("base64")}let c="c="+a+",r="+n.nonce,d=o+","+i+","+c,u=Buffer.from(n.salt,"base64"),l=await ao.deriveKey(t,u,n.iteration),h=await ao.hmacSha256(l,"Client Key"),m=await ao.sha256(h),g=await ao.hmacSha256(m,d),w=vre(Buffer.from(h),Buffer.from(g)).toString("base64"),C=await ao.hmacSha256(l,"Server Key"),R=await ao.hmacSha256(C,d);e.message="SASLResponse",e.serverSignature=Buffer.from(R).toString("base64"),e.response=c+",p="+w}function _re(e,t){if(e.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=bre(t);if(r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function Ere(e){if(typeof e!="string")throw new TypeError("SASL: text must be a string");return e.split("").map((t,r)=>e.charCodeAt(r)).every(t=>t>=33&&t<=43||t>=45&&t<=126)}function bq(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function vq(e){if(typeof e!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(t=>{if(!/^.=/.test(t))throw new Error("SASL: Invalid attribute pair entry");let r=t[0],s=t.substring(2);return[r,s]}))}function wre(e){let t=vq(e),r=t.get("r");if(r){if(!Ere(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let s=t.get("s");if(s){if(!bq(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let n=t.get("i");if(n){if(!/^[1-9][0-9]*$/.test(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let o=parseInt(n,10);return{nonce:r,salt:s,iteration:o}}function bre(e){let r=vq(e).get("v");if(r){if(!bq(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function vre(e,t){if(!Buffer.isBuffer(e))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(t))throw new TypeError("second argument must be a Buffer");if(e.length!==t.length)throw new Error("Buffer lengths must match");if(e.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(e.map((r,s)=>e[s]^t[s]))}xq.exports={startSession:yre,continueSession:Sre,finalizeSession:_re}});var Gm=b((kbe,Rq)=>{"use strict";var xre=iu();function Vm(e){this._types=e||xre,this.text={},this.binary={}}Vm.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}};Vm.prototype.setTypeParser=function(e,t,r){typeof t=="function"&&(r=t,t="text"),this.getOverrides(t)[e]=r};Vm.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)};Rq.exports=Vm});var Iq=b((Mbe,Aq)=>{"use strict";function $a(e,t={}){if(e.charAt(0)==="/"){let c=e.split(" ");return{host:c[0],database:c[1]}}let r={},s,n=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)&&(e=encodeURI(e).replace(/%25(\d\d)/g,"%$1"));try{try{s=new URL(e,"postgres://base")}catch{s=new URL(e.replace("@/","@___DUMMY___/"),"postgres://base"),n=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of s.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(s.username),r.password=r.password||decodeURIComponent(s.password),s.protocol=="socket:")return r.host=decodeURI(s.pathname),r.database=s.searchParams.get("db"),r.client_encoding=s.searchParams.get("encoding"),r;let o=n?"":s.hostname;r.host?o&&/^%2f/i.test(o)&&(s.pathname=o+s.pathname):r.host=decodeURIComponent(o),r.port||(r.port=s.port);let i=s.pathname.slice(1)||null;r.database=i?decodeURI(i):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),t.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||t.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function Cre(e){return Object.entries(e).reduce((r,[s,n])=>(n!=null&&(r[s]=n),r),{})}function Tq(e){return Object.entries(e).reduce((r,[s,n])=>{if(s==="ssl"){let o=n;typeof o=="boolean"&&(r[s]=o),typeof o=="object"&&(r[s]=Cre(o))}else if(n!=null)if(s==="port"){if(n!==""){let o=parseInt(n,10);if(isNaN(o))throw new Error(`Invalid ${s}: ${n}`);r[s]=o}}else r[s]=n;return r},{})}function Rre(e){return Tq($a(e))}Aq.exports=$a;$a.parse=$a;$a.toClientConfig=Tq;$a.parseIntoClientConfig=Rre});var Fb=b((Lbe,Oq)=>{"use strict";var Tre=require("dns"),Nq=au(),Pq=Iq().parse,Qt=function(e,t,r){return r===void 0?r=process.env["PG"+e.toUpperCase()]:r===!1||(r=process.env[r]),t[e]||r||Nq[e]},Are=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return Nq.ssl},Ua=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},Mr=function(e,t,r){let s=t[r];s!=null&&e.push(r+"="+Ua(s))},qb=class{constructor(t){t=typeof t=="string"?Pq(t):t||{},t.connectionString&&(t=Object.assign({},t,Pq(t.connectionString))),this.user=Qt("user",t),this.database=Qt("database",t),this.database===void 0&&(this.database=this.user),this.port=parseInt(Qt("port",t),10),this.host=Qt("host",t),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Qt("password",t)}),this.binary=Qt("binary",t),this.options=Qt("options",t),this.ssl=typeof t.ssl>"u"?Are():t.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Qt("client_encoding",t),this.replication=Qt("replication",t),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Qt("application_name",t,"PGAPPNAME"),this.fallback_application_name=Qt("fallback_application_name",t,!1),this.statement_timeout=Qt("statement_timeout",t,!1),this.lock_timeout=Qt("lock_timeout",t,!1),this.idle_in_transaction_session_timeout=Qt("idle_in_transaction_session_timeout",t,!1),this.query_timeout=Qt("query_timeout",t,!1),t.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(t.connectionTimeoutMillis/1e3),t.keepAlive===!1?this.keepalives=0:t.keepAlive===!0&&(this.keepalives=1),typeof t.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(t.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(t){let r=[];Mr(r,this,"user"),Mr(r,this,"password"),Mr(r,this,"port"),Mr(r,this,"application_name"),Mr(r,this,"fallback_application_name"),Mr(r,this,"connect_timeout"),Mr(r,this,"options");let s=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(Mr(r,s,"sslmode"),Mr(r,s,"sslca"),Mr(r,s,"sslkey"),Mr(r,s,"sslcert"),Mr(r,s,"sslrootcert"),this.database&&r.push("dbname="+Ua(this.database)),this.replication&&r.push("replication="+Ua(this.replication)),this.host&&r.push("host="+Ua(this.host)),this.isDomainSocket)return t(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+Ua(this.client_encoding)),Tre.lookup(this.host,function(n,o){return n?t(n,null):(r.push("hostaddr="+Ua(o)),t(null,r.join(" ")))})}};Oq.exports=qb});var Ub=b((qbe,kq)=>{"use strict";var Ire=iu(),Dq=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,$b=class{constructor(t,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=t==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(t){let r;t.text?r=Dq.exec(t.text):r=Dq.exec(t.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(t){let r=new Array(t.length);for(let s=0,n=t.length;s<n;s++){let o=t[s];o!==null?r[s]=this._parsers[s](o):r[s]=null}return r}parseRow(t){let r={...this._prebuiltEmptyResultObject};for(let s=0,n=t.length;s<n;s++){let o=t[s],i=this.fields[s].name;if(o!==null){let a=this.fields[s].format==="binary"?Buffer.from(o):o;r[i]=this._parsers[s](a)}else r[i]=null}return r}addRow(t){this.rows.push(t)}addFields(t){this.fields=t,this.fields.length&&(this._parsers=new Array(t.length));let r={};for(let s=0;s<t.length;s++){let n=t[s];r[n.name]=null,this._types?this._parsers[s]=this._types.getTypeParser(n.dataTypeID,n.format||"text"):this._parsers[s]=Ire.getTypeParser(n.dataTypeID,n.format||"text")}this._prebuiltEmptyResultObject={...r}}};kq.exports=$b});var Fq=b((Fbe,qq)=>{"use strict";var{EventEmitter:Pre}=require("events"),Mq=Ub(),Lq=qa(),jb=class extends Pre{constructor(t,r,s){super(),t=Lq.normalizeQueryConfig(t,r,s),this.text=t.text,this.values=t.values,this.rows=t.rows,this.types=t.types,this.name=t.name,this.queryMode=t.queryMode,this.binary=t.binary,this.portal=t.portal||"",this.callback=t.callback,this._rowMode=t.rowMode,process.domain&&t.callback&&(this.callback=process.domain.bind(t.callback)),this._result=new Mq(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new Mq(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(t){this._checkForMultirow(),this._result.addFields(t.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(t){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(t.fields)}catch(s){this._canceledDueToError=s;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(t,r){this._checkForMultirow(),this._result.addCommandComplete(t),this.rows&&r.sync()}handleEmptyQuery(t){this.rows&&t.sync()}handleError(t,r){if(this._canceledDueToError&&(t=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(t);this.emit("error",t)}handleReadyForQuery(t){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,t);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(t){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=t.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){t.stream.cork&&t.stream.cork();try{this.prepare(t)}finally{t.stream.uncork&&t.stream.uncork()}}else t.query(this.text);return null}hasBeenParsed(t){return this.name&&t.parsedStatements[this.name]}handlePortalSuspended(t){this._getRows(t,this.rows)}_getRows(t,r){t.execute({portal:this.portal,rows:r}),r?t.flush():t.sync()}prepare(t){this.hasBeenParsed(t)||t.parse({text:this.text,name:this.name,types:this.types});try{t.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:Lq.prepareValue})}catch(r){this.handleError(r,t);return}t.describe({type:"P",name:this.portal||""}),this._getRows(t,this.rows)}handleCopyInResponse(t){t.sendCopyFail("No source stream defined")}handleCopyData(t,r){}};qq.exports=jb});var rv=b(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.NoticeMessage=ne.DataRowMessage=ne.CommandCompleteMessage=ne.ReadyForQueryMessage=ne.NotificationResponseMessage=ne.BackendKeyDataMessage=ne.AuthenticationMD5Password=ne.ParameterStatusMessage=ne.ParameterDescriptionMessage=ne.RowDescriptionMessage=ne.Field=ne.CopyResponse=ne.CopyDataMessage=ne.DatabaseError=ne.copyDone=ne.emptyQuery=ne.replicationStart=ne.portalSuspended=ne.noData=ne.closeComplete=ne.bindComplete=ne.parseComplete=void 0;ne.parseComplete={name:"parseComplete",length:5};ne.bindComplete={name:"bindComplete",length:5};ne.closeComplete={name:"closeComplete",length:5};ne.noData={name:"noData",length:5};ne.portalSuspended={name:"portalSuspended",length:5};ne.replicationStart={name:"replicationStart",length:4};ne.emptyQuery={name:"emptyQuery",length:4};ne.copyDone={name:"copyDone",length:4};var Bb=class extends Error{constructor(t,r,s){super(t),this.length=r,this.name=s}};ne.DatabaseError=Bb;var Hb=class{constructor(t,r){this.length=t,this.chunk=r,this.name="copyData"}};ne.CopyDataMessage=Hb;var zb=class{constructor(t,r,s,n){this.length=t,this.name=r,this.binary=s,this.columnTypes=new Array(n)}};ne.CopyResponse=zb;var Vb=class{constructor(t,r,s,n,o,i,a){this.name=t,this.tableID=r,this.columnID=s,this.dataTypeID=n,this.dataTypeSize=o,this.dataTypeModifier=i,this.format=a}};ne.Field=Vb;var Gb=class{constructor(t,r){this.length=t,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};ne.RowDescriptionMessage=Gb;var Wb=class{constructor(t,r){this.length=t,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};ne.ParameterDescriptionMessage=Wb;var Qb=class{constructor(t,r,s){this.length=t,this.parameterName=r,this.parameterValue=s,this.name="parameterStatus"}};ne.ParameterStatusMessage=Qb;var Kb=class{constructor(t,r){this.length=t,this.salt=r,this.name="authenticationMD5Password"}};ne.AuthenticationMD5Password=Kb;var Jb=class{constructor(t,r,s){this.length=t,this.processID=r,this.secretKey=s,this.name="backendKeyData"}};ne.BackendKeyDataMessage=Jb;var Yb=class{constructor(t,r,s,n){this.length=t,this.processId=r,this.channel=s,this.payload=n,this.name="notification"}};ne.NotificationResponseMessage=Yb;var Xb=class{constructor(t,r){this.length=t,this.status=r,this.name="readyForQuery"}};ne.ReadyForQueryMessage=Xb;var Zb=class{constructor(t,r){this.length=t,this.text=r,this.name="commandComplete"}};ne.CommandCompleteMessage=Zb;var ev=class{constructor(t,r){this.length=t,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};ne.DataRowMessage=ev;var tv=class{constructor(t,r){this.length=t,this.message=r,this.name="notice"}};ne.NoticeMessage=tv});var $q=b(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.Writer=void 0;var sv=class{constructor(t=256){this.size=t,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(t)}ensure(t){if(this.buffer.length-this.offset<t){let s=this.buffer,n=s.length+(s.length>>1)+t;this.buffer=Buffer.allocUnsafe(n),s.copy(this.buffer)}}addInt32(t){return this.ensure(4),this.buffer[this.offset++]=t>>>24&255,this.buffer[this.offset++]=t>>>16&255,this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addInt16(t){return this.ensure(2),this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addCString(t){if(!t)this.ensure(1);else{let r=Buffer.byteLength(t);this.ensure(r+1),this.buffer.write(t,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(t=""){let r=Buffer.byteLength(t);return this.ensure(r),this.buffer.write(t,this.offset),this.offset+=r,this}add(t){return this.ensure(t.length),t.copy(this.buffer,this.offset),this.offset+=t.length,this}join(t){if(t){this.buffer[this.headerPosition]=t;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(t?0:5,this.offset)}flush(t){let r=this.join(t);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Wm.Writer=sv});var jq=b(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.serialize=void 0;var nv=$q(),je=new nv.Writer,Nre=e=>{je.addInt16(3).addInt16(0);for(let s of Object.keys(e))je.addCString(s).addCString(e[s]);je.addCString("client_encoding").addCString("UTF8");let t=je.addCString("").flush(),r=t.length+4;return new nv.Writer().addInt32(r).add(t).flush()},Ore=()=>{let e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},Dre=e=>je.addCString(e).flush(112),kre=function(e,t){return je.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),je.flush(112)},Mre=function(e){return je.addString(e).flush(112)},Lre=e=>je.addCString(e).flush(81),Uq=[],qre=e=>{let t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));let r=e.types||Uq,s=r.length,n=je.addCString(t).addCString(e.text).addInt16(s);for(let o=0;o<s;o++)n.addInt32(r[o]);return je.flush(80)},ja=new nv.Writer,Fre=function(e,t){for(let r=0;r<e.length;r++){let s=t?t(e[r],r):e[r];s==null?(je.addInt16(0),ja.addInt32(-1)):s instanceof Buffer?(je.addInt16(1),ja.addInt32(s.length),ja.add(s)):(je.addInt16(0),ja.addInt32(Buffer.byteLength(s)),ja.addString(s))}},$re=(e={})=>{let t=e.portal||"",r=e.statement||"",s=e.binary||!1,n=e.values||Uq,o=n.length;return je.addCString(t).addCString(r),je.addInt16(o),Fre(n,e.valueMapper),je.addInt16(o),je.add(ja.flush()),je.addInt16(1),je.addInt16(s?1:0),je.flush(66)},Ure=Buffer.from([69,0,0,0,9,0,0,0,0,0]),jre=e=>{if(!e||!e.portal&&!e.rows)return Ure;let t=e.portal||"",r=e.rows||0,s=Buffer.byteLength(t),n=4+s+1+4,o=Buffer.allocUnsafe(1+n);return o[0]=69,o.writeInt32BE(n,1),o.write(t,5,"utf-8"),o[s+5]=0,o.writeUInt32BE(r,o.length-4),o},Bre=(e,t)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r},ov=(e,t)=>{let s=4+Buffer.byteLength(t)+1,n=Buffer.allocUnsafe(1+s);return n[0]=e,n.writeInt32BE(s,1),n.write(t,5,"utf-8"),n[s]=0,n},Hre=je.addCString("P").flush(68),zre=je.addCString("S").flush(68),Vre=e=>e.name?ov(68,`${e.type}${e.name||""}`):e.type==="P"?Hre:zre,Gre=e=>{let t=`${e.type}${e.name||""}`;return ov(67,t)},Wre=e=>je.add(e).flush(100),Qre=e=>ov(102,e),Qm=e=>Buffer.from([e,0,0,0,4]),Kre=Qm(72),Jre=Qm(83),Yre=Qm(88),Xre=Qm(99),Zre={startup:Nre,password:Dre,requestSsl:Ore,sendSASLInitialResponseMessage:kre,sendSCRAMClientFinalMessage:Mre,query:Lre,parse:qre,bind:$re,execute:jre,describe:Vre,close:Gre,flush:()=>Kre,sync:()=>Jre,end:()=>Yre,copyData:Wre,copyDone:()=>Xre,copyFail:Qre,cancel:Bre};Km.serialize=Zre});var Bq=b(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.BufferReader=void 0;var ese=Buffer.allocUnsafe(0),iv=class{constructor(t=0){this.offset=t,this.buffer=ese,this.encoding="utf-8"}setBuffer(t,r){this.offset=t,this.buffer=r}int16(){let t=this.buffer.readInt16BE(this.offset);return this.offset+=2,t}byte(){let t=this.buffer[this.offset];return this.offset++,t}int32(){let t=this.buffer.readInt32BE(this.offset);return this.offset+=4,t}uint32(){let t=this.buffer.readUInt32BE(this.offset);return this.offset+=4,t}string(t){let r=this.buffer.toString(this.encoding,this.offset,this.offset+t);return this.offset+=t,r}cstring(){let t=this.offset,r=t;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,t,r-1)}bytes(t){let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}};Jm.BufferReader=iv});var Vq=b(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.Parser=void 0;var Qe=rv(),tse=Bq(),av=1,rse=4,Hq=av+rse,zq=Buffer.allocUnsafe(0),cv=class{constructor(t){if(this.buffer=zq,this.bufferLength=0,this.bufferOffset=0,this.reader=new tse.BufferReader,t?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=t?.mode||"text"}parse(t,r){this.mergeBuffer(t);let s=this.bufferOffset+this.bufferLength,n=this.bufferOffset;for(;n+Hq<=s;){let o=this.buffer[n],i=this.buffer.readUInt32BE(n+av),a=av+i;if(a+n<=s){let c=this.handlePacket(n+Hq,o,i,this.buffer);r(c),n+=a}else break}n===s?(this.buffer=zq,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=s-n,this.bufferOffset=n)}mergeBuffer(t){if(this.bufferLength>0){let r=this.bufferLength+t.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let n;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)n=this.buffer;else{let o=this.buffer.byteLength*2;for(;r>=o;)o*=2;n=Buffer.allocUnsafe(o)}this.buffer.copy(n,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=n,this.bufferOffset=0}t.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=t,this.bufferOffset=0,this.bufferLength=t.byteLength}handlePacket(t,r,s,n){switch(r){case 50:return Qe.bindComplete;case 49:return Qe.parseComplete;case 51:return Qe.closeComplete;case 110:return Qe.noData;case 115:return Qe.portalSuspended;case 99:return Qe.copyDone;case 87:return Qe.replicationStart;case 73:return Qe.emptyQuery;case 68:return this.parseDataRowMessage(t,s,n);case 67:return this.parseCommandCompleteMessage(t,s,n);case 90:return this.parseReadyForQueryMessage(t,s,n);case 65:return this.parseNotificationMessage(t,s,n);case 82:return this.parseAuthenticationResponse(t,s,n);case 83:return this.parseParameterStatusMessage(t,s,n);case 75:return this.parseBackendKeyData(t,s,n);case 69:return this.parseErrorMessage(t,s,n,"error");case 78:return this.parseErrorMessage(t,s,n,"notice");case 84:return this.parseRowDescriptionMessage(t,s,n);case 116:return this.parseParameterDescriptionMessage(t,s,n);case 71:return this.parseCopyInMessage(t,s,n);case 72:return this.parseCopyOutMessage(t,s,n);case 100:return this.parseCopyData(t,s,n);default:return new Qe.DatabaseError("received invalid response: "+r.toString(16),s,"error")}}parseReadyForQueryMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.string(1);return new Qe.ReadyForQueryMessage(r,n)}parseCommandCompleteMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.cstring();return new Qe.CommandCompleteMessage(r,n)}parseCopyData(t,r,s){let n=s.slice(t,t+(r-4));return new Qe.CopyDataMessage(r,n)}parseCopyInMessage(t,r,s){return this.parseCopyMessage(t,r,s,"copyInResponse")}parseCopyOutMessage(t,r,s){return this.parseCopyMessage(t,r,s,"copyOutResponse")}parseCopyMessage(t,r,s,n){this.reader.setBuffer(t,s);let o=this.reader.byte()!==0,i=this.reader.int16(),a=new Qe.CopyResponse(r,n,o,i);for(let c=0;c<i;c++)a.columnTypes[c]=this.reader.int16();return a}parseNotificationMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int32(),o=this.reader.cstring(),i=this.reader.cstring();return new Qe.NotificationResponseMessage(r,n,o,i)}parseRowDescriptionMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int16(),o=new Qe.RowDescriptionMessage(r,n);for(let i=0;i<n;i++)o.fields[i]=this.parseField();return o}parseField(){let t=this.reader.cstring(),r=this.reader.uint32(),s=this.reader.int16(),n=this.reader.uint32(),o=this.reader.int16(),i=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new Qe.Field(t,r,s,n,o,i,a)}parseParameterDescriptionMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int16(),o=new Qe.ParameterDescriptionMessage(r,n);for(let i=0;i<n;i++)o.dataTypeIDs[i]=this.reader.int32();return o}parseDataRowMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int16(),o=new Array(n);for(let i=0;i<n;i++){let a=this.reader.int32();o[i]=a===-1?null:this.reader.string(a)}return new Qe.DataRowMessage(r,o)}parseParameterStatusMessage(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.cstring(),o=this.reader.cstring();return new Qe.ParameterStatusMessage(r,n,o)}parseBackendKeyData(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int32(),o=this.reader.int32();return new Qe.BackendKeyDataMessage(r,n,o)}parseAuthenticationResponse(t,r,s){this.reader.setBuffer(t,s);let n=this.reader.int32(),o={name:"authenticationOk",length:r};switch(n){case 0:break;case 3:o.length===8&&(o.name="authenticationCleartextPassword");break;case 5:if(o.length===12){o.name="authenticationMD5Password";let i=this.reader.bytes(4);return new Qe.AuthenticationMD5Password(r,i)}break;case 10:{o.name="authenticationSASL",o.mechanisms=[];let i;do i=this.reader.cstring(),i&&o.mechanisms.push(i);while(i)}break;case 11:o.name="authenticationSASLContinue",o.data=this.reader.string(r-8);break;case 12:o.name="authenticationSASLFinal",o.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+n)}return o}parseErrorMessage(t,r,s,n){this.reader.setBuffer(t,s);let o={},i=this.reader.string(1);for(;i!=="\0";)o[i]=this.reader.cstring(),i=this.reader.string(1);let a=o.M,c=n==="notice"?new Qe.NoticeMessage(r,a):new Qe.DatabaseError(a,r,n);return c.severity=o.S,c.code=o.C,c.detail=o.D,c.hint=o.H,c.position=o.P,c.internalPosition=o.p,c.internalQuery=o.q,c.where=o.W,c.schema=o.s,c.table=o.t,c.column=o.c,c.dataType=o.d,c.constraint=o.n,c.file=o.F,c.line=o.L,c.routine=o.R,c}};Ym.Parser=cv});var dv=b(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.DatabaseError=co.serialize=co.parse=void 0;var sse=rv();Object.defineProperty(co,"DatabaseError",{enumerable:!0,get:function(){return sse.DatabaseError}});var nse=jq();Object.defineProperty(co,"serialize",{enumerable:!0,get:function(){return nse.serialize}});var ose=Vq();function ise(e,t){let r=new ose.Parser;return e.on("data",s=>r.parse(s,t)),new Promise(s=>e.on("end",()=>s()))}co.parse=ise});var Gq=b(uv=>{"use strict";Object.defineProperty(uv,"__esModule",{value:!0});uv.default={}});var Qq=b((Gbe,Wq)=>{var{getStream:ase,getSecureStream:cse}=fse();Wq.exports={getStream:ase,getSecureStream:cse};function dse(){function e(r){let s=require("net");return new s.Socket}function t(r){return require("tls").connect(r)}return{getStream:e,getSecureStream:t}}function use(){function e(r){let{CloudflareSocket:s}=Gq();return new s(r)}function t(r){return r.socket.startTls(r),r.socket}return{getStream:e,getSecureStream:t}}function lse(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let e=new Response(null,{cf:{thing:!0}});if(typeof e.cf=="object"&&e.cf!==null&&e.cf.thing)return!0}return!1}function fse(){return lse()?use():dse()}});var fv=b((Wbe,Kq)=>{"use strict";var pse=require("events").EventEmitter,{parse:mse,serialize:_t}=dv(),{getStream:hse,getSecureStream:gse}=Qq(),yse=_t.flush(),Sse=_t.sync(),_se=_t.end(),lv=class extends pse{constructor(t){super(),t=t||{},this.stream=t.stream||hse(t.ssl),typeof this.stream=="function"&&(this.stream=this.stream(t)),this._keepAlive=t.keepAlive,this._keepAliveInitialDelayMillis=t.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=t.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(s){s==="message"&&(r._emitMessage=!0)})}connect(t,r){let s=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(t,r),this.stream.once("connect",function(){s._keepAlive&&s.stream.setKeepAlive(!0,s._keepAliveInitialDelayMillis),s.emit("connect")});let n=function(o){s._ending&&(o.code==="ECONNRESET"||o.code==="EPIPE")||s.emit("error",o)};if(this.stream.on("error",n),this.stream.on("close",function(){s.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(o){switch(o.toString("utf8")){case"S":break;case"N":return s.stream.end(),s.emit("error",new Error("The server does not support SSL connections"));default:return s.stream.end(),s.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:s.stream};s.ssl!==!0&&(Object.assign(a,s.ssl),"key"in s.ssl&&(a.key=s.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{s.stream=gse(a)}catch(d){return s.emit("error",d)}s.attachListeners(s.stream),s.stream.on("error",n),s.emit("sslconnect")})}attachListeners(t){mse(t,r=>{let s=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(s,r)})}requestSsl(){this.stream.write(_t.requestSsl())}startup(t){this.stream.write(_t.startup(t))}cancel(t,r){this._send(_t.cancel(t,r))}password(t){this._send(_t.password(t))}sendSASLInitialResponseMessage(t,r){this._send(_t.sendSASLInitialResponseMessage(t,r))}sendSCRAMClientFinalMessage(t){this._send(_t.sendSCRAMClientFinalMessage(t))}_send(t){return this.stream.writable?this.stream.write(t):!1}query(t){this._send(_t.query(t))}parse(t){this._send(_t.parse(t))}bind(t){this._send(_t.bind(t))}execute(t){this._send(_t.execute(t))}flush(){this.stream.writable&&this.stream.write(yse)}sync(){this._ending=!0,this._send(Sse)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(_se,()=>{this.stream.end()})}close(t){this._send(_t.close(t))}describe(t){this._send(_t.describe(t))}sendCopyFromChunk(t){this._send(_t.copyData(t))}endCopyFrom(){this._send(_t.copyDone())}sendCopyFail(t){this._send(_t.copyFail(t))}};Kq.exports=lv});var Zq=b((Qbe,Xq)=>{"use strict";var{Transform:Ese}=require("stream"),{StringDecoder:wse}=require("string_decoder"),uo=Symbol("last"),Xm=Symbol("decoder");function bse(e,t,r){let s;if(this.overflow){if(s=this[Xm].write(e).split(this.matcher),s.length===1)return r();s.shift(),this.overflow=!1}else this[uo]+=this[Xm].write(e),s=this[uo].split(this.matcher);this[uo]=s.pop();for(let n=0;n<s.length;n++)try{Yq(this,this.mapper(s[n]))}catch(o){return r(o)}if(this.overflow=this[uo].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function vse(e){if(this[uo]+=this[Xm].end(),this[uo])try{Yq(this,this.mapper(this[uo]))}catch(t){return e(t)}e()}function Yq(e,t){t!==void 0&&e.push(t)}function Jq(e){return e}function xse(e,t,r){switch(e=e||/\r?\n/,t=t||Jq,r=r||{},arguments.length){case 1:typeof e=="function"?(t=e,e=/\r?\n/):typeof e=="object"&&!(e instanceof RegExp)&&!e[Symbol.split]&&(r=e,e=/\r?\n/);break;case 2:typeof e=="function"?(r=t,t=e,e=/\r?\n/):typeof t=="object"&&(r=t,t=Jq)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=bse,r.flush=vse,r.readableObjectMode=!0;let s=new Ese(r);return s[uo]="",s[Xm]=new wse("utf8"),s.matcher=e,s.mapper=t,s.maxLength=r.maxLength,s.skipOverflow=r.skipOverflow||!1,s.overflow=!1,s._destroy=function(n,o){this._writableState.errorEmitted=!1,o(n)},s}Xq.exports=xse});var rF=b((Kbe,un)=>{"use strict";var eF=require("path"),Cse=require("stream").Stream,Rse=Zq(),tF=require("util"),Tse=5432,Zm=process.platform==="win32",du=process.stderr,Ase=56,Ise=7,Pse=61440,Nse=32768;function Ose(e){return(e&Pse)==Nse}var Ba=["host","port","database","user","password"],pv=Ba.length,Dse=Ba[pv-1];function mv(){var e=du instanceof Cse&&du.writable===!0;if(e){var t=Array.prototype.slice.call(arguments).concat(`
`);du.write(tF.format.apply(tF,t))}}Object.defineProperty(un.exports,"isWin",{get:function(){return Zm},set:function(e){Zm=e}});un.exports.warnTo=function(e){var t=du;return du=e,t};un.exports.getFileName=function(e){var t=e||process.env,r=t.PGPASSFILE||(Zm?eF.join(t.APPDATA||"./","postgresql","pgpass.conf"):eF.join(t.HOME||"./",".pgpass"));return r};un.exports.usePgPass=function(e,t){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Zm?!0:(t=t||"<unkn>",Ose(e.mode)?e.mode&(Ase|Ise)?(mv('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):!0:(mv('WARNING: password file "%s" is not a plain file',t),!1))};var kse=un.exports.match=function(e,t){return Ba.slice(0,-1).reduce(function(r,s,n){return n==1&&Number(e[s]||Tse)===Number(t[s])?r&&!0:r&&(t[s]==="*"||t[s]===e[s])},!0)};un.exports.getPassword=function(e,t,r){var s,n=t.pipe(Rse());function o(c){var d=Mse(c);d&&Lse(d)&&kse(e,d)&&(s=d[Dse],n.end())}var i=function(){t.destroy(),r(s)},a=function(c){t.destroy(),mv("WARNING: error on reading file: %s",c),r(void 0)};t.on("error",a),n.on("data",o).on("end",i).on("error",a)};var Mse=un.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",s=0,n=0,o=0,i={},a=!1,c=function(u,l,h){var m=e.substring(l,h);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(m=m.replace(/\\([:\\])/g,"$1")),i[Ba[u]]=m},d=0;d<e.length-1;d+=1){if(t=e.charAt(d+1),r=e.charAt(d),a=s==pv-1,a){c(s,n);break}d>=0&&t==":"&&r!=="\\"&&(c(s,n,d+1),n=d+2,s+=1)}return i=Object.keys(i).length===pv?i:null,i},Lse=un.exports.isValidEntry=function(e){for(var t={0:function(i){return i.length>0},1:function(i){return i==="*"?!0:(i=Number(i),isFinite(i)&&i>0&&i<9007199254740992&&Math.floor(i)===i)},2:function(i){return i.length>0},3:function(i){return i.length>0},4:function(i){return i.length>0}},r=0;r<Ba.length;r+=1){var s=t[r],n=e[Ba[r]]||"",o=s(n);if(!o)return!1}return!0}});var nF=b((Ybe,hv)=>{"use strict";var Jbe=require("path"),sF=require("fs"),eh=rF();hv.exports=function(e,t){var r=eh.getFileName();sF.stat(r,function(s,n){if(s||!eh.usePgPass(n,r))return t(void 0);var o=sF.createReadStream(r);eh.getPassword(e,o,t)})};hv.exports.warnTo=eh.warnTo});var cF=b((Xbe,aF)=>{"use strict";var qse=require("events").EventEmitter,oF=qa(),gv=Cq(),Fse=Gm(),$se=Fb(),iF=Fq(),Use=au(),jse=fv(),Bse=Mb(),th=class extends qse{constructor(t){super(),this.connectionParameters=new $se(t),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=t||{};this._Promise=r.Promise||global.Promise,this._types=new Fse(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new jse({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||Use.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(t){let r=s=>{process.nextTick(()=>{s.handleError(t,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(t){let r=this,s=this.connection;if(this._connectionCallback=t,this._connecting||this._connected){let n=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{t(n)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{s._ending=!0,s.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?s.connect(this.host+"/.s.PGSQL."+this.port):s.connect(this.port,this.host),s.on("connect",function(){r.ssl?s.requestSsl():s.startup(r.getStartupConf())}),s.on("sslconnect",function(){s.startup(r.getStartupConf())}),this._attachListeners(s),s.once("end",()=>{let n=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(n),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(n):this._handleErrorEvent(n):this._connectionError||this._handleErrorEvent(n)),process.nextTick(()=>{this.emit("end")})})}connect(t){if(t){this._connect(t);return}return new this._Promise((r,s)=>{this._connect(n=>{n?s(n):r()})})}_attachListeners(t){t.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),t.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),t.on("authenticationSASL",this._handleAuthSASL.bind(this)),t.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),t.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),t.on("backendKeyData",this._handleBackendKeyData.bind(this)),t.on("error",this._handleErrorEvent.bind(this)),t.on("errorMessage",this._handleErrorMessage.bind(this)),t.on("readyForQuery",this._handleReadyForQuery.bind(this)),t.on("notice",this._handleNotice.bind(this)),t.on("rowDescription",this._handleRowDescription.bind(this)),t.on("dataRow",this._handleDataRow.bind(this)),t.on("portalSuspended",this._handlePortalSuspended.bind(this)),t.on("emptyQuery",this._handleEmptyQuery.bind(this)),t.on("commandComplete",this._handleCommandComplete.bind(this)),t.on("parseComplete",this._handleParseComplete.bind(this)),t.on("copyInResponse",this._handleCopyInResponse.bind(this)),t.on("copyData",this._handleCopyData.bind(this)),t.on("notification",this._handleNotification.bind(this))}_checkPgPass(t){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(s=>{if(s!==void 0){if(typeof s!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=s}else this.connectionParameters.password=this.password=null;t()}).catch(s=>{r.emit("error",s)});else if(this.password!==null)t();else try{nF()(this.connectionParameters,n=>{n!==void 0&&(this.connectionParameters.password=this.password=n),t()})}catch(s){this.emit("error",s)}}_handleAuthCleartextPassword(t){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(t){this._checkPgPass(async()=>{try{let r=await Bse.postgresMd5PasswordHash(this.user,this.password,t.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(t){this._checkPgPass(()=>{try{this.saslSession=gv.startSession(t.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(t){try{await gv.continueSession(this.saslSession,this.password,t.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(t){try{gv.finalizeSession(this.saslSession,t.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(t){this.processID=t.processID,this.secretKey=t.secretKey}_handleReadyForQuery(t){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(t){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(t);this.emit("error",t)}}_handleErrorEvent(t){if(this._connecting)return this._handleErrorWhileConnecting(t);this._queryable=!1,this._errorAllQueries(t),this.emit("error",t)}_handleErrorMessage(t){if(this._connecting)return this._handleErrorWhileConnecting(t);let r=this.activeQuery;if(!r){this._handleErrorEvent(t);return}this.activeQuery=null,r.handleError(t,this.connection)}_handleRowDescription(t){this.activeQuery.handleRowDescription(t)}_handleDataRow(t){this.activeQuery.handleDataRow(t)}_handlePortalSuspended(t){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(t){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(t){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(t,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let t=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(t);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(t){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(t){this.activeQuery.handleCopyData(t,this.connection)}_handleNotification(t){this.emit("notification",t)}_handleNotice(t){this.emit("notice",t)}getStartupConf(){let t=this.connectionParameters,r={user:t.user,database:t.database},s=t.application_name||t.fallback_application_name;return s&&(r.application_name=s),t.replication&&(r.replication=""+t.replication),t.statement_timeout&&(r.statement_timeout=String(parseInt(t.statement_timeout,10))),t.lock_timeout&&(r.lock_timeout=String(parseInt(t.lock_timeout,10))),t.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(t.idle_in_transaction_session_timeout,10))),t.options&&(r.options=t.options),r}cancel(t,r){if(t.activeQuery===r){let s=this.connection;this.host&&this.host.indexOf("/")===0?s.connect(this.host+"/.s.PGSQL."+this.port):s.connect(this.port,this.host),s.on("connect",function(){s.cancel(t.processID,t.secretKey)})}else t.queryQueue.indexOf(r)!==-1&&t.queryQueue.splice(t.queryQueue.indexOf(r),1)}setTypeParser(t,r,s){return this._types.setTypeParser(t,r,s)}getTypeParser(t,r){return this._types.getTypeParser(t,r)}escapeIdentifier(t){return oF.escapeIdentifier(t)}escapeLiteral(t){return oF.escapeLiteral(t)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let t=this.activeQuery.submit(this.connection);t&&process.nextTick(()=>{this.activeQuery.handleError(t,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(t,r,s){let n,o,i,a,c;if(t==null)throw new TypeError("Client was passed a null or undefined query");return typeof t.submit=="function"?(i=t.query_timeout||this.connectionParameters.query_timeout,o=n=t,typeof r=="function"&&(n.callback=n.callback||r)):(i=t.query_timeout||this.connectionParameters.query_timeout,n=new iF(t,r,s),n.callback||(o=new this._Promise((d,u)=>{n.callback=(l,h)=>l?u(l):d(h)}).catch(d=>{throw Error.captureStackTrace(d),d}))),i&&(c=n.callback,a=setTimeout(()=>{let d=new Error("Query read timeout");process.nextTick(()=>{n.handleError(d,this.connection)}),c(d),n.callback=()=>{};let u=this.queryQueue.indexOf(n);u>-1&&this.queryQueue.splice(u,1),this._pulseQueryQueue()},i),n.callback=(d,u)=>{clearTimeout(a),c(d,u)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),o):(this.queryQueue.push(n),this._pulseQueryQueue(),o):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),o)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(t){if(this._ending=!0,!this.connection._connecting||this._ended)if(t)t();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),t)this.connection.once("end",t);else return new this._Promise(r=>{this.connection.once("end",r)})}};th.Query=iF;aF.exports=th});var fF=b((Zbe,lF)=>{"use strict";var Hse=require("events").EventEmitter,dF=function(){},uF=(e,t)=>{let r=e.findIndex(t);return r===-1?void 0:e.splice(r,1)[0]},yv=class{constructor(t,r,s){this.client=t,this.idleListener=r,this.timeoutId=s}},Ha=class{constructor(t){this.callback=t}};function zse(){throw new Error("Release called on client which has already been released to the pool.")}function rh(e,t){if(t)return{callback:t,result:void 0};let r,s,n=function(i,a){i?r(i):s(a)},o=new e(function(i,a){s=i,r=a}).catch(i=>{throw Error.captureStackTrace(i),i});return{callback:n,result:o}}function Vse(e,t){return function r(s){s.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",s)}),e._remove(t),e.emit("error",s,t)}}var Sv=class extends Hse{constructor(t,r){super(),this.options=Object.assign({},t),t!=null&&"password"in t&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),t!=null&&t.ssl&&t.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||_v().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let t=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let s=r.client;s.ref&&s.ref();let n=r.idleListener;return this._acquireClient(s,t,n,!1)}if(!this._isFull())return this.newClient(t);throw new Error("unexpected condition")}_remove(t,r){let s=uF(this._idle,o=>o.client===t);s!==void 0&&clearTimeout(s.timeoutId),this._clients=this._clients.filter(o=>o!==t);let n=this;t.end(()=>{n.emit("remove",t),typeof r=="function"&&r()})}connect(t){if(this.ending){let n=new Error("Cannot use a pool after calling end on the pool");return t?t(n):this.Promise.reject(n)}let r=rh(this.Promise,t),s=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Ha(r.callback)),s;let n=(a,c,d)=>{clearTimeout(i),r.callback(a,c,d)},o=new Ha(n),i=setTimeout(()=>{uF(this._pendingQueue,a=>a.callback===n),o.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return i.unref&&i.unref(),this._pendingQueue.push(o),s}return this.newClient(new Ha(r.callback)),s}newClient(t){let r=new this.Client(this.options);this._clients.push(r);let s=Vse(this,r);this.log("checking client timeout");let n,o=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),o=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(i=>{if(n&&clearTimeout(n),r.on("error",s),i)this.log("client failed to connect",i),this._clients=this._clients.filter(a=>a!==r),o&&(i=new Error("Connection terminated due to connection timeout",{cause:i})),this._pulseQueue(),t.timedOut||t.callback(i,void 0,dF);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(d=>d.client===r)!==-1&&this._acquireClient(r,new Ha((d,u,l)=>l()),s,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,t,s,!0)}})}_acquireClient(t,r,s,n){n&&this.emit("connect",t),this.emit("acquire",t),t.release=this._releaseOnce(t,s),t.removeListener("error",s),r.timedOut?n&&this.options.verify?this.options.verify(t,t.release):t.release():n&&this.options.verify?this.options.verify(t,o=>{if(o)return t.release(o),r.callback(o,void 0,dF);r.callback(void 0,t,t.release)}):r.callback(void 0,t,t.release)}_releaseOnce(t,r){let s=!1;return n=>{s&&zse(),s=!0,this._release(t,r,n)}}_release(t,r,s){if(t.on("error",r),t._poolUseCount=(t._poolUseCount||0)+1,this.emit("release",s,t),s||this.ending||!t._queryable||t._ending||t._poolUseCount>=this.options.maxUses)return t._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(t,this._pulseQueue.bind(this));if(this._expired.has(t))return this.log("remove expired client"),this._expired.delete(t),this._remove(t,this._pulseQueue.bind(this));let o;this.options.idleTimeoutMillis&&this._isAboveMin()&&(o=setTimeout(()=>{this.log("remove idle client"),this._remove(t,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&o.unref()),this.options.allowExitOnIdle&&t.unref(),this._idle.push(new yv(t,r,o)),this._pulseQueue()}query(t,r,s){if(typeof t=="function"){let o=rh(this.Promise,t);return setImmediate(function(){return o.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),o.result}typeof r=="function"&&(s=r,r=void 0);let n=rh(this.Promise,s);return s=n.callback,this.connect((o,i)=>{if(o)return s(o);let a=!1,c=d=>{a||(a=!0,i.release(d),s(d))};i.once("error",c),this.log("dispatching query");try{i.query(t,r,(d,u)=>{if(this.log("query dispatched"),i.removeListener("error",c),!a)return a=!0,i.release(d),d?s(d):s(void 0,u)})}catch(d){return i.release(d),s(d)}}),n.result}end(t){if(this.log("ending"),this.ending){let s=new Error("Called end on pool more than once");return t?t(s):this.Promise.reject(s)}this.ending=!0;let r=rh(this.Promise,t);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((t,r)=>t+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};lF.exports=Sv});var hF=b((eve,mF)=>{"use strict";var pF=require("events").EventEmitter,Gse=require("util"),Ev=qa(),za=mF.exports=function(e,t,r){pF.call(this),e=Ev.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.queryMode=e.queryMode,this.callback=e.callback,this.state="new",this._arrayMode=e.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(s){s==="row"&&(this._emitRowEvents=!0)}.bind(this))};Gse.inherits(za,pF);var Wse={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};za.prototype.handleError=function(e){let t=this.native.pq.resultErrorFields();if(t)for(let r in t){let s=Wse[r]||r;e[s]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"};za.prototype.then=function(e,t){return this._getPromise().then(e,t)};za.prototype.catch=function(e){return this._getPromise().catch(e)};za.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this)),this._promise)};za.prototype.submit=function(e){this.state="running";let t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;let r=function(s,n,o){if(e.native.arrayMode=!1,setImmediate(function(){t.emit("_done")}),s)return t.handleError(s);t._emitRowEvents&&(o.length>1?n.forEach((i,a)=>{i.forEach(c=>{t.emit("row",c,o[a])})}):n.forEach(function(i){t.emit("row",i,o)})),t.state="end",t.emit("end",o),t.callback&&t.callback(null,o)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let s=(this.values||[]).map(Ev.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let n=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(n)}return e.native.execute(this.name,s,r)}return e.native.prepare(this.name,this.text,s.length,function(n){return n?r(n):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,s,r))})}else if(this.values){if(!Array.isArray(this.values)){let n=new Error("Query values must be an array");return r(n)}let s=this.values.map(Ev.prepareValue);e.native.query(this.text,s,r)}else this.queryMode==="extended"?e.native.query(this.text,[],r):e.native.query(this.text,r)}});var EF=b((tve,_F)=>{"use strict";var gF;try{gF=require("pg-native")}catch(e){throw e}var Qse=Gm(),yF=require("events").EventEmitter,Kse=require("util"),Jse=Fb(),SF=hF(),ir=_F.exports=function(e){yF.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new Qse(e.types),this.native=new gF({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let t=this.connectionParameters=new Jse(e);e.nativeConnectionString&&(t.nativeConnectionString=e.nativeConnectionString),this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};ir.Query=SF;Kse.inherits(ir,yF);ir.prototype._errorAllQueries=function(e){let t=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0};ir.prototype._connect=function(e){let t=this;if(this._connecting){process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,s){if(t.connectionParameters.nativeConnectionString&&(s=t.connectionParameters.nativeConnectionString),r)return e(r);t.native.connect(s,function(n){if(n)return t.native.end(),e(n);t._connected=!0,t.native.on("error",function(o){t._queryable=!1,t._errorAllQueries(o),t.emit("error",o)}),t.native.on("notification",function(o){t.emit("notification",{channel:o.relname,payload:o.extra})}),t.emit("connect"),t._pulseQueryQueue(!0),e()})})};ir.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((t,r)=>{this._connect(s=>{s?r(s):t()})})};ir.prototype.query=function(e,t,r){let s,n,o,i,a;if(e==null)throw new TypeError("Client was passed a null or undefined query");if(typeof e.submit=="function")o=e.query_timeout||this.connectionParameters.query_timeout,n=s=e,typeof t=="function"&&(e.callback=t);else if(o=e.query_timeout||this.connectionParameters.query_timeout,s=new SF(e,t,r),!s.callback){let c,d;n=new this._Promise((u,l)=>{c=u,d=l}).catch(u=>{throw Error.captureStackTrace(u),u}),s.callback=(u,l)=>u?d(u):c(l)}return o&&(a=s.callback,i=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{s.handleError(c,this.connection)}),a(c),s.callback=()=>{};let d=this._queryQueue.indexOf(s);d>-1&&this._queryQueue.splice(d,1),this._pulseQueryQueue()},o),s.callback=(c,d)=>{clearTimeout(i),a(c,d)}),this._queryable?this._ending?(s.native=this.native,process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"))}),n):(this._queryQueue.push(s),this._pulseQueryQueue(),n):(s.native=this.native,process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"))}),n)};ir.prototype.end=function(e){let t=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e));let r;return e||(r=new this._Promise(function(s,n){e=o=>o?n(o):s()})),this.native.end(function(){t._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{t.emit("end"),e&&e()})}),r};ir.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};ir.prototype._pulseQueryQueue=function(e){if(!this._connected||this._hasActiveQuery())return;let t=this._queryQueue.shift();if(!t){e||this.emit("drain");return}this._activeQuery=t,t.submit(this);let r=this;t.once("_done",function(){r._pulseQueryQueue()})};ir.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):this._queryQueue.indexOf(e)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)};ir.prototype.ref=function(){};ir.prototype.unref=function(){};ir.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)};ir.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}});var wv=b((rve,wF)=>{"use strict";wF.exports=EF()});var _v=b((nve,uu)=>{"use strict";var Yse=cF(),Xse=au(),Zse=fv(),ene=Ub(),tne=qa(),rne=fF(),sne=Gm(),{DatabaseError:nne}=dv(),{escapeIdentifier:one,escapeLiteral:ine}=qa(),ane=e=>class extends rne{constructor(r){super(r,e)}},bv=function(e){this.defaults=Xse,this.Client=e,this.Query=this.Client.Query,this.Pool=ane(this.Client),this._pools=[],this.Connection=Zse,this.types=iu(),this.DatabaseError=nne,this.TypeOverrides=sne,this.escapeIdentifier=one,this.escapeLiteral=ine,this.Result=ene,this.utils=tne};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?uu.exports=new bv(wv()):(uu.exports=new bv(Yse),Object.defineProperty(uu.exports,"native",{configurable:!0,enumerable:!1,get(){let e=null;try{e=new bv(wv())}catch(t){if(t.code!=="MODULE_NOT_FOUND")throw t}return Object.defineProperty(uu.exports,"native",{value:e}),e}}))});var VF=b(ar=>{"use strict";var Rne=U(),Rv=Ll(),Tv=Fe(),Tne=e=>Object.assign(e,{useQueueUrlAsEndpoint:e.useQueueUrlAsEndpoint??!0});function qF({useQueueUrlAsEndpoint:e,endpoint:t}){return(r,s)=>async n=>{let{input:o}=n,i=s.endpointV2;if(!t&&o.QueueUrl&&i&&e){let a=s.logger instanceof Rne.NoOpLogger||!s.logger?.warn?console:s.logger;try{let c=new URL(o.QueueUrl),d=new URL(c.origin);i.url.origin!==d.origin&&(a.warn(`QueueUrl=${o.QueueUrl} differs from SQSClient resolved endpoint=${i.url.toString()}, using QueueUrl host as endpoint.
Set [endpoint=string] or [useQueueUrlAsEndpoint=false] on the SQSClient.`),s.endpointV2={...i,url:d})}catch(c){a.warn(c)}}return r(n)}}var FF={name:"queueUrlMiddleware",relation:"after",toMiddleware:"endpointV2Middleware",override:!0},Ane=e=>({applyToStack:t=>{t.addRelativeTo(qF(e),FF)}});function $F(e){return t=>async r=>{let s=await t({...r});if(e.md5===!1)return s;let n=s.output,o=[];if(n.Messages!==void 0)for(let i of n.Messages){let a=i.MD5OfBody,c=new e.md5;c.update(Tv.toUint8Array(i.Body||"")),a!==Rv.toHex(await c.digest())&&o.push(i.MessageId)}if(o.length>0)throw new Error("Invalid MD5 checksum on messages: "+o.join(", "));return s}}var UF={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"receiveMessageMiddleware",override:!0},Ine=e=>({applyToStack:t=>{t.add($F(e),UF)}}),jF=e=>t=>async r=>{let s=await t({...r});if(e.md5===!1)return s;let n=s.output,o=new e.md5;if(o.update(Tv.toUint8Array(r.input.MessageBody||"")),n.MD5OfMessageBody!==Rv.toHex(await o.digest()))throw new Error("InvalidChecksumError");return s},BF={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"sendMessageMiddleware",override:!0},Pne=e=>({applyToStack:t=>{t.add(jF(e),BF)}}),HF=e=>t=>async r=>{let s=await t({...r});if(e.md5===!1)return s;let n=s.output,o=[],i={};if(n.Successful!==void 0)for(let a of n.Successful)a.Id!==void 0&&(i[a.Id]=a);for(let a of r.input.Entries)if(i[a.Id]){let c=i[a.Id].MD5OfMessageBody,d=new e.md5;d.update(Tv.toUint8Array(a.MessageBody||"")),c!==Rv.toHex(await d.digest())&&o.push(i[a.Id].MessageId)}if(o.length>0)throw new Error("Invalid MD5 checksum on messages: "+o.join(", "));return s},zF={step:"initialize",tags:["VALIDATE_BODY_MD5"],name:"sendMessageBatchMiddleware",override:!0},Nne=e=>({applyToStack:t=>{t.add(HF(e),zF)}});ar.getQueueUrlPlugin=Ane;ar.getReceiveMessagePlugin=Ine;ar.getSendMessageBatchPlugin=Nne;ar.getSendMessagePlugin=Pne;ar.queueUrlMiddleware=qF;ar.queueUrlMiddlewareOptions=FF;ar.receiveMessageMiddleware=$F;ar.receiveMessageMiddlewareOptions=UF;ar.resolveQueueUrlConfig=Tne;ar.sendMessageBatchMiddleware=HF;ar.sendMessageBatchMiddlewareOptions=zF;ar.sendMessageMiddleware=jF;ar.sendMessageMiddlewareOptions=BF});var lh,Ga,GF=S(()=>{lh={warningEmitted:!1},Ga=e=>{e&&!lh.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(lh.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function lo(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var WF=S(()=>{});function QF(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var KF=S(()=>{});function JF(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var YF=S(()=>{});var fo={};dt(fo,{emitWarningIfUnsupportedVersion:()=>Ga,setCredentialFeature:()=>lo,setFeature:()=>QF,setTokenFeature:()=>JF,state:()=>lh});var as=S(()=>{GF();WF();KF();YF()});var XF,Av,ZF=S(()=>{XF=y(ye()),Av=e=>XF.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var Wa,Iv=S(()=>{Wa=e=>new Date(Date.now()+e)});var e$,t$=S(()=>{Iv();e$=(e,t)=>Math.abs(Wa(t).getTime()-e)>=3e5});var Pv,r$=S(()=>{t$();Pv=(e,t)=>{let r=Date.parse(e);return e$(r,t)?r-Date.now():t}});var Nv=S(()=>{ZF();Iv();r$()});var s$,lu,Qa,cr,Ov,Dv=S(()=>{s$=y(ye());Nv();lu=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Qa=async e=>{let t=lu("context",e.context),r=lu("config",e.config),s=t.endpointV2?.properties?.authSchemes?.[0],o=await lu("signer",r.signer)(s),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}},cr=class{async sign(t,r,s){if(!s$.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let n=await Qa(s),{config:o,signer:i}=n,{signingRegion:a,signingName:c}=n,d=s.context;if(d?.authSchemes?.length??!1){let[l,h]=d.authSchemes;l?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await i.sign(t,{signingDate:Wa(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let s=r.ServerTime??Av(r.$response);if(s){let n=lu("config",t.config),o=n.systemClockOffset;n.systemClockOffset=Pv(s,n.systemClockOffset),n.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let s=Av(t);if(s){let n=lu("config",r.config);n.systemClockOffset=Pv(s,n.systemClockOffset)}}},Ov=cr});var n$,fu,o$=S(()=>{n$=y(ye());Nv();Dv();fu=class extends cr{async sign(t,r,s){if(!n$.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:n,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}=await Qa(s),u=(await n.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(t,{signingDate:Wa(n.systemClockOffset),signingRegion:u,signingService:c})}}});var kv,i$=S(()=>{kv=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var fh,Mv=S(()=>{fh=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var a$,c$,Ka,d$=S(()=>{i$();Mv();a$="AWS_AUTH_SCHEME_PREFERENCE",c$="auth_scheme_preference",Ka={environmentVariableSelector:(e,t)=>{if(t?.signingName&&fh(t.signingName)in e)return["httpBearerAuth"];if(a$ in e)return kv(e[a$])},configFileSelector:e=>{if(c$ in e)return kv(e[c$])},default:[]}});var Lv,u$,l$,f$=S(()=>{Me();Lv=y(Le()),u$=e=>(e.sigv4aSigningRegionSet=jt(e.sigv4aSigningRegionSet),e),l$={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new Lv.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new Lv.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});function One(e,{credentials:t,credentialDefaultProvider:r}){let s;return t?t?.memoized?s=t:s=Gc(t,Vc,Hi):r?s=jt(r(Object.assign({},e,{parentClientConfig:e}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function Dne(e,t){if(t.configBound)return t;let r=async s=>t({...s,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var qv,pi,p$,m$=S(()=>{as();Me();qv=y(L_()),pi=e=>{let t=e.credentials,r=!!e.credentials,s;Object.defineProperty(e,"credentials",{set(d){d&&d!==t&&d!==s&&(r=!0),t=d;let u=One(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),l=Dne(e,u);r&&!l.attributed?(s=async h=>l(h).then(m=>lo(m,"CREDENTIALS_CODE","e")),s.memoized=l.memoized,s.configBound=l.configBound,s.attributed=!0):s=l},get(){return s},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:n=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=jt(e.signer):e.regionInfoProvider?a=()=>jt(e.region)().then(async d=>[await e.regionInfoProvider(d,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},d]).then(([d,u])=>{let{signingRegion:l,signingService:h}=d;e.signingRegion=e.signingRegion||l||u,e.signingName=e.signingName||h||e.serviceId;let m={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},g=e.signerConstructor||qv.SignatureV4;return new g(m)}):a=async d=>{d=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await jt(e.region)(),properties:{}},d);let u=d.signingRegion,l=d.signingName;e.signingRegion=e.signingRegion||u,e.signingName=e.signingName||l||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:n},m=e.signerConstructor||qv.SignatureV4;return new m(h)},Object.assign(e,{systemClockOffset:o,signingEscapePath:n,signer:a})},p$=pi});var h$=S(()=>{Dv();o$();d$();f$();m$()});var g$={};dt(g$,{AWSSDKSigV4Signer:()=>Ov,AwsSdkSigV4ASigner:()=>fu,AwsSdkSigV4Signer:()=>cr,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Ka,NODE_SIGV4A_CONFIG_OPTIONS:()=>l$,getBearerTokenEnvKey:()=>fh,resolveAWSSDKSigV4Config:()=>p$,resolveAwsSdkSigV4AConfig:()=>u$,resolveAwsSdkSigV4Config:()=>pi,validateSigningProperties:()=>Qa});var Fv=S(()=>{h$();Mv()});var Fr,Ja=S(()=>{_e();Fr=class{resolveRestContentType(t,r){let s=r.getMemberSchemas(),n=Object.values(s).find(o=>!!o.getMergedTraits().httpPayload);if(n){let o=n.getMergedTraits().mediaType;return o||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(s).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:d,httpLabel:u,httpPrefixHeaders:l}=i.getMergedTraits();return!a&&!c&&!d&&!u&&l===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,s,n,o,i){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let d={$metadata:o,$response:s,$fault:s.statusCode<500?"client":"server"},u=ve.for(a);try{return{errorSchema:i?.(u,c)??u.getSchema(t),errorMetadata:d}}catch{n.message=n.message??n.Message??"UnknownError";let h=ve.for("smithy.ts.sdk.synthetic."+a),m=h.getBaseException();if(m){let g=h.getErrorCtor(m)??Error;throw Object.assign(new g({name:c}),d,n)}throw Object.assign(new Error(c),d,n)}}setQueryCompatError(t,r){let s=r.headers?.["x-amzn-query-error"];if(t!==void 0&&s!=null){let[n,o]=s.split(";"),i=Object.entries(t),a={Code:n,Type:o};Object.assign(t,a);for(let[c,d]of i)a[c]=d;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var $v,y$=S(()=>{tE();_e();Ja();$v=class extends Zi{awsQueryCompatible;mixin=new Fr;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),n}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=Xi(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=k.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u),m={};for(let[g,w]of d.structIterator())m[g]=this.deserializer.readValue(w,n[g]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}}});var kne,Mne,Lne,S$=S(()=>{kne=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},Mne=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},Lne=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var $t,po=S(()=>{$t=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function _$(e,t,r){if(r?.source){let s=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||s!==String(t)))return s.includes(".")?new pe(s,"bigDecimal"):BigInt(s)}return t}var E$=S(()=>{ut()});var w$,b$,ph,Uv=S(()=>{w$=y(U()),b$=y(Fe()),ph=(e,t)=>(0,w$.collectBody)(e,t).then(r=>(t?.utf8Encoder??b$.toUtf8)(r))});var Ya,jv,mi,pu=S(()=>{Uv();Ya=(e,t)=>ph(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(s){throw s?.name==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:r}),s}return{}}),jv=async(e,t)=>{let r=await Ya(e,t);return r.message=r.message??r.Message,r},mi=(e,t)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),s=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return s(e.headers[n]);if(t&&typeof t=="object"){let o=r(t,"code");if(o&&t[o]!==void 0)return s(t[o]);if(t.__type!==void 0)return s(t.__type)}}});var v$,mu,Bv=S(()=>{ze();_e();ut();v$=y(qe());po();E$();pu();mu=class extends $t{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,_$):await Ya(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let s=r!==null&&typeof r=="object",n=k.of(t);if(n.isListSchema()&&Array.isArray(r)){let i=n.getValueSchema(),a=[],c=!!n.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._read(i,d));return a}else if(n.isMapSchema()&&s){let i=n.getValueSchema(),a={},c=!!n.getMergedTraits().sparse;for(let[d,u]of Object.entries(r))(c||u!=null)&&(a[d]=this._read(i,u));return a}else if(n.isStructSchema()&&s){let i={};for(let[a,c]of n.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,u=this._read(c,r[d]);u!=null&&(i[a]=u)}return i}if(n.isBlobSchema()&&typeof r=="string")return(0,v$.fromBase64)(r);let o=n.getMergedTraits().mediaType;if(n.isStringSchema()&&typeof r=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return pt.from(r);if(n.isTimestampSchema()&&r!=null)switch(ot(n,this.settings)){case 5:return $c(r);case 6:return Uc(r);case 7:return jc(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(n.isBigDecimalSchema()&&r!=null){if(r instanceof pe)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new pe(i.string,i.type):new pe(String(r),"bigDecimal")}if(n.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(n.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof pe?i[a]=c:i[a]=this._read(n,c);return i}else return structuredClone(r);return r}}});var x$,mh,C$=S(()=>{ut();x$="\u039D",mh=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof pe){let s=`${x$+"nv"+this.counter++}_`+r.string;return this.values.set(`"${s}"`,r.string),s}if(typeof r=="bigint"){let s=r.toString(),n=`${x$+"b"+this.counter++}_`+s;return this.values.set(`"${n}"`,s),n}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,s]of this.values)t=t.replace(r,s);return t}}});var R$,hu,Hv=S(()=>{ze();_e();ut();R$=y(qe());po();C$();hu=class extends $t{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=k.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=k.of(t).getName(!0))}flush(){let{rootSchema:t}=this;if(this.rootSchema=void 0,t?.isStructSchema()||t?.isDocumentSchema()){let r=new mh;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(t,r,s){let n=r!==null&&typeof r=="object",o=k.of(t);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(let d of r)(c||d!=null)&&a.push(this._write(i,d));return a}else if(o.isMapSchema()&&n){let i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(let[d,u]of Object.entries(r))(c||u!=null)&&(a[d]=this._write(i,u));return a}else if(o.isStructSchema()&&n){let i={};for(let[a,c]of o.structIterator()){let d=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,u=this._write(c,r[a],o);u!==void 0&&(i[d]=u)}return i}if(!(r===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||o.isDocumentSchema()&&r instanceof Uint8Array)return o===this.rootSchema?r:this.serdeContext?.base64Encoder?this.serdeContext?.base64Encoder(r):(0,R$.toBase64)(r);if((o.isTimestampSchema()||o.isDocumentSchema())&&r instanceof Date)switch(ot(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return Vo(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(o.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,kt.v4)();let i=o.getMergedTraits().mediaType;if(r!=null&&i&&(i==="application/json"||i.endsWith("+json")))return pt.from(r)}if(o.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof pe?i[a]=c:i[a]=this._write(o,c);return i}else return structuredClone(r);return r}}}});var hi,hh=S(()=>{po();Bv();Hv();hi=class extends $t{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new hu(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new mu(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var gi,gh=S(()=>{ze();_e();Ja();hh();pu();gi=class extends lr{serializer;deserializer;serviceTarget;codec;mixin=new Fr;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=new hi({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);return n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(n.headers["x-amzn-query-mode"]="true"),(Ht(t.input)==="unit"||!n.body)&&(n.body="{}"),n}getPayloadCodec(){return this.codec}async handleError(t,r,s,n,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(n,s);let i=mi(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=k.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u),m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(w,n[C])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(n,m),Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}}});var zv,T$=S(()=>{gh();zv=class extends gi{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var Vv,A$=S(()=>{gh();Vv=class extends gi{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:s})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Gv,I$=S(()=>{ze();_e();Ja();hh();pu();Gv=class extends Yr{serializer;deserializer;codec;mixin=new Fr;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new hi(r),this.serializer=new Zr(this.codec.createSerializer(),r),this.deserializer=new Xr(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=k.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]&&!n.body&&(n.body="{}"),n}async handleError(t,r,s,n,o){let i=mi(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=k.of(a),u=n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().jsonName??g;m[g]=this.codec.createDeserializer().readObject(w,n[C])}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}getDefaultContentType(){return"application/json"}}});var P$,qne,N$=S(()=>{P$=y(U()),qne=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,P$.expectUnion)(e)}});var O$,D$,k$,yi,yh=S(()=>{O$=y(ei());ze();_e();D$=y(U()),k$=y(Fe());po();yi=class extends $t{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new zs(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,s){let n=k.of(t),o=n.getMemberSchemas();if(n.isStructSchema()&&n.isMemberSchema()&&!!Object.values(o).find(d=>!!d.getMemberTraits().eventPayload)){let d={},u=Object.keys(o)[0];return o[u].isBlobSchema()?d[u]=r:d[u]=this.read(o[u],r),d}let a=(this.serdeContext?.utf8Encoder??k$.toUtf8)(r),c=this.parseXml(a);return this.readSchema(t,s?c[s]:c)}readSchema(t,r){let s=k.of(t);if(s.isUnitSchema())return;let n=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(r))return this.readSchema(s,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!n.sparse,i=!!n.xmlFlattened;if(s.isListSchema()){let c=s.getValueSchema(),d=[],u=c.getMergedTraits().xmlName??"member",l=i?r:(r[0]??r)[u],h=Array.isArray(l)?l:[l];for(let m of h)(m!=null||o)&&d.push(this.readSchema(c,m));return d}let a={};if(s.isMapSchema()){let c=s.getKeySchema(),d=s.getValueSchema(),u;i?u=Array.isArray(r)?r:[r]:u=Array.isArray(r.entry)?r.entry:[r.entry];let l=c.getMergedTraits().xmlName??"key",h=d.getMergedTraits().xmlName??"value";for(let m of u){let g=m[l],w=m[h];(w!=null||o)&&(a[g]=this.readSchema(d,w))}return a}if(s.isStructSchema()){for(let[c,d]of s.structIterator()){let u=d.getMergedTraits(),l=u.httpPayload?u.xmlName??d.getName():d.getMemberTraits().xmlName??c;r[l]!=null&&(a[c]=this.readSchema(d,r[l]))}return a}if(s.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,r)}parseXml(t){if(t.length){let r;try{r=(0,O$.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let s="#text",n=Object.keys(r)[0],o=r[n];return o[s]&&(o[n]=o[s],delete o[s]),(0,D$.getValueFromTextNode)(o)}return{}}}});var M$,L$,Sh,q$=S(()=>{ze();_e();ut();M$=y(U()),L$=y(qe());po();Sh=class extends $t{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,s=""){this.buffer===void 0&&(this.buffer="");let n=k.of(t);if(s&&!s.endsWith(".")&&(s+="."),n.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??L$.toBase64)(r)));else if(n.isBooleanSchema()||n.isNumericSchema()||n.isStringSchema())r!=null?(this.writeKey(s),this.writeValue(String(r))):n.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,kt.v4)()));else if(n.isBigIntegerSchema())r!=null&&(this.writeKey(s),this.writeValue(String(r)));else if(n.isBigDecimalSchema())r!=null&&(this.writeKey(s),this.writeValue(r instanceof pe?r.string:String(r)));else if(n.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(s),ot(n,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,M$.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(n.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${n.getName(!0)}`);if(n.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let o=n.getValueSchema(),i=this.settings.flattenLists||n.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let d=this.getKey("member",o.getMergedTraits().xmlName),u=i?`${s}${a}`:`${s}${d}.${a}`;this.write(o,c,u),++a}}}else if(n.isMapSchema()){if(r&&typeof r=="object"){let o=n.getKeySchema(),i=n.getValueSchema(),a=n.getMergedTraits().xmlFlattened,c=1;for(let[d,u]of Object.entries(r)){if(u==null)continue;let l=this.getKey("key",o.getMergedTraits().xmlName),h=a?`${s}${c}.${l}`:`${s}entry.${c}.${l}`,m=this.getKey("value",i.getMergedTraits().xmlName),g=a?`${s}${c}.${m}`:`${s}entry.${c}.${m}`;this.write(o,d,h),this.write(i,u,g),++c}}}else if(n.isStructSchema()){if(r&&typeof r=="object")for(let[o,i]of n.structIterator()){if(r[o]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(o,i.getMergedTraits().xmlName),c=`${s}${a}`;this.write(i,r[o],c)}}else if(!n.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${n.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let s=r??t;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${ur(t)}=`}writeValue(t){this.buffer+=ur(t)}}});var gu,Wv=S(()=>{ze();_e();Ja();yh();q$();gu=class extends lr{options;serializer;deserializer;mixin=new Fr;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Sh(r),this.deserializer=new yi(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s);n.path.endsWith("/")||(n.path+="/"),Object.assign(n.headers,{"content-type":"application/x-www-form-urlencoded"}),(Ht(t.input)==="unit"||!n.body)&&(n.body="");let o=t.name.split("#")[1]??t.name;return n.body=`Action=${o}&Version=${this.options.version}`+n.body,n.body.endsWith("&")&&(n.body=n.body.slice(-1)),n}async deserializeResponse(t,r,s){let n=this.deserializer,o=k.of(t.output),i={};if(s.statusCode>=300){let l=await Jt(s.body,r);l.byteLength>0&&Object.assign(i,await n.read(15,l)),await this.handleError(t,r,s,i,this.deserializeMetadata(s))}for(let l in s.headers){let h=s.headers[l];delete s.headers[l],s.headers[l.toLowerCase()]=h}let a=t.name.split("#")[1]??t.name,c=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,d=await Jt(s.body,r);return d.byteLength>0&&Object.assign(i,await n.read(o,d,c)),{$metadata:this.deserializeMetadata(s),...i}}useNestedResult(){return!0}async handleError(t,r,s,n,o){let i=this.loadQueryErrorCode(s,n)??"Unknown",a=this.loadQueryError(n),c=this.loadQueryErrorMessage(n);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:d,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,a,o,(w,C)=>w.find(R=>k.of(R).getMergedTraits().awsQueryError?.[0]===C)),l=k.of(d),h=ve.for(d[1]).getErrorCtor(d)??Error,m=new h(c),g={Error:a.Error};for(let[w,C]of l.structIterator()){let R=C.getMergedTraits().xmlName??w,N=a[R]??n[R];g[w]=this.deserializer.readSchema(C,N)}throw Object.assign(m,u,{$fault:l.getMergedTraits().error,message:c},g)}loadQueryErrorCode(t,r){let s=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(s!==void 0)return s;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Qv,F$=S(()=>{Wv();Qv=class extends gu{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var $$,U$,yu,Kv,Jv,Yv=S(()=>{$$=y(ei()),U$=y(U());Uv();yu=(e,t)=>ph(e,t).then(r=>{if(r.length){let s;try{s=(0,$$.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let n="#text",o=Object.keys(s)[0],i=s[o];return i[n]&&(i[o]=i[n],delete i[n]),(0,U$.getValueFromTextNode)(i)}return{}}),Kv=async(e,t)=>{let r=await yu(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Jv=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var $r,Xv,_h,Su,Zv=S(()=>{$r=y(ei());ze();_e();ut();Xv=y(U()),_h=y(qe());po();Su=class extends $t{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let s=k.of(t);if(s.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(s.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??_h.fromBase64)(r);else{this.buffer=this.writeStruct(s,r,void 0);let n=s.getMergedTraits();n.httpPayload&&!n.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,s){let n=t.getMergedTraits(),o=t.isMemberSchema()&&!n.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():n.xmlName??t.getName();if(!o||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=$r.XmlNode.of(o),[a,c]=this.getXmlnsAttribute(t,s);for(let[d,u]of t.structIterator()){let l=r[d];if(l!=null||u.isIdempotencyToken()){if(u.getMergedTraits().xmlAttribute){i.addAttribute(u.getMergedTraits().xmlName??d,this.writeSimple(u,l));continue}if(u.isListSchema())this.writeList(u,l,i,c);else if(u.isMapSchema())this.writeMap(u,l,i,c);else if(u.isStructSchema())i.addChildNode(this.writeStruct(u,l,c));else{let h=$r.XmlNode.of(u.getMergedTraits().xmlName??u.getMemberName());this.writeSimpleInto(u,l,h,c),i.addChildNode(h)}}}return c&&i.addAttribute(a,c),i}writeList(t,r,s,n){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let o=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),c=!!a.sparse,d=!!o.xmlFlattened,[u,l]=this.getXmlnsAttribute(t,n),h=(m,g)=>{if(i.isListSchema())this.writeList(i,Array.isArray(g)?g:[g],m,l);else if(i.isMapSchema())this.writeMap(i,g,m,l);else if(i.isStructSchema()){let w=this.writeStruct(i,g,l);m.addChildNode(w.withName(d?o.xmlName??t.getMemberName():a.xmlName??"member"))}else{let w=$r.XmlNode.of(d?o.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,g,w,l),m.addChildNode(w)}};if(d)for(let m of r)(c||m!=null)&&h(s,m);else{let m=$r.XmlNode.of(o.xmlName??t.getMemberName());l&&m.addAttribute(u,l);for(let g of r)(c||g!=null)&&h(m,g);s.addChildNode(m)}}writeMap(t,r,s,n,o=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),d=a.getMergedTraits().xmlName??"key",u=t.getValueSchema(),l=u.getMergedTraits(),h=l.xmlName??"value",m=!!l.sparse,g=!!i.xmlFlattened,[w,C]=this.getXmlnsAttribute(t,n),R=(N,B,j)=>{let Y=$r.XmlNode.of(d,B),[we,De]=this.getXmlnsAttribute(a,C);De&&Y.addAttribute(we,De),N.addChildNode(Y);let te=$r.XmlNode.of(h);u.isListSchema()?this.writeList(u,j,te,C):u.isMapSchema()?this.writeMap(u,j,te,C,!0):u.isStructSchema()?te=this.writeStruct(u,j,C):this.writeSimpleInto(u,j,te,C),N.addChildNode(te)};if(g){for(let[N,B]of Object.entries(r))if(m||B!=null){let j=$r.XmlNode.of(i.xmlName??t.getMemberName());R(j,N,B),s.addChildNode(j)}}else{let N;o||(N=$r.XmlNode.of(i.xmlName??t.getMemberName()),C&&N.addAttribute(w,C),s.addChildNode(N));for(let[B,j]of Object.entries(r))if(m||j!=null){let Y=$r.XmlNode.of("entry");R(Y,B,j),(o?s:N).addChildNode(Y)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=k.of(t),n=null;if(r&&typeof r=="object")if(s.isBlobSchema())n=(this.serdeContext?.base64Encoder??_h.toBase64)(r);else if(s.isTimestampSchema()&&r instanceof Date)switch(ot(s,this.settings)){case 5:n=r.toISOString().replace(".000Z","Z");break;case 6:n=(0,Xv.dateToUtcString)(r);break;case 7:n=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),n=(0,Xv.dateToUtcString)(r);break}else{if(s.isBigDecimalSchema()&&r)return r instanceof pe?r.string:String(r);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(n=String(r)),s.isStringSchema()&&(r===void 0&&s.isIdempotencyToken()?n=(0,kt.v4)():n=String(r)),n===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${r}`);return n}writeSimpleInto(t,r,s,n){let o=this.writeSimple(t,r),i=k.of(t),a=new $r.XmlText(o),[c,d]=this.getXmlnsAttribute(i,n);d&&s.addAttribute(c,d),s.addChildNode(a)}getXmlnsAttribute(t,r){let s=t.getMergedTraits(),[n,o]=s.xmlNamespace??[];return o&&o!==r?[n?`xmlns:${n}`:"xmlns",o]:[void 0,void 0]}}});var _u,ex=S(()=>{po();yh();Zv();_u=class extends $t{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new Su(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new yi(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var tx,j$=S(()=>{ze();_e();Ja();Yv();ex();tx=class extends Yr{codec;serializer;deserializer;mixin=new Fr;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new _u(r),this.serializer=new Zr(this.codec.createSerializer(),r),this.deserializer=new Xr(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,s){let n=await super.serializeRequest(t,r,s),o=k.of(t.input);if(!n.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(n.headers["content-type"]=i)}return n.headers["content-type"]===this.getDefaultContentType()&&typeof n.body=="string"&&(n.body='<?xml version="1.0" encoding="UTF-8"?>'+n.body),n}async deserializeResponse(t,r,s){return super.deserializeResponse(t,r,s)}async handleError(t,r,s,n,o){let i=Jv(s,n)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,s,n,o),d=k.of(a),u=n.Error?.message??n.Error?.Message??n.message??n.Message??"Unknown",l=ve.for(a[1]).getErrorCtor(a)??Error,h=new l(u);await this.deserializeHttpMessage(a,r,s,n);let m={};for(let[g,w]of d.structIterator()){let C=w.getMergedTraits().xmlName??g,R=n.Error?.[C]??n[C];m[g]=this.codec.createDeserializer().readSchema(w,R)}throw Object.assign(h,c,{$fault:d.getMergedTraits().error,message:u},m)}getDefaultContentType(){return"application/xml"}}});var B$=S(()=>{y$();S$();T$();A$();gh();I$();hh();Bv();Hv();N$();pu();F$();Wv();j$();ex();yh();Zv();Yv()});var Cs={};dt(Cs,{AWSSDKSigV4Signer:()=>Ov,AwsEc2QueryProtocol:()=>Qv,AwsJson1_0Protocol:()=>zv,AwsJson1_1Protocol:()=>Vv,AwsJsonRpcProtocol:()=>gi,AwsQueryProtocol:()=>gu,AwsRestJsonProtocol:()=>Gv,AwsRestXmlProtocol:()=>tx,AwsSdkSigV4ASigner:()=>fu,AwsSdkSigV4Signer:()=>cr,AwsSmithyRpcV2CborProtocol:()=>$v,JsonCodec:()=>hi,JsonShapeDeserializer:()=>mu,JsonShapeSerializer:()=>hu,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Ka,NODE_SIGV4A_CONFIG_OPTIONS:()=>l$,XmlCodec:()=>_u,XmlShapeDeserializer:()=>yi,XmlShapeSerializer:()=>Su,_toBool:()=>Mne,_toNum:()=>Lne,_toStr:()=>kne,awsExpectUnion:()=>qne,emitWarningIfUnsupportedVersion:()=>Ga,getBearerTokenEnvKey:()=>fh,loadRestJsonErrorCode:()=>mi,loadRestXmlErrorCode:()=>Jv,parseJsonBody:()=>Ya,parseJsonErrorBody:()=>jv,parseXmlBody:()=>yu,parseXmlErrorBody:()=>Kv,resolveAWSSDKSigV4Config:()=>p$,resolveAwsSdkSigV4AConfig:()=>u$,resolveAwsSdkSigV4Config:()=>pi,setCredentialFeature:()=>lo,setFeature:()=>QF,setTokenFeature:()=>JF,state:()=>lh,validateSigningProperties:()=>Qa});var Et=S(()=>{as();Fv();B$()});var Za=b(Xa=>{"use strict";var Fne=(Me(),Q(hs)),$ne=ss(),Une=ye(),Rs=(Et(),Q(Cs)),G$=void 0;function jne(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function Bne(e){let t=Fne.normalizeProvider(e.userAgentAppId??G$),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let s=await t();if(!jne(s)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof s!="string"?n?.warn("userAgentAppId must be a string or undefined."):s.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return s}})}var Hne=/\d{12}\.ddb/;async function zne(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Rs.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?Rs.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):Rs.setFeature(e,"RETRY_MODE_STANDARD","E"):Rs.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let o=e.endpointV2;switch(String(o?.url?.hostname).match(Hne)&&Rs.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Rs.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Rs.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Rs.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let n=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){let o=n;o.accountId&&Rs.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))Rs.setFeature(e,i,a)}}var H$="user-agent",rx="x-amz-user-agent",z$=" ",sx="/",Vne=/[^!$%&'*+\-.^_`|~\w]/g,Gne=/[^!$%&'*+\-.^_`|~\w#]/g,V$="-",Wne=1024;function Qne(e){let t="";for(let r in e){let s=e[r];if(t.length+s.length+1<=Wne){t.length?t+=","+s:t+=s;continue}break}return t}var W$=e=>(t,r)=>async s=>{let{request:n}=s;if(!Une.HttpRequest.isInstance(n))return t(s);let{headers:o}=n,i=r?.userAgent?.map(Eh)||[],a=(await e.defaultUserAgentProvider()).map(Eh);await zne(r,e,s);let c=r;a.push(`m/${Qne(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let d=e?.customUserAgent?.map(Eh)||[],u=await e.userAgentAppId();u&&a.push(Eh(["app",`${u}`]));let l=$ne.getUserAgentPrefix(),h=(l?[l]:[]).concat([...a,...i,...d]).join(z$),m=[...a.filter(g=>g.startsWith("aws-sdk-")),...d].join(z$);return e.runtime!=="browser"?(m&&(o[rx]=o[rx]?`${o[H$]} ${m}`:m),o[H$]=h):o[rx]=h,t({...s,request:n})},Eh=e=>{let t=e[0].split(sx).map(i=>i.replace(Vne,V$)).join(sx),r=e[1]?.replace(Gne,V$),s=t.indexOf(sx),n=t.substring(0,s),o=t.substring(s+1);return n==="api"&&(o=o.toLowerCase()),[n,o,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},Q$={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Kne=e=>({applyToStack:t=>{t.add(W$(e),Q$)}});Xa.DEFAULT_UA_APP_ID=G$;Xa.getUserAgentMiddlewareOptions=Q$;Xa.getUserAgentPlugin=Kne;Xa.resolveUserAgentConfig=Bne;Xa.userAgentMiddleware=W$});var ox=b(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.resolveHttpAuthSchemeConfig=mo.defaultSQSHttpAuthSchemeProvider=mo.defaultSQSHttpAuthSchemeParametersProvider=void 0;var Jne=(Et(),Q(Cs)),nx=gt(),Yne=async(e,t,r)=>({operation:(0,nx.getSmithyContext)(t).operation,region:await(0,nx.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});mo.defaultSQSHttpAuthSchemeParametersProvider=Yne;function Xne(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sqs",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var Zne=e=>{let t=[];switch(e.operation){default:t.push(Xne(e))}return t};mo.defaultSQSHttpAuthSchemeProvider=Zne;var eoe=e=>{let t=(0,Jne.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,nx.normalizeProvider)(e.authSchemePreference??[])})};mo.resolveHttpAuthSchemeConfig=eoe});var K$=b((ORe,toe)=>{toe.exports={name:"@aws-sdk/client-sqs",description:"AWS SDK for JavaScript Sqs Client for Node.js, Browser and React Native",version:"3.922.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sqs","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sqs"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.922.0","@aws-sdk/credential-provider-node":"3.922.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-sdk-sqs":"3.922.0","@aws-sdk/middleware-user-agent":"3.922.0","@aws-sdk/region-config-resolver":"3.922.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.922.0","@smithy/config-resolver":"^4.4.1","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/md5-js":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.7","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sqs",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sqs"}}});var ix=b(ho=>{"use strict";var roe=(as(),Q(fo)),soe=Le(),J$="AWS_ACCESS_KEY_ID",Y$="AWS_SECRET_ACCESS_KEY",X$="AWS_SESSION_TOKEN",Z$="AWS_CREDENTIAL_EXPIRATION",eU="AWS_CREDENTIAL_SCOPE",tU="AWS_ACCOUNT_ID",noe=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[J$],r=process.env[Y$],s=process.env[X$],n=process.env[Z$],o=process.env[eU],i=process.env[tU];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...s&&{sessionToken:s},...n&&{expiration:new Date(n)},...o&&{credentialScope:o},...i&&{accountId:i}};return roe.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new soe.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};ho.ENV_ACCOUNT_ID=tU;ho.ENV_CREDENTIAL_SCOPE=eU;ho.ENV_EXPIRATION=Z$;ho.ENV_KEY=J$;ho.ENV_SECRET=Y$;ho.ENV_SESSION=X$;ho.fromEnv=noe});var rU=b(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.checkUrl=void 0;var ooe=Le(),ioe="169.254.170.2",aoe="169.254.170.23",coe="[fd00:ec2::23]",doe=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===ioe||e.hostname===aoe||e.hostname===coe)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),s=n=>{let o=parseInt(n,10);return 0<=o&&o<=255};if(r[0]==="127"&&s(r[1])&&s(r[2])&&s(r[3])&&r.length===4)return}throw new ooe.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};wh.checkUrl=doe});var sU=b(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.createGetRequest=poe;bh.getCredentials=moe;var ax=Le(),uoe=ye(),loe=U(),foe=Nc();function poe(e){return new uoe.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,s])=>(t[r]=s,t),{}),fragment:e.hash})}async function moe(e,t){let s=await(0,foe.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let n=JSON.parse(s);if(typeof n.AccessKeyId!="string"||typeof n.SecretAccessKey!="string"||typeof n.Token!="string"||typeof n.Expiration!="string")throw new ax.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:(0,loe.parseRfc3339DateTime)(n.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let n={};try{n=JSON.parse(s)}catch{}throw Object.assign(new ax.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:n.Code,Message:n.Message})}throw new ax.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var nU=b(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.retryWrapper=void 0;var hoe=(e,t,r)=>async()=>{for(let s=0;s<t;++s)try{return await e()}catch{await new Promise(o=>setTimeout(o,r))}return await e()};vh.retryWrapper=hoe});var aU=b(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.fromHttp=void 0;var goe=(An(),Q(Tn)),yoe=(as(),Q(fo)),Soe=br(),oU=Le(),_oe=goe.__importDefault(require("fs/promises")),Eoe=rU(),iU=sU(),woe=nU(),boe="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",voe="http://169.254.170.2",xoe="AWS_CONTAINER_CREDENTIALS_FULL_URI",Coe="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",Roe="AWS_CONTAINER_AUTHORIZATION_TOKEN",Toe=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[boe],s=e.awsContainerCredentialsFullUri??process.env[xoe],n=e.awsContainerAuthorizationToken??process.env[Roe],o=e.awsContainerAuthorizationTokenFile??process.env[Coe],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),n&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),s)t=s;else if(r)t=`${voe}${r}`;else throw new oU.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,Eoe.checkUrl)(a,e.logger);let c=Soe.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,woe.retryWrapper)(async()=>{let d=(0,iU.createGetRequest)(a);n?d.headers.Authorization=n:o&&(d.headers.Authorization=(await _oe.default.readFile(o)).toString());try{let u=await c.handle(d);return(0,iU.getCredentials)(u.response).then(l=>(0,yoe.setCredentialFeature)(l,"CREDENTIALS_HTTP","z"))}catch(u){throw new oU.CredentialsProviderError(String(u),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};xh.fromHttp=Toe});var cx=b(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});Ch.fromHttp=void 0;var Aoe=aU();Object.defineProperty(Ch,"fromHttp",{enumerable:!0,get:function(){return Aoe.fromHttp}})});function Ioe(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Poe(e){return{schemeId:"smithy.api#noAuth"}}var Eu,cU,dU,uU,dx=S(()=>{Et();Eu=y(gt()),cU=async(e,t,r)=>({operation:(0,Eu.getSmithyContext)(t).operation,region:await(0,Eu.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});dU=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(Poe(e));break}default:t.push(Ioe(e))}return t},uU=e=>{let t=pi(e);return Object.assign(t,{authSchemePreference:(0,Eu.normalizeProvider)(e.authSchemePreference??[])})}});var lU,fU,ux=S(()=>{lU=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),fU={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Rh,lx=S(()=>{Rh={name:"@aws-sdk/nested-clients",version:"3.922.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.922.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.922.0","@aws-sdk/region-config-resolver":"3.922.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.922.0","@smithy/config-resolver":"^4.4.1","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.7","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var wu=b(Si=>{"use strict";var pU=require("os"),fx=require("process"),Ooe=Za(),mU={isCrtAvailable:!1},Doe=()=>mU.isCrtAvailable?["md/crt-avail"]:null,hU=({serviceId:e,clientVersion:t})=>async r=>{let s=[["aws-sdk-js",t],["ua","2.1"],[`os/${pU.platform()}`,pU.release()],["lang/js"],["md/nodejs",`${fx.versions.node}`]],n=Doe();n&&s.push(n),e&&s.push([`api/${e}`,t]),fx.env.AWS_EXECUTION_ENV&&s.push([`exec-env/${fx.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...s,[`app/${o}`]]:[...s]},koe=hU,gU="AWS_SDK_UA_APP_ID",yU="sdk_ua_app_id",Moe="sdk-ua-app-id",Loe={environmentVariableSelector:e=>e[gU],configFileSelector:e=>e[yU]??e[Moe],default:Ooe.DEFAULT_UA_APP_ID};Si.NODE_APP_ID_CONFIG_OPTIONS=Loe;Si.UA_APP_ID_ENV_NAME=gU;Si.UA_APP_ID_INI_NAME=yU;Si.createDefaultUserAgentProvider=hU;Si.crtAvailability=mU;Si.defaultUserAgent=koe});var TU,jr,SU,bu,ec,tc,ln,px,mx,_U,EU,wU,AU,IU,Ur,bU,PU,vU,xU,CU,RU,qoe,NU,OU=S(()=>{TU="required",jr="argv",SU="isSet",bu="booleanEquals",ec="error",tc="endpoint",ln="tree",px="PartitionResult",mx="getAttr",_U={[TU]:!1,type:"string"},EU={[TU]:!0,default:!1,type:"boolean"},wU={ref:"Endpoint"},AU={fn:bu,[jr]:[{ref:"UseFIPS"},!0]},IU={fn:bu,[jr]:[{ref:"UseDualStack"},!0]},Ur={},bU={fn:mx,[jr]:[{ref:px},"supportsFIPS"]},PU={ref:px},vU={fn:bu,[jr]:[!0,{fn:mx,[jr]:[PU,"supportsDualStack"]}]},xU=[AU],CU=[IU],RU=[{ref:"Region"}],qoe={version:"1.0",parameters:{Region:_U,UseDualStack:EU,UseFIPS:EU,Endpoint:_U},rules:[{conditions:[{fn:SU,[jr]:[wU]}],rules:[{conditions:xU,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ec},{conditions:CU,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ec},{endpoint:{url:wU,properties:Ur,headers:Ur},type:tc}],type:ln},{conditions:[{fn:SU,[jr]:RU}],rules:[{conditions:[{fn:"aws.partition",[jr]:RU,assign:px}],rules:[{conditions:[AU,IU],rules:[{conditions:[{fn:bu,[jr]:[!0,bU]},vU],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ur,headers:Ur},type:tc}],type:ln},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ec}],type:ln},{conditions:xU,rules:[{conditions:[{fn:bu,[jr]:[bU,!0]}],rules:[{conditions:[{fn:"stringEquals",[jr]:[{fn:mx,[jr]:[PU,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Ur,headers:Ur},type:tc},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ur,headers:Ur},type:tc}],type:ln},{error:"FIPS is enabled but this partition does not support FIPS",type:ec}],type:ln},{conditions:CU,rules:[{conditions:[vU],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ur,headers:Ur},type:tc}],type:ln},{error:"DualStack is enabled but this partition does not support DualStack",type:ec}],type:ln},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Ur,headers:Ur},type:tc}],type:ln}],type:ln},{error:"Invalid Configuration: Missing Region",type:ec}]},NU=qoe});var DU,rc,Foe,kU,MU=S(()=>{DU=y(ss()),rc=y(ts());OU();Foe=new rc.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),kU=(e,t={})=>Foe.get(e,()=>(0,rc.resolveEndpoint)(NU,{endpointParams:e,logger:t.logger}));rc.customEndpointFunctions.aws=DU.awsEndpointFunctions});var LU,qU,Th,Ah,FU,$U=S(()=>{Et();Me();LU=y(U()),qU=y(vr()),Th=y(qe()),Ah=y(Fe());dx();MU();FU=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Th.fromBase64,base64Encoder:e?.base64Encoder??Th.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??kU,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??dU,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new cr},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Vt}],logger:e?.logger??new LU.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??qU.parseUrl,utf8Decoder:e?.utf8Decoder??Ah.fromUtf8,utf8Encoder:e?.utf8Encoder??Ah.toUtf8})});var Ih,yo,UU,Ph,go,Nh,jU,BU,HU,zU,VU,GU,WU=S(()=>{lx();Et();Ih=y(wu()),yo=y(et()),UU=y(Zs()),Ph=y(Ct()),go=y(Zt()),Nh=y(br()),jU=y(en()),BU=y(Ss());$U();HU=y(U()),zU=y(rn()),VU=y(U()),GU=e=>{(0,VU.emitWarningIfUnsupportedVersion)(process.version);let t=(0,zU.resolveDefaultsModeConfig)(e),r=()=>t().then(HU.loadConfigsForDefaultMode),s=FU(e);Ga(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,go.loadConfig)(Ka,n),bodyLengthChecker:e?.bodyLengthChecker??jU.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Ih.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:Rh.version}),maxAttempts:e?.maxAttempts??(0,go.loadConfig)(Ph.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,go.loadConfig)(yo.NODE_REGION_CONFIG_OPTIONS,{...yo.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:Nh.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,go.loadConfig)({...Ph.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||BU.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??UU.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Nh.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,go.loadConfig)(yo.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,go.loadConfig)(yo.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,go.loadConfig)(Ih.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var KU=b(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.warning=void 0;sc.stsRegionDefaultResolver=Uoe;var QU=et(),$oe=Zt();function Uoe(e={}){return(0,$oe.loadConfig)({...QU.NODE_REGION_CONFIG_OPTIONS,async default(){return sc.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...QU.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}sc.warning={silence:!1}});var nc=b(Ts=>{"use strict";var vu=et(),JU=KU(),joe=e=>({setRegion(t){e.region=t},region(){return e.region}}),Boe=e=>({region:e.region()});Object.defineProperty(Ts,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return vu.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Ts,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return vu.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Ts,"REGION_ENV_NAME",{enumerable:!0,get:function(){return vu.REGION_ENV_NAME}});Object.defineProperty(Ts,"REGION_INI_NAME",{enumerable:!0,get:function(){return vu.REGION_INI_NAME}});Object.defineProperty(Ts,"resolveRegionConfig",{enumerable:!0,get:function(){return vu.resolveRegionConfig}});Ts.getAwsRegionExtensionConfiguration=joe;Ts.resolveAwsRegionExtensionConfiguration=Boe;Object.keys(JU).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ts,e)&&Object.defineProperty(Ts,e,{enumerable:!0,get:function(){return JU[e]}})})});var YU,XU,ZU=S(()=>{YU=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},XU=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Oh,Dh,kh,e2,t2=S(()=>{Oh=y(nc()),Dh=y(ye()),kh=y(U());ZU();e2=(e,t)=>{let r=Object.assign((0,Oh.getAwsRegionExtensionConfiguration)(e),(0,kh.getDefaultExtensionConfiguration)(e),(0,Dh.getHttpHandlerExtensionConfiguration)(e),YU(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,Oh.resolveAwsRegionExtensionConfiguration)(r),(0,kh.resolveDefaultRuntimeConfig)(r),(0,Dh.resolveHttpHandlerRuntimeConfig)(r),XU(r))}});var Mh,r2,s2,Lh,n2,o2,i2,qh,hx,xu,gx=S(()=>{Mh=y(Ls()),r2=y(qs()),s2=y(Fs()),Lh=y(Za()),n2=y(et());Me();o2=y(Ys()),i2=y(Wt()),qh=y(Ct()),hx=y(U());dx();ux();WU();t2();xu=class extends hx.Client{config;constructor(...[t]){let r=GU(t||{});super(r),this.initConfig=r;let s=lU(r),n=(0,Lh.resolveUserAgentConfig)(s),o=(0,qh.resolveRetryConfig)(n),i=(0,n2.resolveRegionConfig)(o),a=(0,Mh.resolveHostHeaderConfig)(i),c=(0,i2.resolveEndpointConfig)(a),d=uU(c),u=e2(d,t?.extensions||[]);this.config=u,this.middlewareStack.use((0,Lh.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,qh.getRetryPlugin)(this.config)),this.middlewareStack.use((0,o2.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Mh.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,r2.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,s2.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use($s(this.config,{httpAuthSchemeParametersProvider:cU,identityProviderConfigProvider:async l=>new es({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(Us(this.config))}destroy(){super.destroy()}}});var a2,wt,Fh=S(()=>{a2=y(U()),wt=class e extends a2.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var _i,Hoe,Cu,Ru,yx,Sx,Tu,Au,Iu,Pu,zoe,Nu,Ou,Du,ku,Mu,$h=S(()=>{_i=y(U());Fh();Hoe={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},Cu=class e extends wt{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Ru=class e extends wt{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},yx=e=>({...e,...e.clientSecret&&{clientSecret:_i.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:_i.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:_i.SENSITIVE_STRING}}),Sx=e=>({...e,...e.accessToken&&{accessToken:_i.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:_i.SENSITIVE_STRING},...e.idToken&&{idToken:_i.SENSITIVE_STRING}}),Tu=class e extends wt{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Au=class e extends wt{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Iu=class e extends wt{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Pu=class e extends wt{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},zoe={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},Nu=class e extends wt{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Ou=class e extends wt{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Du=class e extends wt{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ku=class e extends wt{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Mu=class e extends wt{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var q,c2,d2,Voe,Goe,Woe,Qoe,Koe,Joe,Yoe,Xoe,Zoe,eie,tie,rie,sie,Br,u2=S(()=>{Et();Me();q=y(U());$h();Fh();c2=async(e,t)=>{let r=Wo(e,t),s={"content-type":"application/json"};r.bp("/token");let n;return n=JSON.stringify((0,q.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,q._json)(o)})),r.m("POST").h(s).b(n),r.build()},d2=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Voe(e,t);let r=(0,q.map)({$metadata:Br(e)}),s=(0,q.expectNonNull)((0,q.expectObject)(await Ya(e.body,t)),"body"),n=(0,q.take)(s,{accessToken:q.expectString,expiresIn:q.expectInt32,idToken:q.expectString,refreshToken:q.expectString,tokenType:q.expectString});return Object.assign(r,n),r},Voe=async(e,t)=>{let r={...e,body:await jv(e.body,t)},s=mi(e,r.body);switch(s){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await Woe(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await Qoe(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await Koe(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Joe(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Yoe(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await Xoe(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Zoe(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await eie(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await tie(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await rie(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await sie(r,t);default:let n=r.body;return Goe({output:e,parsedBody:n,errorCode:s})}},Goe=(0,q.withBaseException)(wt),Woe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString,reason:q.expectString});Object.assign(r,n);let o=new Cu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Qoe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Ru({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Koe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Tu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Joe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Au({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Yoe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Iu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Xoe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Pu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Zoe=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString,reason:q.expectString});Object.assign(r,n);let o=new Nu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},eie=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Ou({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},tie=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Du({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},rie=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new ku({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},sie=async(e,t)=>{let r=(0,q.map)({}),s=e.body,n=(0,q.take)(s,{error:q.expectString,error_description:q.expectString});Object.assign(r,n);let o=new Mu({$metadata:Br(e),...r});return(0,q.decorateServiceException)(o,e.body)},Br=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var l2,f2,_x,Lu,Ex=S(()=>{l2=y(Wt()),f2=y(wr()),_x=y(U());ux();$h();u2();Lu=class extends _x.Command.classBuilder().ep(fU).m(function(t,r,s,n){return[(0,f2.getSerdePlugin)(s,this.serialize,this.deserialize),(0,l2.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(yx,Sx).ser(c2).de(d2).build(){}});var p2,nie,Uh,m2=S(()=>{p2=y(U());Ex();gx();nie={CreateTokenCommand:Lu},Uh=class extends xu{};(0,p2.createAggregatedClient)(nie,Uh)});var h2=S(()=>{Ex()});var g2=S(()=>{$h()});var wx={};dt(wx,{$Command:()=>_x.Command,AccessDeniedException:()=>Cu,AccessDeniedExceptionReason:()=>Hoe,AuthorizationPendingException:()=>Ru,CreateTokenCommand:()=>Lu,CreateTokenRequestFilterSensitiveLog:()=>yx,CreateTokenResponseFilterSensitiveLog:()=>Sx,ExpiredTokenException:()=>Tu,InternalServerException:()=>Au,InvalidClientException:()=>Iu,InvalidGrantException:()=>Pu,InvalidRequestException:()=>Nu,InvalidRequestExceptionReason:()=>zoe,InvalidScopeException:()=>Ou,SSOOIDC:()=>Uh,SSOOIDCClient:()=>xu,SSOOIDCServiceException:()=>wt,SlowDownException:()=>Du,UnauthorizedClientException:()=>ku,UnsupportedGrantTypeException:()=>Mu,__Client:()=>hx.Client});var bx=S(()=>{gx();m2();h2();g2();Fh()});var E2=b(Fu=>{"use strict";var oie=(as(),Q(fo)),iie=(Fv(),Q(g$)),gr=Le(),qu=Gt(),aie=require("fs"),cie=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new gr.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=iie.getBearerTokenEnvKey(t);if(!(r in process.env))throw new gr.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let s={token:process.env[r]};return oie.setTokenFeature(s,"BEARER_SERVICE_ENV_VARS","3"),s},die=300*1e3,vx="To refresh this SSO session run 'aws sso login' with the corresponding profile.",uie=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(bx(),wx)),s=o=>t.clientConfig?.[o]??t.parentClientConfig?.[o];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:s("logger"),userAgentAppId:s("userAgentAppId")}))},lie=async(e,t,r={})=>{let{CreateTokenCommand:s}=await Promise.resolve().then(()=>(bx(),wx));return(await uie(t,r)).send(new s({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},y2=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new gr.TokenProviderError(`Token is expired. ${vx}`,!1)},Ei=(e,t,r=!1)=>{if(typeof t>"u")throw new gr.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${vx}`,!1)},{writeFile:fie}=aie.promises,pie=(e,t)=>{let r=qu.getSSOTokenFilepath(e),s=JSON.stringify(t,null,2);return fie(r,s)},S2=new Date(0),_2=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let s=await qu.parseKnownFiles(r),n=qu.getProfileName({profile:r.profile??t?.profile}),o=s[n];if(o){if(!o.sso_session)throw new gr.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new gr.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let i=o.sso_session,c=(await qu.loadSsoSessionData(r))[i];if(!c)throw new gr.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let g of["sso_start_url","sso_region"])if(!c[g])throw new gr.TokenProviderError(`Sso session '${i}' is missing required property '${g}'.`,!1);c.sso_start_url;let d=c.sso_region,u;try{u=await qu.getSSOTokenFromFile(i)}catch{throw new gr.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${vx}`,!1)}Ei("accessToken",u.accessToken),Ei("expiresAt",u.expiresAt);let{accessToken:l,expiresAt:h}=u,m={token:l,expiration:new Date(h)};if(m.expiration.getTime()-Date.now()>die)return m;if(Date.now()-S2.getTime()<30*1e3)return y2(m),m;Ei("clientId",u.clientId,!0),Ei("clientSecret",u.clientSecret,!0),Ei("refreshToken",u.refreshToken,!0);try{S2.setTime(Date.now());let g=await lie(u,d,r);Ei("accessToken",g.accessToken),Ei("expiresIn",g.expiresIn);let w=new Date(Date.now()+g.expiresIn*1e3);try{await pie(i,{...u,accessToken:g.accessToken,expiresAt:w.toISOString(),refreshToken:g.refreshToken})}catch{}return{token:g.accessToken,expiration:w}}catch{return y2(m),m}},mie=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new gr.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},hie=(e={})=>gr.memoize(gr.chain(_2(e),async()=>{throw new gr.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);Fu.fromEnvSigningName=cie;Fu.fromSso=_2;Fu.fromStatic=mie;Fu.nodeProvider=hie});var Cx=b(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.resolveHttpAuthSchemeConfig=So.defaultSSOHttpAuthSchemeProvider=So.defaultSSOHttpAuthSchemeParametersProvider=void 0;var gie=(Et(),Q(Cs)),xx=gt(),yie=async(e,t,r)=>({operation:(0,xx.getSmithyContext)(t).operation,region:await(0,xx.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});So.defaultSSOHttpAuthSchemeParametersProvider=yie;function Sie(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function jh(e){return{schemeId:"smithy.api#noAuth"}}var _ie=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(jh(e));break}case"ListAccountRoles":{t.push(jh(e));break}case"ListAccounts":{t.push(jh(e));break}case"Logout":{t.push(jh(e));break}default:t.push(Sie(e))}return t};So.defaultSSOHttpAuthSchemeProvider=_ie;var Eie=e=>{let t=(0,gie.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,xx.normalizeProvider)(e.authSchemePreference??[])})};So.resolveHttpAuthSchemeConfig=Eie});var w2=b(($Te,wie)=>{wie.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.922.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.922.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.922.0","@aws-sdk/region-config-resolver":"3.922.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.922.0","@smithy/config-resolver":"^4.4.1","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.7","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var L2=b(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});Bh.ruleSet=void 0;var O2="required",zr="fn",Vr="argv",ac="ref",b2=!0,v2="isSet",$u="booleanEquals",oc="error",ic="endpoint",fn="tree",Rx="PartitionResult",Tx="getAttr",x2={[O2]:!1,type:"string"},C2={[O2]:!0,default:!1,type:"boolean"},R2={[ac]:"Endpoint"},D2={[zr]:$u,[Vr]:[{[ac]:"UseFIPS"},!0]},k2={[zr]:$u,[Vr]:[{[ac]:"UseDualStack"},!0]},Hr={},T2={[zr]:Tx,[Vr]:[{[ac]:Rx},"supportsFIPS"]},M2={[ac]:Rx},A2={[zr]:$u,[Vr]:[!0,{[zr]:Tx,[Vr]:[M2,"supportsDualStack"]}]},I2=[D2],P2=[k2],N2=[{[ac]:"Region"}],bie={version:"1.0",parameters:{Region:x2,UseDualStack:C2,UseFIPS:C2,Endpoint:x2},rules:[{conditions:[{[zr]:v2,[Vr]:[R2]}],rules:[{conditions:I2,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:oc},{conditions:P2,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:oc},{endpoint:{url:R2,properties:Hr,headers:Hr},type:ic}],type:fn},{conditions:[{[zr]:v2,[Vr]:N2}],rules:[{conditions:[{[zr]:"aws.partition",[Vr]:N2,assign:Rx}],rules:[{conditions:[D2,k2],rules:[{conditions:[{[zr]:$u,[Vr]:[b2,T2]},A2],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Hr,headers:Hr},type:ic}],type:fn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:oc}],type:fn},{conditions:I2,rules:[{conditions:[{[zr]:$u,[Vr]:[T2,b2]}],rules:[{conditions:[{[zr]:"stringEquals",[Vr]:[{[zr]:Tx,[Vr]:[M2,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Hr,headers:Hr},type:ic},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Hr,headers:Hr},type:ic}],type:fn},{error:"FIPS is enabled but this partition does not support FIPS",type:oc}],type:fn},{conditions:P2,rules:[{conditions:[A2],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Hr,headers:Hr},type:ic}],type:fn},{error:"DualStack is enabled but this partition does not support DualStack",type:oc}],type:fn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Hr,headers:Hr},type:ic}],type:fn}],type:fn},{error:"Invalid Configuration: Missing Region",type:oc}]};Bh.ruleSet=bie});var q2=b(Hh=>{"use strict";Object.defineProperty(Hh,"__esModule",{value:!0});Hh.defaultEndpointResolver=void 0;var vie=ss(),Ax=ts(),xie=L2(),Cie=new Ax.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Rie=(e,t={})=>Cie.get(e,()=>(0,Ax.resolveEndpoint)(xie.ruleSet,{endpointParams:e,logger:t.logger}));Hh.defaultEndpointResolver=Rie;Ax.customEndpointFunctions.aws=vie.awsEndpointFunctions});var U2=b(zh=>{"use strict";Object.defineProperty(zh,"__esModule",{value:!0});zh.getRuntimeConfig=void 0;var Tie=(Et(),Q(Cs)),Aie=(Me(),Q(hs)),Iie=U(),Pie=vr(),F2=qe(),$2=Fe(),Nie=Cx(),Oie=q2(),Die=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??F2.fromBase64,base64Encoder:e?.base64Encoder??F2.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Oie.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Nie.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Tie.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Aie.NoAuthSigner}],logger:e?.logger??new Iie.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??Pie.parseUrl,utf8Decoder:e?.utf8Decoder??$2.fromUtf8,utf8Encoder:e?.utf8Encoder??$2.toUtf8});zh.getRuntimeConfig=Die});var V2=b(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.getRuntimeConfig=void 0;var kie=(An(),Q(Tn)),Mie=kie.__importDefault(w2()),j2=(Et(),Q(Cs)),B2=wu(),Vh=et(),Lie=Zs(),H2=Ct(),wi=Zt(),z2=br(),qie=en(),Fie=Ss(),$ie=U2(),Uie=U(),jie=rn(),Bie=U(),Hie=e=>{(0,Bie.emitWarningIfUnsupportedVersion)(process.version);let t=(0,jie.resolveDefaultsModeConfig)(e),r=()=>t().then(Uie.loadConfigsForDefaultMode),s=(0,$ie.getRuntimeConfig)(e);(0,j2.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,wi.loadConfig)(j2.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??qie.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,B2.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:Mie.default.version}),maxAttempts:e?.maxAttempts??(0,wi.loadConfig)(H2.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,wi.loadConfig)(Vh.NODE_REGION_CONFIG_OPTIONS,{...Vh.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:z2.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,wi.loadConfig)({...H2.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Fie.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Lie.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??z2.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,wi.loadConfig)(Vh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,wi.loadConfig)(Vh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,wi.loadConfig)(B2.NODE_APP_ID_CONFIG_OPTIONS,n)}};Gh.getRuntimeConfig=Hie});var uj=b(st=>{"use strict";var G2=Ls(),zie=qs(),Vie=Fs(),W2=Za(),Gie=et(),pn=(Me(),Q(hs)),Wie=Ys(),Hu=Wt(),Q2=Ct(),V=U(),K2=Cx(),Qie=V2(),J2=nc(),Y2=ye(),eg=wr(),Uu=(Et(),Q(Cs)),Kie=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),tg={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Jie=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},Yie=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Xie=(e,t)=>{let r=Object.assign(J2.getAwsRegionExtensionConfiguration(e),V.getDefaultExtensionConfiguration(e),Y2.getHttpHandlerExtensionConfiguration(e),Jie(e));return t.forEach(s=>s.configure(r)),Object.assign(e,J2.resolveAwsRegionExtensionConfiguration(r),V.resolveDefaultRuntimeConfig(r),Y2.resolveHttpHandlerRuntimeConfig(r),Yie(r))},cc=class extends V.Client{config;constructor(...[t]){let r=Qie.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=Kie(r),n=W2.resolveUserAgentConfig(s),o=Q2.resolveRetryConfig(n),i=Gie.resolveRegionConfig(o),a=G2.resolveHostHeaderConfig(i),c=Hu.resolveEndpointConfig(a),d=K2.resolveHttpAuthSchemeConfig(c),u=Xie(d,t?.extensions||[]);this.config=u,this.middlewareStack.use(W2.getUserAgentPlugin(this.config)),this.middlewareStack.use(Q2.getRetryPlugin(this.config)),this.middlewareStack.use(Wie.getContentLengthPlugin(this.config)),this.middlewareStack.use(G2.getHostHeaderPlugin(this.config)),this.middlewareStack.use(zie.getLoggerPlugin(this.config)),this.middlewareStack.use(Vie.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(pn.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:K2.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async l=>new pn.DefaultIdentityProviderConfig({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(pn.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},_o=class e extends V.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Wh=class e extends _o{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Qh=class e extends _o{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Kh=class e extends _o{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Jh=class e extends _o{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},X2=e=>({...e,...e.accessToken&&{accessToken:V.SENSITIVE_STRING}}),Z2=e=>({...e,...e.secretAccessKey&&{secretAccessKey:V.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:V.SENSITIVE_STRING}}),ej=e=>({...e,...e.roleCredentials&&{roleCredentials:Z2(e.roleCredentials)}}),tj=e=>({...e,...e.accessToken&&{accessToken:V.SENSITIVE_STRING}}),rj=e=>({...e,...e.accessToken&&{accessToken:V.SENSITIVE_STRING}}),sj=e=>({...e,...e.accessToken&&{accessToken:V.SENSITIVE_STRING}}),Zie=async(e,t)=>{let r=pn.requestBuilder(e,t),s=V.map({},V.isSerializableHeaderValue,{[ng]:e[sg]});r.bp("/federation/credentials");let n=V.map({[pae]:[,V.expectNonNull(e[fae],"roleName")],[oj]:[,V.expectNonNull(e[nj],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},eae=async(e,t)=>{let r=pn.requestBuilder(e,t),s=V.map({},V.isSerializableHeaderValue,{[ng]:e[sg]});r.bp("/assignment/roles");let n=V.map({[dj]:[,e[cj]],[aj]:[()=>e.maxResults!==void 0,()=>e[ij].toString()],[oj]:[,V.expectNonNull(e[nj],"accountId")]});return r.m("GET").h(s).q(n).b(void 0),r.build()},tae=async(e,t)=>{let r=pn.requestBuilder(e,t),s=V.map({},V.isSerializableHeaderValue,{[ng]:e[sg]});r.bp("/assignment/accounts");let n=V.map({[dj]:[,e[cj]],[aj]:[()=>e.maxResults!==void 0,()=>e[ij].toString()]});return r.m("GET").h(s).q(n).b(void 0),r.build()},rae=async(e,t)=>{let r=pn.requestBuilder(e,t),s=V.map({},V.isSerializableHeaderValue,{[ng]:e[sg]});return r.bp("/logout"),r.m("POST").h(s).b(void 0),r.build()},sae=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return rg(e,t);let r=V.map({$metadata:Eo(e)}),s=V.expectNonNull(V.expectObject(await Uu.parseJsonBody(e.body,t)),"body"),n=V.take(s,{roleCredentials:V._json});return Object.assign(r,n),r},nae=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return rg(e,t);let r=V.map({$metadata:Eo(e)}),s=V.expectNonNull(V.expectObject(await Uu.parseJsonBody(e.body,t)),"body"),n=V.take(s,{nextToken:V.expectString,roleList:V._json});return Object.assign(r,n),r},oae=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return rg(e,t);let r=V.map({$metadata:Eo(e)}),s=V.expectNonNull(V.expectObject(await Uu.parseJsonBody(e.body,t)),"body"),n=V.take(s,{accountList:V._json,nextToken:V.expectString});return Object.assign(r,n),r},iae=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return rg(e,t);let r=V.map({$metadata:Eo(e)});return await V.collectBody(e.body,t),r},rg=async(e,t)=>{let r={...e,body:await Uu.parseJsonErrorBody(e.body,t)},s=Uu.loadRestJsonErrorCode(e,r.body);switch(s){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await cae(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await dae(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await uae(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await lae(r);default:let n=r.body;return aae({output:e,parsedBody:n,errorCode:s})}},aae=V.withBaseException(_o),cae=async(e,t)=>{let r=V.map({}),s=e.body,n=V.take(s,{message:V.expectString});Object.assign(r,n);let o=new Wh({$metadata:Eo(e),...r});return V.decorateServiceException(o,e.body)},dae=async(e,t)=>{let r=V.map({}),s=e.body,n=V.take(s,{message:V.expectString});Object.assign(r,n);let o=new Qh({$metadata:Eo(e),...r});return V.decorateServiceException(o,e.body)},uae=async(e,t)=>{let r=V.map({}),s=e.body,n=V.take(s,{message:V.expectString});Object.assign(r,n);let o=new Kh({$metadata:Eo(e),...r});return V.decorateServiceException(o,e.body)},lae=async(e,t)=>{let r=V.map({}),s=e.body,n=V.take(s,{message:V.expectString});Object.assign(r,n);let o=new Jh({$metadata:Eo(e),...r});return V.decorateServiceException(o,e.body)},Eo=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),nj="accountId",sg="accessToken",oj="account_id",ij="maxResults",aj="max_result",cj="nextToken",dj="next_token",fae="roleName",pae="role_name",ng="x-amz-sso_bearer_token",Yh=class extends V.Command.classBuilder().ep(tg).m(function(t,r,s,n){return[eg.getSerdePlugin(s,this.serialize,this.deserialize),Hu.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(X2,ej).ser(Zie).de(sae).build(){},ju=class extends V.Command.classBuilder().ep(tg).m(function(t,r,s,n){return[eg.getSerdePlugin(s,this.serialize,this.deserialize),Hu.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(tj,void 0).ser(eae).de(nae).build(){},Bu=class extends V.Command.classBuilder().ep(tg).m(function(t,r,s,n){return[eg.getSerdePlugin(s,this.serialize,this.deserialize),Hu.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(rj,void 0).ser(tae).de(oae).build(){},Xh=class extends V.Command.classBuilder().ep(tg).m(function(t,r,s,n){return[eg.getSerdePlugin(s,this.serialize,this.deserialize),Hu.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(sj,void 0).ser(rae).de(iae).build(){},mae={GetRoleCredentialsCommand:Yh,ListAccountRolesCommand:ju,ListAccountsCommand:Bu,LogoutCommand:Xh},Zh=class extends cc{};V.createAggregatedClient(mae,Zh);var hae=pn.createPaginator(cc,ju,"nextToken","nextToken","maxResults"),gae=pn.createPaginator(cc,Bu,"nextToken","nextToken","maxResults");Object.defineProperty(st,"$Command",{enumerable:!0,get:function(){return V.Command}});Object.defineProperty(st,"__Client",{enumerable:!0,get:function(){return V.Client}});st.GetRoleCredentialsCommand=Yh;st.GetRoleCredentialsRequestFilterSensitiveLog=X2;st.GetRoleCredentialsResponseFilterSensitiveLog=ej;st.InvalidRequestException=Wh;st.ListAccountRolesCommand=ju;st.ListAccountRolesRequestFilterSensitiveLog=tj;st.ListAccountsCommand=Bu;st.ListAccountsRequestFilterSensitiveLog=rj;st.LogoutCommand=Xh;st.LogoutRequestFilterSensitiveLog=sj;st.ResourceNotFoundException=Qh;st.RoleCredentialsFilterSensitiveLog=Z2;st.SSO=Zh;st.SSOClient=cc;st.SSOServiceException=_o;st.TooManyRequestsException=Kh;st.UnauthorizedException=Jh;st.paginateListAccountRoles=hae;st.paginateListAccounts=gae});var fj=b(Ix=>{"use strict";var lj=uj();Object.defineProperty(Ix,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return lj.GetRoleCredentialsCommand}});Object.defineProperty(Ix,"SSOClient",{enumerable:!0,get:function(){return lj.SSOClient}})});var Px=b(ig=>{"use strict";var cs=Le(),og=Gt(),pj=(as(),Q(fo)),yae=E2(),hj=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),zu=!1,mj=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:s,ssoRoleName:n,ssoClient:o,clientConfig:i,parentClientConfig:a,profile:c,filepath:d,configFilepath:u,ignoreCache:l,logger:h})=>{let m,g="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let Ie=await yae.fromSso({profile:c,filepath:d,configFilepath:u,ignoreCache:l})();m={accessToken:Ie.token,expiresAt:new Date(Ie.expiration).toISOString()}}catch(Ie){throw new cs.CredentialsProviderError(Ie.message,{tryNextLink:zu,logger:h})}else try{m=await og.getSSOTokenFromFile(e)}catch{throw new cs.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${g}`,{tryNextLink:zu,logger:h})}if(new Date(m.expiresAt).getTime()-Date.now()<=0)throw new cs.CredentialsProviderError(`The SSO session associated with this profile has expired. ${g}`,{tryNextLink:zu,logger:h});let{accessToken:w}=m,{SSOClient:C,GetRoleCredentialsCommand:R}=await Promise.resolve().then(function(){return fj()}),N=o||new C(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??s,userAgentAppId:i?.userAgentAppId??a?.userAgentAppId})),B;try{B=await N.send(new R({accountId:r,roleName:n,accessToken:w}))}catch(Ie){throw new cs.CredentialsProviderError(Ie,{tryNextLink:zu,logger:h})}let{roleCredentials:{accessKeyId:j,secretAccessKey:Y,sessionToken:we,expiration:De,credentialScope:te,accountId:he}={}}=B;if(!j||!Y||!we||!De)throw new cs.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:zu,logger:h});let be={accessKeyId:j,secretAccessKey:Y,sessionToken:we,expiration:new Date(De),...te&&{credentialScope:te},...he&&{accountId:he}};return t?pj.setCredentialFeature(be,"CREDENTIALS_SSO","s"):pj.setCredentialFeature(be,"CREDENTIALS_SSO_LEGACY","u"),be},gj=(e,t)=>{let{sso_start_url:r,sso_account_id:s,sso_region:n,sso_role_name:o}=e;if(!r||!s||!n||!o)throw new cs.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},Sae=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e,{ssoClient:a}=e,c=og.getProfileName({profile:e.profile??t?.profile});if(!r&&!s&&!n&&!o&&!i){let u=(await og.parseKnownFiles(e))[c];if(!u)throw new cs.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!hj(u))throw new cs.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(u?.sso_session){let R=(await og.loadSsoSessionData(e))[u.sso_session],N=` configurations in profile ${c} and sso-session ${u.sso_session}`;if(n&&n!==R.sso_region)throw new cs.CredentialsProviderError("Conflicting SSO region"+N,{tryNextLink:!1,logger:e.logger});if(r&&r!==R.sso_start_url)throw new cs.CredentialsProviderError("Conflicting SSO start_url"+N,{tryNextLink:!1,logger:e.logger});u.sso_region=R.sso_region,u.sso_start_url=R.sso_start_url}let{sso_start_url:l,sso_account_id:h,sso_region:m,sso_role_name:g,sso_session:w}=gj(u,e.logger);return mj({ssoStartUrl:l,ssoSession:w,ssoAccountId:h,ssoRegion:m,ssoRoleName:g,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!s||!n||!o)throw new cs.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return mj({ssoStartUrl:r,ssoSession:i,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};ig.fromSSO=Sae;ig.isSsoProfile=hj;ig.validateSsoProfile=gj});function _ae(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Eae(e){return{schemeId:"smithy.api#noAuth"}}var Vu,yj,Sj,wae,_j,Nx=S(()=>{Et();Vu=y(gt());Gu();yj=async(e,t,r)=>({operation:(0,Vu.getSmithyContext)(t).operation,region:await(0,Vu.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Sj=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(Eae(e));break}default:t.push(_ae(e))}return t},wae=e=>Object.assign(e,{stsClientCtor:As}),_j=e=>{let t=wae(e),r=pi(t);return Object.assign(r,{authSchemePreference:(0,Vu.normalizeProvider)(e.authSchemePreference??[])})}});var Ej,ag,cg=S(()=>{Ej=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),ag={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Nj,ce,Ce,wo,It,Oj,Dj,Be,wj,Is,dc,Dx,bj,Ox,kj,vj,Pt,xj,Mj,Lj,Ut,yr,Cj,qj,Fj,Rj,$j,Tj,Aj,Ij,Pj,bae,Uj,jj=S(()=>{Nj="required",ce="type",Ce="argv",wo="booleanEquals",It="stringEquals",Oj="sigv4",Dj="us-east-1",Be="endpoint",wj="https://sts.{Region}.{PartitionResult#dnsSuffix}",Is="tree",dc="error",Dx="getAttr",bj={[Nj]:!1,[ce]:"string"},Ox={[Nj]:!0,default:!1,[ce]:"boolean"},kj={ref:"Endpoint"},vj={fn:"isSet",[Ce]:[{ref:"Region"}]},Pt={ref:"Region"},xj={fn:"aws.partition",[Ce]:[Pt],assign:"PartitionResult"},Mj={ref:"UseFIPS"},Lj={ref:"UseDualStack"},Ut={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Oj,signingName:"sts",signingRegion:Dj}]},headers:{}},yr={},Cj={conditions:[{fn:It,[Ce]:[Pt,"aws-global"]}],[Be]:Ut,[ce]:Be},qj={fn:wo,[Ce]:[Mj,!0]},Fj={fn:wo,[Ce]:[Lj,!0]},Rj={fn:Dx,[Ce]:[{ref:"PartitionResult"},"supportsFIPS"]},$j={ref:"PartitionResult"},Tj={fn:wo,[Ce]:[!0,{fn:Dx,[Ce]:[$j,"supportsDualStack"]}]},Aj=[{fn:"isSet",[Ce]:[kj]}],Ij=[qj],Pj=[Fj],bae={version:"1.0",parameters:{Region:bj,UseDualStack:Ox,UseFIPS:Ox,Endpoint:bj,UseGlobalEndpoint:Ox},rules:[{conditions:[{fn:wo,[Ce]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[Ce]:Aj},vj,xj,{fn:wo,[Ce]:[Mj,!1]},{fn:wo,[Ce]:[Lj,!1]}],rules:[{conditions:[{fn:It,[Ce]:[Pt,"ap-northeast-1"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"ap-south-1"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"ap-southeast-1"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"ap-southeast-2"]}],endpoint:Ut,[ce]:Be},Cj,{conditions:[{fn:It,[Ce]:[Pt,"ca-central-1"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"eu-central-1"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"eu-north-1"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"eu-west-1"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"eu-west-2"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"eu-west-3"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"sa-east-1"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,Dj]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"us-east-2"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"us-west-1"]}],endpoint:Ut,[ce]:Be},{conditions:[{fn:It,[Ce]:[Pt,"us-west-2"]}],endpoint:Ut,[ce]:Be},{endpoint:{url:wj,properties:{authSchemes:[{name:Oj,signingName:"sts",signingRegion:"{Region}"}]},headers:yr},[ce]:Be}],[ce]:Is},{conditions:Aj,rules:[{conditions:Ij,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[ce]:dc},{conditions:Pj,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[ce]:dc},{endpoint:{url:kj,properties:yr,headers:yr},[ce]:Be}],[ce]:Is},{conditions:[vj],rules:[{conditions:[xj],rules:[{conditions:[qj,Fj],rules:[{conditions:[{fn:wo,[Ce]:[!0,Rj]},Tj],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:yr,headers:yr},[ce]:Be}],[ce]:Is},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[ce]:dc}],[ce]:Is},{conditions:Ij,rules:[{conditions:[{fn:wo,[Ce]:[Rj,!0]}],rules:[{conditions:[{fn:It,[Ce]:[{fn:Dx,[Ce]:[$j,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:yr,headers:yr},[ce]:Be},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:yr,headers:yr},[ce]:Be}],[ce]:Is},{error:"FIPS is enabled but this partition does not support FIPS",[ce]:dc}],[ce]:Is},{conditions:Pj,rules:[{conditions:[Tj],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:yr,headers:yr},[ce]:Be}],[ce]:Is},{error:"DualStack is enabled but this partition does not support DualStack",[ce]:dc}],[ce]:Is},Cj,{endpoint:{url:wj,properties:yr,headers:yr},[ce]:Be}],[ce]:Is}],[ce]:Is},{error:"Invalid Configuration: Missing Region",[ce]:dc}]},Uj=bae});var Bj,uc,vae,Hj,zj=S(()=>{Bj=y(ss()),uc=y(ts());jj();vae=new uc.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),Hj=(e,t={})=>vae.get(e,()=>(0,uc.resolveEndpoint)(Uj,{endpointParams:e,logger:t.logger}));uc.customEndpointFunctions.aws=Bj.awsEndpointFunctions});var Vj,Gj,dg,ug,Wj,Qj=S(()=>{Et();Me();Vj=y(U()),Gj=y(vr()),dg=y(qe()),ug=y(Fe());Nx();zj();Wj=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??dg.fromBase64,base64Encoder:e?.base64Encoder??dg.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Hj,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Sj,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new cr},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Vt}],logger:e?.logger??new Vj.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??Gj.parseUrl,utf8Decoder:e?.utf8Decoder??ug.fromUtf8,utf8Encoder:e?.utf8Encoder??ug.toUtf8})});var lg,vo,Kj,fg,bo,pg,Jj,Yj,Xj,Zj,eB,tB,rB=S(()=>{lx();Et();lg=y(wu()),vo=y(et());Me();Kj=y(Zs()),fg=y(Ct()),bo=y(Zt()),pg=y(br()),Jj=y(en()),Yj=y(Ss());Qj();Xj=y(U()),Zj=y(rn()),eB=y(U()),tB=e=>{(0,eB.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Zj.resolveDefaultsModeConfig)(e),r=()=>t().then(Xj.loadConfigsForDefaultMode),s=Wj(e);Ga(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,bo.loadConfig)(Ka,n),bodyLengthChecker:e?.bodyLengthChecker??Jj.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,lg.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:Rh.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new cr},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Vt}],maxAttempts:e?.maxAttempts??(0,bo.loadConfig)(fg.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,bo.loadConfig)(vo.NODE_REGION_CONFIG_OPTIONS,{...vo.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:pg.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,bo.loadConfig)({...fg.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Yj.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Kj.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??pg.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,bo.loadConfig)(vo.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,bo.loadConfig)(vo.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,bo.loadConfig)(lg.NODE_APP_ID_CONFIG_OPTIONS,n)}}});var sB,nB,oB=S(()=>{sB=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},nB=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var mg,hg,gg,iB,aB=S(()=>{mg=y(nc()),hg=y(ye()),gg=y(U());oB();iB=(e,t)=>{let r=Object.assign((0,mg.getAwsRegionExtensionConfiguration)(e),(0,gg.getDefaultExtensionConfiguration)(e),(0,hg.getHttpHandlerExtensionConfiguration)(e),sB(e));return t.forEach(s=>s.configure(r)),Object.assign(e,(0,mg.resolveAwsRegionExtensionConfiguration)(r),(0,gg.resolveDefaultRuntimeConfig)(r),(0,hg.resolveHttpHandlerRuntimeConfig)(r),nB(r))}});var yg,cB,dB,Sg,uB,lB,fB,_g,kx,As,Gu=S(()=>{yg=y(Ls()),cB=y(qs()),dB=y(Fs()),Sg=y(Za()),uB=y(et());Me();lB=y(Ys()),fB=y(Wt()),_g=y(Ct()),kx=y(U());Nx();cg();rB();aB();As=class extends kx.Client{config;constructor(...[t]){let r=tB(t||{});super(r),this.initConfig=r;let s=Ej(r),n=(0,Sg.resolveUserAgentConfig)(s),o=(0,_g.resolveRetryConfig)(n),i=(0,uB.resolveRegionConfig)(o),a=(0,yg.resolveHostHeaderConfig)(i),c=(0,fB.resolveEndpointConfig)(a),d=_j(c),u=iB(d,t?.extensions||[]);this.config=u,this.middlewareStack.use((0,Sg.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,_g.getRetryPlugin)(this.config)),this.middlewareStack.use((0,lB.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,yg.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,cB.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,dB.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use($s(this.config,{httpAuthSchemeParametersProvider:yj,identityProviderConfigProvider:async l=>new es({"aws.auth#sigv4":l.credentials})})),this.middlewareStack.use(Us(this.config))}destroy(){super.destroy()}}});var pB,dr,Eg=S(()=>{pB=y(U()),dr=class e extends pB.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Mx,Lx,qx,Wu,Qu,Ku,Ju,Yu,Xu,Fx,$x,Zu,el=S(()=>{Mx=y(U());Eg();Lx=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Mx.SENSITIVE_STRING}}),qx=e=>({...e,...e.Credentials&&{Credentials:Lx(e.Credentials)}}),Wu=class e extends dr{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Qu=class e extends dr{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ku=class e extends dr{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ju=class e extends dr{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Yu=class e extends dr{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Xu=class e extends dr{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Fx=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Mx.SENSITIVE_STRING}}),$x=e=>({...e,...e.Credentials&&{Credentials:Lx(e.Credentials)}}),Zu=class e extends dr{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var mB,fe,hB,gB,yB,SB,_B,xae,Cae,Rae,Tae,Aae,Iae,Pae,Nae,Oae,EB,Dae,kae,Mae,Lae,qae,Fae,wB,$ae,Uae,bB,jae,Bae,Hae,zae,Vae,Gae,Wae,hn,Qae,vB,xB,CB,RB,Ux,Kae,jx,lc,Jae,Bx,Hx,fc,zx,pc,Vx,Gx,Wx,mc,hc,Qx,Kx,Jx,gc,Yx,yc,Sc,Xx,Zx,mn,eC,tC,rC,sC,nC,TB,oC,iC,aC,at,AB,Yae,cC=S(()=>{Et();mB=y(ye()),fe=y(U());el();Eg();hB=async(e,t)=>{let r=xB,s;return s=AB({...Nae(e,t),[RB]:Kae,[TB]:CB}),vB(t,r,"/",void 0,s)},gB=async(e,t)=>{let r=xB,s;return s=AB({...Oae(e,t),[RB]:Jae,[TB]:CB}),vB(t,r,"/",void 0,s)},yB=async(e,t)=>{if(e.statusCode>=300)return _B(e,t);let r=await yu(e.body,t),s={};return s=$ae(r.AssumeRoleResult,t),{$metadata:hn(e),...s}},SB=async(e,t)=>{if(e.statusCode>=300)return _B(e,t);let r=await yu(e.body,t),s={};return s=Uae(r.AssumeRoleWithWebIdentityResult,t),{$metadata:hn(e),...s}},_B=async(e,t)=>{let r={...e,body:await Kv(e.body,t)},s=Yae(e,r.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await xae(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Aae(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Iae(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Pae(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Cae(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Rae(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Tae(r,t);default:let n=r.body;return Qae({output:e,parsedBody:n.Error,errorCode:s})}},xae=async(e,t)=>{let r=e.body,s=jae(r.Error,t),n=new Wu({$metadata:hn(e),...s});return(0,fe.decorateServiceException)(n,r)},Cae=async(e,t)=>{let r=e.body,s=Bae(r.Error,t),n=new Zu({$metadata:hn(e),...s});return(0,fe.decorateServiceException)(n,r)},Rae=async(e,t)=>{let r=e.body,s=Hae(r.Error,t),n=new Yu({$metadata:hn(e),...s});return(0,fe.decorateServiceException)(n,r)},Tae=async(e,t)=>{let r=e.body,s=zae(r.Error,t),n=new Xu({$metadata:hn(e),...s});return(0,fe.decorateServiceException)(n,r)},Aae=async(e,t)=>{let r=e.body,s=Vae(r.Error,t),n=new Qu({$metadata:hn(e),...s});return(0,fe.decorateServiceException)(n,r)},Iae=async(e,t)=>{let r=e.body,s=Gae(r.Error,t),n=new Ku({$metadata:hn(e),...s});return(0,fe.decorateServiceException)(n,r)},Pae=async(e,t)=>{let r=e.body,s=Wae(r.Error,t),n=new Ju({$metadata:hn(e),...s});return(0,fe.decorateServiceException)(n,r)},Nae=(e,t)=>{let r={};if(e[yc]!=null&&(r[yc]=e[yc]),e[Sc]!=null&&(r[Sc]=e[Sc]),e[hc]!=null){let s=EB(e[hc],t);e[hc]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}if(e[mc]!=null&&(r[mc]=e[mc]),e[pc]!=null&&(r[pc]=e[pc]),e[rC]!=null){let s=Fae(e[rC],t);e[rC]?.length===0&&(r.Tags=[]),Object.entries(s).forEach(([n,o])=>{let i=`Tags.${n}`;r[i]=o})}if(e[nC]!=null){let s=qae(e[nC],t);e[nC]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(s).forEach(([n,o])=>{let i=`TransitiveTagKeys.${n}`;r[i]=o})}if(e[Gx]!=null&&(r[Gx]=e[Gx]),e[eC]!=null&&(r[eC]=e[eC]),e[sC]!=null&&(r[sC]=e[sC]),e[mn]!=null&&(r[mn]=e[mn]),e[Kx]!=null){let s=Mae(e[Kx],t);e[Kx]?.length===0&&(r.ProvidedContexts=[]),Object.entries(s).forEach(([n,o])=>{let i=`ProvidedContexts.${n}`;r[i]=o})}return r},Oae=(e,t)=>{let r={};if(e[yc]!=null&&(r[yc]=e[yc]),e[Sc]!=null&&(r[Sc]=e[Sc]),e[iC]!=null&&(r[iC]=e[iC]),e[Jx]!=null&&(r[Jx]=e[Jx]),e[hc]!=null){let s=EB(e[hc],t);e[hc]?.length===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([n,o])=>{let i=`PolicyArns.${n}`;r[i]=o})}return e[mc]!=null&&(r[mc]=e[mc]),e[pc]!=null&&(r[pc]=e[pc]),r},EB=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=Dae(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},Dae=(e,t)=>{let r={};return e[aC]!=null&&(r[aC]=e[aC]),r},kae=(e,t)=>{let r={};return e[Qx]!=null&&(r[Qx]=e[Qx]),e[zx]!=null&&(r[zx]=e[zx]),r},Mae=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=kae(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},Lae=(e,t)=>{let r={};return e[Wx]!=null&&(r[Wx]=e[Wx]),e[oC]!=null&&(r[oC]=e[oC]),r},qae=(e,t)=>{let r={},s=1;for(let n of e)n!==null&&(r[`member.${s}`]=n,s++);return r},Fae=(e,t)=>{let r={},s=1;for(let n of e){if(n===null)continue;let o=Lae(n,t);Object.entries(o).forEach(([i,a])=>{r[`member.${s}.${i}`]=a}),s++}return r},wB=(e,t)=>{let r={};return e[jx]!=null&&(r[jx]=(0,fe.expectString)(e[jx])),e[Bx]!=null&&(r[Bx]=(0,fe.expectString)(e[Bx])),r},$ae=(e,t)=>{let r={};return e[fc]!=null&&(r[fc]=bB(e[fc],t)),e[lc]!=null&&(r[lc]=wB(e[lc],t)),e[gc]!=null&&(r[gc]=(0,fe.strictParseInt32)(e[gc])),e[mn]!=null&&(r[mn]=(0,fe.expectString)(e[mn])),r},Uae=(e,t)=>{let r={};return e[fc]!=null&&(r[fc]=bB(e[fc],t)),e[Zx]!=null&&(r[Zx]=(0,fe.expectString)(e[Zx])),e[lc]!=null&&(r[lc]=wB(e[lc],t)),e[gc]!=null&&(r[gc]=(0,fe.strictParseInt32)(e[gc])),e[Yx]!=null&&(r[Yx]=(0,fe.expectString)(e[Yx])),e[Hx]!=null&&(r[Hx]=(0,fe.expectString)(e[Hx])),e[mn]!=null&&(r[mn]=(0,fe.expectString)(e[mn])),r},bB=(e,t)=>{let r={};return e[Ux]!=null&&(r[Ux]=(0,fe.expectString)(e[Ux])),e[Xx]!=null&&(r[Xx]=(0,fe.expectString)(e[Xx])),e[tC]!=null&&(r[tC]=(0,fe.expectString)(e[tC])),e[Vx]!=null&&(r[Vx]=(0,fe.expectNonNull)((0,fe.parseRfc3339DateTimeWithOffset)(e[Vx]))),r},jae=(e,t)=>{let r={};return e[at]!=null&&(r[at]=(0,fe.expectString)(e[at])),r},Bae=(e,t)=>{let r={};return e[at]!=null&&(r[at]=(0,fe.expectString)(e[at])),r},Hae=(e,t)=>{let r={};return e[at]!=null&&(r[at]=(0,fe.expectString)(e[at])),r},zae=(e,t)=>{let r={};return e[at]!=null&&(r[at]=(0,fe.expectString)(e[at])),r},Vae=(e,t)=>{let r={};return e[at]!=null&&(r[at]=(0,fe.expectString)(e[at])),r},Gae=(e,t)=>{let r={};return e[at]!=null&&(r[at]=(0,fe.expectString)(e[at])),r},Wae=(e,t)=>{let r={};return e[at]!=null&&(r[at]=(0,fe.expectString)(e[at])),r},hn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Qae=(0,fe.withBaseException)(dr),vB=async(e,t,r,s,n)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return s!==void 0&&(d.hostname=s),n!==void 0&&(d.body=n),new mB.HttpRequest(d)},xB={"content-type":"application/x-www-form-urlencoded"},CB="2011-06-15",RB="Action",Ux="AccessKeyId",Kae="AssumeRole",jx="AssumedRoleId",lc="AssumedRoleUser",Jae="AssumeRoleWithWebIdentity",Bx="Arn",Hx="Audience",fc="Credentials",zx="ContextAssertion",pc="DurationSeconds",Vx="Expiration",Gx="ExternalId",Wx="Key",mc="Policy",hc="PolicyArns",Qx="ProviderArn",Kx="ProvidedContexts",Jx="ProviderId",gc="PackedPolicySize",Yx="Provider",yc="RoleArn",Sc="RoleSessionName",Xx="SecretAccessKey",Zx="SubjectFromWebIdentityToken",mn="SourceIdentity",eC="SerialNumber",tC="SessionToken",rC="Tags",sC="TokenCode",nC="TransitiveTagKeys",TB="Version",oC="Value",iC="WebIdentityToken",aC="arn",at="message",AB=e=>Object.entries(e).map(([t,r])=>(0,fe.extendedEncodeURIComponent)(t)+"="+(0,fe.extendedEncodeURIComponent)(r)).join("&"),Yae=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var IB,PB,NB,bi,wg=S(()=>{IB=y(Wt()),PB=y(wr()),NB=y(U());cg();el();cC();bi=class extends NB.Command.classBuilder().ep(ag).m(function(t,r,s,n){return[(0,PB.getSerdePlugin)(s,this.serialize,this.deserialize),(0,IB.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,qx).ser(hB).de(yB).build(){}});var OB,DB,kB,vi,bg=S(()=>{OB=y(Wt()),DB=y(wr()),kB=y(U());cg();el();cC();vi=class extends kB.Command.classBuilder().ep(ag).m(function(t,r,s,n){return[(0,DB.getSerdePlugin)(s,this.serialize,this.deserialize),(0,OB.getEndpointPlugin)(s,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Fx,$x).ser(gB).de(SB).build(){}});var MB,Xae,vg,LB=S(()=>{MB=y(U());wg();bg();Gu();Xae={AssumeRoleCommand:bi,AssumeRoleWithWebIdentityCommand:vi},vg=class extends As{};(0,MB.createAggregatedClient)(Xae,vg)});var qB=S(()=>{wg();bg()});var FB=S(()=>{el()});var $B,UB,jB,BB,HB,zB,VB=S(()=>{as();$B=y(nc());wg();bg();UB=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},jB=async(e,t,r,s={})=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t,i=await(0,$B.stsRegionDefaultResolver)(s)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),n??o??i},BB=(e,t)=>{let r,s;return async(n,o)=>{if(s=n,!r){let{logger:u=e?.parentClientConfig?.logger,profile:l=e?.parentClientConfig?.profile,region:h,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:g,userAgentAppId:w=e?.parentClientConfig?.userAgentAppId}=e,C=await jB(h,e?.parentClientConfig?.region,g,{logger:u,profile:l}),R=!zB(m);r=new t({...e,userAgentAppId:w,profile:l,credentialDefaultProvider:()=>async()=>s,region:C,requestHandler:R?m:void 0,logger:u})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new bi(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let c=UB(a),d={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return lo(d,"CREDENTIALS_STS_ASSUME_ROLE","i"),d}},HB=(e,t)=>{let r;return async s=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:d=e?.parentClientConfig?.profile,region:u,requestHandler:l=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:m=e?.parentClientConfig?.userAgentAppId}=e,g=await jB(u,e?.parentClientConfig?.region,h,{logger:c,profile:d}),w=!zB(l);r=new t({...e,userAgentAppId:m,profile:d,region:g,requestHandler:w?l:void 0,logger:c})}let{Credentials:n,AssumedRoleUser:o}=await r.send(new vi(s));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);let i=UB(o),a={accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,...n.CredentialScope&&{credentialScope:n.CredentialScope},...i&&{accountId:i}};return i&&lo(a,"RESOLVED_ACCOUNT_ID","T"),lo(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},zB=e=>e?.metadata?.handlerProtocol==="h2"});var GB,WB,QB,Zae,KB=S(()=>{VB();Gu();GB=(e,t)=>t?class extends e{constructor(s){super(s);for(let n of t)this.middlewareStack.use(n)}}:e,WB=(e={},t)=>BB(e,GB(As,t)),QB=(e={},t)=>HB(e,GB(As,t)),Zae=e=>t=>e({roleAssumer:WB(t),roleAssumerWithWebIdentity:QB(t),...t})});var dC={};dt(dC,{AssumeRoleCommand:()=>bi,AssumeRoleResponseFilterSensitiveLog:()=>qx,AssumeRoleWithWebIdentityCommand:()=>vi,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Fx,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>$x,CredentialsFilterSensitiveLog:()=>Lx,ExpiredTokenException:()=>Wu,IDPCommunicationErrorException:()=>Zu,IDPRejectedClaimException:()=>Yu,InvalidIdentityTokenException:()=>Xu,MalformedPolicyDocumentException:()=>Qu,PackedPolicyTooLargeException:()=>Ku,RegionDisabledException:()=>Ju,STS:()=>vg,STSClient:()=>As,STSServiceException:()=>dr,__Client:()=>kx.Client,decorateDefaultCredentialProvider:()=>Zae,getDefaultRoleAssumer:()=>WB,getDefaultRoleAssumerWithWebIdentity:()=>QB});var uC=S(()=>{Gu();LB();qB();FB();KB();Eg()});var pC=b(JB=>{"use strict";var fC=Gt(),lC=Le(),ece=require("child_process"),tce=require("util"),rce=(as(),Q(fo)),sce=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let o=new Date;if(new Date(t.Expiration)<o)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let s=t.AccountId;!s&&r?.[e]?.aws_account_id&&(s=r[e].aws_account_id);let n={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...s&&{accountId:s}};return rce.setCredentialFeature(n,"CREDENTIALS_PROCESS","w"),n},nce=async(e,t,r)=>{let s=t[e];if(t[e]){let n=s.credential_process;if(n!==void 0){let o=tce.promisify(fC.externalDataInterceptor?.getTokenRecord?.().exec??ece.exec);try{let{stdout:i}=await o(n),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return sce(e,a,t)}catch(i){throw new lC.CredentialsProviderError(i.message,{logger:r})}}else throw new lC.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new lC.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},oce=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await fC.parseKnownFiles(e);return nce(fC.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};JB.fromProcess=oce});var mC=b(Ps=>{"use strict";var ice=Ps&&Ps.__createBinding||(Object.create?(function(e,t,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]})),ace=Ps&&Ps.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),cce=Ps&&Ps.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var s=[];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[s.length]=n);return s},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var s=e(t),n=0;n<s.length;n++)s[n]!=="default"&&ice(r,t,s[n]);return ace(r,t),r}})();Object.defineProperty(Ps,"__esModule",{value:!0});Ps.fromWebToken=void 0;var dce=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:s,webIdentityToken:n,providerId:o,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:d}=e;if(!d){let{getDefaultRoleAssumerWithWebIdentity:u}=await Promise.resolve().then(()=>cce((uC(),Q(dC))));d=u({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return d({RoleArn:r,RoleSessionName:s??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:c})};Ps.fromWebToken=dce});var XB=b(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.fromTokenFile=void 0;var uce=(as(),Q(fo)),lce=Le(),fce=Gt(),pce=require("fs"),mce=mC(),YB="AWS_WEB_IDENTITY_TOKEN_FILE",hce="AWS_ROLE_ARN",gce="AWS_ROLE_SESSION_NAME",yce=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[YB],s=e?.roleArn??process.env[hce],n=e?.roleSessionName??process.env[gce];if(!r||!s)throw new lce.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,mce.fromWebToken)({...e,webIdentityToken:fce.externalDataInterceptor?.getTokenRecord?.()[r]??(0,pce.readFileSync)(r,{encoding:"ascii"}),roleArn:s,roleSessionName:n})(t);return r===process.env[YB]&&(0,uce.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};xg.fromTokenFile=yce});var hC=b(tl=>{"use strict";var ZB=XB(),eH=mC();Object.keys(ZB).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(tl,e)&&Object.defineProperty(tl,e,{enumerable:!0,get:function(){return ZB[e]}})});Object.keys(eH).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(tl,e)&&Object.defineProperty(tl,e,{enumerable:!0,get:function(){return eH[e]}})})});var iH=b(oH=>{"use strict";var yC=Gt(),rl=Le(),xo=(as(),Q(fo)),Sce=(e,t,r)=>{let s={EcsContainer:async n=>{let{fromHttp:o}=await Promise.resolve().then(()=>y(cx())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>y(Kn()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>rl.chain(o(n??{}),i(n))().then(gC)},Ec2InstanceMetadata:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>y(Kn()));return async()=>o(n)().then(gC)},Environment:async n=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>y(ix()));return async()=>o(n)().then(gC)}};if(e in s)return s[e];throw new rl.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},gC=e=>xo.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),_ce=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(Ece(e,{profile:t,logger:r})||wce(e,{profile:t,logger:r})),Ece=(e,{profile:t,logger:r})=>{let s=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return s&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),s},wce=(e,{profile:t,logger:r})=>{let s=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return s&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),s},bce=async(e,t,r,s={},n)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:i,region:a}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(uC(),dC));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(i&&i in s)throw new rl.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${yC.getProfileName(r)}. Profiles visited: `+Object.keys(s).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${i?`source_profile=[${i}]`:`profile=[${e}]`}`);let c=i?n(i,t,r,{...s,[i]:!0},tH(t[i]??{})):(await Sce(o.credential_source,e,r.logger)(r))();if(tH(o))return c.then(d=>xo.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:u}=o;if(u){if(!r.mfaCodeProvider)throw new rl.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=u,d.TokenCode=await r.mfaCodeProvider(u)}let l=await c;return r.roleAssumer(l,d).then(h=>xo.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},tH=e=>!e.role_arn&&!!e.credential_source,vce=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",xce=async(e,t)=>Promise.resolve().then(()=>y(pC())).then(({fromProcess:r})=>r({...e,profile:t})().then(s=>xo.setCredentialFeature(s,"CREDENTIALS_PROFILE_PROCESS","v"))),Cce=async(e,t,r={})=>{let{fromSSO:s}=await Promise.resolve().then(()=>y(Px()));return s({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(n=>t.sso_session?xo.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO","r"):xo.setCredentialFeature(n,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},Rce=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),rH=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,sH=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return xo.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},Tce=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,Ace=async(e,t)=>Promise.resolve().then(()=>y(hC())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(s=>xo.setCredentialFeature(s,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),nH=async(e,t,r,s={},n=!1)=>{let o=t[e];if(Object.keys(s).length>0&&rH(o))return sH(o,r);if(n||_ce(o,{profile:e,logger:r.logger}))return bce(e,t,r,s,nH);if(rH(o))return sH(o,r);if(Tce(o))return Ace(o,r);if(vce(o))return xce(r,e);if(Rce(o))return await Cce(e,o,r);throw new rl.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},Ice=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let s=await yC.parseKnownFiles(r);return nH(yC.getProfileName({profile:e.profile??t?.profile}),s,r)};oH.fromIni=Ice});var uH=b(Cg=>{"use strict";var SC=ix(),sl=Le(),Pce=Gt(),aH="AWS_EC2_METADATA_DISABLED",Nce=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:s,fromInstanceMetadata:n}=await Promise.resolve().then(()=>y(Kn()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>y(cx()));return sl.chain(o(e),s(e))}return process.env[aH]&&process.env[aH]!=="false"?async()=>{throw new sl.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),n(e))};function Oce(e,t){let r=Dce(e),s,n,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),s)await s;else if(!o||t?.(o))if(o)n||(n=r(a).then(c=>{o=c,n=void 0}));else return s=r(a).then(c=>{o=c,s=void 0}),i(a);return o};return i}var Dce=e=>async t=>{let r;for(let s of e)try{return await s(t)}catch(n){if(r=n,n?.tryNextLink)continue;throw n}throw r},cH=!1,kce=(e={})=>Oce([async()=>{if(e.profile??process.env[Pce.ENV_PROFILE])throw process.env[SC.ENV_KEY]&&process.env[SC.ENV_SECRET]&&(cH||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),cH=!0)),new sl.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),SC.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:s,ssoRegion:n,ssoRoleName:o,ssoSession:i}=e;if(!r&&!s&&!n&&!o&&!i)throw new sl.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>y(Px()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>y(iH()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>y(pC()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>y(hC()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await Nce(e))()),async()=>{throw new sl.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],dH),Mce=e=>e?.expiration!==void 0,dH=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;Cg.credentialsTreatedAsExpired=dH;Cg.credentialsWillNeedRefresh=Mce;Cg.defaultProvider=kce});var CH=b(Rg=>{"use strict";Object.defineProperty(Rg,"__esModule",{value:!0});Rg.ruleSet=void 0;var wH="required",Wr="fn",Qr="argv",wc="ref",lH=!0,fH="isSet",nl="booleanEquals",_c="error",Ec="endpoint",gn="tree",_C="PartitionResult",EC="getAttr",pH={[wH]:!1,type:"string"},mH={[wH]:!0,default:!1,type:"boolean"},hH={[wc]:"Endpoint"},bH={[Wr]:nl,[Qr]:[{[wc]:"UseFIPS"},!0]},vH={[Wr]:nl,[Qr]:[{[wc]:"UseDualStack"},!0]},Gr={},gH={[Wr]:EC,[Qr]:[{[wc]:_C},"supportsFIPS"]},xH={[wc]:_C},yH={[Wr]:nl,[Qr]:[!0,{[Wr]:EC,[Qr]:[xH,"supportsDualStack"]}]},SH=[bH],_H=[vH],EH=[{[wc]:"Region"}],Lce={version:"1.0",parameters:{Region:pH,UseDualStack:mH,UseFIPS:mH,Endpoint:pH},rules:[{conditions:[{[Wr]:fH,[Qr]:[hH]}],rules:[{conditions:SH,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:_c},{conditions:_H,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:_c},{endpoint:{url:hH,properties:Gr,headers:Gr},type:Ec}],type:gn},{conditions:[{[Wr]:fH,[Qr]:EH}],rules:[{conditions:[{[Wr]:"aws.partition",[Qr]:EH,assign:_C}],rules:[{conditions:[bH,vH],rules:[{conditions:[{[Wr]:nl,[Qr]:[lH,gH]},yH],rules:[{endpoint:{url:"https://sqs-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Gr,headers:Gr},type:Ec}],type:gn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:_c}],type:gn},{conditions:SH,rules:[{conditions:[{[Wr]:nl,[Qr]:[gH,lH]}],rules:[{conditions:[{[Wr]:"stringEquals",[Qr]:[{[Wr]:EC,[Qr]:[xH,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sqs.{Region}.amazonaws.com",properties:Gr,headers:Gr},type:Ec},{endpoint:{url:"https://sqs-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Gr,headers:Gr},type:Ec}],type:gn},{error:"FIPS is enabled but this partition does not support FIPS",type:_c}],type:gn},{conditions:_H,rules:[{conditions:[yH],rules:[{endpoint:{url:"https://sqs.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Gr,headers:Gr},type:Ec}],type:gn},{error:"DualStack is enabled but this partition does not support DualStack",type:_c}],type:gn},{endpoint:{url:"https://sqs.{Region}.{PartitionResult#dnsSuffix}",properties:Gr,headers:Gr},type:Ec}],type:gn}],type:gn},{error:"Invalid Configuration: Missing Region",type:_c}]};Rg.ruleSet=Lce});var RH=b(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});Tg.defaultEndpointResolver=void 0;var qce=ss(),wC=ts(),Fce=CH(),$ce=new wC.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Uce=(e,t={})=>$ce.get(e,()=>(0,wC.resolveEndpoint)(Fce.ruleSet,{endpointParams:e,logger:t.logger}));Tg.defaultEndpointResolver=Uce;wC.customEndpointFunctions.aws=qce.awsEndpointFunctions});var IH=b(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});Ag.getRuntimeConfig=void 0;var jce=(Et(),Q(Cs)),Bce=U(),Hce=vr(),TH=qe(),AH=Fe(),zce=ox(),Vce=RH(),Gce=e=>({apiVersion:"2012-11-05",base64Decoder:e?.base64Decoder??TH.fromBase64,base64Encoder:e?.base64Encoder??TH.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Vce.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??zce.defaultSQSHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new jce.AwsSdkSigV4Signer}],logger:e?.logger??new Bce.NoOpLogger,serviceId:e?.serviceId??"SQS",urlParser:e?.urlParser??Hce.parseUrl,utf8Decoder:e?.utf8Decoder??AH.fromUtf8,utf8Encoder:e?.utf8Encoder??AH.toUtf8});Ag.getRuntimeConfig=Gce});var MH=b(Pg=>{"use strict";Object.defineProperty(Pg,"__esModule",{value:!0});Pg.getRuntimeConfig=void 0;var Wce=(An(),Q(Tn)),Qce=Wce.__importDefault(K$()),PH=(Et(),Q(Cs)),Kce=uH(),NH=wu(),Ig=et(),OH=Zs(),DH=Ct(),xi=Zt(),kH=br(),Jce=en(),Yce=Ss(),Xce=IH(),Zce=U(),ede=rn(),tde=U(),rde=e=>{(0,tde.emitWarningIfUnsupportedVersion)(process.version);let t=(0,ede.resolveDefaultsModeConfig)(e),r=()=>t().then(Zce.loadConfigsForDefaultMode),s=(0,Xce.getRuntimeConfig)(e);(0,PH.emitWarningIfUnsupportedVersion)(process.version);let n={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,xi.loadConfig)(PH.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,n),bodyLengthChecker:e?.bodyLengthChecker??Jce.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??Kce.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,NH.createDefaultUserAgentProvider)({serviceId:s.serviceId,clientVersion:Qce.default.version}),maxAttempts:e?.maxAttempts??(0,xi.loadConfig)(DH.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),md5:e?.md5??OH.Hash.bind(null,"md5"),region:e?.region??(0,xi.loadConfig)(Ig.NODE_REGION_CONFIG_OPTIONS,{...Ig.NODE_REGION_CONFIG_FILE_OPTIONS,...n}),requestHandler:kH.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,xi.loadConfig)({...DH.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Yce.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??OH.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??kH.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,xi.loadConfig)(Ig.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,n),useFipsEndpoint:e?.useFipsEndpoint??(0,xi.loadConfig)(Ig.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,n),userAgentAppId:e?.userAgentAppId??(0,xi.loadConfig)(NH.NODE_APP_ID_CONFIG_OPTIONS,n)}};Pg.getRuntimeConfig=rde});var QH=b(G=>{"use strict";var LH=Ls(),sde=qs(),nde=Fs(),il=VF(),qH=Za(),ode=et(),ol=(Me(),Q(hs)),ide=Ys(),He=Wt(),FH=Ct(),T=U(),$H=ox(),ade=MH(),UH=nc(),bC=ye(),Ke=wr(),M=(Et(),Q(Cs)),cde=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sqs"}),Je={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},dde=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(n){let o=t.findIndex(i=>i.schemeId===n.schemeId);o===-1?t.push(n):t.splice(o,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){s=n},credentials(){return s}}},ude=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),lde=(e,t)=>{let r=Object.assign(UH.getAwsRegionExtensionConfiguration(e),T.getDefaultExtensionConfiguration(e),bC.getHttpHandlerExtensionConfiguration(e),dde(e));return t.forEach(s=>s.configure(r)),Object.assign(e,UH.resolveAwsRegionExtensionConfiguration(r),T.resolveDefaultRuntimeConfig(r),bC.resolveHttpHandlerRuntimeConfig(r),ude(r))},bc=class extends T.Client{config;constructor(...[t]){let r=ade.getRuntimeConfig(t||{});super(r),this.initConfig=r;let s=cde(r),n=qH.resolveUserAgentConfig(s),o=FH.resolveRetryConfig(n),i=ode.resolveRegionConfig(o),a=LH.resolveHostHeaderConfig(i),c=He.resolveEndpointConfig(a),d=il.resolveQueueUrlConfig(c),u=$H.resolveHttpAuthSchemeConfig(d),l=lde(u,t?.extensions||[]);this.config=l,this.middlewareStack.use(qH.getUserAgentPlugin(this.config)),this.middlewareStack.use(FH.getRetryPlugin(this.config)),this.middlewareStack.use(ide.getContentLengthPlugin(this.config)),this.middlewareStack.use(LH.getHostHeaderPlugin(this.config)),this.middlewareStack.use(sde.getLoggerPlugin(this.config)),this.middlewareStack.use(nde.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(il.getQueueUrlPlugin(this.config)),this.middlewareStack.use(ol.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:$H.defaultSQSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async h=>new ol.DefaultIdentityProviderConfig({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(ol.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Re=class e extends T.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Ng=class e extends Re{name="InvalidAddress";$fault="client";constructor(t){super({name:"InvalidAddress",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Og=class e extends Re{name="InvalidSecurity";$fault="client";constructor(t){super({name:"InvalidSecurity",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Dg=class e extends Re{name="OverLimit";$fault="client";constructor(t){super({name:"OverLimit",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},kg=class e extends Re{name="QueueDoesNotExist";$fault="client";constructor(t){super({name:"QueueDoesNotExist",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Mg=class e extends Re{name="RequestThrottled";$fault="client";constructor(t){super({name:"RequestThrottled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Lg=class e extends Re{name="UnsupportedOperation";$fault="client";constructor(t){super({name:"UnsupportedOperation",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},qg=class e extends Re{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Fg=class e extends Re{name="MessageNotInflight";$fault="client";constructor(t){super({name:"MessageNotInflight",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},$g=class e extends Re{name="ReceiptHandleIsInvalid";$fault="client";constructor(t){super({name:"ReceiptHandleIsInvalid",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ug=class e extends Re{name="BatchEntryIdsNotDistinct";$fault="client";constructor(t){super({name:"BatchEntryIdsNotDistinct",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},jg=class e extends Re{name="EmptyBatchRequest";$fault="client";constructor(t){super({name:"EmptyBatchRequest",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Bg=class e extends Re{name="InvalidBatchEntryId";$fault="client";constructor(t){super({name:"InvalidBatchEntryId",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Hg=class e extends Re{name="TooManyEntriesInBatchRequest";$fault="client";constructor(t){super({name:"TooManyEntriesInBatchRequest",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},fde={All:"All",ApproximateNumberOfMessages:"ApproximateNumberOfMessages",ApproximateNumberOfMessagesDelayed:"ApproximateNumberOfMessagesDelayed",ApproximateNumberOfMessagesNotVisible:"ApproximateNumberOfMessagesNotVisible",ContentBasedDeduplication:"ContentBasedDeduplication",CreatedTimestamp:"CreatedTimestamp",DeduplicationScope:"DeduplicationScope",DelaySeconds:"DelaySeconds",FifoQueue:"FifoQueue",FifoThroughputLimit:"FifoThroughputLimit",KmsDataKeyReusePeriodSeconds:"KmsDataKeyReusePeriodSeconds",KmsMasterKeyId:"KmsMasterKeyId",LastModifiedTimestamp:"LastModifiedTimestamp",MaximumMessageSize:"MaximumMessageSize",MessageRetentionPeriod:"MessageRetentionPeriod",Policy:"Policy",QueueArn:"QueueArn",ReceiveMessageWaitTimeSeconds:"ReceiveMessageWaitTimeSeconds",RedriveAllowPolicy:"RedriveAllowPolicy",RedrivePolicy:"RedrivePolicy",SqsManagedSseEnabled:"SqsManagedSseEnabled",VisibilityTimeout:"VisibilityTimeout"},zg=class e extends Re{name="InvalidAttributeName";$fault="client";constructor(t){super({name:"InvalidAttributeName",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Vg=class e extends Re{name="InvalidAttributeValue";$fault="client";constructor(t){super({name:"InvalidAttributeValue",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Gg=class e extends Re{name="QueueDeletedRecently";$fault="client";constructor(t){super({name:"QueueDeletedRecently",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Wg=class e extends Re{name="QueueNameExists";$fault="client";constructor(t){super({name:"QueueNameExists",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Qg=class e extends Re{name="InvalidIdFormat";$fault="client";constructor(t){super({name:"InvalidIdFormat",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Kg=class e extends Re{name="PurgeQueueInProgress";$fault="client";constructor(t){super({name:"PurgeQueueInProgress",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Jg=class e extends Re{name="KmsAccessDenied";$fault="client";constructor(t){super({name:"KmsAccessDenied",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Yg=class e extends Re{name="KmsDisabled";$fault="client";constructor(t){super({name:"KmsDisabled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Xg=class e extends Re{name="KmsInvalidKeyUsage";$fault="client";constructor(t){super({name:"KmsInvalidKeyUsage",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Zg=class e extends Re{name="KmsInvalidState";$fault="client";constructor(t){super({name:"KmsInvalidState",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ey=class e extends Re{name="KmsNotFound";$fault="client";constructor(t){super({name:"KmsNotFound",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ty=class e extends Re{name="KmsOptInRequired";$fault="client";constructor(t){super({name:"KmsOptInRequired",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ry=class e extends Re{name="KmsThrottled";$fault="client";constructor(t){super({name:"KmsThrottled",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},pde={AWSTraceHeader:"AWSTraceHeader",All:"All",ApproximateFirstReceiveTimestamp:"ApproximateFirstReceiveTimestamp",ApproximateReceiveCount:"ApproximateReceiveCount",DeadLetterQueueSourceArn:"DeadLetterQueueSourceArn",MessageDeduplicationId:"MessageDeduplicationId",MessageGroupId:"MessageGroupId",SenderId:"SenderId",SentTimestamp:"SentTimestamp",SequenceNumber:"SequenceNumber"},sy=class e extends Re{name="InvalidMessageContents";$fault="client";constructor(t){super({name:"InvalidMessageContents",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},mde={AWSTraceHeader:"AWSTraceHeader"},ny=class e extends Re{name="BatchRequestTooLong";$fault="client";constructor(t){super({name:"BatchRequestTooLong",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},hde=async(e,t)=>{let r=Ze("AddPermission"),s;return s=JSON.stringify(Lue(e)),Xe(t,r,"/",void 0,s)},gde=async(e,t)=>{let r=Ze("CancelMessageMoveTask"),s;return s=JSON.stringify(Fue(e)),Xe(t,r,"/",void 0,s)},yde=async(e,t)=>{let r=Ze("ChangeMessageVisibility"),s;return s=JSON.stringify(Bue(e)),Xe(t,r,"/",void 0,s)},Sde=async(e,t)=>{let r=Ze("ChangeMessageVisibilityBatch"),s;return s=JSON.stringify($ue(e)),Xe(t,r,"/",void 0,s)},_de=async(e,t)=>{let r=Ze("CreateQueue"),s;return s=JSON.stringify(Hue(e)),Xe(t,r,"/",void 0,s)},Ede=async(e,t)=>{let r=Ze("DeleteMessage"),s;return s=JSON.stringify(Wue(e)),Xe(t,r,"/",void 0,s)},wde=async(e,t)=>{let r=Ze("DeleteMessageBatch"),s;return s=JSON.stringify(zue(e)),Xe(t,r,"/",void 0,s)},bde=async(e,t)=>{let r=Ze("DeleteQueue"),s;return s=JSON.stringify(Que(e)),Xe(t,r,"/",void 0,s)},vde=async(e,t)=>{let r=Ze("GetQueueAttributes"),s;return s=JSON.stringify(Kue(e)),Xe(t,r,"/",void 0,s)},xde=async(e,t)=>{let r=Ze("GetQueueUrl"),s;return s=JSON.stringify(Jue(e)),Xe(t,r,"/",void 0,s)},Cde=async(e,t)=>{let r=Ze("ListDeadLetterSourceQueues"),s;return s=JSON.stringify(Yue(e)),Xe(t,r,"/",void 0,s)},Rde=async(e,t)=>{let r=Ze("ListMessageMoveTasks"),s;return s=JSON.stringify(Xue(e)),Xe(t,r,"/",void 0,s)},Tde=async(e,t)=>{let r=Ze("ListQueues"),s;return s=JSON.stringify(Zue(e)),Xe(t,r,"/",void 0,s)},Ade=async(e,t)=>{let r=Ze("ListQueueTags"),s;return s=JSON.stringify(ele(e)),Xe(t,r,"/",void 0,s)},Ide=async(e,t)=>{let r=Ze("PurgeQueue"),s;return s=JSON.stringify(ole(e)),Xe(t,r,"/",void 0,s)},Pde=async(e,t)=>{let r=Ze("ReceiveMessage"),s;return s=JSON.stringify(ile(e)),Xe(t,r,"/",void 0,s)},Nde=async(e,t)=>{let r=Ze("RemovePermission"),s;return s=JSON.stringify(ale(e)),Xe(t,r,"/",void 0,s)},Ode=async(e,t)=>{let r=Ze("SendMessage"),s;return s=JSON.stringify(lle(e,t)),Xe(t,r,"/",void 0,s)},Dde=async(e,t)=>{let r=Ze("SendMessageBatch"),s;return s=JSON.stringify(cle(e,t)),Xe(t,r,"/",void 0,s)},kde=async(e,t)=>{let r=Ze("SetQueueAttributes"),s;return s=JSON.stringify(fle(e)),Xe(t,r,"/",void 0,s)},Mde=async(e,t)=>{let r=Ze("StartMessageMoveTask"),s;return s=JSON.stringify(ple(e)),Xe(t,r,"/",void 0,s)},Lde=async(e,t)=>{let r=Ze("TagQueue"),s;return s=JSON.stringify(hle(e)),Xe(t,r,"/",void 0,s)},qde=async(e,t)=>{let r=Ze("UntagQueue"),s;return s=JSON.stringify(gle(e)),Xe(t,r,"/",void 0,s)},Fde=async(e,t)=>e.statusCode>=300?Ye(e,t):(await T.collectBody(e.body,t),{$metadata:Z(e)}),$de=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},Ude=async(e,t)=>e.statusCode>=300?Ye(e,t):(await T.collectBody(e.body,t),{$metadata:Z(e)}),jde=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},Bde=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},Hde=async(e,t)=>e.statusCode>=300?Ye(e,t):(await T.collectBody(e.body,t),{$metadata:Z(e)}),zde=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},Vde=async(e,t)=>e.statusCode>=300?Ye(e,t):(await T.collectBody(e.body,t),{$metadata:Z(e)}),Gde=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},Wde=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},Qde=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},Kde=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},Jde=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},Yde=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},Xde=async(e,t)=>e.statusCode>=300?Ye(e,t):(await T.collectBody(e.body,t),{$metadata:Z(e)}),Zde=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=ble(r,t),{$metadata:Z(e),...s}},eue=async(e,t)=>e.statusCode>=300?Ye(e,t):(await T.collectBody(e.body,t),{$metadata:Z(e)}),tue=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},rue=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},sue=async(e,t)=>e.statusCode>=300?Ye(e,t):(await T.collectBody(e.body,t),{$metadata:Z(e)}),nue=async(e,t)=>{if(e.statusCode>=300)return Ye(e,t);let r=await M.parseJsonBody(e.body,t),s={};return s=T._json(r),{$metadata:Z(e),...s}},oue=async(e,t)=>e.statusCode>=300?Ye(e,t):(await T.collectBody(e.body,t),{$metadata:Z(e)}),iue=async(e,t)=>e.statusCode>=300?Ye(e,t):(await T.collectBody(e.body,t),{$metadata:Z(e)}),Ye=async(e,t)=>{let r={...e,body:await M.parseJsonErrorBody(e.body,t)};xle(r,e.headers);let s=M.loadRestJsonErrorCode(e,r.body);switch(s){case"InvalidAddress":case"com.amazonaws.sqs#InvalidAddress":throw await uue(r);case"InvalidSecurity":case"com.amazonaws.sqs#InvalidSecurity":throw await gue(r);case"OverLimit":case"com.amazonaws.sqs#OverLimit":throw await Cue(r);case"QueueDoesNotExist":case"com.amazonaws.sqs#QueueDoesNotExist":case"AWS.SimpleQueueService.NonExistentQueue":throw await Aue(r);case"RequestThrottled":case"com.amazonaws.sqs#RequestThrottled":throw await Nue(r);case"UnsupportedOperation":case"com.amazonaws.sqs#UnsupportedOperation":case"AWS.SimpleQueueService.UnsupportedOperation":throw await kue(r);case"ResourceNotFoundException":case"com.amazonaws.sqs#ResourceNotFoundException":throw await Oue(r);case"MessageNotInflight":case"com.amazonaws.sqs#MessageNotInflight":case"AWS.SimpleQueueService.MessageNotInflight":throw await xue(r);case"ReceiptHandleIsInvalid":case"com.amazonaws.sqs#ReceiptHandleIsInvalid":throw await Pue(r);case"BatchEntryIdsNotDistinct":case"com.amazonaws.sqs#BatchEntryIdsNotDistinct":case"AWS.SimpleQueueService.BatchEntryIdsNotDistinct":throw await aue(r);case"EmptyBatchRequest":case"com.amazonaws.sqs#EmptyBatchRequest":case"AWS.SimpleQueueService.EmptyBatchRequest":throw await due(r);case"InvalidBatchEntryId":case"com.amazonaws.sqs#InvalidBatchEntryId":case"AWS.SimpleQueueService.InvalidBatchEntryId":throw await pue(r);case"TooManyEntriesInBatchRequest":case"com.amazonaws.sqs#TooManyEntriesInBatchRequest":case"AWS.SimpleQueueService.TooManyEntriesInBatchRequest":throw await Due(r);case"InvalidAttributeName":case"com.amazonaws.sqs#InvalidAttributeName":throw await lue(r);case"InvalidAttributeValue":case"com.amazonaws.sqs#InvalidAttributeValue":throw await fue(r);case"QueueDeletedRecently":case"com.amazonaws.sqs#QueueDeletedRecently":case"AWS.SimpleQueueService.QueueDeletedRecently":throw await Tue(r);case"QueueNameExists":case"com.amazonaws.sqs#QueueNameExists":case"QueueAlreadyExists":throw await Iue(r);case"InvalidIdFormat":case"com.amazonaws.sqs#InvalidIdFormat":throw await mue(r);case"PurgeQueueInProgress":case"com.amazonaws.sqs#PurgeQueueInProgress":case"AWS.SimpleQueueService.PurgeQueueInProgress":throw await Rue(r);case"KmsAccessDenied":case"com.amazonaws.sqs#KmsAccessDenied":case"KMS.AccessDeniedException":throw await yue(r);case"KmsDisabled":case"com.amazonaws.sqs#KmsDisabled":case"KMS.DisabledException":throw await Sue(r);case"KmsInvalidKeyUsage":case"com.amazonaws.sqs#KmsInvalidKeyUsage":case"KMS.InvalidKeyUsageException":throw await _ue(r);case"KmsInvalidState":case"com.amazonaws.sqs#KmsInvalidState":case"KMS.InvalidStateException":throw await Eue(r);case"KmsNotFound":case"com.amazonaws.sqs#KmsNotFound":case"KMS.NotFoundException":throw await wue(r);case"KmsOptInRequired":case"com.amazonaws.sqs#KmsOptInRequired":case"KMS.OptInRequired":throw await bue(r);case"KmsThrottled":case"com.amazonaws.sqs#KmsThrottled":case"KMS.ThrottlingException":throw await vue(r);case"InvalidMessageContents":case"com.amazonaws.sqs#InvalidMessageContents":throw await hue(r);case"BatchRequestTooLong":case"com.amazonaws.sqs#BatchRequestTooLong":case"AWS.SimpleQueueService.BatchRequestTooLong":throw await cue(r);default:let n=r.body;return vle({output:e,parsedBody:n,errorCode:s})}},aue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Ug({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},cue=async(e,t)=>{let r=e.body,s=T._json(r),n=new ny({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},due=async(e,t)=>{let r=e.body,s=T._json(r),n=new jg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},uue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Ng({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},lue=async(e,t)=>{let r=e.body,s=T._json(r),n=new zg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},fue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Vg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},pue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Bg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},mue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Qg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},hue=async(e,t)=>{let r=e.body,s=T._json(r),n=new sy({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},gue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Og({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},yue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Jg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Sue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Yg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},_ue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Xg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Eue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Zg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},wue=async(e,t)=>{let r=e.body,s=T._json(r),n=new ey({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},bue=async(e,t)=>{let r=e.body,s=T._json(r),n=new ty({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},vue=async(e,t)=>{let r=e.body,s=T._json(r),n=new ry({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},xue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Fg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Cue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Dg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Rue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Kg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Tue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Gg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Aue=async(e,t)=>{let r=e.body,s=T._json(r),n=new kg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Iue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Wg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Pue=async(e,t)=>{let r=e.body,s=T._json(r),n=new $g({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Nue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Mg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Oue=async(e,t)=>{let r=e.body,s=T._json(r),n=new qg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Due=async(e,t)=>{let r=e.body,s=T._json(r),n=new Hg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},kue=async(e,t)=>{let r=e.body,s=T._json(r),n=new Lg({$metadata:Z(e),...s});return T.decorateServiceException(n,r)},Mue=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),Lue=(e,t)=>T.take(e,{AWSAccountIds:r=>que(r),Actions:r=>Mue(r),Label:M._toStr,QueueUrl:M._toStr}),jH=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),que=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),BH=(e,t)=>e.filter(r=>r!=null).map(r=>t.base64Encoder(r)),Fue=(e,t)=>T.take(e,{TaskHandle:M._toStr}),$ue=(e,t)=>T.take(e,{Entries:r=>jue(r),QueueUrl:M._toStr}),Uue=(e,t)=>T.take(e,{Id:M._toStr,ReceiptHandle:M._toStr,VisibilityTimeout:M._toNum}),jue=(e,t)=>e.filter(r=>r!=null).map(r=>Uue(r)),Bue=(e,t)=>T.take(e,{QueueUrl:M._toStr,ReceiptHandle:M._toStr,VisibilityTimeout:M._toNum}),Hue=(e,t)=>T.take(e,{Attributes:r=>VH(r),QueueName:M._toStr,tags:r=>WH(r)}),zue=(e,t)=>T.take(e,{Entries:r=>Gue(r),QueueUrl:M._toStr}),Vue=(e,t)=>T.take(e,{Id:M._toStr,ReceiptHandle:M._toStr}),Gue=(e,t)=>e.filter(r=>r!=null).map(r=>Vue(r)),Wue=(e,t)=>T.take(e,{QueueUrl:M._toStr,ReceiptHandle:M._toStr}),Que=(e,t)=>T.take(e,{QueueUrl:M._toStr}),Kue=(e,t)=>T.take(e,{AttributeNames:r=>jH(r),QueueUrl:M._toStr}),Jue=(e,t)=>T.take(e,{QueueName:M._toStr,QueueOwnerAWSAccountId:M._toStr}),Yue=(e,t)=>T.take(e,{MaxResults:M._toNum,NextToken:M._toStr,QueueUrl:M._toStr}),Xue=(e,t)=>T.take(e,{MaxResults:M._toNum,SourceArn:M._toStr}),Zue=(e,t)=>T.take(e,{MaxResults:M._toNum,NextToken:M._toStr,QueueNamePrefix:M._toStr}),ele=(e,t)=>T.take(e,{QueueUrl:M._toStr}),tle=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),rle=(e,t)=>T.take(e,{BinaryListValues:r=>BH(r,t),BinaryValue:t.base64Encoder,DataType:M._toStr,StringListValues:r=>GH(r),StringValue:M._toStr}),HH=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=rle(n,t)),r),{}),zH=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=nle(n,t)),r),{}),sle=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),nle=(e,t)=>T.take(e,{BinaryListValues:r=>BH(r,t),BinaryValue:t.base64Encoder,DataType:M._toStr,StringListValues:r=>GH(r),StringValue:M._toStr}),ole=(e,t)=>T.take(e,{QueueUrl:M._toStr}),VH=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=M._toStr(n)),r),{}),ile=(e,t)=>T.take(e,{AttributeNames:r=>jH(r),MaxNumberOfMessages:M._toNum,MessageAttributeNames:r=>tle(r),MessageSystemAttributeNames:r=>sle(r),QueueUrl:M._toStr,ReceiveRequestAttemptId:M._toStr,VisibilityTimeout:M._toNum,WaitTimeSeconds:M._toNum}),ale=(e,t)=>T.take(e,{Label:M._toStr,QueueUrl:M._toStr}),cle=(e,t)=>T.take(e,{Entries:r=>ule(r,t),QueueUrl:M._toStr}),dle=(e,t)=>T.take(e,{DelaySeconds:M._toNum,Id:M._toStr,MessageAttributes:r=>HH(r,t),MessageBody:M._toStr,MessageDeduplicationId:M._toStr,MessageGroupId:M._toStr,MessageSystemAttributes:r=>zH(r,t)}),ule=(e,t)=>e.filter(r=>r!=null).map(r=>dle(r,t)),lle=(e,t)=>T.take(e,{DelaySeconds:M._toNum,MessageAttributes:r=>HH(r,t),MessageBody:M._toStr,MessageDeduplicationId:M._toStr,MessageGroupId:M._toStr,MessageSystemAttributes:r=>zH(r,t),QueueUrl:M._toStr}),fle=(e,t)=>T.take(e,{Attributes:r=>VH(r),QueueUrl:M._toStr}),ple=(e,t)=>T.take(e,{DestinationArn:M._toStr,MaxNumberOfMessagesPerSecond:M._toNum,SourceArn:M._toStr}),GH=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),mle=(e,t)=>e.filter(r=>r!=null).map(r=>M._toStr(r)),WH=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=M._toStr(n)),r),{}),hle=(e,t)=>T.take(e,{QueueUrl:M._toStr,Tags:r=>WH(r)}),gle=(e,t)=>T.take(e,{QueueUrl:M._toStr,TagKeys:r=>mle(r)}),yle=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>t.base64Decoder(s)),Sle=(e,t)=>T.take(e,{Attributes:T._json,Body:T.expectString,MD5OfBody:T.expectString,MD5OfMessageAttributes:T.expectString,MessageAttributes:r=>Ele(r,t),MessageId:T.expectString,ReceiptHandle:T.expectString}),_le=(e,t)=>T.take(e,{BinaryListValues:r=>yle(r,t),BinaryValue:t.base64Decoder,DataType:T.expectString,StringListValues:T._json,StringValue:T.expectString}),Ele=(e,t)=>Object.entries(e).reduce((r,[s,n])=>(n===null||(r[s]=_le(n,t)),r),{}),wle=(e,t)=>(e||[]).filter(s=>s!=null).map(s=>Sle(s,t)),ble=(e,t)=>T.take(e,{Messages:r=>wle(r,t)}),Z=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),vle=T.withBaseException(Re),Xe=async(e,t,r,s,n)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.body=n),new bC.HttpRequest(d)};function Ze(e){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`AmazonSQS.${e}`,"x-amzn-query-mode":"true"}}var xle=(e,t)=>{let r=t["x-amzn-query-error"];if(e.body!==void 0&&r!=null){let[s,n]=r.split(";"),o=Object.entries(e.body),i={Type:n,Code:s};Object.assign(e.body,i);for(let[a,c]of o)i[a]=c;delete i.__type,e.body.Error=i}},oy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","AddPermission",{}).n("SQSClient","AddPermissionCommand").f(void 0,void 0).ser(hde).de(Fde).build(){},iy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","CancelMessageMoveTask",{}).n("SQSClient","CancelMessageMoveTaskCommand").f(void 0,void 0).ser(gde).de($de).build(){},ay=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ChangeMessageVisibilityBatch",{}).n("SQSClient","ChangeMessageVisibilityBatchCommand").f(void 0,void 0).ser(Sde).de(jde).build(){},cy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ChangeMessageVisibility",{}).n("SQSClient","ChangeMessageVisibilityCommand").f(void 0,void 0).ser(yde).de(Ude).build(){},dy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","CreateQueue",{}).n("SQSClient","CreateQueueCommand").f(void 0,void 0).ser(_de).de(Bde).build(){},uy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteMessageBatch",{}).n("SQSClient","DeleteMessageBatchCommand").f(void 0,void 0).ser(wde).de(zde).build(){},ly=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteMessage",{}).n("SQSClient","DeleteMessageCommand").f(void 0,void 0).ser(Ede).de(Hde).build(){},fy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","DeleteQueue",{}).n("SQSClient","DeleteQueueCommand").f(void 0,void 0).ser(bde).de(Vde).build(){},py=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","GetQueueAttributes",{}).n("SQSClient","GetQueueAttributesCommand").f(void 0,void 0).ser(vde).de(Gde).build(){},my=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","GetQueueUrl",{}).n("SQSClient","GetQueueUrlCommand").f(void 0,void 0).ser(xde).de(Wde).build(){},al=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListDeadLetterSourceQueues",{}).n("SQSClient","ListDeadLetterSourceQueuesCommand").f(void 0,void 0).ser(Cde).de(Qde).build(){},hy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListMessageMoveTasks",{}).n("SQSClient","ListMessageMoveTasksCommand").f(void 0,void 0).ser(Rde).de(Kde).build(){},cl=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListQueues",{}).n("SQSClient","ListQueuesCommand").f(void 0,void 0).ser(Tde).de(Jde).build(){},gy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","ListQueueTags",{}).n("SQSClient","ListQueueTagsCommand").f(void 0,void 0).ser(Ade).de(Yde).build(){},yy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","PurgeQueue",{}).n("SQSClient","PurgeQueueCommand").f(void 0,void 0).ser(Ide).de(Xde).build(){},Sy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions()),il.getReceiveMessagePlugin(s)]}).s("AmazonSQS","ReceiveMessage",{}).n("SQSClient","ReceiveMessageCommand").f(void 0,void 0).ser(Pde).de(Zde).build(){},_y=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","RemovePermission",{}).n("SQSClient","RemovePermissionCommand").f(void 0,void 0).ser(Nde).de(eue).build(){},Ey=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions()),il.getSendMessageBatchPlugin(s)]}).s("AmazonSQS","SendMessageBatch",{}).n("SQSClient","SendMessageBatchCommand").f(void 0,void 0).ser(Dde).de(rue).build(){},wy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions()),il.getSendMessagePlugin(s)]}).s("AmazonSQS","SendMessage",{}).n("SQSClient","SendMessageCommand").f(void 0,void 0).ser(Ode).de(tue).build(){},by=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","SetQueueAttributes",{}).n("SQSClient","SetQueueAttributesCommand").f(void 0,void 0).ser(kde).de(sue).build(){},vy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","StartMessageMoveTask",{}).n("SQSClient","StartMessageMoveTaskCommand").f(void 0,void 0).ser(Mde).de(nue).build(){},xy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","TagQueue",{}).n("SQSClient","TagQueueCommand").f(void 0,void 0).ser(Lde).de(oue).build(){},Cy=class extends T.Command.classBuilder().ep(Je).m(function(t,r,s,n){return[Ke.getSerdePlugin(s,this.serialize,this.deserialize),He.getEndpointPlugin(s,t.getEndpointParameterInstructions())]}).s("AmazonSQS","UntagQueue",{}).n("SQSClient","UntagQueueCommand").f(void 0,void 0).ser(qde).de(iue).build(){},Cle={AddPermissionCommand:oy,CancelMessageMoveTaskCommand:iy,ChangeMessageVisibilityCommand:cy,ChangeMessageVisibilityBatchCommand:ay,CreateQueueCommand:dy,DeleteMessageCommand:ly,DeleteMessageBatchCommand:uy,DeleteQueueCommand:fy,GetQueueAttributesCommand:py,GetQueueUrlCommand:my,ListDeadLetterSourceQueuesCommand:al,ListMessageMoveTasksCommand:hy,ListQueuesCommand:cl,ListQueueTagsCommand:gy,PurgeQueueCommand:yy,ReceiveMessageCommand:Sy,RemovePermissionCommand:_y,SendMessageCommand:wy,SendMessageBatchCommand:Ey,SetQueueAttributesCommand:by,StartMessageMoveTaskCommand:vy,TagQueueCommand:xy,UntagQueueCommand:Cy},Ry=class extends bc{};T.createAggregatedClient(Cle,Ry);var Rle=ol.createPaginator(bc,al,"NextToken","NextToken","MaxResults"),Tle=ol.createPaginator(bc,cl,"NextToken","NextToken","MaxResults");Object.defineProperty(G,"$Command",{enumerable:!0,get:function(){return T.Command}});Object.defineProperty(G,"__Client",{enumerable:!0,get:function(){return T.Client}});G.AddPermissionCommand=oy;G.BatchEntryIdsNotDistinct=Ug;G.BatchRequestTooLong=ny;G.CancelMessageMoveTaskCommand=iy;G.ChangeMessageVisibilityBatchCommand=ay;G.ChangeMessageVisibilityCommand=cy;G.CreateQueueCommand=dy;G.DeleteMessageBatchCommand=uy;G.DeleteMessageCommand=ly;G.DeleteQueueCommand=fy;G.EmptyBatchRequest=jg;G.GetQueueAttributesCommand=py;G.GetQueueUrlCommand=my;G.InvalidAddress=Ng;G.InvalidAttributeName=zg;G.InvalidAttributeValue=Vg;G.InvalidBatchEntryId=Bg;G.InvalidIdFormat=Qg;G.InvalidMessageContents=sy;G.InvalidSecurity=Og;G.KmsAccessDenied=Jg;G.KmsDisabled=Yg;G.KmsInvalidKeyUsage=Xg;G.KmsInvalidState=Zg;G.KmsNotFound=ey;G.KmsOptInRequired=ty;G.KmsThrottled=ry;G.ListDeadLetterSourceQueuesCommand=al;G.ListMessageMoveTasksCommand=hy;G.ListQueueTagsCommand=gy;G.ListQueuesCommand=cl;G.MessageNotInflight=Fg;G.MessageSystemAttributeName=pde;G.MessageSystemAttributeNameForSends=mde;G.OverLimit=Dg;G.PurgeQueueCommand=yy;G.PurgeQueueInProgress=Kg;G.QueueAttributeName=fde;G.QueueDeletedRecently=Gg;G.QueueDoesNotExist=kg;G.QueueNameExists=Wg;G.ReceiptHandleIsInvalid=$g;G.ReceiveMessageCommand=Sy;G.RemovePermissionCommand=_y;G.RequestThrottled=Mg;G.ResourceNotFoundException=qg;G.SQS=Ry;G.SQSClient=bc;G.SQSServiceException=Re;G.SendMessageBatchCommand=Ey;G.SendMessageCommand=wy;G.SetQueueAttributesCommand=by;G.StartMessageMoveTaskCommand=vy;G.TagQueueCommand=xy;G.TooManyEntriesInBatchRequest=Hg;G.UnsupportedOperation=Lg;G.UntagQueueCommand=Cy;G.paginateListDeadLetterSourceQueues=Rle;G.paginateListQueues=Tle});var Ole={};dt(Ole,{handler:()=>Nle});module.exports=Q(Ole);var Jr={};dt(Jr,{BRAND:()=>r4,DIRTY:()=>To,EMPTY_PATH:()=>kz,INVALID:()=>X,NEVER:()=>U4,OK:()=>Ot,ParseStatus:()=>bt,Schema:()=>de,ZodAny:()=>wn,ZodArray:()=>ks,ZodBigInt:()=>Io,ZodBoolean:()=>Po,ZodBranded:()=>xc,ZodCatch:()=>jo,ZodDate:()=>No,ZodDefault:()=>Uo,ZodDiscriminatedUnion:()=>fl,ZodEffects:()=>Er,ZodEnum:()=>Fo,ZodError:()=>Nt,ZodFirstPartyTypeKind:()=>ee,ZodFunction:()=>ml,ZodIntersection:()=>Mo,ZodIssueCode:()=>D,ZodLazy:()=>Lo,ZodLiteral:()=>qo,ZodMap:()=>Ni,ZodNaN:()=>Di,ZodNativeEnum:()=>$o,ZodNever:()=>Kr,ZodNull:()=>Do,ZodNullable:()=>fs,ZodNumber:()=>Ao,ZodObject:()=>Kt,ZodOptional:()=>Sr,ZodParsedType:()=>H,ZodPipeline:()=>Cc,ZodPromise:()=>bn,ZodReadonly:()=>Bo,ZodRecord:()=>pl,ZodSchema:()=>de,ZodSet:()=>Oi,ZodString:()=>En,ZodSymbol:()=>Ii,ZodTransformer:()=>Er,ZodTuple:()=>ls,ZodType:()=>de,ZodUndefined:()=>Oo,ZodUnion:()=>ko,ZodUnknown:()=>Ds,ZodVoid:()=>Pi,addIssueToContext:()=>F,any:()=>l4,array:()=>h4,bigint:()=>i4,boolean:()=>UC,coerce:()=>$4,custom:()=>qC,date:()=>a4,datetimeRegex:()=>MC,defaultErrorMap:()=>Ns,discriminatedUnion:()=>_4,effect:()=>N4,enum:()=>A4,function:()=>C4,getErrorMap:()=>Ri,getParsedType:()=>us,instanceof:()=>n4,intersection:()=>E4,isAborted:()=>ul,isAsync:()=>Ti,isDirty:()=>ll,isValid:()=>_n,late:()=>s4,lazy:()=>R4,literal:()=>T4,makeIssue:()=>vc,map:()=>v4,nan:()=>o4,nativeEnum:()=>I4,never:()=>p4,null:()=>u4,nullable:()=>D4,number:()=>$C,object:()=>g4,objectUtil:()=>Dy,oboolean:()=>F4,onumber:()=>q4,optional:()=>O4,ostring:()=>L4,pipeline:()=>M4,preprocess:()=>k4,promise:()=>P4,quotelessJson:()=>Nz,record:()=>b4,set:()=>x4,setErrorMap:()=>Dz,strictObject:()=>y4,string:()=>FC,symbol:()=>c4,transformer:()=>N4,tuple:()=>w4,undefined:()=>d4,union:()=>S4,unknown:()=>f4,util:()=>ge,void:()=>m4});var ge;(function(e){e.assertEqual=n=>{};function t(n){}e.assertIs=t;function r(n){throw new Error}e.assertNever=r,e.arrayToEnum=n=>{let o={};for(let i of n)o[i]=i;return o},e.getValidEnumValues=n=>{let o=e.objectKeys(n).filter(a=>typeof n[n[a]]!="number"),i={};for(let a of o)i[a]=n[a];return e.objectValues(i)},e.objectValues=n=>e.objectKeys(n).map(function(o){return n[o]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let o=[];for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&o.push(i);return o},e.find=(n,o)=>{for(let i of n)if(o(i))return i},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function s(n,o=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(o)}e.joinValues=s,e.jsonStringifyReplacer=(n,o)=>typeof o=="bigint"?o.toString():o})(ge||(ge={}));var Dy;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(Dy||(Dy={}));var H=ge.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),us=e=>{switch(typeof e){case"undefined":return H.undefined;case"string":return H.string;case"number":return Number.isNaN(e)?H.nan:H.number;case"boolean":return H.boolean;case"function":return H.function;case"bigint":return H.bigint;case"symbol":return H.symbol;case"object":return Array.isArray(e)?H.array:e===null?H.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?H.promise:typeof Map<"u"&&e instanceof Map?H.map:typeof Set<"u"&&e instanceof Set?H.set:typeof Date<"u"&&e instanceof Date?H.date:H.object;default:return H.unknown}};var D=ge.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Nz=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),Nt=class e extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){let r=t||function(o){return o.message},s={_errors:[]},n=o=>{for(let i of o.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)s._errors.push(r(i));else{let a=s,c=0;for(;c<i.path.length;){let d=i.path[c];c===i.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(r(i))):a[d]=a[d]||{_errors:[]},a=a[d],c++}}};return n(this),s}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ge.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},s=[];for(let n of this.issues)if(n.path.length>0){let o=n.path[0];r[o]=r[o]||[],r[o].push(t(n))}else s.push(t(n));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}};Nt.create=e=>new Nt(e);var Oz=(e,t)=>{let r;switch(e.code){case D.invalid_type:e.received===H.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case D.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,ge.jsonStringifyReplacer)}`;break;case D.unrecognized_keys:r=`Unrecognized key(s) in object: ${ge.joinValues(e.keys,", ")}`;break;case D.invalid_union:r="Invalid input";break;case D.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ge.joinValues(e.options)}`;break;case D.invalid_enum_value:r=`Invalid enum value. Expected ${ge.joinValues(e.options)}, received '${e.received}'`;break;case D.invalid_arguments:r="Invalid function arguments";break;case D.invalid_return_type:r="Invalid function return type";break;case D.invalid_date:r="Invalid date";break;case D.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:ge.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case D.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case D.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case D.custom:r="Invalid input";break;case D.invalid_intersection_types:r="Intersection results could not be merged";break;case D.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case D.not_finite:r="Number must be finite";break;default:r=t.defaultError,ge.assertNever(e)}return{message:r}},Ns=Oz;var PC=Ns;function Dz(e){PC=e}function Ri(){return PC}var vc=e=>{let{data:t,path:r,errorMaps:s,issueData:n}=e,o=[...r,...n.path||[]],i={...n,path:o};if(n.message!==void 0)return{...n,path:o,message:n.message};let a="",c=s.filter(d=>!!d).slice().reverse();for(let d of c)a=d(i,{data:t,defaultError:a}).message;return{...n,path:o,message:a}},kz=[];function F(e,t){let r=Ri(),s=vc({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Ns?void 0:Ns].filter(n=>!!n)});e.common.issues.push(s)}var bt=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){let s=[];for(let n of r){if(n.status==="aborted")return X;n.status==="dirty"&&t.dirty(),s.push(n.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,r){let s=[];for(let n of r){let o=await n.key,i=await n.value;s.push({key:o,value:i})}return e.mergeObjectSync(t,s)}static mergeObjectSync(t,r){let s={};for(let n of r){let{key:o,value:i}=n;if(o.status==="aborted"||i.status==="aborted")return X;o.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof i.value<"u"||n.alwaysSet)&&(s[o.value]=i.value)}return{status:t.value,value:s}}},X=Object.freeze({status:"aborted"}),To=e=>({status:"dirty",value:e}),Ot=e=>({status:"valid",value:e}),ul=e=>e.status==="aborted",ll=e=>e.status==="dirty",_n=e=>e.status==="valid",Ti=e=>typeof Promise<"u"&&e instanceof Promise;var W;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(W||(W={}));var _r=class{constructor(t,r,s,n){this._cachedPath=[],this.parent=t,this.data=r,this._path=s,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},NC=(e,t)=>{if(_n(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Nt(e.common.issues);return this._error=r,this._error}}};function ie(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:s,description:n}=e;if(t&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(i,a)=>{let{message:c}=e;return i.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??s??a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:c??r??a.defaultError}},description:n}}var de=class{get description(){return this._def.description}_getType(t){return us(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:us(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new bt,ctx:{common:t.parent.common,data:t.data,parsedType:us(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let r=this._parse(t);if(Ti(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){let r=this._parse(t);return Promise.resolve(r)}parse(t,r){let s=this.safeParse(t,r);if(s.success)return s.data;throw s.error}safeParse(t,r){let s={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:us(t)},n=this._parseSync({data:t,path:s.path,parent:s});return NC(s,n)}"~validate"(t){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:us(t)};if(!this["~standard"].async)try{let s=this._parseSync({data:t,path:[],parent:r});return _n(s)?{value:s.value}:{issues:r.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(s=>_n(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(t,r){let s=await this.safeParseAsync(t,r);if(s.success)return s.data;throw s.error}async safeParseAsync(t,r){let s={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:us(t)},n=this._parse({data:t,path:s.path,parent:s}),o=await(Ti(n)?n:Promise.resolve(n));return NC(s,o)}refine(t,r){let s=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,o)=>{let i=t(n),a=()=>o.addIssue({code:D.custom,...s(n)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(t,r){return this._refinement((s,n)=>t(s)?!0:(n.addIssue(typeof r=="function"?r(s,n):r),!1))}_refinement(t){return new Er({schema:this,typeName:ee.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Sr.create(this,this._def)}nullable(){return fs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ks.create(this)}promise(){return bn.create(this,this._def)}or(t){return ko.create([this,t],this._def)}and(t){return Mo.create(this,t,this._def)}transform(t){return new Er({...ie(this._def),schema:this,typeName:ee.ZodEffects,effect:{type:"transform",transform:t}})}default(t){let r=typeof t=="function"?t:()=>t;return new Uo({...ie(this._def),innerType:this,defaultValue:r,typeName:ee.ZodDefault})}brand(){return new xc({typeName:ee.ZodBranded,type:this,...ie(this._def)})}catch(t){let r=typeof t=="function"?t:()=>t;return new jo({...ie(this._def),innerType:this,catchValue:r,typeName:ee.ZodCatch})}describe(t){let r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Cc.create(this,t)}readonly(){return Bo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Mz=/^c[^\s-]{8,}$/i,Lz=/^[0-9a-z]+$/,qz=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Fz=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$z=/^[a-z0-9_-]{21}$/i,Uz=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,jz=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Bz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Hz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",ky,zz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Vz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Gz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Wz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Qz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Kz=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,DC="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Jz=new RegExp(`^${DC}$`);function kC(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function Yz(e){return new RegExp(`^${kC(e)}$`)}function MC(e){let t=`${DC}T${kC(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Xz(e,t){return!!((t==="v4"||!t)&&zz.test(e)||(t==="v6"||!t)&&Gz.test(e))}function Zz(e,t){if(!Uz.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(s));return!(typeof n!="object"||n===null||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)}catch{return!1}}function e4(e,t){return!!((t==="v4"||!t)&&Vz.test(e)||(t==="v6"||!t)&&Wz.test(e))}var En=class e extends de{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==H.string){let o=this._getOrReturnCtx(t);return F(o,{code:D.invalid_type,expected:H.string,received:o.parsedType}),X}let s=new bt,n;for(let o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(n=this._getOrReturnCtx(t,n),F(n,{code:D.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="max")t.data.length>o.value&&(n=this._getOrReturnCtx(t,n),F(n,{code:D.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="length"){let i=t.data.length>o.value,a=t.data.length<o.value;(i||a)&&(n=this._getOrReturnCtx(t,n),i?F(n,{code:D.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&F(n,{code:D.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),s.dirty())}else if(o.kind==="email")Bz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"email",code:D.invalid_string,message:o.message}),s.dirty());else if(o.kind==="emoji")ky||(ky=new RegExp(Hz,"u")),ky.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"emoji",code:D.invalid_string,message:o.message}),s.dirty());else if(o.kind==="uuid")Fz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"uuid",code:D.invalid_string,message:o.message}),s.dirty());else if(o.kind==="nanoid")$z.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"nanoid",code:D.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid")Mz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"cuid",code:D.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid2")Lz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"cuid2",code:D.invalid_string,message:o.message}),s.dirty());else if(o.kind==="ulid")qz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"ulid",code:D.invalid_string,message:o.message}),s.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),F(n,{validation:"url",code:D.invalid_string,message:o.message}),s.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"regex",code:D.invalid_string,message:o.message}),s.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(n=this._getOrReturnCtx(t,n),F(n,{code:D.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),s.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(n=this._getOrReturnCtx(t,n),F(n,{code:D.invalid_string,validation:{startsWith:o.value},message:o.message}),s.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(n=this._getOrReturnCtx(t,n),F(n,{code:D.invalid_string,validation:{endsWith:o.value},message:o.message}),s.dirty()):o.kind==="datetime"?MC(o).test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{code:D.invalid_string,validation:"datetime",message:o.message}),s.dirty()):o.kind==="date"?Jz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{code:D.invalid_string,validation:"date",message:o.message}),s.dirty()):o.kind==="time"?Yz(o).test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{code:D.invalid_string,validation:"time",message:o.message}),s.dirty()):o.kind==="duration"?jz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"duration",code:D.invalid_string,message:o.message}),s.dirty()):o.kind==="ip"?Xz(t.data,o.version)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"ip",code:D.invalid_string,message:o.message}),s.dirty()):o.kind==="jwt"?Zz(t.data,o.alg)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"jwt",code:D.invalid_string,message:o.message}),s.dirty()):o.kind==="cidr"?e4(t.data,o.version)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"cidr",code:D.invalid_string,message:o.message}),s.dirty()):o.kind==="base64"?Qz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"base64",code:D.invalid_string,message:o.message}),s.dirty()):o.kind==="base64url"?Kz.test(t.data)||(n=this._getOrReturnCtx(t,n),F(n,{validation:"base64url",code:D.invalid_string,message:o.message}),s.dirty()):ge.assertNever(o);return{status:s.value,value:t.data}}_regex(t,r,s){return this.refinement(n=>t.test(n),{validation:r,code:D.invalid_string,...W.errToObj(s)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...W.errToObj(t)})}url(t){return this._addCheck({kind:"url",...W.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...W.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...W.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...W.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...W.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...W.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...W.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...W.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...W.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...W.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...W.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...W.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...W.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...W.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...W.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...W.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...W.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...W.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...W.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...W.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...W.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...W.errToObj(r)})}nonempty(t){return this.min(1,W.errToObj(t))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};En.create=e=>new En({checks:[],typeName:ee.ZodString,coerce:e?.coerce??!1,...ie(e)});function t4(e,t){let r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,n=r>s?r:s,o=Number.parseInt(e.toFixed(n).replace(".","")),i=Number.parseInt(t.toFixed(n).replace(".",""));return o%i/10**n}var Ao=class e extends de{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==H.number){let o=this._getOrReturnCtx(t);return F(o,{code:D.invalid_type,expected:H.number,received:o.parsedType}),X}let s,n=new bt;for(let o of this._def.checks)o.kind==="int"?ge.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),F(s,{code:D.invalid_type,expected:"integer",received:"float",message:o.message}),n.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(s=this._getOrReturnCtx(t,s),F(s,{code:D.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(s=this._getOrReturnCtx(t,s),F(s,{code:D.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="multipleOf"?t4(t.data,o.value)!==0&&(s=this._getOrReturnCtx(t,s),F(s,{code:D.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),F(s,{code:D.not_finite,message:o.message}),n.dirty()):ge.assertNever(o);return{status:n.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,W.toString(r))}gt(t,r){return this.setLimit("min",t,!1,W.toString(r))}lte(t,r){return this.setLimit("max",t,!0,W.toString(r))}lt(t,r){return this.setLimit("max",t,!1,W.toString(r))}setLimit(t,r,s,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:W.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:W.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:W.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:W.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:W.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:W.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:W.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:W.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:W.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:W.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ge.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(r)&&Number.isFinite(t)}};Ao.create=e=>new Ao({checks:[],typeName:ee.ZodNumber,coerce:e?.coerce||!1,...ie(e)});var Io=class e extends de{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==H.bigint)return this._getInvalidInput(t);let s,n=new bt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(s=this._getOrReturnCtx(t,s),F(s,{code:D.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(s=this._getOrReturnCtx(t,s),F(s,{code:D.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),F(s,{code:D.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):ge.assertNever(o);return{status:n.value,value:t.data}}_getInvalidInput(t){let r=this._getOrReturnCtx(t);return F(r,{code:D.invalid_type,expected:H.bigint,received:r.parsedType}),X}gte(t,r){return this.setLimit("min",t,!0,W.toString(r))}gt(t,r){return this.setLimit("min",t,!1,W.toString(r))}lte(t,r){return this.setLimit("max",t,!0,W.toString(r))}lt(t,r){return this.setLimit("max",t,!1,W.toString(r))}setLimit(t,r,s,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:W.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:W.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:W.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:W.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:W.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:W.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}};Io.create=e=>new Io({checks:[],typeName:ee.ZodBigInt,coerce:e?.coerce??!1,...ie(e)});var Po=class extends de{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==H.boolean){let s=this._getOrReturnCtx(t);return F(s,{code:D.invalid_type,expected:H.boolean,received:s.parsedType}),X}return Ot(t.data)}};Po.create=e=>new Po({typeName:ee.ZodBoolean,coerce:e?.coerce||!1,...ie(e)});var No=class e extends de{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==H.date){let o=this._getOrReturnCtx(t);return F(o,{code:D.invalid_type,expected:H.date,received:o.parsedType}),X}if(Number.isNaN(t.data.getTime())){let o=this._getOrReturnCtx(t);return F(o,{code:D.invalid_date}),X}let s=new bt,n;for(let o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(n=this._getOrReturnCtx(t,n),F(n,{code:D.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),s.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(n=this._getOrReturnCtx(t,n),F(n,{code:D.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),s.dirty()):ge.assertNever(o);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:W.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:W.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}};No.create=e=>new No({checks:[],coerce:e?.coerce||!1,typeName:ee.ZodDate,...ie(e)});var Ii=class extends de{_parse(t){if(this._getType(t)!==H.symbol){let s=this._getOrReturnCtx(t);return F(s,{code:D.invalid_type,expected:H.symbol,received:s.parsedType}),X}return Ot(t.data)}};Ii.create=e=>new Ii({typeName:ee.ZodSymbol,...ie(e)});var Oo=class extends de{_parse(t){if(this._getType(t)!==H.undefined){let s=this._getOrReturnCtx(t);return F(s,{code:D.invalid_type,expected:H.undefined,received:s.parsedType}),X}return Ot(t.data)}};Oo.create=e=>new Oo({typeName:ee.ZodUndefined,...ie(e)});var Do=class extends de{_parse(t){if(this._getType(t)!==H.null){let s=this._getOrReturnCtx(t);return F(s,{code:D.invalid_type,expected:H.null,received:s.parsedType}),X}return Ot(t.data)}};Do.create=e=>new Do({typeName:ee.ZodNull,...ie(e)});var wn=class extends de{constructor(){super(...arguments),this._any=!0}_parse(t){return Ot(t.data)}};wn.create=e=>new wn({typeName:ee.ZodAny,...ie(e)});var Ds=class extends de{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ot(t.data)}};Ds.create=e=>new Ds({typeName:ee.ZodUnknown,...ie(e)});var Kr=class extends de{_parse(t){let r=this._getOrReturnCtx(t);return F(r,{code:D.invalid_type,expected:H.never,received:r.parsedType}),X}};Kr.create=e=>new Kr({typeName:ee.ZodNever,...ie(e)});var Pi=class extends de{_parse(t){if(this._getType(t)!==H.undefined){let s=this._getOrReturnCtx(t);return F(s,{code:D.invalid_type,expected:H.void,received:s.parsedType}),X}return Ot(t.data)}};Pi.create=e=>new Pi({typeName:ee.ZodVoid,...ie(e)});var ks=class e extends de{_parse(t){let{ctx:r,status:s}=this._processInputParams(t),n=this._def;if(r.parsedType!==H.array)return F(r,{code:D.invalid_type,expected:H.array,received:r.parsedType}),X;if(n.exactLength!==null){let i=r.data.length>n.exactLength.value,a=r.data.length<n.exactLength.value;(i||a)&&(F(r,{code:i?D.too_big:D.too_small,minimum:a?n.exactLength.value:void 0,maximum:i?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(F(r,{code:D.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(F(r,{code:D.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((i,a)=>n.type._parseAsync(new _r(r,i,r.path,a)))).then(i=>bt.mergeArray(s,i));let o=[...r.data].map((i,a)=>n.type._parseSync(new _r(r,i,r.path,a)));return bt.mergeArray(s,o)}get element(){return this._def.type}min(t,r){return new e({...this._def,minLength:{value:t,message:W.toString(r)}})}max(t,r){return new e({...this._def,maxLength:{value:t,message:W.toString(r)}})}length(t,r){return new e({...this._def,exactLength:{value:t,message:W.toString(r)}})}nonempty(t){return this.min(1,t)}};ks.create=(e,t)=>new ks({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ee.ZodArray,...ie(t)});function Ai(e){if(e instanceof Kt){let t={};for(let r in e.shape){let s=e.shape[r];t[r]=Sr.create(Ai(s))}return new Kt({...e._def,shape:()=>t})}else return e instanceof ks?new ks({...e._def,type:Ai(e.element)}):e instanceof Sr?Sr.create(Ai(e.unwrap())):e instanceof fs?fs.create(Ai(e.unwrap())):e instanceof ls?ls.create(e.items.map(t=>Ai(t))):e}var Kt=class e extends de{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=ge.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==H.object){let d=this._getOrReturnCtx(t);return F(d,{code:D.invalid_type,expected:H.object,received:d.parsedType}),X}let{status:s,ctx:n}=this._processInputParams(t),{shape:o,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof Kr&&this._def.unknownKeys==="strip"))for(let d in n.data)i.includes(d)||a.push(d);let c=[];for(let d of i){let u=o[d],l=n.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new _r(n,l,n.path,d)),alwaysSet:d in n.data})}if(this._def.catchall instanceof Kr){let d=this._def.unknownKeys;if(d==="passthrough")for(let u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(d==="strict")a.length>0&&(F(n,{code:D.unrecognized_keys,keys:a}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let d=this._def.catchall;for(let u of a){let l=n.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new _r(n,l,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let d=[];for(let u of c){let l=await u.key,h=await u.value;d.push({key:l,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>bt.mergeObjectSync(s,d)):bt.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return W.errToObj,new e({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,s)=>{let n=this._def.errorMap?.(r,s).message??s.defaultError;return r.code==="unrecognized_keys"?{message:W.errToObj(t).message??n}:{message:n}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ee.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let r={};for(let s of ge.objectKeys(t))t[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new e({...this._def,shape:()=>r})}omit(t){let r={};for(let s of ge.objectKeys(this.shape))t[s]||(r[s]=this.shape[s]);return new e({...this._def,shape:()=>r})}deepPartial(){return Ai(this)}partial(t){let r={};for(let s of ge.objectKeys(this.shape)){let n=this.shape[s];t&&!t[s]?r[s]=n:r[s]=n.optional()}return new e({...this._def,shape:()=>r})}required(t){let r={};for(let s of ge.objectKeys(this.shape))if(t&&!t[s])r[s]=this.shape[s];else{let o=this.shape[s];for(;o instanceof Sr;)o=o._def.innerType;r[s]=o}return new e({...this._def,shape:()=>r})}keyof(){return LC(ge.objectKeys(this.shape))}};Kt.create=(e,t)=>new Kt({shape:()=>e,unknownKeys:"strip",catchall:Kr.create(),typeName:ee.ZodObject,...ie(t)});Kt.strictCreate=(e,t)=>new Kt({shape:()=>e,unknownKeys:"strict",catchall:Kr.create(),typeName:ee.ZodObject,...ie(t)});Kt.lazycreate=(e,t)=>new Kt({shape:e,unknownKeys:"strip",catchall:Kr.create(),typeName:ee.ZodObject,...ie(t)});var ko=class extends de{_parse(t){let{ctx:r}=this._processInputParams(t),s=this._def.options;function n(o){for(let a of o)if(a.result.status==="valid")return a.result;for(let a of o)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let i=o.map(a=>new Nt(a.ctx.common.issues));return F(r,{code:D.invalid_union,unionErrors:i}),X}if(r.common.async)return Promise.all(s.map(async o=>{let i={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:i}),ctx:i}})).then(n);{let o,i=[];for(let c of s){let d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!o&&(o={result:u,ctx:d}),d.common.issues.length&&i.push(d.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let a=i.map(c=>new Nt(c));return F(r,{code:D.invalid_union,unionErrors:a}),X}}get options(){return this._def.options}};ko.create=(e,t)=>new ko({options:e,typeName:ee.ZodUnion,...ie(t)});var Os=e=>e instanceof Lo?Os(e.schema):e instanceof Er?Os(e.innerType()):e instanceof qo?[e.value]:e instanceof Fo?e.options:e instanceof $o?ge.objectValues(e.enum):e instanceof Uo?Os(e._def.innerType):e instanceof Oo?[void 0]:e instanceof Do?[null]:e instanceof Sr?[void 0,...Os(e.unwrap())]:e instanceof fs?[null,...Os(e.unwrap())]:e instanceof xc||e instanceof Bo?Os(e.unwrap()):e instanceof jo?Os(e._def.innerType):[],fl=class e extends de{_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==H.object)return F(r,{code:D.invalid_type,expected:H.object,received:r.parsedType}),X;let s=this.discriminator,n=r.data[s],o=this.optionsMap.get(n);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(F(r,{code:D.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),X)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,s){let n=new Map;for(let o of r){let i=Os(o.shape[t]);if(!i.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let a of i){if(n.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);n.set(a,o)}}return new e({typeName:ee.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:n,...ie(s)})}};function My(e,t){let r=us(e),s=us(t);if(e===t)return{valid:!0,data:e};if(r===H.object&&s===H.object){let n=ge.objectKeys(t),o=ge.objectKeys(e).filter(a=>n.indexOf(a)!==-1),i={...e,...t};for(let a of o){let c=My(e[a],t[a]);if(!c.valid)return{valid:!1};i[a]=c.data}return{valid:!0,data:i}}else if(r===H.array&&s===H.array){if(e.length!==t.length)return{valid:!1};let n=[];for(let o=0;o<e.length;o++){let i=e[o],a=t[o],c=My(i,a);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return r===H.date&&s===H.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Mo=class extends de{_parse(t){let{status:r,ctx:s}=this._processInputParams(t),n=(o,i)=>{if(ul(o)||ul(i))return X;let a=My(o.value,i.value);return a.valid?((ll(o)||ll(i))&&r.dirty(),{status:r.value,value:a.data}):(F(s,{code:D.invalid_intersection_types}),X)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([o,i])=>n(o,i)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};Mo.create=(e,t,r)=>new Mo({left:e,right:t,typeName:ee.ZodIntersection,...ie(r)});var ls=class e extends de{_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==H.array)return F(s,{code:D.invalid_type,expected:H.array,received:s.parsedType}),X;if(s.data.length<this._def.items.length)return F(s,{code:D.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),X;!this._def.rest&&s.data.length>this._def.items.length&&(F(s,{code:D.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...s.data].map((i,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new _r(s,i,s.path,a)):null}).filter(i=>!!i);return s.common.async?Promise.all(o).then(i=>bt.mergeArray(r,i)):bt.mergeArray(r,o)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};ls.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ls({items:e,typeName:ee.ZodTuple,rest:null,...ie(t)})};var pl=class e extends de{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==H.object)return F(s,{code:D.invalid_type,expected:H.object,received:s.parsedType}),X;let n=[],o=this._def.keyType,i=this._def.valueType;for(let a in s.data)n.push({key:o._parse(new _r(s,a,s.path,a)),value:i._parse(new _r(s,s.data[a],s.path,a)),alwaysSet:a in s.data});return s.common.async?bt.mergeObjectAsync(r,n):bt.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(t,r,s){return r instanceof de?new e({keyType:t,valueType:r,typeName:ee.ZodRecord,...ie(s)}):new e({keyType:En.create(),valueType:t,typeName:ee.ZodRecord,...ie(r)})}},Ni=class extends de{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==H.map)return F(s,{code:D.invalid_type,expected:H.map,received:s.parsedType}),X;let n=this._def.keyType,o=this._def.valueType,i=[...s.data.entries()].map(([a,c],d)=>({key:n._parse(new _r(s,a,s.path,[d,"key"])),value:o._parse(new _r(s,c,s.path,[d,"value"]))}));if(s.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of i){let d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return X;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(d.value,u.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let c of i){let d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return X;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),a.set(d.value,u.value)}return{status:r.value,value:a}}}};Ni.create=(e,t,r)=>new Ni({valueType:t,keyType:e,typeName:ee.ZodMap,...ie(r)});var Oi=class e extends de{_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==H.set)return F(s,{code:D.invalid_type,expected:H.set,received:s.parsedType}),X;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(F(s,{code:D.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(F(s,{code:D.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let o=this._def.valueType;function i(c){let d=new Set;for(let u of c){if(u.status==="aborted")return X;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}let a=[...s.data.values()].map((c,d)=>o._parse(new _r(s,c,s.path,d)));return s.common.async?Promise.all(a).then(c=>i(c)):i(a)}min(t,r){return new e({...this._def,minSize:{value:t,message:W.toString(r)}})}max(t,r){return new e({...this._def,maxSize:{value:t,message:W.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}};Oi.create=(e,t)=>new Oi({valueType:e,minSize:null,maxSize:null,typeName:ee.ZodSet,...ie(t)});var ml=class e extends de{constructor(){super(...arguments),this.validate=this.implement}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==H.function)return F(r,{code:D.invalid_type,expected:H.function,received:r.parsedType}),X;function s(a,c){return vc({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ri(),Ns].filter(d=>!!d),issueData:{code:D.invalid_arguments,argumentsError:c}})}function n(a,c){return vc({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ri(),Ns].filter(d=>!!d),issueData:{code:D.invalid_return_type,returnTypeError:c}})}let o={errorMap:r.common.contextualErrorMap},i=r.data;if(this._def.returns instanceof bn){let a=this;return Ot(async function(...c){let d=new Nt([]),u=await a._def.args.parseAsync(c,o).catch(m=>{throw d.addIssue(s(c,m)),d}),l=await Reflect.apply(i,this,u);return await a._def.returns._def.type.parseAsync(l,o).catch(m=>{throw d.addIssue(n(l,m)),d})})}else{let a=this;return Ot(function(...c){let d=a._def.args.safeParse(c,o);if(!d.success)throw new Nt([s(c,d.error)]);let u=Reflect.apply(i,this,d.data),l=a._def.returns.safeParse(u,o);if(!l.success)throw new Nt([n(u,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:ls.create(t).rest(Ds.create())})}returns(t){return new e({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,s){return new e({args:t||ls.create([]).rest(Ds.create()),returns:r||Ds.create(),typeName:ee.ZodFunction,...ie(s)})}},Lo=class extends de{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Lo.create=(e,t)=>new Lo({getter:e,typeName:ee.ZodLazy,...ie(t)});var qo=class extends de{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return F(r,{received:r.data,code:D.invalid_literal,expected:this._def.value}),X}return{status:"valid",value:t.data}}get value(){return this._def.value}};qo.create=(e,t)=>new qo({value:e,typeName:ee.ZodLiteral,...ie(t)});function LC(e,t){return new Fo({values:e,typeName:ee.ZodEnum,...ie(t)})}var Fo=class e extends de{_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),s=this._def.values;return F(r,{expected:ge.joinValues(s),received:r.parsedType,code:D.invalid_type}),X}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){let r=this._getOrReturnCtx(t),s=this._def.values;return F(r,{received:r.data,code:D.invalid_enum_value,options:s}),X}return Ot(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return e.create(t,{...this._def,...r})}exclude(t,r=this._def){return e.create(this.options.filter(s=>!t.includes(s)),{...this._def,...r})}};Fo.create=LC;var $o=class extends de{_parse(t){let r=ge.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==H.string&&s.parsedType!==H.number){let n=ge.objectValues(r);return F(s,{expected:ge.joinValues(n),received:s.parsedType,code:D.invalid_type}),X}if(this._cache||(this._cache=new Set(ge.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){let n=ge.objectValues(r);return F(s,{received:s.data,code:D.invalid_enum_value,options:n}),X}return Ot(t.data)}get enum(){return this._def.values}};$o.create=(e,t)=>new $o({values:e,typeName:ee.ZodNativeEnum,...ie(t)});var bn=class extends de{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==H.promise&&r.common.async===!1)return F(r,{code:D.invalid_type,expected:H.promise,received:r.parsedType}),X;let s=r.parsedType===H.promise?r.data:Promise.resolve(r.data);return Ot(s.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};bn.create=(e,t)=>new bn({type:e,typeName:ee.ZodPromise,...ie(t)});var Er=class extends de{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ee.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:s}=this._processInputParams(t),n=this._def.effect||null,o={addIssue:i=>{F(s,i),i.fatal?r.abort():r.dirty()},get path(){return s.path}};if(o.addIssue=o.addIssue.bind(o),n.type==="preprocess"){let i=n.transform(s.data,o);if(s.common.async)return Promise.resolve(i).then(async a=>{if(r.value==="aborted")return X;let c=await this._def.schema._parseAsync({data:a,path:s.path,parent:s});return c.status==="aborted"?X:c.status==="dirty"?To(c.value):r.value==="dirty"?To(c.value):c});{if(r.value==="aborted")return X;let a=this._def.schema._parseSync({data:i,path:s.path,parent:s});return a.status==="aborted"?X:a.status==="dirty"?To(a.value):r.value==="dirty"?To(a.value):a}}if(n.type==="refinement"){let i=a=>{let c=n.refinement(a,o);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(s.common.async===!1){let a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?X:(a.status==="dirty"&&r.dirty(),i(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>a.status==="aborted"?X:(a.status==="dirty"&&r.dirty(),i(a.value).then(()=>({status:r.value,value:a.value}))))}if(n.type==="transform")if(s.common.async===!1){let i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!_n(i))return X;let a=n.transform(i.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>_n(i)?Promise.resolve(n.transform(i.value,o)).then(a=>({status:r.value,value:a})):X);ge.assertNever(n)}};Er.create=(e,t,r)=>new Er({schema:e,typeName:ee.ZodEffects,effect:t,...ie(r)});Er.createWithPreprocess=(e,t,r)=>new Er({schema:t,effect:{type:"preprocess",transform:e},typeName:ee.ZodEffects,...ie(r)});var Sr=class extends de{_parse(t){return this._getType(t)===H.undefined?Ot(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Sr.create=(e,t)=>new Sr({innerType:e,typeName:ee.ZodOptional,...ie(t)});var fs=class extends de{_parse(t){return this._getType(t)===H.null?Ot(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};fs.create=(e,t)=>new fs({innerType:e,typeName:ee.ZodNullable,...ie(t)});var Uo=class extends de{_parse(t){let{ctx:r}=this._processInputParams(t),s=r.data;return r.parsedType===H.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Uo.create=(e,t)=>new Uo({innerType:e,typeName:ee.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...ie(t)});var jo=class extends de{_parse(t){let{ctx:r}=this._processInputParams(t),s={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ti(n)?n.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Nt(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Nt(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};jo.create=(e,t)=>new jo({innerType:e,typeName:ee.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...ie(t)});var Di=class extends de{_parse(t){if(this._getType(t)!==H.nan){let s=this._getOrReturnCtx(t);return F(s,{code:D.invalid_type,expected:H.nan,received:s.parsedType}),X}return{status:"valid",value:t.data}}};Di.create=e=>new Di({typeName:ee.ZodNaN,...ie(e)});var r4=Symbol("zod_brand"),xc=class extends de{_parse(t){let{ctx:r}=this._processInputParams(t),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}},Cc=class e extends de{_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?X:o.status==="dirty"?(r.dirty(),To(o.value)):this._def.out._parseAsync({data:o.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?X:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(t,r){return new e({in:t,out:r,typeName:ee.ZodPipeline})}},Bo=class extends de{_parse(t){let r=this._def.innerType._parse(t),s=n=>(_n(n)&&(n.value=Object.freeze(n.value)),n);return Ti(r)?r.then(n=>s(n)):s(r)}unwrap(){return this._def.innerType}};Bo.create=(e,t)=>new Bo({innerType:e,typeName:ee.ZodReadonly,...ie(t)});function OC(e,t){let r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function qC(e,t={},r){return e?wn.create().superRefine((s,n)=>{let o=e(s);if(o instanceof Promise)return o.then(i=>{if(!i){let a=OC(t,s),c=a.fatal??r??!0;n.addIssue({code:"custom",...a,fatal:c})}});if(!o){let i=OC(t,s),a=i.fatal??r??!0;n.addIssue({code:"custom",...i,fatal:a})}}):wn.create()}var s4={object:Kt.lazycreate},ee;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ee||(ee={}));var n4=(e,t={message:`Input not instance of ${e.name}`})=>qC(r=>r instanceof e,t),FC=En.create,$C=Ao.create,o4=Di.create,i4=Io.create,UC=Po.create,a4=No.create,c4=Ii.create,d4=Oo.create,u4=Do.create,l4=wn.create,f4=Ds.create,p4=Kr.create,m4=Pi.create,h4=ks.create,g4=Kt.create,y4=Kt.strictCreate,S4=ko.create,_4=fl.create,E4=Mo.create,w4=ls.create,b4=pl.create,v4=Ni.create,x4=Oi.create,C4=ml.create,R4=Lo.create,T4=qo.create,A4=Fo.create,I4=$o.create,P4=bn.create,N4=Er.create,O4=Sr.create,D4=fs.create,k4=Er.createWithPreprocess,M4=Cc.create,L4=()=>FC().optional(),q4=()=>$C().optional(),F4=()=>UC().optional(),$4={string:(e=>En.create({...e,coerce:!0})),number:(e=>Ao.create({...e,coerce:!0})),boolean:(e=>Po.create({...e,coerce:!0})),bigint:(e=>Io.create({...e,coerce:!0})),date:(e=>No.create({...e,coerce:!0}))};var U4=X;var Te=class extends Error{code;statusCode;details;constructor(t,r,s=400,n){super(r),this.code=t,this.statusCode=s,this.details=n,Object.setPrototypeOf(this,new.target.prototype)}},Rc=class extends Te{constructor(t="Unauthorized"){super("UNAUTHORIZED",t,401)}},Ms=class extends Te{constructor(t="Forbidden"){super("FORBIDDEN",t,403)}},hl=class extends Te{constructor(t="Not Found",r){super("NOT_FOUND",t,404,r)}},Ho=class extends Te{constructor(t="Validation failed",r){super("VALIDATION_ERROR",t,422,r)}},jC=e=>e instanceof Te?e:e instanceof Error?new Te("INTERNAL_SERVER_ERROR",e.message||"Internal server error",500):new Te("INTERNAL_SERVER_ERROR","Internal server error",500);var gl=(e,t,r,s)=>{let n={level:e,message:t,timestamp:new Date().toISOString(),...r};return JSON.stringify(s!==void 0?{...n,meta:s}:n)},ft={debug(e,t,r){console.debug(gl("debug",e,t,r))},info(e,t,r){console.info(gl("info",e,t,r))},warn(e,t,r){console.warn(gl("warn",e,t,r))},error(e,t,r){console.error(gl("error",e,t,r))}};var ih=y(kL());var Lr=y(_v(),1),ove=Lr.default.Client,bF=Lr.default.Pool,ive=Lr.default.Connection,ave=Lr.default.types,cve=Lr.default.Query,dve=Lr.default.DatabaseError,uve=Lr.default.escapeIdentifier,lve=Lr.default.escapeLiteral,fve=Lr.default.Result,pve=Lr.default.TypeOverrides,mve=Lr.default.defaults;var cne=process.env.AWS_REGION||process.env.COGNITO_REGION||"ap-southeast-2",dne=new ih.SecretsManagerClient({region:cne}),sh=null,nh=null,oh=null,une=()=>{let e=process.env.DB_HOST,t=process.env.DB_USER,r=process.env.DB_PASS,s=process.env.DB_NAME;if(!e||!t||!r||!s)return null;let n=process.env.DB_SSL,o=n?n.toLowerCase()==="true":void 0;return{host:e,port:Number(process.env.DB_PORT||5432),username:t,password:r,dbname:s,ssl:o}},lne=e=>{if(!e)throw new Error("Database secret string is empty");let t=JSON.parse(e);if(!t.host||!t.username||!t.password||!t.dbname)throw new Error("Database secret is missing required properties");return{host:t.host,port:Number(t.port||5432),username:t.username,password:t.password,dbname:t.dbname,ssl:typeof t.ssl=="boolean"?t.ssl:void 0}},fne=async()=>{if(oh&&oh.expiresAt>Date.now())return oh.value;let e=process.env.DB_SECRET_ARN;if(!e)throw new Error("DB_SECRET_ARN environment variable is not set");let t=new ih.GetSecretValueCommand({SecretId:e}),r=await dne.send(t),s=lne(r.SecretString);return oh={value:s,expiresAt:Date.now()+Number(process.env.DB_SECRET_CACHE_MS||6e4)},s},pne=async()=>{let e=une()??await fne(),t=Number(process.env.DB_POOL_MAX||10),r=typeof e.ssl=="boolean"?e.ssl?{rejectUnauthorized:!1}:void 0:process.env.DB_SSL?.toLowerCase()==="true"?{rejectUnauthorized:!1}:void 0,s=new bF({host:e.host,port:e.port,user:e.username,password:e.password,database:e.dbname,max:t,idleTimeoutMillis:Number(process.env.DB_IDLE_TIMEOUT_MS||3e4),connectionTimeoutMillis:Number(process.env.DB_CONNECT_TIMEOUT_MS||5e3),ssl:r});return s.on("error",n=>{ft.error("Unexpected database error",void 0,{err:n})}),s},vF=async()=>(sh||(nh||(nh=pne().then(e=>(sh=e,e)).finally(()=>{nh=null})),sh=await nh),sh),qr=async(e,t)=>{let r=await vF();return typeof e=="string"?r.query(e,t):r.query(e)},vv=async e=>{let r=await(await vF()).connect();try{await r.query("BEGIN");let s=await e(r);return await r.query("COMMIT"),s}catch(s){throw await r.query("ROLLBACK"),s}finally{r.release()}};var xF=e=>({userId:e.user_id,cognitoSub:e.cognito_sub,email:e.email,displayName:e.display_name,teamId:e.team_id}),ah=class{async findByCognitoSub(t){let r=await qr(`
      SELECT user_id, cognito_sub, email, display_name, team_id
      FROM users
      WHERE cognito_sub = $1
      LIMIT 1
      `,[t]);return r.rowCount===0?null:xF(r.rows[0])}async upsertFromClaims(t){let r=await qr(`
      INSERT INTO users (cognito_sub, email, display_name, team_id)
      VALUES ($1, $2, $3, $4)
      ON CONFLICT (cognito_sub) DO UPDATE
      SET
        email = COALESCE(EXCLUDED.email, users.email),
        display_name = COALESCE(EXCLUDED.display_name, users.display_name),
        team_id = COALESCE(EXCLUDED.team_id, users.team_id),
        updated_at = CURRENT_TIMESTAMP
      RETURNING user_id, cognito_sub, email, display_name, team_id
      `,[t.cognitoSub,t.email??null,t.displayName??null,t.teamId??null]);return xF(r.rows[0])}};var mne=new ah,hne=e=>{let t=e.trim();if(!t)return[];if(t.startsWith("[")&&t.endsWith("]"))try{let r=JSON.parse(t);if(Array.isArray(r))return r.filter(s=>typeof s=="string").map(s=>s.trim()).filter(s=>s.length>0)}catch{}return t.includes(",")?t.split(",").map(r=>r.trim()).filter(r=>r.length>0):[t]},gne=(e,t)=>{if(typeof t=="string")switch(e){case"cognito:groups":case"custom:roles":case"roles":return hne(t);default:return t}return t},yne=e=>{let r=e.requestContext.authorizer?.jwt?.claims;if(!r)throw new Rc("Missing JWT claims from authorizer");let s=Object.entries(r).reduce((n,[o,i])=>(n[o]=gne(o,i),n),{});if(!s.sub||typeof s.sub!="string")throw new Rc("Token missing subject");return s},CF=async e=>{let t=yne(e);ft.debug("JWT claims received",{sub:t.sub});let r=typeof t.email=="string"?t.email:typeof t["custom:email"]=="string"?t["custom:email"]:null,s=[],n=C=>{if(C){if(Array.isArray(C)){C.filter(R=>typeof R=="string"&&R.trim().length>0).forEach(R=>s.push(R.trim()));return}typeof C=="string"&&C.trim().length>0&&s.push(C.trim())}};n(t["cognito:groups"]),n(t["custom:roles"]),n(t.roles);let o=C=>C.trim().toUpperCase().includes("ADMIN")?"ADMIN":"EMPLOYEE",i=Array.from(new Set(s.map(o)));i.length===0&&i.push("EMPLOYEE");let a=typeof t["custom:display_name"]=="string"&&t["custom:display_name"]||typeof t.name=="string"&&t.name||typeof t.preferred_username=="string"&&t.preferred_username||typeof t["cognito:username"]=="string"&&t["cognito:username"]||r||t.sub,c=t["custom:team_id"]??t.team_id,d=typeof c=="string"?Number(c):typeof c=="number"?c:Number.NaN,u=Number.isFinite(d)?Number(d):null,l=await mne.upsertFromClaims({cognitoSub:t.sub,email:r,displayName:a,teamId:u??void 0}),h=l.teamId??u??null,m=l.email??r??void 0,g=l.displayName??a??m,w={userId:l.userId,email:m??t.sub,displayName:g,teamId:h,roles:i,sub:t.sub};return ft.debug("User roles resolved",{userId:w.userId,roles:w.roles}),w},RF=(e,t)=>{if(!(Array.isArray(t)?t:[t]).some(n=>e.roles.includes(n)))throw new Ms("User does not have sufficient privileges")};var ch=(process.env.ALLOWED_ORIGINS||"").split(",").map(e=>e.trim()).filter(e=>e.length>0),TF={"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Authorization,Content-Type,Idempotency-Key,X-Amz-Date,X-Api-Key,X-Amz-Security-Token","Access-Control-Allow-Methods":"GET,POST,PATCH,OPTIONS"},AF=e=>e?ch.length===0||ch.includes(e)?e:ch[0]:ch[0]||"*",dh=(e,t,r,s)=>({statusCode:e,headers:{...TF,"Access-Control-Allow-Origin":AF(r),...s},body:JSON.stringify(t)}),IF=(e,t,r,s)=>({statusCode:e,headers:{...TF,"Access-Control-Allow-Origin":AF(r),...s},body:JSON.stringify(t)});var Sne=e=>e.headers?.origin||e.headers?.Origin,PF=(e,t={requireAuth:!0})=>async(r,s)=>{let n=Sne(r),o=null;try{t.requireAuth!==!1&&(o=await CF(r),t.allowedRoles&&RF(o,t.allowedRoles));let i=await e({event:r,context:s,user:o});return i&&typeof i=="object"&&"statusCode"in i?i:dh(200,i,n)}catch(i){let a=jC(i);return ft.error("Handler failed",{requestId:s.awsRequestId,userId:o?.userId},{error:i}),IF(a.statusCode,{code:a.code,message:a.message,details:a.details,requestId:s.awsRequestId},n)}};var _ne=(e,t)=>{try{return e.parse(t)}catch(r){throw r instanceof Nt?new Ho("Validation failed",{issues:r.issues}):r}};var NF=(e,t)=>_ne(e,t??{});var OF=Number(process.env.MAX_PAGE_SIZE||100),DF=e=>{let t=e.page?Number(e.page):1,r=e.size?Number(e.size):25,s=e.sort??"created_at,desc";if(!Number.isFinite(t)||t<1)throw new Ho("`page` must be a positive integer");if(!Number.isFinite(r)||r<1||r>OF)throw new Ho(`\`size\` must be between 1 and ${OF}`);return{page:t,size:r,sort:s}},kF=(e,t,r)=>({items:e,page:t.page??1,size:t.size??e.length,total:r}),MF=(e,t,r="created_at,desc")=>{let s=e??r,[n,o]=s.split(","),i=t.includes(n)?n:t[0],a=o?.toUpperCase()==="ASC"?"ASC":"DESC";return{field:i,direction:a}};var Ene=["created_at","updated_at","start_date","end_date","status"],wne=e=>({balanceId:Number(e.balance_id),policyId:Number(e.policy_id),policyName:e.policy_name,balanceDays:Number(e.balance_days),year:e.year}),uh=e=>({requestId:e.request_id,userId:e.user_id,userEmail:e.user_email,userName:e.user_name,userTeamId:e.user_team_id,policyId:e.policy_id,policyName:e.policy_name,status:e.status,startDate:e.start_date,endDate:e.end_date,halfDay:e.half_day,reason:e.reason,graphEventId:e.graph_event_id,createdAt:e.created_at,updatedAt:e.updated_at,daysRequested:Number(e.days_requested)}),Va=class{async getLeaveBalances(t,r){return(await qr(`
      SELECT
        lb.balance_id,
        lb.policy_id,
        lp.name AS policy_name,
        lb.balance_days,
        lb.year
      FROM leave_balances lb
      INNER JOIN leave_policies lp ON lb.policy_id = lp.policy_id
      WHERE lb.user_id = $1 AND lb.year = $2
      ORDER BY lp.name ASC
      `,[t,r])).rows.map(wne)}async getLeavePolicies(){return(await qr("SELECT policy_id, name, annual_limit FROM leave_policies WHERE is_active = true ORDER BY name")).rows}async initializeLeaveBalance(t,r,s,n){await qr(`
      INSERT INTO leave_balances (user_id, policy_id, balance_days, year)
      VALUES ($1, $2, $3, $4)
      ON CONFLICT (user_id, policy_id, year)
      DO NOTHING
      `,[t,r,s,n])}async getLeaveRequests(t){let r=DF({page:t.page?.toString(),size:t.size?.toString(),sort:t.sort}),{field:s,direction:n}=MF(r.sort,Ene),o=(r.page-1)*r.size,i=[],a=1,c=`
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE 1=1
    `;t.userId!==void 0&&t.userId!==null&&(c+=` AND lr.user_id = $${a++}`,i.push(t.userId)),t.status&&(c+=` AND lr.status = $${a++}`,i.push(t.status)),t.startDate&&(c+=` AND lr.start_date >= $${a++}`,i.push(t.startDate)),t.endDate&&(c+=` AND lr.end_date <= $${a++}`,i.push(t.endDate));let d=`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      ${c}
      ORDER BY lr.${s} ${n}
      LIMIT $${a++} OFFSET $${a++}
    `;i.push(r.size,o);let[u,l]=await Promise.all([qr(d,i),qr(`SELECT COUNT(*) ${c}`,i.slice(0,-2))]),h=Number(l.rows[0]?.count??0);return kF(u.rows.map(uh),r,h)}async getLeaveRequestById(t){let r=await qr(`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE lr.request_id = $1
      `,[t]);return r.rowCount===0?null:uh(r.rows[0])}async insertLeaveRequest(t,r){let n=(await t.query(`
      INSERT INTO leave_requests (
        user_id,
        user_email,
        user_name,
        user_team_id,
        policy_id,
        start_date,
        end_date,
        half_day,
        reason,
        status
      )
      VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, 'PENDING')
      RETURNING request_id
      `,[r.userId,r.userEmail,r.userName??null,r.userTeamId,r.policyId,r.startDate,r.endDate,r.halfDay,r.reason??null])).rows[0].request_id,o=await t.query(`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE lr.request_id = $1
      `,[n]);return uh(o.rows[0])}async updateLeaveRequestStatus(t,r,s,n,o){if((await t.query(`
      UPDATE leave_requests
      SET status = $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE request_id = $2
      RETURNING request_id
      `,[s,r])).rowCount===0)throw new Error("Leave request not found");await t.query(`
      INSERT INTO leave_audit (request_id, action, actor_id, actor_email, actor_name, notes)
      VALUES ($1, $2, $3, $4, $5, $6)
      `,[r,s,n.id,n.email,n.name??null,o??null]);let a=await t.query(`
      SELECT
        lr.request_id,
        lr.user_id,
        lr.user_email,
        lr.user_name,
        lr.user_team_id,
        lr.policy_id,
        lp.name AS policy_name,
        lr.status,
        lr.start_date,
        lr.end_date,
        lr.half_day,
        lr.reason,
        lr.graph_event_id,
        lr.created_at,
        lr.updated_at,
        CASE
          WHEN lr.half_day THEN 0.5
          ELSE (lr.end_date - lr.start_date) + 1
        END AS days_requested
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      WHERE lr.request_id = $1
      `,[r]);return uh(a.rows[0])}async adjustLeaveBalance(t,r,s,n,o){await t.query(`
      INSERT INTO leave_balances (user_id, policy_id, balance_days, year)
      VALUES ($1, $2, 0, $3)
      ON CONFLICT (user_id, policy_id, year) DO NOTHING
      `,[r,s,n]),await t.query(`
      UPDATE leave_balances
      SET balance_days = balance_days - $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE user_id = $2 AND policy_id = $3 AND year = $4
      `,[o,r,s,n])}async restoreLeaveBalance(t,r,s,n,o){await t.query(`
      UPDATE leave_balances
      SET balance_days = balance_days + $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE user_id = $2 AND policy_id = $3 AND year = $4
      `,[o,r,s,n])}async hasOverlappingRequest(t,r,s,n,o){let i=[t,r,s,n],a=i.length+1,c=`
      SELECT COUNT(*)::INT AS count
      FROM leave_requests
      WHERE user_id = $1
        AND policy_id = $2
        AND status IN ('PENDING', 'APPROVED')
        AND start_date <= $4
        AND end_date >= $3
    `;return o&&(c+=` AND request_id <> $${a++}`,i.push(o)),(await qr(c,i)).rows[0].count>0}createLeaveRequest(t){return vv(r=>this.insertLeaveRequest(r,t))}async transitionLeaveRequest(t){return vv(async r=>{if((await r.query(`
        SELECT
          lr.request_id,
          lr.user_id,
          lr.user_email,
          lr.user_name,
          lr.user_team_id,
          lr.policy_id,
          (SELECT name FROM leave_policies WHERE policy_id = lr.policy_id) AS policy_name,
          lr.status,
          lr.start_date,
          lr.end_date,
          lr.half_day,
          lr.reason,
          lr.graph_event_id,
          lr.created_at,
          lr.updated_at,
          CASE
            WHEN lr.half_day THEN 0.5
            ELSE (lr.end_date - lr.start_date) + 1
          END AS days_requested
        FROM leave_requests lr
        WHERE lr.request_id = $1
        FOR UPDATE
        `,[t.requestId])).rowCount===0)throw new Error("Leave request not found");let n=await this.updateLeaveRequestStatus(r,t.requestId,t.newStatus,{id:t.actorId,email:t.actorEmail,name:t.actorName},t.notes),o=new Date(n.startDate).getFullYear();return t.daysToAdjust&&t.daysToAdjust>0&&(t.newStatus==="APPROVED"?await this.adjustLeaveBalance(r,n.userId,n.policyId,o,t.daysToAdjust):(t.newStatus==="CANCELLED"||t.newStatus==="REJECTED")&&await this.restoreLeaveBalance(r,n.userId,n.policyId,o,t.daysToAdjust)),n})}async updateGraphEventId(t,r){await qr(`
      UPDATE leave_requests
      SET graph_event_id = $1,
          updated_at = CURRENT_TIMESTAMP
      WHERE request_id = $2
      `,[r,t])}};var bne=new Set([0,6]),xv=e=>{let t=new Date(e);if(Number.isNaN(t.getTime()))throw new Error(`Invalid date: ${e}`);return t},Cv=e=>xv(e).toISOString().slice(0,10),vne=()=>{let e=(process.env.HOLIDAY_DATES||"").split(",").map(t=>t.trim()).filter(Boolean);return new Set(e)},xne=e=>bne.has(e.getUTCDay()),Cne=(e,t)=>t.has(e.toISOString().slice(0,10)),LF=(e,t,r)=>{let s=vne(),n=xv(e),o=xv(t);if(o<n)throw new Error("End date must be greater than or equal to start date");if(r)return .5;let i=0,a=new Date(n);for(;a<=o;)!xne(a)&&!Cne(a,s)&&(i+=1),a.setUTCDate(a.getUTCDate()+1);return i};var Ay=y(QH());var Ale=e=>e.endsWith(".fifo"),KH=()=>process.env.CALENDAR_SYNC_ENABLED?.toLowerCase()==="true",Ty=class{constructor(t=new Va){this.leaveRepository=t}sqsClient=new Ay.SQSClient({region:process.env.AWS_REGION||"ap-southeast-2"});async enqueueCalendarSync(t){if(!KH()){ft.info("Calendar sync disabled, skipping enqueue",{requestId:t});return}let r=process.env.CALENDAR_SYNC_QUEUE_URL;if(!r)throw new Te("QUEUE_NOT_CONFIGURED","Calendar sync queue URL is not configured",500);let s={requestId:t,attempt:1},n=new Ay.SendMessageCommand({QueueUrl:r,MessageBody:JSON.stringify(s),...Ale(r)?{MessageGroupId:`leave-${t}`,MessageDeduplicationId:`leave-${t}-${Date.now().toString()}`}:{}});await this.sqsClient.send(n),ft.info("Enqueued calendar sync",{requestId:t})}async syncLeaveRequest(t){if(!KH()){ft.info("Calendar sync disabled, skipping sync",{requestId:t});return}let r=await this.leaveRepository.getLeaveRequestById(t);if(!r||r.status!=="APPROVED")throw new Te("LEAVE_NOT_APPROVED","Leave request is not approved",409);let s=process.env.GRAPH_TENANT,n=process.env.GRAPH_CLIENT_ID,o=process.env.GRAPH_CLIENT_SECRET,i=process.env.GRAPH_SCOPE||"https://graph.microsoft.com/.default";if(!s||!n||!o)throw new Te("GRAPH_CONFIG_MISSING","Microsoft Graph credentials not configured",500);let a=`https://login.microsoftonline.com/${s}/oauth2/v2.0/token`,c=await fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:n,client_secret:o,scope:i,grant_type:"client_credentials"})});if(!c.ok){let m=await c.text();throw new Te("GRAPH_TOKEN_ERROR",m,c.status)}let u=(await c.json()).access_token;if(!u)throw new Te("GRAPH_TOKEN_ERROR","Access token missing from response",500);let l=await fetch(`https://graph.microsoft.com/v1.0/users/${r.userEmail}/calendar/events`,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({subject:`Leave: ${r.policyName}`,body:{contentType:"HTML",content:r.reason??"Leave request"},start:{dateTime:`${r.startDate}T00:00:00`,timeZone:"UTC"},end:{dateTime:`${r.endDate}T23:59:59`,timeZone:"UTC"},isAllDay:!r.halfDay})});if(!l.ok){let m=await l.text();throw new Te("GRAPH_EVENT_ERROR",m,l.status)}let h=await l.json();await this.leaveRepository.updateGraphEventId(t,h.id),ft.info("Leave request synced to Microsoft Graph",{requestId:t,eventId:h.id})}};var Iy=class{constructor(t=new Va,r){this.repository=t;this.graphService=r??new Ty(this.repository)}graphService;async getBalances(t,r){let s=r??new Date().getUTCFullYear(),n=await this.repository.getLeaveBalances(t,s);if(n.length===0){let o=await this.repository.getLeavePolicies();return await Promise.all(o.map(i=>this.repository.initializeLeaveBalance(t,i.policy_id,i.annual_limit,s))),this.repository.getLeaveBalances(t,s)}return n}async listRequests(t,r){let s={...r};return t.roles.includes("ADMIN")?s.userId=r.userId??null:s.userId=t.userId,this.repository.getLeaveRequests(s)}async createRequest(t,r){let s=r,n=await this.repository.getLeavePolicies();ft.debug("Leave policies loaded",{count:n.length,sample:n.slice(0,3)});let o=s.policyId??s.policy_id,i=Number(o);if(!Number.isFinite(i))throw ft.warn("Invalid policy id in request",{rawPolicyId:o,input:r}),new Te("POLICY_INVALID","Invalid leave policy id",400);if(!n.find(j=>{let Y=j.policy_id??j.policyId??j.id;return Number(Y)===i}))throw ft.warn("Leave policy not found after normalization",{requestedPolicyId:i,availablePolicyIds:n.map(j=>j.policy_id??j.policyId??j.id)}),new Te("POLICY_NOT_FOUND","Leave policy does not exist",404);let c=s.startDate??s.start_date,d=s.endDate??s.end_date;if(typeof c!="string"||typeof d!="string")throw ft.warn("Missing or invalid start/end dates in request",{rawStart:c,rawEnd:d,input:r}),new Te("VALIDATION_ERROR","Start and end dates are required",400);let u=Cv(c),l=Cv(d),m=!!(s.halfDay??s.half_day);if(m&&u!==l)throw new Te("HALF_DAY_INVALID","Half-day requests must have identical start and end dates",400);let g=LF(u,l,m);if(g<=0)throw new Te("LEAVE_DURATION_INVALID","Leave duration must be greater than zero",400);let w=new Date(u).getUTCFullYear(),R=(await this.getBalances(t.userId,w)).find(j=>Number(j.policyId)===i);if(!R)throw new Te("BALANCE_NOT_INITIALIZED","Leave balance not initialized for the selected policy",400);if(R.balanceDays<g)throw new Te("INSUFFICIENT_BALANCE","Not enough leave balance for the requested days",409,{available:R.balanceDays,requested:g});if(await this.repository.hasOverlappingRequest(t.userId,i,u,l))throw new Te("LEAVE_OVERLAP","Overlapping leave request exists",409,{startDate:u,endDate:l});let B=await this.repository.createLeaveRequest({userId:t.userId,userEmail:t.email,userName:t.displayName??t.email,userTeamId:t.teamId??null,policyId:i,startDate:u,endDate:l,halfDay:m,reason:r.reason});return ft.info("Leave request created",{userId:t.userId,requestId:B.requestId}),B}async updateRequest(t,r){let s=await this.repository.getLeaveRequestById(r.requestId);if(!s)throw new hl("Leave request not found",{requestId:r.requestId});let n=s.userId===t.userId,o=t.roles.includes("ADMIN");if(!o&&!(n&&r.action==="CANCEL"))throw new Ms("User cannot perform this action on leave request");if(r.action==="CANCEL"&&s.status!=="PENDING"&&s.status!=="APPROVED")throw new Te("INVALID_STATE","Only pending or approved requests can be cancelled",400);if((r.action==="APPROVE"||r.action==="REJECT")&&!o)throw new Ms("Only administrators can approve or reject leave requests");if(s.status==="CANCELLED")throw new Te("ALREADY_CANCELLED","Leave request is already cancelled",409);if(s.status==="REJECTED"&&r.action!=="CANCEL")throw new Te("ALREADY_REJECTED","Leave request is already rejected",409);let a={APPROVE:"APPROVED",REJECT:"REJECTED",CANCEL:"CANCELLED"}[r.action];if(s.status===a)return s;let c=s.daysRequested,d=new Date(s.startDate).getUTCFullYear();if(r.action==="APPROVE"){let l=await this.getBalances(s.userId,d),h=Number(s.policyId??s.policy_id)||s.policyId,m=l.find(C=>{let R=C,N=Number(R.policyId??R.policy_id??R.policy);return Number(N)===Number(h)}),g=m,w=Number(g?.balanceDays??g?.balance_days??m?.balanceDays??0);if(!m||w<c)throw new Te("INSUFFICIENT_BALANCE","Not enough balance to approve the leave request",409,{available:w,requested:c})}if(r.action!=="CANCEL"&&await this.repository.hasOverlappingRequest(s.userId,s.policyId,s.startDate,s.endDate,s.requestId))throw new Te("LEAVE_OVERLAP","Overlapping leave request exists",409,{requestId:s.requestId});let u=await this.repository.transitionLeaveRequest({requestId:s.requestId,newStatus:a,actorId:t.userId,actorEmail:t.email,actorName:t.displayName??t.email,notes:r.notes,daysToAdjust:a==="APPROVED"||s.status==="APPROVED"?c:0});return ft.info("Leave request status updated",{requestId:u.requestId,newStatus:u.status,actorId:t.userId}),u.status==="APPROVED"&&await this.graphService.enqueueCalendarSync(u.requestId),u}};var Ile=new Iy,Ple=Jr.object({user_id:Jr.string().regex(/^\d+$/).optional(),status:Jr.enum(["PENDING","APPROVED","REJECTED","CANCELLED"]).optional(),from:Jr.string().optional(),to:Jr.string().optional(),page:Jr.string().regex(/^\d+$/).optional(),size:Jr.string().regex(/^\d+$/).optional(),sort:Jr.string().optional()}),Nle=PF(async({event:e,user:t})=>{if(!t)throw new Error("User context missing");let r=e.headers?.origin||e.headers?.Origin,s=NF(Ple,e.queryStringParameters);if(s.user_id&&!t.roles.includes("ADMIN")&&Number(s.user_id)!==t.userId)throw new Ms("Only administrators can view leave requests for other users");let n={userId:s.user_id?Number(s.user_id):void 0,status:s.status,startDate:s.from,endDate:s.to,page:s.page?Number(s.page):void 0,size:s.size?Number(s.size):void 0,sort:s.sort},o=await Ile.listRequests(t,n);return dh(200,{items:o.items,page:o.page,size:o.size,total:o.total},r)});0&&(module.exports={handler});
