"use strict";var QN=Object.create;var Za=Object.defineProperty;var YN=Object.getOwnPropertyDescriptor;var ZN=Object.getOwnPropertyNames;var JN=Object.getPrototypeOf,XN=Object.prototype.hasOwnProperty;var w=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),st=(t,e)=>{for(var r in e)Za(t,r,{get:e[r],enumerable:!0})},aS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ZN(e))!XN.call(t,s)&&s!==r&&Za(t,s,{get:()=>e[s],enumerable:!(n=YN(e,s))||n.enumerable});return t};var x=(t,e,r)=>(r=t!=null?QN(JN(t)):{},aS(e||!t||!t.__esModule?Za(r,"default",{value:t,enumerable:!0}):r,t)),ue=t=>aS(Za({},"__esModule",{value:!0}),t);var Zr=v(ye=>{"use strict";ye.HttpAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(ye.HttpAuthLocation||(ye.HttpAuthLocation={}));ye.HttpApiKeyAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(ye.HttpApiKeyAuthLocation||(ye.HttpApiKeyAuthLocation={}));ye.EndpointURLScheme=void 0;(function(t){t.HTTP="http",t.HTTPS="https"})(ye.EndpointURLScheme||(ye.EndpointURLScheme={}));ye.AlgorithmId=void 0;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(ye.AlgorithmId||(ye.AlgorithmId={}));var lk=t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>ye.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>ye.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},dk=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},fk=t=>lk(t),pk=t=>dk(t);ye.FieldPosition=void 0;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(ye.FieldPosition||(ye.FieldPosition={}));var hk="__smithy_context";ye.IniSectionType=void 0;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(ye.IniSectionType||(ye.IniSectionType={}));ye.RequestHandlerProtocol=void 0;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(ye.RequestHandlerProtocol||(ye.RequestHandlerProtocol={}));ye.SMITHY_CONTEXT_KEY=hk;ye.getDefaultClientConfiguration=fk;ye.resolveDefaultRuntimeConfig=pk});var Se=v(Jr=>{"use strict";var mk=Zr(),gk=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),yk=t=>({httpHandler:t.httpHandler()}),uf=class{name;kind;values;constructor({name:e,kind:r=mk.FieldPosition.HEADER,values:n=[]}){this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}},lf=class{entries={};encoding;constructor({fields:e=[],encoding:r="utf-8"}){e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}},df=class t{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=Sk(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}};function Sk(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var ff=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function _k(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}Jr.Field=uf;Jr.Fields=lf;Jr.HttpRequest=df;Jr.HttpResponse=ff;Jr.getHttpHandlerExtensionConfiguration=gk;Jr.isValidHostname=_k;Jr.resolveHttpHandlerRuntimeConfig=yk});var oi=v(si=>{"use strict";var Ek=Se();function wk(t){return t}var ES=t=>e=>async r=>{if(!Ek.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return e(r)},wS={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},bk=t=>({applyToStack:e=>{e.add(ES(t),wS)}});si.getHostHeaderPlugin=bk;si.hostHeaderMiddleware=ES;si.hostHeaderMiddlewareOptions=wS;si.resolveHostHeaderConfig=wk});var ii=v(sc=>{"use strict";var bS=()=>(t,e)=>async r=>{try{let n=await t(r),{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,l=c??e.inputFilterSensitiveLog,p=u??e.outputFilterSensitiveLog,{$metadata:h,...m}=n.output;return i?.info?.({clientName:s,commandName:o,input:l(r.input),output:p(m),metadata:h}),n}catch(n){let{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:o,input:u(r.input),error:n,metadata:n.$metadata}),n}},vS={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},vk=t=>({applyToStack:e=>{e.add(bS(),vS)}});sc.getLoggerPlugin=vk;sc.loggerMiddleware=bS;sc.loggerMiddlewareOptions=vS});var RS={};st(RS,{InvokeStore:()=>Rk});var xS,pf,xk,hf,oc,Rk,TS=w(()=>{xS=require("async_hooks"),pf=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";pf||(globalThis.awslambda=globalThis.awslambda||{});xk={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol("_AWS_LAMBDA_TENANT_ID")},hf=class{static storage=new xS.AsyncLocalStorage;static PROTECTED_KEYS=xk;static run(e,r){return this.storage.run({...e},r)}static getContext(){return this.storage.getStore()}static get(e){return this.storage.getStore()?.[e]}static set(e,r){if(this.isProtectedKey(e))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[e]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static getTenantId(){return this.get(this.PROTECTED_KEYS.TENANT_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(e){return e===this.PROTECTED_KEYS.REQUEST_ID||e===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};!pf&&globalThis.awslambda?.InvokeStore?oc=globalThis.awslambda.InvokeStore:(oc=hf,!pf&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=oc));Rk=oc});var CS=v(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.recursionDetectionMiddleware=void 0;var Tk=(TS(),ue(RS)),Ck=Se(),mf="X-Amzn-Trace-Id",Ak="AWS_LAMBDA_FUNCTION_NAME",Ik="_X_AMZN_TRACE_ID",Pk=()=>t=>async e=>{let{request:r}=e;if(!Ck.HttpRequest.isInstance(r))return t(e);let n=Object.keys(r.headers??{}).find(u=>u.toLowerCase()===mf.toLowerCase())??mf;if(r.headers.hasOwnProperty(n))return t(e);let s=process.env[Ak],o=process.env[Ik],a=Tk.InvokeStore.getXRayTraceId()??o,c=u=>typeof u=="string"&&u.length>0;return c(s)&&c(a)&&(r.headers[mf]=a),t({...e,request:r})};ic.recursionDetectionMiddleware=Pk});var ai=v(ac=>{"use strict";var gf=CS(),Ok={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Nk=t=>({applyToStack:e=>{e.add(gf.recursionDetectionMiddleware(),Ok)}});ac.getRecursionDetectionPlugin=Nk;Object.keys(gf).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ac,t)&&Object.defineProperty(ac,t,{enumerable:!0,get:function(){return gf[t]}})})});var yf,kk,AS=w(()=>{yf=x(Zr()),kk=t=>t[yf.SMITHY_CONTEXT_KEY]||(t[yf.SMITHY_CONTEXT_KEY]={})});var dt=v(Sf=>{"use strict";var IS=Zr(),Dk=t=>t[IS.SMITHY_CONTEXT_KEY]||(t[IS.SMITHY_CONTEXT_KEY]={}),Mk=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};Sf.getSmithyContext=Dk;Sf.normalizeProvider=Mk});var PS,OS=w(()=>{PS=(t,e)=>{if(!e||e.length===0)return t;let r=[];for(let n of e)for(let s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function Lk(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var NS,ci,cc=w(()=>{NS=x(dt());OS();ci=(t,e)=>(r,n)=>async s=>{let o=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),i=t.authSchemePreference?await t.authSchemePreference():[],a=PS(o,i),c=Lk(t.httpAuthSchemes),u=(0,NS.getSmithyContext)(n),l=[];for(let p of a){let h=c.get(p.schemeId);if(!h){l.push(`HttpAuthScheme \`${p.schemeId}\` was not enabled for this service.`);continue}let m=h.identityProvider(await e.identityProviderConfigProvider(t));if(!m){l.push(`HttpAuthScheme \`${p.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:y={},signingProperties:b={}}=p.propertiesExtractor?.(t,n)||{};p.identityProperties=Object.assign(p.identityProperties||{},y),p.signingProperties=Object.assign(p.signingProperties||{},b),u.selectedHttpAuthScheme={httpAuthOption:p,identity:await m(p.identityProperties),signer:h.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(s)}});var kS,ui,DS=w(()=>{cc();kS={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},ui=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(ci(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),kS)}})});var ns=v(js=>{"use strict";var Fk=Se(),MS=(t,e)=>(r,n)=>async s=>{let{response:o}=await r(s);try{let i=await e(o,t);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(Fk.HttpResponse.isInstance(o)){let{headers:c={}}=o,u=Object.entries(c);i.$metadata={httpStatusCode:o.statusCode,requestId:_f(/^x-[\w-]+-request-?id$/,u),extendedRequestId:_f(/^x-[\w-]+-id-2$/,u),cfId:_f(/^x-[\w-]+-cf-id$/,u)}}}catch{}}throw i}},_f=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],LS=(t,e)=>(r,n)=>async s=>{let o=t,i=n.endpointV2?.url&&o.urlParser?async()=>o.urlParser(n.endpointV2.url):o.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await e(s.input,{...t,endpoint:i});return r({...s,request:a})},FS={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},US={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Uk(t,e,r){return{applyToStack:n=>{n.add(MS(t,r),FS),n.add(LS(t,e),US)}}}js.deserializerMiddleware=MS;js.deserializerMiddlewareOption=FS;js.getSerdePlugin=Uk;js.serializerMiddleware=LS;js.serializerMiddlewareOption=US});var qS,$S,qk,jS=w(()=>{qS=x(ns());cc();$S={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:qS.serializerMiddlewareOption.name},qk=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(ci(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),$S)}})});var BS=w(()=>{cc();DS();jS()});var HS,VS,$k,jk,Ef,wf=w(()=>{HS=x(Se()),VS=x(dt()),$k=t=>e=>{throw e},jk=(t,e)=>{},Ef=t=>(e,r)=>async n=>{if(!HS.HttpRequest.isInstance(n.request))return e(n);let o=(0,VS.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,u=await e({...n,request:await c.sign(n.request,a,i)}).catch((c.errorHandler||$k)(i));return(c.successHandler||jk)(u.response,i),u}});var zS,li,GS=w(()=>{wf();zS={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},li=t=>({applyToStack:e=>{e.addRelativeTo(Ef(t),zS)}})});var WS=w(()=>{wf();GS()});var Xr,KS=w(()=>{Xr=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function QS(t,e,r,n,s){return async function*(i,a,...c){let u=a,l=i.startingToken??u[r],p=!0,h;for(;p;){if(u[r]=l,s&&(u[s]=u[s]??i.pageSize),i.client instanceof t)h=await Bk(e,i.client,a,i.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield h;let m=l;l=Hk(h,n),p=!!(l&&(!i.stopOnSameToken||l!==m))}return void 0}}var Bk,Hk,YS=w(()=>{Bk=async(t,e,r,n=o=>o,...s)=>{let o=new t(r);return o=n(o)??o,await e.send(o,...s)};Hk=(t,e)=>{let r=t,n=e.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var bf=v(ZS=>{"use strict";var Vk=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";ZS.isArrayBuffer=Vk});var Bs=v(xf=>{"use strict";var zk=bf(),vf=require("buffer"),Gk=(t,e=0,r=t.byteLength-e)=>{if(!zk.isArrayBuffer(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return vf.Buffer.from(t,e,r)},Wk=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?vf.Buffer.from(t,e):vf.Buffer.from(t)};xf.fromArrayBuffer=Gk;xf.fromString=Wk});var JS=v(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.fromBase64=void 0;var Kk=Bs(),Qk=/^[A-Za-z0-9+/]*={0,2}$/,Yk=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Qk.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,Kk.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};uc.fromBase64=Yk});var Ve=v(lc=>{"use strict";var XS=Bs(),e_=t=>{let e=XS.fromString(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},Zk=t=>typeof t=="string"?e_(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),Jk=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return XS.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength).toString("utf8")};lc.fromUtf8=e_;lc.toUint8Array=Zk;lc.toUtf8=Jk});var t_=v(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.toBase64=void 0;var Xk=Bs(),eD=Ve(),tD=t=>{let e;if(typeof t=="string"?e=(0,eD.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Xk.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};dc.toBase64=tD});var ze=v(di=>{"use strict";var r_=JS(),n_=t_();Object.keys(r_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(di,t)&&Object.defineProperty(di,t,{enumerable:!0,get:function(){return r_[t]}})});Object.keys(n_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(di,t)&&Object.defineProperty(di,t,{enumerable:!0,get:function(){return n_[t]}})})});var Tf=v(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.ChecksumStream=void 0;var rD=ze(),nD=require("stream"),Rf=class extends nD.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:e,checksum:r,source:n,checksumSourceLocation:s,base64Encoder:o}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=o??rD.toBase64,this.expectedChecksum=e,this.checksum=r,this.checksumSourceLocation=s,this.source.pipe(this)}_read(e){}_write(e,r,n){try{this.checksum.update(e),this.push(e)}catch(s){return n(s)}return n()}async _final(e){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return e(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return e(r)}return this.push(null),e()}};fc.ChecksumStream=Rf});var en=v(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.isBlob=Hs.isReadableStream=void 0;var sD=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);Hs.isReadableStream=sD;var oD=t=>typeof Blob=="function"&&(t?.constructor?.name===Blob.name||t instanceof Blob);Hs.isBlob=oD});var s_=v(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.ChecksumStream=void 0;var iD=typeof ReadableStream=="function"?ReadableStream:function(){},Cf=class extends iD{};pc.ChecksumStream=Cf});var o_=v(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.createChecksumStream=void 0;var aD=ze(),cD=en(),uD=s_(),lD=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,cD.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let o=s??aD.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(c,u){e.update(c),u.enqueue(c)},async flush(c){let u=await e.digest(),l=o(u);if(t!==l){let p=new Error(`Checksum mismatch: expected "${t}" but received "${l}" in response header "${n}".`);c.error(p)}else c.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,uD.ChecksumStream.prototype),a};hc.createChecksumStream=lD});var i_=v(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.createChecksumStream=hD;var dD=en(),fD=Tf(),pD=o_();function hD(t){return typeof ReadableStream=="function"&&(0,dD.isReadableStream)(t.source)?(0,pD.createChecksumStream)(t):new fD.ChecksumStream(t)}});var Pf=v(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.ByteArrayCollector=void 0;var If=class{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let e=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}};mc.ByteArrayCollector=If});var l_=v(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.createBufferedReadable=void 0;wr.createBufferedReadableStream=a_;wr.merge=c_;wr.flush=gc;wr.sizeOf=Vs;wr.modeOf=u_;var mD=Pf();function a_(t,e,r){let n=t.getReader(),s=!1,o=0,i=["",new mD.ByteArrayCollector(u=>new Uint8Array(u))],a=-1,c=async u=>{let{value:l,done:p}=await n.read(),h=l;if(p){if(a!==-1){let m=gc(i,a);Vs(m)>0&&u.enqueue(m)}u.close()}else{let m=u_(h,!1);if(a!==m&&(a>=0&&u.enqueue(gc(i,a)),a=m),a===-1){u.enqueue(h);return}let y=Vs(h);o+=y;let b=Vs(i[a]);if(y>=e&&b===0)u.enqueue(h);else{let T=c_(i,a,h);!s&&o>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${y} is below threshold of ${e}, automatically buffering.`)),T>=e?u.enqueue(gc(i,a)):await c(u)}}};return new ReadableStream({pull:c})}wr.createBufferedReadable=a_;function c_(t,e,r){switch(e){case 0:return t[0]+=r,Vs(t[0]);case 1:case 2:return t[e].push(r),Vs(t[e])}}function gc(t,e){switch(e){case 0:let r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Vs(t){return t?.byteLength??t?.length??0}function u_(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}});var f_=v(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.createBufferedReadable=SD;var gD=require("node:stream"),d_=Pf(),br=l_(),yD=en();function SD(t,e,r){if((0,yD.isReadableStream)(t))return(0,br.createBufferedReadableStream)(t,e,r);let n=new gD.Readable({read(){}}),s=!1,o=0,i=["",new d_.ByteArrayCollector(c=>new Uint8Array(c)),new d_.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return t.on("data",c=>{let u=(0,br.modeOf)(c,!0);if(a!==u&&(a>=0&&n.push((0,br.flush)(i,a)),a=u),a===-1){n.push(c);return}let l=(0,br.sizeOf)(c);o+=l;let p=(0,br.sizeOf)(i[a]);if(l>=e&&p===0)n.push(c);else{let h=(0,br.merge)(i,a,c);!s&&o>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${l} is below threshold of ${e}, automatically buffering.`)),h>=e&&n.push((0,br.flush)(i,a))}}),t.on("end",()=>{if(a!==-1){let c=(0,br.flush)(i,a);(0,br.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var p_=v(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.getAwsChunkedEncodingStream=void 0;var _D=require("stream"),ED=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:o,streamHasher:i}=e,a=r!==void 0&&s!==void 0&&o!==void 0&&i!==void 0,c=a?i(s,t):void 0,u=new _D.Readable({read:()=>{}});return t.on("data",l=>{let p=n(l)||0;u.push(`${p.toString(16)}\r
`),u.push(l),u.push(`\r
`)}),t.on("end",async()=>{if(u.push(`0\r
`),a){let l=r(await c);u.push(`${o}:${l}\r
`),u.push(`\r
`)}u.push(null)}),u};yc.getAwsChunkedEncodingStream=ED});var h_=v(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.headStream=wD;async function wD(t,e){let r=0,n=[],s=t.getReader(),o=!1;for(;!o;){let{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=u?.byteLength??0),r>=e)break;o=c}s.releaseLock();let i=new Uint8Array(Math.min(e,r)),a=0;for(let c of n){if(c.byteLength>i.byteLength-a){i.set(c.subarray(0,i.byteLength-a),a);break}else i.set(c,a);a+=c.length}return i}});var m_=v(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.headStream=void 0;var bD=require("stream"),vD=h_(),xD=en(),RD=(t,e)=>(0,xD.isReadableStream)(t)?(0,vD.headStream)(t,e):new Promise((r,n)=>{let s=new kf;s.limit=e,t.pipe(s),t.on("error",o=>{s.end(),n(o)}),s.on("error",n),s.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})});Sc.headStream=RD;var kf=class extends bD.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(e,r,n){if(this.buffers.push(e),this.bytesBuffered+=e.byteLength??0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-s),this.emit("finish")}n()}}});var Mf=v(Df=>{"use strict";var g_=t=>encodeURIComponent(t).replace(/[!'()*]/g,TD),TD=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,CD=t=>t.split("/").map(g_).join("/");Df.escapeUri=g_;Df.escapeUriPath=CD});var Ff=v(y_=>{"use strict";var Lf=Mf();function AD(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=Lf.escapeUri(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)e.push(`${r}=${Lf.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Lf.escapeUri(n)}`),e.push(s)}}return e.join("&")}y_.buildQueryString=AD});var ss=v(fi=>{"use strict";var w_=Se(),b_=Ff(),_c=require("http"),Ec=require("https"),v_=require("stream"),Uf=require("http2"),ID=["ECONNRESET","EPIPE","ETIMEDOUT"],x_=t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},ot={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},S_=1e3,PD=(t,e,r=0)=>{if(!r)return-1;let n=s=>{let o=ot.setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),i=a=>{a?.connecting?a.on("connect",()=>{ot.clearTimeout(o)}):ot.clearTimeout(o)};t.socket?i(t.socket):t.on("socket",i)};return r<2e3?(n(0),0):ot.setTimeout(n.bind(null,S_),S_)},OD=(t,e,r=0,n,s)=>r?ot.setTimeout(()=>{let o=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let i=Object.assign(new Error(o),{name:"TimeoutError",code:"ETIMEDOUT"});t.destroy(i),e(i)}else o+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(o)},r):-1,ND=3e3,kD=(t,{keepAlive:e,keepAliveMsecs:r},n=ND)=>{if(e!==!0)return-1;let s=()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",o=>{o.setKeepAlive(e,r||0)})};return n===0?(s(),0):ot.setTimeout(s,n)},__=3e3,DD=(t,e,r=0)=>{let n=s=>{let o=r-s,i=()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};t.socket?(t.socket.setTimeout(o,i),t.on("close",()=>t.socket?.removeListener("timeout",i))):t.setTimeout(o,i)};return 0<r&&r<6e3?(n(0),0):ot.setTimeout(n.bind(null,r===0?0:__),__)},E_=6e3;async function R_(t,e,r=E_,n=!1){let s=e.headers??{},o=s.Expect||s.expect,i=-1,a=!0;!n&&o==="100-continue"&&(a=await Promise.race([new Promise(c=>{i=Number(ot.setTimeout(()=>c(!0),Math.max(E_,r)))}),new Promise(c=>{t.on("continue",()=>{ot.clearTimeout(i),c(!0)}),t.on("response",()=>{ot.clearTimeout(i),c(!1)}),t.on("error",()=>{ot.clearTimeout(i),c(!1)})})])),a&&MD(t,e.body)}function MD(t,e){if(e instanceof v_.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}var LD=0,qf=class t{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(e){return typeof e?.handle=="function"?e:new t(e)}static checkSocketUsage(e,r,n=console){let{sockets:s,requests:o,maxSockets:i}=e;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(s&&o)for(let c in s){let u=s[c]?.length??0,l=o[c]?.length??0;if(u>=i&&l>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${l} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(e){this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:c}=e||{},u=!0,l=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:c,httpAgent:i instanceof _c.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new _c.Agent({keepAlive:u,maxSockets:l,...i}),httpsAgent:a instanceof Ec.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new Ec.Agent({keepAlive:u,maxSockets:l,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,o)=>{let i=this.config,a,c=[],u=async re=>{await a,c.forEach(ot.clearTimeout),s(re)},l=async re=>{await a,c.forEach(ot.clearTimeout),o(re)};if(r?.aborted){let re=new Error("Request aborted");re.name="AbortError",l(re);return}let p=e.protocol==="https:",h=e.headers??{},m=(h.Expect??h.expect)==="100-continue",y=p?i.httpsAgent:i.httpAgent;m&&!this.externalAgent&&(y=new(p?Ec.Agent:_c.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(ot.setTimeout(()=>{this.socketWarningTimestamp=t.checkSocketUsage(y,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let b=b_.buildQueryString(e.query||{}),T;if(e.username!=null||e.password!=null){let re=e.username??"",ie=e.password??"";T=`${re}:${ie}`}let A=e.path;b&&(A+=`?${b}`),e.fragment&&(A+=`#${e.fragment}`);let N=e.hostname??"";N[0]==="["&&N.endsWith("]")?N=e.hostname.slice(1,-1):N=e.hostname;let q={headers:e.headers,host:N,method:e.method,path:A,port:e.port,agent:y,auth:T},Z=(p?Ec.request:_c.request)(q,re=>{let ie=new w_.HttpResponse({statusCode:re.statusCode||-1,reason:re.statusMessage,headers:x_(re.headers),body:re});u({response:ie})});if(Z.on("error",re=>{ID.includes(re.code)?l(Object.assign(re,{name:"TimeoutError"})):l(re)}),r){let re=()=>{Z.destroy();let ie=new Error("Request aborted");ie.name="AbortError",l(ie)};if(typeof r.addEventListener=="function"){let ie=r;ie.addEventListener("abort",re,{once:!0}),Z.once("close",()=>ie.removeEventListener("abort",re))}else r.onabort=re}let ge=n??i.requestTimeout;c.push(PD(Z,l,i.connectionTimeout)),c.push(OD(Z,l,ge,i.throwOnRequestTimeout,i.logger??console)),c.push(DD(Z,l,i.socketTimeout));let Pe=q.agent;typeof Pe=="object"&&"keepAlive"in Pe&&c.push(kD(Z,{keepAlive:Pe.keepAlive,keepAliveMsecs:Pe.keepAliveMsecs})),a=R_(Z,e,ge,this.externalAgent).catch(re=>(c.forEach(ot.clearTimeout),o(re)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}},$f=class{sessions=[];constructor(e){this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}},jf=class{constructor(e){if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(e,r){let n=this.getUrlString(e),s=this.sessionCache.get(n);if(s){let c=s.poll();if(c&&!this.config.disableConcurrency)return c}let o=Uf.connect(n);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),o.unref();let i=()=>{o.destroy(),this.deleteSession(n,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(n,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new $f;return a.offerLast(o),this.sessionCache.set(n,a),o}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},Bf=class t{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new jf({});static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(n):r(e||{})})}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:o}=this.config,i=n??s;return new Promise((a,c)=>{let u=!1,l,p=async he=>{await l,a(he)},h=async he=>{await l,c(he)};if(r?.aborted){u=!0;let he=new Error("Request aborted");he.name="AbortError",h(he);return}let{hostname:m,method:y,port:b,protocol:T,query:A}=e,N="";if(e.username!=null||e.password!=null){let he=e.username??"",Oe=e.password??"";N=`${he}:${Oe}@`}let q=`${T}//${N}${m}${b?`:${b}`:""}`,V={destination:new URL(q)},Z=this.connectionManager.lease(V,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:o||!1}),ge=he=>{o&&this.destroySession(Z),u=!0,h(he)},Pe=b_.buildQueryString(A||{}),re=e.path;Pe&&(re+=`?${Pe}`),e.fragment&&(re+=`#${e.fragment}`);let ie=Z.request({...e.headers,[Uf.constants.HTTP2_HEADER_PATH]:re,[Uf.constants.HTTP2_HEADER_METHOD]:y});if(Z.ref(),ie.on("response",he=>{let Oe=new w_.HttpResponse({statusCode:he[":status"]||-1,headers:x_(he),body:ie});u=!0,p({response:Oe}),o&&(Z.close(),this.connectionManager.deleteSession(q,Z))}),i&&ie.setTimeout(i,()=>{ie.close();let he=new Error(`Stream timed out because of no activity for ${i} ms`);he.name="TimeoutError",ge(he)}),r){let he=()=>{ie.close();let Oe=new Error("Request aborted");Oe.name="AbortError",ge(Oe)};if(typeof r.addEventListener=="function"){let Oe=r;Oe.addEventListener("abort",he,{once:!0}),ie.once("close",()=>Oe.removeEventListener("abort",he))}else r.onabort=he}ie.on("frameError",(he,Oe,Os)=>{ge(new Error(`Frame type id ${he} in stream id ${Os} has failed with code ${Oe}.`))}),ie.on("error",ge),ie.on("aborted",()=>{ge(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${ie.rstCode}.`))}),ie.on("close",()=>{Z.unref(),o&&Z.destroy(),u||ge(new Error("Unexpected error: http2 request did not get a response"))}),l=R_(ie,e,i)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},Hf=class extends v_.Writable{bufferedBytes=[];_write(e,r,n){this.bufferedBytes.push(e),n()}},FD=t=>UD(t)?qD(t):new Promise((e,r)=>{let n=new Hf;t.pipe(n),t.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),UD=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;async function qD(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let o=new Uint8Array(s),i=0;for(let a of e)o.set(a,i),i+=a.length;return o}fi.DEFAULT_REQUEST_TIMEOUT=LD;fi.NodeHttp2Handler=Bf;fi.NodeHttpHandler=qf;fi.streamCollector=FD});var A_=v(bc=>{"use strict";var T_=Se(),$D=Ff(),jD=ze();function C_(t,e){return new Request(t,e)}function BD(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}var wc={supported:void 0},Vf=class t{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),wc.supported===void 0&&(wc.supported=typeof Request<"u"&&"keepalive"in C_("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let N=new Error("Request aborted");return N.name="AbortError",Promise.reject(N)}let a=e.path,c=$D.buildQueryString(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){let N=e.username??"",q=e.password??"";u=`${N}:${q}@`}let{port:l,method:p}=e,h=`${e.protocol}//${u}${e.hostname}${l?`:${l}`:""}${a}`,m=p==="GET"||p==="HEAD"?void 0:e.body,y={body:m,headers:new Headers(e.headers),method:p,credentials:i};this.config?.cache&&(y.cache=this.config.cache),m&&(y.duplex="half"),typeof AbortController<"u"&&(y.signal=r),wc.supported&&(y.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(y,this.config.requestInit(e));let b=()=>{},T=C_(h,y),A=[fetch(T).then(N=>{let q=N.headers,V={};for(let ge of q.entries())V[ge[0]]=ge[1];return N.body!=null?{response:new T_.HttpResponse({headers:V,reason:N.statusText,statusCode:N.status,body:N.body})}:N.blob().then(ge=>({response:new T_.HttpResponse({headers:V,reason:N.statusText,statusCode:N.status,body:ge})}))}),BD(s)];return r&&A.push(new Promise((N,q)=>{let V=()=>{let Z=new Error("Request aborted");Z.name="AbortError",q(Z)};if(typeof r.addEventListener=="function"){let Z=r;Z.addEventListener("abort",V,{once:!0}),b=()=>Z.removeEventListener("abort",V)}else r.onabort=V})),Promise.race(A).finally(b)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}},HD=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):VD(t):zD(t);async function VD(t){let e=await GD(t),r=jD.fromBase64(e);return new Uint8Array(r)}async function zD(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let o=new Uint8Array(s),i=0;for(let a of e)o.set(a,i),i+=a.length;return o}function GD(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",o=s.indexOf(","),i=o>-1?o+1:s.length;e(s.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}bc.FetchHttpHandler=Vf;bc.keepAliveSupport=wc;bc.streamCollector=HD});var Wf=v(Gf=>{"use strict";var I_={},zf={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),I_[t]=e,zf[e]=t}function WD(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in zf)e[r/2]=zf[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function KD(t){let e="";for(let r=0;r<t.byteLength;r++)e+=I_[t[r]];return e}Gf.fromHex=WD;Gf.toHex=KD});var k_=v(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.sdkStreamMixin=void 0;var QD=A_(),YD=ze(),ZD=Wf(),JD=Ve(),P_=en(),O_="The stream has already been transformed.",XD=t=>{if(!N_(t)&&!(0,P_.isReadableStream)(t)){let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(O_);return e=!0,await(0,QD.streamCollector)(t)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{let o=await r();if(s==="base64")return(0,YD.toBase64)(o);if(s==="hex")return(0,ZD.toHex)(o);if(s===void 0||s==="utf8"||s==="utf-8")return(0,JD.toUtf8)(o);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(O_);if(e=!0,N_(t))return n(t);if((0,P_.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};vc.sdkStreamMixin=XD;var N_=t=>typeof Blob=="function"&&t instanceof Blob});var M_=v(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.sdkStreamMixin=void 0;var eM=ss(),tM=Bs(),Kf=require("stream"),rM=k_(),D_="The stream has already been transformed.",nM=t=>{if(!(t instanceof Kf.Readable))try{return(0,rM.sdkStreamMixin)(t)}catch{let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(D_);return e=!0,await(0,eM.streamCollector)(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,tM.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(e)throw new Error(D_);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Kf.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return e=!0,Kf.Readable.toWeb(t)}})};xc.sdkStreamMixin=nM});var L_=v(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.splitStream=sM;async function sM(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}});var q_=v(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.splitStream=iM;var F_=require("stream"),oM=L_(),U_=en();async function iM(t){if((0,U_.isReadableStream)(t)||(0,U_.isBlob)(t))return(0,oM.splitStream)(t);let e=new F_.PassThrough,r=new F_.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}});var Rc=v(qe=>{"use strict";var $_=ze(),j_=Ve(),B_=Tf(),H_=i_(),V_=f_(),z_=p_(),G_=m_(),W_=M_(),K_=q_(),Q_=en(),Zf=class t extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?t.mutate($_.fromBase64(e)):t.mutate(j_.fromUtf8(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return e==="base64"?$_.toBase64(this):j_.toUtf8(this)}};qe.Uint8ArrayBlobAdapter=Zf;Object.keys(B_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return B_[t]}})});Object.keys(H_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return H_[t]}})});Object.keys(V_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return V_[t]}})});Object.keys(z_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return z_[t]}})});Object.keys(G_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return G_[t]}})});Object.keys(W_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return W_[t]}})});Object.keys(K_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return K_[t]}})});Object.keys(Q_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(qe,t)&&Object.defineProperty(qe,t,{enumerable:!0,get:function(){return Q_[t]}})})});var Tc,Wt,Cc=w(()=>{Tc=x(Rc()),Wt=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Tc.Uint8ArrayBlobAdapter.mutate(t);if(!t)return Tc.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return Tc.Uint8ArrayBlobAdapter.mutate(await r)}});function sr(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var Ac=w(()=>{});var Kt,Jf=w(()=>{Kt=t=>typeof t=="function"?t():t});var pi,Ic=w(()=>{pi=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s})});var Y_,Z_,J_,Xf,X_=w(()=>{Y_=x(Se()),Z_=x(dt());Ic();J_=t=>(e,r)=>async n=>{let{response:s}=await e(n),{operationSchema:o}=(0,Z_.getSmithyContext)(r),[,i,a,c,u,l]=o??[];try{let p=await t.protocol.deserializeResponse(pi(i,a,c,u,l),{...t,...r},s);return{response:s,output:p}}catch(p){if(Object.defineProperty(p,"$response",{value:s}),!("$metadata"in p)){let h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{p.message+=`
  `+h}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(h):r.logger?.warn?.(h)}typeof p.$responseBodyText<"u"&&p.$response&&(p.$response.body=p.$responseBodyText);try{if(Y_.HttpResponse.isInstance(s)){let{headers:m={}}=s,y=Object.entries(m);p.$metadata={httpStatusCode:s.statusCode,requestId:Xf(/^x-[\w-]+-request-?id$/,y),extendedRequestId:Xf(/^x-[\w-]+-id-2$/,y),cfId:Xf(/^x-[\w-]+-cf-id$/,y)}}}catch{}}throw p}},Xf=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1]});var eE,tE,rE=w(()=>{eE=x(dt());Ic();tE=t=>(e,r)=>async n=>{let{operationSchema:s}=(0,eE.getSmithyContext)(r),[,o,i,a,c,u]=s??[],l=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,p=await t.protocol.serializeRequest(pi(o,i,a,c,u),n.input,{...t,...r,endpoint:l});return e({...n,request:p})}});function aM(t){return{applyToStack:e=>{e.add(tE(t),sE),e.add(J_(t),nE),t.protocol.setSerdeContext(t)}}}var nE,sE,oE=w(()=>{X_();rE();nE={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},sE={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Ne,tn=w(()=>{Ne=class{name;namespace;traits;static assign(e,r){return Object.assign(e,r)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Pc,cM,iE=w(()=>{tn();Pc=class t extends Ne{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=t.symbol},cM=(t,e,r,n)=>Ne.assign(new Pc,{name:e,namespace:t,traits:r,valueSchema:n})});var Oc,uM,aE=w(()=>{tn();Oc=class t extends Ne{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=t.symbol},uM=(t,e,r,n,s)=>Ne.assign(new Oc,{name:e,namespace:t,traits:r,keySchema:n,valueSchema:s})});var Nc,lM,cE=w(()=>{tn();Nc=class t extends Ne{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=t.symbol},lM=(t,e,r,n,s)=>Ne.assign(new Nc,{name:e,namespace:t,traits:r,input:n,output:s})});var zs,dM,ep=w(()=>{tn();zs=class t extends Ne{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=t.symbol},dM=(t,e,r,n,s)=>Ne.assign(new zs,{name:e,namespace:t,traits:r,memberNames:n,memberList:s})});var kc,fM,uE=w(()=>{tn();ep();kc=class t extends zs{static symbol=Symbol.for("@smithy/err");ctor;symbol=t.symbol},fM=(t,e,r,n,s,o)=>Ne.assign(new kc,{name:e,namespace:t,traits:r,memberNames:n,memberList:s,ctor:null})});function or(t){if(typeof t=="object")return t;t=t|0;let e={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}var tp=w(()=>{});function hi(t,e){if(t instanceof $)return Object.assign(t,{memberName:e,_isMemberSchema:!0});let r=$;return new r(t,e)}var $,rp,lE,dE=w(()=>{Jf();tp();$=class t{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=t.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;let n=[],s=e,o=e;for(this._isMemberSchema=!1;rp(s);)n.push(s[1]),s=s[0],o=Kt(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,or(a))}}else this.memberTraits=0;if(o instanceof t){let i=this.memberTraits;Object.assign(this,o),this.memberTraits=Object.assign({},i,o.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??o.memberName;return}if(this.schema=Kt(o),lE(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(o),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){let r=Kt(e);if(r instanceof t)return r;if(rp(r)){let[n,s]=r;if(n instanceof t)return Object.assign(n.getMergedTraits(),or(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new t(r)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){let e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){let e=o=>(o&4)===4||!!o?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return e(r)||e(n)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return or(this.memberTraits)}getOwnTraits(){return or(this.traits)}getKeySchema(){let[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=e?15:n[4]??0;return hi([s,0],"key")}getValueSchema(){let e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],o=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(o!=null)return hi([o,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){let n=r[4].indexOf(e),s=r[5][n];return hi(rp(s)?s:[s,0],e)}if(this.isDocumentSchema())return hi([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],hi([e[5][r],0],e[4][r])]}};rp=t=>Array.isArray(t)&&t.length===2,lE=t=>Array.isArray(t)&&t.length>=5});var mi,pM,hM,fE=w(()=>{tn();mi=class t extends Ne{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=t.symbol},pM=(t,e,r,n)=>Ne.assign(new mi,{name:e,namespace:t,traits:n,schemaRef:r}),hM=(t,e,r,n)=>Ne.assign(new mi,{name:e,namespace:t,traits:r,schemaRef:n})});var mM,pE=w(()=>{mM={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var Le,hE=w(()=>{Le=class t{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,n=new Map){this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return t.registries.has(e)||t.registries.set(e,new t(e)),t.registries.get(e)}register(e,r){let n=this.normalizeShapeId(e);t.for(n.split("#")[0]).schemas.set(n,r)}getSchema(e){let r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){let n=e,s=t.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(e){let r=e;return t.for(r[1]).exceptions.get(r)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}});var np={};st(np,{ErrorSchema:()=>kc,ListSchema:()=>Pc,MapSchema:()=>Oc,NormalizedSchema:()=>$,OperationSchema:()=>Nc,SCHEMA:()=>mM,Schema:()=>Ne,SimpleSchema:()=>mi,StructureSchema:()=>zs,TypeRegistry:()=>Le,deref:()=>Kt,deserializerMiddlewareOption:()=>nE,error:()=>fM,getSchemaSerdePlugin:()=>aM,isStaticSchema:()=>lE,list:()=>cM,map:()=>uM,op:()=>lM,operation:()=>pi,serializerMiddlewareOption:()=>sE,sim:()=>pM,simAdapter:()=>hM,struct:()=>dM,translateTraits:()=>or});var be=w(()=>{Jf();oE();iE();aE();cE();Ic();uE();dE();tn();fE();ep();pE();tp();hE()});var gM,mE=w(()=>{gM=(t,e,r=n=>n)=>t});var yM,SM,gi,_M,Dc,yi,EM,sp,op,ip,ap,wM,bM,gE,vM,xM,Lc,RM,cp,TM,Gs,up,CM,AM,IM,yE,SE,PM,OM,os,lp,Mc,Si,dp=w(()=>{yM=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},SM=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&Si.warn(Mc(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&Si.warn(Mc(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},gi=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&Si.warn(Mc(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},_M=Math.ceil(34028234663852886e22),Dc=t=>{let e=gi(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>_M)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},yi=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},EM=yi,sp=t=>ap(t,32),op=t=>ap(t,16),ip=t=>ap(t,8),ap=(t,e)=>{let r=yi(t);if(r!==void 0&&wM(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},wM=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},bM=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},gE=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},vM=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return Si.warn(Mc(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},xM=t=>{if(t==null)return;let e=gE(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},Lc=t=>gi(typeof t=="string"?Gs(t):t),RM=Lc,cp=t=>Dc(typeof t=="string"?Gs(t):t),TM=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Gs=t=>{let e=t.match(TM);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},up=t=>typeof t=="string"?yE(t):gi(t),CM=up,AM=up,IM=t=>typeof t=="string"?yE(t):Dc(t),yE=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},SE=t=>yi(typeof t=="string"?Gs(t):t),PM=SE,OM=t=>sp(typeof t=="string"?Gs(t):t),os=t=>op(typeof t=="string"?Gs(t):t),lp=t=>ip(typeof t=="string"?Gs(t):t),Mc=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),Si={warn:console.warn}});function Ei(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),o=t.getUTCHours(),i=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=o<10?`0${o}`:`${o}`,l=i<10?`0${i}`:`${i}`,p=a<10?`0${a}`:`${a}`;return`${NM[n]}, ${c} ${pp[r]} ${e} ${u}:${l}:${p} GMT`}var NM,pp,kM,DM,MM,hp,LM,FM,UM,mp,gp,_i,qM,$M,jM,fp,BM,HM,VM,ir,zM,GM,Ws,_E=w(()=>{dp();NM=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],pp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];kM=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),DM=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=kM.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,c,u]=e,l=os(Ws(n)),p=ir(s,"month",1,12),h=ir(o,"day",1,31);return _i(l,p,h,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})},MM=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),hp=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=MM.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,c,u,l]=e,p=os(Ws(n)),h=ir(s,"month",1,12),m=ir(o,"day",1,31),y=_i(p,h,m,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u});return l.toUpperCase()!="Z"&&y.setTime(y.getTime()-GM(l)),y},LM=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),FM=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),UM=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),mp=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=LM.exec(t);if(e){let[r,n,s,o,i,a,c,u]=e;return _i(os(Ws(o)),fp(s),ir(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})}if(e=FM.exec(t),e){let[r,n,s,o,i,a,c,u]=e;return jM(_i(qM(o),fp(s),ir(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(e=UM.exec(t),e){let[r,n,s,o,i,a,c,u]=e;return _i(os(Ws(u)),fp(n),ir(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},gp=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=Lc(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},_i=(t,e,r,n)=>{let s=e-1;return HM(t,s,r),new Date(Date.UTC(t,s,r,ir(n.hours,"hour",0,23),ir(n.minutes,"minute",0,59),ir(n.seconds,"seconds",0,60),zM(n.fractionalMilliseconds)))},qM=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+os(Ws(t));return r<e?r+100:r},$M=50*365*24*60*60*1e3,jM=t=>t.getTime()-new Date().getTime()>$M?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,fp=t=>{let e=pp.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},BM=[31,28,31,30,31,30,31,31,30,31,30,31],HM=(t,e,r)=>{let n=BM[e];if(e===1&&VM(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${pp[e]} in ${t}: ${r}`)},VM=t=>t%4===0&&(t%100!==0||t%400===0),ir=(t,e,r,n)=>{let s=lp(Ws(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},zM=t=>t==null?0:cp("0."+t)*1e3,GM=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},Ws=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)}});var wi={};st(wi,{__addDisposableResource:()=>VE,__assign:()=>Fc,__asyncDelegator:()=>LE,__asyncGenerator:()=>ME,__asyncValues:()=>FE,__await:()=>Ks,__awaiter:()=>IE,__classPrivateFieldGet:()=>jE,__classPrivateFieldIn:()=>HE,__classPrivateFieldSet:()=>BE,__createBinding:()=>qc,__decorate:()=>bE,__disposeResources:()=>zE,__esDecorate:()=>xE,__exportStar:()=>OE,__extends:()=>EE,__generator:()=>PE,__importDefault:()=>$E,__importStar:()=>qE,__makeTemplateObject:()=>UE,__metadata:()=>AE,__param:()=>vE,__propKey:()=>TE,__read:()=>_p,__rest:()=>wE,__rewriteRelativeImportExtension:()=>GE,__runInitializers:()=>RE,__setFunctionName:()=>CE,__spread:()=>NE,__spreadArray:()=>DE,__spreadArrays:()=>kE,__values:()=>Uc,default:()=>QM});function EE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");yp(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function wE(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function bE(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,r,o):i(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}function vE(t,e){return function(r,n){e(r,n,t)}}function xE(t,e,r,n,s,o){function i(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,l=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),p,h=!1,m=r.length-1;m>=0;m--){var y={};for(var b in n)y[b]=b==="access"?{}:n[b];for(var b in n.access)y.access[b]=n.access[b];y.addInitializer=function(A){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(A||null))};var T=(0,r[m])(a==="accessor"?{get:l.get,set:l.set}:l[c],y);if(a==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(p=i(T.get))&&(l.get=p),(p=i(T.set))&&(l.set=p),(p=i(T.init))&&s.unshift(p)}else(p=i(T))&&(a==="field"?s.unshift(p):l[c]=p)}u&&Object.defineProperty(u,n.name,l),h=!0}function RE(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function TE(t){return typeof t=="symbol"?t:"".concat(t)}function CE(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function AE(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function IE(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(l){try{u(n.next(l))}catch(p){i(p)}}function c(l){try{u(n.throw(l))}catch(p){i(p)}}function u(l){l.done?o(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function PE(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function OE(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qc(e,t,r)}function Uc(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _p(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function NE(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_p(arguments[e]));return t}function kE(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function DE(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Ks(t){return this instanceof Ks?(this.v=t,this):new Ks(t)}function ME(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(m){return function(y){return Promise.resolve(y).then(m,p)}}function a(m,y){n[m]&&(s[m]=function(b){return new Promise(function(T,A){o.push([m,b,T,A])>1||c(m,b)})},y&&(s[m]=y(s[m])))}function c(m,y){try{u(n[m](y))}catch(b){h(o[0][3],b)}}function u(m){m.value instanceof Ks?Promise.resolve(m.value.v).then(l,p):h(o[0][2],m)}function l(m){c("next",m)}function p(m){c("throw",m)}function h(m,y){m(y),o.shift(),o.length&&c(o[0][0],o[0][1])}}function LE(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,o){e[s]=t[s]?function(i){return(r=!r)?{value:Ks(t[s](i)),done:!1}:o?o(i):i}:o}}function FE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Uc=="function"?Uc(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(i){return new Promise(function(a,c){i=t[o](i),s(a,c,i.done,i.value)})}}function s(o,i,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},i)}}function UE(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function qE(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Sp(t),n=0;n<r.length;n++)r[n]!=="default"&&qc(e,t,r[n]);return WM(e,t),e}function $E(t){return t&&t.__esModule?t:{default:t}}function jE(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function BE(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function HE(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function VE(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function zE(t){function e(o){t.error=t.hasError?new KM(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return e(i),s()})}else n|=1}catch(i){e(i)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function GE(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,i){return n?e?".jsx":".js":s&&(!o||!i)?r:s+o+"."+i.toLowerCase()+"js"}):t}var yp,Fc,qc,WM,Sp,KM,QM,bi=w(()=>{yp=function(t,e){return yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},yp(t,e)};Fc=function(){return Fc=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Fc.apply(this,arguments)};qc=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});WM=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Sp=function(t){return Sp=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Sp(t)};KM=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};QM={__extends:EE,__assign:Fc,__rest:wE,__decorate:bE,__param:vE,__esDecorate:xE,__runInitializers:RE,__propKey:TE,__setFunctionName:CE,__metadata:AE,__awaiter:IE,__generator:PE,__createBinding:qc,__exportStar:OE,__values:Uc,__read:_p,__spread:NE,__spreadArrays:kE,__spreadArray:DE,__await:Ks,__asyncGenerator:ME,__asyncDelegator:LE,__asyncValues:FE,__makeTemplateObject:UE,__importStar:qE,__importDefault:$E,__classPrivateFieldGet:jE,__classPrivateFieldSet:BE,__classPrivateFieldIn:HE,__addDisposableResource:VE,__disposeResources:zE,__rewriteRelativeImportExtension:GE}});var KE=v($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.randomUUID=void 0;var YM=(bi(),ue(wi)),WE=YM.__importDefault(require("crypto"));$c.randomUUID=WE.default.randomUUID.bind(WE.default)});var Ep=v(YE=>{"use strict";var QE=KE(),Xe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),ZM=()=>{if(QE.randomUUID)return QE.randomUUID();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,Xe[t[0]]+Xe[t[1]]+Xe[t[2]]+Xe[t[3]]+"-"+Xe[t[4]]+Xe[t[5]]+"-"+Xe[t[6]]+Xe[t[7]]+"-"+Xe[t[8]]+Xe[t[9]]+"-"+Xe[t[10]]+Xe[t[11]]+Xe[t[12]]+Xe[t[13]]+Xe[t[14]]+Xe[t[15]]};YE.v4=ZM});var ar,ZE=w(()=>{ar=x(Ep())});var it,JE=w(()=>{it=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};it.from=t=>t&&typeof t=="object"&&(t instanceof it||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?it(String(t)):it(JSON.stringify(t));it.fromObject=it.from});function wp(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}var XE=w(()=>{});function vr(t,e,r){let n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}var bp,vp,xp,ew,tw,JM,XM,eL,tL,rL,vi,Rp,Tp,rw=w(()=>{bp="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",vp="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",xp="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",ew="(\\d?\\d)",tw="(\\d{4})",JM=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),XM=new RegExp(`^${bp}, ${ew} ${vp} ${tw} ${xp} GMT$`),eL=new RegExp(`^${bp}, ${ew}-${vp}-(\\d\\d) ${xp} GMT$`),tL=new RegExp(`^${bp} ${vp} ( [1-9]|\\d\\d) ${xp} ${tw}$`),rL=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vi=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},Rp=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");let e=JM.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,r,n,s,o,i,a,,c,u]=e;vr(n,1,12),vr(s,1,31),vr(o,0,23),vr(i,0,59),vr(a,0,60);let l=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(o),Number(i),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(l.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){let[,p,h,m]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],y=p==="-"?1:-1;l.setTime(l.getTime()+y*(Number(h)*60*60*1e3+Number(m)*60*1e3))}return l},Tp=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,o,i,a,c;if((c=XM.exec(t))?[,e,r,n,s,o,i,a]=c:(c=eL.exec(t))?([,e,r,n,s,o,i,a]=c,n=(Number(n)+1900).toString()):(c=tL.exec(t))&&([,r,e,s,o,i,a,n]=c),n&&i){let u=Date.UTC(Number(n),rL.indexOf(r),Number(e),Number(s),Number(o),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);vr(e,1,31),vr(s,0,23),vr(o,0,59),vr(i,0,60);let l=new Date(u);return l.setUTCFullYear(Number(n)),l}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)}});function Cp(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let s=[],o="";for(let i=0;i<n.length;i++)o===""?o=n[i]:o+=e+n[i],(i+1)%r===0&&(s.push(o),o="");return o!==""&&s.push(o),s}var nw=w(()=>{});var xi,sw=w(()=>{xi=t=>{let e=t.length,r=[],n=!1,s,o=0;for(let i=0;i<e;++i){let a=t[i];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(o,i)),o=i+1);break;default:}s=a}return r.push(t.slice(o)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function Ap(t){return new ve(String(t),"bigDecimal")}var ow,ve,iw=w(()=>{ow=/^-?\d*(\.\d+)?$/,ve=class t{string;type;constructor(e,r){if(this.string=e,this.type=r,!ow.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;let r=e;return t.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&ow.test(r.string)}}});var aw={};st(aw,{LazyJsonString:()=>it,NumericValue:()=>ve,_parseEpochTimestamp:()=>vi,_parseRfc3339DateTimeWithOffset:()=>Rp,_parseRfc7231DateTime:()=>Tp,copyDocumentWithTransform:()=>gM,dateToUtcString:()=>Ei,expectBoolean:()=>SM,expectByte:()=>ip,expectFloat32:()=>Dc,expectInt:()=>EM,expectInt32:()=>sp,expectLong:()=>yi,expectNonNull:()=>bM,expectNumber:()=>gi,expectObject:()=>gE,expectShort:()=>op,expectString:()=>vM,expectUnion:()=>xM,generateIdempotencyToken:()=>ar.v4,handleFloat:()=>CM,limitedParseDouble:()=>up,limitedParseFloat:()=>AM,limitedParseFloat32:()=>IM,logger:()=>Si,nv:()=>Ap,parseBoolean:()=>yM,parseEpochTimestamp:()=>gp,parseRfc3339DateTime:()=>DM,parseRfc3339DateTimeWithOffset:()=>hp,parseRfc7231DateTime:()=>mp,quoteHeader:()=>wp,splitEvery:()=>Cp,splitHeader:()=>xi,strictParseByte:()=>lp,strictParseDouble:()=>Lc,strictParseFloat:()=>RM,strictParseFloat32:()=>cp,strictParseInt:()=>PM,strictParseInt32:()=>OM,strictParseLong:()=>SE,strictParseShort:()=>os});var ft=w(()=>{mE();_E();ZE();JE();dp();XE();rw();nw();sw();iw()});var at,Qs=w(()=>{at=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});var cw,Ip,uw=w(()=>{cw=x(Ve()),Ip=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:r,deserializer:n,serdeContext:s,defaultContentType:o}){this.marshaller=e,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=o}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){let s=this.marshaller,o=r.getEventStreamMember(),i=r.getMemberSchema(o),a=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),l={async*[Symbol.asyncIterator](){if(n){let p={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let h=a.flush();yield{[u]:!0,headers:p,body:h}}for await(let p of e)yield p}};return s.serialize(l,p=>{if(p[u])return{headers:p.headers,body:p.body};let h=Object.keys(p).find(N=>N!=="__type")??"",{additionalHeaders:m,body:y,eventType:b,explicitPayloadContentType:T}=this.writeEventBody(h,i,p);return{headers:{":event-type":{type:"string",value:b},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:T??c},...m},body:y}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,o=r.getEventStreamMember(),a=r.getMemberSchema(o).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=s.deserialize(e.body,async h=>{let m=Object.keys(h).find(y=>y!=="__type")??"";if(m==="initial-response"){let y=await this.deserializer.read(r,h[m].body);return delete y[o],{[c]:!0,...y}}else if(m in a){let y=a[m];return{[m]:await this.deserializer.read(y,h[m].body)}}else return{$unknown:h}}),l=u[Symbol.asyncIterator](),p=await l.next();if(p.done)return u;if(p.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[h,m]of Object.entries(p.value))n[h]=m}return{async*[Symbol.asyncIterator](){for(p?.value?.[c]||(yield p.value);;){let{done:h,value:m}=await l.next();if(h)break;yield m}}}}writeEventBody(e,r,n){let s=this.serializer,o=e,i=null,a,c=r.getSchema()[4].includes(e),u={};if(c){let h=r.getMemberSchema(e);if(h.isStructSchema()){for(let[m,y]of h.structIterator()){let{eventHeader:b,eventPayload:T}=y.getMergedTraits();if(T){i=m;break}else if(b){let A=n[e][m],N="binary";y.isNumericSchema()?(-2)**31<=A&&A<=2**31-1?N="integer":N="long":y.isTimestampSchema()?N="timestamp":y.isStringSchema()?N="string":y.isBooleanSchema()&&(N="boolean"),A!=null&&(u[m]={type:N,value:A},delete n[e][m])}}if(i!==null){let m=h.getMemberSchema(i);m.isBlobSchema()?a="application/octet-stream":m.isStringSchema()&&(a="text/plain"),s.write(m,n[e][i])}else s.write(h,n[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[h,m]=n[e];o=h,s.write(15,m)}let l=s.flush();return{body:typeof l=="string"?(this.serdeContext?.utf8Decoder??cw.fromUtf8)(l):l,eventType:o,explicitPayloadContentType:a,additionalHeaders:u}}}});var lw={};st(lw,{EventStreamSerde:()=>Ip});var dw=w(()=>{uw()});var jc,is,Bc=w(()=>{be();jc=x(Se());Qs();is=class extends at{options;constructor(e){super(),this.options=e}getRequestType(){return jc.HttpRequest}getResponseType(){return jc.HttpResponse}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(let[n,s]of r.url.searchParams.entries())e.query[n]=s;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,n){let s=$.of(r.input),o=or(r.traits??{});if(o.endpoint){let i=o.endpoint?.[0];if(typeof i=="string"){let a=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let u=n[c];if(typeof u!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);i=i.replace(`{${c}}`,u)}e.hostname=i+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:e}=await Promise.resolve().then(()=>(dw(),lw));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,n,s,o){return[]}getEventStreamMarshaller(){let e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}});var fw,pw,as,hw=w(()=>{be();ft();fw=x(Se()),pw=x(Rc());Cc();Ac();Bc();as=class extends is{async serializeRequest(e,r,n){let s={...r??{}},o=this.serializer,i={},a={},c=await n.endpoint(),u=$.of(e?.input),l=u.getSchema(),p=!1,h,m=new fw.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(c){this.updateServiceEndpoint(m,c),this.setHostPrefix(m,e,s);let y=or(e.traits);if(y.http){m.method=y.http[0];let[b,T]=y.http[1].split("?");m.path=="/"?m.path=b:m.path+=b;let A=new URLSearchParams(T??"");Object.assign(i,Object.fromEntries(A))}}for(let[y,b]of u.structIterator()){let T=b.getMergedTraits()??{},A=s[y];if(A!=null)if(T.httpPayload)b.isStreaming()?b.isStructSchema()?s[y]&&(h=await this.serializeEventStream({eventStream:s[y],requestSchema:u})):h=A:(o.write(b,A),h=o.flush()),delete s[y];else if(T.httpLabel){o.write(b,A);let N=o.flush();m.path.includes(`{${y}+}`)?m.path=m.path.replace(`{${y}+}`,N.split("/").map(sr).join("/")):m.path.includes(`{${y}}`)&&(m.path=m.path.replace(`{${y}}`,sr(N))),delete s[y]}else if(T.httpHeader)o.write(b,A),a[T.httpHeader.toLowerCase()]=String(o.flush()),delete s[y];else if(typeof T.httpPrefixHeaders=="string"){for(let[N,q]of Object.entries(A)){let V=T.httpPrefixHeaders+N;o.write([b.getValueSchema(),{httpHeader:V}],q),a[V.toLowerCase()]=o.flush()}delete s[y]}else T.httpQuery||T.httpQueryParams?(this.serializeQuery(b,A,i),delete s[y]):p=!0}return p&&s&&(o.write(l,s),h=o.flush()),m.headers=a,m.query=i,m.body=h,m}serializeQuery(e,r,n){let s=this.serializer,o=e.getMergedTraits();if(o.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in n)){let c=e.getValueSchema();Object.assign(c.getMergedTraits(),{...o,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(e.isListSchema()){let i=!!e.getMergedTraits().sparse,a=[];for(let c of r){s.write([e.getValueSchema(),o],c);let u=s.flush();(i||u!==void 0)&&a.push(u)}n[o.httpQuery]=a}else s.write([e,o],r),n[o.httpQuery]=s.flush()}async deserializeResponse(e,r,n){let s=this.deserializer,o=$.of(e.output),i={};if(n.statusCode>=300){let c=await Wt(n.body,r);throw c.byteLength>0&&Object.assign(i,await s.read(15,c)),await this.handleError(e,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=await this.deserializeHttpMessage(o,r,n,i);if(a.length){let c=await Wt(n.body,r);if(c.byteLength>0){let u=await s.read(o,c);for(let l of a)i[l]=u[l]}}return i.$metadata=this.deserializeMetadata(n),i}async deserializeHttpMessage(e,r,n,s,o){let i;s instanceof Set?i=o:i=s;let a=this.deserializer,c=$.of(e),u=[];for(let[l,p]of c.structIterator()){let h=p.getMemberTraits();if(h.httpPayload){if(p.isStreaming())p.isStructSchema()?i[l]=await this.deserializeEventStream({response:n,responseSchema:c}):i[l]=(0,pw.sdkStreamMixin)(n.body);else if(n.body){let y=await Wt(n.body,r);y.byteLength>0&&(i[l]=await a.read(p,y))}}else if(h.httpHeader){let m=String(h.httpHeader).toLowerCase(),y=n.headers[m];if(y!=null)if(p.isListSchema()){let b=p.getValueSchema();b.getMergedTraits().httpHeader=m;let T;b.isTimestampSchema()&&b.getSchema()===4?T=Cp(y,",",2):T=xi(y);let A=[];for(let N of T)A.push(await a.read(b,N.trim()));i[l]=A}else i[l]=await a.read(p,y)}else if(h.httpPrefixHeaders!==void 0){i[l]={};for(let[m,y]of Object.entries(n.headers))if(m.startsWith(h.httpPrefixHeaders)){let b=p.getValueSchema();b.getMergedTraits().httpHeader=m,i[l][m.slice(h.httpPrefixHeaders.length)]=await a.read(b,y)}}else h.httpResponseCode?i[l]=n.statusCode:u.push(l)}return u}}});var mw,xr,gw=w(()=>{be();mw=x(Se());Cc();Bc();xr=class extends is{async serializeRequest(e,r,n){let s=this.serializer,o={},i={},a=await n.endpoint(),c=$.of(e?.input),u=c.getSchema(),l,p=new mw.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:o,headers:i,body:void 0});a&&(this.updateServiceEndpoint(p,a),this.setHostPrefix(p,e,r));let h={...r};if(r){let m=c.getEventStreamMember();if(m){if(h[m]){let y={};for(let[b,T]of c.structIterator())b!==m&&h[b]&&(s.write(T,h[b]),y[b]=s.flush());l=await this.serializeEventStream({eventStream:h[m],requestSchema:c,initialRequest:y})}}else s.write(u,h),l=s.flush()}return p.headers=i,p.query=o,p.body=l,p.method="POST",p}async deserializeResponse(e,r,n){let s=this.deserializer,o=$.of(e.output),i={};if(n.statusCode>=300){let c=await Wt(n.body,r);throw c.byteLength>0&&Object.assign(i,await s.read(15,c)),await this.handleError(e,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=o.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:n,responseSchema:o,initialResponseContainer:i});else{let c=await Wt(n.body,r);c.byteLength>0&&Object.assign(i,await s.read(o,c))}return i.$metadata=this.deserializeMetadata(n),i}}});var Pp,Op=w(()=>{Ac();Pp=(t,e,r,n,s,o)=>{if(e!=null&&e[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,o?i.split("/").map(a=>sr(a)).join("/"):sr(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return t}});function Ri(t,e){return new Hc(t,e)}var yw,Hc,Sw=w(()=>{yw=x(Se());Op();Hc=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(e,r){this.input=e,this.context=r}async build(){let{hostname:e,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let o of this.resolvePathStack)o(this.path);return new yw.HttpRequest({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,s){return this.resolvePathStack.push(o=>{this.path=Pp(o,this.input,e,r,n,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});function xt(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:o}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:o||r?5:void 0:void 0)??e.timestampFormat.default}var Vc=w(()=>{});var Np,_w,cs,kp=w(()=>{be();ft();Np=x(ze()),_w=x(Ve());Qs();Vc();cs=class extends at{settings;constructor(e){super(),this.settings=e}read(e,r){let n=$.of(e);if(n.isListSchema())return xi(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??Np.fromBase64)(r);if(n.isTimestampSchema())switch(xt(n,this.settings)){case 5:return Rp(r);case 6:return Tp(r);case 7:return vi(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let s=n.getMergedTraits().mediaType,o=r;if(s)return n.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(s==="application/json"||s.endsWith("+json"))&&(o=it.from(o)),o}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new ve(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??_w.toUtf8)((this.serdeContext?.base64Decoder??Np.fromBase64)(e))}}});var zc,us,Ew=w(()=>{be();zc=x(Ve());Qs();kp();us=class extends at{codecDeserializer;stringDeserializer;constructor(e,r){super(),this.codecDeserializer=e,this.stringDeserializer=new cs(r)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,r){let n=$.of(e),s=n.getMergedTraits(),o=this.serdeContext?.utf8Encoder??zc.toUtf8;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(n,o(r));if(s.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??zc.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(n,r)}}});var Dp,Ti,Mp=w(()=>{be();ft();Dp=x(ze());Qs();Vc();Ti=class extends at{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,r){let n=$.of(e);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(xt(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Ei(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??Dp.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let c=this.flush(),u=n.getValueSchema().isTimestampSchema()?c:wp(c);i!==""&&(i+=", "),i+=u}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let s=n.getMergedTraits().mediaType,o=r;if(s&&((s==="application/json"||s.endsWith("+json"))&&(o=it.from(o)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Dp.toBase64)(o.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let e=this.stringBuffer;return this.stringBuffer="",e}}});var ls,ww=w(()=>{be();Mp();ls=class{codecSerializer;stringSerializer;buffer;constructor(e,r,n=new Ti(r)){this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){let n=$.of(e),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}});var bw={};st(bw,{FromStringShapeDeserializer:()=>cs,HttpBindingProtocol:()=>as,HttpInterceptingShapeDeserializer:()=>us,HttpInterceptingShapeSerializer:()=>ls,HttpProtocol:()=>is,RequestBuilder:()=>Hc,RpcProtocol:()=>xr,SerdeContext:()=>at,ToStringShapeSerializer:()=>Ti,collectBody:()=>Wt,determineTimestampFormat:()=>xt,extendedEncodeURIComponent:()=>sr,requestBuilder:()=>Ri,resolvedPath:()=>Pp});var pt=w(()=>{Cc();Ac();hw();Bc();gw();Sw();Op();kp();Ew();ww();Mp();Vc();Qs()});var vw=w(()=>{pt()});function nL(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var xw=w(()=>{});var ds,Rw=w(()=>{ds=class{authSchemes=new Map;constructor(e){for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var Tw,Lp,Fp,Cw=w(()=>{Tw=x(Se()),Lp=x(Zr()),Fp=class{async sign(e,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=Tw.HttpRequest.clone(e);if(n.in===Lp.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===Lp.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var Aw,Up,Iw=w(()=>{Aw=x(Se()),Up=class{async sign(e,r,n){let s=Aw.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var Rr,Pw=w(()=>{Rr=class{async sign(e,r,n){return e}}});var Ow=w(()=>{Cw();Iw();Pw()});var Nw,sL,qp,Gc,$p,kw=w(()=>{Nw=t=>function(r){return Gc(r)&&r.expiration.getTime()-Date.now()<t},sL=3e5,qp=Nw(3e5),Gc=t=>t.expiration!==void 0,$p=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,s,o,i,a=!1,c=async u=>{o||(o=n(u));try{s=await o,i=!0,a=!1}finally{o=void 0}return s};return e===void 0?async u=>((!i||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!i||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(e(s)&&await c(u),s):(a=!0,s))}});var Dw=w(()=>{Rw();Ow();kw()});var Ys={};st(Ys,{DefaultIdentityProviderConfig:()=>ds,EXPIRATION_MS:()=>sL,HttpApiKeyAuthSigner:()=>Fp,HttpBearerAuthSigner:()=>Up,NoAuthSigner:()=>Rr,createIsIdentityExpiredFunction:()=>Nw,createPaginator:()=>QS,doesIdentityRequireRefresh:()=>Gc,getHttpAuthSchemeEndpointRuleSetPlugin:()=>ui,getHttpAuthSchemePlugin:()=>qk,getHttpSigningPlugin:()=>li,getSmithyContext:()=>kk,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>kS,httpAuthSchemeMiddleware:()=>ci,httpAuthSchemeMiddlewareOptions:()=>$S,httpSigningMiddleware:()=>Ef,httpSigningMiddlewareOptions:()=>zS,isIdentityExpired:()=>qp,memoizeIdentityProvider:()=>$p,normalizeProvider:()=>Xr,requestBuilder:()=>Ri,setFeature:()=>nL});var ht=w(()=>{AS();BS();WS();KS();YS();vw();xw();Dw()});var ps=v(fs=>{"use strict";var Bp=Zr(),Hp=class{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),o=0;for(;;){let{value:i,done:a}=s.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let o=String(e[s]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}},oL=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Mw=t=>oL.test(t)||t.startsWith("[")&&t.endsWith("]"),iL=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),zp=(t,e=!1)=>{if(!e)return iL.test(t);let r=t.split(".");for(let n of r)if(!zp(n))return!1;return!0},Vp={},Ci="endpoints";function rn(t){return typeof t!="object"||t==null?t:"ref"in t?`$${rn(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(rn).join(", ")})`:JSON.stringify(t,null,2)}var et=class extends Error{constructor(e){super(e),this.name="EndpointError"}},aL=(t,e)=>t===e,cL=t=>{let e=t.split("."),r=[];for(let n of e){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new et(`Path: '${t}' does not end with ']'`);let o=n.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new et(`Invalid array index: '${o}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(o)}else r.push(n)}return r},Lw=(t,e)=>cL(e).reduce((r,n)=>{if(typeof r!="object")throw new et(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),uL=t=>t!=null,lL=t=>!t,jp={[Bp.EndpointURLScheme.HTTP]:80,[Bp.EndpointURLScheme.HTTPS]:443},dL=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:h,port:m,protocol:y="",path:b="",query:T={}}=t,A=new URL(`${y}//${h}${m?`:${m}`:""}${b}`);return A.search=Object.entries(T).map(([N,q])=>`${N}=${q}`).join("&"),A}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:s,pathname:o,protocol:i,search:a}=e;if(a)return null;let c=i.slice(0,-1);if(!Object.values(Bp.EndpointURLScheme).includes(c))return null;let u=Mw(s),l=r.includes(`${n}:${jp[c]}`)||typeof t=="string"&&t.includes(`${n}:${jp[c]}`),p=`${n}${l?`:${jp[c]}`:""}`;return{scheme:c,authority:p,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:u}},fL=(t,e)=>t===e,pL=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),hL=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),mL={booleanEquals:aL,getAttr:Lw,isSet:uL,isValidHostLabel:zp,not:lL,parseURL:dL,stringEquals:fL,substring:pL,uriEncode:hL},Fw=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let o=t.indexOf("{",s);if(o===-1){r.push(t.slice(s));break}r.push(t.slice(s,o));let i=t.indexOf("}",o);if(i===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[i+1]==="}"&&(r.push(t.slice(o+1,i)),s=i+2);let a=t.substring(o+1,i);if(a.includes("#")){let[c,u]=a.split("#");r.push(Lw(n[c],u))}else r.push(n[a]);s=i+1}return r.join("")},gL=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Wc=(t,e,r)=>{if(typeof t=="string")return Fw(t,r);if(t.fn)return qw.callFunction(t,r);if(t.ref)return gL(t,r);throw new et(`'${e}': ${String(t)} is not a string, function or reference.`)},Uw=({fn:t,argv:e},r)=>{let n=e.map(o=>["boolean","number"].includes(typeof o)?o:qw.evaluateExpression(o,"arg",r)),s=t.split(".");return s[0]in Vp&&s[1]!=null?Vp[s[0]][s[1]](...n):mL[t](...n)},qw={evaluateExpression:Wc,callFunction:Uw},yL=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new et(`'${t}' is already defined in Reference Record.`);let n=Uw(e,r);return r.logger?.debug?.(`${Ci} evaluateCondition: ${rn(e)} = ${rn(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},Gp=(t=[],e)=>{let r={};for(let n of t){let{result:s,toAssign:o}=yL(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};o&&(r[o.name]=o.value,e.logger?.debug?.(`${Ci} assign: ${o.name} := ${rn(o.value)}`))}return{result:!0,referenceRecord:r}},SL=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(o=>{let i=Wc(o,"Header value entry",e);if(typeof i!="string")throw new et(`Header '${n}' value '${i}' is not a string`);return i})}),{}),$w=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:Bw.getEndpointProperty(s,e)}),{}),jw=(t,e)=>{if(Array.isArray(t))return t.map(r=>jw(r,e));switch(typeof t){case"string":return Fw(t,e);case"object":if(t===null)throw new et(`Unexpected endpoint property: ${t}`);return Bw.getEndpointProperties(t,e);case"boolean":return t;default:throw new et(`Unexpected endpoint property type: ${typeof t}`)}},Bw={getEndpointProperty:jw,getEndpointProperties:$w},_L=(t,e)=>{let r=Wc(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new et(`Endpoint URL must be a string, got ${typeof r}`)},EL=(t,e)=>{let{conditions:r,endpoint:n}=t,{result:s,referenceRecord:o}=Gp(r,e);if(!s)return;let i={...e,referenceRecord:{...e.referenceRecord,...o}},{url:a,properties:c,headers:u}=n;return e.logger?.debug?.(`${Ci} Resolving endpoint from template: ${rn(n)}`),{...u!=null&&{headers:SL(u,i)},...c!=null&&{properties:$w(c,i)},url:_L(a,i)}},wL=(t,e)=>{let{conditions:r,error:n}=t,{result:s,referenceRecord:o}=Gp(r,e);if(s)throw new et(Wc(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))},Hw=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=EL(r,e);if(n)return n}else if(r.type==="error")wL(r,e);else if(r.type==="tree"){let n=Vw.evaluateTreeRule(r,e);if(n)return n}else throw new et(`Unknown endpoint rule: ${r}`);throw new et("Rules evaluation failed")},bL=(t,e)=>{let{conditions:r,rules:n}=t,{result:s,referenceRecord:o}=Gp(r,e);if(s)return Vw.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...o}})},Vw={evaluateRules:Hw,evaluateTreeRule:bL},vL=(t,e)=>{let{endpointParams:r,logger:n}=e,{parameters:s,rules:o}=t;e.logger?.debug?.(`${Ci} Initial EndpointParams: ${rn(r)}`);let i=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,l])=>[u,l.default]);if(i.length>0)for(let[u,l]of i)r[u]=r[u]??l;let a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(let u of a)if(r[u]==null)throw new et(`Missing required parameter: '${u}'`);let c=Hw(o,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${Ci} Resolved endpoint: ${rn(c)}`),c};fs.EndpointCache=Hp;fs.EndpointError=et;fs.customEndpointFunctions=Vp;fs.isIpAddress=Mw;fs.isValidHostLabel=zp;fs.resolveEndpoint=vL});var Gw=v(zw=>{"use strict";function xL(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}zw.parseQueryString=xL});var nn=v(Kw=>{"use strict";var RL=Gw(),Ww=t=>{if(typeof t=="string")return Ww(new URL(t));let{hostname:e,pathname:r,port:n,protocol:s,search:o}=t,i;return o&&(i=RL.parseQueryString(o)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:i}};Kw.parseUrl=Ww});var Js=v(Qt=>{"use strict";var Zs=ps(),TL=nn(),Yw=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!Yw(r))return!1;return!0}return!(!Zs.isValidHostLabel(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Zs.isIpAddress(t))},Qw=":",CL="/",AL=t=>{let e=t.split(Qw);if(e.length<6)return null;let[r,n,s,o,i,...a]=e;if(r!=="arn"||n===""||s===""||a.join(Qw)==="")return null;let c=a.map(u=>u.split(CL)).flat();return{partition:n,service:s,region:o,accountId:i,resourceId:c}},IL=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],PL="1.1",Zw={partitions:IL,version:PL},Jw=Zw,Xw="",eb=t=>{let{partitions:e}=Jw;for(let n of e){let{regions:s,outputs:o}=n;for(let[i,a]of Object.entries(s))if(i===t)return{...o,...a}}for(let n of e){let{regionRegex:s,outputs:o}=n;if(new RegExp(s).test(t))return{...o}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},tb=(t,e="")=>{Jw=t,Xw=e},OL=()=>{tb(Zw,"")},NL=()=>Xw,rb={isVirtualHostableS3Bucket:Yw,parseArn:AL,partition:eb};Zs.customEndpointFunctions.aws=rb;var kL=t=>{if(typeof t.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>nb(t.endpointProvider({Region:typeof t.region=="function"?await t.region():t.region,UseDualStack:typeof t.useDualstackEndpoint=="function"?await t.useDualstackEndpoint():t.useDualstackEndpoint,UseFIPS:typeof t.useFipsEndpoint=="function"?await t.useFipsEndpoint():t.useFipsEndpoint,Endpoint:void 0},{logger:t.logger}))),t},nb=t=>TL.parseUrl(t.url);Object.defineProperty(Qt,"EndpointError",{enumerable:!0,get:function(){return Zs.EndpointError}});Object.defineProperty(Qt,"isIpAddress",{enumerable:!0,get:function(){return Zs.isIpAddress}});Object.defineProperty(Qt,"resolveEndpoint",{enumerable:!0,get:function(){return Zs.resolveEndpoint}});Qt.awsEndpointFunctions=rb;Qt.getUserAgentPrefix=NL;Qt.partition=eb;Qt.resolveDefaultAwsRegionalEndpointsConfig=kL;Qt.setPartitionInfo=tb;Qt.toEndpointV1=nb;Qt.useDefaultPartitionInfo=OL});var Kc,Xs,sb=w(()=>{Kc={warningEmitted:!1},Xs=t=>{t&&!Kc.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<18&&(Kc.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function sn(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var ob=w(()=>{});function ib(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var ab=w(()=>{});function cb(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var ub=w(()=>{});var on={};st(on,{emitWarningIfUnsupportedVersion:()=>Xs,setCredentialFeature:()=>sn,setFeature:()=>ib,setTokenFeature:()=>cb,state:()=>Kc});var Yt=w(()=>{sb();ob();ab();ub()});var lb,Wp,db=w(()=>{lb=x(Se()),Wp=t=>lb.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var eo,Kp=w(()=>{eo=t=>new Date(Date.now()+t)});var fb,pb=w(()=>{Kp();fb=(t,e)=>Math.abs(eo(e).getTime()-t)>=3e5});var Qp,hb=w(()=>{pb();Qp=(t,e)=>{let r=Date.parse(t);return fb(r,e)?r-Date.now():e}});var Yp=w(()=>{db();Kp();hb()});var mb,Ai,to,mt,Zp,Jp=w(()=>{mb=x(Se());Yp();Ai=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},to=async t=>{let e=Ai("context",t.context),r=Ai("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],o=await Ai("signer",r.signer)(n),i=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}},mt=class{async sign(e,r,n){if(!mb.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await to(n),{config:o,signer:i}=s,{signingRegion:a,signingName:c}=s,u=n.context;if(u?.authSchemes?.length??!1){let[p,h]=u.authSchemes;p?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await i.sign(e,{signingDate:eo(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{let n=r.ServerTime??Wp(r.$response);if(n){let s=Ai("config",e.config),o=s.systemClockOffset;s.systemClockOffset=Qp(n,s.systemClockOffset),s.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=Wp(e);if(n){let s=Ai("config",r.config);s.systemClockOffset=Qp(n,s.systemClockOffset)}}},Zp=mt});var gb,Ii,yb=w(()=>{gb=x(Se());Yp();Jp();Ii=class extends mt{async sign(e,r,n){if(!gb.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}=await to(n),l=(await s.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(e,{signingDate:eo(s.systemClockOffset),signingRegion:l,signingService:c})}}});var Xp,Sb=w(()=>{Xp=t=>typeof t=="string"&&t.length>0?t.split(",").map(e=>e.trim()):[]});var Qc,eh=w(()=>{Qc=t=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`});var _b,Eb,ro,wb=w(()=>{Sb();eh();_b="AWS_AUTH_SCHEME_PREFERENCE",Eb="auth_scheme_preference",ro={environmentVariableSelector:(t,e)=>{if(e?.signingName&&Qc(e.signingName)in t)return["httpBearerAuth"];if(_b in t)return Xp(t[_b])},configFileSelector:t=>{if(Eb in t)return Xp(t[Eb])},default:[]}});var ct=v(hs=>{"use strict";var no=class t extends Error{name="ProviderError";tryNextLink;constructor(e,r=!0){let n,s=!0;typeof r=="boolean"?(n=void 0,s=r):r!=null&&typeof r=="object"&&(n=r.logger,s=r.tryNextLink??!0),super(e),this.tryNextLink=s,Object.setPrototypeOf(this,t.prototype),n?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}},th=class t extends no{name="CredentialsProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},rh=class t extends no{name="TokenProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},DL=(...t)=>async()=>{if(t.length===0)throw new no("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},ML=t=>()=>Promise.resolve(t),LL=(t,e,r)=>{let n,s,o,i=!1,a=async()=>{s||(s=t());try{n=await s,o=!0,i=!1}finally{s=void 0}return n};return e===void 0?async c=>((!o||c?.forceRefresh)&&(n=await a()),n):async c=>((!o||c?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(e(n)&&await a(),n))};hs.CredentialsProviderError=th;hs.ProviderError=no;hs.TokenProviderError=rh;hs.chain=DL;hs.fromStatic=ML;hs.memoize=LL});var nh,bb,vb,xb=w(()=>{ht();nh=x(ct()),bb=t=>(t.sigv4aSigningRegionSet=Xr(t.sigv4aSigningRegionSet),t),vb={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new nh.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new nh.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var Kb=v(ee=>{"use strict";var an=Wf(),ms=Ve(),FL=bf(),Ab=Se(),Rb=dt(),Yc=Mf(),Ib="X-Amz-Algorithm",Pb="X-Amz-Credential",uh="X-Amz-Date",Ob="X-Amz-SignedHeaders",Nb="X-Amz-Expires",lh="X-Amz-Signature",dh="X-Amz-Security-Token",UL="X-Amz-Region-Set",fh="authorization",ph=uh.toLowerCase(),kb="date",Db=[fh,ph,kb],Mb=lh.toLowerCase(),tu="x-amz-content-sha256",Lb=dh.toLowerCase(),qL="host",Fb={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Ub=/^proxy-/,qb=/^sec-/,$L=[/^proxy-/i,/^sec-/i],Zc="AWS4-HMAC-SHA256",jL="AWS4-ECDSA-P256-SHA256",$b="AWS4-HMAC-SHA256-PAYLOAD",jb="UNSIGNED-PAYLOAD",Bb=50,hh="aws4_request",Hb=3600*24*7,so={},Jc=[],Xc=(t,e,r)=>`${t}/${e}/${r}/${hh}`,Vb=async(t,e,r,n,s)=>{let o=await Tb(t,e.secretAccessKey,e.accessKeyId),i=`${r}:${n}:${s}:${an.toHex(o)}:${e.sessionToken}`;if(i in so)return so[i];for(Jc.push(i);Jc.length>Bb;)delete so[Jc.shift()];let a=`AWS4${e.secretAccessKey}`;for(let c of[r,n,s,hh])a=await Tb(t,a,c);return so[i]=a},BL=()=>{Jc.length=0,Object.keys(so).forEach(t=>{delete so[t]})},Tb=(t,e,r)=>{let n=new t(e);return n.update(ms.toUint8Array(r)),n.digest()},sh=({headers:t},e,r)=>{let n={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let o=s.toLowerCase();(o in Fb||e?.has(o)||Ub.test(o)||qb.test(o))&&(!r||r&&!r.has(o))||(n[o]=t[s].trim().replace(/\s+/g," "))}return n},eu=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===tu)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||FL.isArrayBuffer(e)){let n=new r;return n.update(ms.toUint8Array(e)),an.toHex(await n.digest())}return jb},oh=class{format(e){let r=[];for(let o of Object.keys(e)){let i=ms.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[o]))}let n=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),s=0;for(let o of r)n.set(o,s),s+=o.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(e.value,3),i;case"string":let a=ms.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(ih.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!HL.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let p=new Uint8Array(17);return p[0]=9,p.set(an.fromHex(e.value.replace(/\-/g,"")),1),p}}},HL=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,ih=class t{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&Cb(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&Cb(e),parseInt(an.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Cb(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var zb=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},Gb=(t,e={})=>{let{headers:r,query:n={}}=Ab.HttpRequest.clone(t);for(let s of Object.keys(r)){let o=s.toLowerCase();(o.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(o)||e.hoistableHeaders?.has(o))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},ah=t=>{t=Ab.HttpRequest.clone(t);for(let e of Object.keys(t.headers))Db.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},Wb=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t)){if(n.toLowerCase()===Mb)continue;let s=Yc.escapeUri(n);e.push(s);let o=t[n];typeof o=="string"?r[s]=`${s}=${Yc.escapeUri(o)}`:Array.isArray(o)&&(r[s]=o.slice(0).reduce((i,a)=>i.concat([`${s}=${Yc.escapeUri(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},VL=t=>zL(t).toISOString().replace(/\.\d{3}Z$/,"Z"),zL=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,ru=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Rb.normalizeProvider(n),this.credentialProvider=Rb.normalizeProvider(r)}createCanonicalRequest(e,r,n){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Wb(e)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){let o=new this.sha256;o.update(ms.toUint8Array(n));let i=await o.digest();return`${s}
${e}
${r}
${an.toHex(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return Yc.escapeUri(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let r=VL(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}},ch=class extends ru{headerFormatter=new oh;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){super({applyChecksum:e,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i})}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:l}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);let h=u??await this.regionProvider(),{longDate:m,shortDate:y}=this.formatDate(n);if(s>Hb)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let b=Xc(y,h,l??this.service),T=Gb(ah(e),{unhoistableHeaders:i,hoistableHeaders:c});p.sessionToken&&(T.query[dh]=p.sessionToken),T.query[Ib]=Zc,T.query[Pb]=`${p.accessKeyId}/${b}`,T.query[uh]=m,T.query[Nb]=s.toString(10);let A=sh(T,o,a);return T.query[Ob]=this.getCanonicalHeaderList(A),T.query[lh]=await this.getSignature(m,b,this.getSigningKey(p,h,y,l),this.createCanonicalRequest(T,A,await eu(e,this.sha256))),T}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(n),l=Xc(c,a,i??this.service),p=await eu({headers:{},body:r},this.sha256),h=new this.sha256;h.update(e);let m=an.toHex(await h.digest()),y=[$b,u,l,s,m,p].join(`
`);return this.signString(y,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then(i=>({message:e.message,signature:i}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(o,i,a,s));return c.update(ms.toUint8Array(e)),an.toHex(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=o??await this.regionProvider(),u=ah(e),{longDate:l,shortDate:p}=this.formatDate(r),h=Xc(p,c,i??this.service);u.headers[ph]=l,a.sessionToken&&(u.headers[Lb]=a.sessionToken);let m=await eu(u,this.sha256);!zb(tu,u.headers)&&this.applyChecksum&&(u.headers[tu]=m);let y=sh(u,s,n),b=await this.getSignature(l,h,this.getSigningKey(a,c,p,i),this.createCanonicalRequest(u,y,m));return u.headers[fh]=`${Zc} Credential=${a.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(y)}, Signature=${b}`,u}async getSignature(e,r,n,s){let o=await this.createStringToSign(e,r,s,Zc),i=new this.sha256(await n);return i.update(ms.toUint8Array(o)),an.toHex(await i.digest())}getSigningKey(e,r,n,s){return Vb(this.sha256,e,n,r,s||this.service)}},GL={SignatureV4a:null};ee.ALGORITHM_IDENTIFIER=Zc;ee.ALGORITHM_IDENTIFIER_V4A=jL;ee.ALGORITHM_QUERY_PARAM=Ib;ee.ALWAYS_UNSIGNABLE_HEADERS=Fb;ee.AMZ_DATE_HEADER=ph;ee.AMZ_DATE_QUERY_PARAM=uh;ee.AUTH_HEADER=fh;ee.CREDENTIAL_QUERY_PARAM=Pb;ee.DATE_HEADER=kb;ee.EVENT_ALGORITHM_IDENTIFIER=$b;ee.EXPIRES_QUERY_PARAM=Nb;ee.GENERATED_HEADERS=Db;ee.HOST_HEADER=qL;ee.KEY_TYPE_IDENTIFIER=hh;ee.MAX_CACHE_SIZE=Bb;ee.MAX_PRESIGNED_TTL=Hb;ee.PROXY_HEADER_PATTERN=Ub;ee.REGION_SET_PARAM=UL;ee.SEC_HEADER_PATTERN=qb;ee.SHA256_HEADER=tu;ee.SIGNATURE_HEADER=Mb;ee.SIGNATURE_QUERY_PARAM=lh;ee.SIGNED_HEADERS_QUERY_PARAM=Ob;ee.SignatureV4=ch;ee.SignatureV4Base=ru;ee.TOKEN_HEADER=Lb;ee.TOKEN_QUERY_PARAM=dh;ee.UNSIGNABLE_PATTERNS=$L;ee.UNSIGNED_PAYLOAD=jb;ee.clearCredentialCache=BL;ee.createScope=Xc;ee.getCanonicalHeaders=sh;ee.getCanonicalQuery=Wb;ee.getPayloadHash=eu;ee.getSigningKey=Vb;ee.hasHeader=zb;ee.moveHeadersToQuery=Gb;ee.prepareRequest=ah;ee.signatureV4aContainer=GL});function WL(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=$p(e,qp,Gc):r?n=Xr(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function KL(t,e){if(e.configBound)return e;let r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var mh,gs,Qb,Yb=w(()=>{Yt();ht();mh=x(Kb()),gs=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==n&&(r=!0),e=u;let l=WL(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),p=KL(t,l);r&&!p.attributed?(n=async h=>p(h).then(m=>sn(m,"CREDENTIALS_CODE","e")),n.memoized=p.memoized,n.configBound=p.configBound,n.attributed=!0):n=p},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:s=!0,systemClockOffset:o=t.systemClockOffset||0,sha256:i}=t,a;return t.signer?a=Xr(t.signer):t.regionInfoProvider?a=()=>Xr(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,l])=>{let{signingRegion:p,signingService:h}=u;t.signingRegion=t.signingRegion||p||l,t.signingName=t.signingName||h||t.serviceId;let m={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},y=t.signerConstructor||mh.SignatureV4;return new y(m)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Xr(t.region)(),properties:{}},u);let l=u.signingRegion,p=u.signingName;t.signingRegion=t.signingRegion||l,t.signingName=t.signingName||p||t.serviceId;let h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:i,uriEscapePath:s},m=t.signerConstructor||mh.SignatureV4;return new m(h)},Object.assign(t,{systemClockOffset:o,signingEscapePath:s,signer:a})},Qb=gs});var Zb=w(()=>{Jp();yb();wb();xb();Yb()});var Jb={};st(Jb,{AWSSDKSigV4Signer:()=>Zp,AwsSdkSigV4ASigner:()=>Ii,AwsSdkSigV4Signer:()=>mt,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>ro,NODE_SIGV4A_CONFIG_OPTIONS:()=>vb,getBearerTokenEnvKey:()=>Qc,resolveAWSSDKSigV4Config:()=>Qb,resolveAwsSdkSigV4AConfig:()=>bb,resolveAwsSdkSigV4Config:()=>gs,validateSigningProperties:()=>to});var gh=w(()=>{Zb();eh()});function cn(t){return typeof Buffer<"u"?Buffer.alloc(t):new Uint8Array(t)}function nu(t){return t[yh]=!0,t}var yh,su=w(()=>{yh=Symbol("@smithy/core/cbor::tagSymbol")});function tv(t){me=t,Cr=new DataView(me.buffer,me.byteOffset,me.byteLength)}function cr(t,e){if(t>=e)throw new Error("unexpected end of (decode) payload.");let r=(me[t]&224)>>5,n=me[t]&31;switch(r){case 0:case 1:case 6:let s,o;if(n<24)s=n,o=1;else switch(n){case 24:case 25:case 26:case 27:let i=nv[n],a=i+1;if(o=a,e-t<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let c=t+1;i===1?s=me[c]:i===2?s=Cr.getUint16(c):i===4?s=Cr.getUint32(c):s=Cr.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return ne=o,Sh(s);if(r===1){let i;return typeof s=="bigint"?i=BigInt(-1)-s:i=-1-s,ne=o,Sh(i)}else if(n===2||n===3){let i=ki(t+o,e),a=BigInt(0),c=t+o+ne;for(let u=c;u<c+i;++u)a=a<<BigInt(8)|BigInt(me[u]);return ne=o+ne+i,n===3?-a-BigInt(1):a}else if(n===4){let i=cr(t+o,e),[a,c]=i,u=c<0?-1:1,l="0".repeat(Math.abs(a)+1)+String(BigInt(u)*BigInt(c)),p,h=c<0?"-":"";return p=a===0?l:l.slice(0,l.length+a)+"."+l.slice(a),p=p.replace(/^0+/g,""),p===""&&(p="0"),p[0]==="."&&(p="0"+p),p=h+p,ne=o+ne,Ap(p)}else{let i=cr(t+o,e);return ne=o+ne,nu({tag:Sh(s),value:i})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return tF(t,e);case 5:return iF(t,e);case 4:return sF(t,e);case 2:return rF(t,e)}else switch(r){case 3:return eF(t,e);case 5:return oF(t,e);case 4:return nF(t,e);case 2:return xh(t,e)}default:return aF(t,e)}}function rv(t,e,r){return ZL&&t.constructor?.name==="Buffer"?t.toString("utf-8",e,r):Xb?Xb.decode(t.subarray(e,r)):(0,ev.toUtf8)(t.subarray(e,r))}function JL(t){let e=Number(t);return(e<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<e)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${t}) to ${e} with loss of precision.`)),e}function XL(t,e){let r=t>>7,n=(t&124)>>2,s=(t&3)<<8|e,o=r===0?1:-1,i,a;if(n===0){if(s===0)return 0;i=Math.pow(2,-14),a=0}else{if(n===31)return s===0?o*(1/0):NaN;i=Math.pow(2,n-15),a=1}return a+=s/1024,o*(i*a)}function ki(t,e){let r=me[t]&31;if(r<24)return ne=1,r;if(r===24||r===25||r===26||r===27){let n=nv[r];if(ne=n+1,e-t<ne)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=t+1;return n===1?me[s]:n===2?Cr.getUint16(s):n===4?Cr.getUint32(s):JL(Cr.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function eF(t,e){let r=ki(t,e),n=ne;if(t+=n,e-t<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=rv(me,t,t+r);return ne=n+r,s}function tF(t,e){t+=1;let r=[];for(let n=t;t<e;){if(me[t]===255){let c=cn(r.length);return c.set(r,0),ne=t-n+2,rv(c,0,c.length)}let s=(me[t]&224)>>5,o=me[t]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=xh(t,e);t+=ne;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function xh(t,e){let r=ki(t,e),n=ne;if(t+=n,e-t<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=me.subarray(t,t+r);return ne=n+r,s}function rF(t,e){t+=1;let r=[];for(let n=t;t<e;){if(me[t]===255){let c=cn(r.length);return c.set(r,0),ne=t-n+2,c}let s=(me[t]&224)>>5,o=me[t]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=xh(t,e);t+=ne;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function nF(t,e){let r=ki(t,e),n=ne;t+=n;let s=t,o=Array(r);for(let i=0;i<r;++i){let a=cr(t,e),c=ne;o[i]=a,t+=c}return ne=n+(t-s),o}function sF(t,e){t+=1;let r=[];for(let n=t;t<e;){if(me[t]===255)return ne=t-n+2,r;let s=cr(t,e);t+=ne,r.push(s)}throw new Error("expected break marker.")}function oF(t,e){let r=ki(t,e),n=ne;t+=n;let s=t,o={};for(let i=0;i<r;++i){if(t>=e)throw new Error("unexpected end of map payload.");let a=(me[t]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${t}.`);let c=cr(t,e);t+=ne;let u=cr(t,e);t+=ne,o[c]=u}return ne=n+(t-s),o}function iF(t,e){t+=1;let r=t,n={};for(;t<e;){if(t>=e)throw new Error("unexpected end of map payload.");if(me[t]===255)return ne=t-r+2,n;let s=(me[t]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let o=cr(t,e);t+=ne;let i=cr(t,e);t+=ne,n[o]=i}throw new Error("expected break marker.")}function aF(t,e){let r=me[t]&31;switch(r){case 21:case 20:return ne=1,r===21;case 22:return ne=1,null;case 23:return ne=1,null;case 25:if(e-t<3)throw new Error("incomplete float16 at end of buf.");return ne=3,XL(me[t+1],me[t+2]);case 26:if(e-t<5)throw new Error("incomplete float32 at end of buf.");return ne=5,Cr.getFloat32(t+1);case 27:if(e-t<9)throw new Error("incomplete float64 at end of buf.");return ne=9,Cr.getFloat64(t+1);default:throw new Error(`unexpected minor value ${r}.`)}}function Sh(t){if(typeof t=="number")return t;let e=Number(t);return Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:t}var ev,YL,ZL,me,Cr,Xb,ne,nv,sv=w(()=>{ft();ev=x(Ve());su();YL=typeof TextDecoder<"u",ZL=typeof Buffer<"u",me=cn(0),Cr=new DataView(me.buffer,me.byteOffset,me.byteLength),Xb=YL?new TextDecoder:null,ne=0;nv={24:1,25:2,26:4,27:8}});function Th(t){W.byteLength-j<t&&(j<16e6?iu(Math.max(W.byteLength*4,W.byteLength+t)):iu(W.byteLength+t+16e6))}function Ch(){let t=cn(j);return t.set(W.subarray(0,j),0),j=0,t}function iu(t){let e=W;W=cn(t),e&&(e.copy?e.copy(W,0,0,e.byteLength):W.set(e,0)),Pr=new DataView(W.buffer,W.byteOffset,W.byteLength)}function Ir(t,e){e<24?W[j++]=t<<5|e:e<256?(W[j++]=t<<5|24,W[j++]=e):e<65536?(W[j++]=t<<5|25,Pr.setUint16(j,e),j+=2):e<2**32?(W[j++]=t<<5|26,Pr.setUint32(j,e),j+=4):(W[j++]=t<<5|27,Pr.setBigUint64(j,typeof e=="bigint"?e:BigInt(e)),j+=8)}function av(t){let e=[t];for(;e.length;){let r=e.pop();if(Th(typeof r=="string"?r.length*4:64),typeof r=="string"){if(ov)Ir(3,Buffer.byteLength(r)),j+=W.write(r,j);else{let n=(0,iv.fromUtf8)(r);Ir(3,n.byteLength),W.set(n,j),j+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,o=n?r:-r-1;o<24?W[j++]=s<<5|o:o<256?(W[j++]=s<<5|24,W[j++]=o):o<65536?(W[j++]=s<<5|25,W[j++]=o>>8,W[j++]=o):o<4294967296?(W[j++]=s<<5|26,Pr.setUint32(j,o),j+=4):(W[j++]=s<<5|27,Pr.setBigUint64(j,BigInt(o)),j+=8);continue}W[j++]=251,Pr.setFloat64(j,r),j+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,o=n?r:-r-BigInt(1),i=Number(o);if(i<24)W[j++]=s<<5|i;else if(i<256)W[j++]=s<<5|24,W[j++]=i;else if(i<65536)W[j++]=s<<5|25,W[j++]=i>>8,W[j++]=i&255;else if(i<4294967296)W[j++]=s<<5|26,Pr.setUint32(j,i),j+=4;else if(o<BigInt("18446744073709551616"))W[j++]=s<<5|27,Pr.setBigUint64(j,o),j+=8;else{let a=o.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),u=o,l=0;for(;c.byteLength-++l>=0;)c[c.byteLength-l]=Number(u&BigInt(255)),u>>=BigInt(8);Th(c.byteLength*2),W[j++]=n?194:195,ov?Ir(2,Buffer.byteLength(c)):Ir(2,c.byteLength),W.set(c,j),j+=c.byteLength}continue}else if(r===null){W[j++]=246;continue}else if(typeof r=="boolean"){W[j++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)e.push(r[n]);Ir(4,r.length);continue}else if(typeof r.byteLength=="number"){Th(r.length*2),Ir(2,r.length),W.set(r,j),j+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof ve){let s=r.string.indexOf("."),o=s===-1?0:s-r.string.length+1,i=BigInt(r.string.replace(".",""));W[j++]=196,e.push(i),e.push(o),Ir(4,2);continue}if(r[yh])if("tag"in r&&"value"in r){e.push(r.value),Ir(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let o=n[s];e.push(r[o]),e.push(o)}Ir(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var iv,ov,cF,W,Pr,j,cv=w(()=>{ft();iv=x(Ve());su();ov=typeof Buffer<"u",cF=2048,W=cn(cF),Pr=new DataView(W.buffer,W.byteOffset,W.byteLength),j=0});var Ah,uv=w(()=>{sv();cv();Ah={deserialize(t){return tv(t),cr(0,t.length)},serialize(t){try{return av(t),Ch()}catch(e){throw Ch(),e}},resizeEncodingBuffer(t){iu(t)}}});var au,cu,uu=w(()=>{su();au=t=>nu({tag:1,value:t.getTime()/1e3}),cu=(t,e)=>{let r=s=>{let o=s;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o};if(e.__type!==void 0)return r(e.__type);let n=Object.keys(e).find(s=>s.toLowerCase()==="code");if(n&&e[n]!==void 0)return r(e[n])}});var Oh,lu,Ih,Ph,Nh=w(()=>{pt();be();ft();Oh=x(ze());uv();uu();lu=class extends at{createSerializer(){let e=new Ih;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Ph;return e.setSerdeContext(this.serdeContext),e}},Ih=class extends at{value;write(e,r){this.value=this.serialize(e,r)}serialize(e,r){let n=$.of(e);if(r==null)return n.isIdempotencyToken()?(0,ar.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Oh.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?au(new Date(Number(r)/1e3|0)):au(r);if(typeof r=="function"||typeof r=="object"){let s=r;if(n.isListSchema()&&Array.isArray(s)){let i=!!n.getMergedTraits().sparse,a=[],c=0;for(let u of s){let l=this.serialize(n.getValueSchema(),u);(l!=null||i)&&(a[c++]=l)}return a}if(s instanceof Date)return au(s);let o={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse;for(let a of Object.keys(s)){let c=this.serialize(n.getValueSchema(),s[a]);(c!=null||i)&&(o[a]=c)}}else if(n.isStructSchema())for(let[i,a]of n.structIterator()){let c=this.serialize(a,s[i]);c!=null&&(o[i]=c)}else if(n.isDocumentSchema())for(let i of Object.keys(s))o[i]=this.serialize(n.getValueSchema(),s[i]);return o}return r}flush(){let e=Ah.serialize(this.value);return this.value=void 0,e}},Ph=class extends at{read(e,r){let n=Ah.deserialize(r);return this.readValue(e,n)}readValue(e,r){let n=$.of(e);if(n.isTimestampSchema()&&typeof r=="number")return vi(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Oh.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let o=[],i=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let u=this.readValue(i,c);(u!=null||a)&&o.push(u)}return o}let s={};if(n.isMapSchema()){let o=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(i,r[a]);(c!=null||o)&&(s[a]=c)}}else if(n.isStructSchema())for(let[o,i]of n.structIterator())s[o]=this.readValue(i,r[o]);return s}else return r}}});var lv,du,dv=w(()=>{pt();be();lv=x(dt());Nh();uu();du=class extends xr{codec=new lu;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:e}){super({defaultNamespace:e})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);if(Object.assign(s.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Kt(e.input)==="unit")delete s.body,delete s.headers["content-type"];else{s.body||(this.serializer.write(15,{}),s.body=this.serializer.flush());try{s.headers["content-length"]=String(s.body.byteLength)}catch{}}let{service:o,operation:i}=(0,lv.getSmithyContext)(n),a=`/service/${o}/operation/${i}`;return s.path.endsWith("/")?s.path+=a.slice(1):s.path+=a,s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,o){let i=cu(n,s)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let c={$metadata:o,$response:n,$fault:n.statusCode<=500?"client":"server"},u=Le.for(a),l;try{l=u.getSchema(i)}catch{s.Message&&(s.message=s.Message);let A=Le.for("smithy.ts.sdk.synthetic."+a),N=A.getBaseException();if(N){let q=A.getErrorCtor(N);throw Object.assign(new q({name:i}),c,s)}throw Object.assign(new Error(i),c,s)}let p=$.of(l),h=u.getErrorCtor(l),m=s.message??s.Message??"Unknown",y=new h(m),b={};for(let[T,A]of p.structIterator())b[T]=this.deserializer.readValue(A,s[T]);throw Object.assign(y,c,{$fault:p.getMergedTraits().error,message:m},b)}getDefaultContentType(){return"application/cbor"}}});var fv=w(()=>{uu();dv();Nh()});var Nt,io=w(()=>{be();Nt=class{resolveRestContentType(e,r){let n=r.getMemberSchemas(),s=Object.values(n).find(o=>!!o.getMergedTraits().httpPayload);if(s){let o=s.getMergedTraits().mediaType;return o||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:l,httpPrefixHeaders:p}=i.getMergedTraits();return!a&&!c&&!u&&!l&&p===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,o,i){let a=r,c=e;e.includes("#")&&([a,c]=e.split("#"));let u={$metadata:o,$response:n,$fault:n.statusCode<500?"client":"server"},l=Le.for(a);try{return{errorSchema:i?.(l,c)??l.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";let h=Le.for("smithy.ts.sdk.synthetic."+a),m=h.getBaseException();if(m){let y=h.getErrorCtor(m)??Error;throw Object.assign(new y({name:c}),u,s)}throw Object.assign(new Error(c),u,s)}}setQueryCompatError(e,r){let n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){let[s,o]=n.split(";"),i=Object.entries(e),a={Code:s,Type:o};Object.assign(e,a);for(let[c,u]of i)a[c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}}});var fu,pv=w(()=>{fv();be();io();fu=class extends du{awsQueryCompatible;mixin=new Nt;constructor({defaultNamespace:e,awsQueryCompatible:r}){super({defaultNamespace:e}),this.awsQueryCompatible=!!r}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),s}async handleError(e,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=cu(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=$.of(a),l=s.message??s.Message??"Unknown",p=Le.for(a[1]).getErrorCtor(a)??Error,h=new p(l),m={};for(let[y,b]of u.structIterator())m[y]=this.deserializer.readValue(b,s[y]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,m),Object.assign(h,c,{$fault:u.getMergedTraits().error,message:l},m)}}});var hv,mv,gv,yv=w(()=>{hv=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},mv=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},gv=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var tt,fn=w(()=>{tt=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});function Sv(t,e,r){if(r?.source){let n=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||n!==String(e)))return n.includes(".")?new ve(n,"bigDecimal"):BigInt(n)}return e}var _v=w(()=>{ft()});var vv=v(bv=>{"use strict";var ys=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},pn=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,kh=()=>{let t=[],e=[],r=!1,n=new Set,s=p=>p.sort((h,m)=>Ev[m.step]-Ev[h.step]||wv[m.priority||"normal"]-wv[h.priority||"normal"]),o=p=>{let h=!1,m=y=>{let b=ys(y.name,y.aliases);if(b.includes(p)){h=!0;for(let T of b)n.delete(T);return!1}return!0};return t=t.filter(m),e=e.filter(m),h},i=p=>{let h=!1,m=y=>{if(y.middleware===p){h=!0;for(let b of ys(y.name,y.aliases))n.delete(b);return!1}return!0};return t=t.filter(m),e=e.filter(m),h},a=p=>(t.forEach(h=>{p.add(h.middleware,{...h})}),e.forEach(h=>{p.addRelativeTo(h.middleware,{...h})}),p.identifyOnResolve?.(l.identifyOnResolve()),p),c=p=>{let h=[];return p.before.forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h.push(p),p.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h},u=(p=!1)=>{let h=[],m=[],y={};return t.forEach(T=>{let A={...T,before:[],after:[]};for(let N of ys(A.name,A.aliases))y[N]=A;h.push(A)}),e.forEach(T=>{let A={...T,before:[],after:[]};for(let N of ys(A.name,A.aliases))y[N]=A;m.push(A)}),m.forEach(T=>{if(T.toMiddleware){let A=y[T.toMiddleware];if(A===void 0){if(p)return;throw new Error(`${T.toMiddleware} is not found when adding ${pn(T.name,T.aliases)} middleware ${T.relation} ${T.toMiddleware}`)}T.relation==="after"&&A.after.push(T),T.relation==="before"&&A.before.push(T)}}),s(h).map(c).reduce((T,A)=>(T.push(...A),T),[])},l={add:(p,h={})=>{let{name:m,override:y,aliases:b}=h,T={step:"initialize",priority:"normal",middleware:p,...h},A=ys(m,b);if(A.length>0){if(A.some(N=>n.has(N))){if(!y)throw new Error(`Duplicate middleware name '${pn(m,b)}'`);for(let N of A){let q=t.findIndex(Z=>Z.name===N||Z.aliases?.some(ge=>ge===N));if(q===-1)continue;let V=t[q];if(V.step!==T.step||T.priority!==V.priority)throw new Error(`"${pn(V.name,V.aliases)}" middleware with ${V.priority} priority in ${V.step} step cannot be overridden by "${pn(m,b)}" middleware with ${T.priority} priority in ${T.step} step.`);t.splice(q,1)}}for(let N of A)n.add(N)}t.push(T)},addRelativeTo:(p,h)=>{let{name:m,override:y,aliases:b}=h,T={middleware:p,...h},A=ys(m,b);if(A.length>0){if(A.some(N=>n.has(N))){if(!y)throw new Error(`Duplicate middleware name '${pn(m,b)}'`);for(let N of A){let q=e.findIndex(Z=>Z.name===N||Z.aliases?.some(ge=>ge===N));if(q===-1)continue;let V=e[q];if(V.toMiddleware!==T.toMiddleware||V.relation!==T.relation)throw new Error(`"${pn(V.name,V.aliases)}" middleware ${V.relation} "${V.toMiddleware}" middleware cannot be overridden by "${pn(m,b)}" middleware ${T.relation} "${T.toMiddleware}" middleware.`);e.splice(q,1)}}for(let N of A)n.add(N)}e.push(T)},clone:()=>a(kh()),use:p=>{p.applyToStack(l)},remove:p=>typeof p=="string"?o(p):i(p),removeByTag:p=>{let h=!1,m=y=>{let{tags:b,name:T,aliases:A}=y;if(b&&b.includes(p)){let N=ys(T,A);for(let q of N)n.delete(q);return h=!0,!1}return!0};return t=t.filter(m),e=e.filter(m),h},concat:p=>{let h=a(kh());return h.use(p),h.identifyOnResolve(r||h.identifyOnResolve()||(p.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>u(!0).map(p=>{let h=p.step??p.relation+" "+p.toMiddleware;return pn(p.name,p.aliases)+" - "+h}),identifyOnResolve(p){return typeof p=="boolean"&&(r=p),r},resolve:(p,h)=>{for(let m of u().map(y=>y.middleware).reverse())p=m(p,h);return r&&console.log(l.identify()),p}};return l},Ev={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},wv={high:3,normal:2,low:1};bv.constructStack=kh});var se=v(pe=>{"use strict";var Tv=vv(),Bh=(pt(),ue(bw)),Mh=Zr(),uF=(be(),ue(np)),xv=(ft(),ue(aw)),Lh=class{config;middlewareStack=Tv.constructStack();initConfig;handlers;constructor(e){this.config=e}send(e,r,n){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,i=s===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(e).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},Dh="***SensitiveInformation***";function Fh(t,e){if(e==null)return e;let r=uF.NormalizedSchema.of(t);if(r.getMergedTraits().sensitive)return Dh;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Dh}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Dh}else if(r.isStructSchema()&&typeof e=="object"){let n=e,s={};for(let[o,i]of r.structIterator())n[o]!=null&&(s[o]=Fh(i,n[o]));return s}return e}var pu=class{middlewareStack=Tv.constructStack();schema;static classBuilder(){return new Uh}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:l,CommandCtor:p}){for(let T of s.bind(this)(p,e,r,n))this.middlewareStack.use(T);let h=e.concat(this.middlewareStack),{logger:m}=r,y={logger:m,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Mh.SMITHY_CONTEXT_KEY]:{commandInstance:this,...u},...l},{requestHandler:b}=r;return h.resolve(T=>b.handle(T.request,n||{}),y)}},Uh=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,r;return r=class extends pu{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.input=n??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,s,o){let i=e._operationSchema,a=i?.[4]??i?.input,c=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(n,s,o,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(i?Fh.bind(null,a):u=>u),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(i?Fh.bind(null,c):u=>u),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}},lF="***SensitiveInformation***",dF=(t,e)=>{for(let r of Object.keys(t)){let n=t[r],s=async function(i,a,c){let u=new n(i);if(typeof a=="function")this.send(u,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(u,a||{},c)}else return this.send(u,a)},o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[o]=s}},qh=class t extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;let r=e;return t.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;let r=e;return this===t?t.isInstance(e):t.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}},Cv=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},Av=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let s=pF(t),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new r({name:e?.code||e?.Code||n||o||"UnknownError",$fault:"client",$metadata:s});throw Cv(i,e)},fF=t=>({output:e,parsedBody:r,errorCode:n})=>{Av({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},pF=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),hF=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Rv=!1,mF=t=>{t&&!Rv&&parseInt(t.substring(1,t.indexOf(".")))<16&&(Rv=!0)},gF=t=>{let e=[];for(let r in Mh.AlgorithmId){let n=Mh.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},yF=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},SF=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),_F=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},Iv=t=>Object.assign(gF(t),SF(t)),EF=Iv,wF=t=>Object.assign(yF(t),_F(t)),bF=t=>Array.isArray(t)?t:[t],Pv=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=Pv(t[r]));return t},vF=t=>t!=null,$h=class{trace(){}debug(){}info(){}warn(){}error(){}};function Ov(t,e,r){let n,s,o;if(typeof e>"u"&&typeof r>"u")n={},o=t;else{if(n=t,typeof e=="function")return s=e,o=r,TF(n,s,o);o=e}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){n[i]=o[i];continue}Nv(n,null,o,i)}return n}var xF=t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},RF=(t,e)=>{let r={};for(let n in e)Nv(r,t,e,n);return r},TF=(t,e,r)=>Ov(t,Object.entries(r).reduce((n,[s,o])=>(Array.isArray(o)?n[s]=o:typeof o=="function"?n[s]=[e,o()]:n[s]=[e,o],n),{})),Nv=(t,e,r,n)=>{if(e!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=CF,c=AF,u=n]=i;(typeof a=="function"&&a(e[u])||typeof a!="function"&&a)&&(t[n]=c(e[u]));return}let[s,o]=r[n];if(typeof o=="function"){let i,a=s===void 0&&(i=o())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=i:c&&(t[n]=o())}else{let i=s===void 0&&o!=null,a=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(i||a)&&(t[n]=o)}},CF=t=>t!=null,AF=t=>t,IF=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},PF=t=>t.toISOString().replace(".000Z","Z"),jh=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(jh);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=jh(t[r]));return e}return t};Object.defineProperty(pe,"collectBody",{enumerable:!0,get:function(){return Bh.collectBody}});Object.defineProperty(pe,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return Bh.extendedEncodeURIComponent}});Object.defineProperty(pe,"resolvedPath",{enumerable:!0,get:function(){return Bh.resolvedPath}});pe.Client=Lh;pe.Command=pu;pe.NoOpLogger=$h;pe.SENSITIVE_STRING=lF;pe.ServiceException=qh;pe._json=jh;pe.convertMap=xF;pe.createAggregatedClient=dF;pe.decorateServiceException=Cv;pe.emitWarningIfUnsupportedVersion=mF;pe.getArrayIfSingleItem=bF;pe.getDefaultClientConfiguration=EF;pe.getDefaultExtensionConfiguration=Iv;pe.getValueFromTextNode=Pv;pe.isSerializableHeaderValue=vF;pe.loadConfigsForDefaultMode=hF;pe.map=Ov;pe.resolveDefaultRuntimeConfig=wF;pe.serializeDateTime=PF;pe.serializeFloat=IF;pe.take=RF;pe.throwDefaultError=Av;pe.withBaseException=fF;Object.keys(xv).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(pe,t)&&Object.defineProperty(pe,t,{enumerable:!0,get:function(){return xv[t]}})})});var kv,Dv,hu,Hh=w(()=>{kv=x(se()),Dv=x(Ve()),hu=(t,e)=>(0,kv.collectBody)(t,e).then(r=>(e?.utf8Encoder??Dv.toUtf8)(r))});var Ss,mu,hn,Di=w(()=>{Hh();Ss=(t,e)=>hu(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),mu=async(t,e)=>{let r=await Ss(t,e);return r.message=r.message??r.Message,r},hn=(t,e)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e&&typeof e=="object"){let o=r(e,"code");if(o&&e[o]!==void 0)return n(e[o]);if(e.__type!==void 0)return n(e.__type)}}});var Mv,ao,Vh=w(()=>{pt();be();ft();Mv=x(ze());fn();_v();Di();ao=class extends tt{settings;constructor(e){super(),this.settings=e}async read(e,r){return this._read(e,typeof r=="string"?JSON.parse(r,Sv):await Ss(r,this.serdeContext))}readObject(e,r){return this._read(e,r)}_read(e,r){let n=r!==null&&typeof r=="object",s=$.of(e);if(s.isListSchema()&&Array.isArray(r)){let i=s.getValueSchema(),a=[],c=!!s.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._read(i,u));return a}else if(s.isMapSchema()&&n){let i=s.getValueSchema(),a={},c=!!s.getMergedTraits().sparse;for(let[u,l]of Object.entries(r))(c||l!=null)&&(a[u]=this._read(i,l));return a}else if(s.isStructSchema()&&n){let i={};for(let[a,c]of s.structIterator()){let u=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,l=this._read(c,r[u]);l!=null&&(i[a]=l)}return i}if(s.isBlobSchema()&&typeof r=="string")return(0,Mv.fromBase64)(r);let o=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof r=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return it.from(r);if(s.isTimestampSchema()&&r!=null)switch(xt(s,this.settings)){case 5:return hp(r);case 6:return mp(r);case 7:return gp(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(s.isBigDecimalSchema()&&r!=null){if(r instanceof ve)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new ve(i.string,i.type):new ve(String(r),"bigDecimal")}if(s.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(s.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof ve?i[a]=c:i[a]=this._read(s,c);return i}else return structuredClone(r);return r}}});var Lv,gu,Fv=w(()=>{ft();Lv="\u039D",gu=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof ve){let n=`${Lv+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${Lv+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(let[r,n]of this.values)e=e.replace(r,n);return e}}});var Uv,co,zh=w(()=>{pt();be();ft();Uv=x(ze());fn();Fv();co=class extends tt{settings;buffer;rootSchema;constructor(e){super(),this.settings=e}write(e,r){this.rootSchema=$.of(e),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(e,r){this.write(e,r),typeof this.buffer=="object"&&(this.buffer.__type=$.of(e).getName(!0))}flush(){let{rootSchema:e}=this;if(this.rootSchema=void 0,e?.isStructSchema()||e?.isDocumentSchema()){let r=new gu;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(e,r,n){let s=r!==null&&typeof r=="object",o=$.of(e);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._write(i,u));return a}else if(o.isMapSchema()&&s){let i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(let[u,l]of Object.entries(r))(c||l!=null)&&(a[u]=this._write(i,l));return a}else if(o.isStructSchema()&&s){let i={};for(let[a,c]of o.structIterator()){let u=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,l=this._write(c,r[a],o);l!==void 0&&(i[u]=l)}return i}if(!(r===null&&n?.isStructSchema())){if(o.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||o.isDocumentSchema()&&r instanceof Uint8Array)return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??Uv.toBase64)(r);if((o.isTimestampSchema()||o.isDocumentSchema())&&r instanceof Date)switch(xt(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return Ei(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(o.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,ar.v4)();let i=o.getMergedTraits().mediaType;if(r!=null&&i&&(i==="application/json"||i.endsWith("+json")))return it.from(r)}if(o.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof ve?i[a]=c:i[a]=this._write(o,c);return i}else return structuredClone(r);return r}}}});var mn,yu=w(()=>{fn();Vh();zh();mn=class extends tt{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new co(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new ao(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var gn,Su=w(()=>{pt();be();io();yu();Di();gn=class extends xr{serializer;deserializer;serviceTarget;codec;mixin=new Nt;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e}),this.serviceTarget=r,this.codec=new mn({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(Kt(e.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(e,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=hn(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=$.of(a),l=s.message??s.Message??"Unknown",p=Le.for(a[1]).getErrorCtor(a)??Error,h=new p(l),m={};for(let[y,b]of u.structIterator()){let T=b.getMergedTraits().jsonName??y;m[y]=this.codec.createDeserializer().readObject(b,s[T])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,m),Object.assign(h,c,{$fault:u.getMergedTraits().error,message:l},m)}}});var _u,qv=w(()=>{Su();_u=class extends gn{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var Eu,$v=w(()=>{Su();Eu=class extends gn{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var wu,jv=w(()=>{pt();be();io();yu();Di();wu=class extends as{serializer;deserializer;codec;mixin=new Nt;constructor({defaultNamespace:e}){super({defaultNamespace:e});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new mn(r),this.serializer=new ls(this.codec.createSerializer(),r),this.deserializer=new us(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),o=$.of(e.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return s.headers["content-type"]&&!s.body&&(s.body="{}"),s}async handleError(e,r,n,s,o){let i=hn(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=$.of(a),l=s.message??s.Message??"Unknown",p=Le.for(a[1]).getErrorCtor(a)??Error,h=new p(l);await this.deserializeHttpMessage(a,r,n,s);let m={};for(let[y,b]of u.structIterator()){let T=b.getMergedTraits().jsonName??y;m[y]=this.codec.createDeserializer().readObject(b,s[T])}throw Object.assign(h,c,{$fault:u.getMergedTraits().error,message:l},m)}getDefaultContentType(){return"application/json"}}});var Bv,Hv,Vv=w(()=>{Bv=x(se()),Hv=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,Bv.expectUnion)(t)}});var Gv=v((xZ,zv)=>{(()=>{"use strict";var t={d:(d,f)=>{for(var g in f)t.o(f,g)&&!t.o(d,g)&&Object.defineProperty(d,g,{enumerable:!0,get:f[g]})},o:(d,f)=>Object.prototype.hasOwnProperty.call(d,f),r:d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{XMLBuilder:()=>zr,XMLParser:()=>$N,XMLValidator:()=>KN});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(d,f){let g=[],E=f.exec(d);for(;E;){let S=[];S.startIndex=f.lastIndex-E[0].length;let _=E.length;for(let C=0;C<_;C++)S.push(E[C]);g.push(S),E=f.exec(d)}return g}let o=function(d){return n.exec(d)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(d,f){f=Object.assign({},i,f);let g=[],E=!1,S=!1;d[0]==="\uFEFF"&&(d=d.substr(1));for(let _=0;_<d.length;_++)if(d[_]==="<"&&d[_+1]==="?"){if(_+=2,_=u(d,_),_.err)return _}else{if(d[_]!=="<"){if(c(d[_]))continue;return A("InvalidChar","char '"+d[_]+"' is not expected.",q(d,_))}{let C=_;if(_++,d[_]==="!"){_=l(d,_);continue}{let R=!1;d[_]==="/"&&(R=!0,_++);let P="";for(;_<d.length&&d[_]!==">"&&d[_]!==" "&&d[_]!=="	"&&d[_]!==`
`&&d[_]!=="\r";_++)P+=d[_];if(P=P.trim(),P[P.length-1]==="/"&&(P=P.substring(0,P.length-1),_--),!o(P)){let B;return B=P.trim().length===0?"Invalid space after '<'.":"Tag '"+P+"' is an invalid name.",A("InvalidTag",B,q(d,_))}let M=m(d,_);if(M===!1)return A("InvalidAttr","Attributes for '"+P+"' have open quote.",q(d,_));let Q=M.value;if(_=M.index,Q[Q.length-1]==="/"){let B=_-Q.length;Q=Q.substring(0,Q.length-1);let ae=b(Q,f);if(ae!==!0)return A(ae.err.code,ae.err.msg,q(d,B+ae.err.line));E=!0}else if(R){if(!M.tagClosed)return A("InvalidTag","Closing tag '"+P+"' doesn't have proper closing.",q(d,_));if(Q.trim().length>0)return A("InvalidTag","Closing tag '"+P+"' can't have attributes or invalid starting.",q(d,C));if(g.length===0)return A("InvalidTag","Closing tag '"+P+"' has not been opened.",q(d,C));{let B=g.pop();if(P!==B.tagName){let ae=q(d,B.tagStartPos);return A("InvalidTag","Expected closing tag '"+B.tagName+"' (opened in line "+ae.line+", col "+ae.col+") instead of closing tag '"+P+"'.",q(d,C))}g.length==0&&(S=!0)}}else{let B=b(Q,f);if(B!==!0)return A(B.err.code,B.err.msg,q(d,_-Q.length+B.err.line));if(S===!0)return A("InvalidXml","Multiple possible root nodes found.",q(d,_));f.unpairedTags.indexOf(P)!==-1||g.push({tagName:P,tagStartPos:C}),E=!0}for(_++;_<d.length;_++)if(d[_]==="<"){if(d[_+1]==="!"){_++,_=l(d,_);continue}if(d[_+1]!=="?")break;if(_=u(d,++_),_.err)return _}else if(d[_]==="&"){let B=T(d,_);if(B==-1)return A("InvalidChar","char '&' is not expected.",q(d,_));_=B}else if(S===!0&&!c(d[_]))return A("InvalidXml","Extra text at the end",q(d,_));d[_]==="<"&&_--}}}return E?g.length==1?A("InvalidTag","Unclosed tag '"+g[0].tagName+"'.",q(d,g[0].tagStartPos)):!(g.length>0)||A("InvalidXml","Invalid '"+JSON.stringify(g.map((_=>_.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):A("InvalidXml","Start tag expected.",1)}function c(d){return d===" "||d==="	"||d===`
`||d==="\r"}function u(d,f){let g=f;for(;f<d.length;f++)if(!(d[f]!="?"&&d[f]!=" ")){let E=d.substr(g,f-g);if(f>5&&E==="xml")return A("InvalidXml","XML declaration allowed only at the start of the document.",q(d,f));if(d[f]=="?"&&d[f+1]==">"){f++;break}}return f}function l(d,f){if(d.length>f+5&&d[f+1]==="-"&&d[f+2]==="-"){for(f+=3;f<d.length;f++)if(d[f]==="-"&&d[f+1]==="-"&&d[f+2]===">"){f+=2;break}}else if(d.length>f+8&&d[f+1]==="D"&&d[f+2]==="O"&&d[f+3]==="C"&&d[f+4]==="T"&&d[f+5]==="Y"&&d[f+6]==="P"&&d[f+7]==="E"){let g=1;for(f+=8;f<d.length;f++)if(d[f]==="<")g++;else if(d[f]===">"&&(g--,g===0))break}else if(d.length>f+9&&d[f+1]==="["&&d[f+2]==="C"&&d[f+3]==="D"&&d[f+4]==="A"&&d[f+5]==="T"&&d[f+6]==="A"&&d[f+7]==="["){for(f+=8;f<d.length;f++)if(d[f]==="]"&&d[f+1]==="]"&&d[f+2]===">"){f+=2;break}}return f}let p='"',h="'";function m(d,f){let g="",E="",S=!1;for(;f<d.length;f++){if(d[f]===p||d[f]===h)E===""?E=d[f]:E!==d[f]||(E="");else if(d[f]===">"&&E===""){S=!0;break}g+=d[f]}return E===""&&{value:g,index:f,tagClosed:S}}let y=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function b(d,f){let g=s(d,y),E={};for(let S=0;S<g.length;S++){if(g[S][1].length===0)return A("InvalidAttr","Attribute '"+g[S][2]+"' has no space in starting.",V(g[S]));if(g[S][3]!==void 0&&g[S][4]===void 0)return A("InvalidAttr","Attribute '"+g[S][2]+"' is without value.",V(g[S]));if(g[S][3]===void 0&&!f.allowBooleanAttributes)return A("InvalidAttr","boolean attribute '"+g[S][2]+"' is not allowed.",V(g[S]));let _=g[S][2];if(!N(_))return A("InvalidAttr","Attribute '"+_+"' is an invalid name.",V(g[S]));if(E.hasOwnProperty(_))return A("InvalidAttr","Attribute '"+_+"' is repeated.",V(g[S]));E[_]=1}return!0}function T(d,f){if(d[++f]===";")return-1;if(d[f]==="#")return(function(E,S){let _=/\d/;for(E[S]==="x"&&(S++,_=/[\da-fA-F]/);S<E.length;S++){if(E[S]===";")return S;if(!E[S].match(_))break}return-1})(d,++f);let g=0;for(;f<d.length;f++,g++)if(!(d[f].match(/\w/)&&g<20)){if(d[f]===";")break;return-1}return f}function A(d,f,g){return{err:{code:d,msg:f,line:g.line||g,col:g.col}}}function N(d){return o(d)}function q(d,f){let g=d.substring(0,f).split(/\r?\n/);return{line:g.length,col:g[g.length-1].length+1}}function V(d){return d.startIndex+d[1].length}let Z={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(d,f){return f},attributeValueProcessor:function(d,f){return f},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(d,f,g){return d},captureMetaData:!1},ge;ge=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Pe{constructor(f){this.tagname=f,this.child=[],this[":@"]={}}add(f,g){f==="__proto__"&&(f="#__proto__"),this.child.push({[f]:g})}addChild(f,g){f.tagname==="__proto__"&&(f.tagname="#__proto__"),f[":@"]&&Object.keys(f[":@"]).length>0?this.child.push({[f.tagname]:f.child,":@":f[":@"]}):this.child.push({[f.tagname]:f.child}),g!==void 0&&(this.child[this.child.length-1][ge]={startIndex:g})}static getMetaDataSymbol(){return ge}}function re(d,f){let g={};if(d[f+3]!=="O"||d[f+4]!=="C"||d[f+5]!=="T"||d[f+6]!=="Y"||d[f+7]!=="P"||d[f+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{f+=9;let E=1,S=!1,_=!1,C="";for(;f<d.length;f++)if(d[f]!=="<"||_)if(d[f]===">"){if(_?d[f-1]==="-"&&d[f-2]==="-"&&(_=!1,E--):E--,E===0)break}else d[f]==="["?S=!0:C+=d[f];else{if(S&&qn(d,"!ENTITY",f)){let R,P;f+=7,[R,P,f]=he(d,f+1),P.indexOf("&")===-1&&(g[R]={regx:RegExp(`&${R};`,"g"),val:P})}else if(S&&qn(d,"!ELEMENT",f)){f+=8;let{index:R}=_N(d,f+1);f=R}else if(S&&qn(d,"!ATTLIST",f))f+=8;else if(S&&qn(d,"!NOTATION",f)){f+=9;let{index:R}=Oe(d,f+1);f=R}else{if(!qn(d,"!--",f))throw new Error("Invalid DOCTYPE");_=!0}E++,C=""}if(E!==0)throw new Error("Unclosed DOCTYPE")}return{entities:g,i:f}}let ie=(d,f)=>{for(;f<d.length&&/\s/.test(d[f]);)f++;return f};function he(d,f){f=ie(d,f);let g="";for(;f<d.length&&!/\s/.test(d[f])&&d[f]!=='"'&&d[f]!=="'";)g+=d[f],f++;if(rf(g),f=ie(d,f),d.substring(f,f+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(d[f]==="%")throw new Error("Parameter entities are not supported");let E="";return[f,E]=Os(d,f,"entity"),[g,E,--f]}function Oe(d,f){f=ie(d,f);let g="";for(;f<d.length&&!/\s/.test(d[f]);)g+=d[f],f++;rf(g),f=ie(d,f);let E=d.substring(f,f+6).toUpperCase();if(E!=="SYSTEM"&&E!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${E}"`);f+=E.length,f=ie(d,f);let S=null,_=null;if(E==="PUBLIC")[f,S]=Os(d,f,"publicIdentifier"),d[f=ie(d,f)]!=='"'&&d[f]!=="'"||([f,_]=Os(d,f,"systemIdentifier"));else if(E==="SYSTEM"&&([f,_]=Os(d,f,"systemIdentifier"),!_))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:g,publicIdentifier:S,systemIdentifier:_,index:--f}}function Os(d,f,g){let E="",S=d[f];if(S!=='"'&&S!=="'")throw new Error(`Expected quoted string, found "${S}"`);for(f++;f<d.length&&d[f]!==S;)E+=d[f],f++;if(d[f]!==S)throw new Error(`Unterminated ${g} value`);return[++f,E]}function _N(d,f){f=ie(d,f);let g="";for(;f<d.length&&!/\s/.test(d[f]);)g+=d[f],f++;if(!rf(g))throw new Error(`Invalid element name: "${g}"`);let E="";if(d[f=ie(d,f)]==="E"&&qn(d,"MPTY",f))f+=4;else if(d[f]==="A"&&qn(d,"NY",f))f+=2;else{if(d[f]!=="(")throw new Error(`Invalid Element Expression, found "${d[f]}"`);for(f++;f<d.length&&d[f]!==")";)E+=d[f],f++;if(d[f]!==")")throw new Error("Unterminated content model")}return{elementName:g,contentModel:E.trim(),index:f}}function qn(d,f,g){for(let E=0;E<f.length;E++)if(f[E]!==d[g+E+1])return!1;return!0}function rf(d){if(o(d))return d;throw new Error(`Invalid entity name ${d}`)}let EN=/^[-+]?0x[a-fA-F0-9]+$/,wN=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,bN={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},vN=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function tS(d){return typeof d=="function"?d:Array.isArray(d)?f=>{for(let g of d)if(typeof g=="string"&&f===g||g instanceof RegExp&&g.test(f))return!0}:()=>!1}class xN{constructor(f){this.options=f,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(g,E)=>String.fromCodePoint(Number.parseInt(E,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(g,E)=>String.fromCodePoint(Number.parseInt(E,16))}},this.addExternalEntities=RN,this.parseXml=PN,this.parseTextData=TN,this.resolveNameSpace=CN,this.buildAttributesMap=IN,this.isItStopNode=DN,this.replaceEntitiesValue=NN,this.readStopNodeData=MN,this.saveTextToParentTag=kN,this.addChild=ON,this.ignoreAttributesFn=tS(this.options.ignoreAttributes)}}function RN(d){let f=Object.keys(d);for(let g=0;g<f.length;g++){let E=f[g];this.lastEntities[E]={regex:new RegExp("&"+E+";","g"),val:d[E]}}}function TN(d,f,g,E,S,_,C){if(d!==void 0&&(this.options.trimValues&&!E&&(d=d.trim()),d.length>0)){C||(d=this.replaceEntitiesValue(d));let R=this.options.tagValueProcessor(f,d,g,S,_);return R==null?d:typeof R!=typeof d||R!==d?R:this.options.trimValues||d.trim()===d?rS(d,this.options.parseTagValue,this.options.numberParseOptions):d}}function CN(d){if(this.options.removeNSPrefix){let f=d.split(":"),g=d.charAt(0)==="/"?"/":"";if(f[0]==="xmlns")return"";f.length===2&&(d=g+f[1])}return d}let AN=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function IN(d,f,g){if(this.options.ignoreAttributes!==!0&&typeof d=="string"){let E=s(d,AN),S=E.length,_={};for(let C=0;C<S;C++){let R=this.resolveNameSpace(E[C][1]);if(this.ignoreAttributesFn(R,f))continue;let P=E[C][4],M=this.options.attributeNamePrefix+R;if(R.length)if(this.options.transformAttributeName&&(M=this.options.transformAttributeName(M)),M==="__proto__"&&(M="#__proto__"),P!==void 0){this.options.trimValues&&(P=P.trim()),P=this.replaceEntitiesValue(P);let Q=this.options.attributeValueProcessor(R,P,f);_[M]=Q==null?P:typeof Q!=typeof P||Q!==P?Q:rS(P,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(_[M]=!0)}if(!Object.keys(_).length)return;if(this.options.attributesGroupName){let C={};return C[this.options.attributesGroupName]=_,C}return _}}let PN=function(d){d=d.replace(/\r\n?/g,`
`);let f=new Pe("!xml"),g=f,E="",S="";for(let _=0;_<d.length;_++)if(d[_]==="<")if(d[_+1]==="/"){let C=$n(d,">",_,"Closing Tag is not closed."),R=d.substring(_+2,C).trim();if(this.options.removeNSPrefix){let Q=R.indexOf(":");Q!==-1&&(R=R.substr(Q+1))}this.options.transformTagName&&(R=this.options.transformTagName(R)),g&&(E=this.saveTextToParentTag(E,g,S));let P=S.substring(S.lastIndexOf(".")+1);if(R&&this.options.unpairedTags.indexOf(R)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${R}>`);let M=0;P&&this.options.unpairedTags.indexOf(P)!==-1?(M=S.lastIndexOf(".",S.lastIndexOf(".")-1),this.tagsNodeStack.pop()):M=S.lastIndexOf("."),S=S.substring(0,M),g=this.tagsNodeStack.pop(),E="",_=C}else if(d[_+1]==="?"){let C=nf(d,_,!1,"?>");if(!C)throw new Error("Pi Tag is not closed.");if(E=this.saveTextToParentTag(E,g,S),!(this.options.ignoreDeclaration&&C.tagName==="?xml"||this.options.ignorePiTags)){let R=new Pe(C.tagName);R.add(this.options.textNodeName,""),C.tagName!==C.tagExp&&C.attrExpPresent&&(R[":@"]=this.buildAttributesMap(C.tagExp,S,C.tagName)),this.addChild(g,R,S,_)}_=C.closeIndex+1}else if(d.substr(_+1,3)==="!--"){let C=$n(d,"-->",_+4,"Comment is not closed.");if(this.options.commentPropName){let R=d.substring(_+4,C-2);E=this.saveTextToParentTag(E,g,S),g.add(this.options.commentPropName,[{[this.options.textNodeName]:R}])}_=C}else if(d.substr(_+1,2)==="!D"){let C=re(d,_);this.docTypeEntities=C.entities,_=C.i}else if(d.substr(_+1,2)==="!["){let C=$n(d,"]]>",_,"CDATA is not closed.")-2,R=d.substring(_+9,C);E=this.saveTextToParentTag(E,g,S);let P=this.parseTextData(R,g.tagname,S,!0,!1,!0,!0);P==null&&(P=""),this.options.cdataPropName?g.add(this.options.cdataPropName,[{[this.options.textNodeName]:R}]):g.add(this.options.textNodeName,P),_=C+2}else{let C=nf(d,_,this.options.removeNSPrefix),R=C.tagName,P=C.rawTagName,M=C.tagExp,Q=C.attrExpPresent,B=C.closeIndex;this.options.transformTagName&&(R=this.options.transformTagName(R)),g&&E&&g.tagname!=="!xml"&&(E=this.saveTextToParentTag(E,g,S,!1));let ae=g;ae&&this.options.unpairedTags.indexOf(ae.tagname)!==-1&&(g=this.tagsNodeStack.pop(),S=S.substring(0,S.lastIndexOf("."))),R!==f.tagname&&(S+=S?"."+R:R);let fe=_;if(this.isItStopNode(this.options.stopNodes,S,R)){let ce="";if(M.length>0&&M.lastIndexOf("/")===M.length-1)R[R.length-1]==="/"?(R=R.substr(0,R.length-1),S=S.substr(0,S.length-1),M=R):M=M.substr(0,M.length-1),_=C.closeIndex;else if(this.options.unpairedTags.indexOf(R)!==-1)_=C.closeIndex;else{let Xt=this.readStopNodeData(d,P,B+1);if(!Xt)throw new Error(`Unexpected end of ${P}`);_=Xt.i,ce=Xt.tagContent}let De=new Pe(R);R!==M&&Q&&(De[":@"]=this.buildAttributesMap(M,S,R)),ce&&(ce=this.parseTextData(ce,R,S,!0,Q,!0,!0)),S=S.substr(0,S.lastIndexOf(".")),De.add(this.options.textNodeName,ce),this.addChild(g,De,S,fe)}else{if(M.length>0&&M.lastIndexOf("/")===M.length-1){R[R.length-1]==="/"?(R=R.substr(0,R.length-1),S=S.substr(0,S.length-1),M=R):M=M.substr(0,M.length-1),this.options.transformTagName&&(R=this.options.transformTagName(R));let ce=new Pe(R);R!==M&&Q&&(ce[":@"]=this.buildAttributesMap(M,S,R)),this.addChild(g,ce,S,fe),S=S.substr(0,S.lastIndexOf("."))}else{let ce=new Pe(R);this.tagsNodeStack.push(g),R!==M&&Q&&(ce[":@"]=this.buildAttributesMap(M,S,R)),this.addChild(g,ce,S,fe),g=ce}E="",_=B}}else E+=d[_];return f.child};function ON(d,f,g,E){this.options.captureMetaData||(E=void 0);let S=this.options.updateTag(f.tagname,g,f[":@"]);S===!1||(typeof S=="string"&&(f.tagname=S),d.addChild(f,E))}let NN=function(d){if(this.options.processEntities){for(let f in this.docTypeEntities){let g=this.docTypeEntities[f];d=d.replace(g.regx,g.val)}for(let f in this.lastEntities){let g=this.lastEntities[f];d=d.replace(g.regex,g.val)}if(this.options.htmlEntities)for(let f in this.htmlEntities){let g=this.htmlEntities[f];d=d.replace(g.regex,g.val)}d=d.replace(this.ampEntity.regex,this.ampEntity.val)}return d};function kN(d,f,g,E){return d&&(E===void 0&&(E=f.child.length===0),(d=this.parseTextData(d,f.tagname,g,!1,!!f[":@"]&&Object.keys(f[":@"]).length!==0,E))!==void 0&&d!==""&&f.add(this.options.textNodeName,d),d=""),d}function DN(d,f,g){let E="*."+g;for(let S in d){let _=d[S];if(E===_||f===_)return!0}return!1}function $n(d,f,g,E){let S=d.indexOf(f,g);if(S===-1)throw new Error(E);return S+f.length-1}function nf(d,f,g,E=">"){let S=(function(B,ae,fe=">"){let ce,De="";for(let Xt=ae;Xt<B.length;Xt++){let Gr=B[Xt];if(ce)Gr===ce&&(ce="");else if(Gr==='"'||Gr==="'")ce=Gr;else if(Gr===fe[0]){if(!fe[1])return{data:De,index:Xt};if(B[Xt+1]===fe[1])return{data:De,index:Xt}}else Gr==="	"&&(Gr=" ");De+=Gr}})(d,f+1,E);if(!S)return;let _=S.data,C=S.index,R=_.search(/\s/),P=_,M=!0;R!==-1&&(P=_.substring(0,R),_=_.substring(R+1).trimStart());let Q=P;if(g){let B=P.indexOf(":");B!==-1&&(P=P.substr(B+1),M=P!==S.data.substr(B+1))}return{tagName:P,tagExp:_,closeIndex:C,attrExpPresent:M,rawTagName:Q}}function MN(d,f,g){let E=g,S=1;for(;g<d.length;g++)if(d[g]==="<")if(d[g+1]==="/"){let _=$n(d,">",g,`${f} is not closed`);if(d.substring(g+2,_).trim()===f&&(S--,S===0))return{tagContent:d.substring(E,g),i:_};g=_}else if(d[g+1]==="?")g=$n(d,"?>",g+1,"StopNode is not closed.");else if(d.substr(g+1,3)==="!--")g=$n(d,"-->",g+3,"StopNode is not closed.");else if(d.substr(g+1,2)==="![")g=$n(d,"]]>",g,"StopNode is not closed.")-2;else{let _=nf(d,g,">");_&&((_&&_.tagName)===f&&_.tagExp[_.tagExp.length-1]!=="/"&&S++,g=_.closeIndex)}}function rS(d,f,g){if(f&&typeof d=="string"){let E=d.trim();return E==="true"||E!=="false"&&(function(S,_={}){if(_=Object.assign({},bN,_),!S||typeof S!="string")return S;let C=S.trim();if(_.skipLike!==void 0&&_.skipLike.test(C))return S;if(S==="0")return 0;if(_.hex&&EN.test(C))return(function(P){if(parseInt)return parseInt(P,16);if(Number.parseInt)return Number.parseInt(P,16);if(window&&window.parseInt)return window.parseInt(P,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(C);if(C.search(/.+[eE].+/)!==-1)return(function(P,M,Q){if(!Q.eNotation)return P;let B=M.match(vN);if(B){let ae=B[1]||"",fe=B[3].indexOf("e")===-1?"E":"e",ce=B[2],De=ae?P[ce.length+1]===fe:P[ce.length]===fe;return ce.length>1&&De?P:ce.length!==1||!B[3].startsWith(`.${fe}`)&&B[3][0]!==fe?Q.leadingZeros&&!De?(M=(B[1]||"")+B[3],Number(M)):P:Number(M)}return P})(S,C,_);{let P=wN.exec(C);if(P){let M=P[1]||"",Q=P[2],B=((R=P[3])&&R.indexOf(".")!==-1&&((R=R.replace(/0+$/,""))==="."?R="0":R[0]==="."?R="0"+R:R[R.length-1]==="."&&(R=R.substring(0,R.length-1))),R),ae=M?S[Q.length+1]===".":S[Q.length]===".";if(!_.leadingZeros&&(Q.length>1||Q.length===1&&!ae))return S;{let fe=Number(C),ce=String(fe);if(fe===0||fe===-0)return fe;if(ce.search(/[eE]/)!==-1)return _.eNotation?fe:S;if(C.indexOf(".")!==-1)return ce==="0"||ce===B||ce===`${M}${B}`?fe:S;let De=Q?B:C;return Q?De===ce||M+De===ce?fe:S:De===ce||De===M+ce?fe:S}}return S}var R})(d,g)}return d!==void 0?d:""}let sf=Pe.getMetaDataSymbol();function LN(d,f){return nS(d,f)}function nS(d,f,g){let E,S={};for(let _=0;_<d.length;_++){let C=d[_],R=FN(C),P="";if(P=g===void 0?R:g+"."+R,R===f.textNodeName)E===void 0?E=C[R]:E+=""+C[R];else{if(R===void 0)continue;if(C[R]){let M=nS(C[R],f,P),Q=qN(M,f);C[sf]!==void 0&&(M[sf]=C[sf]),C[":@"]?UN(M,C[":@"],P,f):Object.keys(M).length!==1||M[f.textNodeName]===void 0||f.alwaysCreateTextNode?Object.keys(M).length===0&&(f.alwaysCreateTextNode?M[f.textNodeName]="":M=""):M=M[f.textNodeName],S[R]!==void 0&&S.hasOwnProperty(R)?(Array.isArray(S[R])||(S[R]=[S[R]]),S[R].push(M)):f.isArray(R,P,Q)?S[R]=[M]:S[R]=M}}}return typeof E=="string"?E.length>0&&(S[f.textNodeName]=E):E!==void 0&&(S[f.textNodeName]=E),S}function FN(d){let f=Object.keys(d);for(let g=0;g<f.length;g++){let E=f[g];if(E!==":@")return E}}function UN(d,f,g,E){if(f){let S=Object.keys(f),_=S.length;for(let C=0;C<_;C++){let R=S[C];E.isArray(R,g+"."+R,!0,!0)?d[R]=[f[R]]:d[R]=f[R]}}}function qN(d,f){let{textNodeName:g}=f,E=Object.keys(d).length;return E===0||!(E!==1||!d[g]&&typeof d[g]!="boolean"&&d[g]!==0)}class $N{constructor(f){this.externalEntities={},this.options=(function(g){return Object.assign({},Z,g)})(f)}parse(f,g){if(typeof f!="string"){if(!f.toString)throw new Error("XML data is accepted in String or Bytes[] form.");f=f.toString()}if(g){g===!0&&(g={});let _=a(f,g);if(_!==!0)throw Error(`${_.err.msg}:${_.err.line}:${_.err.col}`)}let E=new xN(this.options);E.addExternalEntities(this.externalEntities);let S=E.parseXml(f);return this.options.preserveOrder||S===void 0?S:LN(S,this.options)}addEntity(f,g){if(g.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(f.indexOf("&")!==-1||f.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(g==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[f]=g}static getMetaDataSymbol(){return Pe.getMetaDataSymbol()}}function jN(d,f){let g="";return f.format&&f.indentBy.length>0&&(g=`
`),sS(d,f,"",g)}function sS(d,f,g,E){let S="",_=!1;for(let C=0;C<d.length;C++){let R=d[C],P=BN(R);if(P===void 0)continue;let M="";if(M=g.length===0?P:`${g}.${P}`,P===f.textNodeName){let fe=R[P];HN(M,f)||(fe=f.tagValueProcessor(P,fe),fe=iS(fe,f)),_&&(S+=E),S+=fe,_=!1;continue}if(P===f.cdataPropName){_&&(S+=E),S+=`<![CDATA[${R[P][0][f.textNodeName]}]]>`,_=!1;continue}if(P===f.commentPropName){S+=E+`<!--${R[P][0][f.textNodeName]}-->`,_=!0;continue}if(P[0]==="?"){let fe=oS(R[":@"],f),ce=P==="?xml"?"":E,De=R[P][0][f.textNodeName];De=De.length!==0?" "+De:"",S+=ce+`<${P}${De}${fe}?>`,_=!0;continue}let Q=E;Q!==""&&(Q+=f.indentBy);let B=E+`<${P}${oS(R[":@"],f)}`,ae=sS(R[P],f,M,Q);f.unpairedTags.indexOf(P)!==-1?f.suppressUnpairedNode?S+=B+">":S+=B+"/>":ae&&ae.length!==0||!f.suppressEmptyNode?ae&&ae.endsWith(">")?S+=B+`>${ae}${E}</${P}>`:(S+=B+">",ae&&E!==""&&(ae.includes("/>")||ae.includes("</"))?S+=E+f.indentBy+ae+E:S+=ae,S+=`</${P}>`):S+=B+"/>",_=!0}return S}function BN(d){let f=Object.keys(d);for(let g=0;g<f.length;g++){let E=f[g];if(d.hasOwnProperty(E)&&E!==":@")return E}}function oS(d,f){let g="";if(d&&!f.ignoreAttributes)for(let E in d){if(!d.hasOwnProperty(E))continue;let S=f.attributeValueProcessor(E,d[E]);S=iS(S,f),S===!0&&f.suppressBooleanAttributes?g+=` ${E.substr(f.attributeNamePrefix.length)}`:g+=` ${E.substr(f.attributeNamePrefix.length)}="${S}"`}return g}function HN(d,f){let g=(d=d.substr(0,d.length-f.textNodeName.length-1)).substr(d.lastIndexOf(".")+1);for(let E in f.stopNodes)if(f.stopNodes[E]===d||f.stopNodes[E]==="*."+g)return!0;return!1}function iS(d,f){if(d&&d.length>0&&f.processEntities)for(let g=0;g<f.entities.length;g++){let E=f.entities[g];d=d.replace(E.regex,E.val)}return d}let VN={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(d,f){return f},attributeValueProcessor:function(d,f){return f},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function zr(d){this.options=Object.assign({},VN,d),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=tS(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=WN),this.processTextOrObjNode=zN,this.options.format?(this.indentate=GN,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function zN(d,f,g,E){let S=this.j2x(d,g+1,E.concat(f));return d[this.options.textNodeName]!==void 0&&Object.keys(d).length===1?this.buildTextValNode(d[this.options.textNodeName],f,S.attrStr,g):this.buildObjectNode(S.val,f,S.attrStr,g)}function GN(d){return this.options.indentBy.repeat(d)}function WN(d){return!(!d.startsWith(this.options.attributeNamePrefix)||d===this.options.textNodeName)&&d.substr(this.attrPrefixLen)}zr.prototype.build=function(d){return this.options.preserveOrder?jN(d,this.options):(Array.isArray(d)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(d={[this.options.arrayNodeName]:d}),this.j2x(d,0,[]).val)},zr.prototype.j2x=function(d,f,g){let E="",S="",_=g.join(".");for(let C in d)if(Object.prototype.hasOwnProperty.call(d,C))if(d[C]===void 0)this.isAttribute(C)&&(S+="");else if(d[C]===null)this.isAttribute(C)||C===this.options.cdataPropName?S+="":C[0]==="?"?S+=this.indentate(f)+"<"+C+"?"+this.tagEndChar:S+=this.indentate(f)+"<"+C+"/"+this.tagEndChar;else if(d[C]instanceof Date)S+=this.buildTextValNode(d[C],C,"",f);else if(typeof d[C]!="object"){let R=this.isAttribute(C);if(R&&!this.ignoreAttributesFn(R,_))E+=this.buildAttrPairStr(R,""+d[C]);else if(!R)if(C===this.options.textNodeName){let P=this.options.tagValueProcessor(C,""+d[C]);S+=this.replaceEntitiesValue(P)}else S+=this.buildTextValNode(d[C],C,"",f)}else if(Array.isArray(d[C])){let R=d[C].length,P="",M="";for(let Q=0;Q<R;Q++){let B=d[C][Q];if(B!==void 0)if(B===null)C[0]==="?"?S+=this.indentate(f)+"<"+C+"?"+this.tagEndChar:S+=this.indentate(f)+"<"+C+"/"+this.tagEndChar;else if(typeof B=="object")if(this.options.oneListGroup){let ae=this.j2x(B,f+1,g.concat(C));P+=ae.val,this.options.attributesGroupName&&B.hasOwnProperty(this.options.attributesGroupName)&&(M+=ae.attrStr)}else P+=this.processTextOrObjNode(B,C,f,g);else if(this.options.oneListGroup){let ae=this.options.tagValueProcessor(C,B);ae=this.replaceEntitiesValue(ae),P+=ae}else P+=this.buildTextValNode(B,C,"",f)}this.options.oneListGroup&&(P=this.buildObjectNode(P,C,M,f)),S+=P}else if(this.options.attributesGroupName&&C===this.options.attributesGroupName){let R=Object.keys(d[C]),P=R.length;for(let M=0;M<P;M++)E+=this.buildAttrPairStr(R[M],""+d[C][R[M]])}else S+=this.processTextOrObjNode(d[C],C,f,g);return{attrStr:E,val:S}},zr.prototype.buildAttrPairStr=function(d,f){return f=this.options.attributeValueProcessor(d,""+f),f=this.replaceEntitiesValue(f),this.options.suppressBooleanAttributes&&f==="true"?" "+d:" "+d+'="'+f+'"'},zr.prototype.buildObjectNode=function(d,f,g,E){if(d==="")return f[0]==="?"?this.indentate(E)+"<"+f+g+"?"+this.tagEndChar:this.indentate(E)+"<"+f+g+this.closeTag(f)+this.tagEndChar;{let S="</"+f+this.tagEndChar,_="";return f[0]==="?"&&(_="?",S=""),!g&&g!==""||d.indexOf("<")!==-1?this.options.commentPropName!==!1&&f===this.options.commentPropName&&_.length===0?this.indentate(E)+`<!--${d}-->`+this.newLine:this.indentate(E)+"<"+f+g+_+this.tagEndChar+d+this.indentate(E)+S:this.indentate(E)+"<"+f+g+_+">"+d+S}},zr.prototype.closeTag=function(d){let f="";return this.options.unpairedTags.indexOf(d)!==-1?this.options.suppressUnpairedNode||(f="/"):f=this.options.suppressEmptyNode?"/":`></${d}`,f},zr.prototype.buildTextValNode=function(d,f,g,E){if(this.options.cdataPropName!==!1&&f===this.options.cdataPropName)return this.indentate(E)+`<![CDATA[${d}]]>`+this.newLine;if(this.options.commentPropName!==!1&&f===this.options.commentPropName)return this.indentate(E)+`<!--${d}-->`+this.newLine;if(f[0]==="?")return this.indentate(E)+"<"+f+g+"?"+this.tagEndChar;{let S=this.options.tagValueProcessor(f,d);return S=this.replaceEntitiesValue(S),S===""?this.indentate(E)+"<"+f+g+this.closeTag(f)+this.tagEndChar:this.indentate(E)+"<"+f+g+">"+S+"</"+f+this.tagEndChar}},zr.prototype.replaceEntitiesValue=function(d){if(d&&d.length>0&&this.options.processEntities)for(let f=0;f<this.options.entities.length;f++){let g=this.options.entities[f];d=d.replace(g.regex,g.val)}return d};let KN={validate:a};zv.exports=e})()});var Wv=v(Wh=>{"use strict";Object.defineProperty(Wh,"__esModule",{value:!0});Wh.parseXML=NF;var OF=Gv(),Gh=new OF.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>e.trim()===""&&e.includes(`
`)?"":void 0});Gh.addEntity("#xD","\r");Gh.addEntity("#10",`
`);function NF(t){return Gh.parse(t,!0)}});var xu=v(vu=>{"use strict";var kF=Wv();function DF(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function MF(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var bu=class{value;constructor(e){this.value=e}toString(){return MF(""+this.value)}},Kh=class t{name;children;attributes={};static of(e,r,n){let s=new t(e);return r!==void 0&&s.addChildNode(new bu(r)),n!==void 0&&s.withName(n),s}constructor(e,r=[]){this.name=e,this.children=r}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,n=r){if(e[r]!=null){let s=t.of(r,e[r]).withName(n);this.c(s)}}l(e,r,n,s){e[r]!=null&&s().map(i=>{i.withName(n),this.c(i)})}lc(e,r,n,s){if(e[r]!=null){let o=s(),i=new t(n);o.map(a=>{i.c(a)}),this.c(i)}}toString(){let e=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let o=n[s];o!=null&&(r+=` ${s}="${DF(""+o)}"`)}return r+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(vu,"parseXML",{enumerable:!0,get:function(){return kF.parseXML}});vu.XmlNode=Kh;vu.XmlText=bu});var Kv,Qv,Yv,yn,Ru=w(()=>{Kv=x(xu());pt();be();Qv=x(se()),Yv=x(Ve());fn();yn=class extends tt{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new cs(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,r,n){let s=$.of(e),o=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(o).find(u=>!!u.getMemberTraits().eventPayload)){let u={},l=Object.keys(o)[0];return o[l].isBlobSchema()?u[l]=r:u[l]=this.read(o[l],r),u}let a=(this.serdeContext?.utf8Encoder??Yv.toUtf8)(r),c=this.parseXml(a);return this.readSchema(e,n?c[n]:c)}readSchema(e,r){let n=$.of(e);if(n.isUnitSchema())return;let s=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!s.sparse,i=!!s.xmlFlattened;if(n.isListSchema()){let c=n.getValueSchema(),u=[],l=c.getMergedTraits().xmlName??"member",p=i?r:(r[0]??r)[l],h=Array.isArray(p)?p:[p];for(let m of h)(m!=null||o)&&u.push(this.readSchema(c,m));return u}let a={};if(n.isMapSchema()){let c=n.getKeySchema(),u=n.getValueSchema(),l;i?l=Array.isArray(r)?r:[r]:l=Array.isArray(r.entry)?r.entry:[r.entry];let p=c.getMergedTraits().xmlName??"key",h=u.getMergedTraits().xmlName??"value";for(let m of l){let y=m[p],b=m[h];(b!=null||o)&&(a[y]=this.readSchema(u,b))}return a}if(n.isStructSchema()){for(let[c,u]of n.structIterator()){let l=u.getMergedTraits(),p=l.httpPayload?l.xmlName??u.getName():u.getMemberTraits().xmlName??c;r[p]!=null&&(a[c]=this.readSchema(u,r[p]))}return a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(e){if(e.length){let r;try{r=(0,Kv.parseXML)(e)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:e}),i}let n="#text",s=Object.keys(r)[0],o=r[s];return o[n]&&(o[s]=o[n],delete o[n]),(0,Qv.getValueFromTextNode)(o)}return{}}}});var Zv,Jv,Tu,Xv=w(()=>{pt();be();ft();Zv=x(se()),Jv=x(ze());fn();Tu=class extends tt{settings;buffer;constructor(e){super(),this.settings=e}write(e,r,n=""){this.buffer===void 0&&(this.buffer="");let s=$.of(e);if(n&&!n.endsWith(".")&&(n+="."),s.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??Jv.toBase64)(r)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):s.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,ar.v4)()));else if(s.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(s.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof ve?r.string:String(r)));else if(s.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),xt(s,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,Zv.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(s.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${s.getName(!0)}`);if(s.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let o=s.getValueSchema(),i=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let u=this.getKey("member",o.getMergedTraits().xmlName),l=i?`${n}${a}`:`${n}${u}.${a}`;this.write(o,c,l),++a}}}else if(s.isMapSchema()){if(r&&typeof r=="object"){let o=s.getKeySchema(),i=s.getValueSchema(),a=s.getMergedTraits().xmlFlattened,c=1;for(let[u,l]of Object.entries(r)){if(l==null)continue;let p=this.getKey("key",o.getMergedTraits().xmlName),h=a?`${n}${c}.${p}`:`${n}entry.${c}.${p}`,m=this.getKey("value",i.getMergedTraits().xmlName),y=a?`${n}${c}.${m}`:`${n}entry.${c}.${m}`;this.write(o,u,h),this.write(i,l,y),++c}}}else if(s.isStructSchema()){if(r&&typeof r=="object")for(let[o,i]of s.structIterator()){if(r[o]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(o,i.getMergedTraits().xmlName),c=`${n}${a}`;this.write(i,r[o],c)}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let e=this.buffer;return delete this.buffer,e}getKey(e,r){let n=r??e;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${sr(e)}=`}writeValue(e){this.buffer+=sr(e)}}});var uo,Qh=w(()=>{pt();be();io();Ru();Xv();uo=class extends xr{options;serializer;deserializer;mixin=new Nt;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Tu(r),this.deserializer=new yn(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(Kt(e.input)==="unit"||!s.body)&&(s.body="");let o=e.name.split("#")[1]??e.name;return s.body=`Action=${o}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(e,r,n){let s=this.deserializer,o=$.of(e.output),i={};if(n.statusCode>=300){let p=await Wt(n.body,r);p.byteLength>0&&Object.assign(i,await s.read(15,p)),await this.handleError(e,r,n,i,this.deserializeMetadata(n))}for(let p in n.headers){let h=n.headers[p];delete n.headers[p],n.headers[p.toLowerCase()]=h}let a=e.name.split("#")[1]??e.name,c=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,u=await Wt(n.body,r);return u.byteLength>0&&Object.assign(i,await s.read(o,u,c)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(e,r,n,s,o){let i=this.loadQueryErrorCode(n,s)??"Unknown",a=this.loadQueryError(s),c=this.loadQueryErrorMessage(s);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:u,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,a,o,(b,T)=>{try{return b.getSchema(T)}catch{return b.find(N=>$.of(N).getMergedTraits().awsQueryError?.[0]===T)}}),p=$.of(u),h=Le.for(u[1]).getErrorCtor(u)??Error,m=new h(c),y={Error:a.Error};for(let[b,T]of p.structIterator()){let A=T.getMergedTraits().xmlName??b,N=a[A]??s[A];y[b]=this.deserializer.readSchema(T,N)}throw Object.assign(m,l,{$fault:p.getMergedTraits().error,message:c},y)}loadQueryErrorCode(e,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(e.statusCode==404)return"NotFound"}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let r=this.loadQueryError(e);return r?.message??r?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Cu,ex=w(()=>{Qh();Cu=class extends uo{options;constructor(e){super(e),this.options=e;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var tx,rx,lo,Au,Iu,Yh=w(()=>{tx=x(xu()),rx=x(se());Hh();lo=(t,e)=>hu(t,e).then(r=>{if(r.length){let n;try{n=(0,tx.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",o=Object.keys(n)[0],i=n[o];return i[s]&&(i[o]=i[s],delete i[s]),(0,rx.getValueFromTextNode)(i)}return{}}),Au=async(t,e)=>{let r=await lo(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Iu=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var kt,Zh,Pu,fo,Jh=w(()=>{kt=x(xu());pt();be();ft();Zh=x(se()),Pu=x(ze());fn();fo=class extends tt{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,r){let n=$.of(e);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Pu.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let s=n.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,r,n){let s=e.getMergedTraits(),o=e.isMemberSchema()&&!s.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():s.xmlName??e.getName();if(!o||!e.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);let i=kt.XmlNode.of(o),[a,c]=this.getXmlnsAttribute(e,n);for(let[u,l]of e.structIterator()){let p=r[u];if(p!=null||l.isIdempotencyToken()){if(l.getMergedTraits().xmlAttribute){i.addAttribute(l.getMergedTraits().xmlName??u,this.writeSimple(l,p));continue}if(l.isListSchema())this.writeList(l,p,i,c);else if(l.isMapSchema())this.writeMap(l,p,i,c);else if(l.isStructSchema())i.addChildNode(this.writeStruct(l,p,c));else{let h=kt.XmlNode.of(l.getMergedTraits().xmlName??l.getMemberName());this.writeSimpleInto(l,p,h,c),i.addChildNode(h)}}}return c&&i.addAttribute(a,c),i}writeList(e,r,n,s){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);let o=e.getMergedTraits(),i=e.getValueSchema(),a=i.getMergedTraits(),c=!!a.sparse,u=!!o.xmlFlattened,[l,p]=this.getXmlnsAttribute(e,s),h=(m,y)=>{if(i.isListSchema())this.writeList(i,Array.isArray(y)?y:[y],m,p);else if(i.isMapSchema())this.writeMap(i,y,m,p);else if(i.isStructSchema()){let b=this.writeStruct(i,y,p);m.addChildNode(b.withName(u?o.xmlName??e.getMemberName():a.xmlName??"member"))}else{let b=kt.XmlNode.of(u?o.xmlName??e.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,y,b,p),m.addChildNode(b)}};if(u)for(let m of r)(c||m!=null)&&h(n,m);else{let m=kt.XmlNode.of(o.xmlName??e.getMemberName());p&&m.addAttribute(l,p);for(let y of r)(c||y!=null)&&h(m,y);n.addChildNode(m)}}writeMap(e,r,n,s,o=!1){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);let i=e.getMergedTraits(),a=e.getKeySchema(),u=a.getMergedTraits().xmlName??"key",l=e.getValueSchema(),p=l.getMergedTraits(),h=p.xmlName??"value",m=!!p.sparse,y=!!i.xmlFlattened,[b,T]=this.getXmlnsAttribute(e,s),A=(N,q,V)=>{let Z=kt.XmlNode.of(u,q),[ge,Pe]=this.getXmlnsAttribute(a,T);Pe&&Z.addAttribute(ge,Pe),N.addChildNode(Z);let re=kt.XmlNode.of(h);l.isListSchema()?this.writeList(l,V,re,T):l.isMapSchema()?this.writeMap(l,V,re,T,!0):l.isStructSchema()?re=this.writeStruct(l,V,T):this.writeSimpleInto(l,V,re,T),N.addChildNode(re)};if(y){for(let[N,q]of Object.entries(r))if(m||q!=null){let V=kt.XmlNode.of(i.xmlName??e.getMemberName());A(V,N,q),n.addChildNode(V)}}else{let N;o||(N=kt.XmlNode.of(i.xmlName??e.getMemberName()),T&&N.addAttribute(b,T),n.addChildNode(N));for(let[q,V]of Object.entries(r))if(m||V!=null){let Z=kt.XmlNode.of("entry");A(Z,q,V),(o?n:N).addChildNode(Z)}}}writeSimple(e,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=$.of(e),s=null;if(r&&typeof r=="object")if(n.isBlobSchema())s=(this.serdeContext?.base64Encoder??Pu.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(xt(n,this.settings)){case 5:s=r.toISOString().replace(".000Z","Z");break;case 6:s=(0,Zh.dateToUtcString)(r);break;case 7:s=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),s=(0,Zh.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof ve?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(s=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?s=(0,ar.v4)():s=String(r)),s===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return s}writeSimpleInto(e,r,n,s){let o=this.writeSimple(e,r),i=$.of(e),a=new kt.XmlText(o),[c,u]=this.getXmlnsAttribute(i,s);u&&n.addAttribute(c,u),n.addChildNode(a)}getXmlnsAttribute(e,r){let n=e.getMergedTraits(),[s,o]=n.xmlNamespace??[];return o&&o!==r?[s?`xmlns:${s}`:"xmlns",o]:[void 0,void 0]}}});var po,Xh=w(()=>{fn();Ru();Jh();po=class extends tt{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new fo(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new yn(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var Ou,nx=w(()=>{pt();be();io();Yh();Xh();Ou=class extends as{codec;serializer;deserializer;mixin=new Nt;constructor(e){super(e);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new po(r),this.serializer=new ls(this.codec.createSerializer(),r),this.deserializer=new us(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),o=$.of(e.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return s.headers["content-type"]===this.getDefaultContentType()&&typeof s.body=="string"&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,o){let i=Iu(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=$.of(a),l=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",p=Le.for(a[1]).getErrorCtor(a)??Error,h=new p(l);await this.deserializeHttpMessage(a,r,n,s);let m={};for(let[y,b]of u.structIterator()){let T=b.getMergedTraits().xmlName??y,A=s.Error?.[T]??s[T];m[y]=this.codec.createDeserializer().readSchema(b,A)}throw Object.assign(h,c,{$fault:u.getMergedTraits().error,message:l},m)}getDefaultContentType(){return"application/xml"}}});var sx={};st(sx,{AwsEc2QueryProtocol:()=>Cu,AwsJson1_0Protocol:()=>_u,AwsJson1_1Protocol:()=>Eu,AwsJsonRpcProtocol:()=>gn,AwsQueryProtocol:()=>uo,AwsRestJsonProtocol:()=>wu,AwsRestXmlProtocol:()=>Ou,AwsSmithyRpcV2CborProtocol:()=>fu,JsonCodec:()=>mn,JsonShapeDeserializer:()=>ao,JsonShapeSerializer:()=>co,XmlCodec:()=>po,XmlShapeDeserializer:()=>yn,XmlShapeSerializer:()=>fo,_toBool:()=>mv,_toNum:()=>gv,_toStr:()=>hv,awsExpectUnion:()=>Hv,loadRestJsonErrorCode:()=>hn,loadRestXmlErrorCode:()=>Iu,parseJsonBody:()=>Ss,parseJsonErrorBody:()=>mu,parseXmlBody:()=>lo,parseXmlErrorBody:()=>Au});var em=w(()=>{pv();yv();qv();$v();Su();jv();yu();Vh();zh();Vv();Di();ex();Qh();nx();Xh();Ru();Jh();Yh()});var Or={};st(Or,{AWSSDKSigV4Signer:()=>Zp,AwsEc2QueryProtocol:()=>Cu,AwsJson1_0Protocol:()=>_u,AwsJson1_1Protocol:()=>Eu,AwsJsonRpcProtocol:()=>gn,AwsQueryProtocol:()=>uo,AwsRestJsonProtocol:()=>wu,AwsRestXmlProtocol:()=>Ou,AwsSdkSigV4ASigner:()=>Ii,AwsSdkSigV4Signer:()=>mt,AwsSmithyRpcV2CborProtocol:()=>fu,JsonCodec:()=>mn,JsonShapeDeserializer:()=>ao,JsonShapeSerializer:()=>co,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>ro,NODE_SIGV4A_CONFIG_OPTIONS:()=>vb,XmlCodec:()=>po,XmlShapeDeserializer:()=>yn,XmlShapeSerializer:()=>fo,_toBool:()=>mv,_toNum:()=>gv,_toStr:()=>hv,awsExpectUnion:()=>Hv,emitWarningIfUnsupportedVersion:()=>Xs,getBearerTokenEnvKey:()=>Qc,loadRestJsonErrorCode:()=>hn,loadRestXmlErrorCode:()=>Iu,parseJsonBody:()=>Ss,parseJsonErrorBody:()=>mu,parseXmlBody:()=>lo,parseXmlErrorBody:()=>Au,resolveAWSSDKSigV4Config:()=>Qb,resolveAwsSdkSigV4AConfig:()=>bb,resolveAwsSdkSigV4Config:()=>gs,setCredentialFeature:()=>sn,setFeature:()=>ib,setTokenFeature:()=>cb,state:()=>Kc,validateSigningProperties:()=>to});var Ge=w(()=>{Yt();gh();em()});var mo=v(ho=>{"use strict";var LF=(ht(),ue(Ys)),FF=Js(),UF=Se(),ur=(Ge(),ue(Or)),cx=void 0;function qF(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function $F(t){let e=LF.normalizeProvider(t.userAgentAppId??cx),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await e();if(!qF(n)){let s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var jF=/\d{12}\.ddb/;async function BF(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&ur.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let o=await e.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?ur.setFeature(t,"RETRY_MODE_ADAPTIVE","F"):ur.setFeature(t,"RETRY_MODE_STANDARD","E"):ur.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let o=t.endpointV2;switch(String(o?.url?.hostname).match(jF)&&ur.setFeature(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":ur.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":ur.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":ur.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let o=s;o.accountId&&ur.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))ur.setFeature(t,i,a)}}var ox="user-agent",tm="x-amz-user-agent",ix=" ",rm="/",HF=/[^!$%&'*+\-.^_`|~\w]/g,VF=/[^!$%&'*+\-.^_`|~\w#]/g,ax="-",zF=1024;function GF(t){let e="";for(let r in t){let n=t[r];if(e.length+n.length+1<=zF){e.length?e+=","+n:e+=n;continue}break}return e}var ux=t=>(e,r)=>async n=>{let{request:s}=n;if(!UF.HttpRequest.isInstance(s))return e(n);let{headers:o}=s,i=r?.userAgent?.map(Nu)||[],a=(await t.defaultUserAgentProvider()).map(Nu);await BF(r,t,n);let c=r;a.push(`m/${GF(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let u=t?.customUserAgent?.map(Nu)||[],l=await t.userAgentAppId();l&&a.push(Nu(["app",`${l}`]));let p=FF.getUserAgentPrefix(),h=(p?[p]:[]).concat([...a,...i,...u]).join(ix),m=[...a.filter(y=>y.startsWith("aws-sdk-")),...u].join(ix);return t.runtime!=="browser"?(m&&(o[tm]=o[tm]?`${o[ox]} ${m}`:m),o[ox]=h):o[tm]=h,e({...n,request:s})},Nu=t=>{let e=t[0].split(rm).map(i=>i.replace(HF,ax)).join(rm),r=t[1]?.replace(VF,ax),n=e.indexOf(rm),s=e.substring(0,n),o=e.substring(n+1);return s==="api"&&(o=o.toLowerCase()),[s,o,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},lx={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},WF=t=>({applyToStack:e=>{e.add(ux(t),lx)}});ho.DEFAULT_UA_APP_ID=cx;ho.getUserAgentMiddlewareOptions=lx;ho.getUserAgentPlugin=WF;ho.resolveUserAgentConfig=$F;ho.userAgentMiddleware=ux});var dx=v(go=>{"use strict";var KF=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},QF=(t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n};go.SelectorType=void 0;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(go.SelectorType||(go.SelectorType={}));go.booleanSelector=KF;go.numberSelector=QF});var Dt=v(We=>{"use strict";var Sn=dx(),ku=dt(),YF=ps(),hx="AWS_USE_DUALSTACK_ENDPOINT",mx="use_dualstack_endpoint",ZF=!1,JF={environmentVariableSelector:t=>Sn.booleanSelector(t,hx,Sn.SelectorType.ENV),configFileSelector:t=>Sn.booleanSelector(t,mx,Sn.SelectorType.CONFIG),default:!1},gx="AWS_USE_FIPS_ENDPOINT",yx="use_fips_endpoint",XF=!1,e2={environmentVariableSelector:t=>Sn.booleanSelector(t,gx,Sn.SelectorType.ENV),configFileSelector:t=>Sn.booleanSelector(t,yx,Sn.SelectorType.CONFIG),default:!1},t2=t=>{let{tls:e,endpoint:r,urlParser:n,useDualstackEndpoint:s}=t;return Object.assign(t,{tls:e??!0,endpoint:ku.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:ku.normalizeProvider(s??!1)})},r2=async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await t.useDualstackEndpoint(),o=await t.useFipsEndpoint(),{hostname:i}=await t.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:o})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${i}`)},n2=t=>{let e=ku.normalizeProvider(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:o}=t;return Object.assign(t,{tls:o??!0,endpoint:r?ku.normalizeProvider(typeof r=="string"?s(r):r):()=>r2({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e})},Sx="AWS_REGION",_x="region",s2={environmentVariableSelector:t=>t[Sx],configFileSelector:t=>t[_x],default:()=>{throw new Error("Region is missing")}},o2={preferredFile:"credentials"},fx=new Set,i2=(t,e=YF.isValidHostLabel)=>{if(!fx.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else fx.add(t)},Ex=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),a2=t=>Ex(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,c2=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{let n=typeof e=="function"?await e():e,s=a2(n);return i2(s),s},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return Ex(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},px=(t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>t.find(({tags:n})=>e===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,u2=(t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),l2=(t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws",d2=(t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=t.match(s);if(o)return o[0].slice(1,-1)}},f2=(t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:o})=>{let i=l2(t,{partitionHash:o}),a=t in s?t:o[i]?.endpoint??t,c={useFipsEndpoint:e,useDualstackEndpoint:r},u=px(s[a]?.variants,c),l=px(o[i]?.variants,c),p=u2(a,{regionHostname:u,partitionHostname:l});if(p===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let h=d2(p,{signingRegion:s[a]?.signingRegion,regionRegex:o[i].regionRegex,useFipsEndpoint:e});return{partition:i,signingService:n,hostname:p,...h&&{signingRegion:h},...s[a]?.signingService&&{signingService:s[a].signingService}}};We.CONFIG_USE_DUALSTACK_ENDPOINT=mx;We.CONFIG_USE_FIPS_ENDPOINT=yx;We.DEFAULT_USE_DUALSTACK_ENDPOINT=ZF;We.DEFAULT_USE_FIPS_ENDPOINT=XF;We.ENV_USE_DUALSTACK_ENDPOINT=hx;We.ENV_USE_FIPS_ENDPOINT=gx;We.NODE_REGION_CONFIG_FILE_OPTIONS=o2;We.NODE_REGION_CONFIG_OPTIONS=s2;We.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=JF;We.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=e2;We.REGION_ENV_NAME=Sx;We.REGION_INI_NAME=_x;We.getRegionInfo=f2;We.resolveCustomEndpointsConfig=t2;We.resolveEndpointsConfig=n2;We.resolveRegionConfig=c2});var Mi=v(Du=>{"use strict";var p2=Se(),wx="content-length";function bx(t){return e=>async r=>{let n=r.request;if(p2.HttpRequest.isInstance(n)){let{body:s,headers:o}=n;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(wx)===-1)try{let i=t(s);n.headers={...n.headers,[wx]:String(i)}}catch{}}return e({...r,request:n})}}var vx={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},h2=t=>({applyToStack:e=>{e.add(bx(t.bodyLengthChecker),vx)}});Du.contentLengthMiddleware=bx;Du.contentLengthMiddlewareOptions=vx;Du.getContentLengthPlugin=h2});var sm=v(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.getHomeDir=void 0;var m2=require("os"),g2=require("path"),nm={},y2=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",S2=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${g2.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let s=y2();return nm[s]||(nm[s]=(0,m2.homedir)()),nm[s]};Mu.getHomeDir=S2});var om=v(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.getSSOTokenFilepath=void 0;var _2=require("crypto"),E2=require("path"),w2=sm(),b2=t=>{let r=(0,_2.createHash)("sha1").update(t).digest("hex");return(0,E2.join)((0,w2.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Lu.getSSOTokenFilepath=b2});var xx=v(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.getSSOTokenFromFile=_n.tokenIntercept=void 0;var v2=require("fs"),x2=om(),{readFile:R2}=v2.promises;_n.tokenIntercept={};var T2=async t=>{if(_n.tokenIntercept[t])return _n.tokenIntercept[t];let e=(0,x2.getSSOTokenFilepath)(t),r=await R2(e,"utf8");return JSON.parse(r)};_n.getSSOTokenFromFile=T2});var Rx=v(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.slurpFile=Rt.fileIntercept=Rt.filePromisesHash=void 0;var C2=require("fs"),{readFile:A2}=C2.promises;Rt.filePromisesHash={};Rt.fileIntercept={};var I2=(t,e)=>Rt.fileIntercept[t]!==void 0?Rt.fileIntercept[t]:((!Rt.filePromisesHash[t]||e?.ignoreCache)&&(Rt.filePromisesHash[t]=A2(t,"utf8")),Rt.filePromisesHash[t]);Rt.slurpFile=I2});var Nr=v(gt=>{"use strict";var Li=sm(),Tx=om(),im=xx(),Fu=require("path"),Uu=Zr(),Fi=Rx(),Ax="AWS_PROFILE",Ix="default",P2=t=>t.profile||process.env[Ax]||Ix,_s=".",O2=t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(_s);return r===-1?!1:Object.values(Uu.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let s=r.indexOf(_s),o=r.substring(0,s)===Uu.IniSectionType.PROFILE?r.substring(s+1):r;return e[o]=n,e},{...t.default&&{default:t.default}}),N2="AWS_CONFIG_FILE",Px=()=>process.env[N2]||Fu.join(Li.getHomeDir(),".aws","config"),k2="AWS_SHARED_CREDENTIALS_FILE",D2=()=>process.env[k2]||Fu.join(Li.getHomeDir(),".aws","credentials"),M2=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,L2=["__proto__","profile __proto__"],am=t=>{let e={},r,n;for(let s of t.split(/\r?\n/)){let o=s.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,n=void 0;let a=o.substring(1,o.length-1),c=M2.exec(a);if(c){let[,u,,l]=c;Object.values(Uu.IniSectionType).includes(u)&&(r=[u,l].join(_s))}else r=a;if(L2.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[c,u]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(u==="")n=c;else{n&&s.trimStart()===s&&(n=void 0),e[r]=e[r]||{};let l=n?[n,c].join(_s):c;e[r][l]=u}}}}return e},Cx=()=>({}),Ox=async(t={})=>{let{filepath:e=D2(),configFilepath:r=Px()}=t,n=Li.getHomeDir(),s="~/",o=e;e.startsWith(s)&&(o=Fu.join(n,e.slice(2)));let i=r;r.startsWith(s)&&(i=Fu.join(n,r.slice(2)));let a=await Promise.all([Fi.slurpFile(i,{ignoreCache:t.ignoreCache}).then(am).then(O2).catch(Cx),Fi.slurpFile(o,{ignoreCache:t.ignoreCache}).then(am).catch(Cx)]);return{configFile:a[0],credentialsFile:a[1]}},F2=t=>Object.entries(t).filter(([e])=>e.startsWith(Uu.IniSectionType.SSO_SESSION+_s)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(_s)+1)]:n}),{}),U2=()=>({}),q2=async(t={})=>Fi.slurpFile(t.configFilepath??Px()).then(am).then(F2).catch(U2),$2=(...t)=>{let e={};for(let r of t)for(let[n,s]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],s):e[n]=s;return e},j2=async t=>{let e=await Ox(t);return $2(e.configFile,e.credentialsFile)},B2={getFileRecord(){return Fi.fileIntercept},interceptFile(t,e){Fi.fileIntercept[t]=Promise.resolve(e)},getTokenRecord(){return im.tokenIntercept},interceptToken(t,e){im.tokenIntercept[t]=e}};Object.defineProperty(gt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return im.getSSOTokenFromFile}});gt.CONFIG_PREFIX_SEPARATOR=_s;gt.DEFAULT_PROFILE=Ix;gt.ENV_PROFILE=Ax;gt.externalDataInterceptor=B2;gt.getProfileName=P2;gt.loadSharedConfigFiles=Ox;gt.loadSsoSessionData=q2;gt.parseKnownFiles=j2;Object.keys(Li).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(gt,t)&&Object.defineProperty(gt,t,{enumerable:!0,get:function(){return Li[t]}})});Object.keys(Tx).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(gt,t)&&Object.defineProperty(gt,t,{enumerable:!0,get:function(){return Tx[t]}})})});var kr=v(Dx=>{"use strict";var Ui=ct(),Nx=Nr();function kx(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}var H2=(t,e)=>async()=>{try{let r=t(process.env,e);if(r===void 0)throw new Error;return r}catch(r){throw new Ui.CredentialsProviderError(r.message||`Not found in ENV: ${kx(t.toString())}`,{logger:e?.logger})}},V2=(t,{preferredFile:e="config",...r}={})=>async()=>{let n=Nx.getProfileName(r),{configFile:s,credentialsFile:o}=await Nx.loadSharedConfigFiles(r),i=o[n]||{},a=s[n]||{},c=e==="config"?{...i,...a}:{...a,...i};try{let l=t(c,e==="config"?s:o);if(l===void 0)throw new Error;return l}catch(u){throw new Ui.CredentialsProviderError(u.message||`Not found in config files w/ profile [${n}]: ${kx(t.toString())}`,{logger:r.logger})}},z2=t=>typeof t=="function",G2=t=>z2(t)?async()=>await t():Ui.fromStatic(t),W2=({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>{let{signingName:s,logger:o}=n,i={signingName:s,logger:o};return Ui.memoize(Ui.chain(H2(t,i),V2(e,n),G2(r)))};Dx.loadConfig=W2});var Ux=v(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.getEndpointUrlConfig=void 0;var Mx=Nr(),Lx="AWS_ENDPOINT_URL",Fx="endpoint_url",K2=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(o=>o.toUpperCase()),n=e[[Lx,...r].join("_")];if(n)return n;let s=e[Lx];if(s)return s},configFileSelector:(e,r)=>{if(r&&e.services){let s=r[["services",e.services].join(Mx.CONFIG_PREFIX_SEPARATOR)];if(s){let o=t.split(" ").map(a=>a.toLowerCase()),i=s[[o.join("_"),Fx].join(Mx.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=e[Fx];if(n)return n},default:void 0});qu.getEndpointUrlConfig=K2});var qx=v($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.getEndpointFromConfig=void 0;var Q2=kr(),Y2=Ux(),Z2=async t=>(0,Q2.loadConfig)((0,Y2.getEndpointUrlConfig)(t??""))();$u.getEndpointFromConfig=Z2});var En=v(Dr=>{"use strict";var jx=qx(),$x=nn(),J2=(ht(),ue(Ys)),ju=dt(),X2=ns(),eU=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),oU(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!sU(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},tU=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,rU=/(\d+\.){3}\d+/,nU=/\.\./,sU=t=>tU.test(t)&&!rU.test(t)&&!nU.test(t),oU=t=>{let[e,r,n,,,s]=t.split(":"),o=e==="arn"&&t.split(":").length>=6,i=!!(o&&r&&n&&s);if(o&&!i)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return i},iU=(t,e,r)=>{let n=async()=>{let s=r[t]??r[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:o,hostname:i,port:a,path:c}=s;return`${o}//${i}${a?":"+a:""}${c}`}}return s}:n},cm=t=>typeof t=="object"?"url"in t?$x.parseUrl(t.url):t:$x.parseUrl(t),Bx=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await jx.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(cm(i)),r.isCustomEndpoint=!0)}let s=await Hx(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},Hx=async(t,e,r)=>{let n={},s=e?.getEndpointParameterInstructions?.()||{};for(let[o,i]of Object.entries(s))switch(i.type){case"staticContextParams":n[o]=i.value;break;case"contextParams":n[o]=t[i.name];break;case"clientContextParams":case"builtInParams":n[o]=await iU(i.name,o,r)();break;case"operationContextParams":n[o]=i.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await eU(n),n},Vx=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&J2.setFeature(n,"ENDPOINT_OVERRIDE","N");let o=await Bx(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=o,n.authSchemes=o.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let c=ju.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...s})},zx={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:X2.serializerMiddlewareOption.name},aU=(t,e)=>({applyToStack:r=>{r.addRelativeTo(Vx({config:t,instructions:e}),zx)}}),cU=t=>{let e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,o=r!=null?async()=>cm(await ju.normalizeProvider(r)()):void 0,a=Object.assign(t,{endpoint:o,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:ju.normalizeProvider(n??!1),useFipsEndpoint:ju.normalizeProvider(s??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=jx.getEndpointFromConfig(t.serviceId)),c),a},uU=t=>{let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),t};Dr.endpointMiddleware=Vx;Dr.endpointMiddlewareOptions=zx;Dr.getEndpointFromInstructions=Bx;Dr.getEndpointPlugin=aU;Dr.resolveEndpointConfig=cU;Dr.resolveEndpointRequiredConfig=uU;Dr.resolveParams=Hx;Dr.toEndpointV1=cm});var lm=v(wn=>{"use strict";var lU=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],dU=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],fU=["TimeoutError","RequestTimeout","RequestTimeoutException"],pU=[500,502,503,504],hU=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],mU=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],Gx=t=>t?.$retryable!==void 0,gU=t=>lU.includes(t.name),Wx=t=>t.$metadata?.clockSkewCorrected,Kx=t=>{let e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},yU=t=>t.$metadata?.httpStatusCode===429||dU.includes(t.name)||t.$retryable?.throttling==!0,um=(t,e=0)=>Gx(t)||Wx(t)||fU.includes(t.name)||hU.includes(t?.code||"")||mU.includes(t?.code||"")||pU.includes(t.$metadata?.httpStatusCode||0)||Kx(t)||t.cause!==void 0&&e<=10&&um(t.cause,e+1),SU=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!um(t)}return!1};wn.isBrowserNetworkError=Kx;wn.isClockSkewCorrectedError=Wx;wn.isClockSkewError=gU;wn.isRetryableByTrait=Gx;wn.isServerError=SU;wn.isThrottlingError=yU;wn.isTransientError=um});var yo=v(Ae=>{"use strict";var _U=lm();Ae.RETRY_MODES=void 0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Ae.RETRY_MODES||(Ae.RETRY_MODES={}));var dm=3,EU=Ae.RETRY_MODES.STANDARD,Bu=class t{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>t.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),_U.isThrottlingError(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}},qi=100,mm=20*1e3,Yx=500,fm=500,Zx=5,Jx=10,Xx=1,wU="amz-sdk-invocation-id",bU="amz-sdk-request",vU=()=>{let t=qi;return{computeNextBackoffDelay:n=>Math.floor(Math.min(mm,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},Qx=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(mm,t),getRetryCost:()=>r}),$i=class{maxAttempts;mode=Ae.RETRY_MODES.STANDARD;capacity=fm;retryBackoffStrategy=vU();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return Qx({retryDelay:qi,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?Yx:qi);let o=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(s);return this.capacity-=a,Qx({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(fm,this.capacity+(e.getRetryCost()??Xx))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${dm}`),dm}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?Jx:Zx}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}},pm=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Ae.RETRY_MODES.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Bu,this.standardRetryStrategy=new $i(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},hm=class extends $i{computeNextBackoffDelay;constructor(e,r=qi){super(typeof e=="function"?e:async()=>e),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(e,r){let n=await super.refreshRetryTokenForRetry(e,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};Ae.AdaptiveRetryStrategy=pm;Ae.ConfiguredRetryStrategy=hm;Ae.DEFAULT_MAX_ATTEMPTS=dm;Ae.DEFAULT_RETRY_DELAY_BASE=qi;Ae.DEFAULT_RETRY_MODE=EU;Ae.DefaultRateLimiter=Bu;Ae.INITIAL_RETRY_TOKENS=fm;Ae.INVOCATION_ID_HEADER=wU;Ae.MAXIMUM_RETRY_DELAY=mm;Ae.NO_RETRY_INCREMENT=Xx;Ae.REQUEST_HEADER=bU;Ae.RETRY_COST=Zx;Ae.StandardRetryStrategy=$i;Ae.THROTTLING_RETRY_DELAY_BASE=Yx;Ae.TIMEOUT_RETRY_COST=Jx});var eR=v(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.isStreamingPayload=void 0;var xU=require("stream"),RU=t=>t?.body instanceof xU.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;Hu.isStreamingPayload=RU});var Mr=v(Fe=>{"use strict";var xe=yo(),So=Se(),bn=lm(),rR=Ep(),tR=dt(),TU=se(),CU=eR(),AU=(t,e)=>{let r=t,n=xe.NO_RETRY_INCREMENT,s=xe.RETRY_COST,o=xe.TIMEOUT_RETRY_COST,i=t,a=p=>p.name==="TimeoutError"?o:s,c=p=>a(p)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:p=>{if(!c(p))throw new Error("No retry token available");let h=a(p);return i-=h,h},releaseRetryTokens:p=>{i+=p??n,i=Math.min(i,r)}})},nR=(t,e)=>Math.floor(Math.min(xe.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),sR=t=>t?bn.isRetryableByTrait(t)||bn.isClockSkewError(t)||bn.isThrottlingError(t)||bn.isTransientError(t):!1,oR=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Vu=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=xe.RETRY_MODES.STANDARD;constructor(e,r){this.maxAttemptsProvider=e,this.retryDecider=r?.retryDecider??sR,this.delayDecider=r?.delayDecider??nR,this.retryQuota=r?.retryQuota??AU(xe.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=xe.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let s,o=0,i=0,a=await this.getMaxAttempts(),{request:c}=r;for(So.HttpRequest.isInstance(c)&&(c.headers[xe.INVOCATION_ID_HEADER]=rR.v4());;)try{So.HttpRequest.isInstance(c)&&(c.headers[xe.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:u,output:l}=await e(r);return n?.afterRequest&&n.afterRequest(u),this.retryQuota.releaseRetryTokens(s),l.$metadata.attempts=o+1,l.$metadata.totalRetryDelay=i,{response:u,output:l}}catch(u){let l=oR(u);if(o++,this.shouldRetry(l,o,a)){s=this.retryQuota.retrieveRetryTokens(l);let p=this.delayDecider(bn.isThrottlingError(l)?xe.THROTTLING_RETRY_DELAY_BASE:xe.DEFAULT_RETRY_DELAY_BASE,o),h=IU(l.$response),m=Math.max(h||0,p);i+=m,await new Promise(y=>setTimeout(y,m));continue}throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=o,l.$metadata.totalRetryDelay=i,l}}},IU=t=>{if(!So.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},gm=class extends Vu{rateLimiter;constructor(e,r){let{rateLimiter:n,...s}=r??{};super(e,s),this.rateLimiter=n??new xe.DefaultRateLimiter,this.mode=xe.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},ym="AWS_MAX_ATTEMPTS",Sm="max_attempts",PU={environmentVariableSelector:t=>{let e=t[ym];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${ym} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[Sm];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Sm} mast be a number, got "${e}"`);return r},default:xe.DEFAULT_MAX_ATTEMPTS},OU=t=>{let{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=tR.normalizeProvider(n??xe.DEFAULT_MAX_ATTEMPTS);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await tR.normalizeProvider(r)()===xe.RETRY_MODES.ADAPTIVE?new xe.AdaptiveRetryStrategy(s):new xe.StandardRetryStrategy(s))})},iR="AWS_RETRY_MODE",aR="retry_mode",NU={environmentVariableSelector:t=>t[iR],configFileSelector:t=>t[aR],default:xe.DEFAULT_RETRY_MODE},cR=()=>t=>async e=>{let{request:r}=e;return So.HttpRequest.isInstance(r)&&(delete r.headers[xe.INVOCATION_ID_HEADER],delete r.headers[xe.REQUEST_HEADER]),t(e)},uR={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},kU=t=>({applyToStack:e=>{e.addRelativeTo(cR(),uR)}}),lR=t=>(e,r)=>async n=>{let s=await t.retryStrategy(),o=await t.maxAttempts();if(DU(s)){s=s;let i=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0,{request:l}=n,p=So.HttpRequest.isInstance(l);for(p&&(l.headers[xe.INVOCATION_ID_HEADER]=rR.v4());;)try{p&&(l.headers[xe.REQUEST_HEADER]=`attempt=${c+1}; max=${o}`);let{response:h,output:m}=await e(n);return s.recordSuccess(i),m.$metadata.attempts=c+1,m.$metadata.totalRetryDelay=u,{response:h,output:m}}catch(h){let m=MU(h);if(a=oR(h),p&&CU.isStreamingPayload(l))throw(r.logger instanceof TU.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await s.refreshRetryTokenForRetry(i,m)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=i.getRetryCount();let y=i.getRetryDelay();u+=y,await new Promise(b=>setTimeout(b,y))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},DU=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",MU=t=>{let e={error:t,errorType:LU(t)},r=fR(t.$response);return r&&(e.retryAfterHint=r),e},LU=t=>bn.isThrottlingError(t)?"THROTTLING":bn.isTransientError(t)?"TRANSIENT":bn.isServerError(t)?"SERVER_ERROR":"CLIENT_ERROR",dR={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},FU=t=>({applyToStack:e=>{e.add(lR(t),dR)}}),fR=t=>{if(!So.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};Fe.AdaptiveRetryStrategy=gm;Fe.CONFIG_MAX_ATTEMPTS=Sm;Fe.CONFIG_RETRY_MODE=aR;Fe.ENV_MAX_ATTEMPTS=ym;Fe.ENV_RETRY_MODE=iR;Fe.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=PU;Fe.NODE_RETRY_MODE_CONFIG_OPTIONS=NU;Fe.StandardRetryStrategy=Vu;Fe.defaultDelayDecider=nR;Fe.defaultRetryDecider=sR;Fe.getOmitRetryHeadersPlugin=kU;Fe.getRetryAfterHint=fR;Fe.getRetryPlugin=FU;Fe.omitRetryHeadersMiddleware=cR;Fe.omitRetryHeadersMiddlewareOptions=uR;Fe.resolveRetryConfig=OU;Fe.retryMiddleware=lR;Fe.retryMiddlewareOptions=dR});var Em=v(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.resolveHttpAuthSchemeConfig=vn.defaultSecretsManagerHttpAuthSchemeProvider=vn.defaultSecretsManagerHttpAuthSchemeParametersProvider=void 0;var UU=(Ge(),ue(Or)),_m=dt(),qU=async(t,e,r)=>({operation:(0,_m.getSmithyContext)(e).operation,region:await(0,_m.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});vn.defaultSecretsManagerHttpAuthSchemeParametersProvider=qU;function $U(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"secretsmanager",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var jU=t=>{let e=[];switch(t.operation){default:e.push($U(t))}return e};vn.defaultSecretsManagerHttpAuthSchemeProvider=jU;var BU=t=>{let e=(0,UU.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,_m.normalizeProvider)(t.authSchemePreference??[])})};vn.resolveHttpAuthSchemeConfig=BU});var pR=v((GJ,HU)=>{HU.exports={name:"@aws-sdk/client-secrets-manager",description:"AWS SDK for JavaScript Secrets Manager Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-secrets-manager","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo secrets-manager"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/credential-provider-node":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-secrets-manager",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-secrets-manager"}}});var wm=v(xn=>{"use strict";var VU=(Yt(),ue(on)),zU=ct(),hR="AWS_ACCESS_KEY_ID",mR="AWS_SECRET_ACCESS_KEY",gR="AWS_SESSION_TOKEN",yR="AWS_CREDENTIAL_EXPIRATION",SR="AWS_CREDENTIAL_SCOPE",_R="AWS_ACCOUNT_ID",GU=t=>async()=>{t?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let e=process.env[hR],r=process.env[mR],n=process.env[gR],s=process.env[yR],o=process.env[SR],i=process.env[_R];if(e&&r){let a={accessKeyId:e,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...o&&{credentialScope:o},...i&&{accountId:i}};return VU.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new zU.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})};xn.ENV_ACCOUNT_ID=_R;xn.ENV_CREDENTIAL_SCOPE=SR;xn.ENV_EXPIRATION=yR;xn.ENV_KEY=hR;xn.ENV_SECRET=mR;xn.ENV_SESSION=gR;xn.fromEnv=GU});var Bi=v(rt=>{"use strict";var lr=ct(),WU=require("url"),KU=require("buffer"),QU=require("http"),Tm=kr(),YU=nn();function ji(t){return new Promise((e,r)=>{let n=QU.request({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new lr.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new lr.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:o=400}=s;(o<200||300<=o)&&(r(Object.assign(new lr.ProviderError("Error response received from instance metadata service"),{statusCode:o})),n.destroy());let i=[];s.on("data",a=>{i.push(a)}),s.on("end",()=>{e(KU.Buffer.concat(i)),n.destroy()})}),n.end()})}var vR=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",xR=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),RR=1e3,TR=0,Cm=({maxRetries:t=TR,timeout:e=RR})=>({maxRetries:t,timeout:e}),vm=(t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},zu="AWS_CONTAINER_CREDENTIALS_FULL_URI",Gu="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",xm="AWS_CONTAINER_AUTHORIZATION_TOKEN",ZU=(t={})=>{let{timeout:e,maxRetries:r}=Cm(t);return()=>vm(async()=>{let n=await rq({logger:t.logger}),s=JSON.parse(await JU(e,n));if(!vR(s))throw new lr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return xR(s)},r)},JU=async(t,e)=>(process.env[xm]&&(e.headers={...e.headers,Authorization:process.env[xm]}),(await ji({...e,timeout:t})).toString()),XU="169.254.170.2",eq={localhost:!0,"127.0.0.1":!0},tq={"http:":!0,"https:":!0},rq=async({logger:t})=>{if(process.env[Gu])return{hostname:XU,path:process.env[Gu]};if(process.env[zu]){let e=WU.parse(process.env[zu]);if(!e.hostname||!(e.hostname in eq))throw new lr.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in tq))throw new lr.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new lr.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Gu} or ${zu} environment variable is set`,{tryNextLink:!1,logger:t})},Rm=class t extends lr.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(e,r=!0){super(e,r),this.tryNextLink=r,Object.setPrototypeOf(this,t.prototype)}};rt.Endpoint=void 0;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(rt.Endpoint||(rt.Endpoint={}));var nq="AWS_EC2_METADATA_SERVICE_ENDPOINT",sq="ec2_metadata_service_endpoint",oq={environmentVariableSelector:t=>t[nq],configFileSelector:t=>t[sq],default:void 0},_o;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(_o||(_o={}));var iq="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",aq="ec2_metadata_service_endpoint_mode",cq={environmentVariableSelector:t=>t[iq],configFileSelector:t=>t[aq],default:_o.IPv4},CR=async()=>YU.parseUrl(await uq()||await lq()),uq=async()=>Tm.loadConfig(oq)(),lq=async()=>{let t=await Tm.loadConfig(cq)();switch(t){case _o.IPv4:return rt.Endpoint.IPv4;case _o.IPv6:return rt.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(_o)}`)}},dq=300,fq=300,pq="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",ER=(t,e)=>{let r=dq+Math.floor(Math.random()*fq),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+pq);let s=t.originalExpiration??t.expiration;return{...t,...s?{originalExpiration:s}:{},expiration:n}},hq=(t,e={})=>{let r=e?.logger||console,n;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=ER(s,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),s=ER(n,r);else throw o}return n=s,s}},AR="/latest/meta-data/iam/security-credentials/",mq="/latest/api/token",bm="AWS_EC2_METADATA_V1_DISABLED",wR="ec2_metadata_v1_disabled",bR="x-aws-ec2-metadata-token",gq=(t={})=>hq(yq(t),{logger:t.logger}),yq=(t={})=>{let e=!1,{logger:r,profile:n}=t,{timeout:s,maxRetries:o}=Cm(t),i=async(a,c)=>{if(e||c.headers?.[bR]==null){let p=!1,h=!1,m=await Tm.loadConfig({environmentVariableSelector:y=>{let b=y[bm];if(h=!!b&&b!=="false",b===void 0)throw new lr.CredentialsProviderError(`${bm} not set in env, checking config file next.`,{logger:t.logger});return h},configFileSelector:y=>{let b=y[wR];return p=!!b&&b!=="false",p},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||m){let y=[];throw t.ec2MetadataV1Disabled&&y.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),p&&y.push(`config file profile (${wR})`),h&&y.push(`process environment variable (${bm})`),new Rm(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${y.join(", ")}].`)}}let l=(await vm(async()=>{let p;try{p=await _q(c)}catch(h){throw h.statusCode===401&&(e=!1),h}return p},a)).trim();return vm(async()=>{let p;try{p=await Eq(l,c,t)}catch(h){throw h.statusCode===401&&(e=!1),h}return p},a)};return async()=>{let a=await CR();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(o,{...a,timeout:s});{let c;try{c=(await Sq({...a,timeout:s})).toString()}catch(u){if(u?.statusCode===400)throw Object.assign(u,{message:"EC2 Metadata token request returned error"});return(u.message==="TimeoutError"||[403,404,405].includes(u.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(o,{...a,timeout:s})}return i(o,{...a,headers:{[bR]:c},timeout:s})}}},Sq=async t=>ji({...t,path:mq,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),_q=async t=>(await ji({...t,path:AR})).toString(),Eq=async(t,e,r)=>{let n=JSON.parse((await ji({...e,path:AR+t})).toString());if(!vR(n))throw new lr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return xR(n)};rt.DEFAULT_MAX_RETRIES=TR;rt.DEFAULT_TIMEOUT=RR;rt.ENV_CMDS_AUTH_TOKEN=xm;rt.ENV_CMDS_FULL_URI=zu;rt.ENV_CMDS_RELATIVE_URI=Gu;rt.fromContainerMetadata=ZU;rt.fromInstanceMetadata=gq;rt.getInstanceMetadataEndpoint=CR;rt.httpRequest=ji;rt.providerConfigFromInit=Cm});var IR=v(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.checkUrl=void 0;var wq=ct(),bq="169.254.170.2",vq="169.254.170.23",xq="[fd00:ec2::23]",Rq=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===bq||t.hostname===vq||t.hostname===xq)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=s=>{let o=parseInt(s,10);return 0<=o&&o<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new wq.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};Wu.checkUrl=Rq});var PR=v(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.createGetRequest=Iq;Ku.getCredentials=Pq;var Am=ct(),Tq=Se(),Cq=se(),Aq=Rc();function Iq(t){return new Tq.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}async function Pq(t,e){let n=await(0,Aq.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new Am.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,Cq.parseRfc3339DateTime)(s.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new Am.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:s.Code,Message:s.Message})}throw new Am.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}});var OR=v(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.retryWrapper=void 0;var Oq=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(o=>setTimeout(o,r))}return await t()};Qu.retryWrapper=Oq});var DR=v(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.fromHttp=void 0;var Nq=(bi(),ue(wi)),kq=(Yt(),ue(on)),Dq=ss(),NR=ct(),Mq=Nq.__importDefault(require("fs/promises")),Lq=IR(),kR=PR(),Fq=OR(),Uq="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",qq="http://169.254.170.2",$q="AWS_CONTAINER_CREDENTIALS_FULL_URI",jq="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",Bq="AWS_CONTAINER_AUTHORIZATION_TOKEN",Hq=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[Uq],n=t.awsContainerCredentialsFullUri??process.env[$q],s=t.awsContainerAuthorizationToken??process.env[Bq],o=t.awsContainerAuthorizationTokenFile??process.env[jq],i=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?.warn?console.warn:t.logger.warn.bind(t.logger);if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),s&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)e=n;else if(r)e=`${qq}${r}`;else throw new NR.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,Lq.checkUrl)(a,t.logger);let c=Dq.NodeHttpHandler.create({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,Fq.retryWrapper)(async()=>{let u=(0,kR.createGetRequest)(a);s?u.headers.Authorization=s:o&&(u.headers.Authorization=(await Mq.default.readFile(o)).toString());try{let l=await c.handle(u);return(0,kR.getCredentials)(l.response).then(p=>(0,kq.setCredentialFeature)(p,"CREDENTIALS_HTTP","z"))}catch(l){throw new NR.CredentialsProviderError(String(l),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};Yu.fromHttp=Hq});var Im=v(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.fromHttp=void 0;var Vq=DR();Object.defineProperty(Zu,"fromHttp",{enumerable:!0,get:function(){return Vq.fromHttp}})});function zq(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Gq(t){return{schemeId:"smithy.api#noAuth"}}var Hi,MR,LR,FR,Pm=w(()=>{Ge();Hi=x(dt()),MR=async(t,e,r)=>({operation:(0,Hi.getSmithyContext)(e).operation,region:await(0,Hi.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});LR=t=>{let e=[];switch(t.operation){case"CreateToken":{e.push(Gq(t));break}default:e.push(zq(t))}return e},FR=t=>{let e=gs(t);return Object.assign(e,{authSchemePreference:(0,Hi.normalizeProvider)(t.authSchemePreference??[])})}});var UR,qR,Om=w(()=>{UR=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),qR={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Ju,Nm=w(()=>{Ju={name:"@aws-sdk/nested-clients",version:"3.928.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var Vi=v(Es=>{"use strict";var $R=require("os"),km=require("process"),Kq=mo(),jR={isCrtAvailable:!1},Qq=()=>jR.isCrtAvailable?["md/crt-avail"]:null,BR=({serviceId:t,clientVersion:e})=>async r=>{let n=[["aws-sdk-js",e],["ua","2.1"],[`os/${$R.platform()}`,$R.release()],["lang/js"],["md/nodejs",`${km.versions.node}`]],s=Qq();s&&n.push(s),t&&n.push([`api/${t}`,e]),km.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${km.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...n,[`app/${o}`]]:[...n]},Yq=BR,HR="AWS_SDK_UA_APP_ID",VR="sdk_ua_app_id",Zq="sdk-ua-app-id",Jq={environmentVariableSelector:t=>t[HR],configFileSelector:t=>t[VR]??t[Zq],default:Kq.DEFAULT_UA_APP_ID};Es.NODE_APP_ID_CONFIG_OPTIONS=Jq;Es.UA_APP_ID_ENV_NAME=HR;Es.UA_APP_ID_INI_NAME=VR;Es.createDefaultUserAgentProvider=BR;Es.crtAvailability=jR;Es.defaultUserAgent=Yq});var zi=v(WR=>{"use strict";var Dm=Bs(),Xq=Ve(),e$=require("buffer"),zR=require("crypto"),Mm=class{algorithmIdentifier;secret;hash;constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(Xq.toUint8Array(GR(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?zR.createHmac(this.algorithmIdentifier,GR(this.secret)):zR.createHash(this.algorithmIdentifier)}};function GR(t,e){return e$.Buffer.isBuffer(t)?t:typeof t=="string"?Dm.fromString(t,e):ArrayBuffer.isView(t)?Dm.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength):Dm.fromArrayBuffer(t)}WR.Hash=Mm});var Gi=v(KR=>{"use strict";var Lm=require("node:fs"),t$=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(t instanceof Lm.ReadStream){if(t.path!=null)return Lm.lstatSync(t.path).size;if(typeof t.fd=="number")return Lm.fstatSync(t.fd).size}throw new Error(`Body Length computation failed for ${t}`)};KR.calculateBodyLength=t$});var s0,Lt,QR,Wi,Eo,wo,Lr,Fm,Um,YR,ZR,JR,o0,i0,Mt,XR,a0,e0,t0,r0,n0,r$,c0,u0=w(()=>{s0="required",Lt="argv",QR="isSet",Wi="booleanEquals",Eo="error",wo="endpoint",Lr="tree",Fm="PartitionResult",Um="getAttr",YR={[s0]:!1,type:"string"},ZR={[s0]:!0,default:!1,type:"boolean"},JR={ref:"Endpoint"},o0={fn:Wi,[Lt]:[{ref:"UseFIPS"},!0]},i0={fn:Wi,[Lt]:[{ref:"UseDualStack"},!0]},Mt={},XR={fn:Um,[Lt]:[{ref:Fm},"supportsFIPS"]},a0={ref:Fm},e0={fn:Wi,[Lt]:[!0,{fn:Um,[Lt]:[a0,"supportsDualStack"]}]},t0=[o0],r0=[i0],n0=[{ref:"Region"}],r$={version:"1.0",parameters:{Region:YR,UseDualStack:ZR,UseFIPS:ZR,Endpoint:YR},rules:[{conditions:[{fn:QR,[Lt]:[JR]}],rules:[{conditions:t0,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Eo},{conditions:r0,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Eo},{endpoint:{url:JR,properties:Mt,headers:Mt},type:wo}],type:Lr},{conditions:[{fn:QR,[Lt]:n0}],rules:[{conditions:[{fn:"aws.partition",[Lt]:n0,assign:Fm}],rules:[{conditions:[o0,i0],rules:[{conditions:[{fn:Wi,[Lt]:[!0,XR]},e0],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Mt,headers:Mt},type:wo}],type:Lr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Eo}],type:Lr},{conditions:t0,rules:[{conditions:[{fn:Wi,[Lt]:[XR,!0]}],rules:[{conditions:[{fn:"stringEquals",[Lt]:[{fn:Um,[Lt]:[a0,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Mt,headers:Mt},type:wo},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Mt,headers:Mt},type:wo}],type:Lr},{error:"FIPS is enabled but this partition does not support FIPS",type:Eo}],type:Lr},{conditions:r0,rules:[{conditions:[e0],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Mt,headers:Mt},type:wo}],type:Lr},{error:"DualStack is enabled but this partition does not support DualStack",type:Eo}],type:Lr},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Mt,headers:Mt},type:wo}],type:Lr}],type:Lr},{error:"Invalid Configuration: Missing Region",type:Eo}]},c0=r$});var l0,bo,n$,d0,f0=w(()=>{l0=x(Js()),bo=x(ps());u0();n$=new bo.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),d0=(t,e={})=>n$.get(t,()=>(0,bo.resolveEndpoint)(c0,{endpointParams:t,logger:e.logger}));bo.customEndpointFunctions.aws=l0.awsEndpointFunctions});var p0,h0,Xu,el,m0,g0=w(()=>{Ge();ht();p0=x(se()),h0=x(nn()),Xu=x(ze()),el=x(Ve());Pm();f0();m0=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??Xu.fromBase64,base64Encoder:t?.base64Encoder??Xu.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??d0,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??LR,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new mt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Rr}],logger:t?.logger??new p0.NoOpLogger,serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??h0.parseUrl,utf8Decoder:t?.utf8Decoder??el.fromUtf8,utf8Encoder:t?.utf8Encoder??el.toUtf8})});var Ki=v(E0=>{"use strict";var s$=Dt(),y0=kr(),o$=ct(),i$="AWS_EXECUTION_ENV",S0="AWS_REGION",_0="AWS_DEFAULT_REGION",a$="AWS_EC2_METADATA_DISABLED",c$=["in-region","cross-region","mobile","standard","legacy"],u$="/latest/meta-data/placement/region",l$="AWS_DEFAULTS_MODE",d$="defaults_mode",f$={environmentVariableSelector:t=>t[l$],configFileSelector:t=>t[d$],default:"legacy"},p$=({region:t=y0.loadConfig(s$.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=y0.loadConfig(f$)}={})=>o$.memoize(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return h$(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${c$.join(", ")}, got ${r}`)}}),h$=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await m$();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},m$=async()=>{if(process.env[i$]&&(process.env[S0]||process.env[_0]))return process.env[S0]??process.env[_0];if(!process.env[a$])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>x(Bi())),r=await t();return(await e({...r,path:u$})).toString()}catch{}};E0.resolveDefaultsModeConfig=p$});var tl,Tn,w0,rl,Rn,nl,b0,v0,x0,R0,T0,C0,A0=w(()=>{Nm();Ge();tl=x(Vi()),Tn=x(Dt()),w0=x(zi()),rl=x(Mr()),Rn=x(kr()),nl=x(ss()),b0=x(Gi()),v0=x(yo());g0();x0=x(se()),R0=x(Ki()),T0=x(se()),C0=t=>{(0,T0.emitWarningIfUnsupportedVersion)(process.version);let e=(0,R0.resolveDefaultsModeConfig)(t),r=()=>e().then(x0.loadConfigsForDefaultMode),n=m0(t);Xs(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Rn.loadConfig)(ro,s),bodyLengthChecker:t?.bodyLengthChecker??b0.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,tl.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Ju.version}),maxAttempts:t?.maxAttempts??(0,Rn.loadConfig)(rl.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Rn.loadConfig)(Tn.NODE_REGION_CONFIG_OPTIONS,{...Tn.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:nl.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Rn.loadConfig)({...rl.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||v0.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??w0.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??nl.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Rn.loadConfig)(Tn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Rn.loadConfig)(Tn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Rn.loadConfig)(tl.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var P0=v(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.warning=void 0;vo.stsRegionDefaultResolver=y$;var I0=Dt(),g$=kr();function y$(t={}){return(0,g$.loadConfig)({...I0.NODE_REGION_CONFIG_OPTIONS,async default(){return vo.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...I0.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}vo.warning={silence:!1}});var xo=v(dr=>{"use strict";var Qi=Dt(),O0=P0(),S$=t=>({setRegion(e){t.region=e},region(){return t.region}}),_$=t=>({region:t.region()});Object.defineProperty(dr,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return Qi.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(dr,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return Qi.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(dr,"REGION_ENV_NAME",{enumerable:!0,get:function(){return Qi.REGION_ENV_NAME}});Object.defineProperty(dr,"REGION_INI_NAME",{enumerable:!0,get:function(){return Qi.REGION_INI_NAME}});Object.defineProperty(dr,"resolveRegionConfig",{enumerable:!0,get:function(){return Qi.resolveRegionConfig}});dr.getAwsRegionExtensionConfiguration=S$;dr.resolveAwsRegionExtensionConfiguration=_$;Object.keys(O0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(dr,t)&&Object.defineProperty(dr,t,{enumerable:!0,get:function(){return O0[t]}})})});var N0,k0,D0=w(()=>{N0=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},k0=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var sl,ol,il,M0,L0=w(()=>{sl=x(xo()),ol=x(Se()),il=x(se());D0();M0=(t,e)=>{let r=Object.assign((0,sl.getAwsRegionExtensionConfiguration)(t),(0,il.getDefaultExtensionConfiguration)(t),(0,ol.getHttpHandlerExtensionConfiguration)(t),N0(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,sl.resolveAwsRegionExtensionConfiguration)(r),(0,il.resolveDefaultRuntimeConfig)(r),(0,ol.resolveHttpHandlerRuntimeConfig)(r),k0(r))}});var al,F0,U0,cl,q0,$0,j0,ul,qm,Yi,$m=w(()=>{al=x(oi()),F0=x(ii()),U0=x(ai()),cl=x(mo()),q0=x(Dt());ht();$0=x(Mi()),j0=x(En()),ul=x(Mr()),qm=x(se());Pm();Om();A0();L0();Yi=class extends qm.Client{config;constructor(...[e]){let r=C0(e||{});super(r),this.initConfig=r;let n=UR(r),s=(0,cl.resolveUserAgentConfig)(n),o=(0,ul.resolveRetryConfig)(s),i=(0,q0.resolveRegionConfig)(o),a=(0,al.resolveHostHeaderConfig)(i),c=(0,j0.resolveEndpointConfig)(a),u=FR(c),l=M0(u,e?.extensions||[]);this.config=l,this.middlewareStack.use((0,cl.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,ul.getRetryPlugin)(this.config)),this.middlewareStack.use((0,$0.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,al.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,F0.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,U0.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(ui(this.config,{httpAuthSchemeParametersProvider:MR,identityProviderConfigProvider:async p=>new ds({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(li(this.config))}destroy(){super.destroy()}}});var B0,$e,ll=w(()=>{B0=x(se()),$e=class t extends B0.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var ws,E$,Zi,Ji,jm,Bm,Xi,ea,ta,ra,w$,na,sa,oa,ia,aa,dl=w(()=>{ws=x(se());ll();E$={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},Zi=class t extends $e{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},Ji=class t extends $e{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},jm=t=>({...t,...t.clientSecret&&{clientSecret:ws.SENSITIVE_STRING},...t.refreshToken&&{refreshToken:ws.SENSITIVE_STRING},...t.codeVerifier&&{codeVerifier:ws.SENSITIVE_STRING}}),Bm=t=>({...t,...t.accessToken&&{accessToken:ws.SENSITIVE_STRING},...t.refreshToken&&{refreshToken:ws.SENSITIVE_STRING},...t.idToken&&{idToken:ws.SENSITIVE_STRING}}),Xi=class t extends $e{name="ExpiredTokenException";$fault="client";error;error_description;constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},ea=class t extends $e{name="InternalServerException";$fault="server";error;error_description;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},ta=class t extends $e{name="InvalidClientException";$fault="client";error;error_description;constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},ra=class t extends $e{name="InvalidGrantException";$fault="client";error;error_description;constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},w$={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},na=class t extends $e{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},sa=class t extends $e{name="InvalidScopeException";$fault="client";error;error_description;constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},oa=class t extends $e{name="SlowDownException";$fault="client";error;error_description;constructor(e){super({name:"SlowDownException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},ia=class t extends $e{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},aa=class t extends $e{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}}});var k,H0,V0,b$,v$,x$,R$,T$,C$,A$,I$,P$,O$,N$,k$,D$,Ft,z0=w(()=>{Ge();ht();k=x(se());dl();ll();H0=async(t,e)=>{let r=Ri(t,e),n={"content-type":"application/json"};r.bp("/token");let s;return s=JSON.stringify((0,k.take)(t,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,k._json)(o)})),r.m("POST").h(n).b(s),r.build()},V0=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return b$(t,e);let r=(0,k.map)({$metadata:Ft(t)}),n=(0,k.expectNonNull)((0,k.expectObject)(await Ss(t.body,e)),"body"),s=(0,k.take)(n,{accessToken:k.expectString,expiresIn:k.expectInt32,idToken:k.expectString,refreshToken:k.expectString,tokenType:k.expectString});return Object.assign(r,s),r},b$=async(t,e)=>{let r={...t,body:await mu(t.body,e)},n=hn(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await x$(r,e);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await R$(r,e);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await T$(r,e);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await C$(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await A$(r,e);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await I$(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await P$(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await O$(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await N$(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await k$(r,e);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await D$(r,e);default:let s=r.body;return v$({output:t,parsedBody:s,errorCode:n})}},v$=(0,k.withBaseException)($e),x$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString,reason:k.expectString});Object.assign(r,s);let o=new Zi({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},R$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let o=new Ji({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},T$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let o=new Xi({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},C$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let o=new ea({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},A$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let o=new ta({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},I$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let o=new ra({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},P$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString,reason:k.expectString});Object.assign(r,s);let o=new na({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},O$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let o=new sa({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},N$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let o=new oa({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},k$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let o=new ia({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},D$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let o=new aa({$metadata:Ft(t),...r});return(0,k.decorateServiceException)(o,t.body)},Ft=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]})});var G0,W0,Hm,ca,Vm=w(()=>{G0=x(En()),W0=x(ns()),Hm=x(se());Om();dl();z0();ca=class extends Hm.Command.classBuilder().ep(qR).m(function(e,r,n,s){return[(0,W0.getSerdePlugin)(n,this.serialize,this.deserialize),(0,G0.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(jm,Bm).ser(H0).de(V0).build(){}});var K0,M$,fl,Q0=w(()=>{K0=x(se());Vm();$m();M$={CreateTokenCommand:ca},fl=class extends Yi{};(0,K0.createAggregatedClient)(M$,fl)});var Y0=w(()=>{Vm()});var Z0=w(()=>{dl()});var zm={};st(zm,{$Command:()=>Hm.Command,AccessDeniedException:()=>Zi,AccessDeniedExceptionReason:()=>E$,AuthorizationPendingException:()=>Ji,CreateTokenCommand:()=>ca,CreateTokenRequestFilterSensitiveLog:()=>jm,CreateTokenResponseFilterSensitiveLog:()=>Bm,ExpiredTokenException:()=>Xi,InternalServerException:()=>ea,InvalidClientException:()=>ta,InvalidGrantException:()=>ra,InvalidRequestException:()=>na,InvalidRequestExceptionReason:()=>w$,InvalidScopeException:()=>sa,SSOOIDC:()=>fl,SSOOIDCClient:()=>Yi,SSOOIDCServiceException:()=>$e,SlowDownException:()=>oa,UnauthorizedClientException:()=>ia,UnsupportedGrantTypeException:()=>aa,__Client:()=>qm.Client});var Gm=w(()=>{$m();Q0();Y0();Z0();ll()});var tT=v(la=>{"use strict";var L$=(Yt(),ue(on)),F$=(gh(),ue(Jb)),Tt=ct(),ua=Nr(),U$=require("fs"),q$=({logger:t,signingName:e}={})=>async()=>{if(t?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!e)throw new Tt.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:t});let r=F$.getBearerTokenEnvKey(e);if(!(r in process.env))throw new Tt.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:t});let n={token:process.env[r]};return L$.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},$$=300*1e3,Wm="To refresh this SSO session run 'aws sso login' with the corresponding profile.",j$=async(t,e={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(Gm(),zm)),n=o=>e.clientConfig?.[o]??e.parentClientConfig?.[o];return new r(Object.assign({},e.clientConfig??{},{region:t??e.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))},B$=async(t,e,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(Gm(),zm));return(await j$(e,r)).send(new n({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},J0=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new Tt.TokenProviderError(`Token is expired. ${Wm}`,!1)},bs=(t,e,r=!1)=>{if(typeof e>"u")throw new Tt.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${Wm}`,!1)},{writeFile:H$}=U$.promises,V$=(t,e)=>{let r=ua.getSSOTokenFilepath(t),n=JSON.stringify(e,null,2);return H$(r,n)},X0=new Date(0),eT=(t={})=>async({callerClientConfig:e}={})=>{let r={...t,parentClientConfig:{...e,...t.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await ua.parseKnownFiles(r),s=ua.getProfileName({profile:r.profile??e?.profile}),o=n[s];if(o){if(!o.sso_session)throw new Tt.TokenProviderError(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new Tt.TokenProviderError(`Profile '${s}' could not be found in shared credentials file.`,!1);let i=o.sso_session,c=(await ua.loadSsoSessionData(r))[i];if(!c)throw new Tt.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!c[y])throw new Tt.TokenProviderError(`Sso session '${i}' is missing required property '${y}'.`,!1);c.sso_start_url;let u=c.sso_region,l;try{l=await ua.getSSOTokenFromFile(i)}catch{throw new Tt.TokenProviderError(`The SSO session token associated with profile=${s} was not found or is invalid. ${Wm}`,!1)}bs("accessToken",l.accessToken),bs("expiresAt",l.expiresAt);let{accessToken:p,expiresAt:h}=l,m={token:p,expiration:new Date(h)};if(m.expiration.getTime()-Date.now()>$$)return m;if(Date.now()-X0.getTime()<30*1e3)return J0(m),m;bs("clientId",l.clientId,!0),bs("clientSecret",l.clientSecret,!0),bs("refreshToken",l.refreshToken,!0);try{X0.setTime(Date.now());let y=await B$(l,u,r);bs("accessToken",y.accessToken),bs("expiresIn",y.expiresIn);let b=new Date(Date.now()+y.expiresIn*1e3);try{await V$(i,{...l,accessToken:y.accessToken,expiresAt:b.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:b}}catch{return J0(m),m}},z$=({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new Tt.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},G$=(t={})=>Tt.memoize(Tt.chain(eT(t),async()=>{throw new Tt.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);la.fromEnvSigningName=q$;la.fromSso=eT;la.fromStatic=z$;la.nodeProvider=G$});var Qm=v(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.resolveHttpAuthSchemeConfig=Cn.defaultSSOHttpAuthSchemeProvider=Cn.defaultSSOHttpAuthSchemeParametersProvider=void 0;var W$=(Ge(),ue(Or)),Km=dt(),K$=async(t,e,r)=>({operation:(0,Km.getSmithyContext)(e).operation,region:await(0,Km.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Cn.defaultSSOHttpAuthSchemeParametersProvider=K$;function Q$(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function pl(t){return{schemeId:"smithy.api#noAuth"}}var Y$=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(pl(t));break}case"ListAccountRoles":{e.push(pl(t));break}case"ListAccounts":{e.push(pl(t));break}case"Logout":{e.push(pl(t));break}default:e.push(Q$(t))}return e};Cn.defaultSSOHttpAuthSchemeProvider=Y$;var Z$=t=>{let e=(0,W$.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,Km.normalizeProvider)(t.authSchemePreference??[])})};Cn.resolveHttpAuthSchemeConfig=Z$});var rT=v((nee,J$)=>{J$.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var yT=v(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.ruleSet=void 0;var pT="required",qt="fn",$t="argv",Co="ref",nT=!0,sT="isSet",da="booleanEquals",Ro="error",To="endpoint",Fr="tree",Ym="PartitionResult",Zm="getAttr",oT={[pT]:!1,type:"string"},iT={[pT]:!0,default:!1,type:"boolean"},aT={[Co]:"Endpoint"},hT={[qt]:da,[$t]:[{[Co]:"UseFIPS"},!0]},mT={[qt]:da,[$t]:[{[Co]:"UseDualStack"},!0]},Ut={},cT={[qt]:Zm,[$t]:[{[Co]:Ym},"supportsFIPS"]},gT={[Co]:Ym},uT={[qt]:da,[$t]:[!0,{[qt]:Zm,[$t]:[gT,"supportsDualStack"]}]},lT=[hT],dT=[mT],fT=[{[Co]:"Region"}],X$={version:"1.0",parameters:{Region:oT,UseDualStack:iT,UseFIPS:iT,Endpoint:oT},rules:[{conditions:[{[qt]:sT,[$t]:[aT]}],rules:[{conditions:lT,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ro},{conditions:dT,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ro},{endpoint:{url:aT,properties:Ut,headers:Ut},type:To}],type:Fr},{conditions:[{[qt]:sT,[$t]:fT}],rules:[{conditions:[{[qt]:"aws.partition",[$t]:fT,assign:Ym}],rules:[{conditions:[hT,mT],rules:[{conditions:[{[qt]:da,[$t]:[nT,cT]},uT],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ut,headers:Ut},type:To}],type:Fr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ro}],type:Fr},{conditions:lT,rules:[{conditions:[{[qt]:da,[$t]:[cT,nT]}],rules:[{conditions:[{[qt]:"stringEquals",[$t]:[{[qt]:Zm,[$t]:[gT,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Ut,headers:Ut},type:To},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ut,headers:Ut},type:To}],type:Fr},{error:"FIPS is enabled but this partition does not support FIPS",type:Ro}],type:Fr},{conditions:dT,rules:[{conditions:[uT],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ut,headers:Ut},type:To}],type:Fr},{error:"DualStack is enabled but this partition does not support DualStack",type:Ro}],type:Fr},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ut,headers:Ut},type:To}],type:Fr}],type:Fr},{error:"Invalid Configuration: Missing Region",type:Ro}]};hl.ruleSet=X$});var ST=v(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.defaultEndpointResolver=void 0;var ej=Js(),Jm=ps(),tj=yT(),rj=new Jm.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),nj=(t,e={})=>rj.get(t,()=>(0,Jm.resolveEndpoint)(tj.ruleSet,{endpointParams:t,logger:e.logger}));ml.defaultEndpointResolver=nj;Jm.customEndpointFunctions.aws=ej.awsEndpointFunctions});var wT=v(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.getRuntimeConfig=void 0;var sj=(Ge(),ue(Or)),oj=(ht(),ue(Ys)),ij=se(),aj=nn(),_T=ze(),ET=Ve(),cj=Qm(),uj=ST(),lj=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??_T.fromBase64,base64Encoder:t?.base64Encoder??_T.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??uj.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??cj.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new sj.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new oj.NoAuthSigner}],logger:t?.logger??new ij.NoOpLogger,serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??aj.parseUrl,utf8Decoder:t?.utf8Decoder??ET.fromUtf8,utf8Encoder:t?.utf8Encoder??ET.toUtf8});gl.getRuntimeConfig=lj});var TT=v(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.getRuntimeConfig=void 0;var dj=(bi(),ue(wi)),fj=dj.__importDefault(rT()),bT=(Ge(),ue(Or)),vT=Vi(),yl=Dt(),pj=zi(),xT=Mr(),vs=kr(),RT=ss(),hj=Gi(),mj=yo(),gj=wT(),yj=se(),Sj=Ki(),_j=se(),Ej=t=>{(0,_j.emitWarningIfUnsupportedVersion)(process.version);let e=(0,Sj.resolveDefaultsModeConfig)(t),r=()=>e().then(yj.loadConfigsForDefaultMode),n=(0,gj.getRuntimeConfig)(t);(0,bT.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,vs.loadConfig)(bT.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??hj.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,vT.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:fj.default.version}),maxAttempts:t?.maxAttempts??(0,vs.loadConfig)(xT.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,vs.loadConfig)(yl.NODE_REGION_CONFIG_OPTIONS,{...yl.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:RT.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,vs.loadConfig)({...xT.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||mj.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??pj.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??RT.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,vs.loadConfig)(yl.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,vs.loadConfig)(yl.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,vs.loadConfig)(vT.NODE_APP_ID_CONFIG_OPTIONS,s)}};Sl.getRuntimeConfig=Ej});var zT=v(Ie=>{"use strict";var CT=oi(),wj=ii(),bj=ai(),AT=mo(),vj=Dt(),Ur=(ht(),ue(Ys)),xj=Mi(),ma=En(),IT=Mr(),F=se(),PT=Qm(),Rj=TT(),OT=xo(),NT=Se(),Tl=ns(),fa=(Ge(),ue(Or)),Tj=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Cl={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Cj=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},Aj=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),Ij=(t,e)=>{let r=Object.assign(OT.getAwsRegionExtensionConfiguration(t),F.getDefaultExtensionConfiguration(t),NT.getHttpHandlerExtensionConfiguration(t),Cj(t));return e.forEach(n=>n.configure(r)),Object.assign(t,OT.resolveAwsRegionExtensionConfiguration(r),F.resolveDefaultRuntimeConfig(r),NT.resolveHttpHandlerRuntimeConfig(r),Aj(r))},Ao=class extends F.Client{config;constructor(...[e]){let r=Rj.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=Tj(r),s=AT.resolveUserAgentConfig(n),o=IT.resolveRetryConfig(s),i=vj.resolveRegionConfig(o),a=CT.resolveHostHeaderConfig(i),c=ma.resolveEndpointConfig(a),u=PT.resolveHttpAuthSchemeConfig(c),l=Ij(u,e?.extensions||[]);this.config=l,this.middlewareStack.use(AT.getUserAgentPlugin(this.config)),this.middlewareStack.use(IT.getRetryPlugin(this.config)),this.middlewareStack.use(xj.getContentLengthPlugin(this.config)),this.middlewareStack.use(CT.getHostHeaderPlugin(this.config)),this.middlewareStack.use(wj.getLoggerPlugin(this.config)),this.middlewareStack.use(bj.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Ur.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:PT.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new Ur.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(Ur.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},An=class t extends F.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},_l=class t extends An{name="InvalidRequestException";$fault="client";constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},El=class t extends An{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},wl=class t extends An{name="TooManyRequestsException";$fault="client";constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},bl=class t extends An{name="UnauthorizedException";$fault="client";constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},kT=t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),DT=t=>({...t,...t.secretAccessKey&&{secretAccessKey:F.SENSITIVE_STRING},...t.sessionToken&&{sessionToken:F.SENSITIVE_STRING}}),MT=t=>({...t,...t.roleCredentials&&{roleCredentials:DT(t.roleCredentials)}}),LT=t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),FT=t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),UT=t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),Pj=async(t,e)=>{let r=Ur.requestBuilder(t,e),n=F.map({},F.isSerializableHeaderValue,{[Pl]:t[Il]});r.bp("/federation/credentials");let s=F.map({[Vj]:[,F.expectNonNull(t[Hj],"roleName")],[$T]:[,F.expectNonNull(t[qT],"accountId")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},Oj=async(t,e)=>{let r=Ur.requestBuilder(t,e),n=F.map({},F.isSerializableHeaderValue,{[Pl]:t[Il]});r.bp("/assignment/roles");let s=F.map({[VT]:[,t[HT]],[BT]:[()=>t.maxResults!==void 0,()=>t[jT].toString()],[$T]:[,F.expectNonNull(t[qT],"accountId")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},Nj=async(t,e)=>{let r=Ur.requestBuilder(t,e),n=F.map({},F.isSerializableHeaderValue,{[Pl]:t[Il]});r.bp("/assignment/accounts");let s=F.map({[VT]:[,t[HT]],[BT]:[()=>t.maxResults!==void 0,()=>t[jT].toString()]});return r.m("GET").h(n).q(s).b(void 0),r.build()},kj=async(t,e)=>{let r=Ur.requestBuilder(t,e),n=F.map({},F.isSerializableHeaderValue,{[Pl]:t[Il]});return r.bp("/logout"),r.m("POST").h(n).b(void 0),r.build()},Dj=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Al(t,e);let r=F.map({$metadata:In(t)}),n=F.expectNonNull(F.expectObject(await fa.parseJsonBody(t.body,e)),"body"),s=F.take(n,{roleCredentials:F._json});return Object.assign(r,s),r},Mj=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Al(t,e);let r=F.map({$metadata:In(t)}),n=F.expectNonNull(F.expectObject(await fa.parseJsonBody(t.body,e)),"body"),s=F.take(n,{nextToken:F.expectString,roleList:F._json});return Object.assign(r,s),r},Lj=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Al(t,e);let r=F.map({$metadata:In(t)}),n=F.expectNonNull(F.expectObject(await fa.parseJsonBody(t.body,e)),"body"),s=F.take(n,{accountList:F._json,nextToken:F.expectString});return Object.assign(r,s),r},Fj=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Al(t,e);let r=F.map({$metadata:In(t)});return await F.collectBody(t.body,e),r},Al=async(t,e)=>{let r={...t,body:await fa.parseJsonErrorBody(t.body,e)},n=fa.loadRestJsonErrorCode(t,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await qj(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await $j(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await jj(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Bj(r);default:let s=r.body;return Uj({output:t,parsedBody:s,errorCode:n})}},Uj=F.withBaseException(An),qj=async(t,e)=>{let r=F.map({}),n=t.body,s=F.take(n,{message:F.expectString});Object.assign(r,s);let o=new _l({$metadata:In(t),...r});return F.decorateServiceException(o,t.body)},$j=async(t,e)=>{let r=F.map({}),n=t.body,s=F.take(n,{message:F.expectString});Object.assign(r,s);let o=new El({$metadata:In(t),...r});return F.decorateServiceException(o,t.body)},jj=async(t,e)=>{let r=F.map({}),n=t.body,s=F.take(n,{message:F.expectString});Object.assign(r,s);let o=new wl({$metadata:In(t),...r});return F.decorateServiceException(o,t.body)},Bj=async(t,e)=>{let r=F.map({}),n=t.body,s=F.take(n,{message:F.expectString});Object.assign(r,s);let o=new bl({$metadata:In(t),...r});return F.decorateServiceException(o,t.body)},In=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),qT="accountId",Il="accessToken",$T="account_id",jT="maxResults",BT="max_result",HT="nextToken",VT="next_token",Hj="roleName",Vj="role_name",Pl="x-amz-sso_bearer_token",vl=class extends F.Command.classBuilder().ep(Cl).m(function(e,r,n,s){return[Tl.getSerdePlugin(n,this.serialize,this.deserialize),ma.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(kT,MT).ser(Pj).de(Dj).build(){},pa=class extends F.Command.classBuilder().ep(Cl).m(function(e,r,n,s){return[Tl.getSerdePlugin(n,this.serialize,this.deserialize),ma.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(LT,void 0).ser(Oj).de(Mj).build(){},ha=class extends F.Command.classBuilder().ep(Cl).m(function(e,r,n,s){return[Tl.getSerdePlugin(n,this.serialize,this.deserialize),ma.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(FT,void 0).ser(Nj).de(Lj).build(){},xl=class extends F.Command.classBuilder().ep(Cl).m(function(e,r,n,s){return[Tl.getSerdePlugin(n,this.serialize,this.deserialize),ma.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(UT,void 0).ser(kj).de(Fj).build(){},zj={GetRoleCredentialsCommand:vl,ListAccountRolesCommand:pa,ListAccountsCommand:ha,LogoutCommand:xl},Rl=class extends Ao{};F.createAggregatedClient(zj,Rl);var Gj=Ur.createPaginator(Ao,pa,"nextToken","nextToken","maxResults"),Wj=Ur.createPaginator(Ao,ha,"nextToken","nextToken","maxResults");Object.defineProperty(Ie,"$Command",{enumerable:!0,get:function(){return F.Command}});Object.defineProperty(Ie,"__Client",{enumerable:!0,get:function(){return F.Client}});Ie.GetRoleCredentialsCommand=vl;Ie.GetRoleCredentialsRequestFilterSensitiveLog=kT;Ie.GetRoleCredentialsResponseFilterSensitiveLog=MT;Ie.InvalidRequestException=_l;Ie.ListAccountRolesCommand=pa;Ie.ListAccountRolesRequestFilterSensitiveLog=LT;Ie.ListAccountsCommand=ha;Ie.ListAccountsRequestFilterSensitiveLog=FT;Ie.LogoutCommand=xl;Ie.LogoutRequestFilterSensitiveLog=UT;Ie.ResourceNotFoundException=El;Ie.RoleCredentialsFilterSensitiveLog=DT;Ie.SSO=Rl;Ie.SSOClient=Ao;Ie.SSOServiceException=An;Ie.TooManyRequestsException=wl;Ie.UnauthorizedException=bl;Ie.paginateListAccountRoles=Gj;Ie.paginateListAccounts=Wj});var WT=v(Xm=>{"use strict";var GT=zT();Object.defineProperty(Xm,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return GT.GetRoleCredentialsCommand}});Object.defineProperty(Xm,"SSOClient",{enumerable:!0,get:function(){return GT.SSOClient}})});var eg=v(Nl=>{"use strict";var Zt=ct(),Ol=Nr(),KT=(Yt(),ue(on)),Kj=tT(),YT=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),ga=!1,QT=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,clientConfig:i,parentClientConfig:a,profile:c,filepath:u,configFilepath:l,ignoreCache:p,logger:h})=>{let m,y="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let Oe=await Kj.fromSso({profile:c,filepath:u,configFilepath:l,ignoreCache:p})();m={accessToken:Oe.token,expiresAt:new Date(Oe.expiration).toISOString()}}catch(Oe){throw new Zt.CredentialsProviderError(Oe.message,{tryNextLink:ga,logger:h})}else try{m=await Ol.getSSOTokenFromFile(t)}catch{throw new Zt.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${y}`,{tryNextLink:ga,logger:h})}if(new Date(m.expiresAt).getTime()-Date.now()<=0)throw new Zt.CredentialsProviderError(`The SSO session associated with this profile has expired. ${y}`,{tryNextLink:ga,logger:h});let{accessToken:b}=m,{SSOClient:T,GetRoleCredentialsCommand:A}=await Promise.resolve().then(function(){return WT()}),N=o||new T(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??n,userAgentAppId:i?.userAgentAppId??a?.userAgentAppId})),q;try{q=await N.send(new A({accountId:r,roleName:s,accessToken:b}))}catch(Oe){throw new Zt.CredentialsProviderError(Oe,{tryNextLink:ga,logger:h})}let{roleCredentials:{accessKeyId:V,secretAccessKey:Z,sessionToken:ge,expiration:Pe,credentialScope:re,accountId:ie}={}}=q;if(!V||!Z||!ge||!Pe)throw new Zt.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:ga,logger:h});let he={accessKeyId:V,secretAccessKey:Z,sessionToken:ge,expiration:new Date(Pe),...re&&{credentialScope:re},...ie&&{accountId:ie}};return e?KT.setCredentialFeature(he,"CREDENTIALS_SSO","s"):KT.setCredentialFeature(he,"CREDENTIALS_SSO_LEGACY","u"),he},ZT=(t,e)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:o}=t;if(!r||!n||!s||!o)throw new Zt.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},Qj=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=t,{ssoClient:a}=t,c=Ol.getProfileName({profile:t.profile??e?.profile});if(!r&&!n&&!s&&!o&&!i){let l=(await Ol.parseKnownFiles(t))[c];if(!l)throw new Zt.CredentialsProviderError(`Profile ${c} was not found.`,{logger:t.logger});if(!YT(l))throw new Zt.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:t.logger});if(l?.sso_session){let A=(await Ol.loadSsoSessionData(t))[l.sso_session],N=` configurations in profile ${c} and sso-session ${l.sso_session}`;if(s&&s!==A.sso_region)throw new Zt.CredentialsProviderError("Conflicting SSO region"+N,{tryNextLink:!1,logger:t.logger});if(r&&r!==A.sso_start_url)throw new Zt.CredentialsProviderError("Conflicting SSO start_url"+N,{tryNextLink:!1,logger:t.logger});l.sso_region=A.sso_region,l.sso_start_url=A.sso_start_url}let{sso_start_url:p,sso_account_id:h,sso_region:m,sso_role_name:y,sso_session:b}=ZT(l,t.logger);return QT({ssoStartUrl:p,ssoSession:b,ssoAccountId:h,ssoRegion:m,ssoRoleName:y,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}else{if(!r||!n||!s||!o)throw new Zt.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return QT({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}};Nl.fromSSO=Qj;Nl.isSsoProfile=YT;Nl.validateSsoProfile=ZT});function Yj(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Zj(t){return{schemeId:"smithy.api#noAuth"}}var ya,JT,XT,Jj,eC,tg=w(()=>{Ge();ya=x(dt());Sa();JT=async(t,e,r)=>({operation:(0,ya.getSmithyContext)(e).operation,region:await(0,ya.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});XT=t=>{let e=[];switch(t.operation){case"AssumeRoleWithWebIdentity":{e.push(Zj(t));break}default:e.push(Yj(t))}return e},Jj=t=>Object.assign(t,{stsClientCtor:fr}),eC=t=>{let e=Jj(t),r=gs(e);return Object.assign(r,{authSchemePreference:(0,ya.normalizeProvider)(t.authSchemePreference??[])})}});var tC,kl,Dl=w(()=>{tC=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),kl={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var fC,J,le,Pn,Ke,pC,hC,_e,rC,pr,Io,ng,nC,rg,mC,sC,Qe,oC,gC,yC,nt,Ct,iC,SC,_C,aC,EC,cC,uC,lC,dC,Xj,wC,bC=w(()=>{fC="required",J="type",le="argv",Pn="booleanEquals",Ke="stringEquals",pC="sigv4",hC="us-east-1",_e="endpoint",rC="https://sts.{Region}.{PartitionResult#dnsSuffix}",pr="tree",Io="error",ng="getAttr",nC={[fC]:!1,[J]:"string"},rg={[fC]:!0,default:!1,[J]:"boolean"},mC={ref:"Endpoint"},sC={fn:"isSet",[le]:[{ref:"Region"}]},Qe={ref:"Region"},oC={fn:"aws.partition",[le]:[Qe],assign:"PartitionResult"},gC={ref:"UseFIPS"},yC={ref:"UseDualStack"},nt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:pC,signingName:"sts",signingRegion:hC}]},headers:{}},Ct={},iC={conditions:[{fn:Ke,[le]:[Qe,"aws-global"]}],[_e]:nt,[J]:_e},SC={fn:Pn,[le]:[gC,!0]},_C={fn:Pn,[le]:[yC,!0]},aC={fn:ng,[le]:[{ref:"PartitionResult"},"supportsFIPS"]},EC={ref:"PartitionResult"},cC={fn:Pn,[le]:[!0,{fn:ng,[le]:[EC,"supportsDualStack"]}]},uC=[{fn:"isSet",[le]:[mC]}],lC=[SC],dC=[_C],Xj={version:"1.0",parameters:{Region:nC,UseDualStack:rg,UseFIPS:rg,Endpoint:nC,UseGlobalEndpoint:rg},rules:[{conditions:[{fn:Pn,[le]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[le]:uC},sC,oC,{fn:Pn,[le]:[gC,!1]},{fn:Pn,[le]:[yC,!1]}],rules:[{conditions:[{fn:Ke,[le]:[Qe,"ap-northeast-1"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"ap-south-1"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"ap-southeast-1"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"ap-southeast-2"]}],endpoint:nt,[J]:_e},iC,{conditions:[{fn:Ke,[le]:[Qe,"ca-central-1"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"eu-central-1"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"eu-north-1"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"eu-west-1"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"eu-west-2"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"eu-west-3"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"sa-east-1"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,hC]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"us-east-2"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"us-west-1"]}],endpoint:nt,[J]:_e},{conditions:[{fn:Ke,[le]:[Qe,"us-west-2"]}],endpoint:nt,[J]:_e},{endpoint:{url:rC,properties:{authSchemes:[{name:pC,signingName:"sts",signingRegion:"{Region}"}]},headers:Ct},[J]:_e}],[J]:pr},{conditions:uC,rules:[{conditions:lC,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[J]:Io},{conditions:dC,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[J]:Io},{endpoint:{url:mC,properties:Ct,headers:Ct},[J]:_e}],[J]:pr},{conditions:[sC],rules:[{conditions:[oC],rules:[{conditions:[SC,_C],rules:[{conditions:[{fn:Pn,[le]:[!0,aC]},cC],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ct,headers:Ct},[J]:_e}],[J]:pr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[J]:Io}],[J]:pr},{conditions:lC,rules:[{conditions:[{fn:Pn,[le]:[aC,!0]}],rules:[{conditions:[{fn:Ke,[le]:[{fn:ng,[le]:[EC,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Ct,headers:Ct},[J]:_e},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ct,headers:Ct},[J]:_e}],[J]:pr},{error:"FIPS is enabled but this partition does not support FIPS",[J]:Io}],[J]:pr},{conditions:dC,rules:[{conditions:[cC],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ct,headers:Ct},[J]:_e}],[J]:pr},{error:"DualStack is enabled but this partition does not support DualStack",[J]:Io}],[J]:pr},iC,{endpoint:{url:rC,properties:Ct,headers:Ct},[J]:_e}],[J]:pr}],[J]:pr},{error:"Invalid Configuration: Missing Region",[J]:Io}]},wC=Xj});var vC,Po,eB,xC,RC=w(()=>{vC=x(Js()),Po=x(ps());bC();eB=new Po.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),xC=(t,e={})=>eB.get(t,()=>(0,Po.resolveEndpoint)(wC,{endpointParams:t,logger:e.logger}));Po.customEndpointFunctions.aws=vC.awsEndpointFunctions});var TC,CC,Ml,Ll,AC,IC=w(()=>{Ge();ht();TC=x(se()),CC=x(nn()),Ml=x(ze()),Ll=x(Ve());tg();RC();AC=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??Ml.fromBase64,base64Encoder:t?.base64Encoder??Ml.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??xC,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??XT,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new mt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Rr}],logger:t?.logger??new TC.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??CC.parseUrl,utf8Decoder:t?.utf8Decoder??Ll.fromUtf8,utf8Encoder:t?.utf8Encoder??Ll.toUtf8})});var Fl,Nn,PC,Ul,On,ql,OC,NC,kC,DC,MC,LC,FC=w(()=>{Nm();Ge();Fl=x(Vi()),Nn=x(Dt());ht();PC=x(zi()),Ul=x(Mr()),On=x(kr()),ql=x(ss()),OC=x(Gi()),NC=x(yo());IC();kC=x(se()),DC=x(Ki()),MC=x(se()),LC=t=>{(0,MC.emitWarningIfUnsupportedVersion)(process.version);let e=(0,DC.resolveDefaultsModeConfig)(t),r=()=>e().then(kC.loadConfigsForDefaultMode),n=AC(t);Xs(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,On.loadConfig)(ro,s),bodyLengthChecker:t?.bodyLengthChecker??OC.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Fl.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Ju.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await t.credentialDefaultProvider(i?.__config||{})()),signer:new mt},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Rr}],maxAttempts:t?.maxAttempts??(0,On.loadConfig)(Ul.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,On.loadConfig)(Nn.NODE_REGION_CONFIG_OPTIONS,{...Nn.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:ql.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,On.loadConfig)({...Ul.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||NC.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??PC.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??ql.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,On.loadConfig)(Nn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,On.loadConfig)(Nn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,On.loadConfig)(Fl.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var UC,qC,$C=w(()=>{UC=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},qC=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var $l,jl,Bl,jC,BC=w(()=>{$l=x(xo()),jl=x(Se()),Bl=x(se());$C();jC=(t,e)=>{let r=Object.assign((0,$l.getAwsRegionExtensionConfiguration)(t),(0,Bl.getDefaultExtensionConfiguration)(t),(0,jl.getHttpHandlerExtensionConfiguration)(t),UC(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,$l.resolveAwsRegionExtensionConfiguration)(r),(0,Bl.resolveDefaultRuntimeConfig)(r),(0,jl.resolveHttpHandlerRuntimeConfig)(r),qC(r))}});var Hl,HC,VC,Vl,zC,GC,WC,zl,sg,fr,Sa=w(()=>{Hl=x(oi()),HC=x(ii()),VC=x(ai()),Vl=x(mo()),zC=x(Dt());ht();GC=x(Mi()),WC=x(En()),zl=x(Mr()),sg=x(se());tg();Dl();FC();BC();fr=class extends sg.Client{config;constructor(...[e]){let r=LC(e||{});super(r),this.initConfig=r;let n=tC(r),s=(0,Vl.resolveUserAgentConfig)(n),o=(0,zl.resolveRetryConfig)(s),i=(0,zC.resolveRegionConfig)(o),a=(0,Hl.resolveHostHeaderConfig)(i),c=(0,WC.resolveEndpointConfig)(a),u=eC(c),l=jC(u,e?.extensions||[]);this.config=l,this.middlewareStack.use((0,Vl.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,zl.getRetryPlugin)(this.config)),this.middlewareStack.use((0,GC.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Hl.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,HC.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,VC.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(ui(this.config,{httpAuthSchemeParametersProvider:JT,identityProviderConfigProvider:async p=>new ds({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(li(this.config))}destroy(){super.destroy()}}});var KC,yt,Gl=w(()=>{KC=x(se()),yt=class t extends KC.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var og,ig,ag,_a,Ea,wa,ba,va,xa,cg,ug,Ra,Ta=w(()=>{og=x(se());Gl();ig=t=>({...t,...t.SecretAccessKey&&{SecretAccessKey:og.SENSITIVE_STRING}}),ag=t=>({...t,...t.Credentials&&{Credentials:ig(t.Credentials)}}),_a=class t extends yt{name="ExpiredTokenException";$fault="client";constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Ea=class t extends yt{name="MalformedPolicyDocumentException";$fault="client";constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},wa=class t extends yt{name="PackedPolicyTooLargeException";$fault="client";constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ba=class t extends yt{name="RegionDisabledException";$fault="client";constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},va=class t extends yt{name="IDPRejectedClaimException";$fault="client";constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},xa=class t extends yt{name="InvalidIdentityTokenException";$fault="client";constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},cg=t=>({...t,...t.WebIdentityToken&&{WebIdentityToken:og.SENSITIVE_STRING}}),ug=t=>({...t,...t.Credentials&&{Credentials:ig(t.Credentials)}}),Ra=class t extends yt{name="IDPCommunicationErrorException";$fault="client";constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}}});var QC,te,YC,ZC,JC,XC,eA,tB,rB,nB,sB,oB,iB,aB,cB,uB,tA,lB,dB,fB,pB,hB,mB,rA,gB,yB,nA,SB,_B,EB,wB,bB,vB,xB,$r,RB,sA,oA,iA,aA,lg,TB,dg,Oo,CB,fg,pg,No,hg,ko,mg,gg,yg,Do,Mo,Sg,_g,Eg,Lo,wg,Fo,Uo,bg,vg,qr,xg,Rg,Tg,Cg,Ag,cA,Ig,Pg,Og,ke,uA,AB,Ng=w(()=>{Ge();QC=x(Se()),te=x(se());Ta();Gl();YC=async(t,e)=>{let r=oA,n;return n=uA({...cB(t,e),[aA]:TB,[cA]:iA}),sA(e,r,"/",void 0,n)},ZC=async(t,e)=>{let r=oA,n;return n=uA({...uB(t,e),[aA]:CB,[cA]:iA}),sA(e,r,"/",void 0,n)},JC=async(t,e)=>{if(t.statusCode>=300)return eA(t,e);let r=await lo(t.body,e),n={};return n=gB(r.AssumeRoleResult,e),{$metadata:$r(t),...n}},XC=async(t,e)=>{if(t.statusCode>=300)return eA(t,e);let r=await lo(t.body,e),n={};return n=yB(r.AssumeRoleWithWebIdentityResult,e),{$metadata:$r(t),...n}},eA=async(t,e)=>{let r={...t,body:await Au(t.body,e)},n=AB(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await tB(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await oB(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await iB(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await aB(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await rB(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await nB(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await sB(r,e);default:let s=r.body;return RB({output:t,parsedBody:s.Error,errorCode:n})}},tB=async(t,e)=>{let r=t.body,n=SB(r.Error,e),s=new _a({$metadata:$r(t),...n});return(0,te.decorateServiceException)(s,r)},rB=async(t,e)=>{let r=t.body,n=_B(r.Error,e),s=new Ra({$metadata:$r(t),...n});return(0,te.decorateServiceException)(s,r)},nB=async(t,e)=>{let r=t.body,n=EB(r.Error,e),s=new va({$metadata:$r(t),...n});return(0,te.decorateServiceException)(s,r)},sB=async(t,e)=>{let r=t.body,n=wB(r.Error,e),s=new xa({$metadata:$r(t),...n});return(0,te.decorateServiceException)(s,r)},oB=async(t,e)=>{let r=t.body,n=bB(r.Error,e),s=new Ea({$metadata:$r(t),...n});return(0,te.decorateServiceException)(s,r)},iB=async(t,e)=>{let r=t.body,n=vB(r.Error,e),s=new wa({$metadata:$r(t),...n});return(0,te.decorateServiceException)(s,r)},aB=async(t,e)=>{let r=t.body,n=xB(r.Error,e),s=new ba({$metadata:$r(t),...n});return(0,te.decorateServiceException)(s,r)},cB=(t,e)=>{let r={};if(t[Fo]!=null&&(r[Fo]=t[Fo]),t[Uo]!=null&&(r[Uo]=t[Uo]),t[Mo]!=null){let n=tA(t[Mo],e);t[Mo]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,o])=>{let i=`PolicyArns.${s}`;r[i]=o})}if(t[Do]!=null&&(r[Do]=t[Do]),t[ko]!=null&&(r[ko]=t[ko]),t[Tg]!=null){let n=mB(t[Tg],e);t[Tg]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([s,o])=>{let i=`Tags.${s}`;r[i]=o})}if(t[Ag]!=null){let n=hB(t[Ag],e);t[Ag]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([s,o])=>{let i=`TransitiveTagKeys.${s}`;r[i]=o})}if(t[gg]!=null&&(r[gg]=t[gg]),t[xg]!=null&&(r[xg]=t[xg]),t[Cg]!=null&&(r[Cg]=t[Cg]),t[qr]!=null&&(r[qr]=t[qr]),t[_g]!=null){let n=fB(t[_g],e);t[_g]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([s,o])=>{let i=`ProvidedContexts.${s}`;r[i]=o})}return r},uB=(t,e)=>{let r={};if(t[Fo]!=null&&(r[Fo]=t[Fo]),t[Uo]!=null&&(r[Uo]=t[Uo]),t[Pg]!=null&&(r[Pg]=t[Pg]),t[Eg]!=null&&(r[Eg]=t[Eg]),t[Mo]!=null){let n=tA(t[Mo],e);t[Mo]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,o])=>{let i=`PolicyArns.${s}`;r[i]=o})}return t[Do]!=null&&(r[Do]=t[Do]),t[ko]!=null&&(r[ko]=t[ko]),r},tA=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let o=lB(s,e);Object.entries(o).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},lB=(t,e)=>{let r={};return t[Og]!=null&&(r[Og]=t[Og]),r},dB=(t,e)=>{let r={};return t[Sg]!=null&&(r[Sg]=t[Sg]),t[hg]!=null&&(r[hg]=t[hg]),r},fB=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let o=dB(s,e);Object.entries(o).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},pB=(t,e)=>{let r={};return t[yg]!=null&&(r[yg]=t[yg]),t[Ig]!=null&&(r[Ig]=t[Ig]),r},hB=(t,e)=>{let r={},n=1;for(let s of t)s!==null&&(r[`member.${n}`]=s,n++);return r},mB=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let o=pB(s,e);Object.entries(o).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},rA=(t,e)=>{let r={};return t[dg]!=null&&(r[dg]=(0,te.expectString)(t[dg])),t[fg]!=null&&(r[fg]=(0,te.expectString)(t[fg])),r},gB=(t,e)=>{let r={};return t[No]!=null&&(r[No]=nA(t[No],e)),t[Oo]!=null&&(r[Oo]=rA(t[Oo],e)),t[Lo]!=null&&(r[Lo]=(0,te.strictParseInt32)(t[Lo])),t[qr]!=null&&(r[qr]=(0,te.expectString)(t[qr])),r},yB=(t,e)=>{let r={};return t[No]!=null&&(r[No]=nA(t[No],e)),t[vg]!=null&&(r[vg]=(0,te.expectString)(t[vg])),t[Oo]!=null&&(r[Oo]=rA(t[Oo],e)),t[Lo]!=null&&(r[Lo]=(0,te.strictParseInt32)(t[Lo])),t[wg]!=null&&(r[wg]=(0,te.expectString)(t[wg])),t[pg]!=null&&(r[pg]=(0,te.expectString)(t[pg])),t[qr]!=null&&(r[qr]=(0,te.expectString)(t[qr])),r},nA=(t,e)=>{let r={};return t[lg]!=null&&(r[lg]=(0,te.expectString)(t[lg])),t[bg]!=null&&(r[bg]=(0,te.expectString)(t[bg])),t[Rg]!=null&&(r[Rg]=(0,te.expectString)(t[Rg])),t[mg]!=null&&(r[mg]=(0,te.expectNonNull)((0,te.parseRfc3339DateTimeWithOffset)(t[mg]))),r},SB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},_B=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},EB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},wB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},bB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},vB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},xB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},$r=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),RB=(0,te.withBaseException)(yt),sA=async(t,e,r,n,s)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await t.endpoint(),u={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:e};return n!==void 0&&(u.hostname=n),s!==void 0&&(u.body=s),new QC.HttpRequest(u)},oA={"content-type":"application/x-www-form-urlencoded"},iA="2011-06-15",aA="Action",lg="AccessKeyId",TB="AssumeRole",dg="AssumedRoleId",Oo="AssumedRoleUser",CB="AssumeRoleWithWebIdentity",fg="Arn",pg="Audience",No="Credentials",hg="ContextAssertion",ko="DurationSeconds",mg="Expiration",gg="ExternalId",yg="Key",Do="Policy",Mo="PolicyArns",Sg="ProviderArn",_g="ProvidedContexts",Eg="ProviderId",Lo="PackedPolicySize",wg="Provider",Fo="RoleArn",Uo="RoleSessionName",bg="SecretAccessKey",vg="SubjectFromWebIdentityToken",qr="SourceIdentity",xg="SerialNumber",Rg="SessionToken",Tg="Tags",Cg="TokenCode",Ag="TransitiveTagKeys",cA="Version",Ig="Value",Pg="WebIdentityToken",Og="arn",ke="message",uA=t=>Object.entries(t).map(([e,r])=>(0,te.extendedEncodeURIComponent)(e)+"="+(0,te.extendedEncodeURIComponent)(r)).join("&"),AB=(t,e)=>{if(e.Error?.Code!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"}});var lA,dA,fA,xs,Wl=w(()=>{lA=x(En()),dA=x(ns()),fA=x(se());Dl();Ta();Ng();xs=class extends fA.Command.classBuilder().ep(kl).m(function(e,r,n,s){return[(0,dA.getSerdePlugin)(n,this.serialize,this.deserialize),(0,lA.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,ag).ser(YC).de(JC).build(){}});var pA,hA,mA,Rs,Kl=w(()=>{pA=x(En()),hA=x(ns()),mA=x(se());Dl();Ta();Ng();Rs=class extends mA.Command.classBuilder().ep(kl).m(function(e,r,n,s){return[(0,hA.getSerdePlugin)(n,this.serialize,this.deserialize),(0,pA.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(cg,ug).ser(ZC).de(XC).build(){}});var gA,IB,Ql,yA=w(()=>{gA=x(se());Wl();Kl();Sa();IB={AssumeRoleCommand:xs,AssumeRoleWithWebIdentityCommand:Rs},Ql=class extends fr{};(0,gA.createAggregatedClient)(IB,Ql)});var SA=w(()=>{Wl();Kl()});var _A=w(()=>{Ta()});var EA,wA,bA,vA,xA,RA,TA=w(()=>{Yt();EA=x(xo());Wl();Kl();wA=t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},bA=async(t,e,r,n={})=>{let s=typeof t=="function"?await t():t,o=typeof e=="function"?await e():e,i=await(0,EA.stsRegionDefaultResolver)(n)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),s??o??i},vA=(t,e)=>{let r,n;return async(s,o)=>{if(n=s,!r){let{logger:l=t?.parentClientConfig?.logger,profile:p=t?.parentClientConfig?.profile,region:h,requestHandler:m=t?.parentClientConfig?.requestHandler,credentialProviderLogger:y,userAgentAppId:b=t?.parentClientConfig?.userAgentAppId}=t,T=await bA(h,t?.parentClientConfig?.region,y,{logger:l,profile:p}),A=!RA(m);r=new e({...t,userAgentAppId:b,profile:p,credentialDefaultProvider:()=>async()=>n,region:T,requestHandler:A?m:void 0,logger:l})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new xs(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let c=wA(a),u={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return sn(u,"CREDENTIALS_STS_ASSUME_ROLE","i"),u}},xA=(t,e)=>{let r;return async n=>{if(!r){let{logger:c=t?.parentClientConfig?.logger,profile:u=t?.parentClientConfig?.profile,region:l,requestHandler:p=t?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:m=t?.parentClientConfig?.userAgentAppId}=t,y=await bA(l,t?.parentClientConfig?.region,h,{logger:c,profile:u}),b=!RA(p);r=new e({...t,userAgentAppId:m,profile:u,region:y,requestHandler:b?p:void 0,logger:c})}let{Credentials:s,AssumedRoleUser:o}=await r.send(new Rs(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=wA(o),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...i&&{accountId:i}};return i&&sn(a,"RESOLVED_ACCOUNT_ID","T"),sn(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},RA=t=>t?.metadata?.handlerProtocol==="h2"});var CA,AA,IA,PB,PA=w(()=>{TA();Sa();CA=(t,e)=>e?class extends t{constructor(n){super(n);for(let s of e)this.middlewareStack.use(s)}}:t,AA=(t={},e)=>vA(t,CA(fr,e)),IA=(t={},e)=>xA(t,CA(fr,e)),PB=t=>e=>t({roleAssumer:AA(e),roleAssumerWithWebIdentity:IA(e),...e})});var kg={};st(kg,{AssumeRoleCommand:()=>xs,AssumeRoleResponseFilterSensitiveLog:()=>ag,AssumeRoleWithWebIdentityCommand:()=>Rs,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>cg,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>ug,CredentialsFilterSensitiveLog:()=>ig,ExpiredTokenException:()=>_a,IDPCommunicationErrorException:()=>Ra,IDPRejectedClaimException:()=>va,InvalidIdentityTokenException:()=>xa,MalformedPolicyDocumentException:()=>Ea,PackedPolicyTooLargeException:()=>wa,RegionDisabledException:()=>ba,STS:()=>Ql,STSClient:()=>fr,STSServiceException:()=>yt,__Client:()=>sg.Client,decorateDefaultCredentialProvider:()=>PB,getDefaultRoleAssumer:()=>AA,getDefaultRoleAssumerWithWebIdentity:()=>IA});var Dg=w(()=>{Sa();yA();SA();_A();PA();Gl()});var Fg=v(OA=>{"use strict";var Lg=Nr(),Mg=ct(),OB=require("child_process"),NB=require("util"),kB=(Yt(),ue(on)),DB=(t,e,r)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let o=new Date;if(new Date(e.Expiration)<o)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let n=e.AccountId;!n&&r?.[t]?.aws_account_id&&(n=r[t].aws_account_id);let s={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...n&&{accountId:n}};return kB.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},MB=async(t,e,r)=>{let n=e[t];if(e[t]){let s=n.credential_process;if(s!==void 0){let o=NB.promisify(Lg.externalDataInterceptor?.getTokenRecord?.().exec??OB.exec);try{let{stdout:i}=await o(s),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return DB(t,a,e)}catch(i){throw new Mg.CredentialsProviderError(i.message,{logger:r})}}else throw new Mg.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new Mg.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},LB=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await Lg.parseKnownFiles(t);return MB(Lg.getProfileName({profile:t.profile??e?.profile}),r,t.logger)};OA.fromProcess=LB});var Ug=v(hr=>{"use strict";var FB=hr&&hr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),UB=hr&&hr.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),qB=hr&&hr.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),s=0;s<n.length;s++)n[s]!=="default"&&FB(r,e,n[s]);return UB(r,e),r}})();Object.defineProperty(hr,"__esModule",{value:!0});hr.fromWebToken=void 0;var $B=t=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:o,policyArns:i,policy:a,durationSeconds:c}=t,{roleAssumerWithWebIdentity:u}=t;if(!u){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>qB((Dg(),ue(kg))));u=l({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:{...e?.callerClientConfig,...t.parentClientConfig}},t.clientPlugins)}return u({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:c})};hr.fromWebToken=$B});var kA=v(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.fromTokenFile=void 0;var jB=(Yt(),ue(on)),BB=ct(),HB=Nr(),VB=require("fs"),zB=Ug(),NA="AWS_WEB_IDENTITY_TOKEN_FILE",GB="AWS_ROLE_ARN",WB="AWS_ROLE_SESSION_NAME",KB=(t={})=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=t?.webIdentityTokenFile??process.env[NA],n=t?.roleArn??process.env[GB],s=t?.roleSessionName??process.env[WB];if(!r||!n)throw new BB.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let o=await(0,zB.fromWebToken)({...t,webIdentityToken:HB.externalDataInterceptor?.getTokenRecord?.()[r]??(0,VB.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(e);return r===process.env[NA]&&(0,jB.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};Yl.fromTokenFile=KB});var qg=v(Ca=>{"use strict";var DA=kA(),MA=Ug();Object.keys(DA).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ca,t)&&Object.defineProperty(Ca,t,{enumerable:!0,get:function(){return DA[t]}})});Object.keys(MA).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ca,t)&&Object.defineProperty(Ca,t,{enumerable:!0,get:function(){return MA[t]}})})});var jA=v($A=>{"use strict";var jg=Nr(),Aa=ct(),kn=(Yt(),ue(on)),QB=(t,e,r)=>{let n={EcsContainer:async s=>{let{fromHttp:o}=await Promise.resolve().then(()=>x(Im())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>x(Bi()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Aa.chain(o(s??{}),i(s))().then($g)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>x(Bi()));return async()=>o(s)().then($g)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>x(wm()));return async()=>o(s)().then($g)}};if(t in n)return n[t];throw new Aa.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},$g=t=>kn.setCredentialFeature(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),YB=(t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(ZB(t,{profile:e,logger:r})||JB(t,{profile:e,logger:r})),ZB=(t,{profile:e,logger:r})=>{let n=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return n&&r?.debug?.(`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`),n},JB=(t,{profile:e,logger:r})=>{let n=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return n&&r?.debug?.(`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`),n},XB=async(t,e,r,n={},s)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=e[t],{source_profile:i,region:a}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:u}=await Promise.resolve().then(()=>(Dg(),kg));r.roleAssumer=u({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(i&&i in n)throw new Aa.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${jg.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${i?`source_profile=[${i}]`:`profile=[${t}]`}`);let c=i?s(i,e,r,{...n,[i]:!0},LA(e[i]??{})):(await QB(o.credential_source,t,r.logger)(r))();if(LA(o))return c.then(u=>kn.setCredentialFeature(u,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let u={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:l}=o;if(l){if(!r.mfaCodeProvider)throw new Aa.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});u.SerialNumber=l,u.TokenCode=await r.mfaCodeProvider(l)}let p=await c;return r.roleAssumer(p,u).then(h=>kn.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},LA=t=>!t.role_arn&&!!t.credential_source,eH=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",tH=async(t,e)=>Promise.resolve().then(()=>x(Fg())).then(({fromProcess:r})=>r({...t,profile:e})().then(n=>kn.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),rH=async(t,e,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>x(eg()));return n({profile:t,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(s=>e.sso_session?kn.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO","r"):kn.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},nH=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),FA=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,UA=async(t,e)=>{e?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return kn.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},sH=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,oH=async(t,e)=>Promise.resolve().then(()=>x(qg())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})().then(n=>kn.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),qA=async(t,e,r,n={},s=!1)=>{let o=e[t];if(Object.keys(n).length>0&&FA(o))return UA(o,r);if(s||YB(o,{profile:t,logger:r.logger}))return XB(t,e,r,n,qA);if(FA(o))return UA(o,r);if(sH(o))return oH(o,r);if(eH(o))return tH(r,t);if(nH(o))return await rH(t,o,r);throw new Aa.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},iH=(t={})=>async({callerClientConfig:e}={})=>{let r={...t,parentClientConfig:{...e,...t.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await jg.parseKnownFiles(r);return qA(jg.getProfileName({profile:t.profile??e?.profile}),n,r)};$A.fromIni=iH});var zA=v(Zl=>{"use strict";var Bg=wm(),Ia=ct(),aH=Nr(),BA="AWS_EC2_METADATA_DISABLED",cH=async t=>{let{ENV_CMDS_FULL_URI:e,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>x(Bi()));if(process.env[r]||process.env[e]){t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>x(Im()));return Ia.chain(o(t),n(t))}return process.env[BA]&&process.env[BA]!=="false"?async()=>{throw new Ia.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:(t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(t))};function uH(t,e){let r=lH(t),n,s,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),n)await n;else if(!o||e?.(o))if(o)s||(s=r(a).then(c=>{o=c,s=void 0}));else return n=r(a).then(c=>{o=c,n=void 0}),i(a);return o};return i}var lH=t=>async e=>{let r;for(let n of t)try{return await n(e)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},HA=!1,dH=(t={})=>uH([async()=>{if(t.profile??process.env[aH.ENV_PROFILE])throw process.env[Bg.ENV_KEY]&&process.env[Bg.ENV_SECRET]&&(HA||((t.logger?.warn&&t.logger?.constructor?.name!=="NoOpLogger"?t.logger.warn.bind(t.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),HA=!0)),new Ia.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Bg.fromEnv(t)()},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=t;if(!r&&!n&&!s&&!o&&!i)throw new Ia.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>x(eg()));return a(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>x(jA()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>x(Fg()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>x(qg()));return r(t)(e)},async()=>(t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await cH(t))()),async()=>{throw new Ia.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}],VA),fH=t=>t?.expiration!==void 0,VA=t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5;Zl.credentialsTreatedAsExpired=VA;Zl.credentialsWillNeedRefresh=fH;Zl.defaultProvider=dH});var uI=v(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.ruleSet=void 0;var iI="required",St="fn",_t="argv",Ts="ref",Dn="properties",Mn="headers",GA=!0,WA="isSet",Pa="booleanEquals",qo="error",mr="endpoint",jr="tree",Jl="PartitionResult",Hg="stringEquals",KA={[iI]:!1,type:"string"},QA={[iI]:!0,default:!1,type:"boolean"},YA={[Ts]:"Endpoint"},aI={[St]:Pa,[_t]:[{[Ts]:"UseFIPS"},!0]},cI={[St]:Pa,[_t]:[{[Ts]:"UseDualStack"},!0]},jt={},ZA={[St]:"getAttr",[_t]:[{[Ts]:Jl},"supportsFIPS"]},JA={[St]:Pa,[_t]:[!0,{[St]:"getAttr",[_t]:[{[Ts]:Jl},"supportsDualStack"]}]},Vg={[St]:"getAttr",[_t]:[{[Ts]:Jl},"name"]},XA={url:"https://secretsmanager-fips.{Region}.amazonaws.com",[Dn]:{},[Mn]:{}},eI={url:"https://secretsmanager.{Region}.amazonaws.com",[Dn]:{},[Mn]:{}},tI=[aI],rI=[cI],nI=[{[Ts]:"Region"}],sI=[{[St]:Hg,[_t]:["aws",Vg]}],oI=[{[St]:Hg,[_t]:["aws-us-gov",Vg]}],pH={version:"1.0",parameters:{Region:KA,UseDualStack:QA,UseFIPS:QA,Endpoint:KA},rules:[{conditions:[{[St]:WA,[_t]:[YA]}],rules:[{conditions:tI,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:qo},{conditions:rI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:qo},{endpoint:{url:YA,[Dn]:jt,[Mn]:jt},type:mr}],type:jr},{conditions:[{[St]:WA,[_t]:nI}],rules:[{conditions:[{[St]:"aws.partition",[_t]:nI,assign:Jl}],rules:[{conditions:[aI,cI],rules:[{conditions:[{[St]:Pa,[_t]:[GA,ZA]},JA],rules:[{conditions:sI,endpoint:XA,type:mr},{conditions:oI,endpoint:XA,type:mr},{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Dn]:jt,[Mn]:jt},type:mr}],type:jr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:qo}],type:jr},{conditions:tI,rules:[{conditions:[{[St]:Pa,[_t]:[ZA,GA]}],rules:[{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dnsSuffix}",[Dn]:jt,[Mn]:jt},type:mr}],type:jr},{error:"FIPS is enabled but this partition does not support FIPS",type:qo}],type:jr},{conditions:rI,rules:[{conditions:[JA],rules:[{conditions:sI,endpoint:eI,type:mr},{conditions:[{[St]:Hg,[_t]:["aws-cn",Vg]}],endpoint:{url:"https://secretsmanager.{Region}.amazonaws.com.cn",[Dn]:jt,[Mn]:jt},type:mr},{conditions:oI,endpoint:eI,type:mr},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dualStackDnsSuffix}",[Dn]:jt,[Mn]:jt},type:mr}],type:jr},{error:"DualStack is enabled but this partition does not support DualStack",type:qo}],type:jr},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dnsSuffix}",[Dn]:jt,[Mn]:jt},type:mr}],type:jr}],type:jr},{error:"Invalid Configuration: Missing Region",type:qo}]};Xl.ruleSet=pH});var lI=v(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.defaultEndpointResolver=void 0;var hH=Js(),zg=ps(),mH=uI(),gH=new zg.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),yH=(t,e={})=>gH.get(t,()=>(0,zg.resolveEndpoint)(mH.ruleSet,{endpointParams:t,logger:e.logger}));ed.defaultEndpointResolver=yH;zg.customEndpointFunctions.aws=hH.awsEndpointFunctions});var pI=v(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.getRuntimeConfig=void 0;var SH=(Ge(),ue(Or)),_H=(em(),ue(sx)),EH=se(),wH=nn(),dI=ze(),fI=Ve(),bH=Em(),vH=lI(),xH=t=>({apiVersion:"2017-10-17",base64Decoder:t?.base64Decoder??dI.fromBase64,base64Encoder:t?.base64Encoder??dI.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??vH.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??bH.defaultSecretsManagerHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new SH.AwsSdkSigV4Signer}],logger:t?.logger??new EH.NoOpLogger,protocol:t?.protocol??new _H.AwsJson1_1Protocol({defaultNamespace:"com.amazonaws.secretsmanager",serviceTarget:"secretsmanager",awsQueryCompatible:!1}),serviceId:t?.serviceId??"Secrets Manager",urlParser:t?.urlParser??wH.parseUrl,utf8Decoder:t?.utf8Decoder??fI.fromUtf8,utf8Encoder:t?.utf8Encoder??fI.toUtf8});td.getRuntimeConfig=xH});var SI=v(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.getRuntimeConfig=void 0;var RH=(bi(),ue(wi)),TH=RH.__importDefault(pR()),hI=(Ge(),ue(Or)),CH=zA(),mI=Vi(),rd=Dt(),AH=zi(),gI=Mr(),Cs=kr(),yI=ss(),IH=Gi(),PH=yo(),OH=pI(),NH=se(),kH=Ki(),DH=se(),MH=t=>{(0,DH.emitWarningIfUnsupportedVersion)(process.version);let e=(0,kH.resolveDefaultsModeConfig)(t),r=()=>e().then(NH.loadConfigsForDefaultMode),n=(0,OH.getRuntimeConfig)(t);(0,hI.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Cs.loadConfig)(hI.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??IH.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??CH.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,mI.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:TH.default.version}),maxAttempts:t?.maxAttempts??(0,Cs.loadConfig)(gI.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Cs.loadConfig)(rd.NODE_REGION_CONFIG_OPTIONS,{...rd.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:yI.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Cs.loadConfig)({...gI.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||PH.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??AH.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??yI.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Cs.loadConfig)(rd.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Cs.loadConfig)(rd.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Cs.loadConfig)(mI.NODE_APP_ID_CONFIG_OPTIONS,s)}};nd.getRuntimeConfig=MH});var hP=v(G=>{"use strict";var _I=oi(),LH=ii(),FH=ai(),EI=mo(),UH=Dt(),$o=(ht(),ue(Ys)),Et=(be(),ue(np)),qH=Mi(),Ee=En(),wI=Mr(),de=se(),bI=Em(),$H=SI(),vI=xo(),xI=Se(),jH=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"secretsmanager"}),Re={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},BH=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let o=e.findIndex(i=>i.schemeId===s.schemeId);o===-1?e.push(s):e.splice(o,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},HH=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),VH=(t,e)=>{let r=Object.assign(vI.getAwsRegionExtensionConfiguration(t),de.getDefaultExtensionConfiguration(t),xI.getHttpHandlerExtensionConfiguration(t),BH(t));return e.forEach(n=>n.configure(r)),Object.assign(t,vI.resolveAwsRegionExtensionConfiguration(r),de.resolveDefaultRuntimeConfig(r),xI.resolveHttpHandlerRuntimeConfig(r),HH(r))},As=class extends de.Client{config;constructor(...[e]){let r=$H.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=jH(r),s=EI.resolveUserAgentConfig(n),o=wI.resolveRetryConfig(s),i=UH.resolveRegionConfig(o),a=_I.resolveHostHeaderConfig(i),c=Ee.resolveEndpointConfig(a),u=bI.resolveHttpAuthSchemeConfig(c),l=VH(u,e?.extensions||[]);this.config=l,this.middlewareStack.use(Et.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(EI.getUserAgentPlugin(this.config)),this.middlewareStack.use(wI.getRetryPlugin(this.config)),this.middlewareStack.use(qH.getContentLengthPlugin(this.config)),this.middlewareStack.use(_I.getHostHeaderPlugin(this.config)),this.middlewareStack.use(LH.getLoggerPlugin(this.config)),this.middlewareStack.use(FH.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use($o.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:bI.defaultSecretsManagerHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new $o.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use($o.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},wt=class RI extends de.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,RI.prototype)}},zH={all:"all",description:"description",name:"name",owning_service:"owning-service",primary_region:"primary-region",tag_key:"tag-key",tag_value:"tag-value"},TI=class CI extends wt{name="DecryptionFailure";$fault="client";Message;constructor(e){super({name:"DecryptionFailure",$fault:"client",...e}),Object.setPrototypeOf(this,CI.prototype),this.Message=e.Message}},AI=class II extends wt{name="InternalServiceError";$fault="server";Message;constructor(e){super({name:"InternalServiceError",$fault:"server",...e}),Object.setPrototypeOf(this,II.prototype),this.Message=e.Message}},PI=class OI extends wt{name="InvalidNextTokenException";$fault="client";Message;constructor(e){super({name:"InvalidNextTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,OI.prototype),this.Message=e.Message}},NI=class kI extends wt{name="InvalidParameterException";$fault="client";Message;constructor(e){super({name:"InvalidParameterException",$fault:"client",...e}),Object.setPrototypeOf(this,kI.prototype),this.Message=e.Message}},DI=class MI extends wt{name="InvalidRequestException";$fault="client";Message;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,MI.prototype),this.Message=e.Message}},LI=class FI extends wt{name="ResourceNotFoundException";$fault="client";Message;constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,FI.prototype),this.Message=e.Message}},GH={Failed:"Failed",InProgress:"InProgress",InSync:"InSync"},UI=class qI extends wt{name="EncryptionFailure";$fault="client";Message;constructor(e){super({name:"EncryptionFailure",$fault:"client",...e}),Object.setPrototypeOf(this,qI.prototype),this.Message=e.Message}},$I=class jI extends wt{name="LimitExceededException";$fault="client";Message;constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,jI.prototype),this.Message=e.Message}},BI=class HI extends wt{name="MalformedPolicyDocumentException";$fault="client";Message;constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,HI.prototype),this.Message=e.Message}},VI=class zI extends wt{name="PreconditionNotMetException";$fault="client";Message;constructor(e){super({name:"PreconditionNotMetException",$fault:"client",...e}),Object.setPrototypeOf(this,zI.prototype),this.Message=e.Message}},GI=class WI extends wt{name="ResourceExistsException";$fault="client";Message;constructor(e){super({name:"ResourceExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,WI.prototype),this.Message=e.Message}},WH={asc:"asc",desc:"desc"},KI=class QI extends wt{name="PublicPolicyException";$fault="client";Message;constructor(e){super({name:"PublicPolicyException",$fault:"client",...e}),Object.setPrototypeOf(this,QI.prototype),this.Message=e.Message}},KH="AutomaticallyAfterDays",QH="APIErrorListType",YH="APIErrorType",Ue="ARN",YI="AddReplicaRegions",ZH="AddReplicaRegionListType",JH="BatchGetSecretValue",XH="BatchGetSecretValueRequest",e4="BatchGetSecretValueResponse",t4="BlockPublicPolicy",Da="CreatedDate",r4="CheckName",n4="CancelRotateSecret",s4="CancelRotateSecretRequest",o4="CancelRotateSecretResponse",Rd="ClientRequestToken",i4="CreateSecret",a4="CreateSecretRequest",c4="CreateSecretResponse",Td="Description",u4="DeletionDate",ZI="DeletedDate",l4="DecryptionFailure",d4="DeleteResourcePolicy",f4="DeleteResourcePolicyRequest",p4="DeleteResourcePolicyResponse",h4="DeleteSecret",m4="DeleteSecretRequest",g4="DeleteSecretResponse",y4="DescribeSecretRequest",S4="DescribeSecretResponse",_4="DescribeSecret",E4="Duration",w4="Errors",b4="ErrorCode",v4="ExcludeCharacters",x4="EncryptionFailure",R4="ExcludeLowercase",T4="ErrorMessage",C4="ExcludeNumbers",A4="ExcludePunctuation",I4="ExcludeUppercase",JI="Filters",P4="ForceDeleteWithoutRecovery",O4="FiltersListType",XI="ForceOverwriteReplicaSecret",N4="Filter",k4="GetRandomPassword",D4="GetRandomPasswordRequest",M4="GetRandomPasswordResponse",L4="GetResourcePolicyRequest",F4="GetResourcePolicyResponse",U4="GetResourcePolicy",q4="GetSecretValue",$4="GetSecretValueRequest",j4="GetSecretValueResponse",B4="IncludeDeprecated",H4="InvalidNextTokenException",V4="IncludePlannedDeletion",z4="InvalidParameterException",G4="InvalidRequestException",W4="IncludeSpace",K4="InternalServiceError",eP="Key",jo="KmsKeyId",Q4="KmsKeyIds",Cd="LastAccessedDate",tP="LastChangedDate",Y4="LimitExceededException",rP="LastRotatedDate",Z4="ListSecrets",J4="ListSecretsRequest",X4="ListSecretsResponse",eV="ListSecretVersionIds",tV="ListSecretVersionIdsRequest",rV="ListSecretVersionIdsResponse",At="Message",nV="MalformedPolicyDocumentException",Gg="MaxResults",sV="MoveToVersionId",Ye="Name",nP="NextRotationDate",Bo="NextToken",sP="OwningService",oV="PasswordLength",iV="PreconditionNotMetException",aV="PublicPolicyException",oP="PrimaryRegion",cV="PutResourcePolicy",uV="PutResourcePolicyRequest",lV="PutResourcePolicyResponse",dV="PutSecretValue",fV="PutSecretValueRequest",pV="PutSecretValueResponse",hV="PolicyValidationPassed",iP="Region",aP="RotationEnabled",mV="ResourceExistsException",gV="RequireEachIncludedType",yV="RemoveFromVersionId",SV="RotateImmediately",Wg="RotationLambdaARN",_V="ResourceNotFoundException",EV="RandomPassword",wV="RandomPasswordType",Kg="ResourcePolicy",Qg="RotationRules",bV="RemoveRegionsFromReplication",vV="RemoveRegionsFromReplicationRequest",xV="RemoveRegionsFromReplicationResponse",RV="RemoveReplicaRegions",TV="ReplicaRegionType",CV="RotationRulesType",Ad="ReplicationStatus",AV="ReplicationStatusListType",IV="RestoreSecretRequest",PV="RestoreSecretResponse",OV="RotateSecretRequest",NV="RotateSecretResponse",kV="ReplicationStatusType",DV="ReplicateSecretToRegions",MV="ReplicateSecretToRegionsRequest",LV="ReplicateSecretToRegionsResponse",FV="RestoreSecret",UV="RotateSecret",qV="RotationToken",$V="RotationTokenType",jV="RecoveryWindowInDays",BV="Status",Ma="SecretBinary",HV="SecretBinaryType",VV="ScheduleExpression",Me="SecretId",zV="SecretIdList",GV="SecretList",WV="SecretListEntry",KV="SecretListType",QV="StatusMessage",YV="SortOrder",ZV="StopReplicationToReplica",JV="StopReplicationToReplicaRequest",XV="StopReplicationToReplicaResponse",La="SecretString",ez="SecretStringType",tz="SecretValues",rz="SecretValueEntry",nz="SecretVersionsListEntry",sz="SecretVersionsListType",oz="SecretValuesType",iz="SecretVersionsToStages",cP="SecretVersionsToStagesMapType",Id="Tags",az="TagKeys",cz="TagListType",uz="TagResource",lz="TagResourceRequest",dz="Tag",fz="UntagResource",pz="UntagResourceRequest",hz="UpdateSecret",mz="UpdateSecretRequest",gz="UpdateSecretResponse",yz="UpdateSecretVersionStage",Sz="UpdateSecretVersionStageRequest",_z="UpdateSecretVersionStageResponse",Ez="Values",wz="ValidationErrors",bz="ValidationErrorsEntry",vz="ValidationErrorsType",Br="VersionId",xz="VersionIdsToStages",Rz="ValidateResourcePolicy",Tz="ValidateResourcePolicyRequest",Cz="ValidateResourcePolicyResponse",uP="VersionStage",Fa="VersionStages",Az="Value",Iz="Versions",Jt="client",Bt="error",Pz="server",lP="smithy.ts.sdk.synthetic.com.amazonaws.secretsmanager",I="com.amazonaws.secretsmanager",Oz=[0,I,wV,8,0],Nz=[0,I,$V,8,0],Ua=[0,I,HV,8,21],qa=[0,I,ez,8,0],kz=[3,I,YH,0,[Me,b4,At],[0,0,0]],Dz=[3,I,XH,0,[zV,JI,Gg,Bo],[64,()=>pP,1,0]],Mz=[3,I,e4,0,[tz,Bo,w4],[[()=>W3,0],0,()=>z3]],Lz=[3,I,s4,0,[Me],[0]],Fz=[3,I,o4,0,[Ue,Ye,Br],[0,0,0]],Uz=[3,I,a4,0,[Ye,Rd,Td,jo,Ma,La,Id,YI,XI],[0,[0,4],0,0,[()=>Ua,0],[()=>qa,0],()=>Od,()=>fP,2]],qz=[3,I,c4,0,[Ue,Ye,Br,Ad],[0,0,0,()=>Pd]],$z=[-3,I,l4,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError($z,TI);var jz=[3,I,f4,0,[Me],[0]],Bz=[3,I,p4,0,[Ue,Ye],[0,0]],Hz=[3,I,m4,0,[Me,jV,P4],[0,1,2]],Vz=[3,I,g4,0,[Ue,Ye,u4],[0,0,4]],zz=[3,I,y4,0,[Me],[0]],Gz=[3,I,S4,0,[Ue,Ye,Td,jo,aP,Wg,Qg,rP,tP,Cd,ZI,nP,Id,xz,sP,Da,oP,Ad],[0,0,0,0,2,0,()=>Yg,4,4,4,4,4,()=>Od,[2,I,cP,0,0,64],0,4,0,()=>Pd]],Wz=[-3,I,x4,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError(Wz,UI);var Kz=[3,I,N4,0,[eP,Ez],[0,64]],Qz=[3,I,D4,0,[oV,v4,C4,A4,I4,R4,W4,gV],[1,0,2,2,2,2,2,2]],Yz=[3,I,M4,0,[EV],[[()=>Oz,0]]],Zz=[3,I,L4,0,[Me],[0]],Jz=[3,I,F4,0,[Ue,Ye,Kg],[0,0,0]],Xz=[3,I,$4,0,[Me,Br,uP],[0,0,0]],e3=[3,I,j4,0,[Ue,Ye,Br,Ma,La,Fa,Da],[0,0,0,[()=>Ua,0],[()=>qa,0],64,4]],t3=[-3,I,K4,{[Bt]:Pz},[At],[0]];Et.TypeRegistry.for(I).registerError(t3,AI);var r3=[-3,I,H4,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError(r3,PI);var n3=[-3,I,z4,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError(n3,NI);var s3=[-3,I,G4,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError(s3,DI);var o3=[-3,I,Y4,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError(o3,$I);var i3=[3,I,J4,0,[V4,Gg,Bo,JI,YV],[2,1,0,()=>pP,0]],a3=[3,I,X4,0,[GV,Bo],[()=>G3,0]],c3=[3,I,tV,0,[Me,Gg,Bo,B4],[0,1,0,2]],u3=[3,I,rV,0,[Iz,Bo,Ue,Ye],[()=>K3,0,0,0]],l3=[-3,I,nV,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError(l3,BI);var d3=[-3,I,iV,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError(d3,VI);var f3=[-3,I,aV,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError(f3,KI);var p3=[3,I,uV,0,[Me,Kg,t4],[0,0,2]],h3=[3,I,lV,0,[Ue,Ye],[0,0]],m3=[3,I,fV,0,[Me,Rd,Ma,La,Fa,qV],[0,[0,4],[()=>Ua,0],[()=>qa,0],64,[()=>Nz,0]]],g3=[3,I,pV,0,[Ue,Ye,Br,Fa],[0,0,0,64]],y3=[3,I,vV,0,[Me,RV],[0,64]],S3=[3,I,xV,0,[Ue,Ad],[0,()=>Pd]],_3=[3,I,TV,0,[iP,jo],[0,0]],E3=[3,I,MV,0,[Me,YI,XI],[0,()=>fP,2]],w3=[3,I,LV,0,[Ue,Ad],[0,()=>Pd]],b3=[3,I,kV,0,[iP,jo,BV,QV,Cd],[0,0,0,0,4]],v3=[-3,I,mV,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError(v3,GI);var x3=[-3,I,_V,{[Bt]:Jt},[At],[0]];Et.TypeRegistry.for(I).registerError(x3,LI);var R3=[3,I,IV,0,[Me],[0]],T3=[3,I,PV,0,[Ue,Ye],[0,0]],C3=[3,I,OV,0,[Me,Rd,Wg,Qg,SV],[0,[0,4],0,()=>Yg,2]],A3=[3,I,NV,0,[Ue,Ye,Br],[0,0,0]],Yg=[3,I,CV,0,[KH,E4,VV],[1,0,0]],I3=[3,I,WV,0,[Ue,Ye,Td,jo,aP,Wg,Qg,rP,tP,Cd,ZI,nP,Id,iz,sP,Da,oP],[0,0,0,0,2,0,()=>Yg,4,4,4,4,4,()=>Od,[2,I,cP,0,0,64],0,4,0]],P3=[3,I,rz,0,[Ue,Ye,Br,Ma,La,Fa,Da],[0,0,0,[()=>Ua,0],[()=>qa,0],64,4]],O3=[3,I,nz,0,[Br,Fa,Cd,Da,Q4],[0,64,4,4,64]],N3=[3,I,JV,0,[Me],[0]],k3=[3,I,XV,0,[Ue],[0]],D3=[3,I,dz,0,[eP,Az],[0,0]],M3=[3,I,lz,0,[Me,Id],[0,()=>Od]],L3=[3,I,pz,0,[Me,az],[0,64]],F3=[3,I,mz,0,[Me,Rd,Td,jo,Ma,La],[0,[0,4],0,0,[()=>Ua,0],[()=>qa,0]]],U3=[3,I,gz,0,[Ue,Ye,Br],[0,0,0]],q3=[3,I,Sz,0,[Me,uP,yV,sV],[0,0,0,0]],$3=[3,I,_z,0,[Ue,Ye],[0,0]],j3=[3,I,Tz,0,[Me,Kg],[0,0]],B3=[3,I,Cz,0,[hV,wz],[2,()=>Q3]],H3=[3,I,bz,0,[r4,T4],[0,0]],dP="unit",V3=[-3,lP,"SecretsManagerServiceException",0,[],[]];Et.TypeRegistry.for(lP).registerError(V3,wt);var fP=[1,I,ZH,0,()=>_3],z3=[1,I,QH,0,()=>kz],pP=[1,I,O4,0,()=>Kz],Pd=[1,I,AV,0,()=>b3],G3=[1,I,KV,0,()=>I3],W3=[1,I,oz,0,[()=>P3,0]],K3=[1,I,sz,0,()=>O3],Od=[1,I,cz,0,()=>D3],Q3=[1,I,vz,0,()=>H3],Y3=[9,I,JH,0,()=>Dz,()=>Mz],Z3=[9,I,n4,0,()=>Lz,()=>Fz],J3=[9,I,i4,0,()=>Uz,()=>qz],X3=[9,I,d4,0,()=>jz,()=>Bz],e6=[9,I,h4,0,()=>Hz,()=>Vz],t6=[9,I,_4,0,()=>zz,()=>Gz],r6=[9,I,k4,0,()=>Qz,()=>Yz],n6=[9,I,U4,0,()=>Zz,()=>Jz],s6=[9,I,q4,0,()=>Xz,()=>e3],o6=[9,I,Z4,0,()=>i3,()=>a3],i6=[9,I,eV,0,()=>c3,()=>u3],a6=[9,I,cV,0,()=>p3,()=>h3],c6=[9,I,dV,0,()=>m3,()=>g3],u6=[9,I,bV,0,()=>y3,()=>S3],l6=[9,I,DV,0,()=>E3,()=>w3],d6=[9,I,FV,0,()=>R3,()=>T3],f6=[9,I,UV,0,()=>C3,()=>A3],p6=[9,I,ZV,0,()=>N3,()=>k3],h6=[9,I,uz,0,()=>M3,()=>dP],m6=[9,I,fz,0,()=>L3,()=>dP],g6=[9,I,hz,0,()=>F3,()=>U3],y6=[9,I,yz,0,()=>q3,()=>$3],S6=[9,I,Rz,0,()=>j3,()=>B3],Oa=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","BatchGetSecretValue",{}).n("SecretsManagerClient","BatchGetSecretValueCommand").sc(Y3).build(){},sd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","CancelRotateSecret",{}).n("SecretsManagerClient","CancelRotateSecretCommand").sc(Z3).build(){},od=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","CreateSecret",{}).n("SecretsManagerClient","CreateSecretCommand").sc(J3).build(){},id=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteResourcePolicy",{}).n("SecretsManagerClient","DeleteResourcePolicyCommand").sc(X3).build(){},ad=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteSecret",{}).n("SecretsManagerClient","DeleteSecretCommand").sc(e6).build(){},cd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","DescribeSecret",{}).n("SecretsManagerClient","DescribeSecretCommand").sc(t6).build(){},ud=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetRandomPassword",{}).n("SecretsManagerClient","GetRandomPasswordCommand").sc(r6).build(){},ld=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetResourcePolicy",{}).n("SecretsManagerClient","GetResourcePolicyCommand").sc(n6).build(){},dd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetSecretValue",{}).n("SecretsManagerClient","GetSecretValueCommand").sc(s6).build(){},Na=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecrets",{}).n("SecretsManagerClient","ListSecretsCommand").sc(o6).build(){},ka=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecretVersionIds",{}).n("SecretsManagerClient","ListSecretVersionIdsCommand").sc(i6).build(){},fd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","PutResourcePolicy",{}).n("SecretsManagerClient","PutResourcePolicyCommand").sc(a6).build(){},pd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","PutSecretValue",{}).n("SecretsManagerClient","PutSecretValueCommand").sc(c6).build(){},hd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","RemoveRegionsFromReplication",{}).n("SecretsManagerClient","RemoveRegionsFromReplicationCommand").sc(u6).build(){},md=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ReplicateSecretToRegions",{}).n("SecretsManagerClient","ReplicateSecretToRegionsCommand").sc(l6).build(){},gd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","RestoreSecret",{}).n("SecretsManagerClient","RestoreSecretCommand").sc(d6).build(){},yd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","RotateSecret",{}).n("SecretsManagerClient","RotateSecretCommand").sc(f6).build(){},Sd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","StopReplicationToReplica",{}).n("SecretsManagerClient","StopReplicationToReplicaCommand").sc(p6).build(){},_d=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","TagResource",{}).n("SecretsManagerClient","TagResourceCommand").sc(h6).build(){},Ed=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","UntagResource",{}).n("SecretsManagerClient","UntagResourceCommand").sc(m6).build(){},wd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecret",{}).n("SecretsManagerClient","UpdateSecretCommand").sc(g6).build(){},bd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecretVersionStage",{}).n("SecretsManagerClient","UpdateSecretVersionStageCommand").sc(y6).build(){},vd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ValidateResourcePolicy",{}).n("SecretsManagerClient","ValidateResourcePolicyCommand").sc(S6).build(){},_6={BatchGetSecretValueCommand:Oa,CancelRotateSecretCommand:sd,CreateSecretCommand:od,DeleteResourcePolicyCommand:id,DeleteSecretCommand:ad,DescribeSecretCommand:cd,GetRandomPasswordCommand:ud,GetResourcePolicyCommand:ld,GetSecretValueCommand:dd,ListSecretsCommand:Na,ListSecretVersionIdsCommand:ka,PutResourcePolicyCommand:fd,PutSecretValueCommand:pd,RemoveRegionsFromReplicationCommand:hd,ReplicateSecretToRegionsCommand:md,RestoreSecretCommand:gd,RotateSecretCommand:yd,StopReplicationToReplicaCommand:Sd,TagResourceCommand:_d,UntagResourceCommand:Ed,UpdateSecretCommand:wd,UpdateSecretVersionStageCommand:bd,ValidateResourcePolicyCommand:vd},xd=class extends As{};de.createAggregatedClient(_6,xd);var E6=$o.createPaginator(As,Oa,"NextToken","NextToken","MaxResults"),w6=$o.createPaginator(As,ka,"NextToken","NextToken","MaxResults"),b6=$o.createPaginator(As,Na,"NextToken","NextToken","MaxResults");Object.defineProperty(G,"$Command",{enumerable:!0,get:function(){return de.Command}});Object.defineProperty(G,"__Client",{enumerable:!0,get:function(){return de.Client}});G.BatchGetSecretValueCommand=Oa;G.CancelRotateSecretCommand=sd;G.CreateSecretCommand=od;G.DecryptionFailure=TI;G.DeleteResourcePolicyCommand=id;G.DeleteSecretCommand=ad;G.DescribeSecretCommand=cd;G.EncryptionFailure=UI;G.FilterNameStringType=zH;G.GetRandomPasswordCommand=ud;G.GetResourcePolicyCommand=ld;G.GetSecretValueCommand=dd;G.InternalServiceError=AI;G.InvalidNextTokenException=PI;G.InvalidParameterException=NI;G.InvalidRequestException=DI;G.LimitExceededException=$I;G.ListSecretVersionIdsCommand=ka;G.ListSecretsCommand=Na;G.MalformedPolicyDocumentException=BI;G.PreconditionNotMetException=VI;G.PublicPolicyException=KI;G.PutResourcePolicyCommand=fd;G.PutSecretValueCommand=pd;G.RemoveRegionsFromReplicationCommand=hd;G.ReplicateSecretToRegionsCommand=md;G.ResourceExistsException=GI;G.ResourceNotFoundException=LI;G.RestoreSecretCommand=gd;G.RotateSecretCommand=yd;G.SecretsManager=xd;G.SecretsManagerClient=As;G.SecretsManagerServiceException=wt;G.SortOrderType=WH;G.StatusType=GH;G.StopReplicationToReplicaCommand=Sd;G.TagResourceCommand=_d;G.UntagResourceCommand=Ed;G.UpdateSecretCommand=wd;G.UpdateSecretVersionStageCommand=bd;G.ValidateResourcePolicyCommand=vd;G.paginateBatchGetSecretValue=E6;G.paginateListSecretVersionIds=w6;G.paginateListSecrets=b6});var Jg=v(mP=>{"use strict";mP.parse=function(t,e){return new Zg(t,e).parse()};var Zg=class t{constructor(e,r){this.source=e,this.transform=r||v6,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&(r=this.recorded.join(""),r==="NULL"&&!e&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var r,n,s;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!s)this.dimension++,this.dimension>1&&(n=new t(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!s){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else r.value==='"'&&!r.escaped?(s&&this.newEntry(!0),s=!s):r.value===","&&!s?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function v6(t){return t}});var Xg=v((kte,gP)=>{var x6=Jg();gP.exports={create:function(t,e){return{parse:function(){return x6.parse(t,e)}}}}});var _P=v((Dte,SP)=>{"use strict";var R6=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,T6=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,C6=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,A6=/^-?infinity$/;SP.exports=function(e){if(A6.test(e))return Number(e.replace("i","I"));var r=R6.exec(e);if(!r)return I6(e)||null;var n=!!r[8],s=parseInt(r[1],10);n&&(s=yP(s));var o=parseInt(r[2],10)-1,i=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),u=parseInt(r[6],10),l=r[7];l=l?1e3*parseFloat(l):0;var p,h=P6(e);return h!=null?(p=new Date(Date.UTC(s,o,i,a,c,u,l)),ey(s)&&p.setUTCFullYear(s),h!==0&&p.setTime(p.getTime()-h)):(p=new Date(s,o,i,a,c,u,l),ey(s)&&p.setFullYear(s)),p};function I6(t){var e=T6.exec(t);if(e){var r=parseInt(e[1],10),n=!!e[4];n&&(r=yP(r));var s=parseInt(e[2],10)-1,o=e[3],i=new Date(r,s,o);return ey(r)&&i.setFullYear(r),i}}function P6(t){if(t.endsWith("+00"))return 0;var e=C6.exec(t.split(" ")[1]);if(e){var r=e[1];if(r==="Z")return 0;var n=r==="-"?-1:1,s=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return s*n*1e3}}function yP(t){return-(t-1)}function ey(t){return t>=0&&t<100}});var wP=v((Mte,EP)=>{EP.exports=N6;var O6=Object.prototype.hasOwnProperty;function N6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)O6.call(r,n)&&(t[n]=r[n])}return t}});var xP=v((Lte,vP)=>{"use strict";var k6=wP();vP.exports=Ho;function Ho(t){if(!(this instanceof Ho))return new Ho(t);k6(this,z6(t))}var D6=["seconds","minutes","hours","days","months","years"];Ho.prototype.toPostgres=function(){var t=D6.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var r=this[e]||0;return e==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var M6={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},L6=["years","months","days"],F6=["hours","minutes","seconds"];Ho.prototype.toISOString=Ho.prototype.toISO=function(){var t=L6.map(r,this).join(""),e=F6.map(r,this).join("");return"P"+t+"T"+e;function r(n){var s=this[n]||0;return n==="seconds"&&this.milliseconds&&(s=(s+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),s+M6[n]}};var ty="([+-]?\\d+)",U6=ty+"\\s+years?",q6=ty+"\\s+mons?",$6=ty+"\\s+days?",j6="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",B6=new RegExp([U6,q6,$6,j6].map(function(t){return"("+t+")?"}).join("\\s*")),bP={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},H6=["hours","minutes","seconds","milliseconds"];function V6(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function z6(t){if(!t)return{};var e=B6.exec(t),r=e[8]==="-";return Object.keys(bP).reduce(function(n,s){var o=bP[s],i=e[o];return!i||(i=s==="milliseconds"?V6(i):parseInt(i,10),!i)||(r&&~H6.indexOf(s)&&(i*=-1),n[s]=i),n},{})}});var TP=v((Fte,RP)=>{"use strict";RP.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var r="",n=0;n<e.length;)if(e[n]!=="\\")r+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))r+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var s=1;n+s<e.length&&e[n+s]==="\\";)s++;for(var o=0;o<Math.floor(s/2);++o)r+="\\";n+=Math.floor(s/2)*2}return new Buffer(r,"binary")}});var kP=v((Ute,NP)=>{var $a=Jg(),ja=Xg(),Nd=_P(),AP=xP(),IP=TP();function kd(t){return function(r){return r===null?r:t(r)}}function PP(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function G6(t){return t?$a.parse(t,PP):null}function W6(t){return parseInt(t,10)}function ry(t){return t?$a.parse(t,kd(W6)):null}function K6(t){return t?$a.parse(t,kd(function(e){return OP(e).trim()})):null}var Q6=function(t){if(!t)return null;var e=ja.create(t,function(r){return r!==null&&(r=iy(r)),r});return e.parse()},ny=function(t){if(!t)return null;var e=ja.create(t,function(r){return r!==null&&(r=parseFloat(r)),r});return e.parse()},Ht=function(t){if(!t)return null;var e=ja.create(t);return e.parse()},sy=function(t){if(!t)return null;var e=ja.create(t,function(r){return r!==null&&(r=Nd(r)),r});return e.parse()},Y6=function(t){if(!t)return null;var e=ja.create(t,function(r){return r!==null&&(r=AP(r)),r});return e.parse()},Z6=function(t){return t?$a.parse(t,kd(IP)):null},oy=function(t){return parseInt(t,10)},OP=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},CP=function(t){return t?$a.parse(t,kd(JSON.parse)):null},iy=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},J6=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",r="",n=!1,s=2;s<t.length-1;s++){if(n||(e+=t[s]),t[s]===")"){n=!0;continue}else if(!n)continue;t[s]!==","&&(r+=t[s])}var o=iy(e);return o.radius=parseFloat(r),o},X6=function(t){t(20,OP),t(21,oy),t(23,oy),t(26,oy),t(700,parseFloat),t(701,parseFloat),t(16,PP),t(1082,Nd),t(1114,Nd),t(1184,Nd),t(600,iy),t(651,Ht),t(718,J6),t(1e3,G6),t(1001,Z6),t(1005,ry),t(1007,ry),t(1028,ry),t(1016,K6),t(1017,Q6),t(1021,ny),t(1022,ny),t(1231,ny),t(1014,Ht),t(1015,Ht),t(1008,Ht),t(1009,Ht),t(1040,Ht),t(1041,Ht),t(1115,sy),t(1182,sy),t(1185,sy),t(1186,AP),t(1187,Y6),t(17,IP),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,CP),t(3807,CP),t(3907,Ht),t(2951,Ht),t(791,Ht),t(1183,Ht),t(1270,Ht)};NP.exports={init:X6}});var MP=v((qte,DP)=>{"use strict";var bt=1e6;function eG(t){var e=t.readInt32BE(0),r=t.readUInt32BE(4),n="";e<0&&(e=~e+(r===0),r=~r+1>>>0,n="-");var s="",o,i,a,c,u,l;{if(o=e%bt,e=e/bt>>>0,i=4294967296*o+r,r=i/bt>>>0,a=""+(i-bt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(o=e%bt,e=e/bt>>>0,i=4294967296*o+r,r=i/bt>>>0,a=""+(i-bt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(o=e%bt,e=e/bt>>>0,i=4294967296*o+r,r=i/bt>>>0,a=""+(i-bt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}return o=e%bt,i=4294967296*o+r,a=""+i%bt,n+a+s}DP.exports=eG});var $P=v(($te,qP)=>{var tG=MP(),Te=function(t,e,r,n,s){r=r||0,n=n||!1,s=s||function(m,y,b){return m*Math.pow(2,b)+y};var o=r>>3,i=function(m){return n?~m&255:m},a=255,c=8-r%8;e<c&&(a=255<<8-e&255,c=e),r&&(a=a>>r%8);var u=0;r%8+e>=8&&(u=s(0,i(t[o])&a,c));for(var l=e+r>>3,p=o+1;p<l;p++)u=s(u,i(t[p]),8);var h=(e+r)%8;return h>0&&(u=s(u,i(t[l])>>8-h,h)),u},UP=function(t,e,r){var n=Math.pow(2,r-1)-1,s=Te(t,1),o=Te(t,r,1);if(o===0)return 0;var i=1,a=function(u,l,p){u===0&&(u=1);for(var h=1;h<=p;h++)i/=2,(l&1<<p-h)>0&&(u+=i);return u},c=Te(t,e,r+1,!1,a);return o==Math.pow(2,r+1)-1?c===0?s===0?1/0:-1/0:NaN:(s===0?1:-1)*Math.pow(2,o-n)*c},rG=function(t){return Te(t,1)==1?-1*(Te(t,15,1,!0)+1):Te(t,15,1)},LP=function(t){return Te(t,1)==1?-1*(Te(t,31,1,!0)+1):Te(t,31,1)},nG=function(t){return UP(t,23,8)},sG=function(t){return UP(t,52,11)},oG=function(t){var e=Te(t,16,32);if(e==49152)return NaN;for(var r=Math.pow(1e4,Te(t,16,16)),n=0,s=[],o=Te(t,16),i=0;i<o;i++)n+=Te(t,16,64+16*i)*r,r/=1e4;var a=Math.pow(10,Te(t,16,48));return(e===0?1:-1)*Math.round(n*a)/a},FP=function(t,e){var r=Te(e,1),n=Te(e,63,1),s=new Date((r===0?1:-1)*n/1e3+9466848e5);return t||s.setTime(s.getTime()+s.getTimezoneOffset()*6e4),s.usec=n%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(o){this.usec=o},s.getUTCMicroSeconds=function(){return this.usec},s},Ba=function(t){for(var e=Te(t,32),r=Te(t,32,32),n=Te(t,32,64),s=96,o=[],i=0;i<e;i++)o[i]=Te(t,32,s),s+=32,s+=32;var a=function(u){var l=Te(t,32,s);if(s+=32,l==4294967295)return null;var p;if(u==23||u==20)return p=Te(t,l*8,s),s+=l*8,p;if(u==25)return p=t.toString(this.encoding,s>>3,(s+=l<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var p=[],h;if(u.length>1){var m=u.shift();for(h=0;h<m;h++)p[h]=c(u,l);u.unshift(m)}else for(h=0;h<u[0];h++)p[h]=a(l);return p};return c(o,n)},iG=function(t){return t.toString("utf8")},aG=function(t){return t===null?null:Te(t,8)>0},cG=function(t){t(20,tG),t(21,rG),t(23,LP),t(26,LP),t(1700,oG),t(700,nG),t(701,sG),t(16,aG),t(1114,FP.bind(null,!1)),t(1184,FP.bind(null,!0)),t(1e3,Ba),t(1007,Ba),t(1016,Ba),t(1008,Ba),t(1009,Ba),t(25,iG)};qP.exports={init:cG}});var BP=v((jte,jP)=>{jP.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var za=v(Va=>{var uG=kP(),lG=$P(),dG=Xg(),fG=BP();Va.getTypeParser=pG;Va.setTypeParser=hG;Va.arrayParser=dG;Va.builtins=fG;var Ha={text:{},binary:{}};function HP(t){return String(t)}function pG(t,e){return e=e||"text",Ha[e]&&Ha[e][t]||HP}function hG(t,e,r){typeof e=="function"&&(r=e,e="text"),Ha[e][t]=r}uG.init(function(t,e){Ha.text[t]=e});lG.init(function(t,e){Ha.binary[t]=e})});var Ga=v((Hte,ay)=>{"use strict";ay.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Vo=za(),mG=Vo.getTypeParser(20,"text"),gG=Vo.getTypeParser(1016,"text");ay.exports.__defineSetter__("parseInt8",function(t){Vo.setTypeParser(20,"text",t?Vo.getTypeParser(23,"text"):mG),Vo.setTypeParser(1016,"text",t?Vo.getTypeParser(1007,"text"):gG)})});var zo=v((Vte,GP)=>{"use strict";var yG=Ga(),VP=require("util"),{isDate:SG}=VP.types||VP;function _G(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function zP(t){let e="{";for(let r=0;r<t.length;r++)if(r>0&&(e=e+","),t[r]===null||typeof t[r]>"u")e=e+"NULL";else if(Array.isArray(t[r]))e=e+zP(t[r]);else if(ArrayBuffer.isView(t[r])){let n=t[r];if(!(n instanceof Buffer)){let s=Buffer.from(n.buffer,n.byteOffset,n.byteLength);s.length===n.byteLength?n=s:n=s.slice(n.byteOffset,n.byteOffset+n.byteLength)}e+="\\\\x"+n.toString("hex")}else e+=_G(Dd(t[r]));return e=e+"}",e}var Dd=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return r.length===t.byteLength?r:r.slice(t.byteOffset,t.byteOffset+t.byteLength)}return SG(t)?yG.parseInputDatesAsUTC?bG(t):wG(t):Array.isArray(t)?zP(t):EG(t,e)}return t.toString()};function EG(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Dd(t.toPostgres(Dd),e)}return JSON.stringify(t)}function wG(t){let e=-t.getTimezoneOffset(),r=t.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);let s=String(r).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(s+="-",e*=-1):s+="+",s+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),n&&(s+=" BC"),s}function bG(t){let e=t.getUTCFullYear(),r=e<1;r&&(e=Math.abs(e)+1);let n=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return n+="+00:00",r&&(n+=" BC"),n}function vG(t,e,r){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),r&&(t.callback=r),t}var xG=function(t){return'"'+t.replace(/"/g,'""')+'"'},RG=function(t){let e=!1,r="'";if(t==null||typeof t!="string")return"''";for(let n=0;n<t.length;n++){let s=t[n];s==="'"?r+=s+s:s==="\\"?(r+=s+s,e=!0):r+=s}return r+="'",e===!0&&(r=" E"+r),r};GP.exports={prepareValue:function(e){return Dd(e)},normalizeQueryConfig:vG,escapeIdentifier:xG,escapeLiteral:RG}});var KP=v((zte,WP)=>{"use strict";var Go=require("crypto");function cy(t){return Go.createHash("md5").update(t,"utf-8").digest("hex")}function TG(t,e,r){let n=cy(e+t);return"md5"+cy(Buffer.concat([Buffer.from(n),r]))}function CG(t){return Go.createHash("sha256").update(t).digest()}function AG(t,e){return t=t.replace(/(\D)-/,"$1"),Go.createHash(t).update(e).digest()}function IG(t,e){return Go.createHmac("sha256",t).update(e).digest()}async function PG(t,e,r){return Go.pbkdf2Sync(t,e,r,32,"sha256")}WP.exports={postgresMd5PasswordHash:TG,randomBytes:Go.randomBytes,deriveKey:PG,sha256:CG,hashByName:AG,hmacSha256:IG,md5:cy}});var JP=v((Gte,ZP)=>{var QP=require("crypto");ZP.exports={postgresMd5PasswordHash:NG,randomBytes:OG,deriveKey:LG,sha256:kG,hashByName:DG,hmacSha256:MG,md5:uy};var YP=QP.webcrypto||globalThis.crypto,Is=YP.subtle,ly=new TextEncoder;function OG(t){return YP.getRandomValues(Buffer.alloc(t))}async function uy(t){try{return QP.createHash("md5").update(t,"utf-8").digest("hex")}catch{let r=typeof t=="string"?ly.encode(t):t,n=await Is.digest("MD5",r);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}}async function NG(t,e,r){let n=await uy(e+t);return"md5"+await uy(Buffer.concat([Buffer.from(n),r]))}async function kG(t){return await Is.digest("SHA-256",t)}async function DG(t,e){return await Is.digest(t,e)}async function MG(t,e){let r=await Is.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Is.sign("HMAC",r,ly.encode(e))}async function LG(t,e,r){let n=await Is.importKey("raw",ly.encode(t),"PBKDF2",!1,["deriveBits"]),s={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:r};return await Is.deriveBits(s,n,256,["deriveBits"])}});var fy=v((Wte,dy)=>{"use strict";var FG=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;FG?dy.exports=KP():dy.exports=JP()});var tO=v((Kte,eO)=>{function Ps(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function py(t,e){let r=t[e++];if(r<128)return{length:r,index:e};let n=r&127;if(n>4)throw Ps("bad length",t);r=0;for(let s=0;s<n;s++)r=r<<8|t[e++];return{length:r,index:e}}function XP(t,e){if(t[e++]!==6)throw Ps("non-OID data",t);let{length:r,index:n}=py(t,e);e=n;let s=e+r,o=t[e++],i=(o/40>>0)+"."+o%40;for(;e<s;){let a=0;for(;e<s;){let c=t[e++];if(a=a<<7|c&127,c<128)break}i+="."+a}return{oid:i,index:e}}function Wa(t,e){if(t[e++]!==48)throw Ps("non-sequence data",t);return py(t,e)}function UG(t,e){e===void 0&&(e=0),e=Wa(t,e).index;let{length:r,index:n}=Wa(t,e);e=n+r,e=Wa(t,e).index;let{oid:s,index:o}=XP(t,e);switch(s){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=o,e=Wa(t,e).index,t[e++]!==160)throw Ps("non-tag data",t);e=py(t,e).index,e=Wa(t,e).index;let{oid:i}=XP(t,e);switch(i){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Ps("unknown hash OID "+i,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Ps("Ed448 certificate channel binding is not currently supported by Postgres")}throw Ps("unknown OID "+s,t)}eO.exports={signatureAlgorithmHashFromCertificate:UG}});var oO=v((Qte,sO)=>{"use strict";var Ln=fy(),{signatureAlgorithmHashFromCertificate:qG}=tO();function $G(t,e){let r=["SCRAM-SHA-256"];e&&r.unshift("SCRAM-SHA-256-PLUS");let n=r.find(i=>t.includes(i));if(!n)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(n==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let s=Ln.randomBytes(18).toString("base64");return{mechanism:n,clientNonce:s,response:(n==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+s,message:"SASLInitialResponse"}}async function jG(t,e,r,n){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let s=VG(r);if(s.nonce.startsWith(t.clientNonce)){if(s.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let o="n=*,r="+t.clientNonce,i="r="+s.nonce+",s="+s.salt+",i="+s.iteration,a=n?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let N=n.getPeerCertificate().raw,q=qG(N);(q==="MD5"||q==="SHA-1")&&(q="SHA-256");let V=await Ln.hashByName(q,N);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(V)]).toString("base64")}let c="c="+a+",r="+s.nonce,u=o+","+i+","+c,l=Buffer.from(s.salt,"base64"),p=await Ln.deriveKey(e,l,s.iteration),h=await Ln.hmacSha256(p,"Client Key"),m=await Ln.sha256(h),y=await Ln.hmacSha256(m,u),b=GG(Buffer.from(h),Buffer.from(y)).toString("base64"),T=await Ln.hmacSha256(p,"Server Key"),A=await Ln.hmacSha256(T,u);t.message="SASLResponse",t.serverSignature=Buffer.from(A).toString("base64"),t.response=c+",p="+b}function BG(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=zG(e);if(r!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function HG(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,r)=>t.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function rO(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function nO(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let r=e[0],n=e.substring(2);return[r,n]}))}function VG(t){let e=nO(t),r=e.get("r");if(r){if(!HG(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=e.get("s");if(n){if(!rO(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let s=e.get("i");if(s){if(!/^[1-9][0-9]*$/.test(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let o=parseInt(s,10);return{nonce:r,salt:n,iteration:o}}function zG(t){let r=nO(t).get("v");if(r){if(!rO(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function GG(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((r,n)=>t[n]^e[n]))}sO.exports={startSession:$G,continueSession:jG,finalizeSession:BG}});var Ld=v((Yte,iO)=>{"use strict";var WG=za();function Md(t){this._types=t||WG,this.text={},this.binary={}}Md.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};Md.prototype.setTypeParser=function(t,e,r){typeof e=="function"&&(r=e,e="text"),this.getOverrides(e)[t]=r};Md.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};iO.exports=Md});var uO=v((Zte,cO)=>{"use strict";function Wo(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let r={},n,s=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{n=new URL(t,"postgres://base")}catch{n=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),s=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of n.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(n.username),r.password=r.password||decodeURIComponent(n.password),n.protocol=="socket:")return r.host=decodeURI(n.pathname),r.database=n.searchParams.get("db"),r.client_encoding=n.searchParams.get("encoding"),r;let o=s?"":n.hostname;r.host?o&&/^%2f/i.test(o)&&(n.pathname=o+n.pathname):r.host=decodeURIComponent(o),r.port||(r.port=n.port);let i=n.pathname.slice(1)||null;r.database=i?decodeURI(i):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),e.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||e.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function KG(t){return Object.entries(t).reduce((r,[n,s])=>(s!=null&&(r[n]=s),r),{})}function aO(t){return Object.entries(t).reduce((r,[n,s])=>{if(n==="ssl"){let o=s;typeof o=="boolean"&&(r[n]=o),typeof o=="object"&&(r[n]=KG(o))}else if(s!=null)if(n==="port"){if(s!==""){let o=parseInt(s,10);if(isNaN(o))throw new Error(`Invalid ${n}: ${s}`);r[n]=o}}else r[n]=s;return r},{})}function QG(t){return aO(Wo(t))}cO.exports=Wo;Wo.parse=Wo;Wo.toClientConfig=aO;Wo.parseIntoClientConfig=QG});var my=v((Jte,fO)=>{"use strict";var YG=require("dns"),dO=Ga(),lO=uO().parse,ut=function(t,e,r){return r===void 0?r=process.env["PG"+t.toUpperCase()]:r===!1||(r=process.env[r]),e[t]||r||dO[t]},ZG=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return dO.ssl},Ko=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},Vt=function(t,e,r){let n=e[r];n!=null&&t.push(r+"="+Ko(n))},hy=class{constructor(e){e=typeof e=="string"?lO(e):e||{},e.connectionString&&(e=Object.assign({},e,lO(e.connectionString))),this.user=ut("user",e),this.database=ut("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(ut("port",e),10),this.host=ut("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:ut("password",e)}),this.binary=ut("binary",e),this.options=ut("options",e),this.ssl=typeof e.ssl>"u"?ZG():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=ut("client_encoding",e),this.replication=ut("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=ut("application_name",e,"PGAPPNAME"),this.fallback_application_name=ut("fallback_application_name",e,!1),this.statement_timeout=ut("statement_timeout",e,!1),this.lock_timeout=ut("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=ut("idle_in_transaction_session_timeout",e,!1),this.query_timeout=ut("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let r=[];Vt(r,this,"user"),Vt(r,this,"password"),Vt(r,this,"port"),Vt(r,this,"application_name"),Vt(r,this,"fallback_application_name"),Vt(r,this,"connect_timeout"),Vt(r,this,"options");let n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(Vt(r,n,"sslmode"),Vt(r,n,"sslca"),Vt(r,n,"sslkey"),Vt(r,n,"sslcert"),Vt(r,n,"sslrootcert"),this.database&&r.push("dbname="+Ko(this.database)),this.replication&&r.push("replication="+Ko(this.replication)),this.host&&r.push("host="+Ko(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+Ko(this.client_encoding)),YG.lookup(this.host,function(s,o){return s?e(s,null):(r.push("hostaddr="+Ko(o)),e(null,r.join(" ")))})}};fO.exports=hy});var yy=v((Xte,hO)=>{"use strict";var JG=za(),pO=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,gy=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let r;e.text?r=pO.exec(e.text):r=pO.exec(e.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){let r=new Array(e.length);for(let n=0,s=e.length;n<s;n++){let o=e[n];o!==null?r[n]=this._parsers[n](o):r[n]=null}return r}parseRow(e){let r={...this._prebuiltEmptyResultObject};for(let n=0,s=e.length;n<s;n++){let o=e[n],i=this.fields[n].name;if(o!==null){let a=this.fields[n].format==="binary"?Buffer.from(o):o;r[i]=this._parsers[n](a)}else r[i]=null}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let r={};for(let n=0;n<e.length;n++){let s=e[n];r[s.name]=null,this._types?this._parsers[n]=this._types.getTypeParser(s.dataTypeID,s.format||"text"):this._parsers[n]=JG.getTypeParser(s.dataTypeID,s.format||"text")}this._prebuiltEmptyResultObject={...r}}};hO.exports=gy});var SO=v((ere,yO)=>{"use strict";var{EventEmitter:XG}=require("events"),mO=yy(),gO=zo(),Sy=class extends XG{constructor(e,r,n){super(),e=gO.normalizeQueryConfig(e,r,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new mO(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new mO(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:gO.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};yO.exports=Sy});var ky=v(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.NoticeMessage=K.DataRowMessage=K.CommandCompleteMessage=K.ReadyForQueryMessage=K.NotificationResponseMessage=K.BackendKeyDataMessage=K.AuthenticationMD5Password=K.ParameterStatusMessage=K.ParameterDescriptionMessage=K.RowDescriptionMessage=K.Field=K.CopyResponse=K.CopyDataMessage=K.DatabaseError=K.copyDone=K.emptyQuery=K.replicationStart=K.portalSuspended=K.noData=K.closeComplete=K.bindComplete=K.parseComplete=void 0;K.parseComplete={name:"parseComplete",length:5};K.bindComplete={name:"bindComplete",length:5};K.closeComplete={name:"closeComplete",length:5};K.noData={name:"noData",length:5};K.portalSuspended={name:"portalSuspended",length:5};K.replicationStart={name:"replicationStart",length:4};K.emptyQuery={name:"emptyQuery",length:4};K.copyDone={name:"copyDone",length:4};var _y=class extends Error{constructor(e,r,n){super(e),this.length=r,this.name=n}};K.DatabaseError=_y;var Ey=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};K.CopyDataMessage=Ey;var wy=class{constructor(e,r,n,s){this.length=e,this.name=r,this.binary=n,this.columnTypes=new Array(s)}};K.CopyResponse=wy;var by=class{constructor(e,r,n,s,o,i,a){this.name=e,this.tableID=r,this.columnID=n,this.dataTypeID=s,this.dataTypeSize=o,this.dataTypeModifier=i,this.format=a}};K.Field=by;var vy=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};K.RowDescriptionMessage=vy;var xy=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};K.ParameterDescriptionMessage=xy;var Ry=class{constructor(e,r,n){this.length=e,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};K.ParameterStatusMessage=Ry;var Ty=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};K.AuthenticationMD5Password=Ty;var Cy=class{constructor(e,r,n){this.length=e,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};K.BackendKeyDataMessage=Cy;var Ay=class{constructor(e,r,n,s){this.length=e,this.processId=r,this.channel=n,this.payload=s,this.name="notification"}};K.NotificationResponseMessage=Ay;var Iy=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};K.ReadyForQueryMessage=Iy;var Py=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};K.CommandCompleteMessage=Py;var Oy=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};K.DataRowMessage=Oy;var Ny=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};K.NoticeMessage=Ny});var _O=v(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.Writer=void 0;var Dy=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let n=this.buffer,s=n.length+(n.length>>1)+e;this.buffer=Buffer.allocUnsafe(s),n.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let r=Buffer.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(e=""){let r=Buffer.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Fd.Writer=Dy});var wO=v(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.serialize=void 0;var My=_O(),we=new My.Writer,eW=t=>{we.addInt16(3).addInt16(0);for(let n of Object.keys(t))we.addCString(n).addCString(t[n]);we.addCString("client_encoding").addCString("UTF8");let e=we.addCString("").flush(),r=e.length+4;return new My.Writer().addInt32(r).add(e).flush()},tW=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},rW=t=>we.addCString(t).flush(112),nW=function(t,e){return we.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),we.flush(112)},sW=function(t){return we.addString(t).flush(112)},oW=t=>we.addCString(t).flush(81),EO=[],iW=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let r=t.types||EO,n=r.length,s=we.addCString(e).addCString(t.text).addInt16(n);for(let o=0;o<n;o++)s.addInt32(r[o]);return we.flush(80)},Qo=new My.Writer,aW=function(t,e){for(let r=0;r<t.length;r++){let n=e?e(t[r],r):t[r];n==null?(we.addInt16(0),Qo.addInt32(-1)):n instanceof Buffer?(we.addInt16(1),Qo.addInt32(n.length),Qo.add(n)):(we.addInt16(0),Qo.addInt32(Buffer.byteLength(n)),Qo.addString(n))}},cW=(t={})=>{let e=t.portal||"",r=t.statement||"",n=t.binary||!1,s=t.values||EO,o=s.length;return we.addCString(e).addCString(r),we.addInt16(o),aW(s,t.valueMapper),we.addInt16(o),we.add(Qo.flush()),we.addInt16(1),we.addInt16(n?1:0),we.flush(66)},uW=Buffer.from([69,0,0,0,9,0,0,0,0,0]),lW=t=>{if(!t||!t.portal&&!t.rows)return uW;let e=t.portal||"",r=t.rows||0,n=Buffer.byteLength(e),s=4+n+1+4,o=Buffer.allocUnsafe(1+s);return o[0]=69,o.writeInt32BE(s,1),o.write(e,5,"utf-8"),o[n+5]=0,o.writeUInt32BE(r,o.length-4),o},dW=(t,e)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(t,8),r.writeInt32BE(e,12),r},Ly=(t,e)=>{let n=4+Buffer.byteLength(e)+1,s=Buffer.allocUnsafe(1+n);return s[0]=t,s.writeInt32BE(n,1),s.write(e,5,"utf-8"),s[n]=0,s},fW=we.addCString("P").flush(68),pW=we.addCString("S").flush(68),hW=t=>t.name?Ly(68,`${t.type}${t.name||""}`):t.type==="P"?fW:pW,mW=t=>{let e=`${t.type}${t.name||""}`;return Ly(67,e)},gW=t=>we.add(t).flush(100),yW=t=>Ly(102,t),Ud=t=>Buffer.from([t,0,0,0,4]),SW=Ud(72),_W=Ud(83),EW=Ud(88),wW=Ud(99),bW={startup:eW,password:rW,requestSsl:tW,sendSASLInitialResponseMessage:nW,sendSCRAMClientFinalMessage:sW,query:oW,parse:iW,bind:cW,execute:lW,describe:hW,close:mW,flush:()=>SW,sync:()=>_W,end:()=>EW,copyData:gW,copyDone:()=>wW,copyFail:yW,cancel:dW};qd.serialize=bW});var bO=v($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.BufferReader=void 0;var vW=Buffer.allocUnsafe(0),Fy=class{constructor(e=0){this.offset=e,this.buffer=vW,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};$d.BufferReader=Fy});var RO=v(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.Parser=void 0;var Ce=ky(),xW=bO(),Uy=1,RW=4,vO=Uy+RW,xO=Buffer.allocUnsafe(0),qy=class{constructor(e){if(this.buffer=xO,this.bufferLength=0,this.bufferOffset=0,this.reader=new xW.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,r){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,s=this.bufferOffset;for(;s+vO<=n;){let o=this.buffer[s],i=this.buffer.readUInt32BE(s+Uy),a=Uy+i;if(a+s<=n){let c=this.handlePacket(s+vO,o,i,this.buffer);r(c),s+=a}else break}s===n?(this.buffer=xO,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-s,this.bufferOffset=s)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let s;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)s=this.buffer;else{let o=this.buffer.byteLength*2;for(;r>=o;)o*=2;s=Buffer.allocUnsafe(o)}this.buffer.copy(s,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=s,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,n,s){switch(r){case 50:return Ce.bindComplete;case 49:return Ce.parseComplete;case 51:return Ce.closeComplete;case 110:return Ce.noData;case 115:return Ce.portalSuspended;case 99:return Ce.copyDone;case 87:return Ce.replicationStart;case 73:return Ce.emptyQuery;case 68:return this.parseDataRowMessage(e,n,s);case 67:return this.parseCommandCompleteMessage(e,n,s);case 90:return this.parseReadyForQueryMessage(e,n,s);case 65:return this.parseNotificationMessage(e,n,s);case 82:return this.parseAuthenticationResponse(e,n,s);case 83:return this.parseParameterStatusMessage(e,n,s);case 75:return this.parseBackendKeyData(e,n,s);case 69:return this.parseErrorMessage(e,n,s,"error");case 78:return this.parseErrorMessage(e,n,s,"notice");case 84:return this.parseRowDescriptionMessage(e,n,s);case 116:return this.parseParameterDescriptionMessage(e,n,s);case 71:return this.parseCopyInMessage(e,n,s);case 72:return this.parseCopyOutMessage(e,n,s);case 100:return this.parseCopyData(e,n,s);default:return new Ce.DatabaseError("received invalid response: "+r.toString(16),n,"error")}}parseReadyForQueryMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.string(1);return new Ce.ReadyForQueryMessage(r,s)}parseCommandCompleteMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.cstring();return new Ce.CommandCompleteMessage(r,s)}parseCopyData(e,r,n){let s=n.slice(e,e+(r-4));return new Ce.CopyDataMessage(r,s)}parseCopyInMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyInResponse")}parseCopyOutMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyOutResponse")}parseCopyMessage(e,r,n,s){this.reader.setBuffer(e,n);let o=this.reader.byte()!==0,i=this.reader.int16(),a=new Ce.CopyResponse(r,s,o,i);for(let c=0;c<i;c++)a.columnTypes[c]=this.reader.int16();return a}parseNotificationMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),o=this.reader.cstring(),i=this.reader.cstring();return new Ce.NotificationResponseMessage(r,s,o,i)}parseRowDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),o=new Ce.RowDescriptionMessage(r,s);for(let i=0;i<s;i++)o.fields[i]=this.parseField();return o}parseField(){let e=this.reader.cstring(),r=this.reader.uint32(),n=this.reader.int16(),s=this.reader.uint32(),o=this.reader.int16(),i=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new Ce.Field(e,r,n,s,o,i,a)}parseParameterDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),o=new Ce.ParameterDescriptionMessage(r,s);for(let i=0;i<s;i++)o.dataTypeIDs[i]=this.reader.int32();return o}parseDataRowMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),o=new Array(s);for(let i=0;i<s;i++){let a=this.reader.int32();o[i]=a===-1?null:this.reader.string(a)}return new Ce.DataRowMessage(r,o)}parseParameterStatusMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.cstring(),o=this.reader.cstring();return new Ce.ParameterStatusMessage(r,s,o)}parseBackendKeyData(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),o=this.reader.int32();return new Ce.BackendKeyDataMessage(r,s,o)}parseAuthenticationResponse(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),o={name:"authenticationOk",length:r};switch(s){case 0:break;case 3:o.length===8&&(o.name="authenticationCleartextPassword");break;case 5:if(o.length===12){o.name="authenticationMD5Password";let i=this.reader.bytes(4);return new Ce.AuthenticationMD5Password(r,i)}break;case 10:{o.name="authenticationSASL",o.mechanisms=[];let i;do i=this.reader.cstring(),i&&o.mechanisms.push(i);while(i)}break;case 11:o.name="authenticationSASLContinue",o.data=this.reader.string(r-8);break;case 12:o.name="authenticationSASLFinal",o.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+s)}return o}parseErrorMessage(e,r,n,s){this.reader.setBuffer(e,n);let o={},i=this.reader.string(1);for(;i!=="\0";)o[i]=this.reader.cstring(),i=this.reader.string(1);let a=o.M,c=s==="notice"?new Ce.NoticeMessage(r,a):new Ce.DatabaseError(a,r,s);return c.severity=o.S,c.code=o.C,c.detail=o.D,c.hint=o.H,c.position=o.P,c.internalPosition=o.p,c.internalQuery=o.q,c.where=o.W,c.schema=o.s,c.table=o.t,c.column=o.c,c.dataType=o.d,c.constraint=o.n,c.file=o.F,c.line=o.L,c.routine=o.R,c}};jd.Parser=qy});var $y=v(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.DatabaseError=Fn.serialize=Fn.parse=void 0;var TW=ky();Object.defineProperty(Fn,"DatabaseError",{enumerable:!0,get:function(){return TW.DatabaseError}});var CW=wO();Object.defineProperty(Fn,"serialize",{enumerable:!0,get:function(){return CW.serialize}});var AW=RO();function IW(t,e){let r=new AW.Parser;return t.on("data",n=>r.parse(n,e)),new Promise(n=>t.on("end",()=>n()))}Fn.parse=IW});var TO=v(jy=>{"use strict";Object.defineProperty(jy,"__esModule",{value:!0});jy.default={}});var AO=v((cre,CO)=>{var{getStream:PW,getSecureStream:OW}=MW();CO.exports={getStream:PW,getSecureStream:OW};function NW(){function t(r){let n=require("net");return new n.Socket}function e(r){return require("tls").connect(r)}return{getStream:t,getSecureStream:e}}function kW(){function t(r){let{CloudflareSocket:n}=TO();return new n(r)}function e(r){return r.socket.startTls(r),r.socket}return{getStream:t,getSecureStream:e}}function DW(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function MW(){return DW()?kW():NW()}});var Hy=v((ure,IO)=>{"use strict";var LW=require("events").EventEmitter,{parse:FW,serialize:je}=$y(),{getStream:UW,getSecureStream:qW}=AO(),$W=je.flush(),jW=je.sync(),BW=je.end(),By=class extends LW{constructor(e){super(),e=e||{},this.stream=e.stream||UW(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(e,r){let n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let s=function(o){n._ending&&(o.code==="ECONNRESET"||o.code==="EPIPE")||n.emit("error",o)};if(this.stream.on("error",s),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(o){switch(o.toString("utf8")){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:n.stream};n.ssl!==!0&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{n.stream=qW(a)}catch(u){return n.emit("error",u)}n.attachListeners(n.stream),n.stream.on("error",s),n.emit("sslconnect")})}attachListeners(e){FW(e,r=>{let n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(je.requestSsl())}startup(e){this.stream.write(je.startup(e))}cancel(e,r){this._send(je.cancel(e,r))}password(e){this._send(je.password(e))}sendSASLInitialResponseMessage(e,r){this._send(je.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(je.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(je.query(e))}parse(e){this._send(je.parse(e))}bind(e){this._send(je.bind(e))}execute(e){this._send(je.execute(e))}flush(){this.stream.writable&&this.stream.write($W)}sync(){this._ending=!0,this._send(jW)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(BW,()=>{this.stream.end()})}close(e){this._send(je.close(e))}describe(e){this._send(je.describe(e))}sendCopyFromChunk(e){this._send(je.copyData(e))}endCopyFrom(){this._send(je.copyDone())}sendCopyFail(e){this._send(je.copyFail(e))}};IO.exports=By});var kO=v((lre,NO)=>{"use strict";var{Transform:HW}=require("stream"),{StringDecoder:VW}=require("string_decoder"),Un=Symbol("last"),Bd=Symbol("decoder");function zW(t,e,r){let n;if(this.overflow){if(n=this[Bd].write(t).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[Un]+=this[Bd].write(t),n=this[Un].split(this.matcher);this[Un]=n.pop();for(let s=0;s<n.length;s++)try{OO(this,this.mapper(n[s]))}catch(o){return r(o)}if(this.overflow=this[Un].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function GW(t){if(this[Un]+=this[Bd].end(),this[Un])try{OO(this,this.mapper(this[Un]))}catch(e){return t(e)}t()}function OO(t,e){e!==void 0&&t.push(e)}function PO(t){return t}function WW(t,e,r){switch(t=t||/\r?\n/,e=e||PO,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=PO)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=zW,r.flush=GW,r.readableObjectMode=!0;let n=new HW(r);return n[Un]="",n[Bd]=new VW("utf8"),n.matcher=t,n.mapper=e,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(s,o){this._writableState.errorEmitted=!1,o(s)},n}NO.exports=WW});var LO=v((dre,Hr)=>{"use strict";var DO=require("path"),KW=require("stream").Stream,QW=kO(),MO=require("util"),YW=5432,Hd=process.platform==="win32",Ka=process.stderr,ZW=56,JW=7,XW=61440,e8=32768;function t8(t){return(t&XW)==e8}var Yo=["host","port","database","user","password"],Vy=Yo.length,r8=Yo[Vy-1];function zy(){var t=Ka instanceof KW&&Ka.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
`);Ka.write(MO.format.apply(MO,e))}}Object.defineProperty(Hr.exports,"isWin",{get:function(){return Hd},set:function(t){Hd=t}});Hr.exports.warnTo=function(t){var e=Ka;return Ka=t,e};Hr.exports.getFileName=function(t){var e=t||process.env,r=e.PGPASSFILE||(Hd?DO.join(e.APPDATA||"./","postgresql","pgpass.conf"):DO.join(e.HOME||"./",".pgpass"));return r};Hr.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Hd?!0:(e=e||"<unkn>",t8(t.mode)?t.mode&(ZW|JW)?(zy('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(zy('WARNING: password file "%s" is not a plain file',e),!1))};var n8=Hr.exports.match=function(t,e){return Yo.slice(0,-1).reduce(function(r,n,s){return s==1&&Number(t[n]||YW)===Number(e[n])?r&&!0:r&&(e[n]==="*"||e[n]===t[n])},!0)};Hr.exports.getPassword=function(t,e,r){var n,s=e.pipe(QW());function o(c){var u=s8(c);u&&o8(u)&&n8(t,u)&&(n=u[r8],s.end())}var i=function(){e.destroy(),r(n)},a=function(c){e.destroy(),zy("WARNING: error on reading file: %s",c),r(void 0)};e.on("error",a),s.on("data",o).on("end",i).on("error",a)};var s8=Hr.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",r="",n=0,s=0,o=0,i={},a=!1,c=function(l,p,h){var m=t.substring(p,h);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(m=m.replace(/\\([:\\])/g,"$1")),i[Yo[l]]=m},u=0;u<t.length-1;u+=1){if(e=t.charAt(u+1),r=t.charAt(u),a=n==Vy-1,a){c(n,s);break}u>=0&&e==":"&&r!=="\\"&&(c(n,s,u+1),s=u+2,n+=1)}return i=Object.keys(i).length===Vy?i:null,i},o8=Hr.exports.isValidEntry=function(t){for(var e={0:function(i){return i.length>0},1:function(i){return i==="*"?!0:(i=Number(i),isFinite(i)&&i>0&&i<9007199254740992&&Math.floor(i)===i)},2:function(i){return i.length>0},3:function(i){return i.length>0},4:function(i){return i.length>0}},r=0;r<Yo.length;r+=1){var n=e[r],s=t[Yo[r]]||"",o=n(s);if(!o)return!1}return!0}});var UO=v((pre,Gy)=>{"use strict";var fre=require("path"),FO=require("fs"),Vd=LO();Gy.exports=function(t,e){var r=Vd.getFileName();FO.stat(r,function(n,s){if(n||!Vd.usePgPass(s,r))return e(void 0);var o=FO.createReadStream(r);Vd.getPassword(t,o,e)})};Gy.exports.warnTo=Vd.warnTo});var BO=v((hre,jO)=>{"use strict";var i8=require("events").EventEmitter,qO=zo(),Wy=oO(),a8=Ld(),c8=my(),$O=SO(),u8=Ga(),l8=Hy(),d8=fy(),zd=class extends i8{constructor(e){super(),this.connectionParameters=new c8(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=e||{};this._Promise=r.Promise||global.Promise,this._types=new a8(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new l8({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||u8.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(e){let r=n=>{process.nextTick(()=>{n.handleError(e,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(e){let r=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let s=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(s)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let s=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(s),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(s):this._handleErrorEvent(s):this._connectionError||this._handleErrorEvent(s)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((r,n)=>{this._connect(s=>{s?n(s):r()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()}).catch(n=>{r.emit("error",n)});else if(this.password!==null)e();else try{UO()(this.connectionParameters,s=>{s!==void 0&&(this.connectionParameters.password=this.password=s),e()})}catch(n){this.emit("error",n)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let r=await d8.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=Wy.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(e){try{await Wy.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(e){try{Wy.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this.activeQuery;if(!r){this._handleErrorEvent(e);return}this.activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let e=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(e);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,r={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(r.application_name=n),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){let n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(r)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(r),1)}setTypeParser(e,r,n){return this._types.setTypeParser(e,r,n)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return qO.escapeIdentifier(e)}escapeLiteral(e){return qO.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,r,n){let s,o,i,a,c;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(i=e.query_timeout||this.connectionParameters.query_timeout,o=s=e,typeof r=="function"&&(s.callback=s.callback||r)):(i=e.query_timeout||this.connectionParameters.query_timeout,s=new $O(e,r,n),s.callback||(o=new this._Promise((u,l)=>{s.callback=(p,h)=>p?l(p):u(h)}).catch(u=>{throw Error.captureStackTrace(u),u}))),i&&(c=s.callback,a=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{s.handleError(u,this.connection)}),c(u),s.callback=()=>{};let l=this.queryQueue.indexOf(s);l>-1&&this.queryQueue.splice(l,1),this._pulseQueryQueue()},i),s.callback=(u,l)=>{clearTimeout(a),c(u,l)}),this.binary&&!s.binary&&(s.binary=!0),s._result&&!s._result._types&&(s._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"),this.connection)}),o):(this.queryQueue.push(s),this._pulseQueryQueue(),o):(process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),o)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(r=>{this.connection.once("end",r)})}};zd.Query=$O;jO.exports=zd});var GO=v((mre,zO)=>{"use strict";var f8=require("events").EventEmitter,HO=function(){},VO=(t,e)=>{let r=t.findIndex(e);return r===-1?void 0:t.splice(r,1)[0]},Ky=class{constructor(e,r,n){this.client=e,this.idleListener=r,this.timeoutId=n}},Zo=class{constructor(e){this.callback=e}};function p8(){throw new Error("Release called on client which has already been released to the pool.")}function Gd(t,e){if(e)return{callback:e,result:void 0};let r,n,s=function(i,a){i?r(i):n(a)},o=new t(function(i,a){n=i,r=a}).catch(i=>{throw Error.captureStackTrace(i),i});return{callback:s,result:o}}function h8(t,e){return function r(n){n.client=e,e.removeListener("error",r),e.on("error",()=>{t.log("additional client error after disconnection due to error",n)}),t._remove(e),t.emit("error",n,e)}}var Qy=class extends f8{constructor(e,r){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||Yy().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let s=r.idleListener;return this._acquireClient(n,e,s,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,r){let n=VO(this._idle,o=>o.client===e);n!==void 0&&clearTimeout(n.timeoutId),this._clients=this._clients.filter(o=>o!==e);let s=this;e.end(()=>{s.emit("remove",e),typeof r=="function"&&r()})}connect(e){if(this.ending){let s=new Error("Cannot use a pool after calling end on the pool");return e?e(s):this.Promise.reject(s)}let r=Gd(this.Promise,e),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Zo(r.callback)),n;let s=(a,c,u)=>{clearTimeout(i),r.callback(a,c,u)},o=new Zo(s),i=setTimeout(()=>{VO(this._pendingQueue,a=>a.callback===s),o.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return i.unref&&i.unref(),this._pendingQueue.push(o),n}return this.newClient(new Zo(r.callback)),n}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let n=h8(this,r);this.log("checking client timeout");let s,o=!1;this.options.connectionTimeoutMillis&&(s=setTimeout(()=>{this.log("ending client due to timeout"),o=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(i=>{if(s&&clearTimeout(s),r.on("error",n),i)this.log("client failed to connect",i),this._clients=this._clients.filter(a=>a!==r),o&&(i=new Error("Connection terminated due to connection timeout",{cause:i})),this._pulseQueue(),e.timedOut||e.callback(i,void 0,HO);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new Zo((u,l,p)=>p()),n,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,e,n,!0)}})}_acquireClient(e,r,n,s){s&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),r.timedOut?s&&this.options.verify?this.options.verify(e,e.release):e.release():s&&this.options.verify?this.options.verify(e,o=>{if(o)return e.release(o),r.callback(o,void 0,HO);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let n=!1;return s=>{n&&p8(),n=!0,this._release(e,r,s)}}_release(e,r,n){if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let o;this.options.idleTimeoutMillis&&this._isAboveMin()&&(o=setTimeout(()=>{this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&o.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new Ky(e,r,o)),this._pulseQueue()}query(e,r,n){if(typeof e=="function"){let o=Gd(this.Promise,e);return setImmediate(function(){return o.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),o.result}typeof r=="function"&&(n=r,r=void 0);let s=Gd(this.Promise,n);return n=s.callback,this.connect((o,i)=>{if(o)return n(o);let a=!1,c=u=>{a||(a=!0,i.release(u),n(u))};i.once("error",c),this.log("dispatching query");try{i.query(e,r,(u,l)=>{if(this.log("query dispatched"),i.removeListener("error",c),!a)return a=!0,i.release(u),u?n(u):n(void 0,l)})}catch(u){return i.release(u),n(u)}}),s.result}end(e){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return e?e(n):this.Promise.reject(n)}this.ending=!0;let r=Gd(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};zO.exports=Qy});var QO=v((gre,KO)=>{"use strict";var WO=require("events").EventEmitter,m8=require("util"),Zy=zo(),Jo=KO.exports=function(t,e,r){WO.call(this),t=Zy.normalizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};m8.inherits(Jo,WO);var g8={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};Jo.prototype.handleError=function(t){let e=this.native.pq.resultErrorFields();if(e)for(let r in e){let n=g8[r]||r;t[n]=e[r]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};Jo.prototype.then=function(t,e){return this._getPromise().then(t,e)};Jo.prototype.catch=function(t){return this._getPromise().catch(t)};Jo.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};Jo.prototype.submit=function(t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;let r=function(n,s,o){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),n)return e.handleError(n);e._emitRowEvents&&(o.length>1?s.forEach((i,a)=>{i.forEach(c=>{e.emit("row",c,o[a])})}):s.forEach(function(i){e.emit("row",i,o)})),e.state="end",e.emit("end",o),e.callback&&e.callback(null,o)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let n=(this.values||[]).map(Zy.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(s)}return t.native.execute(this.name,n,r)}return t.native.prepare(this.name,this.text,n.length,function(s){return s?r(s):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return r(s)}let n=this.values.map(Zy.prepareValue);t.native.query(this.text,n,r)}else this.queryMode==="extended"?t.native.query(this.text,[],r):t.native.query(this.text,r)}});var eN=v((yre,XO)=>{"use strict";var YO;try{YO=require("pg-native")}catch(t){throw t}var y8=Ld(),ZO=require("events").EventEmitter,S8=require("util"),_8=my(),JO=QO(),vt=XO.exports=function(t){ZO.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new y8(t.types),this.native=new YO({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new _8(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};vt.Query=JO;S8.inherits(vt,ZO);vt.prototype._errorAllQueries=function(t){let e=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};vt.prototype._connect=function(t){let e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(e.connectionParameters.nativeConnectionString&&(n=e.connectionParameters.nativeConnectionString),r)return t(r);e.native.connect(n,function(s){if(s)return e.native.end(),t(s);e._connected=!0,e.native.on("error",function(o){e._queryable=!1,e._errorAllQueries(o),e.emit("error",o)}),e.native.on("notification",function(o){e.emit("notification",{channel:o.relname,payload:o.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};vt.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})};vt.prototype.query=function(t,e,r){let n,s,o,i,a;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")o=t.query_timeout||this.connectionParameters.query_timeout,s=n=t,typeof e=="function"&&(t.callback=e);else if(o=t.query_timeout||this.connectionParameters.query_timeout,n=new JO(t,e,r),!n.callback){let c,u;s=new this._Promise((l,p)=>{c=l,u=p}).catch(l=>{throw Error.captureStackTrace(l),l}),n.callback=(l,p)=>l?u(l):c(p)}return o&&(a=n.callback,i=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{n.handleError(c,this.connection)}),a(c),n.callback=()=>{};let u=this._queryQueue.indexOf(n);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},o),n.callback=(c,u)=>{clearTimeout(i),a(c,u)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),s):(this._queryQueue.push(n),this._pulseQueryQueue(),s):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),s)};vt.prototype.end=function(t){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));let r;return t||(r=new this._Promise(function(n,s){t=o=>o?s(o):n()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),r};vt.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};vt.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);let r=this;e.once("_done",function(){r._pulseQueryQueue()})};vt.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};vt.prototype.ref=function(){};vt.prototype.unref=function(){};vt.prototype.setTypeParser=function(t,e,r){return this._types.setTypeParser(t,e,r)};vt.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var Jy=v((Sre,tN)=>{"use strict";tN.exports=eN()});var Yy=v((Ere,Qa)=>{"use strict";var E8=BO(),w8=Ga(),b8=Hy(),v8=yy(),x8=zo(),R8=GO(),T8=Ld(),{DatabaseError:C8}=$y(),{escapeIdentifier:A8,escapeLiteral:I8}=zo(),P8=t=>class extends R8{constructor(r){super(r,t)}},Xy=function(t){this.defaults=w8,this.Client=t,this.Query=this.Client.Query,this.Pool=P8(this.Client),this._pools=[],this.Connection=b8,this.types=za(),this.DatabaseError=C8,this.TypeOverrides=T8,this.escapeIdentifier=A8,this.escapeLiteral=I8,this.Result=v8,this.utils=x8};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Qa.exports=new Xy(Jy()):(Qa.exports=new Xy(E8),Object.defineProperty(Qa.exports,"native",{configurable:!0,enumerable:!1,get(){let t=null;try{t=new Xy(Jy())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Qa.exports,"native",{value:t}),t}}))});var K8={};st(K8,{handler:()=>W8});module.exports=ue(K8);var ri={};st(ri,{BRAND:()=>R1,DIRTY:()=>jn,EMPTY_PATH:()=>n1,INVALID:()=>H,NEVER:()=>uk,OK:()=>Je,ParseStatus:()=>Be,Schema:()=>X,ZodAny:()=>Qr,ZodArray:()=>_r,ZodBigInt:()=>Hn,ZodBoolean:()=>Vn,ZodBranded:()=>ei,ZodCatch:()=>ts,ZodDate:()=>zn,ZodDefault:()=>es,ZodDiscriminatedUnion:()=>ec,ZodEffects:()=>Ot,ZodEnum:()=>Jn,ZodError:()=>Ze,ZodFirstPartyTypeKind:()=>z,ZodFunction:()=>rc,ZodIntersection:()=>Qn,ZodIssueCode:()=>O,ZodLazy:()=>Yn,ZodLiteral:()=>Zn,ZodMap:()=>Fs,ZodNaN:()=>qs,ZodNativeEnum:()=>Xn,ZodNever:()=>Gt,ZodNull:()=>Wn,ZodNullable:()=>rr,ZodNumber:()=>Bn,ZodObject:()=>lt,ZodOptional:()=>It,ZodParsedType:()=>L,ZodPipeline:()=>ti,ZodPromise:()=>Yr,ZodReadonly:()=>rs,ZodRecord:()=>tc,ZodSchema:()=>X,ZodSet:()=>Us,ZodString:()=>Kr,ZodSymbol:()=>Ms,ZodTransformer:()=>Ot,ZodTuple:()=>tr,ZodType:()=>X,ZodUndefined:()=>Gn,ZodUnion:()=>Kn,ZodUnknown:()=>Sr,ZodVoid:()=>Ls,addIssueToContext:()=>D,any:()=>D1,array:()=>U1,bigint:()=>I1,boolean:()=>SS,coerce:()=>ck,custom:()=>mS,date:()=>P1,datetimeRegex:()=>pS,defaultErrorMap:()=>gr,discriminatedUnion:()=>B1,effect:()=>ek,enum:()=>Z1,function:()=>K1,getErrorMap:()=>Ns,getParsedType:()=>er,instanceof:()=>C1,intersection:()=>H1,isAborted:()=>Ja,isAsync:()=>ks,isDirty:()=>Xa,isValid:()=>Wr,late:()=>T1,lazy:()=>Q1,literal:()=>Y1,makeIssue:()=>Xo,map:()=>G1,nan:()=>A1,nativeEnum:()=>J1,never:()=>L1,null:()=>k1,nullable:()=>rk,number:()=>yS,object:()=>q1,objectUtil:()=>of,oboolean:()=>ak,onumber:()=>ik,optional:()=>tk,ostring:()=>ok,pipeline:()=>sk,preprocess:()=>nk,promise:()=>X1,quotelessJson:()=>e1,record:()=>z1,set:()=>W1,setErrorMap:()=>r1,strictObject:()=>$1,string:()=>gS,symbol:()=>O1,transformer:()=>ek,tuple:()=>V1,undefined:()=>N1,union:()=>j1,unknown:()=>M1,util:()=>oe,void:()=>F1});var oe;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{let o={};for(let i of s)o[i]=i;return o},t.getValidEnumValues=s=>{let o=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),i={};for(let a of o)i[a]=s[a];return t.objectValues(i)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let o=[];for(let i in s)Object.prototype.hasOwnProperty.call(s,i)&&o.push(i);return o},t.find=(s,o)=>{for(let i of s)if(o(i))return i},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,o=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(oe||(oe={}));var of;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(of||(of={}));var L=oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),er=t=>{switch(typeof t){case"undefined":return L.undefined;case"string":return L.string;case"number":return Number.isNaN(t)?L.nan:L.number;case"boolean":return L.boolean;case"function":return L.function;case"bigint":return L.bigint;case"symbol":return L.symbol;case"object":return Array.isArray(t)?L.array:t===null?L.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?L.promise:typeof Map<"u"&&t instanceof Map?L.map:typeof Set<"u"&&t instanceof Set?L.set:typeof Date<"u"&&t instanceof Date?L.date:L.object;default:return L.unknown}};var O=oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),e1=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Ze=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},s=o=>{for(let i of o.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)n._errors.push(r(i));else{let a=n,c=0;for(;c<i.path.length;){let u=i.path[c];c===i.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(i))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)if(s.path.length>0){let o=s.path[0];r[o]=r[o]||[],r[o].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Ze.create=t=>new Ze(t);var t1=(t,e)=>{let r;switch(t.code){case O.invalid_type:t.received===L.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case O.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,oe.jsonStringifyReplacer)}`;break;case O.unrecognized_keys:r=`Unrecognized key(s) in object: ${oe.joinValues(t.keys,", ")}`;break;case O.invalid_union:r="Invalid input";break;case O.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${oe.joinValues(t.options)}`;break;case O.invalid_enum_value:r=`Invalid enum value. Expected ${oe.joinValues(t.options)}, received '${t.received}'`;break;case O.invalid_arguments:r="Invalid function arguments";break;case O.invalid_return_type:r="Invalid function return type";break;case O.invalid_date:r="Invalid date";break;case O.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:oe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case O.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case O.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case O.custom:r="Invalid input";break;case O.invalid_intersection_types:r="Intersection results could not be merged";break;case O.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case O.not_finite:r="Number must be finite";break;default:r=e.defaultError,oe.assertNever(t)}return{message:r}},gr=t1;var cS=gr;function r1(t){cS=t}function Ns(){return cS}var Xo=t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,o=[...r,...s.path||[]],i={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let a="",c=n.filter(u=>!!u).slice().reverse();for(let u of c)a=u(i,{data:e,defaultError:a}).message;return{...s,path:o,message:a}},n1=[];function D(t,e){let r=Ns(),n=Xo({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===gr?void 0:gr].filter(s=>!!s)});t.common.issues.push(n)}var Be=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return H;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r){let o=await s.key,i=await s.value;n.push({key:o,value:i})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:o,value:i}=s;if(o.status==="aborted"||i.status==="aborted")return H;o.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(n[o.value]=i.value)}return{status:e.value,value:n}}},H=Object.freeze({status:"aborted"}),jn=t=>({status:"dirty",value:t}),Je=t=>({status:"valid",value:t}),Ja=t=>t.status==="aborted",Xa=t=>t.status==="dirty",Wr=t=>t.status==="valid",ks=t=>typeof Promise<"u"&&t instanceof Promise;var U;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(U||(U={}));var Pt=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},uS=(t,e)=>{if(Wr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Ze(t.common.issues);return this._error=r,this._error}}};function Y(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,a)=>{let{message:c}=t;return i.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??n??a.defaultError}:i.code!=="invalid_type"?{message:a.defaultError}:{message:c??r??a.defaultError}},description:s}}var X=class{get description(){return this._def.description}_getType(e){return er(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:er(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Be,ctx:{common:e.parent.common,data:e.data,parsedType:er(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(ks(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:er(e)},s=this._parseSync({data:e,path:n.path,parent:n});return uS(n,s)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:er(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return Wr(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>Wr(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:er(e)},s=this._parse({data:e,path:n.path,parent:n}),o=await(ks(s)?s:Promise.resolve(s));return uS(n,o)}refine(e,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,o)=>{let i=e(s),a=()=>o.addIssue({code:O.custom,...n(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(a(),!1)):i?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Ot({schema:this,typeName:z.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return It.create(this,this._def)}nullable(){return rr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _r.create(this)}promise(){return Yr.create(this,this._def)}or(e){return Kn.create([this,e],this._def)}and(e){return Qn.create(this,e,this._def)}transform(e){return new Ot({...Y(this._def),schema:this,typeName:z.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new es({...Y(this._def),innerType:this,defaultValue:r,typeName:z.ZodDefault})}brand(){return new ei({typeName:z.ZodBranded,type:this,...Y(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ts({...Y(this._def),innerType:this,catchValue:r,typeName:z.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ti.create(this,e)}readonly(){return rs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},s1=/^c[^\s-]{8,}$/i,o1=/^[0-9a-z]+$/,i1=/^[0-9A-HJKMNP-TV-Z]{26}$/i,a1=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,c1=/^[a-z0-9_-]{21}$/i,u1=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,l1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,d1=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,f1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",af,p1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,h1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,m1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,g1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,y1=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,S1=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dS="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_1=new RegExp(`^${dS}$`);function fS(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function E1(t){return new RegExp(`^${fS(t)}$`)}function pS(t){let e=`${dS}T${fS(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function w1(t,e){return!!((e==="v4"||!e)&&p1.test(t)||(e==="v6"||!e)&&m1.test(t))}function b1(t,e){if(!u1.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function v1(t,e){return!!((e==="v4"||!e)&&h1.test(t)||(e==="v6"||!e)&&g1.test(t))}var Kr=class t extends X{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==L.string){let o=this._getOrReturnCtx(e);return D(o,{code:O.invalid_type,expected:L.string,received:o.parsedType}),H}let n=new Be,s;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:O.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:O.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let i=e.data.length>o.value,a=e.data.length<o.value;(i||a)&&(s=this._getOrReturnCtx(e,s),i?D(s,{code:O.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&D(s,{code:O.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")d1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"email",code:O.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")af||(af=new RegExp(f1,"u")),af.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"emoji",code:O.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")a1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"uuid",code:O.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")c1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"nanoid",code:O.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")s1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"cuid",code:O.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")o1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"cuid2",code:O.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")i1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"ulid",code:O.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),D(s,{validation:"url",code:O.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"regex",code:O.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?pS(o).test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?_1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?E1(o).test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?l1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"duration",code:O.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?w1(e.data,o.version)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"ip",code:O.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?b1(e.data,o.alg)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"jwt",code:O.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?v1(e.data,o.version)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"cidr",code:O.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?y1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"base64",code:O.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?S1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"base64url",code:O.invalid_string,message:o.message}),n.dirty()):oe.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:O.invalid_string,...U.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...U.errToObj(e)})}url(e){return this._addCheck({kind:"url",...U.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...U.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...U.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...U.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...U.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...U.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...U.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...U.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...U.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...U.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...U.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...U.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...U.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...U.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...U.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...U.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...U.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...U.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...U.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...U.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...U.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...U.errToObj(r)})}nonempty(e){return this.min(1,U.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Kr.create=t=>new Kr({checks:[],typeName:z.ZodString,coerce:t?.coerce??!1,...Y(t)});function x1(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,o=Number.parseInt(t.toFixed(s).replace(".","")),i=Number.parseInt(e.toFixed(s).replace(".",""));return o%i/10**s}var Bn=class t extends X{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==L.number){let o=this._getOrReturnCtx(e);return D(o,{code:O.invalid_type,expected:L.number,received:o.parsedType}),H}let n,s=new Be;for(let o of this._def.checks)o.kind==="int"?oe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{code:O.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?x1(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{code:O.not_finite,message:o.message}),s.dirty()):oe.assertNever(o);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,U.toString(r))}gt(e,r){return this.setLimit("min",e,!1,U.toString(r))}lte(e,r){return this.setLimit("max",e,!0,U.toString(r))}lt(e,r){return this.setLimit("max",e,!1,U.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:U.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:U.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:U.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:U.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:U.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:U.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:U.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:U.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:U.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:U.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&oe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Bn.create=t=>new Bn({checks:[],typeName:z.ZodNumber,coerce:t?.coerce||!1,...Y(t)});var Hn=class t extends X{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==L.bigint)return this._getInvalidInput(e);let n,s=new Be;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):oe.assertNever(o);return{status:s.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return D(r,{code:O.invalid_type,expected:L.bigint,received:r.parsedType}),H}gte(e,r){return this.setLimit("min",e,!0,U.toString(r))}gt(e,r){return this.setLimit("min",e,!1,U.toString(r))}lte(e,r){return this.setLimit("max",e,!0,U.toString(r))}lt(e,r){return this.setLimit("max",e,!1,U.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:U.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:U.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:U.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:U.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:U.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:U.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Hn.create=t=>new Hn({checks:[],typeName:z.ZodBigInt,coerce:t?.coerce??!1,...Y(t)});var Vn=class extends X{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==L.boolean){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.boolean,received:n.parsedType}),H}return Je(e.data)}};Vn.create=t=>new Vn({typeName:z.ZodBoolean,coerce:t?.coerce||!1,...Y(t)});var zn=class t extends X{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==L.date){let o=this._getOrReturnCtx(e);return D(o,{code:O.invalid_type,expected:L.date,received:o.parsedType}),H}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return D(o,{code:O.invalid_date}),H}let n=new Be,s;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:O.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:O.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):oe.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:U.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:U.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};zn.create=t=>new zn({checks:[],coerce:t?.coerce||!1,typeName:z.ZodDate,...Y(t)});var Ms=class extends X{_parse(e){if(this._getType(e)!==L.symbol){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.symbol,received:n.parsedType}),H}return Je(e.data)}};Ms.create=t=>new Ms({typeName:z.ZodSymbol,...Y(t)});var Gn=class extends X{_parse(e){if(this._getType(e)!==L.undefined){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.undefined,received:n.parsedType}),H}return Je(e.data)}};Gn.create=t=>new Gn({typeName:z.ZodUndefined,...Y(t)});var Wn=class extends X{_parse(e){if(this._getType(e)!==L.null){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.null,received:n.parsedType}),H}return Je(e.data)}};Wn.create=t=>new Wn({typeName:z.ZodNull,...Y(t)});var Qr=class extends X{constructor(){super(...arguments),this._any=!0}_parse(e){return Je(e.data)}};Qr.create=t=>new Qr({typeName:z.ZodAny,...Y(t)});var Sr=class extends X{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Je(e.data)}};Sr.create=t=>new Sr({typeName:z.ZodUnknown,...Y(t)});var Gt=class extends X{_parse(e){let r=this._getOrReturnCtx(e);return D(r,{code:O.invalid_type,expected:L.never,received:r.parsedType}),H}};Gt.create=t=>new Gt({typeName:z.ZodNever,...Y(t)});var Ls=class extends X{_parse(e){if(this._getType(e)!==L.undefined){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.void,received:n.parsedType}),H}return Je(e.data)}};Ls.create=t=>new Ls({typeName:z.ZodVoid,...Y(t)});var _r=class t extends X{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==L.array)return D(r,{code:O.invalid_type,expected:L.array,received:r.parsedType}),H;if(s.exactLength!==null){let i=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(i||a)&&(D(r,{code:i?O.too_big:O.too_small,minimum:a?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(D(r,{code:O.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(D(r,{code:O.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((i,a)=>s.type._parseAsync(new Pt(r,i,r.path,a)))).then(i=>Be.mergeArray(n,i));let o=[...r.data].map((i,a)=>s.type._parseSync(new Pt(r,i,r.path,a)));return Be.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:U.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:U.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:U.toString(r)}})}nonempty(e){return this.min(1,e)}};_r.create=(t,e)=>new _r({type:t,minLength:null,maxLength:null,exactLength:null,typeName:z.ZodArray,...Y(e)});function Ds(t){if(t instanceof lt){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=It.create(Ds(n))}return new lt({...t._def,shape:()=>e})}else return t instanceof _r?new _r({...t._def,type:Ds(t.element)}):t instanceof It?It.create(Ds(t.unwrap())):t instanceof rr?rr.create(Ds(t.unwrap())):t instanceof tr?tr.create(t.items.map(e=>Ds(e))):t}var lt=class t extends X{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=oe.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==L.object){let u=this._getOrReturnCtx(e);return D(u,{code:O.invalid_type,expected:L.object,received:u.parsedType}),H}let{status:n,ctx:s}=this._processInputParams(e),{shape:o,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof Gt&&this._def.unknownKeys==="strip"))for(let u in s.data)i.includes(u)||a.push(u);let c=[];for(let u of i){let l=o[u],p=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Pt(s,p,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Gt){let u=this._def.unknownKeys;if(u==="passthrough")for(let l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(D(s,{code:O.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let l of a){let p=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Pt(s,p,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let u=[];for(let l of c){let p=await l.key,h=await l.value;u.push({key:p,value:h,alwaysSet:l.alwaysSet})}return u}).then(u=>Be.mergeObjectSync(n,u)):Be.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return U.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let s=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:U.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:z.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of oe.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of oe.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return Ds(this)}partial(e){let r={};for(let n of oe.objectKeys(this.shape)){let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of oe.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof It;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return hS(oe.objectKeys(this.shape))}};lt.create=(t,e)=>new lt({shape:()=>t,unknownKeys:"strip",catchall:Gt.create(),typeName:z.ZodObject,...Y(e)});lt.strictCreate=(t,e)=>new lt({shape:()=>t,unknownKeys:"strict",catchall:Gt.create(),typeName:z.ZodObject,...Y(e)});lt.lazycreate=(t,e)=>new lt({shape:t,unknownKeys:"strip",catchall:Gt.create(),typeName:z.ZodObject,...Y(e)});var Kn=class extends X{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(o){for(let a of o)if(a.result.status==="valid")return a.result;for(let a of o)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let i=o.map(a=>new Ze(a.ctx.common.issues));return D(r,{code:O.invalid_union,unionErrors:i}),H}if(r.common.async)return Promise.all(n.map(async o=>{let i={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:i}),ctx:i}})).then(s);{let o,i=[];for(let c of n){let u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!o&&(o={result:l,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let a=i.map(c=>new Ze(c));return D(r,{code:O.invalid_union,unionErrors:a}),H}}get options(){return this._def.options}};Kn.create=(t,e)=>new Kn({options:t,typeName:z.ZodUnion,...Y(e)});var yr=t=>t instanceof Yn?yr(t.schema):t instanceof Ot?yr(t.innerType()):t instanceof Zn?[t.value]:t instanceof Jn?t.options:t instanceof Xn?oe.objectValues(t.enum):t instanceof es?yr(t._def.innerType):t instanceof Gn?[void 0]:t instanceof Wn?[null]:t instanceof It?[void 0,...yr(t.unwrap())]:t instanceof rr?[null,...yr(t.unwrap())]:t instanceof ei||t instanceof rs?yr(t.unwrap()):t instanceof ts?yr(t._def.innerType):[],ec=class t extends X{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==L.object)return D(r,{code:O.invalid_type,expected:L.object,received:r.parsedType}),H;let n=this.discriminator,s=r.data[n],o=this.optionsMap.get(s);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(D(r,{code:O.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),H)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let o of r){let i=yr(o.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of i){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,o)}}return new t({typeName:z.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Y(n)})}};function cf(t,e){let r=er(t),n=er(e);if(t===e)return{valid:!0,data:t};if(r===L.object&&n===L.object){let s=oe.objectKeys(e),o=oe.objectKeys(t).filter(a=>s.indexOf(a)!==-1),i={...t,...e};for(let a of o){let c=cf(t[a],e[a]);if(!c.valid)return{valid:!1};i[a]=c.data}return{valid:!0,data:i}}else if(r===L.array&&n===L.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let o=0;o<t.length;o++){let i=t[o],a=e[o],c=cf(i,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===L.date&&n===L.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Qn=class extends X{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=(o,i)=>{if(Ja(o)||Ja(i))return H;let a=cf(o.value,i.value);return a.valid?((Xa(o)||Xa(i))&&r.dirty(),{status:r.value,value:a.data}):(D(n,{code:O.invalid_intersection_types}),H)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,i])=>s(o,i)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Qn.create=(t,e,r)=>new Qn({left:t,right:e,typeName:z.ZodIntersection,...Y(r)});var tr=class t extends X{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==L.array)return D(n,{code:O.invalid_type,expected:L.array,received:n.parsedType}),H;if(n.data.length<this._def.items.length)return D(n,{code:O.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),H;!this._def.rest&&n.data.length>this._def.items.length&&(D(n,{code:O.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((i,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new Pt(n,i,n.path,a)):null}).filter(i=>!!i);return n.common.async?Promise.all(o).then(i=>Be.mergeArray(r,i)):Be.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};tr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new tr({items:t,typeName:z.ZodTuple,rest:null,...Y(e)})};var tc=class t extends X{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==L.object)return D(n,{code:O.invalid_type,expected:L.object,received:n.parsedType}),H;let s=[],o=this._def.keyType,i=this._def.valueType;for(let a in n.data)s.push({key:o._parse(new Pt(n,a,n.path,a)),value:i._parse(new Pt(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Be.mergeObjectAsync(r,s):Be.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof X?new t({keyType:e,valueType:r,typeName:z.ZodRecord,...Y(n)}):new t({keyType:Kr.create(),valueType:e,typeName:z.ZodRecord,...Y(r)})}},Fs=class extends X{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==L.map)return D(n,{code:O.invalid_type,expected:L.map,received:n.parsedType}),H;let s=this._def.keyType,o=this._def.valueType,i=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new Pt(n,a,n.path,[u,"key"])),value:o._parse(new Pt(n,c,n.path,[u,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of i){let u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return H;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let c of i){let u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return H;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}};Fs.create=(t,e,r)=>new Fs({valueType:e,keyType:t,typeName:z.ZodMap,...Y(r)});var Us=class t extends X{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==L.set)return D(n,{code:O.invalid_type,expected:L.set,received:n.parsedType}),H;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(D(n,{code:O.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(D(n,{code:O.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let o=this._def.valueType;function i(c){let u=new Set;for(let l of c){if(l.status==="aborted")return H;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}let a=[...n.data.values()].map((c,u)=>o._parse(new Pt(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>i(c)):i(a)}min(e,r){return new t({...this._def,minSize:{value:e,message:U.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:U.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Us.create=(t,e)=>new Us({valueType:t,minSize:null,maxSize:null,typeName:z.ZodSet,...Y(e)});var rc=class t extends X{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==L.function)return D(r,{code:O.invalid_type,expected:L.function,received:r.parsedType}),H;function n(a,c){return Xo({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ns(),gr].filter(u=>!!u),issueData:{code:O.invalid_arguments,argumentsError:c}})}function s(a,c){return Xo({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ns(),gr].filter(u=>!!u),issueData:{code:O.invalid_return_type,returnTypeError:c}})}let o={errorMap:r.common.contextualErrorMap},i=r.data;if(this._def.returns instanceof Yr){let a=this;return Je(async function(...c){let u=new Ze([]),l=await a._def.args.parseAsync(c,o).catch(m=>{throw u.addIssue(n(c,m)),u}),p=await Reflect.apply(i,this,l);return await a._def.returns._def.type.parseAsync(p,o).catch(m=>{throw u.addIssue(s(p,m)),u})})}else{let a=this;return Je(function(...c){let u=a._def.args.safeParse(c,o);if(!u.success)throw new Ze([n(c,u.error)]);let l=Reflect.apply(i,this,u.data),p=a._def.returns.safeParse(l,o);if(!p.success)throw new Ze([s(l,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:tr.create(e).rest(Sr.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||tr.create([]).rest(Sr.create()),returns:r||Sr.create(),typeName:z.ZodFunction,...Y(n)})}},Yn=class extends X{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Yn.create=(t,e)=>new Yn({getter:t,typeName:z.ZodLazy,...Y(e)});var Zn=class extends X{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return D(r,{received:r.data,code:O.invalid_literal,expected:this._def.value}),H}return{status:"valid",value:e.data}}get value(){return this._def.value}};Zn.create=(t,e)=>new Zn({value:t,typeName:z.ZodLiteral,...Y(e)});function hS(t,e){return new Jn({values:t,typeName:z.ZodEnum,...Y(e)})}var Jn=class t extends X{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return D(r,{expected:oe.joinValues(n),received:r.parsedType,code:O.invalid_type}),H}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return D(r,{received:r.data,code:O.invalid_enum_value,options:n}),H}return Je(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Jn.create=hS;var Xn=class extends X{_parse(e){let r=oe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==L.string&&n.parsedType!==L.number){let s=oe.objectValues(r);return D(n,{expected:oe.joinValues(s),received:n.parsedType,code:O.invalid_type}),H}if(this._cache||(this._cache=new Set(oe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let s=oe.objectValues(r);return D(n,{received:n.data,code:O.invalid_enum_value,options:s}),H}return Je(e.data)}get enum(){return this._def.values}};Xn.create=(t,e)=>new Xn({values:t,typeName:z.ZodNativeEnum,...Y(e)});var Yr=class extends X{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==L.promise&&r.common.async===!1)return D(r,{code:O.invalid_type,expected:L.promise,received:r.parsedType}),H;let n=r.parsedType===L.promise?r.data:Promise.resolve(r.data);return Je(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Yr.create=(t,e)=>new Yr({type:t,typeName:z.ZodPromise,...Y(e)});var Ot=class extends X{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===z.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:i=>{D(n,i),i.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){let i=s.transform(n.data,o);if(n.common.async)return Promise.resolve(i).then(async a=>{if(r.value==="aborted")return H;let c=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return c.status==="aborted"?H:c.status==="dirty"?jn(c.value):r.value==="dirty"?jn(c.value):c});{if(r.value==="aborted")return H;let a=this._def.schema._parseSync({data:i,path:n.path,parent:n});return a.status==="aborted"?H:a.status==="dirty"?jn(a.value):r.value==="dirty"?jn(a.value):a}}if(s.type==="refinement"){let i=a=>{let c=s.refinement(a,o);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?H:(a.status==="dirty"&&r.dirty(),i(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?H:(a.status==="dirty"&&r.dirty(),i(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){let i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Wr(i))return H;let a=s.transform(i.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>Wr(i)?Promise.resolve(s.transform(i.value,o)).then(a=>({status:r.value,value:a})):H);oe.assertNever(s)}};Ot.create=(t,e,r)=>new Ot({schema:t,typeName:z.ZodEffects,effect:e,...Y(r)});Ot.createWithPreprocess=(t,e,r)=>new Ot({schema:e,effect:{type:"preprocess",transform:t},typeName:z.ZodEffects,...Y(r)});var It=class extends X{_parse(e){return this._getType(e)===L.undefined?Je(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};It.create=(t,e)=>new It({innerType:t,typeName:z.ZodOptional,...Y(e)});var rr=class extends X{_parse(e){return this._getType(e)===L.null?Je(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};rr.create=(t,e)=>new rr({innerType:t,typeName:z.ZodNullable,...Y(e)});var es=class extends X{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===L.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};es.create=(t,e)=>new es({innerType:t,typeName:z.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Y(e)});var ts=class extends X{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ks(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ze(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ze(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};ts.create=(t,e)=>new ts({innerType:t,typeName:z.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Y(e)});var qs=class extends X{_parse(e){if(this._getType(e)!==L.nan){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.nan,received:n.parsedType}),H}return{status:"valid",value:e.data}}};qs.create=t=>new qs({typeName:z.ZodNaN,...Y(t)});var R1=Symbol("zod_brand"),ei=class extends X{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},ti=class t extends X{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?H:o.status==="dirty"?(r.dirty(),jn(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?H:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:z.ZodPipeline})}},rs=class extends X{_parse(e){let r=this._def.innerType._parse(e),n=s=>(Wr(s)&&(s.value=Object.freeze(s.value)),s);return ks(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};rs.create=(t,e)=>new rs({innerType:t,typeName:z.ZodReadonly,...Y(e)});function lS(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function mS(t,e={},r){return t?Qr.create().superRefine((n,s)=>{let o=t(n);if(o instanceof Promise)return o.then(i=>{if(!i){let a=lS(e,n),c=a.fatal??r??!0;s.addIssue({code:"custom",...a,fatal:c})}});if(!o){let i=lS(e,n),a=i.fatal??r??!0;s.addIssue({code:"custom",...i,fatal:a})}}):Qr.create()}var T1={object:lt.lazycreate},z;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(z||(z={}));var C1=(t,e={message:`Input not instance of ${t.name}`})=>mS(r=>r instanceof t,e),gS=Kr.create,yS=Bn.create,A1=qs.create,I1=Hn.create,SS=Vn.create,P1=zn.create,O1=Ms.create,N1=Gn.create,k1=Wn.create,D1=Qr.create,M1=Sr.create,L1=Gt.create,F1=Ls.create,U1=_r.create,q1=lt.create,$1=lt.strictCreate,j1=Kn.create,B1=ec.create,H1=Qn.create,V1=tr.create,z1=tc.create,G1=Fs.create,W1=Us.create,K1=rc.create,Q1=Yn.create,Y1=Zn.create,Z1=Jn.create,J1=Xn.create,X1=Yr.create,ek=Ot.create,tk=It.create,rk=rr.create,nk=Ot.createWithPreprocess,sk=ti.create,ok=()=>gS().optional(),ik=()=>yS().optional(),ak=()=>SS().optional(),ck={string:(t=>Kr.create({...t,coerce:!0})),number:(t=>Bn.create({...t,coerce:!0})),boolean:(t=>Vn.create({...t,coerce:!0})),bigint:(t=>Hn.create({...t,coerce:!0})),date:(t=>zn.create({...t,coerce:!0}))};var uk=H;var He=class extends Error{code;statusCode;details;constructor(e,r,n=400,s){super(r),this.code=e,this.statusCode=n,this.details=s,Object.setPrototypeOf(this,new.target.prototype)}},ni=class extends He{constructor(e="Unauthorized"){super("UNAUTHORIZED",e,401)}},$s=class extends He{constructor(e="Forbidden"){super("FORBIDDEN",e,403)}};var Er=class extends He{constructor(e="Validation failed",r){super("VALIDATION_ERROR",e,422,r)}},_S=t=>t instanceof He?t:t instanceof Error?new He("INTERNAL_SERVER_ERROR",t.message||"Internal server error",500):new He("INTERNAL_SERVER_ERROR","Internal server error",500);var nc=(t,e,r,n)=>{let s={level:t,message:e,timestamp:new Date().toISOString(),...r};return JSON.stringify(n!==void 0?{...s,meta:n}:s)},nr={debug(t,e,r){console.debug(nc("debug",t,e,r))},info(t,e,r){console.info(nc("info",t,e,r))},warn(t,e,r){console.warn(nc("warn",t,e,r))},error(t,e,r){console.error(nc("error",t,e,r))}};var Yd=x(hP());var zt=x(Yy(),1),wre=zt.default.Client,rN=zt.default.Pool,bre=zt.default.Connection,vre=zt.default.types,xre=zt.default.Query,Rre=zt.default.DatabaseError,Tre=zt.default.escapeIdentifier,Cre=zt.default.escapeLiteral,Are=zt.default.Result,Ire=zt.default.TypeOverrides,Pre=zt.default.defaults;var O8=process.env.AWS_REGION||process.env.COGNITO_REGION||"ap-southeast-2",N8=new Yd.SecretsManagerClient({region:O8}),Wd=null,Kd=null,Qd=null,k8=()=>{let t=process.env.DB_HOST,e=process.env.DB_USER,r=process.env.DB_PASS,n=process.env.DB_NAME;if(!t||!e||!r||!n)return null;let s=process.env.DB_SSL,o=s?s.toLowerCase()==="true":void 0;return{host:t,port:Number(process.env.DB_PORT||5432),username:e,password:r,dbname:n,ssl:o}},D8=t=>{if(!t)throw new Error("Database secret string is empty");let e=JSON.parse(t);if(!e.host||!e.username||!e.password||!e.dbname)throw new Error("Database secret is missing required properties");return{host:e.host,port:Number(e.port||5432),username:e.username,password:e.password,dbname:e.dbname,ssl:typeof e.ssl=="boolean"?e.ssl:void 0}},M8=async()=>{if(Qd&&Qd.expiresAt>Date.now())return Qd.value;let t=process.env.DB_SECRET_ARN;if(!t)throw new Error("DB_SECRET_ARN environment variable is not set");let e=new Yd.GetSecretValueCommand({SecretId:t}),r=await N8.send(e),n=D8(r.SecretString);return Qd={value:n,expiresAt:Date.now()+Number(process.env.DB_SECRET_CACHE_MS||6e4)},n},L8=async()=>{let t=k8()??await M8(),e=Number(process.env.DB_POOL_MAX||10),r=typeof t.ssl=="boolean"?t.ssl?{rejectUnauthorized:!1}:void 0:process.env.DB_SSL?.toLowerCase()==="true"?{rejectUnauthorized:!1}:void 0,n=new rN({host:t.host,port:t.port,user:t.username,password:t.password,database:t.dbname,max:e,idleTimeoutMillis:Number(process.env.DB_IDLE_TIMEOUT_MS||3e4),connectionTimeoutMillis:Number(process.env.DB_CONNECT_TIMEOUT_MS||5e3),ssl:r});return n.on("error",s=>{nr.error("Unexpected database error",void 0,{err:s})}),n},nN=async()=>(Wd||(Kd||(Kd=L8().then(t=>(Wd=t,t)).finally(()=>{Kd=null})),Wd=await Kd),Wd),Vr=async(t,e)=>{let r=await nN();return typeof t=="string"?r.query(t,e):r.query(t)},sN=async t=>{let r=await(await nN()).connect();try{await r.query("BEGIN");let n=await t(r);return await r.query("COMMIT"),n}catch(n){throw await r.query("ROLLBACK"),n}finally{r.release()}};var oN=t=>({userId:t.user_id,cognitoSub:t.cognito_sub,email:t.email,displayName:t.display_name,teamId:t.team_id}),Zd=class{async findByCognitoSub(e){let r=await Vr(`
      SELECT user_id, cognito_sub, email, display_name, team_id
      FROM users
      WHERE cognito_sub = $1
      LIMIT 1
      `,[e]);return r.rowCount===0?null:oN(r.rows[0])}async upsertFromClaims(e){let r=await Vr(`
      INSERT INTO users (cognito_sub, email, display_name, team_id)
      VALUES ($1, $2, $3, $4)
      ON CONFLICT (cognito_sub) DO UPDATE
      SET
        email = COALESCE(EXCLUDED.email, users.email),
        display_name = COALESCE(EXCLUDED.display_name, users.display_name),
        team_id = COALESCE(EXCLUDED.team_id, users.team_id),
        updated_at = CURRENT_TIMESTAMP
      RETURNING user_id, cognito_sub, email, display_name, team_id
      `,[e.cognitoSub,e.email??null,e.displayName??null,e.teamId??null]);return oN(r.rows[0])}};var F8=new Zd,U8=t=>{let e=t.trim();if(!e)return[];if(e.startsWith("[")&&e.endsWith("]"))try{let r=JSON.parse(e);if(Array.isArray(r))return r.filter(n=>typeof n=="string").map(n=>n.trim()).filter(n=>n.length>0)}catch{}return e.includes(",")?e.split(",").map(r=>r.trim()).filter(r=>r.length>0):[e]},q8=(t,e)=>{if(typeof e=="string")switch(t){case"cognito:groups":case"custom:roles":case"roles":return U8(e);default:return e}return e},$8=t=>{let r=t.requestContext.authorizer?.jwt?.claims;if(!r)throw new ni("Missing JWT claims from authorizer");let n=Object.entries(r).reduce((s,[o,i])=>(s[o]=q8(o,i),s),{});if(!n.sub||typeof n.sub!="string")throw new ni("Token missing subject");return n},iN=async t=>{let e=$8(t);nr.debug("JWT claims received",{sub:e.sub});let r=typeof e.email=="string"?e.email:typeof e["custom:email"]=="string"?e["custom:email"]:null,n=[],s=b=>{if(b){if(Array.isArray(b)){b.filter(T=>typeof T=="string"&&T.trim().length>0).forEach(T=>n.push(T.trim()));return}typeof b=="string"&&b.trim().length>0&&n.push(b.trim())}};s(e["cognito:groups"]),s(e["custom:roles"]),s(e.roles);let o=Array.from(new Set(n.map(b=>b.toUpperCase()).map(b=>b==="ADMIN"?"ADMIN":"EMPLOYEE")));o.length===0&&o.push("EMPLOYEE");let i=typeof e["custom:display_name"]=="string"&&e["custom:display_name"]||typeof e.name=="string"&&e.name||typeof e.preferred_username=="string"&&e.preferred_username||typeof e["cognito:username"]=="string"&&e["cognito:username"]||r||e.sub,a=e["custom:team_id"]??e.team_id,c=typeof a=="string"?Number(a):typeof a=="number"?a:Number.NaN,u=Number.isFinite(c)?Number(c):null,l=await F8.upsertFromClaims({cognitoSub:e.sub,email:r,displayName:i,teamId:u??void 0}),p=l.teamId??u??null,h=l.email??r??void 0,m=l.displayName??i??h,y={userId:l.userId,email:h??e.sub,displayName:m,teamId:p,roles:o,sub:e.sub};return nr.debug("User roles resolved",{userId:y.userId,roles:y.roles}),y},aN=(t,e)=>{if(!(Array.isArray(e)?e:[e]).some(s=>t.roles.includes(s)))throw new $s("User does not have sufficient privileges")};var Jd=(process.env.ALLOWED_ORIGINS||"").split(",").map(t=>t.trim()).filter(t=>t.length>0),cN={"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Authorization,Content-Type,Idempotency-Key,X-Amz-Date,X-Api-Key,X-Amz-Security-Token","Access-Control-Allow-Methods":"GET,POST,PATCH,OPTIONS"},uN=t=>t?Jd.length===0||Jd.includes(t)?t:Jd[0]:Jd[0]||"*",Xd=(t,e,r,n)=>({statusCode:t,headers:{...cN,"Access-Control-Allow-Origin":uN(r),...n},body:JSON.stringify(e)}),lN=(t,e,r,n)=>({statusCode:t,headers:{...cN,"Access-Control-Allow-Origin":uN(r),...n},body:JSON.stringify(e)});var j8=t=>t.headers?.origin||t.headers?.Origin,dN=(t,e={requireAuth:!0})=>async(r,n)=>{let s=j8(r),o=null;try{e.requireAuth!==!1&&(o=await iN(r),e.allowedRoles&&aN(o,e.allowedRoles));let i=await t({event:r,context:n,user:o});return i&&typeof i=="object"&&"statusCode"in i?i:Xd(200,i,s)}catch(i){let a=_S(i);return nr.error("Handler failed",{requestId:n.awsRequestId,userId:o?.userId},{error:i}),lN(a.statusCode,{code:a.code,message:a.message,details:a.details,requestId:n.awsRequestId},s)}};var B8=(t,e)=>{try{return t.parse(e)}catch(r){throw r instanceof Ze?new Er("Validation failed",{issues:r.issues}):r}},fN=(t,e)=>{if(!e)throw new Er("Request body is required");let r;try{r=JSON.parse(e)}catch{throw new Er("Invalid JSON body")}return B8(t,r)};var pN=Number(process.env.MAX_PAGE_SIZE||100),hN=t=>{let e=t.page?Number(t.page):1,r=t.size?Number(t.size):25,n=t.sort??"created_at,desc";if(!Number.isFinite(e)||e<1)throw new Er("`page` must be a positive integer");if(!Number.isFinite(r)||r<1||r>pN)throw new Er(`\`size\` must be between 1 and ${pN}`);return{page:e,size:r,sort:n}},mN=(t,e,r)=>({items:t,page:e.page??1,size:e.size??t.length,total:r}),gN=(t,e,r="created_at,desc")=>{let n=t??r,[s,o]=n.split(","),i=e.includes(s)?s:e[0],a=o?.toUpperCase()==="ASC"?"ASC":"DESC";return{field:i,direction:a}};var H8=["clock_in","clock_out","created_at"],Ya=t=>({logId:t.log_id,userId:t.user_id,userName:t.user_name,userEmail:t.user_email,userTeamId:t.user_team_id,clockIn:t.clock_in,clockOut:t.clock_out,durationMinutes:t.duration_minutes,latitude:t.latitude,longitude:t.longitude,source:t.source,createdAt:t.created_at}),ef=class{async getLogs(e){let r=hN({page:e.page?.toString(),size:e.size?.toString(),sort:e.sort}),{field:n,direction:s}=gN(r.sort,H8,"clock_in,desc"),o=(r.page-1)*r.size,i=[],a=1,c=`
      FROM attendance_logs al
      WHERE 1=1
    `;e.userId!==void 0&&e.userId!==null&&(c+=` AND al.user_id = $${a++}`,i.push(e.userId)),e.from&&(c+=` AND al.clock_in >= $${a++}`,i.push(e.from)),e.to&&(c+=` AND (al.clock_out <= $${a++} OR al.clock_out IS NULL)`,i.push(e.to));let u=`
      SELECT
        al.log_id,
        al.user_id,
        al.user_name,
        al.user_email,
        al.user_team_id,
        al.clock_in,
        al.clock_out,
        al.duration_minutes,
        al.latitude,
        al.longitude,
        al.source,
        al.created_at
      ${c}
      ORDER BY al.${n} ${s}
      LIMIT $${a++} OFFSET $${a++}
    `;i.push(r.size,o);let[l,p]=await Promise.all([Vr(u,i),Vr(`SELECT COUNT(*) ${c}`,i.slice(0,-2))]),h=Number(p.rows[0]?.count??0);return mN(l.rows.map(Ya),r,h)}async getOpenLog(e){let r=await Vr(`
      SELECT
        log_id,
        user_id,
        user_name,
        user_email,
        user_team_id,
        clock_in,
        clock_out,
        duration_minutes,
        latitude,
        longitude,
        source,
        created_at
      FROM attendance_logs
      WHERE user_id = $1 AND clock_out IS NULL
      ORDER BY clock_in DESC
      LIMIT 1
      `,[e]);return r.rowCount===0?null:Ya(r.rows[0])}async insertClockIn(e){let r=await Vr(`
      INSERT INTO attendance_logs (user_id, user_name, user_email, user_team_id, clock_in, latitude, longitude, source)
      VALUES ($1, $2, $3, $4, $5, $6, $7, $8)
      RETURNING
        log_id,
        user_id,
        user_name,
        user_email,
        user_team_id,
        clock_in,
        clock_out,
        duration_minutes,
        latitude,
        longitude,
        source,
        created_at
      `,[e.userId,e.userName??null,e.userEmail??null,e.userTeamId,e.clockIn,e.latitude??null,e.longitude??null,e.source??null]);return Ya(r.rows[0])}async updateClockOut(e){let r=await Vr(`
      UPDATE attendance_logs
      SET clock_out = $1,
          duration_minutes = $2,
          updated_at = CURRENT_TIMESTAMP
      WHERE log_id = $3 AND user_id = $4
      RETURNING
        log_id,
        user_id,
        user_name,
        user_email,
        user_team_id,
        clock_in,
        clock_out,
        duration_minutes,
        latitude,
        longitude,
        source,
        created_at
      `,[e.clockOut,e.durationMinutes,e.logId,e.userId]);if(r.rowCount===0)throw new Error("Attendance log not found");return Ya(r.rows[0])}async closeOpenSessionWithTransaction(e,r){return sN(async n=>{let s=await n.query(`
        SELECT
          log_id,
          user_id,
          user_name,
          user_email,
          user_team_id,
          clock_in,
          clock_out,
          duration_minutes,
          latitude,
          longitude,
          source,
          created_at
        FROM attendance_logs
        WHERE user_id = $1 AND clock_out IS NULL
        ORDER BY clock_in DESC
        LIMIT 1
        FOR UPDATE
        `,[e]);if(s.rowCount===0)throw new Error("No open attendance session found");let o=s.rows[0],i=await n.query(`
        UPDATE attendance_logs
        SET clock_out = $1,
            duration_minutes = $2,
            updated_at = CURRENT_TIMESTAMP
        WHERE log_id = $3
        RETURNING
          log_id,
          user_id,
          user_name,
          user_email,
          user_team_id,
          clock_in,
          clock_out,
          duration_minutes,
          latitude,
          longitude,
          source,
          created_at
        `,[r.clockOut,r.durationMinutes,o.log_id]);return Ya(i.rows[0])})}};var yN=t=>{let e=new Date(t);if(Number.isNaN(e.getTime()))throw new Error(`Invalid date: ${t}`);return e};var eS=(t,e)=>{let r=yN(t),n=yN(e);if(n<r)throw new Error("Clock-out must be after clock-in");return Math.round((n.getTime()-r.getTime())/6e4)},SN=(t,e,r,n,s)=>{let i=t*Math.PI/180,a=r*Math.PI/180,c=(r-t)*Math.PI/180,u=(n-e)*Math.PI/180,l=Math.sin(c/2)*Math.sin(c/2)+Math.cos(i)*Math.cos(a)*Math.sin(u/2)*Math.sin(u/2);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))<=s};var V8=()=>process.env.GEO_VALIDATION_ENABLED?.toLowerCase()==="true",tf=class{constructor(e=new ef){this.repository=e}async listLogs(e,r){let n={...r};return e.roles.includes("ADMIN")?n.userId=r.userId??null:n.userId=e.userId,this.repository.getLogs(n)}async clockIn(e,r){let n=await this.repository.getOpenLog(e.userId);if(n)throw new He("CLOCK_ALREADY_STARTED","You have an open attendance session",409,{logId:n.logId});let s=r.timestamp?new Date(r.timestamp).toISOString():new Date().toISOString();if(Number.isNaN(new Date(s).getTime()))throw new He("INVALID_TIMESTAMP","Clock-in timestamp is invalid",400);if(V8()){let i=r.latitude,a=r.longitude;if(i===void 0||a===void 0)throw new He("GEO_REQUIRED","Latitude and longitude are required for geo validation",400);let c=Number(process.env.GEO_CENTER_LAT),u=Number(process.env.GEO_CENTER_LONG),l=Number(process.env.GEO_RADIUS_METERS||150);if(Number.isNaN(c)||Number.isNaN(u)||!SN(i,a,c,u,l))throw new He("GEO_OUT_OF_RANGE","You are outside the allowed area for clock-in",403)}let o=await this.repository.insertClockIn({userId:e.userId,userEmail:e.email,userName:e.displayName??e.email,userTeamId:e.teamId??null,clockIn:s,latitude:r.latitude,longitude:r.longitude,source:r.source??"mobile"});return nr.info("Attendance clock-in recorded",{userId:e.userId,logId:o.logId}),o}async clockOut(e,r){let n=await this.repository.getOpenLog(e.userId);if(!n)throw new He("NO_OPEN_SESSION","No open attendance session to clock out of",409);let s=r.timestamp?new Date(r.timestamp).toISOString():new Date().toISOString();if(Number.isNaN(new Date(s).getTime()))throw new He("INVALID_TIMESTAMP","Clock-out timestamp is invalid",400);let o=eS(n.clockIn,s);if(o<0)throw new He("NEGATIVE_DURATION","Clock-out cannot be before clock-in",400);let i=await this.repository.updateClockOut({logId:n.logId,userId:e.userId,clockOut:s,durationMinutes:o});return nr.info("Attendance clock-out recorded",{userId:e.userId,logId:i.logId,duration:o}),i}async forceClockOut(e,r,n){if(!e.roles.includes("ADMIN"))throw new $s("Only administrators can force clock-out");let s=n.timestamp?new Date(n.timestamp).toISOString():new Date().toISOString(),o=await(async()=>{let i=await this.repository.getOpenLog(r);if(!i)throw new He("NO_OPEN_SESSION","No open attendance session found",404);return eS(i.clockIn,s)})();return this.repository.closeOpenSessionWithTransaction(r,{clockOut:s,durationMinutes:o})}};var z8=new tf,G8=ri.object({timestamp:ri.string().optional()}),W8=dN(async({event:t,user:e})=>{if(!e)throw new Error("User context missing");let r=t.headers?.origin||t.headers?.Origin,n=fN(G8,t.body??"{}"),s=await z8.clockOut(e,{timestamp:n.timestamp,idempotencyKey:t.headers?.["idempotency-key"]||t.headers?.["Idempotency-Key"]});return Xd(200,s,r)});0&&(module.exports={handler});
