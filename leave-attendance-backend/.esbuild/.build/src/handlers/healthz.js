"use strict";var hO=Object.create;var Vi=Object.defineProperty;var mO=Object.getOwnPropertyDescriptor;var gO=Object.getOwnPropertyNames;var yO=Object.getPrototypeOf,SO=Object.prototype.hasOwnProperty;var _=(e,t)=>()=>(e&&(t=e(e=0)),t);var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ye=(e,t)=>{for(var r in t)Vi(e,r,{get:t[r],enumerable:!0})},Gg=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of gO(t))!SO.call(e,s)&&s!==r&&Vi(e,s,{get:()=>t[s],enumerable:!(n=mO(t,s))||n.enumerable});return e};var T=(e,t,r)=>(r=e!=null?hO(yO(e)):{},Gg(t||!e||!e.__esModule?Vi(r,"default",{value:e,enumerable:!0}):r,e)),ee=e=>Gg(Vi({},"__esModule",{value:!0}),e);var Er=R(ce=>{"use strict";ce.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ce.HttpAuthLocation||(ce.HttpAuthLocation={}));ce.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ce.HttpApiKeyAuthLocation||(ce.HttpApiKeyAuthLocation={}));ce.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(ce.EndpointURLScheme||(ce.EndpointURLScheme={}));ce.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(ce.AlgorithmId||(ce.AlgorithmId={}));var EO=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>ce.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>ce.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},wO=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},_O=e=>EO(e),bO=e=>wO(e);ce.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(ce.FieldPosition||(ce.FieldPosition={}));var RO="__smithy_context";ce.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(ce.IniSectionType||(ce.IniSectionType={}));ce.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ce.RequestHandlerProtocol||(ce.RequestHandlerProtocol={}));ce.SMITHY_CONTEXT_KEY=RO;ce.getDefaultClientConfiguration=_O;ce.resolveDefaultRuntimeConfig=bO});var ue=R(wr=>{"use strict";var TO=Er(),xO=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),CO=e=>({httpHandler:e.httpHandler()}),Wl=class{name;kind;values;constructor({name:t,kind:r=TO.FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},Kl=class{entries={};encoding;constructor({fields:t=[],encoding:r="utf-8"}){t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},Ql=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=vO(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function vO(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Yl=class{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function AO(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}wr.Field=Wl;wr.Fields=Kl;wr.HttpRequest=Ql;wr.HttpResponse=Yl;wr.getHttpHandlerExtensionConfiguration=xO;wr.isValidHostname=AO;wr.resolveHttpHandlerRuntimeConfig=CO});var Zs=R(Js=>{"use strict";var PO=ue();function IO(e){return e}var Kg=e=>t=>async r=>{if(!PO.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return t(r)},Qg={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},OO=e=>({applyToStack:t=>{t.add(Kg(e),Qg)}});Js.getHostHeaderPlugin=OO;Js.hostHeaderMiddleware=Kg;Js.hostHeaderMiddlewareOptions=Qg;Js.resolveHostHeaderConfig=IO});var eo=R(Ki=>{"use strict";var Yg=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,f=c??t.inputFilterSensitiveLog,p=u??t.outputFilterSensitiveLog,{$metadata:h,...m}=n.output;return i?.info?.({clientName:s,commandName:o,input:f(r.input),output:p(m),metadata:h}),n}catch(n){let{clientName:s,commandName:o,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,u=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:s,commandName:o,input:u(r.input),error:n,metadata:n.$metadata}),n}},Xg={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},NO=e=>({applyToStack:t=>{t.add(Yg(),Xg)}});Ki.getLoggerPlugin=NO;Ki.loggerMiddleware=Yg;Ki.loggerMiddlewareOptions=Xg});var Zg={};Ye(Zg,{InvokeStore:()=>MO});var Jg,Xl,DO,Jl,Qi,MO,ey=_(()=>{Jg=require("async_hooks"),Xl=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";Xl||(globalThis.awslambda=globalThis.awslambda||{});DO={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol("_AWS_LAMBDA_TENANT_ID")},Jl=class{static storage=new Jg.AsyncLocalStorage;static PROTECTED_KEYS=DO;static run(t,r){return this.storage.run({...t},r)}static getContext(){return this.storage.getStore()}static get(t){return this.storage.getStore()?.[t]}static set(t,r){if(this.isProtectedKey(t))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[t]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static getTenantId(){return this.get(this.PROTECTED_KEYS.TENANT_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(t){return t===this.PROTECTED_KEYS.REQUEST_ID||t===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};!Xl&&globalThis.awslambda?.InvokeStore?Qi=globalThis.awslambda.InvokeStore:(Qi=Jl,!Xl&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=Qi));MO=Qi});var ty=R(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.recursionDetectionMiddleware=void 0;var kO=(ey(),ee(Zg)),LO=ue(),Zl="X-Amzn-Trace-Id",FO="AWS_LAMBDA_FUNCTION_NAME",qO="_X_AMZN_TRACE_ID",UO=()=>e=>async t=>{let{request:r}=t;if(!LO.HttpRequest.isInstance(r))return e(t);let n=Object.keys(r.headers??{}).find(u=>u.toLowerCase()===Zl.toLowerCase())??Zl;if(r.headers.hasOwnProperty(n))return e(t);let s=process.env[FO],o=process.env[qO],a=kO.InvokeStore.getXRayTraceId()??o,c=u=>typeof u=="string"&&u.length>0;return c(s)&&c(a)&&(r.headers[Zl]=a),e({...t,request:r})};Yi.recursionDetectionMiddleware=UO});var to=R(Xi=>{"use strict";var ed=ty(),$O={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},BO=e=>({applyToStack:t=>{t.add(ed.recursionDetectionMiddleware(),$O)}});Xi.getRecursionDetectionPlugin=BO;Object.keys(ed).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xi,e)&&Object.defineProperty(Xi,e,{enumerable:!0,get:function(){return ed[e]}})})});var td,HO,ry=_(()=>{td=T(Er()),HO=e=>e[td.SMITHY_CONTEXT_KEY]||(e[td.SMITHY_CONTEXT_KEY]={})});var Xe=R(rd=>{"use strict";var ny=Er(),jO=e=>e[ny.SMITHY_CONTEXT_KEY]||(e[ny.SMITHY_CONTEXT_KEY]={}),zO=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};rd.getSmithyContext=jO;rd.normalizeProvider=zO});var sy,oy=_(()=>{sy=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let s of e)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of e)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function VO(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var iy,ro,Ji=_(()=>{iy=T(Xe());oy();ro=(e,t)=>(r,n)=>async s=>{let o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,s.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=sy(o,i),c=VO(e.httpAuthSchemes),u=(0,iy.getSmithyContext)(n),f=[];for(let p of a){let h=c.get(p.schemeId);if(!h){f.push(`HttpAuthScheme \`${p.schemeId}\` was not enabled for this service.`);continue}let m=h.identityProvider(await t.identityProviderConfigProvider(e));if(!m){f.push(`HttpAuthScheme \`${p.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:y={},signingProperties:b={}}=p.propertiesExtractor?.(e,n)||{};p.identityProperties=Object.assign(p.identityProperties||{},y),p.signingProperties=Object.assign(p.signingProperties||{},b),u.selectedHttpAuthScheme={httpAuthOption:p,identity:await m(p.identityProperties),signer:h.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(f.join(`
`));return r(s)}});var ay,no,cy=_(()=>{Ji();ay={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},no=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(ro(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),ay)}})});var dn=R($n=>{"use strict";var GO=ue(),uy=(e,t)=>(r,n)=>async s=>{let{response:o}=await r(s);try{let i=await t(o,e);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(GO.HttpResponse.isInstance(o)){let{headers:c={}}=o,u=Object.entries(c);i.$metadata={httpStatusCode:o.statusCode,requestId:nd(/^x-[\w-]+-request-?id$/,u),extendedRequestId:nd(/^x-[\w-]+-id-2$/,u),cfId:nd(/^x-[\w-]+-cf-id$/,u)}}}catch{}}throw i}},nd=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],ly=(e,t)=>(r,n)=>async s=>{let o=e,i=n.endpointV2?.url&&o.urlParser?async()=>o.urlParser(n.endpointV2.url):o.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(s.input,{...e,endpoint:i});return r({...s,request:a})},dy={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},fy={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function WO(e,t,r){return{applyToStack:n=>{n.add(uy(e,r),dy),n.add(ly(e,t),fy)}}}$n.deserializerMiddleware=uy;$n.deserializerMiddlewareOption=dy;$n.getSerdePlugin=WO;$n.serializerMiddleware=ly;$n.serializerMiddlewareOption=fy});var py,hy,KO,my=_(()=>{py=T(dn());Ji();hy={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:py.serializerMiddlewareOption.name},KO=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(ro(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),hy)}})});var gy=_(()=>{Ji();cy();my()});var yy,Sy,QO,YO,sd,od=_(()=>{yy=T(ue()),Sy=T(Xe()),QO=e=>t=>{throw t},YO=(e,t)=>{},sd=e=>(t,r)=>async n=>{if(!yy.HttpRequest.isInstance(n.request))return t(n);let o=(0,Sy.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=o,u=await t({...n,request:await c.sign(n.request,a,i)}).catch((c.errorHandler||QO)(i));return(c.successHandler||YO)(u.response,i),u}});var Ey,so,wy=_(()=>{od();Ey={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},so=e=>({applyToStack:t=>{t.addRelativeTo(sd(e),Ey)}})});var _y=_(()=>{od();wy()});var _r,by=_(()=>{_r=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function Ry(e,t,r,n,s){return async function*(i,a,...c){let u=a,f=i.startingToken??u[r],p=!0,h;for(;p;){if(u[r]=f,s&&(u[s]=u[s]??i.pageSize),i.client instanceof e)h=await XO(t,i.client,a,i.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield h;let m=f;f=JO(h,n),p=!!(f&&(!i.stopOnSameToken||f!==m))}return void 0}}var XO,JO,Ty=_(()=>{XO=async(e,t,r,n=o=>o,...s)=>{let o=new e(r);return o=n(o)??o,await t.send(o,...s)};JO=(e,t)=>{let r=e,n=t.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var id=R(xy=>{"use strict";var ZO=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";xy.isArrayBuffer=ZO});var Bn=R(cd=>{"use strict";var eN=id(),ad=require("buffer"),tN=(e,t=0,r=e.byteLength-t)=>{if(!eN.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return ad.Buffer.from(e,t,r)},rN=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?ad.Buffer.from(e,t):ad.Buffer.from(e)};cd.fromArrayBuffer=tN;cd.fromString=rN});var Cy=R(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.fromBase64=void 0;var nN=Bn(),sN=/^[A-Za-z0-9+/]*={0,2}$/,oN=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!sN.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,nN.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};Zi.fromBase64=oN});var De=R(ea=>{"use strict";var vy=Bn(),Ay=e=>{let t=vy.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},iN=e=>typeof e=="string"?Ay(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),aN=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return vy.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};ea.fromUtf8=Ay;ea.toUint8Array=iN;ea.toUtf8=aN});var Py=R(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.toBase64=void 0;var cN=Bn(),uN=De(),lN=e=>{let t;if(typeof e=="string"?t=(0,uN.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,cN.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};ta.toBase64=lN});var Me=R(oo=>{"use strict";var Iy=Cy(),Oy=Py();Object.keys(Iy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(oo,e)&&Object.defineProperty(oo,e,{enumerable:!0,get:function(){return Iy[e]}})});Object.keys(Oy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(oo,e)&&Object.defineProperty(oo,e,{enumerable:!0,get:function(){return Oy[e]}})})});var ld=R(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.ChecksumStream=void 0;var dN=Me(),fN=require("stream"),ud=class extends fN.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:t,checksum:r,source:n,checksumSourceLocation:s,base64Encoder:o}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=o??dN.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=s,this.source.pipe(this)}_read(t){}_write(t,r,n){try{this.checksum.update(t),this.push(t)}catch(s){return n(s)}return n()}async _final(t){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};ra.ChecksumStream=ud});var br=R(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.isBlob=Hn.isReadableStream=void 0;var pN=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);Hn.isReadableStream=pN;var hN=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);Hn.isBlob=hN});var Ny=R(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.ChecksumStream=void 0;var mN=typeof ReadableStream=="function"?ReadableStream:function(){},dd=class extends mN{};na.ChecksumStream=dd});var Dy=R(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.createChecksumStream=void 0;var gN=Me(),yN=br(),SN=Ny(),EN=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,yN.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let o=s??gN.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(c,u){t.update(c),u.enqueue(c)},async flush(c){let u=await t.digest(),f=o(u);if(e!==f){let p=new Error(`Checksum mismatch: expected "${e}" but received "${f}" in response header "${n}".`);c.error(p)}else c.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,SN.ChecksumStream.prototype),a};sa.createChecksumStream=EN});var My=R(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.createChecksumStream=RN;var wN=br(),_N=ld(),bN=Dy();function RN(e){return typeof ReadableStream=="function"&&(0,wN.isReadableStream)(e.source)?(0,bN.createChecksumStream)(e):new _N.ChecksumStream(e)}});var hd=R(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.ByteArrayCollector=void 0;var pd=class{allocByteArray;byteLength=0;byteArrays=[];constructor(t){this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let t=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];t.set(s,r),r+=s.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};oa.ByteArrayCollector=pd});var qy=R(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.createBufferedReadable=void 0;Kt.createBufferedReadableStream=ky;Kt.merge=Ly;Kt.flush=ia;Kt.sizeOf=jn;Kt.modeOf=Fy;var TN=hd();function ky(e,t,r){let n=e.getReader(),s=!1,o=0,i=["",new TN.ByteArrayCollector(u=>new Uint8Array(u))],a=-1,c=async u=>{let{value:f,done:p}=await n.read(),h=f;if(p){if(a!==-1){let m=ia(i,a);jn(m)>0&&u.enqueue(m)}u.close()}else{let m=Fy(h,!1);if(a!==m&&(a>=0&&u.enqueue(ia(i,a)),a=m),a===-1){u.enqueue(h);return}let y=jn(h);o+=y;let b=jn(i[a]);if(y>=t&&b===0)u.enqueue(h);else{let C=Ly(i,a,h);!s&&o>t*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${y} is below threshold of ${t}, automatically buffering.`)),C>=t?u.enqueue(ia(i,a)):await c(u)}}};return new ReadableStream({pull:c})}Kt.createBufferedReadable=ky;function Ly(e,t,r){switch(t){case 0:return e[0]+=r,jn(e[0]);case 1:case 2:return e[t].push(r),jn(e[t])}}function ia(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function jn(e){return e?.byteLength??e?.length??0}function Fy(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var $y=R(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.createBufferedReadable=vN;var xN=require("node:stream"),Uy=hd(),Qt=qy(),CN=br();function vN(e,t,r){if((0,CN.isReadableStream)(e))return(0,Qt.createBufferedReadableStream)(e,t,r);let n=new xN.Readable({read(){}}),s=!1,o=0,i=["",new Uy.ByteArrayCollector(c=>new Uint8Array(c)),new Uy.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return e.on("data",c=>{let u=(0,Qt.modeOf)(c,!0);if(a!==u&&(a>=0&&n.push((0,Qt.flush)(i,a)),a=u),a===-1){n.push(c);return}let f=(0,Qt.sizeOf)(c);o+=f;let p=(0,Qt.sizeOf)(i[a]);if(f>=t&&p===0)n.push(c);else{let h=(0,Qt.merge)(i,a,c);!s&&o>t*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${f} is below threshold of ${t}, automatically buffering.`)),h>=t&&n.push((0,Qt.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let c=(0,Qt.flush)(i,a);(0,Qt.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var By=R(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.getAwsChunkedEncodingStream=void 0;var AN=require("stream"),PN=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:o,streamHasher:i}=t,a=r!==void 0&&s!==void 0&&o!==void 0&&i!==void 0,c=a?i(s,e):void 0,u=new AN.Readable({read:()=>{}});return e.on("data",f=>{let p=n(f)||0;u.push(`${p.toString(16)}\r
`),u.push(f),u.push(`\r
`)}),e.on("end",async()=>{if(u.push(`0\r
`),a){let f=r(await c);u.push(`${o}:${f}\r
`),u.push(`\r
`)}u.push(null)}),u};aa.getAwsChunkedEncodingStream=PN});var Hy=R(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.headStream=IN;async function IN(e,t){let r=0,n=[],s=e.getReader(),o=!1;for(;!o;){let{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=u?.byteLength??0),r>=t)break;o=c}s.releaseLock();let i=new Uint8Array(Math.min(t,r)),a=0;for(let c of n){if(c.byteLength>i.byteLength-a){i.set(c.subarray(0,i.byteLength-a),a);break}else i.set(c,a);a+=c.length}return i}});var jy=R(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.headStream=void 0;var ON=require("stream"),NN=Hy(),DN=br(),MN=(e,t)=>(0,DN.isReadableStream)(e)?(0,NN.headStream)(e,t):new Promise((r,n)=>{let s=new yd;s.limit=t,e.pipe(s),e.on("error",o=>{s.end(),n(o)}),s.on("error",n),s.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})});ca.headStream=MN;var yd=class extends ON.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(t,r,n){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-s),this.emit("finish")}n()}}});var Ed=R(Sd=>{"use strict";var zy=e=>encodeURIComponent(e).replace(/[!'()*]/g,kN),kN=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,LN=e=>e.split("/").map(zy).join("/");Sd.escapeUri=zy;Sd.escapeUriPath=LN});var _d=R(Vy=>{"use strict";var wd=Ed();function FN(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=wd.escapeUri(r),Array.isArray(n))for(let s=0,o=n.length;s<o;s++)t.push(`${r}=${wd.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${wd.escapeUri(n)}`),t.push(s)}}return t.join("&")}Vy.buildQueryString=FN});var fn=R(io=>{"use strict";var Qy=ue(),Yy=_d(),ua=require("http"),la=require("https"),Xy=require("stream"),bd=require("http2"),qN=["ECONNRESET","EPIPE","ETIMEDOUT"],Jy=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},Ve={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},Gy=1e3,UN=(e,t,r=0)=>{if(!r)return-1;let n=s=>{let o=Ve.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),i=a=>{a?.connecting?a.on("connect",()=>{Ve.clearTimeout(o)}):Ve.clearTimeout(o)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(n(0),0):Ve.setTimeout(n.bind(null,Gy),Gy)},$N=(e,t,r=0,n,s)=>r?Ve.setTimeout(()=>{let o=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let i=Object.assign(new Error(o),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(i),t(i)}else o+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(o)},r):-1,BN=3e3,HN=(e,{keepAlive:t,keepAliveMsecs:r},n=BN)=>{if(t!==!0)return-1;let s=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",o=>{o.setKeepAlive(t,r||0)})};return n===0?(s(),0):Ve.setTimeout(s,n)},Wy=3e3,jN=(e,t,r=0)=>{let n=s=>{let o=r-s,i=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(o,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(o,i)};return 0<r&&r<6e3?(n(0),0):Ve.setTimeout(n.bind(null,r===0?0:Wy),Wy)},Ky=6e3;async function Zy(e,t,r=Ky,n=!1){let s=t.headers??{},o=s.Expect||s.expect,i=-1,a=!0;!n&&o==="100-continue"&&(a=await Promise.race([new Promise(c=>{i=Number(Ve.setTimeout(()=>c(!0),Math.max(Ky,r)))}),new Promise(c=>{e.on("continue",()=>{Ve.clearTimeout(i),c(!0)}),e.on("response",()=>{Ve.clearTimeout(i),c(!1)}),e.on("error",()=>{Ve.clearTimeout(i),c(!1)})})])),a&&zN(e,t.body)}function zN(e,t){if(t instanceof Xy.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var VN=0,Rd=class e{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,n=console){let{sockets:s,requests:o,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(s&&o)for(let c in s){let u=s[c]?.length??0,f=o[c]?.length??0;if(u>=i&&f>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${f} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:o,httpAgent:i,httpsAgent:a,throwOnRequestTimeout:c}=t||{},u=!0,f=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:c,httpAgent:i instanceof ua.Agent||typeof i?.destroy=="function"?(this.externalAgent=!0,i):new ua.Agent({keepAlive:u,maxSockets:f,...i}),httpsAgent:a instanceof la.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new la.Agent({keepAlive:u,maxSockets:f,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,o)=>{let i=this.config,a,c=[],u=async K=>{await a,c.forEach(Ve.clearTimeout),s(K)},f=async K=>{await a,c.forEach(Ve.clearTimeout),o(K)};if(r?.aborted){let K=new Error("Request aborted");K.name="AbortError",f(K);return}let p=t.protocol==="https:",h=t.headers??{},m=(h.Expect??h.expect)==="100-continue",y=p?i.httpsAgent:i.httpAgent;m&&!this.externalAgent&&(y=new(p?la.Agent:ua.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(Ve.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(y,this.socketWarningTimestamp,i.logger)},i.socketAcquisitionWarningTimeout??(i.requestTimeout??2e3)+(i.connectionTimeout??1e3)));let b=Yy.buildQueryString(t.query||{}),C;if(t.username!=null||t.password!=null){let K=t.username??"",X=t.password??"";C=`${K}:${X}`}let A=t.path;b&&(A+=`?${b}`),t.fragment&&(A+=`#${t.fragment}`);let O=t.hostname??"";O[0]==="["&&O.endsWith("]")?O=t.hostname.slice(1,-1):O=t.hostname;let k={headers:t.headers,host:O,method:t.method,path:A,port:t.port,agent:y,auth:C},z=(p?la.request:ua.request)(k,K=>{let X=new Qy.HttpResponse({statusCode:K.statusCode||-1,reason:K.statusMessage,headers:Jy(K.headers),body:K});u({response:X})});if(z.on("error",K=>{qN.includes(K.code)?f(Object.assign(K,{name:"TimeoutError"})):f(K)}),r){let K=()=>{z.destroy();let X=new Error("Request aborted");X.name="AbortError",f(X)};if(typeof r.addEventListener=="function"){let X=r;X.addEventListener("abort",K,{once:!0}),z.once("close",()=>X.removeEventListener("abort",K))}else r.onabort=K}let ae=n??i.requestTimeout;c.push(UN(z,f,i.connectionTimeout)),c.push($N(z,f,ae,i.throwOnRequestTimeout,i.logger??console)),c.push(jN(z,f,i.socketTimeout));let _e=k.agent;typeof _e=="object"&&"keepAlive"in _e&&c.push(HN(z,{keepAlive:_e.keepAlive,keepAliveMsecs:_e.keepAliveMsecs})),a=Zy(z,t,ae,this.externalAgent).catch(K=>(c.forEach(Ve.clearTimeout),o(K)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},Td=class{sessions=[];constructor(t){this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},xd=class{constructor(t){if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(t,r){let n=this.getUrlString(t),s=this.sessionCache.get(n);if(s){let c=s.poll();if(c&&!this.config.disableConcurrency)return c}let o=bd.connect(n);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),o.unref();let i=()=>{o.destroy(),this.deleteSession(n,o)};o.on("goaway",i),o.on("error",i),o.on("frameError",i),o.on("close",()=>this.deleteSession(n,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new Td;return a.offerLast(o),this.sessionCache.set(n,a),o}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){let n=this.getUrlString(t);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},Cd=class e{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new xd({});static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(s=>{r(s||{})}).catch(n):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:o}=this.config,i=n??s;return new Promise((a,c)=>{let u=!1,f,p=async oe=>{await f,a(oe)},h=async oe=>{await f,c(oe)};if(r?.aborted){u=!0;let oe=new Error("Request aborted");oe.name="AbortError",h(oe);return}let{hostname:m,method:y,port:b,protocol:C,query:A}=t,O="";if(t.username!=null||t.password!=null){let oe=t.username??"",be=t.password??"";O=`${oe}:${be}@`}let k=`${C}//${O}${m}${b?`:${b}`:""}`,U={destination:new URL(k)},z=this.connectionManager.lease(U,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:o||!1}),ae=oe=>{o&&this.destroySession(z),u=!0,h(oe)},_e=Yy.buildQueryString(A||{}),K=t.path;_e&&(K+=`?${_e}`),t.fragment&&(K+=`#${t.fragment}`);let X=z.request({...t.headers,[bd.constants.HTTP2_HEADER_PATH]:K,[bd.constants.HTTP2_HEADER_METHOD]:y});if(z.ref(),X.on("response",oe=>{let be=new Qy.HttpResponse({statusCode:oe[":status"]||-1,headers:Jy(oe),body:X});u=!0,p({response:be}),o&&(z.close(),this.connectionManager.deleteSession(k,z))}),i&&X.setTimeout(i,()=>{X.close();let oe=new Error(`Stream timed out because of no activity for ${i} ms`);oe.name="TimeoutError",ae(oe)}),r){let oe=()=>{X.close();let be=new Error("Request aborted");be.name="AbortError",ae(be)};if(typeof r.addEventListener=="function"){let be=r;be.addEventListener("abort",oe,{once:!0}),X.once("close",()=>be.removeEventListener("abort",oe))}else r.onabort=oe}X.on("frameError",(oe,be,Un)=>{ae(new Error(`Frame type id ${oe} in stream id ${Un} has failed with code ${be}.`))}),X.on("error",ae),X.on("aborted",()=>{ae(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${X.rstCode}.`))}),X.on("close",()=>{z.unref(),o&&z.destroy(),u||ae(new Error("Unexpected error: http2 request did not get a response"))}),f=Zy(X,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},vd=class extends Xy.Writable{bufferedBytes=[];_write(t,r,n){this.bufferedBytes.push(t),n()}},GN=e=>WN(e)?KN(e):new Promise((t,r)=>{let n=new vd;e.pipe(n),e.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));t(s)})}),WN=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function KN(e){let t=[],r=e.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(t.push(c),s+=c.length),n=a}let o=new Uint8Array(s),i=0;for(let a of t)o.set(a,i),i+=a.length;return o}io.DEFAULT_REQUEST_TIMEOUT=VN;io.NodeHttp2Handler=Cd;io.NodeHttpHandler=Rd;io.streamCollector=GN});var rS=R(fa=>{"use strict";var eS=ue(),QN=_d(),YN=Me();function tS(e,t){return new Request(e,t)}function XN(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var da={supported:void 0},Ad=class e{config;configProvider;static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),da.supported===void 0&&(da.supported=typeof Request<"u"&&"keepalive"in tS("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let O=new Error("Request aborted");return O.name="AbortError",Promise.reject(O)}let a=t.path,c=QN.buildQueryString(t.query||{});c&&(a+=`?${c}`),t.fragment&&(a+=`#${t.fragment}`);let u="";if(t.username!=null||t.password!=null){let O=t.username??"",k=t.password??"";u=`${O}:${k}@`}let{port:f,method:p}=t,h=`${t.protocol}//${u}${t.hostname}${f?`:${f}`:""}${a}`,m=p==="GET"||p==="HEAD"?void 0:t.body,y={body:m,headers:new Headers(t.headers),method:p,credentials:i};this.config?.cache&&(y.cache=this.config.cache),m&&(y.duplex="half"),typeof AbortController<"u"&&(y.signal=r),da.supported&&(y.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(y,this.config.requestInit(t));let b=()=>{},C=tS(h,y),A=[fetch(C).then(O=>{let k=O.headers,U={};for(let ae of k.entries())U[ae[0]]=ae[1];return O.body!=null?{response:new eS.HttpResponse({headers:U,reason:O.statusText,statusCode:O.status,body:O.body})}:O.blob().then(ae=>({response:new eS.HttpResponse({headers:U,reason:O.statusText,statusCode:O.status,body:ae})}))}),XN(s)];return r&&A.push(new Promise((O,k)=>{let U=()=>{let z=new Error("Request aborted");z.name="AbortError",k(z)};if(typeof r.addEventListener=="function"){let z=r;z.addEventListener("abort",U,{once:!0}),b=()=>z.removeEventListener("abort",U)}else r.onabort=U})),Promise.race(A).finally(b)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},JN=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):ZN(e):e1(e);async function ZN(e){let t=await t1(e),r=YN.fromBase64(t);return new Uint8Array(r)}async function e1(e){let t=[],r=e.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(t.push(c),s+=c.length),n=a}let o=new Uint8Array(s),i=0;for(let a of t)o.set(a,i),i+=a.length;return o}function t1(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",o=s.indexOf(","),i=o>-1?o+1:s.length;t(s.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}fa.FetchHttpHandler=Ad;fa.keepAliveSupport=da;fa.streamCollector=JN});var Od=R(Id=>{"use strict";var nS={},Pd={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),nS[e]=t,Pd[t]=e}function r1(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in Pd)t[r/2]=Pd[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function n1(e){let t="";for(let r=0;r<e.byteLength;r++)t+=nS[e[r]];return t}Id.fromHex=r1;Id.toHex=n1});var aS=R(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.sdkStreamMixin=void 0;var s1=rS(),o1=Me(),i1=Od(),a1=De(),sS=br(),oS="The stream has already been transformed.",c1=e=>{if(!iS(e)&&!(0,sS.isReadableStream)(e)){let s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let t=!1,r=async()=>{if(t)throw new Error(oS);return t=!0,await(0,s1.streamCollector)(e)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{let o=await r();if(s==="base64")return(0,o1.toBase64)(o);if(s==="hex")return(0,i1.toHex)(o);if(s===void 0||s==="utf8"||s==="utf-8")return(0,a1.toUtf8)(o);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(oS);if(t=!0,iS(e))return n(e);if((0,sS.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};pa.sdkStreamMixin=c1;var iS=e=>typeof Blob=="function"&&e instanceof Blob});var uS=R(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.sdkStreamMixin=void 0;var u1=fn(),l1=Bn(),Nd=require("stream"),d1=aS(),cS="The stream has already been transformed.",f1=e=>{if(!(e instanceof Nd.Readable))try{return(0,d1.sdkStreamMixin)(e)}catch{let s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let t=!1,r=async()=>{if(t)throw new Error(cS);return t=!0,await(0,u1.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,l1.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(t)throw new Error(cS);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Nd.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,Nd.Readable.toWeb(e)}})};ha.sdkStreamMixin=f1});var lS=R(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});Dd.splitStream=p1;async function p1(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var pS=R(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});Md.splitStream=m1;var dS=require("stream"),h1=lS(),fS=br();async function m1(e){if((0,fS.isReadableStream)(e)||(0,fS.isBlob)(e))return(0,h1.splitStream)(e);let t=new dS.PassThrough,r=new dS.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var ma=R(Ie=>{"use strict";var hS=Me(),mS=De(),gS=ld(),yS=My(),SS=$y(),ES=By(),wS=jy(),_S=uS(),bS=pS(),RS=br(),kd=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?e.mutate(hS.fromBase64(t)):e.mutate(mS.fromUtf8(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return t==="base64"?hS.toBase64(this):mS.toUtf8(this)}};Ie.Uint8ArrayBlobAdapter=kd;Object.keys(gS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,e)&&Object.defineProperty(Ie,e,{enumerable:!0,get:function(){return gS[e]}})});Object.keys(yS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,e)&&Object.defineProperty(Ie,e,{enumerable:!0,get:function(){return yS[e]}})});Object.keys(SS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,e)&&Object.defineProperty(Ie,e,{enumerable:!0,get:function(){return SS[e]}})});Object.keys(ES).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,e)&&Object.defineProperty(Ie,e,{enumerable:!0,get:function(){return ES[e]}})});Object.keys(wS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,e)&&Object.defineProperty(Ie,e,{enumerable:!0,get:function(){return wS[e]}})});Object.keys(_S).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,e)&&Object.defineProperty(Ie,e,{enumerable:!0,get:function(){return _S[e]}})});Object.keys(bS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,e)&&Object.defineProperty(Ie,e,{enumerable:!0,get:function(){return bS[e]}})});Object.keys(RS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Ie,e)&&Object.defineProperty(Ie,e,{enumerable:!0,get:function(){return RS[e]}})})});var ga,Pt,ya=_(()=>{ga=T(ma()),Pt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return ga.Uint8ArrayBlobAdapter.mutate(e);if(!e)return ga.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return ga.Uint8ArrayBlobAdapter.mutate(await r)}});function Lt(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Sa=_(()=>{});var It,Ld=_(()=>{It=e=>typeof e=="function"?e():e});var ao,Ea=_(()=>{ao=(e,t,r,n,s)=>({name:t,namespace:e,traits:r,input:n,output:s})});var TS,xS,CS,Fd,vS=_(()=>{TS=T(ue()),xS=T(Xe());Ea();CS=e=>(t,r)=>async n=>{let{response:s}=await t(n),{operationSchema:o}=(0,xS.getSmithyContext)(r),[,i,a,c,u,f]=o??[];try{let p=await e.protocol.deserializeResponse(ao(i,a,c,u,f),{...e,...r},s);return{response:s,output:p}}catch(p){if(Object.defineProperty(p,"$response",{value:s}),!("$metadata"in p)){let h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{p.message+=`
  `+h}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(h):r.logger?.warn?.(h)}typeof p.$responseBodyText<"u"&&p.$response&&(p.$response.body=p.$responseBodyText);try{if(TS.HttpResponse.isInstance(s)){let{headers:m={}}=s,y=Object.entries(m);p.$metadata={httpStatusCode:s.statusCode,requestId:Fd(/^x-[\w-]+-request-?id$/,y),extendedRequestId:Fd(/^x-[\w-]+-id-2$/,y),cfId:Fd(/^x-[\w-]+-cf-id$/,y)}}}catch{}}throw p}},Fd=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var AS,PS,IS=_(()=>{AS=T(Xe());Ea();PS=e=>(t,r)=>async n=>{let{operationSchema:s}=(0,AS.getSmithyContext)(r),[,o,i,a,c,u]=s??[],f=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,p=await e.protocol.serializeRequest(ao(o,i,a,c,u),n.input,{...e,...r,endpoint:f});return t({...n,request:p})}});function g1(e){return{applyToStack:t=>{t.add(PS(e),NS),t.add(CS(e),OS),e.protocol.setSerdeContext(e)}}}var OS,NS,DS=_(()=>{vS();IS();OS={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},NS={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Re,Rr=_(()=>{Re=class{name;namespace;traits;static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var wa,y1,MS=_(()=>{Rr();wa=class e extends Re{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=e.symbol},y1=(e,t,r,n)=>Re.assign(new wa,{name:t,namespace:e,traits:r,valueSchema:n})});var _a,S1,kS=_(()=>{Rr();_a=class e extends Re{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=e.symbol},S1=(e,t,r,n,s)=>Re.assign(new _a,{name:t,namespace:e,traits:r,keySchema:n,valueSchema:s})});var ba,E1,LS=_(()=>{Rr();ba=class e extends Re{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=e.symbol},E1=(e,t,r,n,s)=>Re.assign(new ba,{name:t,namespace:e,traits:r,input:n,output:s})});var zn,w1,qd=_(()=>{Rr();zn=class e extends Re{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=e.symbol},w1=(e,t,r,n,s)=>Re.assign(new zn,{name:t,namespace:e,traits:r,memberNames:n,memberList:s})});var Ra,_1,FS=_(()=>{Rr();qd();Ra=class e extends zn{static symbol=Symbol.for("@smithy/err");ctor;symbol=e.symbol},_1=(e,t,r,n,s,o)=>Re.assign(new Ra,{name:t,namespace:e,traits:r,memberNames:n,memberList:s,ctor:null})});function Ft(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[n]=1);return t}var Ud=_(()=>{});function co(e,t){if(e instanceof L)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=L;return new r(e,t)}var L,$d,qS,US=_(()=>{Ld();Ud();L=class e{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let n=[],s=t,o=t;for(this._isMemberSchema=!1;$d(s);)n.push(s[1]),s=s[0],o=It(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,Ft(a))}}else this.memberTraits=0;if(o instanceof e){let i=this.memberTraits;Object.assign(this,o),this.memberTraits=Object.assign({},i,o.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??o.memberName;return}if(this.schema=It(o),qS(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(o),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){let r=It(t);if(r instanceof e)return r;if($d(r)){let[n,s]=r;if(n instanceof e)return Object.assign(n.getMergedTraits(),Ft(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(r)}getSchema(){let t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let t=this.getSchema();return t[0]===3||t[0]===-3}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=o=>(o&4)===4||!!o?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return t(r)||t(n)||t(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Ft(this.memberTraits)}getOwnTraits(){return Ft(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=t?15:n[4]??0;return co([s,0],"key")}getValueSchema(){let t=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],o=typeof t=="number"?63&t:t&&typeof t=="object"&&(n||s)?t[3+t[0]]:r?15:void 0;if(o!=null)return co([o,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let n=r[4].indexOf(t),s=r[5][n];return co($d(s)?s:[s,0],t)}if(this.isDocumentSchema())return co([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,n]of this.structIterator())t[r]=n}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],co([t[5][r],0],t[4][r])]}};$d=e=>Array.isArray(e)&&e.length===2,qS=e=>Array.isArray(e)&&e.length>=5});var uo,b1,R1,$S=_(()=>{Rr();uo=class e extends Re{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=e.symbol},b1=(e,t,r,n)=>Re.assign(new uo,{name:t,namespace:e,traits:n,schemaRef:r}),R1=(e,t,r,n)=>Re.assign(new uo,{name:t,namespace:e,traits:r,schemaRef:n})});var T1,BS=_(()=>{T1={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var ve,HS=_(()=>{ve=class e{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,n=new Map){this.namespace=t,this.schemas=r,this.exceptions=n}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);e.for(n.split("#")[0]).schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let n=t,s=e.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(t){let r=t;return e.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,n]=t,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}}});var Bd={};Ye(Bd,{ErrorSchema:()=>Ra,ListSchema:()=>wa,MapSchema:()=>_a,NormalizedSchema:()=>L,OperationSchema:()=>ba,SCHEMA:()=>T1,Schema:()=>Re,SimpleSchema:()=>uo,StructureSchema:()=>zn,TypeRegistry:()=>ve,deref:()=>It,deserializerMiddlewareOption:()=>OS,error:()=>_1,getSchemaSerdePlugin:()=>g1,isStaticSchema:()=>qS,list:()=>y1,map:()=>S1,op:()=>E1,operation:()=>ao,serializerMiddlewareOption:()=>NS,sim:()=>b1,simAdapter:()=>R1,struct:()=>w1,translateTraits:()=>Ft});var pe=_(()=>{Ld();DS();MS();kS();LS();Ea();FS();US();Rr();$S();qd();BS();Ud();HS()});var x1,jS=_(()=>{x1=(e,t,r=n=>n)=>e});var C1,v1,lo,A1,Ta,fo,P1,Hd,jd,zd,Vd,I1,O1,zS,N1,D1,Ca,M1,Gd,k1,Vn,Wd,L1,F1,q1,VS,GS,U1,$1,pn,Kd,xa,po,Qd=_(()=>{C1=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},v1=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&po.warn(xa(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&po.warn(xa(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},lo=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&po.warn(xa(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},A1=Math.ceil(34028234663852886e22),Ta=e=>{let t=lo(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>A1)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},fo=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},P1=fo,Hd=e=>Vd(e,32),jd=e=>Vd(e,16),zd=e=>Vd(e,8),Vd=(e,t)=>{let r=fo(e);if(r!==void 0&&I1(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},I1=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},O1=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},zS=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},N1=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return po.warn(xa(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},D1=e=>{if(e==null)return;let t=zS(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},Ca=e=>lo(typeof e=="string"?Vn(e):e),M1=Ca,Gd=e=>Ta(typeof e=="string"?Vn(e):e),k1=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Vn=e=>{let t=e.match(k1);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Wd=e=>typeof e=="string"?VS(e):lo(e),L1=Wd,F1=Wd,q1=e=>typeof e=="string"?VS(e):Ta(e),VS=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},GS=e=>fo(typeof e=="string"?Vn(e):e),U1=GS,$1=e=>Hd(typeof e=="string"?Vn(e):e),pn=e=>jd(typeof e=="string"?Vn(e):e),Kd=e=>zd(typeof e=="string"?Vn(e):e),xa=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),po={warn:console.warn}});function mo(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),s=e.getUTCDate(),o=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=o<10?`0${o}`:`${o}`,f=i<10?`0${i}`:`${i}`,p=a<10?`0${a}`:`${a}`;return`${B1[n]}, ${c} ${Xd[r]} ${t} ${u}:${f}:${p} GMT`}var B1,Xd,H1,j1,z1,Jd,V1,G1,W1,Zd,ef,ho,K1,Q1,Y1,Yd,X1,J1,Z1,qt,eD,tD,Gn,WS=_(()=>{Qd();B1=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Xd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];H1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),j1=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=H1.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,c,u]=t,f=pn(Gn(n)),p=qt(s,"month",1,12),h=qt(o,"day",1,31);return ho(f,p,h,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})},z1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Jd=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=z1.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,o,i,a,c,u,f]=t,p=pn(Gn(n)),h=qt(s,"month",1,12),m=qt(o,"day",1,31),y=ho(p,h,m,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u});return f.toUpperCase()!="Z"&&y.setTime(y.getTime()-tD(f)),y},V1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),G1=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),W1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Zd=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=V1.exec(e);if(t){let[r,n,s,o,i,a,c,u]=t;return ho(pn(Gn(o)),Yd(s),qt(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u})}if(t=G1.exec(e),t){let[r,n,s,o,i,a,c,u]=t;return Y1(ho(K1(o),Yd(s),qt(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(t=W1.exec(e),t){let[r,n,s,o,i,a,c,u]=t;return ho(pn(Gn(u)),Yd(n),qt(s.trimLeft(),"day",1,31),{hours:o,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},ef=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Ca(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},ho=(e,t,r,n)=>{let s=t-1;return J1(e,s,r),new Date(Date.UTC(e,s,r,qt(n.hours,"hour",0,23),qt(n.minutes,"minute",0,59),qt(n.seconds,"seconds",0,60),eD(n.fractionalMilliseconds)))},K1=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+pn(Gn(e));return r<t?r+100:r},Q1=50*365*24*60*60*1e3,Y1=e=>e.getTime()-new Date().getTime()>Q1?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Yd=e=>{let t=Xd.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},X1=[31,28,31,30,31,30,31,31,30,31,30,31],J1=(e,t,r)=>{let n=X1[t];if(t===1&&Z1(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Xd[t]} in ${e}: ${r}`)},Z1=e=>e%4===0&&(e%100!==0||e%400===0),qt=(e,t,r,n)=>{let s=Kd(Gn(e));if(s<r||s>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return s},eD=e=>e==null?0:Gd("0."+e)*1e3,tD=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),s=Number(e.substring(4,6));return r*(n*60+s)*60*1e3},Gn=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var go={};Ye(go,{__addDisposableResource:()=>SE,__assign:()=>va,__asyncDelegator:()=>lE,__asyncGenerator:()=>uE,__asyncValues:()=>dE,__await:()=>Wn,__awaiter:()=>nE,__classPrivateFieldGet:()=>mE,__classPrivateFieldIn:()=>yE,__classPrivateFieldSet:()=>gE,__createBinding:()=>Pa,__decorate:()=>YS,__disposeResources:()=>EE,__esDecorate:()=>JS,__exportStar:()=>oE,__extends:()=>KS,__generator:()=>sE,__importDefault:()=>hE,__importStar:()=>pE,__makeTemplateObject:()=>fE,__metadata:()=>rE,__param:()=>XS,__propKey:()=>eE,__read:()=>nf,__rest:()=>QS,__rewriteRelativeImportExtension:()=>wE,__runInitializers:()=>ZS,__setFunctionName:()=>tE,__spread:()=>iE,__spreadArray:()=>cE,__spreadArrays:()=>aE,__values:()=>Aa,default:()=>sD});function KS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function QS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function YS(e,t,r,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function XS(e,t){return function(r,n){t(r,n,e)}}function JS(e,t,r,n,s,o){function i(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,f=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),p,h=!1,m=r.length-1;m>=0;m--){var y={};for(var b in n)y[b]=b==="access"?{}:n[b];for(var b in n.access)y.access[b]=n.access[b];y.addInitializer=function(A){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(i(A||null))};var C=(0,r[m])(a==="accessor"?{get:f.get,set:f.set}:f[c],y);if(a==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(p=i(C.get))&&(f.get=p),(p=i(C.set))&&(f.set=p),(p=i(C.init))&&s.unshift(p)}else(p=i(C))&&(a==="field"?s.unshift(p):f[c]=p)}u&&Object.defineProperty(u,n.name,f),h=!0}function ZS(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function eE(e){return typeof e=="symbol"?e:"".concat(e)}function tE(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function rE(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function nE(e,t,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function a(f){try{u(n.next(f))}catch(p){i(p)}}function c(f){try{u(n.throw(f))}catch(p){i(p)}}function u(f){f.done?o(f.value):s(f.value).then(a,c)}u((n=n.apply(e,t||[])).next())})}function sE(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],s=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function oE(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Pa(t,e,r)}function Aa(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nf(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,o=[],i;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(a){i={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return o}function iE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(nf(arguments[t]));return e}function aE(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var o=arguments[t],i=0,a=o.length;i<a;i++,s++)n[s]=o[i];return n}function cE(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function Wn(e){return this instanceof Wn?(this.v=e,this):new Wn(e)}function uE(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(m){return function(y){return Promise.resolve(y).then(m,p)}}function a(m,y){n[m]&&(s[m]=function(b){return new Promise(function(C,A){o.push([m,b,C,A])>1||c(m,b)})},y&&(s[m]=y(s[m])))}function c(m,y){try{u(n[m](y))}catch(b){h(o[0][3],b)}}function u(m){m.value instanceof Wn?Promise.resolve(m.value.v).then(f,p):h(o[0][2],m)}function f(m){c("next",m)}function p(m){c("throw",m)}function h(m,y){m(y),o.shift(),o.length&&c(o[0][0],o[0][1])}}function lE(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,o){t[s]=e[s]?function(i){return(r=!r)?{value:Wn(e[s](i)),done:!1}:o?o(i):i}:o}}function dE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Aa=="function"?Aa(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(i){return new Promise(function(a,c){i=e[o](i),s(a,c,i.done,i.value)})}}function s(o,i,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},i)}}function fE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function pE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=rf(e),n=0;n<r.length;n++)r[n]!=="default"&&Pa(t,e,r[n]);return rD(t,e),t}function hE(e){return e&&e.__esModule?e:{default:e}}function mE(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function gE(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function yE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function SE(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function EE(e){function t(o){e.error=e.hasError?new nD(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(s,function(i){return t(i),s()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function wE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,o,i){return n?t?".jsx":".js":s&&(!o||!i)?r:s+o+"."+i.toLowerCase()+"js"}):e}var tf,va,Pa,rD,rf,nD,sD,yo=_(()=>{tf=function(e,t){return tf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},tf(e,t)};va=function(){return va=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},va.apply(this,arguments)};Pa=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});rD=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},rf=function(e){return rf=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},rf(e)};nD=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};sD={__extends:KS,__assign:va,__rest:QS,__decorate:YS,__param:XS,__esDecorate:JS,__runInitializers:ZS,__propKey:eE,__setFunctionName:tE,__metadata:rE,__awaiter:nE,__generator:sE,__createBinding:Pa,__exportStar:oE,__values:Aa,__read:nf,__spread:iE,__spreadArrays:aE,__spreadArray:cE,__await:Wn,__asyncGenerator:uE,__asyncDelegator:lE,__asyncValues:dE,__makeTemplateObject:fE,__importStar:pE,__importDefault:hE,__classPrivateFieldGet:mE,__classPrivateFieldSet:gE,__classPrivateFieldIn:yE,__addDisposableResource:SE,__disposeResources:EE,__rewriteRelativeImportExtension:wE}});var bE=R(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.randomUUID=void 0;var oD=(yo(),ee(go)),_E=oD.__importDefault(require("crypto"));Ia.randomUUID=_E.default.randomUUID.bind(_E.default)});var sf=R(TE=>{"use strict";var RE=bE(),$e=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),iD=()=>{if(RE.randomUUID)return RE.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,$e[e[0]]+$e[e[1]]+$e[e[2]]+$e[e[3]]+"-"+$e[e[4]]+$e[e[5]]+"-"+$e[e[6]]+$e[e[7]]+"-"+$e[e[8]]+$e[e[9]]+"-"+$e[e[10]]+$e[e[11]]+$e[e[12]]+$e[e[13]]+$e[e[14]]+$e[e[15]]};TE.v4=iD});var Ut,xE=_(()=>{Ut=T(sf())});var Ge,CE=_(()=>{Ge=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};Ge.from=e=>e&&typeof e=="object"&&(e instanceof Ge||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?Ge(String(e)):Ge(JSON.stringify(e));Ge.fromObject=Ge.from});function of(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var vE=_(()=>{});function Yt(e,t,r){let n=Number(e);if(n<t||n>r)throw new Error(`Value ${n} out of range [${t}, ${r}]`)}var af,cf,uf,AE,PE,aD,cD,uD,lD,dD,So,lf,df,IE=_(()=>{af="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",cf="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",uf="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",AE="(\\d?\\d)",PE="(\\d{4})",aD=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),cD=new RegExp(`^${af}, ${AE} ${cf} ${PE} ${uf} GMT$`),uD=new RegExp(`^${af}, ${AE}-${cf}-(\\d\\d) ${uf} GMT$`),lD=new RegExp(`^${af} ${cf} ( [1-9]|\\d\\d) ${uf} ${PE}$`),dD=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],So=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},lf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=aD.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,n,s,o,i,a,,c,u]=t;Yt(n,1,12),Yt(s,1,31),Yt(o,0,23),Yt(i,0,59),Yt(a,0,60);let f=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(o),Number(i),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(f.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){let[,p,h,m]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],y=p==="-"?1:-1;f.setTime(f.getTime()+y*(Number(h)*60*60*1e3+Number(m)*60*1e3))}return f},df=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,n,s,o,i,a,c;if((c=cD.exec(e))?[,t,r,n,s,o,i,a]=c:(c=uD.exec(e))?([,t,r,n,s,o,i,a]=c,n=(Number(n)+1900).toString()):(c=lD.exec(e))&&([,r,t,s,o,i,a,n]=c),n&&i){let u=Date.UTC(Number(n),dD.indexOf(r),Number(t),Number(s),Number(o),Number(i),a?Math.round(parseFloat(`0.${a}`)*1e3):0);Yt(t,1,31),Yt(s,0,23),Yt(o,0,59),Yt(i,0,60);let f=new Date(u);return f.setUTCFullYear(Number(n)),f}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function ff(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let s=[],o="";for(let i=0;i<n.length;i++)o===""?o=n[i]:o+=t+n[i],(i+1)%r===0&&(s.push(o),o="");return o!==""&&s.push(o),s}var OE=_(()=>{});var Eo,NE=_(()=>{Eo=e=>{let t=e.length,r=[],n=!1,s,o=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(o,i)),o=i+1);break;default:}s=a}return r.push(e.slice(o)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function pf(e){return new he(String(e),"bigDecimal")}var DE,he,ME=_(()=>{DE=/^-?\d*(\.\d+)?$/,he=class e{string;type;constructor(t,r){if(this.string=t,this.type=r,!DE.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&DE.test(r.string)}}});var kE={};Ye(kE,{LazyJsonString:()=>Ge,NumericValue:()=>he,_parseEpochTimestamp:()=>So,_parseRfc3339DateTimeWithOffset:()=>lf,_parseRfc7231DateTime:()=>df,copyDocumentWithTransform:()=>x1,dateToUtcString:()=>mo,expectBoolean:()=>v1,expectByte:()=>zd,expectFloat32:()=>Ta,expectInt:()=>P1,expectInt32:()=>Hd,expectLong:()=>fo,expectNonNull:()=>O1,expectNumber:()=>lo,expectObject:()=>zS,expectShort:()=>jd,expectString:()=>N1,expectUnion:()=>D1,generateIdempotencyToken:()=>Ut.v4,handleFloat:()=>L1,limitedParseDouble:()=>Wd,limitedParseFloat:()=>F1,limitedParseFloat32:()=>q1,logger:()=>po,nv:()=>pf,parseBoolean:()=>C1,parseEpochTimestamp:()=>ef,parseRfc3339DateTime:()=>j1,parseRfc3339DateTimeWithOffset:()=>Jd,parseRfc7231DateTime:()=>Zd,quoteHeader:()=>of,splitEvery:()=>ff,splitHeader:()=>Eo,strictParseByte:()=>Kd,strictParseDouble:()=>Ca,strictParseFloat:()=>M1,strictParseFloat32:()=>Gd,strictParseInt:()=>U1,strictParseInt32:()=>$1,strictParseLong:()=>GS,strictParseShort:()=>pn});var Je=_(()=>{jS();WS();xE();CE();Qd();vE();IE();OE();NE();ME()});var We,Kn=_(()=>{We=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});var LE,hf,FE=_(()=>{LE=T(De()),hf=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:n,serdeContext:s,defaultContentType:o}){this.marshaller=t,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=o}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){let s=this.marshaller,o=r.getEventStreamMember(),i=r.getMemberSchema(o),a=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),f={async*[Symbol.asyncIterator](){if(n){let p={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let h=a.flush();yield{[u]:!0,headers:p,body:h}}for await(let p of t)yield p}};return s.serialize(f,p=>{if(p[u])return{headers:p.headers,body:p.body};let h=Object.keys(p).find(O=>O!=="__type")??"",{additionalHeaders:m,body:y,eventType:b,explicitPayloadContentType:C}=this.writeEventBody(h,i,p);return{headers:{":event-type":{type:"string",value:b},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:C??c},...m},body:y}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,o=r.getEventStreamMember(),a=r.getMemberSchema(o).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=s.deserialize(t.body,async h=>{let m=Object.keys(h).find(y=>y!=="__type")??"";if(m==="initial-response"){let y=await this.deserializer.read(r,h[m].body);return delete y[o],{[c]:!0,...y}}else if(m in a){let y=a[m];return{[m]:await this.deserializer.read(y,h[m].body)}}else return{$unknown:h}}),f=u[Symbol.asyncIterator](),p=await f.next();if(p.done)return u;if(p.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[h,m]of Object.entries(p.value))n[h]=m}return{async*[Symbol.asyncIterator](){for(p?.value?.[c]||(yield p.value);;){let{done:h,value:m}=await f.next();if(h)break;yield m}}}}writeEventBody(t,r,n){let s=this.serializer,o=t,i=null,a,c=r.getSchema()[4].includes(t),u={};if(c){let h=r.getMemberSchema(t);if(h.isStructSchema()){for(let[m,y]of h.structIterator()){let{eventHeader:b,eventPayload:C}=y.getMergedTraits();if(C){i=m;break}else if(b){let A=n[t][m],O="binary";y.isNumericSchema()?(-2)**31<=A&&A<=2**31-1?O="integer":O="long":y.isTimestampSchema()?O="timestamp":y.isStringSchema()?O="string":y.isBooleanSchema()&&(O="boolean"),A!=null&&(u[m]={type:O,value:A},delete n[t][m])}}if(i!==null){let m=h.getMemberSchema(i);m.isBlobSchema()?a="application/octet-stream":m.isStringSchema()&&(a="text/plain"),s.write(m,n[t][i])}else s.write(h,n[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[h,m]=n[t];o=h,s.write(15,m)}let f=s.flush();return{body:typeof f=="string"?(this.serdeContext?.utf8Decoder??LE.fromUtf8)(f):f,eventType:o,explicitPayloadContentType:a,additionalHeaders:u}}}});var qE={};Ye(qE,{EventStreamSerde:()=>hf});var UE=_(()=>{FE()});var Oa,hn,Na=_(()=>{pe();Oa=T(ue());Kn();hn=class extends We{options;constructor(t){super(),this.options=t}getRequestType(){return Oa.HttpRequest}getResponseType(){return Oa.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,t.query||(t.query={});for(let[n,s]of r.url.searchParams.entries())t.query[n]=s;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,n){let s=L.of(r.input),o=Ft(r.traits??{});if(o.endpoint){let i=o.endpoint?.[0];if(typeof i=="string"){let a=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let u=n[c];if(typeof u!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);i=i.replace(`{${c}}`,u)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(()=>(UE(),qE));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,n,s,o){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}});var $E,BE,mn,HE=_(()=>{pe();Je();$E=T(ue()),BE=T(ma());ya();Sa();Na();mn=class extends hn{async serializeRequest(t,r,n){let s={...r??{}},o=this.serializer,i={},a={},c=await n.endpoint(),u=L.of(t?.input),f=u.getSchema(),p=!1,h,m=new $E.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(c){this.updateServiceEndpoint(m,c),this.setHostPrefix(m,t,s);let y=Ft(t.traits);if(y.http){m.method=y.http[0];let[b,C]=y.http[1].split("?");m.path=="/"?m.path=b:m.path+=b;let A=new URLSearchParams(C??"");Object.assign(i,Object.fromEntries(A))}}for(let[y,b]of u.structIterator()){let C=b.getMergedTraits()??{},A=s[y];if(A!=null)if(C.httpPayload)b.isStreaming()?b.isStructSchema()?s[y]&&(h=await this.serializeEventStream({eventStream:s[y],requestSchema:u})):h=A:(o.write(b,A),h=o.flush()),delete s[y];else if(C.httpLabel){o.write(b,A);let O=o.flush();m.path.includes(`{${y}+}`)?m.path=m.path.replace(`{${y}+}`,O.split("/").map(Lt).join("/")):m.path.includes(`{${y}}`)&&(m.path=m.path.replace(`{${y}}`,Lt(O))),delete s[y]}else if(C.httpHeader)o.write(b,A),a[C.httpHeader.toLowerCase()]=String(o.flush()),delete s[y];else if(typeof C.httpPrefixHeaders=="string"){for(let[O,k]of Object.entries(A)){let U=C.httpPrefixHeaders+O;o.write([b.getValueSchema(),{httpHeader:U}],k),a[U.toLowerCase()]=o.flush()}delete s[y]}else C.httpQuery||C.httpQueryParams?(this.serializeQuery(b,A,i),delete s[y]):p=!0}return p&&s&&(o.write(f,s),h=o.flush()),m.headers=a,m.query=i,m.body=h,m}serializeQuery(t,r,n){let s=this.serializer,o=t.getMergedTraits();if(o.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in n)){let c=t.getValueSchema();Object.assign(c.getMergedTraits(),{...o,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let c of r){s.write([t.getValueSchema(),o],c);let u=s.flush();(i||u!==void 0)&&a.push(u)}n[o.httpQuery]=a}else s.write([t,o],r),n[o.httpQuery]=s.flush()}async deserializeResponse(t,r,n){let s=this.deserializer,o=L.of(t.output),i={};if(n.statusCode>=300){let c=await Pt(n.body,r);throw c.byteLength>0&&Object.assign(i,await s.read(15,c)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=await this.deserializeHttpMessage(o,r,n,i);if(a.length){let c=await Pt(n.body,r);if(c.byteLength>0){let u=await s.read(o,c);for(let f of a)i[f]=u[f]}}return i.$metadata=this.deserializeMetadata(n),i}async deserializeHttpMessage(t,r,n,s,o){let i;s instanceof Set?i=o:i=s;let a=this.deserializer,c=L.of(t),u=[];for(let[f,p]of c.structIterator()){let h=p.getMemberTraits();if(h.httpPayload){if(p.isStreaming())p.isStructSchema()?i[f]=await this.deserializeEventStream({response:n,responseSchema:c}):i[f]=(0,BE.sdkStreamMixin)(n.body);else if(n.body){let y=await Pt(n.body,r);y.byteLength>0&&(i[f]=await a.read(p,y))}}else if(h.httpHeader){let m=String(h.httpHeader).toLowerCase(),y=n.headers[m];if(y!=null)if(p.isListSchema()){let b=p.getValueSchema();b.getMergedTraits().httpHeader=m;let C;b.isTimestampSchema()&&b.getSchema()===4?C=ff(y,",",2):C=Eo(y);let A=[];for(let O of C)A.push(await a.read(b,O.trim()));i[f]=A}else i[f]=await a.read(p,y)}else if(h.httpPrefixHeaders!==void 0){i[f]={};for(let[m,y]of Object.entries(n.headers))if(m.startsWith(h.httpPrefixHeaders)){let b=p.getValueSchema();b.getMergedTraits().httpHeader=m,i[f][m.slice(h.httpPrefixHeaders.length)]=await a.read(b,y)}}else h.httpResponseCode?i[f]=n.statusCode:u.push(f)}return u}}});var jE,Xt,zE=_(()=>{pe();jE=T(ue());ya();Na();Xt=class extends hn{async serializeRequest(t,r,n){let s=this.serializer,o={},i={},a=await n.endpoint(),c=L.of(t?.input),u=c.getSchema(),f,p=new jE.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:o,headers:i,body:void 0});a&&(this.updateServiceEndpoint(p,a),this.setHostPrefix(p,t,r));let h={...r};if(r){let m=c.getEventStreamMember();if(m){if(h[m]){let y={};for(let[b,C]of c.structIterator())b!==m&&h[b]&&(s.write(C,h[b]),y[b]=s.flush());f=await this.serializeEventStream({eventStream:h[m],requestSchema:c,initialRequest:y})}}else s.write(u,h),f=s.flush()}return p.headers=i,p.query=o,p.body=f,p.method="POST",p}async deserializeResponse(t,r,n){let s=this.deserializer,o=L.of(t.output),i={};if(n.statusCode>=300){let c=await Pt(n.body,r);throw c.byteLength>0&&Object.assign(i,await s.read(15,c)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=o.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:n,responseSchema:o,initialResponseContainer:i});else{let c=await Pt(n.body,r);c.byteLength>0&&Object.assign(i,await s.read(o,c))}return i.$metadata=this.deserializeMetadata(n),i}}});var mf,gf=_(()=>{Sa();mf=(e,t,r,n,s,o)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(s,o?i.split("/").map(a=>Lt(a)).join("/"):Lt(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function wo(e,t){return new Da(e,t)}var VE,Da,GE=_(()=>{VE=T(ue());gf();Da=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(t,r){this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let o of this.resolvePathStack)o(this.path);return new VE.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,s){return this.resolvePathStack.push(o=>{this.path=mf(o,this.input,t,r,n,s)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function lt(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:o}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||s?6:o||r?5:void 0:void 0)??t.timestampFormat.default}var Ma=_(()=>{});var yf,WE,gn,Sf=_(()=>{pe();Je();yf=T(Me()),WE=T(De());Kn();Ma();gn=class extends We{settings;constructor(t){super(),this.settings=t}read(t,r){let n=L.of(t);if(n.isListSchema())return Eo(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??yf.fromBase64)(r);if(n.isTimestampSchema())switch(lt(n,this.settings)){case 5:return lf(r);case 6:return df(r);case 7:return So(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let s=n.getMergedTraits().mediaType,o=r;if(s)return n.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(s==="application/json"||s.endsWith("+json"))&&(o=Ge.from(o)),o}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new he(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??WE.toUtf8)((this.serdeContext?.base64Decoder??yf.fromBase64)(t))}}});var ka,yn,KE=_(()=>{pe();ka=T(De());Kn();Sf();yn=class extends We{codecDeserializer;stringDeserializer;constructor(t,r){super(),this.codecDeserializer=t,this.stringDeserializer=new gn(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let n=L.of(t),s=n.getMergedTraits(),o=this.serdeContext?.utf8Encoder??ka.toUtf8;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(n,o(r));if(s.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??ka.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(n,r)}}});var Ef,_o,wf=_(()=>{pe();Je();Ef=T(Me());Kn();Ma();_o=class extends We{settings;stringBuffer="";constructor(t){super(),this.settings=t}write(t,r){let n=L.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(lt(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=mo(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??Ef.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let c=this.flush(),u=n.getValueSchema().isTimestampSchema()?c:of(c);i!==""&&(i+=", "),i+=u}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let s=n.getMergedTraits().mediaType,o=r;if(s&&((s==="application/json"||s.endsWith("+json"))&&(o=Ge.from(o)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Ef.toBase64)(o.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var Sn,QE=_(()=>{pe();wf();Sn=class{codecSerializer;stringSerializer;buffer;constructor(t,r,n=new _o(r)){this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let n=L.of(t),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var YE={};Ye(YE,{FromStringShapeDeserializer:()=>gn,HttpBindingProtocol:()=>mn,HttpInterceptingShapeDeserializer:()=>yn,HttpInterceptingShapeSerializer:()=>Sn,HttpProtocol:()=>hn,RequestBuilder:()=>Da,RpcProtocol:()=>Xt,SerdeContext:()=>We,ToStringShapeSerializer:()=>_o,collectBody:()=>Pt,determineTimestampFormat:()=>lt,extendedEncodeURIComponent:()=>Lt,requestBuilder:()=>wo,resolvedPath:()=>mf});var Ze=_(()=>{ya();Sa();HE();Na();zE();GE();gf();Sf();KE();QE();wf();Ma();Kn()});var XE=_(()=>{Ze()});function fD(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var JE=_(()=>{});var En,ZE=_(()=>{En=class{authSchemes=new Map;constructor(t){for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var ew,_f,bf,tw=_(()=>{ew=T(ue()),_f=T(Er()),bf=class{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=ew.HttpRequest.clone(t);if(n.in===_f.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===_f.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var rw,Rf,nw=_(()=>{rw=T(ue()),Rf=class{async sign(t,r,n){let s=rw.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var Jt,sw=_(()=>{Jt=class{async sign(t,r,n){return t}}});var ow=_(()=>{tw();nw();sw()});var iw,pD,Tf,La,xf,aw=_(()=>{iw=e=>function(r){return La(r)&&r.expiration.getTime()-Date.now()<e},pD=3e5,Tf=iw(3e5),La=e=>e.expiration!==void 0,xf=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,s,o,i,a=!1,c=async u=>{o||(o=n(u));try{s=await o,i=!0,a=!1}finally{o=void 0}return s};return t===void 0?async u=>((!i||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!i||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(t(s)&&await c(u),s):(a=!0,s))}});var cw=_(()=>{ZE();ow();aw()});var Qn={};Ye(Qn,{DefaultIdentityProviderConfig:()=>En,EXPIRATION_MS:()=>pD,HttpApiKeyAuthSigner:()=>bf,HttpBearerAuthSigner:()=>Rf,NoAuthSigner:()=>Jt,createIsIdentityExpiredFunction:()=>iw,createPaginator:()=>Ry,doesIdentityRequireRefresh:()=>La,getHttpAuthSchemeEndpointRuleSetPlugin:()=>no,getHttpAuthSchemePlugin:()=>KO,getHttpSigningPlugin:()=>so,getSmithyContext:()=>HO,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>ay,httpAuthSchemeMiddleware:()=>ro,httpAuthSchemeMiddlewareOptions:()=>hy,httpSigningMiddleware:()=>sd,httpSigningMiddlewareOptions:()=>Ey,isIdentityExpired:()=>Tf,memoizeIdentityProvider:()=>xf,normalizeProvider:()=>_r,requestBuilder:()=>wo,setFeature:()=>fD});var et=_(()=>{ry();gy();_y();by();Ty();XE();JE();cw()});var _n=R(wn=>{"use strict";var vf=Er(),Af=class{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),o=0;for(;;){let{value:i,done:a}=s.next();if(this.data.delete(i),a||++o>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let o=String(t[s]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}},hD=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),uw=e=>hD.test(e)||e.startsWith("[")&&e.endsWith("]"),mD=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),If=(e,t=!1)=>{if(!t)return mD.test(e);let r=e.split(".");for(let n of r)if(!If(n))return!1;return!0},Pf={},bo="endpoints";function Tr(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Tr(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Tr).join(", ")})`:JSON.stringify(e,null,2)}var Be=class extends Error{constructor(t){super(t),this.name="EndpointError"}},gD=(e,t)=>e===t,yD=e=>{let t=e.split("."),r=[];for(let n of t){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new Be(`Path: '${e}' does not end with ']'`);let o=n.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new Be(`Invalid array index: '${o}' in path: '${e}'`);s!==0&&r.push(n.slice(0,s)),r.push(o)}else r.push(n)}return r},lw=(e,t)=>yD(t).reduce((r,n)=>{if(typeof r!="object")throw new Be(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),SD=e=>e!=null,ED=e=>!e,Cf={[vf.EndpointURLScheme.HTTP]:80,[vf.EndpointURLScheme.HTTPS]:443},wD=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:h,port:m,protocol:y="",path:b="",query:C={}}=e,A=new URL(`${y}//${h}${m?`:${m}`:""}${b}`);return A.search=Object.entries(C).map(([O,k])=>`${O}=${k}`).join("&"),A}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:s,pathname:o,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(vf.EndpointURLScheme).includes(c))return null;let u=uw(s),f=r.includes(`${n}:${Cf[c]}`)||typeof e=="string"&&e.includes(`${n}:${Cf[c]}`),p=`${n}${f?`:${Cf[c]}`:""}`;return{scheme:c,authority:p,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:u}},_D=(e,t)=>e===t,bD=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),RD=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),TD={booleanEquals:gD,getAttr:lw,isSet:SD,isValidHostLabel:If,not:ED,parseURL:wD,stringEquals:_D,substring:bD,uriEncode:RD},dw=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},s=0;for(;s<e.length;){let o=e.indexOf("{",s);if(o===-1){r.push(e.slice(s));break}r.push(e.slice(s,o));let i=e.indexOf("}",o);if(i===-1){r.push(e.slice(o));break}e[o+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(o+1,i)),s=i+2);let a=e.substring(o+1,i);if(a.includes("#")){let[c,u]=a.split("#");r.push(lw(n[c],u))}else r.push(n[a]);s=i+1}return r.join("")},xD=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],Fa=(e,t,r)=>{if(typeof e=="string")return dw(e,r);if(e.fn)return pw.callFunction(e,r);if(e.ref)return xD(e,r);throw new Be(`'${t}': ${String(e)} is not a string, function or reference.`)},fw=({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:pw.evaluateExpression(o,"arg",r)),s=e.split(".");return s[0]in Pf&&s[1]!=null?Pf[s[0]][s[1]](...n):TD[e](...n)},pw={evaluateExpression:Fa,callFunction:fw},CD=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new Be(`'${e}' is already defined in Reference Record.`);let n=fw(t,r);return r.logger?.debug?.(`${bo} evaluateCondition: ${Tr(t)} = ${Tr(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},Of=(e=[],t)=>{let r={};for(let n of e){let{result:s,toAssign:o}=CD(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!s)return{result:s};o&&(r[o.name]=o.value,t.logger?.debug?.(`${bo} assign: ${o.name} := ${Tr(o.value)}`))}return{result:!0,referenceRecord:r}},vD=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:s.map(o=>{let i=Fa(o,"Header value entry",t);if(typeof i!="string")throw new Be(`Header '${n}' value '${i}' is not a string`);return i})}),{}),hw=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:gw.getEndpointProperty(s,t)}),{}),mw=(e,t)=>{if(Array.isArray(e))return e.map(r=>mw(r,t));switch(typeof e){case"string":return dw(e,t);case"object":if(e===null)throw new Be(`Unexpected endpoint property: ${e}`);return gw.getEndpointProperties(e,t);case"boolean":return e;default:throw new Be(`Unexpected endpoint property type: ${typeof e}`)}},gw={getEndpointProperty:mw,getEndpointProperties:hw},AD=(e,t)=>{let r=Fa(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Be(`Endpoint URL must be a string, got ${typeof r}`)},PD=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:s,referenceRecord:o}=Of(r,t);if(!s)return;let i={...t,referenceRecord:{...t.referenceRecord,...o}},{url:a,properties:c,headers:u}=n;return t.logger?.debug?.(`${bo} Resolving endpoint from template: ${Tr(n)}`),{...u!=null&&{headers:vD(u,i)},...c!=null&&{properties:hw(c,i)},url:AD(a,i)}},ID=(e,t)=>{let{conditions:r,error:n}=e,{result:s,referenceRecord:o}=Of(r,t);if(s)throw new Be(Fa(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},yw=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=PD(r,t);if(n)return n}else if(r.type==="error")ID(r,t);else if(r.type==="tree"){let n=Sw.evaluateTreeRule(r,t);if(n)return n}else throw new Be(`Unknown endpoint rule: ${r}`);throw new Be("Rules evaluation failed")},OD=(e,t)=>{let{conditions:r,rules:n}=e,{result:s,referenceRecord:o}=Of(r,t);if(s)return Sw.evaluateRules(n,{...t,referenceRecord:{...t.referenceRecord,...o}})},Sw={evaluateRules:yw,evaluateTreeRule:OD},ND=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:s,rules:o}=e;t.logger?.debug?.(`${bo} Initial EndpointParams: ${Tr(r)}`);let i=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,f])=>[u,f.default]);if(i.length>0)for(let[u,f]of i)r[u]=r[u]??f;let a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(let u of a)if(r[u]==null)throw new Be(`Missing required parameter: '${u}'`);let c=yw(o,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${bo} Resolved endpoint: ${Tr(c)}`),c};wn.EndpointCache=Af;wn.EndpointError=Be;wn.customEndpointFunctions=Pf;wn.isIpAddress=uw;wn.isValidHostLabel=If;wn.resolveEndpoint=ND});var ww=R(Ew=>{"use strict";function DD(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in t?Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]:t[n]=s}return t}Ew.parseQueryString=DD});var xr=R(bw=>{"use strict";var MD=ww(),_w=e=>{if(typeof e=="string")return _w(new URL(e));let{hostname:t,pathname:r,port:n,protocol:s,search:o}=e,i;return o&&(i=MD.parseQueryString(o)),{hostname:t,port:n?parseInt(n):void 0,protocol:s,path:r,query:i}};bw.parseUrl=_w});var Xn=R(Ot=>{"use strict";var Yn=_n(),kD=xr(),Tw=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Tw(r))return!1;return!0}return!(!Yn.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Yn.isIpAddress(e))},Rw=":",LD="/",FD=e=>{let t=e.split(Rw);if(t.length<6)return null;let[r,n,s,o,i,...a]=t;if(r!=="arn"||n===""||s===""||a.join(Rw)==="")return null;let c=a.map(u=>u.split(LD)).flat();return{partition:n,service:s,region:o,accountId:i,resourceId:c}},qD=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],UD="1.1",xw={partitions:qD,version:UD},Cw=xw,vw="",Aw=e=>{let{partitions:t}=Cw;for(let n of t){let{regions:s,outputs:o}=n;for(let[i,a]of Object.entries(s))if(i===e)return{...o,...a}}for(let n of t){let{regionRegex:s,outputs:o}=n;if(new RegExp(s).test(e))return{...o}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Pw=(e,t="")=>{Cw=e,vw=t},$D=()=>{Pw(xw,"")},BD=()=>vw,Iw={isVirtualHostableS3Bucket:Tw,parseArn:FD,partition:Aw};Yn.customEndpointFunctions.aws=Iw;var HD=e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>Ow(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},Ow=e=>kD.parseUrl(e.url);Object.defineProperty(Ot,"EndpointError",{enumerable:!0,get:function(){return Yn.EndpointError}});Object.defineProperty(Ot,"isIpAddress",{enumerable:!0,get:function(){return Yn.isIpAddress}});Object.defineProperty(Ot,"resolveEndpoint",{enumerable:!0,get:function(){return Yn.resolveEndpoint}});Ot.awsEndpointFunctions=Iw;Ot.getUserAgentPrefix=BD;Ot.partition=Aw;Ot.resolveDefaultAwsRegionalEndpointsConfig=HD;Ot.setPartitionInfo=Pw;Ot.toEndpointV1=Ow;Ot.useDefaultPartitionInfo=$D});var qa,Jn,Nw=_(()=>{qa={warningEmitted:!1},Jn=e=>{e&&!qa.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(qa.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function Cr(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var Dw=_(()=>{});function Mw(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var kw=_(()=>{});function Lw(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var Fw=_(()=>{});var vr={};Ye(vr,{emitWarningIfUnsupportedVersion:()=>Jn,setCredentialFeature:()=>Cr,setFeature:()=>Mw,setTokenFeature:()=>Lw,state:()=>qa});var Nt=_(()=>{Nw();Dw();kw();Fw()});var qw,Nf,Uw=_(()=>{qw=T(ue()),Nf=e=>qw.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var Zn,Df=_(()=>{Zn=e=>new Date(Date.now()+e)});var $w,Bw=_(()=>{Df();$w=(e,t)=>Math.abs(Zn(t).getTime()-e)>=3e5});var Mf,Hw=_(()=>{Bw();Mf=(e,t)=>{let r=Date.parse(e);return $w(r,t)?r-Date.now():t}});var kf=_(()=>{Uw();Df();Hw()});var jw,Ro,es,tt,Lf,Ff=_(()=>{jw=T(ue());kf();Ro=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},es=async e=>{let t=Ro("context",e.context),r=Ro("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],o=await Ro("signer",r.signer)(n),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}},tt=class{async sign(t,r,n){if(!jw.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await es(n),{config:o,signer:i}=s,{signingRegion:a,signingName:c}=s,u=n.context;if(u?.authSchemes?.length??!1){let[p,h]=u.authSchemes;p?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,c=h?.signingName??c)}return await i.sign(t,{signingDate:Zn(o.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let n=r.ServerTime??Nf(r.$response);if(n){let s=Ro("config",t.config),o=s.systemClockOffset;s.systemClockOffset=Mf(n,s.systemClockOffset),s.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=Nf(t);if(n){let s=Ro("config",r.config);s.systemClockOffset=Mf(n,s.systemClockOffset)}}},Lf=tt});var zw,To,Vw=_(()=>{zw=T(ue());kf();Ff();To=class extends tt{async sign(t,r,n){if(!zw.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:o,signingRegion:i,signingRegionSet:a,signingName:c}=await es(n),f=(await s.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await o.sign(t,{signingDate:Zn(s.systemClockOffset),signingRegion:f,signingService:c})}}});var qf,Gw=_(()=>{qf=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var Ua,Uf=_(()=>{Ua=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var Ww,Kw,ts,Qw=_(()=>{Gw();Uf();Ww="AWS_AUTH_SCHEME_PREFERENCE",Kw="auth_scheme_preference",ts={environmentVariableSelector:(e,t)=>{if(t?.signingName&&Ua(t.signingName)in e)return["httpBearerAuth"];if(Ww in e)return qf(e[Ww])},configFileSelector:e=>{if(Kw in e)return qf(e[Kw])},default:[]}});var Ke=R(bn=>{"use strict";var rs=class e extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let n,s=!0;typeof r=="boolean"?(n=void 0,s=r):r!=null&&typeof r=="object"&&(n=r.logger,s=r.tryNextLink??!0),super(t),this.tryNextLink=s,Object.setPrototypeOf(this,e.prototype),n?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},$f=class e extends rs{name="CredentialsProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},Bf=class e extends rs{name="TokenProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},jD=(...e)=>async()=>{if(e.length===0)throw new rs("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t},zD=e=>()=>Promise.resolve(e),VD=(e,t,r)=>{let n,s,o,i=!1,a=async()=>{s||(s=e());try{n=await s,o=!0,i=!1}finally{s=void 0}return n};return t===void 0?async c=>((!o||c?.forceRefresh)&&(n=await a()),n):async c=>((!o||c?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};bn.CredentialsProviderError=$f;bn.ProviderError=rs;bn.TokenProviderError=Bf;bn.chain=jD;bn.fromStatic=zD;bn.memoize=VD});var Hf,Yw,Xw,Jw=_(()=>{et();Hf=T(Ke()),Yw=e=>(e.sigv4aSigningRegionSet=_r(e.sigv4aSigningRegionSet),e),Xw={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new Hf.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new Hf.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var b_=R(G=>{"use strict";var Ar=Od(),Rn=De(),GD=id(),r_=ue(),Zw=Xe(),$a=Ed(),n_="X-Amz-Algorithm",s_="X-Amz-Credential",Kf="X-Amz-Date",o_="X-Amz-SignedHeaders",i_="X-Amz-Expires",Qf="X-Amz-Signature",Yf="X-Amz-Security-Token",WD="X-Amz-Region-Set",Xf="authorization",Jf=Kf.toLowerCase(),a_="date",c_=[Xf,Jf,a_],u_=Qf.toLowerCase(),Va="x-amz-content-sha256",l_=Yf.toLowerCase(),KD="host",d_={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},f_=/^proxy-/,p_=/^sec-/,QD=[/^proxy-/i,/^sec-/i],Ba="AWS4-HMAC-SHA256",YD="AWS4-ECDSA-P256-SHA256",h_="AWS4-HMAC-SHA256-PAYLOAD",m_="UNSIGNED-PAYLOAD",g_=50,Zf="aws4_request",y_=3600*24*7,ns={},Ha=[],ja=(e,t,r)=>`${e}/${t}/${r}/${Zf}`,S_=async(e,t,r,n,s)=>{let o=await e_(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${s}:${Ar.toHex(o)}:${t.sessionToken}`;if(i in ns)return ns[i];for(Ha.push(i);Ha.length>g_;)delete ns[Ha.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,s,Zf])a=await e_(e,a,c);return ns[i]=a},XD=()=>{Ha.length=0,Object.keys(ns).forEach(e=>{delete ns[e]})},e_=(e,t,r)=>{let n=new e(t);return n.update(Rn.toUint8Array(r)),n.digest()},jf=({headers:e},t,r)=>{let n={};for(let s of Object.keys(e).sort()){if(e[s]==null)continue;let o=s.toLowerCase();(o in d_||t?.has(o)||f_.test(o)||p_.test(o))&&(!r||r&&!r.has(o))||(n[o]=e[s].trim().replace(/\s+/g," "))}return n},za=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===Va)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||GD.isArrayBuffer(t)){let n=new r;return n.update(Rn.toUint8Array(t)),Ar.toHex(await n.digest())}return m_},zf=class{format(t){let r=[];for(let o of Object.keys(t)){let i=Rn.fromUtf8(o);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[o]))}let n=new Uint8Array(r.reduce((o,i)=>o+i.byteLength,0)),s=0;for(let o of r)n.set(o,s),s+=o.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":let o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(o.buffer);return i.set(t.value,3),i;case"string":let a=Rn.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let f=new Uint8Array(9);return f[0]=8,f.set(Vf.fromNumber(t.value.valueOf()).bytes,1),f;case"uuid":if(!JD.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let p=new Uint8Array(17);return p[0]=9,p.set(Ar.fromHex(t.value.replace(/\-/g,"")),1),p}}},JD=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Vf=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&t_(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&t_(t),parseInt(Ar.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function t_(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var E_=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},w_=(e,t={})=>{let{headers:r,query:n={}}=r_.HttpRequest.clone(e);for(let s of Object.keys(r)){let o=s.toLowerCase();(o.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(o)||t.hoistableHeaders?.has(o))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}},Gf=e=>{e=r_.HttpRequest.clone(e);for(let t of Object.keys(e.headers))c_.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},__=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===u_)continue;let s=$a.escapeUri(n);t.push(s);let o=e[n];typeof o=="string"?r[s]=`${s}=${$a.escapeUri(o)}`:Array.isArray(o)&&(r[s]=o.slice(0).reduce((i,a)=>i.concat([`${s}=${$a.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},ZD=e=>eM(e).toISOString().replace(/\.\d{3}Z$/,"Z"),eM=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,Ga=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){this.service=s,this.sha256=o,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Zw.normalizeProvider(n),this.credentialProvider=Zw.normalizeProvider(r)}createCanonicalRequest(t,r,n){let s=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${__(t)}
${s.map(o=>`${o}:${r[o]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(t,r,n,s){let o=new this.sha256;o.update(Rn.toUint8Array(n));let i=await o.digest();return`${s}
${t}
${r}
${Ar.toHex(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let o of t.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return $a.escapeUri(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=ZD(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},Wf=class extends Ga{headerFormatter=new zf;constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i=!0}){super({applyChecksum:t,credentials:r,region:n,service:s,sha256:o,uriEscapePath:i})}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:f}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);let h=u??await this.regionProvider(),{longDate:m,shortDate:y}=this.formatDate(n);if(s>y_)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let b=ja(y,h,f??this.service),C=w_(Gf(t),{unhoistableHeaders:i,hoistableHeaders:c});p.sessionToken&&(C.query[Yf]=p.sessionToken),C.query[n_]=Ba,C.query[s_]=`${p.accessKeyId}/${b}`,C.query[Kf]=m,C.query[i_]=s.toString(10);let A=jf(C,o,a);return C.query[o_]=this.getCanonicalHeaderList(A),C.query[Qf]=await this.getSignature(m,b,this.getSigningKey(p,h,y,f),this.createCanonicalRequest(C,A,await za(t,this.sha256))),C}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:o,signingService:i}){let a=o??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(n),f=ja(c,a,i??this.service),p=await za({headers:{},body:r},this.sha256),h=new this.sha256;h.update(t);let m=Ar.toHex(await h.digest()),y=[h_,u,f,s,m,p].join(`
`);return this.signString(y,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let i=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(o,i,a,s));return c.update(Rn.toUint8Array(t)),Ar.toHex(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:o,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=o??await this.regionProvider(),u=Gf(t),{longDate:f,shortDate:p}=this.formatDate(r),h=ja(p,c,i??this.service);u.headers[Jf]=f,a.sessionToken&&(u.headers[l_]=a.sessionToken);let m=await za(u,this.sha256);!E_(Va,u.headers)&&this.applyChecksum&&(u.headers[Va]=m);let y=jf(u,s,n),b=await this.getSignature(f,h,this.getSigningKey(a,c,p,i),this.createCanonicalRequest(u,y,m));return u.headers[Xf]=`${Ba} Credential=${a.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(y)}, Signature=${b}`,u}async getSignature(t,r,n,s){let o=await this.createStringToSign(t,r,s,Ba),i=new this.sha256(await n);return i.update(Rn.toUint8Array(o)),Ar.toHex(await i.digest())}getSigningKey(t,r,n,s){return S_(this.sha256,t,n,r,s||this.service)}},tM={SignatureV4a:null};G.ALGORITHM_IDENTIFIER=Ba;G.ALGORITHM_IDENTIFIER_V4A=YD;G.ALGORITHM_QUERY_PARAM=n_;G.ALWAYS_UNSIGNABLE_HEADERS=d_;G.AMZ_DATE_HEADER=Jf;G.AMZ_DATE_QUERY_PARAM=Kf;G.AUTH_HEADER=Xf;G.CREDENTIAL_QUERY_PARAM=s_;G.DATE_HEADER=a_;G.EVENT_ALGORITHM_IDENTIFIER=h_;G.EXPIRES_QUERY_PARAM=i_;G.GENERATED_HEADERS=c_;G.HOST_HEADER=KD;G.KEY_TYPE_IDENTIFIER=Zf;G.MAX_CACHE_SIZE=g_;G.MAX_PRESIGNED_TTL=y_;G.PROXY_HEADER_PATTERN=f_;G.REGION_SET_PARAM=WD;G.SEC_HEADER_PATTERN=p_;G.SHA256_HEADER=Va;G.SIGNATURE_HEADER=u_;G.SIGNATURE_QUERY_PARAM=Qf;G.SIGNED_HEADERS_QUERY_PARAM=o_;G.SignatureV4=Wf;G.SignatureV4Base=Ga;G.TOKEN_HEADER=l_;G.TOKEN_QUERY_PARAM=Yf;G.UNSIGNABLE_PATTERNS=QD;G.UNSIGNED_PAYLOAD=m_;G.clearCredentialCache=XD;G.createScope=ja;G.getCanonicalHeaders=jf;G.getCanonicalQuery=__;G.getPayloadHash=za;G.getSigningKey=S_;G.hasHeader=E_;G.moveHeadersToQuery=w_;G.prepareRequest=Gf;G.signatureV4aContainer=tM});function rM(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=xf(t,Tf,La):r?n=_r(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function nM(e,t){if(t.configBound)return t;let r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var ep,Tn,R_,T_=_(()=>{Nt();et();ep=T(b_()),Tn=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(u){u&&u!==t&&u!==n&&(r=!0),t=u;let f=rM(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),p=nM(e,f);r&&!p.attributed?(n=async h=>p(h).then(m=>Cr(m,"CREDENTIALS_CODE","e")),n.memoized=p.memoized,n.configBound=p.configBound,n.attributed=!0):n=p},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:s=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=_r(e.signer):e.regionInfoProvider?a=()=>_r(e.region)().then(async u=>[await e.regionInfoProvider(u,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},u]).then(([u,f])=>{let{signingRegion:p,signingService:h}=u;e.signingRegion=e.signingRegion||p||f,e.signingName=e.signingName||h||e.serviceId;let m={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:s},y=e.signerConstructor||ep.SignatureV4;return new y(m)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await _r(e.region)(),properties:{}},u);let f=u.signingRegion,p=u.signingName;e.signingRegion=e.signingRegion||f,e.signingName=e.signingName||p||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:s},m=e.signerConstructor||ep.SignatureV4;return new m(h)},Object.assign(e,{systemClockOffset:o,signingEscapePath:s,signer:a})},R_=Tn});var x_=_(()=>{Ff();Vw();Qw();Jw();T_()});var C_={};Ye(C_,{AWSSDKSigV4Signer:()=>Lf,AwsSdkSigV4ASigner:()=>To,AwsSdkSigV4Signer:()=>tt,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>ts,NODE_SIGV4A_CONFIG_OPTIONS:()=>Xw,getBearerTokenEnvKey:()=>Ua,resolveAWSSDKSigV4Config:()=>R_,resolveAwsSdkSigV4AConfig:()=>Yw,resolveAwsSdkSigV4Config:()=>Tn,validateSigningProperties:()=>es});var tp=_(()=>{x_();Uf()});function Pr(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function Wa(e){return e[rp]=!0,e}var rp,Ka=_(()=>{rp=Symbol("@smithy/core/cbor::tagSymbol")});function P_(e){ie=e,er=new DataView(ie.buffer,ie.byteOffset,ie.byteLength)}function $t(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(ie[e]&224)>>5,n=ie[e]&31;switch(r){case 0:case 1:case 6:let s,o;if(n<24)s=n,o=1;else switch(n){case 24:case 25:case 26:case 27:let i=O_[n],a=i+1;if(o=a,t-e<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let c=e+1;i===1?s=ie[c]:i===2?s=er.getUint16(c):i===4?s=er.getUint32(c):s=er.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return Q=o,np(s);if(r===1){let i;return typeof s=="bigint"?i=BigInt(-1)-s:i=-1-s,Q=o,np(i)}else if(n===2||n===3){let i=Ao(e+o,t),a=BigInt(0),c=e+o+Q;for(let u=c;u<c+i;++u)a=a<<BigInt(8)|BigInt(ie[u]);return Q=o+Q+i,n===3?-a-BigInt(1):a}else if(n===4){let i=$t(e+o,t),[a,c]=i,u=c<0?-1:1,f="0".repeat(Math.abs(a)+1)+String(BigInt(u)*BigInt(c)),p,h=c<0?"-":"";return p=a===0?f:f.slice(0,f.length+a)+"."+f.slice(a),p=p.replace(/^0+/g,""),p===""&&(p="0"),p[0]==="."&&(p="0"+p),p=h+p,Q=o+Q,pf(p)}else{let i=$t(e+o,t);return Q=o+Q,Wa({tag:np(s),value:i})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return lM(e,t);case 5:return mM(e,t);case 4:return pM(e,t);case 2:return dM(e,t)}else switch(r){case 3:return uM(e,t);case 5:return hM(e,t);case 4:return fM(e,t);case 2:return up(e,t)}default:return gM(e,t)}}function I_(e,t,r){return iM&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):v_?v_.decode(e.subarray(t,r)):(0,A_.toUtf8)(e.subarray(t,r))}function aM(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function cM(e,t){let r=e>>7,n=(e&124)>>2,s=(e&3)<<8|t,o=r===0?1:-1,i,a;if(n===0){if(s===0)return 0;i=Math.pow(2,-14),a=0}else{if(n===31)return s===0?o*(1/0):NaN;i=Math.pow(2,n-15),a=1}return a+=s/1024,o*(i*a)}function Ao(e,t){let r=ie[e]&31;if(r<24)return Q=1,r;if(r===24||r===25||r===26||r===27){let n=O_[r];if(Q=n+1,t-e<Q)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=e+1;return n===1?ie[s]:n===2?er.getUint16(s):n===4?er.getUint32(s):aM(er.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function uM(e,t){let r=Ao(e,t),n=Q;if(e+=n,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=I_(ie,e,e+r);return Q=n+r,s}function lM(e,t){e+=1;let r=[];for(let n=e;e<t;){if(ie[e]===255){let c=Pr(r.length);return c.set(r,0),Q=e-n+2,I_(c,0,c.length)}let s=(ie[e]&224)>>5,o=ie[e]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=up(e,t);e+=Q;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function up(e,t){let r=Ao(e,t),n=Q;if(e+=n,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=ie.subarray(e,e+r);return Q=n+r,s}function dM(e,t){e+=1;let r=[];for(let n=e;e<t;){if(ie[e]===255){let c=Pr(r.length);return c.set(r,0),Q=e-n+2,c}let s=(ie[e]&224)>>5,o=ie[e]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(o===31)throw new Error("nested indefinite string.");let i=up(e,t);e+=Q;for(let c=0;c<i.length;++c)r.push(i[c])}throw new Error("expected break marker.")}function fM(e,t){let r=Ao(e,t),n=Q;e+=n;let s=e,o=Array(r);for(let i=0;i<r;++i){let a=$t(e,t),c=Q;o[i]=a,e+=c}return Q=n+(e-s),o}function pM(e,t){e+=1;let r=[];for(let n=e;e<t;){if(ie[e]===255)return Q=e-n+2,r;let s=$t(e,t);e+=Q,r.push(s)}throw new Error("expected break marker.")}function hM(e,t){let r=Ao(e,t),n=Q;e+=n;let s=e,o={};for(let i=0;i<r;++i){if(e>=t)throw new Error("unexpected end of map payload.");let a=(ie[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let c=$t(e,t);e+=Q;let u=$t(e,t);e+=Q,o[c]=u}return Q=n+(e-s),o}function mM(e,t){e+=1;let r=e,n={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(ie[e]===255)return Q=e-r+2,n;let s=(ie[e]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let o=$t(e,t);e+=Q;let i=$t(e,t);e+=Q,n[o]=i}throw new Error("expected break marker.")}function gM(e,t){let r=ie[e]&31;switch(r){case 21:case 20:return Q=1,r===21;case 22:return Q=1,null;case 23:return Q=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return Q=3,cM(ie[e+1],ie[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return Q=5,er.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return Q=9,er.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function np(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var A_,oM,iM,ie,er,v_,Q,O_,N_=_(()=>{Je();A_=T(De());Ka();oM=typeof TextDecoder<"u",iM=typeof Buffer<"u",ie=Pr(0),er=new DataView(ie.buffer,ie.byteOffset,ie.byteLength),v_=oM?new TextDecoder:null,Q=0;O_={24:1,25:2,26:4,27:8}});function dp(e){B.byteLength-F<e&&(F<16e6?Ya(Math.max(B.byteLength*4,B.byteLength+e)):Ya(B.byteLength+e+16e6))}function fp(){let e=Pr(F);return e.set(B.subarray(0,F),0),F=0,e}function Ya(e){let t=B;B=Pr(e),t&&(t.copy?t.copy(B,0,0,t.byteLength):B.set(t,0)),nr=new DataView(B.buffer,B.byteOffset,B.byteLength)}function rr(e,t){t<24?B[F++]=e<<5|t:t<256?(B[F++]=e<<5|24,B[F++]=t):t<65536?(B[F++]=e<<5|25,nr.setUint16(F,t),F+=2):t<2**32?(B[F++]=e<<5|26,nr.setUint32(F,t),F+=4):(B[F++]=e<<5|27,nr.setBigUint64(F,typeof t=="bigint"?t:BigInt(t)),F+=8)}function k_(e){let t=[e];for(;t.length;){let r=t.pop();if(dp(typeof r=="string"?r.length*4:64),typeof r=="string"){if(D_)rr(3,Buffer.byteLength(r)),F+=B.write(r,F);else{let n=(0,M_.fromUtf8)(r);rr(3,n.byteLength),B.set(n,F),F+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,o=n?r:-r-1;o<24?B[F++]=s<<5|o:o<256?(B[F++]=s<<5|24,B[F++]=o):o<65536?(B[F++]=s<<5|25,B[F++]=o>>8,B[F++]=o):o<4294967296?(B[F++]=s<<5|26,nr.setUint32(F,o),F+=4):(B[F++]=s<<5|27,nr.setBigUint64(F,BigInt(o)),F+=8);continue}B[F++]=251,nr.setFloat64(F,r),F+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,o=n?r:-r-BigInt(1),i=Number(o);if(i<24)B[F++]=s<<5|i;else if(i<256)B[F++]=s<<5|24,B[F++]=i;else if(i<65536)B[F++]=s<<5|25,B[F++]=i>>8,B[F++]=i&255;else if(i<4294967296)B[F++]=s<<5|26,nr.setUint32(F,i),F+=4;else if(o<BigInt("18446744073709551616"))B[F++]=s<<5|27,nr.setBigUint64(F,o),F+=8;else{let a=o.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),u=o,f=0;for(;c.byteLength-++f>=0;)c[c.byteLength-f]=Number(u&BigInt(255)),u>>=BigInt(8);dp(c.byteLength*2),B[F++]=n?194:195,D_?rr(2,Buffer.byteLength(c)):rr(2,c.byteLength),B.set(c,F),F+=c.byteLength}continue}else if(r===null){B[F++]=246;continue}else if(typeof r=="boolean"){B[F++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)t.push(r[n]);rr(4,r.length);continue}else if(typeof r.byteLength=="number"){dp(r.length*2),rr(2,r.length),B.set(r,F),F+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof he){let s=r.string.indexOf("."),o=s===-1?0:s-r.string.length+1,i=BigInt(r.string.replace(".",""));B[F++]=196,t.push(i),t.push(o),rr(4,2);continue}if(r[rp])if("tag"in r&&"value"in r){t.push(r.value),rr(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let o=n[s];t.push(r[o]),t.push(o)}rr(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var M_,D_,yM,B,nr,F,L_=_(()=>{Je();M_=T(De());Ka();D_=typeof Buffer<"u",yM=2048,B=Pr(yM),nr=new DataView(B.buffer,B.byteOffset,B.byteLength),F=0});var pp,F_=_(()=>{N_();L_();pp={deserialize(e){return P_(e),$t(0,e.length)},serialize(e){try{return k_(e),fp()}catch(t){throw fp(),t}},resizeEncodingBuffer(e){Ya(e)}}});var Xa,Ja,Za=_(()=>{Ka();Xa=e=>Wa({tag:1,value:e.getTime()/1e3}),Ja=(e,t)=>{let r=s=>{let o=s;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o};if(t.__type!==void 0)return r(t.__type);let n=Object.keys(t).find(s=>s.toLowerCase()==="code");if(n&&t[n]!==void 0)return r(t[n])}});var gp,ec,hp,mp,yp=_(()=>{Ze();pe();Je();gp=T(Me());F_();Za();ec=class extends We{createSerializer(){let t=new hp;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new mp;return t.setSerdeContext(this.serdeContext),t}},hp=class extends We{value;write(t,r){this.value=this.serialize(t,r)}serialize(t,r){let n=L.of(t);if(r==null)return n.isIdempotencyToken()?(0,Ut.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??gp.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?Xa(new Date(Number(r)/1e3|0)):Xa(r);if(typeof r=="function"||typeof r=="object"){let s=r;if(n.isListSchema()&&Array.isArray(s)){let i=!!n.getMergedTraits().sparse,a=[],c=0;for(let u of s){let f=this.serialize(n.getValueSchema(),u);(f!=null||i)&&(a[c++]=f)}return a}if(s instanceof Date)return Xa(s);let o={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse;for(let a of Object.keys(s)){let c=this.serialize(n.getValueSchema(),s[a]);(c!=null||i)&&(o[a]=c)}}else if(n.isStructSchema())for(let[i,a]of n.structIterator()){let c=this.serialize(a,s[i]);c!=null&&(o[i]=c)}else if(n.isDocumentSchema())for(let i of Object.keys(s))o[i]=this.serialize(n.getValueSchema(),s[i]);return o}return r}flush(){let t=pp.serialize(this.value);return this.value=void 0,t}},mp=class extends We{read(t,r){let n=pp.deserialize(r);return this.readValue(t,n)}readValue(t,r){let n=L.of(t);if(n.isTimestampSchema()&&typeof r=="number")return So(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??gp.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let o=[],i=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let u=this.readValue(i,c);(u!=null||a)&&o.push(u)}return o}let s={};if(n.isMapSchema()){let o=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(i,r[a]);(c!=null||o)&&(s[a]=c)}}else if(n.isStructSchema())for(let[o,i]of n.structIterator())s[o]=this.readValue(i,r[o]);return s}else return r}}});var q_,tc,U_=_(()=>{Ze();pe();q_=T(Xe());yp();Za();tc=class extends Xt{codec=new ec;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);if(Object.assign(s.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),It(t.input)==="unit")delete s.body,delete s.headers["content-type"];else{s.body||(this.serializer.write(15,{}),s.body=this.serializer.flush());try{s.headers["content-length"]=String(s.body.byteLength)}catch{}}let{service:o,operation:i}=(0,q_.getSmithyContext)(n),a=`/service/${o}/operation/${i}`;return s.path.endsWith("/")?s.path+=a.slice(1):s.path+=a,s}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,s,o){let i=Ja(n,s)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let c={$metadata:o,$response:n,$fault:n.statusCode<=500?"client":"server"},u=ve.for(a),f;try{f=u.getSchema(i)}catch{s.Message&&(s.message=s.Message);let A=ve.for("smithy.ts.sdk.synthetic."+a),O=A.getBaseException();if(O){let k=A.getErrorCtor(O);throw Object.assign(new k({name:i}),c,s)}throw Object.assign(new Error(i),c,s)}let p=L.of(f),h=u.getErrorCtor(f),m=s.message??s.Message??"Unknown",y=new h(m),b={};for(let[C,A]of p.structIterator())b[C]=this.deserializer.readValue(A,s[C]);throw Object.assign(y,c,{$fault:p.getMergedTraits().error,message:m},b)}getDefaultContentType(){return"application/cbor"}}});var $_=_(()=>{Za();U_();yp()});var mt,os=_(()=>{pe();mt=class{resolveRestContentType(t,r){let n=r.getMemberSchemas(),s=Object.values(n).find(o=>!!o.getMergedTraits().httpPayload);if(s){let o=s.getMergedTraits().mediaType;return o||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:f,httpPrefixHeaders:p}=i.getMergedTraits();return!a&&!c&&!u&&!f&&p===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,n,s,o,i){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let u={$metadata:o,$response:n,$fault:n.statusCode<500?"client":"server"},f=ve.for(a);try{return{errorSchema:i?.(f,c)??f.getSchema(t),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";let h=ve.for("smithy.ts.sdk.synthetic."+a),m=h.getBaseException();if(m){let y=h.getErrorCtor(m)??Error;throw Object.assign(new y({name:c}),u,s)}throw Object.assign(new Error(c),u,s)}}setQueryCompatError(t,r){let n=r.headers?.["x-amzn-query-error"];if(t!==void 0&&n!=null){let[s,o]=n.split(";"),i=Object.entries(t),a={Code:s,Type:o};Object.assign(t,a);for(let[c,u]of i)a[c]=u;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var rc,B_=_(()=>{$_();pe();os();rc=class extends tc{awsQueryCompatible;mixin=new mt;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);return this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),s}async handleError(t,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=Ja(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=L.of(a),f=s.message??s.Message??"Unknown",p=ve.for(a[1]).getErrorCtor(a)??Error,h=new p(f),m={};for(let[y,b]of u.structIterator())m[y]=this.deserializer.readValue(b,s[y]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,m),Object.assign(h,c,{$fault:u.getMergedTraits().error,message:f},m)}}});var H_,j_,z_,V_=_(()=>{H_=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},j_=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},z_=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var He,Dr=_(()=>{He=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function G_(e,t,r){if(r?.source){let n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new he(n,"bigDecimal"):BigInt(n)}return t}var W_=_(()=>{Je()});var X_=R(Y_=>{"use strict";var xn=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},Mr=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Sp=()=>{let e=[],t=[],r=!1,n=new Set,s=p=>p.sort((h,m)=>K_[m.step]-K_[h.step]||Q_[m.priority||"normal"]-Q_[h.priority||"normal"]),o=p=>{let h=!1,m=y=>{let b=xn(y.name,y.aliases);if(b.includes(p)){h=!0;for(let C of b)n.delete(C);return!1}return!0};return e=e.filter(m),t=t.filter(m),h},i=p=>{let h=!1,m=y=>{if(y.middleware===p){h=!0;for(let b of xn(y.name,y.aliases))n.delete(b);return!1}return!0};return e=e.filter(m),t=t.filter(m),h},a=p=>(e.forEach(h=>{p.add(h.middleware,{...h})}),t.forEach(h=>{p.addRelativeTo(h.middleware,{...h})}),p.identifyOnResolve?.(f.identifyOnResolve()),p),c=p=>{let h=[];return p.before.forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h.push(p),p.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?h.push(m):h.push(...c(m))}),h},u=(p=!1)=>{let h=[],m=[],y={};return e.forEach(C=>{let A={...C,before:[],after:[]};for(let O of xn(A.name,A.aliases))y[O]=A;h.push(A)}),t.forEach(C=>{let A={...C,before:[],after:[]};for(let O of xn(A.name,A.aliases))y[O]=A;m.push(A)}),m.forEach(C=>{if(C.toMiddleware){let A=y[C.toMiddleware];if(A===void 0){if(p)return;throw new Error(`${C.toMiddleware} is not found when adding ${Mr(C.name,C.aliases)} middleware ${C.relation} ${C.toMiddleware}`)}C.relation==="after"&&A.after.push(C),C.relation==="before"&&A.before.push(C)}}),s(h).map(c).reduce((C,A)=>(C.push(...A),C),[])},f={add:(p,h={})=>{let{name:m,override:y,aliases:b}=h,C={step:"initialize",priority:"normal",middleware:p,...h},A=xn(m,b);if(A.length>0){if(A.some(O=>n.has(O))){if(!y)throw new Error(`Duplicate middleware name '${Mr(m,b)}'`);for(let O of A){let k=e.findIndex(z=>z.name===O||z.aliases?.some(ae=>ae===O));if(k===-1)continue;let U=e[k];if(U.step!==C.step||C.priority!==U.priority)throw new Error(`"${Mr(U.name,U.aliases)}" middleware with ${U.priority} priority in ${U.step} step cannot be overridden by "${Mr(m,b)}" middleware with ${C.priority} priority in ${C.step} step.`);e.splice(k,1)}}for(let O of A)n.add(O)}e.push(C)},addRelativeTo:(p,h)=>{let{name:m,override:y,aliases:b}=h,C={middleware:p,...h},A=xn(m,b);if(A.length>0){if(A.some(O=>n.has(O))){if(!y)throw new Error(`Duplicate middleware name '${Mr(m,b)}'`);for(let O of A){let k=t.findIndex(z=>z.name===O||z.aliases?.some(ae=>ae===O));if(k===-1)continue;let U=t[k];if(U.toMiddleware!==C.toMiddleware||U.relation!==C.relation)throw new Error(`"${Mr(U.name,U.aliases)}" middleware ${U.relation} "${U.toMiddleware}" middleware cannot be overridden by "${Mr(m,b)}" middleware ${C.relation} "${C.toMiddleware}" middleware.`);t.splice(k,1)}}for(let O of A)n.add(O)}t.push(C)},clone:()=>a(Sp()),use:p=>{p.applyToStack(f)},remove:p=>typeof p=="string"?o(p):i(p),removeByTag:p=>{let h=!1,m=y=>{let{tags:b,name:C,aliases:A}=y;if(b&&b.includes(p)){let O=xn(C,A);for(let k of O)n.delete(k);return h=!0,!1}return!0};return e=e.filter(m),t=t.filter(m),h},concat:p=>{let h=a(Sp());return h.use(p),h.identifyOnResolve(r||h.identifyOnResolve()||(p.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>u(!0).map(p=>{let h=p.step??p.relation+" "+p.toMiddleware;return Mr(p.name,p.aliases)+" - "+h}),identifyOnResolve(p){return typeof p=="boolean"&&(r=p),r},resolve:(p,h)=>{for(let m of u().map(y=>y.middleware).reverse())p=m(p,h);return r&&console.log(f.identify()),p}};return f},K_={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Q_={high:3,normal:2,low:1};Y_.constructStack=Sp});var Y=R(se=>{"use strict";var eb=X_(),vp=(Ze(),ee(YE)),wp=Er(),SM=(pe(),ee(Bd)),J_=(Je(),ee(kE)),_p=class{config;middlewareStack=eb.constructStack();initConfig;handlers;constructor(t){this.config=t}send(t,r,n){let s=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,i=s===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,s),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,s);if(o)a(t).then(c=>o(null,c.output),c=>o(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},Ep="***SensitiveInformation***";function bp(e,t){if(t==null)return t;let r=SM.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return Ep;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Ep}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Ep}else if(r.isStructSchema()&&typeof t=="object"){let n=t,s={};for(let[o,i]of r.structIterator())n[o]!=null&&(s[o]=bp(i,n[o]));return s}return t}var nc=class{middlewareStack=eb.constructStack();schema;static classBuilder(){return new Rp}resolveMiddlewareWithContext(t,r,n,{middlewareFn:s,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:f,CommandCtor:p}){for(let C of s.bind(this)(p,t,r,n))this.middlewareStack.use(C);let h=t.concat(this.middlewareStack),{logger:m}=r,y={logger:m,clientName:o,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[wp.SMITHY_CONTEXT_KEY]:{commandInstance:this,...u},...f},{requestHandler:b}=r;return h.resolve(C=>b.handle(C.request,n||{}),y)}},Rp=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends nc{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.input=n??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(n,s,o){let i=t._operationSchema,a=i?.[4]??i?.input,c=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(n,s,o,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(i?bp.bind(null,a):u=>u),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(i?bp.bind(null,c):u=>u),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}},EM="***SensitiveInformation***",wM=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],s=async function(i,a,c){let u=new n(i);if(typeof a=="function")this.send(u,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(u,a||{},c)}else return this.send(u,a)},o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[o]=s}},Tp=class e extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},tb=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(e[n]==null||e[n]==="")&&(e[n]=s)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},rb=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let s=bM(e),o=s.httpStatusCode?s.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||o||"UnknownError",$fault:"client",$metadata:s});throw tb(i,t)},_M=e=>({output:t,parsedBody:r,errorCode:n})=>{rb({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},bM=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),RM=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Z_=!1,TM=e=>{e&&!Z_&&parseInt(e.substring(1,e.indexOf(".")))<16&&(Z_=!0)},xM=e=>{let t=[];for(let r in wp.AlgorithmId){let n=wp.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},CM=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},vM=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),AM=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},nb=e=>Object.assign(xM(e),vM(e)),PM=nb,IM=e=>Object.assign(CM(e),AM(e)),OM=e=>Array.isArray(e)?e:[e],sb=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=sb(e[r]));return e},NM=e=>e!=null,xp=class{trace(){}debug(){}info(){}warn(){}error(){}};function ob(e,t,r){let n,s,o;if(typeof t>"u"&&typeof r>"u")n={},o=e;else{if(n=e,typeof t=="function")return s=t,o=r,kM(n,s,o);o=t}for(let i of Object.keys(o)){if(!Array.isArray(o[i])){n[i]=o[i];continue}ib(n,null,o,i)}return n}var DM=e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},MM=(e,t)=>{let r={};for(let n in t)ib(r,e,t,n);return r},kM=(e,t,r)=>ob(e,Object.entries(r).reduce((n,[s,o])=>(Array.isArray(o)?n[s]=o:typeof o=="function"?n[s]=[t,o()]:n[s]=[t,o],n),{})),ib=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=LM,c=FM,u=n]=i;(typeof a=="function"&&a(t[u])||typeof a!="function"&&a)&&(e[n]=c(t[u]));return}let[s,o]=r[n];if(typeof o=="function"){let i,a=s===void 0&&(i=o())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?e[n]=i:c&&(e[n]=o())}else{let i=s===void 0&&o!=null,a=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(i||a)&&(e[n]=o)}},LM=e=>e!=null,FM=e=>e,qM=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},UM=e=>e.toISOString().replace(".000Z","Z"),Cp=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(Cp);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=Cp(e[r]));return t}return e};Object.defineProperty(se,"collectBody",{enumerable:!0,get:function(){return vp.collectBody}});Object.defineProperty(se,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return vp.extendedEncodeURIComponent}});Object.defineProperty(se,"resolvedPath",{enumerable:!0,get:function(){return vp.resolvedPath}});se.Client=_p;se.Command=nc;se.NoOpLogger=xp;se.SENSITIVE_STRING=EM;se.ServiceException=Tp;se._json=Cp;se.convertMap=DM;se.createAggregatedClient=wM;se.decorateServiceException=tb;se.emitWarningIfUnsupportedVersion=TM;se.getArrayIfSingleItem=OM;se.getDefaultClientConfiguration=PM;se.getDefaultExtensionConfiguration=nb;se.getValueFromTextNode=sb;se.isSerializableHeaderValue=NM;se.loadConfigsForDefaultMode=RM;se.map=ob;se.resolveDefaultRuntimeConfig=IM;se.serializeDateTime=UM;se.serializeFloat=qM;se.take=MM;se.throwDefaultError=rb;se.withBaseException=_M;Object.keys(J_).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(se,e)&&Object.defineProperty(se,e,{enumerable:!0,get:function(){return J_[e]}})})});var ab,cb,sc,Ap=_(()=>{ab=T(Y()),cb=T(De()),sc=(e,t)=>(0,ab.collectBody)(e,t).then(r=>(t?.utf8Encoder??cb.toUtf8)(r))});var Cn,oc,kr,Po=_(()=>{Ap();Cn=(e,t)=>sc(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),oc=async(e,t)=>{let r=await Cn(e,t);return r.message=r.message??r.Message,r},kr=(e,t)=>{let r=(o,i)=>Object.keys(o).find(a=>a.toLowerCase()===i.toLowerCase()),n=o=>{let i=o;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=r(e.headers,"x-amzn-errortype");if(s!==void 0)return n(e.headers[s]);if(t&&typeof t=="object"){let o=r(t,"code");if(o&&t[o]!==void 0)return n(t[o]);if(t.__type!==void 0)return n(t.__type)}}});var ub,is,Pp=_(()=>{Ze();pe();Je();ub=T(Me());Dr();W_();Po();is=class extends He{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,G_):await Cn(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let n=r!==null&&typeof r=="object",s=L.of(t);if(s.isListSchema()&&Array.isArray(r)){let i=s.getValueSchema(),a=[],c=!!s.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._read(i,u));return a}else if(s.isMapSchema()&&n){let i=s.getValueSchema(),a={},c=!!s.getMergedTraits().sparse;for(let[u,f]of Object.entries(r))(c||f!=null)&&(a[u]=this._read(i,f));return a}else if(s.isStructSchema()&&n){let i={};for(let[a,c]of s.structIterator()){let u=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,f=this._read(c,r[u]);f!=null&&(i[a]=f)}return i}if(s.isBlobSchema()&&typeof r=="string")return(0,ub.fromBase64)(r);let o=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof r=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return Ge.from(r);if(s.isTimestampSchema()&&r!=null)switch(lt(s,this.settings)){case 5:return Jd(r);case 6:return Zd(r);case 7:return ef(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(s.isBigDecimalSchema()&&r!=null){if(r instanceof he)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new he(i.string,i.type):new he(String(r),"bigDecimal")}if(s.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(s.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof he?i[a]=c:i[a]=this._read(s,c);return i}else return structuredClone(r);return r}}});var lb,ic,db=_(()=>{Je();lb="\u039D",ic=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof he){let n=`${lb+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${lb+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,n]of this.values)t=t.replace(r,n);return t}}});var fb,as,Ip=_(()=>{Ze();pe();Je();fb=T(Me());Dr();db();as=class extends He{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=L.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=L.of(t).getName(!0))}flush(){let{rootSchema:t}=this;if(this.rootSchema=void 0,t?.isStructSchema()||t?.isDocumentSchema()){let r=new ic;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(t,r,n){let s=r!==null&&typeof r=="object",o=L.of(t);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],c=!!o.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._write(i,u));return a}else if(o.isMapSchema()&&s){let i=o.getValueSchema(),a={},c=!!o.getMergedTraits().sparse;for(let[u,f]of Object.entries(r))(c||f!=null)&&(a[u]=this._write(i,f));return a}else if(o.isStructSchema()&&s){let i={};for(let[a,c]of o.structIterator()){let u=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,f=this._write(c,r[a],o);f!==void 0&&(i[u]=f)}return i}if(!(r===null&&n?.isStructSchema())){if(o.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||o.isDocumentSchema()&&r instanceof Uint8Array)return o===this.rootSchema?r:(this.serdeContext?.base64Encoder??fb.toBase64)(r);if((o.isTimestampSchema()||o.isDocumentSchema())&&r instanceof Date)switch(lt(o,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return mo(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(o.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(o.isStringSchema()){if(typeof r>"u"&&o.isIdempotencyToken())return(0,Ut.v4)();let i=o.getMergedTraits().mediaType;if(r!=null&&i&&(i==="application/json"||i.endsWith("+json")))return Ge.from(r)}if(o.isDocumentSchema())if(s){let i=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof he?i[a]=c:i[a]=this._write(o,c);return i}else return structuredClone(r);return r}}}});var Lr,ac=_(()=>{Dr();Pp();Ip();Lr=class extends He{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new as(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new is(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var Fr,cc=_(()=>{Ze();pe();os();ac();Po();Fr=class extends Xt{serializer;deserializer;serviceTarget;codec;mixin=new mt;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=new Lr({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${t.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(It(t.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(t,r,n,s,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let i=kr(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=L.of(a),f=s.message??s.Message??"Unknown",p=ve.for(a[1]).getErrorCtor(a)??Error,h=new p(f),m={};for(let[y,b]of u.structIterator()){let C=b.getMergedTraits().jsonName??y;m[y]=this.codec.createDeserializer().readObject(b,s[C])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,m),Object.assign(h,c,{$fault:u.getMergedTraits().error,message:f},m)}}});var uc,pb=_(()=>{cc();uc=class extends Fr{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var lc,hb=_(()=>{cc();lc=class extends Fr{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var dc,mb=_(()=>{Ze();pe();os();ac();Po();dc=class extends mn{serializer;deserializer;codec;mixin=new mt;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Lr(r),this.serializer=new Sn(this.codec.createSerializer(),r),this.deserializer=new yn(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n),o=L.of(t.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return s.headers["content-type"]&&!s.body&&(s.body="{}"),s}async handleError(t,r,n,s,o){let i=kr(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=L.of(a),f=s.message??s.Message??"Unknown",p=ve.for(a[1]).getErrorCtor(a)??Error,h=new p(f);await this.deserializeHttpMessage(a,r,n,s);let m={};for(let[y,b]of u.structIterator()){let C=b.getMergedTraits().jsonName??y;m[y]=this.codec.createDeserializer().readObject(b,s[C])}throw Object.assign(h,c,{$fault:u.getMergedTraits().error,message:f},m)}getDefaultContentType(){return"application/json"}}});var gb,yb,Sb=_(()=>{gb=T(Y()),yb=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,gb.expectUnion)(e)}});var wb=R((n9,Eb)=>{(()=>{"use strict";var e={d:(l,d)=>{for(var g in d)e.o(d,g)&&!e.o(l,g)&&Object.defineProperty(l,g,{enumerable:!0,get:d[g]})},o:(l,d)=>Object.prototype.hasOwnProperty.call(l,d),r:l=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>yr,XMLParser:()=>oO,XMLValidator:()=>pO});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(l,d){let g=[],w=d.exec(l);for(;w;){let S=[];S.startIndex=d.lastIndex-w[0].length;let E=w.length;for(let v=0;v<E;v++)S.push(w[v]);g.push(S),w=d.exec(l)}return g}let o=function(l){return n.exec(l)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(l,d){d=Object.assign({},i,d);let g=[],w=!1,S=!1;l[0]==="\uFEFF"&&(l=l.substr(1));for(let E=0;E<l.length;E++)if(l[E]==="<"&&l[E+1]==="?"){if(E+=2,E=u(l,E),E.err)return E}else{if(l[E]!=="<"){if(c(l[E]))continue;return A("InvalidChar","char '"+l[E]+"' is not expected.",k(l,E))}{let v=E;if(E++,l[E]==="!"){E=f(l,E);continue}{let x=!1;l[E]==="/"&&(x=!0,E++);let I="";for(;E<l.length&&l[E]!==">"&&l[E]!==" "&&l[E]!=="	"&&l[E]!==`
`&&l[E]!=="\r";E++)I+=l[E];if(I=I.trim(),I[I.length-1]==="/"&&(I=I.substring(0,I.length-1),E--),!o(I)){let q;return q=I.trim().length===0?"Invalid space after '<'.":"Tag '"+I+"' is an invalid name.",A("InvalidTag",q,k(l,E))}let D=m(l,E);if(D===!1)return A("InvalidAttr","Attributes for '"+I+"' have open quote.",k(l,E));let j=D.value;if(E=D.index,j[j.length-1]==="/"){let q=E-j.length;j=j.substring(0,j.length-1);let J=b(j,d);if(J!==!0)return A(J.err.code,J.err.msg,k(l,q+J.err.line));w=!0}else if(x){if(!D.tagClosed)return A("InvalidTag","Closing tag '"+I+"' doesn't have proper closing.",k(l,E));if(j.trim().length>0)return A("InvalidTag","Closing tag '"+I+"' can't have attributes or invalid starting.",k(l,v));if(g.length===0)return A("InvalidTag","Closing tag '"+I+"' has not been opened.",k(l,v));{let q=g.pop();if(I!==q.tagName){let J=k(l,q.tagStartPos);return A("InvalidTag","Expected closing tag '"+q.tagName+"' (opened in line "+J.line+", col "+J.col+") instead of closing tag '"+I+"'.",k(l,v))}g.length==0&&(S=!0)}}else{let q=b(j,d);if(q!==!0)return A(q.err.code,q.err.msg,k(l,E-j.length+q.err.line));if(S===!0)return A("InvalidXml","Multiple possible root nodes found.",k(l,E));d.unpairedTags.indexOf(I)!==-1||g.push({tagName:I,tagStartPos:v}),w=!0}for(E++;E<l.length;E++)if(l[E]==="<"){if(l[E+1]==="!"){E++,E=f(l,E);continue}if(l[E+1]!=="?")break;if(E=u(l,++E),E.err)return E}else if(l[E]==="&"){let q=C(l,E);if(q==-1)return A("InvalidChar","char '&' is not expected.",k(l,E));E=q}else if(S===!0&&!c(l[E]))return A("InvalidXml","Extra text at the end",k(l,E));l[E]==="<"&&E--}}}return w?g.length==1?A("InvalidTag","Unclosed tag '"+g[0].tagName+"'.",k(l,g[0].tagStartPos)):!(g.length>0)||A("InvalidXml","Invalid '"+JSON.stringify(g.map((E=>E.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):A("InvalidXml","Start tag expected.",1)}function c(l){return l===" "||l==="	"||l===`
`||l==="\r"}function u(l,d){let g=d;for(;d<l.length;d++)if(!(l[d]!="?"&&l[d]!=" ")){let w=l.substr(g,d-g);if(d>5&&w==="xml")return A("InvalidXml","XML declaration allowed only at the start of the document.",k(l,d));if(l[d]=="?"&&l[d+1]==">"){d++;break}}return d}function f(l,d){if(l.length>d+5&&l[d+1]==="-"&&l[d+2]==="-"){for(d+=3;d<l.length;d++)if(l[d]==="-"&&l[d+1]==="-"&&l[d+2]===">"){d+=2;break}}else if(l.length>d+8&&l[d+1]==="D"&&l[d+2]==="O"&&l[d+3]==="C"&&l[d+4]==="T"&&l[d+5]==="Y"&&l[d+6]==="P"&&l[d+7]==="E"){let g=1;for(d+=8;d<l.length;d++)if(l[d]==="<")g++;else if(l[d]===">"&&(g--,g===0))break}else if(l.length>d+9&&l[d+1]==="["&&l[d+2]==="C"&&l[d+3]==="D"&&l[d+4]==="A"&&l[d+5]==="T"&&l[d+6]==="A"&&l[d+7]==="["){for(d+=8;d<l.length;d++)if(l[d]==="]"&&l[d+1]==="]"&&l[d+2]===">"){d+=2;break}}return d}let p='"',h="'";function m(l,d){let g="",w="",S=!1;for(;d<l.length;d++){if(l[d]===p||l[d]===h)w===""?w=l[d]:w!==l[d]||(w="");else if(l[d]===">"&&w===""){S=!0;break}g+=l[d]}return w===""&&{value:g,index:d,tagClosed:S}}let y=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function b(l,d){let g=s(l,y),w={};for(let S=0;S<g.length;S++){if(g[S][1].length===0)return A("InvalidAttr","Attribute '"+g[S][2]+"' has no space in starting.",U(g[S]));if(g[S][3]!==void 0&&g[S][4]===void 0)return A("InvalidAttr","Attribute '"+g[S][2]+"' is without value.",U(g[S]));if(g[S][3]===void 0&&!d.allowBooleanAttributes)return A("InvalidAttr","boolean attribute '"+g[S][2]+"' is not allowed.",U(g[S]));let E=g[S][2];if(!O(E))return A("InvalidAttr","Attribute '"+E+"' is an invalid name.",U(g[S]));if(w.hasOwnProperty(E))return A("InvalidAttr","Attribute '"+E+"' is repeated.",U(g[S]));w[E]=1}return!0}function C(l,d){if(l[++d]===";")return-1;if(l[d]==="#")return(function(w,S){let E=/\d/;for(w[S]==="x"&&(S++,E=/[\da-fA-F]/);S<w.length;S++){if(w[S]===";")return S;if(!w[S].match(E))break}return-1})(l,++d);let g=0;for(;d<l.length;d++,g++)if(!(l[d].match(/\w/)&&g<20)){if(l[d]===";")break;return-1}return d}function A(l,d,g){return{err:{code:l,msg:d,line:g.line||g,col:g.col}}}function O(l){return o(l)}function k(l,d){let g=l.substring(0,d).split(/\r?\n/);return{line:g.length,col:g[g.length-1].length+1}}function U(l){return l.startIndex+l[1].length}let z={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(l,d){return d},attributeValueProcessor:function(l,d){return d},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(l,d,g){return l},captureMetaData:!1},ae;ae=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class _e{constructor(d){this.tagname=d,this.child=[],this[":@"]={}}add(d,g){d==="__proto__"&&(d="#__proto__"),this.child.push({[d]:g})}addChild(d,g){d.tagname==="__proto__"&&(d.tagname="#__proto__"),d[":@"]&&Object.keys(d[":@"]).length>0?this.child.push({[d.tagname]:d.child,":@":d[":@"]}):this.child.push({[d.tagname]:d.child}),g!==void 0&&(this.child[this.child.length-1][ae]={startIndex:g})}static getMetaDataSymbol(){return ae}}function K(l,d){let g={};if(l[d+3]!=="O"||l[d+4]!=="C"||l[d+5]!=="T"||l[d+6]!=="Y"||l[d+7]!=="P"||l[d+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{d+=9;let w=1,S=!1,E=!1,v="";for(;d<l.length;d++)if(l[d]!=="<"||E)if(l[d]===">"){if(E?l[d-1]==="-"&&l[d-2]==="-"&&(E=!1,w--):w--,w===0)break}else l[d]==="["?S=!0:v+=l[d];else{if(S&&an(l,"!ENTITY",d)){let x,I;d+=7,[x,I,d]=oe(l,d+1),I.indexOf("&")===-1&&(g[x]={regx:RegExp(`&${x};`,"g"),val:I})}else if(S&&an(l,"!ELEMENT",d)){d+=8;let{index:x}=qI(l,d+1);d=x}else if(S&&an(l,"!ATTLIST",d))d+=8;else if(S&&an(l,"!NOTATION",d)){d+=9;let{index:x}=be(l,d+1);d=x}else{if(!an(l,"!--",d))throw new Error("Invalid DOCTYPE");E=!0}w++,v=""}if(w!==0)throw new Error("Unclosed DOCTYPE")}return{entities:g,i:d}}let X=(l,d)=>{for(;d<l.length&&/\s/.test(l[d]);)d++;return d};function oe(l,d){d=X(l,d);let g="";for(;d<l.length&&!/\s/.test(l[d])&&l[d]!=='"'&&l[d]!=="'";)g+=l[d],d++;if(zl(g),d=X(l,d),l.substring(d,d+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(l[d]==="%")throw new Error("Parameter entities are not supported");let w="";return[d,w]=Un(l,d,"entity"),[g,w,--d]}function be(l,d){d=X(l,d);let g="";for(;d<l.length&&!/\s/.test(l[d]);)g+=l[d],d++;zl(g),d=X(l,d);let w=l.substring(d,d+6).toUpperCase();if(w!=="SYSTEM"&&w!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${w}"`);d+=w.length,d=X(l,d);let S=null,E=null;if(w==="PUBLIC")[d,S]=Un(l,d,"publicIdentifier"),l[d=X(l,d)]!=='"'&&l[d]!=="'"||([d,E]=Un(l,d,"systemIdentifier"));else if(w==="SYSTEM"&&([d,E]=Un(l,d,"systemIdentifier"),!E))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:g,publicIdentifier:S,systemIdentifier:E,index:--d}}function Un(l,d,g){let w="",S=l[d];if(S!=='"'&&S!=="'")throw new Error(`Expected quoted string, found "${S}"`);for(d++;d<l.length&&l[d]!==S;)w+=l[d],d++;if(l[d]!==S)throw new Error(`Unterminated ${g} value`);return[++d,w]}function qI(l,d){d=X(l,d);let g="";for(;d<l.length&&!/\s/.test(l[d]);)g+=l[d],d++;if(!zl(g))throw new Error(`Invalid element name: "${g}"`);let w="";if(l[d=X(l,d)]==="E"&&an(l,"MPTY",d))d+=4;else if(l[d]==="A"&&an(l,"NY",d))d+=2;else{if(l[d]!=="(")throw new Error(`Invalid Element Expression, found "${l[d]}"`);for(d++;d<l.length&&l[d]!==")";)w+=l[d],d++;if(l[d]!==")")throw new Error("Unterminated content model")}return{elementName:g,contentModel:w.trim(),index:d}}function an(l,d,g){for(let w=0;w<d.length;w++)if(d[w]!==l[g+w+1])return!1;return!0}function zl(l){if(o(l))return l;throw new Error(`Invalid entity name ${l}`)}let UI=/^[-+]?0x[a-fA-F0-9]+$/,$I=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,BI={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},HI=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function $g(l){return typeof l=="function"?l:Array.isArray(l)?d=>{for(let g of l)if(typeof g=="string"&&d===g||g instanceof RegExp&&g.test(d))return!0}:()=>!1}class jI{constructor(d){this.options=d,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(g,w)=>String.fromCodePoint(Number.parseInt(w,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(g,w)=>String.fromCodePoint(Number.parseInt(w,16))}},this.addExternalEntities=zI,this.parseXml=QI,this.parseTextData=VI,this.resolveNameSpace=GI,this.buildAttributesMap=KI,this.isItStopNode=ZI,this.replaceEntitiesValue=XI,this.readStopNodeData=eO,this.saveTextToParentTag=JI,this.addChild=YI,this.ignoreAttributesFn=$g(this.options.ignoreAttributes)}}function zI(l){let d=Object.keys(l);for(let g=0;g<d.length;g++){let w=d[g];this.lastEntities[w]={regex:new RegExp("&"+w+";","g"),val:l[w]}}}function VI(l,d,g,w,S,E,v){if(l!==void 0&&(this.options.trimValues&&!w&&(l=l.trim()),l.length>0)){v||(l=this.replaceEntitiesValue(l));let x=this.options.tagValueProcessor(d,l,g,S,E);return x==null?l:typeof x!=typeof l||x!==l?x:this.options.trimValues||l.trim()===l?Bg(l,this.options.parseTagValue,this.options.numberParseOptions):l}}function GI(l){if(this.options.removeNSPrefix){let d=l.split(":"),g=l.charAt(0)==="/"?"/":"";if(d[0]==="xmlns")return"";d.length===2&&(l=g+d[1])}return l}let WI=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function KI(l,d,g){if(this.options.ignoreAttributes!==!0&&typeof l=="string"){let w=s(l,WI),S=w.length,E={};for(let v=0;v<S;v++){let x=this.resolveNameSpace(w[v][1]);if(this.ignoreAttributesFn(x,d))continue;let I=w[v][4],D=this.options.attributeNamePrefix+x;if(x.length)if(this.options.transformAttributeName&&(D=this.options.transformAttributeName(D)),D==="__proto__"&&(D="#__proto__"),I!==void 0){this.options.trimValues&&(I=I.trim()),I=this.replaceEntitiesValue(I);let j=this.options.attributeValueProcessor(x,I,d);E[D]=j==null?I:typeof j!=typeof I||j!==I?j:Bg(I,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(E[D]=!0)}if(!Object.keys(E).length)return;if(this.options.attributesGroupName){let v={};return v[this.options.attributesGroupName]=E,v}return E}}let QI=function(l){l=l.replace(/\r\n?/g,`
`);let d=new _e("!xml"),g=d,w="",S="";for(let E=0;E<l.length;E++)if(l[E]==="<")if(l[E+1]==="/"){let v=cn(l,">",E,"Closing Tag is not closed."),x=l.substring(E+2,v).trim();if(this.options.removeNSPrefix){let j=x.indexOf(":");j!==-1&&(x=x.substr(j+1))}this.options.transformTagName&&(x=this.options.transformTagName(x)),g&&(w=this.saveTextToParentTag(w,g,S));let I=S.substring(S.lastIndexOf(".")+1);if(x&&this.options.unpairedTags.indexOf(x)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${x}>`);let D=0;I&&this.options.unpairedTags.indexOf(I)!==-1?(D=S.lastIndexOf(".",S.lastIndexOf(".")-1),this.tagsNodeStack.pop()):D=S.lastIndexOf("."),S=S.substring(0,D),g=this.tagsNodeStack.pop(),w="",E=v}else if(l[E+1]==="?"){let v=Vl(l,E,!1,"?>");if(!v)throw new Error("Pi Tag is not closed.");if(w=this.saveTextToParentTag(w,g,S),!(this.options.ignoreDeclaration&&v.tagName==="?xml"||this.options.ignorePiTags)){let x=new _e(v.tagName);x.add(this.options.textNodeName,""),v.tagName!==v.tagExp&&v.attrExpPresent&&(x[":@"]=this.buildAttributesMap(v.tagExp,S,v.tagName)),this.addChild(g,x,S,E)}E=v.closeIndex+1}else if(l.substr(E+1,3)==="!--"){let v=cn(l,"-->",E+4,"Comment is not closed.");if(this.options.commentPropName){let x=l.substring(E+4,v-2);w=this.saveTextToParentTag(w,g,S),g.add(this.options.commentPropName,[{[this.options.textNodeName]:x}])}E=v}else if(l.substr(E+1,2)==="!D"){let v=K(l,E);this.docTypeEntities=v.entities,E=v.i}else if(l.substr(E+1,2)==="!["){let v=cn(l,"]]>",E,"CDATA is not closed.")-2,x=l.substring(E+9,v);w=this.saveTextToParentTag(w,g,S);let I=this.parseTextData(x,g.tagname,S,!0,!1,!0,!0);I==null&&(I=""),this.options.cdataPropName?g.add(this.options.cdataPropName,[{[this.options.textNodeName]:x}]):g.add(this.options.textNodeName,I),E=v+2}else{let v=Vl(l,E,this.options.removeNSPrefix),x=v.tagName,I=v.rawTagName,D=v.tagExp,j=v.attrExpPresent,q=v.closeIndex;this.options.transformTagName&&(x=this.options.transformTagName(x)),g&&w&&g.tagname!=="!xml"&&(w=this.saveTextToParentTag(w,g,S,!1));let J=g;J&&this.options.unpairedTags.indexOf(J.tagname)!==-1&&(g=this.tagsNodeStack.pop(),S=S.substring(0,S.lastIndexOf("."))),x!==d.tagname&&(S+=S?"."+x:x);let ne=E;if(this.isItStopNode(this.options.stopNodes,S,x)){let Z="";if(D.length>0&&D.lastIndexOf("/")===D.length-1)x[x.length-1]==="/"?(x=x.substr(0,x.length-1),S=S.substr(0,S.length-1),D=x):D=D.substr(0,D.length-1),E=v.closeIndex;else if(this.options.unpairedTags.indexOf(x)!==-1)E=v.closeIndex;else{let kt=this.readStopNodeData(l,I,q+1);if(!kt)throw new Error(`Unexpected end of ${I}`);E=kt.i,Z=kt.tagContent}let xe=new _e(x);x!==D&&j&&(xe[":@"]=this.buildAttributesMap(D,S,x)),Z&&(Z=this.parseTextData(Z,x,S,!0,j,!0,!0)),S=S.substr(0,S.lastIndexOf(".")),xe.add(this.options.textNodeName,Z),this.addChild(g,xe,S,ne)}else{if(D.length>0&&D.lastIndexOf("/")===D.length-1){x[x.length-1]==="/"?(x=x.substr(0,x.length-1),S=S.substr(0,S.length-1),D=x):D=D.substr(0,D.length-1),this.options.transformTagName&&(x=this.options.transformTagName(x));let Z=new _e(x);x!==D&&j&&(Z[":@"]=this.buildAttributesMap(D,S,x)),this.addChild(g,Z,S,ne),S=S.substr(0,S.lastIndexOf("."))}else{let Z=new _e(x);this.tagsNodeStack.push(g),x!==D&&j&&(Z[":@"]=this.buildAttributesMap(D,S,x)),this.addChild(g,Z,S,ne),g=Z}w="",E=q}}else w+=l[E];return d.child};function YI(l,d,g,w){this.options.captureMetaData||(w=void 0);let S=this.options.updateTag(d.tagname,g,d[":@"]);S===!1||(typeof S=="string"&&(d.tagname=S),l.addChild(d,w))}let XI=function(l){if(this.options.processEntities){for(let d in this.docTypeEntities){let g=this.docTypeEntities[d];l=l.replace(g.regx,g.val)}for(let d in this.lastEntities){let g=this.lastEntities[d];l=l.replace(g.regex,g.val)}if(this.options.htmlEntities)for(let d in this.htmlEntities){let g=this.htmlEntities[d];l=l.replace(g.regex,g.val)}l=l.replace(this.ampEntity.regex,this.ampEntity.val)}return l};function JI(l,d,g,w){return l&&(w===void 0&&(w=d.child.length===0),(l=this.parseTextData(l,d.tagname,g,!1,!!d[":@"]&&Object.keys(d[":@"]).length!==0,w))!==void 0&&l!==""&&d.add(this.options.textNodeName,l),l=""),l}function ZI(l,d,g){let w="*."+g;for(let S in l){let E=l[S];if(w===E||d===E)return!0}return!1}function cn(l,d,g,w){let S=l.indexOf(d,g);if(S===-1)throw new Error(w);return S+d.length-1}function Vl(l,d,g,w=">"){let S=(function(q,J,ne=">"){let Z,xe="";for(let kt=J;kt<q.length;kt++){let Sr=q[kt];if(Z)Sr===Z&&(Z="");else if(Sr==='"'||Sr==="'")Z=Sr;else if(Sr===ne[0]){if(!ne[1])return{data:xe,index:kt};if(q[kt+1]===ne[1])return{data:xe,index:kt}}else Sr==="	"&&(Sr=" ");xe+=Sr}})(l,d+1,w);if(!S)return;let E=S.data,v=S.index,x=E.search(/\s/),I=E,D=!0;x!==-1&&(I=E.substring(0,x),E=E.substring(x+1).trimStart());let j=I;if(g){let q=I.indexOf(":");q!==-1&&(I=I.substr(q+1),D=I!==S.data.substr(q+1))}return{tagName:I,tagExp:E,closeIndex:v,attrExpPresent:D,rawTagName:j}}function eO(l,d,g){let w=g,S=1;for(;g<l.length;g++)if(l[g]==="<")if(l[g+1]==="/"){let E=cn(l,">",g,`${d} is not closed`);if(l.substring(g+2,E).trim()===d&&(S--,S===0))return{tagContent:l.substring(w,g),i:E};g=E}else if(l[g+1]==="?")g=cn(l,"?>",g+1,"StopNode is not closed.");else if(l.substr(g+1,3)==="!--")g=cn(l,"-->",g+3,"StopNode is not closed.");else if(l.substr(g+1,2)==="![")g=cn(l,"]]>",g,"StopNode is not closed.")-2;else{let E=Vl(l,g,">");E&&((E&&E.tagName)===d&&E.tagExp[E.tagExp.length-1]!=="/"&&S++,g=E.closeIndex)}}function Bg(l,d,g){if(d&&typeof l=="string"){let w=l.trim();return w==="true"||w!=="false"&&(function(S,E={}){if(E=Object.assign({},BI,E),!S||typeof S!="string")return S;let v=S.trim();if(E.skipLike!==void 0&&E.skipLike.test(v))return S;if(S==="0")return 0;if(E.hex&&UI.test(v))return(function(I){if(parseInt)return parseInt(I,16);if(Number.parseInt)return Number.parseInt(I,16);if(window&&window.parseInt)return window.parseInt(I,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(v);if(v.search(/.+[eE].+/)!==-1)return(function(I,D,j){if(!j.eNotation)return I;let q=D.match(HI);if(q){let J=q[1]||"",ne=q[3].indexOf("e")===-1?"E":"e",Z=q[2],xe=J?I[Z.length+1]===ne:I[Z.length]===ne;return Z.length>1&&xe?I:Z.length!==1||!q[3].startsWith(`.${ne}`)&&q[3][0]!==ne?j.leadingZeros&&!xe?(D=(q[1]||"")+q[3],Number(D)):I:Number(D)}return I})(S,v,E);{let I=$I.exec(v);if(I){let D=I[1]||"",j=I[2],q=((x=I[3])&&x.indexOf(".")!==-1&&((x=x.replace(/0+$/,""))==="."?x="0":x[0]==="."?x="0"+x:x[x.length-1]==="."&&(x=x.substring(0,x.length-1))),x),J=D?S[j.length+1]===".":S[j.length]===".";if(!E.leadingZeros&&(j.length>1||j.length===1&&!J))return S;{let ne=Number(v),Z=String(ne);if(ne===0||ne===-0)return ne;if(Z.search(/[eE]/)!==-1)return E.eNotation?ne:S;if(v.indexOf(".")!==-1)return Z==="0"||Z===q||Z===`${D}${q}`?ne:S;let xe=j?q:v;return j?xe===Z||D+xe===Z?ne:S:xe===Z||xe===D+Z?ne:S}}return S}var x})(l,g)}return l!==void 0?l:""}let Gl=_e.getMetaDataSymbol();function tO(l,d){return Hg(l,d)}function Hg(l,d,g){let w,S={};for(let E=0;E<l.length;E++){let v=l[E],x=rO(v),I="";if(I=g===void 0?x:g+"."+x,x===d.textNodeName)w===void 0?w=v[x]:w+=""+v[x];else{if(x===void 0)continue;if(v[x]){let D=Hg(v[x],d,I),j=sO(D,d);v[Gl]!==void 0&&(D[Gl]=v[Gl]),v[":@"]?nO(D,v[":@"],I,d):Object.keys(D).length!==1||D[d.textNodeName]===void 0||d.alwaysCreateTextNode?Object.keys(D).length===0&&(d.alwaysCreateTextNode?D[d.textNodeName]="":D=""):D=D[d.textNodeName],S[x]!==void 0&&S.hasOwnProperty(x)?(Array.isArray(S[x])||(S[x]=[S[x]]),S[x].push(D)):d.isArray(x,I,j)?S[x]=[D]:S[x]=D}}}return typeof w=="string"?w.length>0&&(S[d.textNodeName]=w):w!==void 0&&(S[d.textNodeName]=w),S}function rO(l){let d=Object.keys(l);for(let g=0;g<d.length;g++){let w=d[g];if(w!==":@")return w}}function nO(l,d,g,w){if(d){let S=Object.keys(d),E=S.length;for(let v=0;v<E;v++){let x=S[v];w.isArray(x,g+"."+x,!0,!0)?l[x]=[d[x]]:l[x]=d[x]}}}function sO(l,d){let{textNodeName:g}=d,w=Object.keys(l).length;return w===0||!(w!==1||!l[g]&&typeof l[g]!="boolean"&&l[g]!==0)}class oO{constructor(d){this.externalEntities={},this.options=(function(g){return Object.assign({},z,g)})(d)}parse(d,g){if(typeof d!="string"){if(!d.toString)throw new Error("XML data is accepted in String or Bytes[] form.");d=d.toString()}if(g){g===!0&&(g={});let E=a(d,g);if(E!==!0)throw Error(`${E.err.msg}:${E.err.line}:${E.err.col}`)}let w=new jI(this.options);w.addExternalEntities(this.externalEntities);let S=w.parseXml(d);return this.options.preserveOrder||S===void 0?S:tO(S,this.options)}addEntity(d,g){if(g.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(d.indexOf("&")!==-1||d.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(g==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[d]=g}static getMetaDataSymbol(){return _e.getMetaDataSymbol()}}function iO(l,d){let g="";return d.format&&d.indentBy.length>0&&(g=`
`),jg(l,d,"",g)}function jg(l,d,g,w){let S="",E=!1;for(let v=0;v<l.length;v++){let x=l[v],I=aO(x);if(I===void 0)continue;let D="";if(D=g.length===0?I:`${g}.${I}`,I===d.textNodeName){let ne=x[I];cO(D,d)||(ne=d.tagValueProcessor(I,ne),ne=Vg(ne,d)),E&&(S+=w),S+=ne,E=!1;continue}if(I===d.cdataPropName){E&&(S+=w),S+=`<![CDATA[${x[I][0][d.textNodeName]}]]>`,E=!1;continue}if(I===d.commentPropName){S+=w+`<!--${x[I][0][d.textNodeName]}-->`,E=!0;continue}if(I[0]==="?"){let ne=zg(x[":@"],d),Z=I==="?xml"?"":w,xe=x[I][0][d.textNodeName];xe=xe.length!==0?" "+xe:"",S+=Z+`<${I}${xe}${ne}?>`,E=!0;continue}let j=w;j!==""&&(j+=d.indentBy);let q=w+`<${I}${zg(x[":@"],d)}`,J=jg(x[I],d,D,j);d.unpairedTags.indexOf(I)!==-1?d.suppressUnpairedNode?S+=q+">":S+=q+"/>":J&&J.length!==0||!d.suppressEmptyNode?J&&J.endsWith(">")?S+=q+`>${J}${w}</${I}>`:(S+=q+">",J&&w!==""&&(J.includes("/>")||J.includes("</"))?S+=w+d.indentBy+J+w:S+=J,S+=`</${I}>`):S+=q+"/>",E=!0}return S}function aO(l){let d=Object.keys(l);for(let g=0;g<d.length;g++){let w=d[g];if(l.hasOwnProperty(w)&&w!==":@")return w}}function zg(l,d){let g="";if(l&&!d.ignoreAttributes)for(let w in l){if(!l.hasOwnProperty(w))continue;let S=d.attributeValueProcessor(w,l[w]);S=Vg(S,d),S===!0&&d.suppressBooleanAttributes?g+=` ${w.substr(d.attributeNamePrefix.length)}`:g+=` ${w.substr(d.attributeNamePrefix.length)}="${S}"`}return g}function cO(l,d){let g=(l=l.substr(0,l.length-d.textNodeName.length-1)).substr(l.lastIndexOf(".")+1);for(let w in d.stopNodes)if(d.stopNodes[w]===l||d.stopNodes[w]==="*."+g)return!0;return!1}function Vg(l,d){if(l&&l.length>0&&d.processEntities)for(let g=0;g<d.entities.length;g++){let w=d.entities[g];l=l.replace(w.regex,w.val)}return l}let uO={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(l,d){return d},attributeValueProcessor:function(l,d){return d},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function yr(l){this.options=Object.assign({},uO,l),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=$g(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=fO),this.processTextOrObjNode=lO,this.options.format?(this.indentate=dO,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function lO(l,d,g,w){let S=this.j2x(l,g+1,w.concat(d));return l[this.options.textNodeName]!==void 0&&Object.keys(l).length===1?this.buildTextValNode(l[this.options.textNodeName],d,S.attrStr,g):this.buildObjectNode(S.val,d,S.attrStr,g)}function dO(l){return this.options.indentBy.repeat(l)}function fO(l){return!(!l.startsWith(this.options.attributeNamePrefix)||l===this.options.textNodeName)&&l.substr(this.attrPrefixLen)}yr.prototype.build=function(l){return this.options.preserveOrder?iO(l,this.options):(Array.isArray(l)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(l={[this.options.arrayNodeName]:l}),this.j2x(l,0,[]).val)},yr.prototype.j2x=function(l,d,g){let w="",S="",E=g.join(".");for(let v in l)if(Object.prototype.hasOwnProperty.call(l,v))if(l[v]===void 0)this.isAttribute(v)&&(S+="");else if(l[v]===null)this.isAttribute(v)||v===this.options.cdataPropName?S+="":v[0]==="?"?S+=this.indentate(d)+"<"+v+"?"+this.tagEndChar:S+=this.indentate(d)+"<"+v+"/"+this.tagEndChar;else if(l[v]instanceof Date)S+=this.buildTextValNode(l[v],v,"",d);else if(typeof l[v]!="object"){let x=this.isAttribute(v);if(x&&!this.ignoreAttributesFn(x,E))w+=this.buildAttrPairStr(x,""+l[v]);else if(!x)if(v===this.options.textNodeName){let I=this.options.tagValueProcessor(v,""+l[v]);S+=this.replaceEntitiesValue(I)}else S+=this.buildTextValNode(l[v],v,"",d)}else if(Array.isArray(l[v])){let x=l[v].length,I="",D="";for(let j=0;j<x;j++){let q=l[v][j];if(q!==void 0)if(q===null)v[0]==="?"?S+=this.indentate(d)+"<"+v+"?"+this.tagEndChar:S+=this.indentate(d)+"<"+v+"/"+this.tagEndChar;else if(typeof q=="object")if(this.options.oneListGroup){let J=this.j2x(q,d+1,g.concat(v));I+=J.val,this.options.attributesGroupName&&q.hasOwnProperty(this.options.attributesGroupName)&&(D+=J.attrStr)}else I+=this.processTextOrObjNode(q,v,d,g);else if(this.options.oneListGroup){let J=this.options.tagValueProcessor(v,q);J=this.replaceEntitiesValue(J),I+=J}else I+=this.buildTextValNode(q,v,"",d)}this.options.oneListGroup&&(I=this.buildObjectNode(I,v,D,d)),S+=I}else if(this.options.attributesGroupName&&v===this.options.attributesGroupName){let x=Object.keys(l[v]),I=x.length;for(let D=0;D<I;D++)w+=this.buildAttrPairStr(x[D],""+l[v][x[D]])}else S+=this.processTextOrObjNode(l[v],v,d,g);return{attrStr:w,val:S}},yr.prototype.buildAttrPairStr=function(l,d){return d=this.options.attributeValueProcessor(l,""+d),d=this.replaceEntitiesValue(d),this.options.suppressBooleanAttributes&&d==="true"?" "+l:" "+l+'="'+d+'"'},yr.prototype.buildObjectNode=function(l,d,g,w){if(l==="")return d[0]==="?"?this.indentate(w)+"<"+d+g+"?"+this.tagEndChar:this.indentate(w)+"<"+d+g+this.closeTag(d)+this.tagEndChar;{let S="</"+d+this.tagEndChar,E="";return d[0]==="?"&&(E="?",S=""),!g&&g!==""||l.indexOf("<")!==-1?this.options.commentPropName!==!1&&d===this.options.commentPropName&&E.length===0?this.indentate(w)+`<!--${l}-->`+this.newLine:this.indentate(w)+"<"+d+g+E+this.tagEndChar+l+this.indentate(w)+S:this.indentate(w)+"<"+d+g+E+">"+l+S}},yr.prototype.closeTag=function(l){let d="";return this.options.unpairedTags.indexOf(l)!==-1?this.options.suppressUnpairedNode||(d="/"):d=this.options.suppressEmptyNode?"/":`></${l}`,d},yr.prototype.buildTextValNode=function(l,d,g,w){if(this.options.cdataPropName!==!1&&d===this.options.cdataPropName)return this.indentate(w)+`<![CDATA[${l}]]>`+this.newLine;if(this.options.commentPropName!==!1&&d===this.options.commentPropName)return this.indentate(w)+`<!--${l}-->`+this.newLine;if(d[0]==="?")return this.indentate(w)+"<"+d+g+"?"+this.tagEndChar;{let S=this.options.tagValueProcessor(d,l);return S=this.replaceEntitiesValue(S),S===""?this.indentate(w)+"<"+d+g+this.closeTag(d)+this.tagEndChar:this.indentate(w)+"<"+d+g+">"+S+"</"+d+this.tagEndChar}},yr.prototype.replaceEntitiesValue=function(l){if(l&&l.length>0&&this.options.processEntities)for(let d=0;d<this.options.entities.length;d++){let g=this.options.entities[d];l=l.replace(g.regex,g.val)}return l};let pO={validate:a};Eb.exports=t})()});var _b=R(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.parseXML=BM;var $M=wb(),Op=new $M.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});Op.addEntity("#xD","\r");Op.addEntity("#10",`
`);function BM(e){return Op.parse(e,!0)}});var hc=R(pc=>{"use strict";var HM=_b();function jM(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function zM(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var fc=class{value;constructor(t){this.value=t}toString(){return zM(""+this.value)}},Dp=class e{name;children;attributes={};static of(t,r,n){let s=new e(t);return r!==void 0&&s.addChildNode(new fc(r)),n!==void 0&&s.withName(n),s}constructor(t,r=[]){this.name=t,this.children=r}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let s=e.of(r,t[r]).withName(n);this.c(s)}}l(t,r,n,s){t[r]!=null&&s().map(i=>{i.withName(n),this.c(i)})}lc(t,r,n,s){if(t[r]!=null){let o=s(),i=new e(n);o.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let o=n[s];o!=null&&(r+=` ${s}="${jM(""+o)}"`)}return r+=t?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(pc,"parseXML",{enumerable:!0,get:function(){return HM.parseXML}});pc.XmlNode=Dp;pc.XmlText=fc});var bb,Rb,Tb,qr,mc=_(()=>{bb=T(hc());Ze();pe();Rb=T(Y()),Tb=T(De());Dr();qr=class extends He{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new gn(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,n){let s=L.of(t),o=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(o).find(u=>!!u.getMemberTraits().eventPayload)){let u={},f=Object.keys(o)[0];return o[f].isBlobSchema()?u[f]=r:u[f]=this.read(o[f],r),u}let a=(this.serdeContext?.utf8Encoder??Tb.toUtf8)(r),c=this.parseXml(a);return this.readSchema(t,n?c[n]:c)}readSchema(t,r){let n=L.of(t);if(n.isUnitSchema())return;let s=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let o=!!s.sparse,i=!!s.xmlFlattened;if(n.isListSchema()){let c=n.getValueSchema(),u=[],f=c.getMergedTraits().xmlName??"member",p=i?r:(r[0]??r)[f],h=Array.isArray(p)?p:[p];for(let m of h)(m!=null||o)&&u.push(this.readSchema(c,m));return u}let a={};if(n.isMapSchema()){let c=n.getKeySchema(),u=n.getValueSchema(),f;i?f=Array.isArray(r)?r:[r]:f=Array.isArray(r.entry)?r.entry:[r.entry];let p=c.getMergedTraits().xmlName??"key",h=u.getMergedTraits().xmlName??"value";for(let m of f){let y=m[p],b=m[h];(b!=null||o)&&(a[y]=this.readSchema(u,b))}return a}if(n.isStructSchema()){for(let[c,u]of n.structIterator()){let f=u.getMergedTraits(),p=f.httpPayload?f.xmlName??u.getName():u.getMemberTraits().xmlName??c;r[p]!=null&&(a[c]=this.readSchema(u,r[p]))}return a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(t){if(t.length){let r;try{r=(0,bb.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let n="#text",s=Object.keys(r)[0],o=r[s];return o[n]&&(o[s]=o[n],delete o[n]),(0,Rb.getValueFromTextNode)(o)}return{}}}});var xb,Cb,gc,vb=_(()=>{Ze();pe();Je();xb=T(Y()),Cb=T(Me());Dr();gc=class extends He{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,n=""){this.buffer===void 0&&(this.buffer="");let s=L.of(t);if(n&&!n.endsWith(".")&&(n+="."),s.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??Cb.toBase64)(r)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):s.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Ut.v4)()));else if(s.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(s.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof he?r.string:String(r)));else if(s.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),lt(s,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,xb.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(s.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${s.getName(!0)}`);if(s.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let o=s.getValueSchema(),i=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let u=this.getKey("member",o.getMergedTraits().xmlName),f=i?`${n}${a}`:`${n}${u}.${a}`;this.write(o,c,f),++a}}}else if(s.isMapSchema()){if(r&&typeof r=="object"){let o=s.getKeySchema(),i=s.getValueSchema(),a=s.getMergedTraits().xmlFlattened,c=1;for(let[u,f]of Object.entries(r)){if(f==null)continue;let p=this.getKey("key",o.getMergedTraits().xmlName),h=a?`${n}${c}.${p}`:`${n}entry.${c}.${p}`,m=this.getKey("value",i.getMergedTraits().xmlName),y=a?`${n}${c}.${m}`:`${n}entry.${c}.${m}`;this.write(o,u,h),this.write(i,f,y),++c}}}else if(s.isStructSchema()){if(r&&typeof r=="object")for(let[o,i]of s.structIterator()){if(r[o]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(o,i.getMergedTraits().xmlName),c=`${n}${a}`;this.write(i,r[o],c)}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let n=r??t;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${Lt(t)}=`}writeValue(t){this.buffer+=Lt(t)}}});var cs,Mp=_(()=>{Ze();pe();os();mc();vb();cs=class extends Xt{options;serializer;deserializer;mixin=new mt;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new gc(r),this.deserializer=new qr(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(It(t.input)==="unit"||!s.body)&&(s.body="");let o=t.name.split("#")[1]??t.name;return s.body=`Action=${o}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(t,r,n){let s=this.deserializer,o=L.of(t.output),i={};if(n.statusCode>=300){let p=await Pt(n.body,r);p.byteLength>0&&Object.assign(i,await s.read(15,p)),await this.handleError(t,r,n,i,this.deserializeMetadata(n))}for(let p in n.headers){let h=n.headers[p];delete n.headers[p],n.headers[p.toLowerCase()]=h}let a=t.name.split("#")[1]??t.name,c=o.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,u=await Pt(n.body,r);return u.byteLength>0&&Object.assign(i,await s.read(o,u,c)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(t,r,n,s,o){let i=this.loadQueryErrorCode(n,s)??"Unknown",a=this.loadQueryError(s),c=this.loadQueryErrorMessage(s);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:u,errorMetadata:f}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,a,o,(b,C)=>{try{return b.getSchema(C)}catch{return b.find(O=>L.of(O).getMergedTraits().awsQueryError?.[0]===C)}}),p=L.of(u),h=ve.for(u[1]).getErrorCtor(u)??Error,m=new h(c),y={Error:a.Error};for(let[b,C]of p.structIterator()){let A=C.getMergedTraits().xmlName??b,O=a[A]??s[A];y[b]=this.deserializer.readSchema(C,O)}throw Object.assign(m,f,{$fault:p.getMergedTraits().error,message:c},y)}loadQueryErrorCode(t,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var yc,Ab=_(()=>{Mp();yc=class extends cs{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var Pb,Ib,us,Sc,Ec,kp=_(()=>{Pb=T(hc()),Ib=T(Y());Ap();us=(e,t)=>sc(e,t).then(r=>{if(r.length){let n;try{n=(0,Pb.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",o=Object.keys(n)[0],i=n[o];return i[s]&&(i[o]=i[s],delete i[s]),(0,Ib.getValueFromTextNode)(i)}return{}}),Sc=async(e,t)=>{let r=await us(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Ec=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var gt,Lp,wc,ls,Fp=_(()=>{gt=T(hc());Ze();pe();Je();Lp=T(Y()),wc=T(Me());Dr();ls=class extends He{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let n=L.of(t);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??wc.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let s=n.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,n){let s=t.getMergedTraits(),o=t.isMemberSchema()&&!s.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():s.xmlName??t.getName();if(!o||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=gt.XmlNode.of(o),[a,c]=this.getXmlnsAttribute(t,n);for(let[u,f]of t.structIterator()){let p=r[u];if(p!=null||f.isIdempotencyToken()){if(f.getMergedTraits().xmlAttribute){i.addAttribute(f.getMergedTraits().xmlName??u,this.writeSimple(f,p));continue}if(f.isListSchema())this.writeList(f,p,i,c);else if(f.isMapSchema())this.writeMap(f,p,i,c);else if(f.isStructSchema())i.addChildNode(this.writeStruct(f,p,c));else{let h=gt.XmlNode.of(f.getMergedTraits().xmlName??f.getMemberName());this.writeSimpleInto(f,p,h,c),i.addChildNode(h)}}}return c&&i.addAttribute(a,c),i}writeList(t,r,n,s){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let o=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),c=!!a.sparse,u=!!o.xmlFlattened,[f,p]=this.getXmlnsAttribute(t,s),h=(m,y)=>{if(i.isListSchema())this.writeList(i,Array.isArray(y)?y:[y],m,p);else if(i.isMapSchema())this.writeMap(i,y,m,p);else if(i.isStructSchema()){let b=this.writeStruct(i,y,p);m.addChildNode(b.withName(u?o.xmlName??t.getMemberName():a.xmlName??"member"))}else{let b=gt.XmlNode.of(u?o.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,y,b,p),m.addChildNode(b)}};if(u)for(let m of r)(c||m!=null)&&h(n,m);else{let m=gt.XmlNode.of(o.xmlName??t.getMemberName());p&&m.addAttribute(f,p);for(let y of r)(c||y!=null)&&h(m,y);n.addChildNode(m)}}writeMap(t,r,n,s,o=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),u=a.getMergedTraits().xmlName??"key",f=t.getValueSchema(),p=f.getMergedTraits(),h=p.xmlName??"value",m=!!p.sparse,y=!!i.xmlFlattened,[b,C]=this.getXmlnsAttribute(t,s),A=(O,k,U)=>{let z=gt.XmlNode.of(u,k),[ae,_e]=this.getXmlnsAttribute(a,C);_e&&z.addAttribute(ae,_e),O.addChildNode(z);let K=gt.XmlNode.of(h);f.isListSchema()?this.writeList(f,U,K,C):f.isMapSchema()?this.writeMap(f,U,K,C,!0):f.isStructSchema()?K=this.writeStruct(f,U,C):this.writeSimpleInto(f,U,K,C),O.addChildNode(K)};if(y){for(let[O,k]of Object.entries(r))if(m||k!=null){let U=gt.XmlNode.of(i.xmlName??t.getMemberName());A(U,O,k),n.addChildNode(U)}}else{let O;o||(O=gt.XmlNode.of(i.xmlName??t.getMemberName()),C&&O.addAttribute(b,C),n.addChildNode(O));for(let[k,U]of Object.entries(r))if(m||U!=null){let z=gt.XmlNode.of("entry");A(z,k,U),(o?n:O).addChildNode(z)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=L.of(t),s=null;if(r&&typeof r=="object")if(n.isBlobSchema())s=(this.serdeContext?.base64Encoder??wc.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(lt(n,this.settings)){case 5:s=r.toISOString().replace(".000Z","Z");break;case 6:s=(0,Lp.dateToUtcString)(r);break;case 7:s=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),s=(0,Lp.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof he?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(s=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?s=(0,Ut.v4)():s=String(r)),s===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return s}writeSimpleInto(t,r,n,s){let o=this.writeSimple(t,r),i=L.of(t),a=new gt.XmlText(o),[c,u]=this.getXmlnsAttribute(i,s);u&&n.addAttribute(c,u),n.addChildNode(a)}getXmlnsAttribute(t,r){let n=t.getMergedTraits(),[s,o]=n.xmlNamespace??[];return o&&o!==r?[s?`xmlns:${s}`:"xmlns",o]:[void 0,void 0]}}});var ds,qp=_(()=>{Dr();mc();Fp();ds=class extends He{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new ls(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new qr(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var _c,Ob=_(()=>{Ze();pe();os();kp();qp();_c=class extends mn{codec;serializer;deserializer;mixin=new mt;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new ds(r),this.serializer=new Sn(this.codec.createSerializer(),r),this.deserializer=new yn(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,n){let s=await super.serializeRequest(t,r,n),o=L.of(t.input);if(!s.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);i&&(s.headers["content-type"]=i)}return s.headers["content-type"]===this.getDefaultContentType()&&typeof s.body=="string"&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,s,o){let i=Ec(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,s,o),u=L.of(a),f=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",p=ve.for(a[1]).getErrorCtor(a)??Error,h=new p(f);await this.deserializeHttpMessage(a,r,n,s);let m={};for(let[y,b]of u.structIterator()){let C=b.getMergedTraits().xmlName??y,A=s.Error?.[C]??s[C];m[y]=this.codec.createDeserializer().readSchema(b,A)}throw Object.assign(h,c,{$fault:u.getMergedTraits().error,message:f},m)}getDefaultContentType(){return"application/xml"}}});var Nb={};Ye(Nb,{AwsEc2QueryProtocol:()=>yc,AwsJson1_0Protocol:()=>uc,AwsJson1_1Protocol:()=>lc,AwsJsonRpcProtocol:()=>Fr,AwsQueryProtocol:()=>cs,AwsRestJsonProtocol:()=>dc,AwsRestXmlProtocol:()=>_c,AwsSmithyRpcV2CborProtocol:()=>rc,JsonCodec:()=>Lr,JsonShapeDeserializer:()=>is,JsonShapeSerializer:()=>as,XmlCodec:()=>ds,XmlShapeDeserializer:()=>qr,XmlShapeSerializer:()=>ls,_toBool:()=>j_,_toNum:()=>z_,_toStr:()=>H_,awsExpectUnion:()=>yb,loadRestJsonErrorCode:()=>kr,loadRestXmlErrorCode:()=>Ec,parseJsonBody:()=>Cn,parseJsonErrorBody:()=>oc,parseXmlBody:()=>us,parseXmlErrorBody:()=>Sc});var Up=_(()=>{B_();V_();pb();hb();cc();mb();ac();Pp();Ip();Sb();Po();Ab();Mp();Ob();qp();mc();Fp();kp()});var sr={};Ye(sr,{AWSSDKSigV4Signer:()=>Lf,AwsEc2QueryProtocol:()=>yc,AwsJson1_0Protocol:()=>uc,AwsJson1_1Protocol:()=>lc,AwsJsonRpcProtocol:()=>Fr,AwsQueryProtocol:()=>cs,AwsRestJsonProtocol:()=>dc,AwsRestXmlProtocol:()=>_c,AwsSdkSigV4ASigner:()=>To,AwsSdkSigV4Signer:()=>tt,AwsSmithyRpcV2CborProtocol:()=>rc,JsonCodec:()=>Lr,JsonShapeDeserializer:()=>is,JsonShapeSerializer:()=>as,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>ts,NODE_SIGV4A_CONFIG_OPTIONS:()=>Xw,XmlCodec:()=>ds,XmlShapeDeserializer:()=>qr,XmlShapeSerializer:()=>ls,_toBool:()=>j_,_toNum:()=>z_,_toStr:()=>H_,awsExpectUnion:()=>yb,emitWarningIfUnsupportedVersion:()=>Jn,getBearerTokenEnvKey:()=>Ua,loadRestJsonErrorCode:()=>kr,loadRestXmlErrorCode:()=>Ec,parseJsonBody:()=>Cn,parseJsonErrorBody:()=>oc,parseXmlBody:()=>us,parseXmlErrorBody:()=>Sc,resolveAWSSDKSigV4Config:()=>R_,resolveAwsSdkSigV4AConfig:()=>Yw,resolveAwsSdkSigV4Config:()=>Tn,setCredentialFeature:()=>Cr,setFeature:()=>Mw,setTokenFeature:()=>Lw,state:()=>qa,validateSigningProperties:()=>es});var ke=_(()=>{Nt();tp();Up()});var ps=R(fs=>{"use strict";var VM=(et(),ee(Qn)),GM=Xn(),WM=ue(),Bt=(ke(),ee(sr)),Lb=void 0;function KM(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function QM(e){let t=VM.normalizeProvider(e.userAgentAppId??Lb),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await t();if(!KM(n)){let s=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var YM=/\d{12}\.ddb/;async function XM(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Bt.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let o=await t.retryStrategy();typeof o.acquireInitialRetryToken=="function"?o.constructor?.name?.includes("Adaptive")?Bt.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):Bt.setFeature(e,"RETRY_MODE_STANDARD","E"):Bt.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let o=e.endpointV2;switch(String(o?.url?.hostname).match(YM)&&Bt.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Bt.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Bt.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Bt.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let o=s;o.accountId&&Bt.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(o.$source??{}))Bt.setFeature(e,i,a)}}var Db="user-agent",$p="x-amz-user-agent",Mb=" ",Bp="/",JM=/[^!$%&'*+\-.^_`|~\w]/g,ZM=/[^!$%&'*+\-.^_`|~\w#]/g,kb="-",ek=1024;function tk(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=ek){t.length?t+=","+n:t+=n;continue}break}return t}var Fb=e=>(t,r)=>async n=>{let{request:s}=n;if(!WM.HttpRequest.isInstance(s))return t(n);let{headers:o}=s,i=r?.userAgent?.map(bc)||[],a=(await e.defaultUserAgentProvider()).map(bc);await XM(r,e,n);let c=r;a.push(`m/${tk(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let u=e?.customUserAgent?.map(bc)||[],f=await e.userAgentAppId();f&&a.push(bc(["app",`${f}`]));let p=GM.getUserAgentPrefix(),h=(p?[p]:[]).concat([...a,...i,...u]).join(Mb),m=[...a.filter(y=>y.startsWith("aws-sdk-")),...u].join(Mb);return e.runtime!=="browser"?(m&&(o[$p]=o[$p]?`${o[Db]} ${m}`:m),o[Db]=h):o[$p]=h,t({...n,request:s})},bc=e=>{let t=e[0].split(Bp).map(i=>i.replace(JM,kb)).join(Bp),r=e[1]?.replace(ZM,kb),n=t.indexOf(Bp),s=t.substring(0,n),o=t.substring(n+1);return s==="api"&&(o=o.toLowerCase()),[s,o,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},qb={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},rk=e=>({applyToStack:t=>{t.add(Fb(e),qb)}});fs.DEFAULT_UA_APP_ID=Lb;fs.getUserAgentMiddlewareOptions=qb;fs.getUserAgentPlugin=rk;fs.resolveUserAgentConfig=QM;fs.userAgentMiddleware=Fb});var Ub=R(hs=>{"use strict";var nk=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},sk=(e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n};hs.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(hs.SelectorType||(hs.SelectorType={}));hs.booleanSelector=nk;hs.numberSelector=sk});var yt=R(Le=>{"use strict";var Ur=Ub(),Rc=Xe(),ok=_n(),Hb="AWS_USE_DUALSTACK_ENDPOINT",jb="use_dualstack_endpoint",ik=!1,ak={environmentVariableSelector:e=>Ur.booleanSelector(e,Hb,Ur.SelectorType.ENV),configFileSelector:e=>Ur.booleanSelector(e,jb,Ur.SelectorType.CONFIG),default:!1},zb="AWS_USE_FIPS_ENDPOINT",Vb="use_fips_endpoint",ck=!1,uk={environmentVariableSelector:e=>Ur.booleanSelector(e,zb,Ur.SelectorType.ENV),configFileSelector:e=>Ur.booleanSelector(e,Vb,Ur.SelectorType.CONFIG),default:!1},lk=e=>{let{tls:t,endpoint:r,urlParser:n,useDualstackEndpoint:s}=e;return Object.assign(e,{tls:t??!0,endpoint:Rc.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:Rc.normalizeProvider(s??!1)})},dk=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await e.useDualstackEndpoint(),o=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:o})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},fk=e=>{let t=Rc.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:o}=e;return Object.assign(e,{tls:o??!0,endpoint:r?Rc.normalizeProvider(typeof r=="string"?s(r):r):()=>dk({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},Gb="AWS_REGION",Wb="region",pk={environmentVariableSelector:e=>e[Gb],configFileSelector:e=>e[Wb],default:()=>{throw new Error("Region is missing")}},hk={preferredFile:"credentials"},$b=new Set,mk=(e,t=ok.isValidHostLabel)=>{if(!$b.has(e)&&!t(e))if(e==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else $b.add(e)},Kb=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),gk=e=>Kb(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,yk=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{let n=typeof t=="function"?await t():t,s=gk(n);return mk(s),s},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return Kb(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},Bb=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:n})=>t===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,Sk=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),Ek=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",wk=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=e.match(s);if(o)return o[0].slice(1,-1)}},_k=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:o})=>{let i=Ek(e,{partitionHash:o}),a=e in s?e:o[i]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:r},u=Bb(s[a]?.variants,c),f=Bb(o[i]?.variants,c),p=Sk(a,{regionHostname:u,partitionHostname:f});if(p===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let h=wk(p,{signingRegion:s[a]?.signingRegion,regionRegex:o[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:n,hostname:p,...h&&{signingRegion:h},...s[a]?.signingService&&{signingService:s[a].signingService}}};Le.CONFIG_USE_DUALSTACK_ENDPOINT=jb;Le.CONFIG_USE_FIPS_ENDPOINT=Vb;Le.DEFAULT_USE_DUALSTACK_ENDPOINT=ik;Le.DEFAULT_USE_FIPS_ENDPOINT=ck;Le.ENV_USE_DUALSTACK_ENDPOINT=Hb;Le.ENV_USE_FIPS_ENDPOINT=zb;Le.NODE_REGION_CONFIG_FILE_OPTIONS=hk;Le.NODE_REGION_CONFIG_OPTIONS=pk;Le.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=ak;Le.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=uk;Le.REGION_ENV_NAME=Gb;Le.REGION_INI_NAME=Wb;Le.getRegionInfo=_k;Le.resolveCustomEndpointsConfig=lk;Le.resolveEndpointsConfig=fk;Le.resolveRegionConfig=yk});var Io=R(Tc=>{"use strict";var bk=ue(),Qb="content-length";function Yb(e){return t=>async r=>{let n=r.request;if(bk.HttpRequest.isInstance(n)){let{body:s,headers:o}=n;if(s&&Object.keys(o).map(i=>i.toLowerCase()).indexOf(Qb)===-1)try{let i=e(s);n.headers={...n.headers,[Qb]:String(i)}}catch{}}return t({...r,request:n})}}var Xb={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Rk=e=>({applyToStack:t=>{t.add(Yb(e.bodyLengthChecker),Xb)}});Tc.contentLengthMiddleware=Yb;Tc.contentLengthMiddlewareOptions=Xb;Tc.getContentLengthPlugin=Rk});var jp=R(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.getHomeDir=void 0;var Tk=require("os"),xk=require("path"),Hp={},Ck=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",vk=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${xk.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let s=Ck();return Hp[s]||(Hp[s]=(0,Tk.homedir)()),Hp[s]};xc.getHomeDir=vk});var zp=R(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.getSSOTokenFilepath=void 0;var Ak=require("crypto"),Pk=require("path"),Ik=jp(),Ok=e=>{let r=(0,Ak.createHash)("sha1").update(e).digest("hex");return(0,Pk.join)((0,Ik.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Cc.getSSOTokenFilepath=Ok});var Jb=R($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.getSSOTokenFromFile=$r.tokenIntercept=void 0;var Nk=require("fs"),Dk=zp(),{readFile:Mk}=Nk.promises;$r.tokenIntercept={};var kk=async e=>{if($r.tokenIntercept[e])return $r.tokenIntercept[e];let t=(0,Dk.getSSOTokenFilepath)(e),r=await Mk(t,"utf8");return JSON.parse(r)};$r.getSSOTokenFromFile=kk});var Zb=R(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.slurpFile=dt.fileIntercept=dt.filePromisesHash=void 0;var Lk=require("fs"),{readFile:Fk}=Lk.promises;dt.filePromisesHash={};dt.fileIntercept={};var qk=(e,t)=>dt.fileIntercept[e]!==void 0?dt.fileIntercept[e]:((!dt.filePromisesHash[e]||t?.ignoreCache)&&(dt.filePromisesHash[e]=Fk(e,"utf8")),dt.filePromisesHash[e]);dt.slurpFile=qk});var or=R(rt=>{"use strict";var Oo=jp(),eR=zp(),Vp=Jb(),vc=require("path"),Ac=Er(),No=Zb(),rR="AWS_PROFILE",nR="default",Uk=e=>e.profile||process.env[rR]||nR,vn=".",$k=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(vn);return r===-1?!1:Object.values(Ac.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let s=r.indexOf(vn),o=r.substring(0,s)===Ac.IniSectionType.PROFILE?r.substring(s+1):r;return t[o]=n,t},{...e.default&&{default:e.default}}),Bk="AWS_CONFIG_FILE",sR=()=>process.env[Bk]||vc.join(Oo.getHomeDir(),".aws","config"),Hk="AWS_SHARED_CREDENTIALS_FILE",jk=()=>process.env[Hk]||vc.join(Oo.getHomeDir(),".aws","credentials"),zk=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,Vk=["__proto__","profile __proto__"],Gp=e=>{let t={},r,n;for(let s of e.split(/\r?\n/)){let o=s.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,n=void 0;let a=o.substring(1,o.length-1),c=zk.exec(a);if(c){let[,u,,f]=c;Object.values(Ac.IniSectionType).includes(u)&&(r=[u,f].join(vn))}else r=a;if(Vk.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[c,u]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(u==="")n=c;else{n&&s.trimStart()===s&&(n=void 0),t[r]=t[r]||{};let f=n?[n,c].join(vn):c;t[r][f]=u}}}}return t},tR=()=>({}),oR=async(e={})=>{let{filepath:t=jk(),configFilepath:r=sR()}=e,n=Oo.getHomeDir(),s="~/",o=t;t.startsWith(s)&&(o=vc.join(n,t.slice(2)));let i=r;r.startsWith(s)&&(i=vc.join(n,r.slice(2)));let a=await Promise.all([No.slurpFile(i,{ignoreCache:e.ignoreCache}).then(Gp).then($k).catch(tR),No.slurpFile(o,{ignoreCache:e.ignoreCache}).then(Gp).catch(tR)]);return{configFile:a[0],credentialsFile:a[1]}},Gk=e=>Object.entries(e).filter(([t])=>t.startsWith(Ac.IniSectionType.SSO_SESSION+vn)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(vn)+1)]:n}),{}),Wk=()=>({}),Kk=async(e={})=>No.slurpFile(e.configFilepath??sR()).then(Gp).then(Gk).catch(Wk),Qk=(...e)=>{let t={};for(let r of e)for(let[n,s]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],s):t[n]=s;return t},Yk=async e=>{let t=await oR(e);return Qk(t.configFile,t.credentialsFile)},Xk={getFileRecord(){return No.fileIntercept},interceptFile(e,t){No.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return Vp.tokenIntercept},interceptToken(e,t){Vp.tokenIntercept[e]=t}};Object.defineProperty(rt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return Vp.getSSOTokenFromFile}});rt.CONFIG_PREFIX_SEPARATOR=vn;rt.DEFAULT_PROFILE=nR;rt.ENV_PROFILE=rR;rt.externalDataInterceptor=Xk;rt.getProfileName=Uk;rt.loadSharedConfigFiles=oR;rt.loadSsoSessionData=Kk;rt.parseKnownFiles=Yk;Object.keys(Oo).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(rt,e)&&Object.defineProperty(rt,e,{enumerable:!0,get:function(){return Oo[e]}})});Object.keys(eR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(rt,e)&&Object.defineProperty(rt,e,{enumerable:!0,get:function(){return eR[e]}})})});var ir=R(cR=>{"use strict";var Do=Ke(),iR=or();function aR(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var Jk=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new Do.CredentialsProviderError(r.message||`Not found in ENV: ${aR(e.toString())}`,{logger:t?.logger})}},Zk=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=iR.getProfileName(r),{configFile:s,credentialsFile:o}=await iR.loadSharedConfigFiles(r),i=o[n]||{},a=s[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let f=e(c,t==="config"?s:o);if(f===void 0)throw new Error;return f}catch(u){throw new Do.CredentialsProviderError(u.message||`Not found in config files w/ profile [${n}]: ${aR(e.toString())}`,{logger:r.logger})}},eL=e=>typeof e=="function",tL=e=>eL(e)?async()=>await e():Do.fromStatic(e),rL=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>{let{signingName:s,logger:o}=n,i={signingName:s,logger:o};return Do.memoize(Do.chain(Jk(e,i),Zk(t,n),tL(r)))};cR.loadConfig=rL});var fR=R(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.getEndpointUrlConfig=void 0;var uR=or(),lR="AWS_ENDPOINT_URL",dR="endpoint_url",nL=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(o=>o.toUpperCase()),n=t[[lR,...r].join("_")];if(n)return n;let s=t[lR];if(s)return s},configFileSelector:(t,r)=>{if(r&&t.services){let s=r[["services",t.services].join(uR.CONFIG_PREFIX_SEPARATOR)];if(s){let o=e.split(" ").map(a=>a.toLowerCase()),i=s[[o.join("_"),dR].join(uR.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=t[dR];if(n)return n},default:void 0});Pc.getEndpointUrlConfig=nL});var pR=R(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.getEndpointFromConfig=void 0;var sL=ir(),oL=fR(),iL=async e=>(0,sL.loadConfig)((0,oL.getEndpointUrlConfig)(e??""))();Ic.getEndpointFromConfig=iL});var Br=R(ar=>{"use strict";var mR=pR(),hR=xr(),aL=(et(),ee(Qn)),Oc=Xe(),cL=dn(),uL=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),hL(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!pL(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},lL=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,dL=/(\d+\.){3}\d+/,fL=/\.\./,pL=e=>lL.test(e)&&!dL.test(e)&&!fL.test(e),hL=e=>{let[t,r,n,,,s]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,i=!!(o&&r&&n&&s);if(o&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},mL=(e,t,r)=>{let n=async()=>{let s=r[e]??r[t];return typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:o,hostname:i,port:a,path:c}=s;return`${o}//${i}${a?":"+a:""}${c}`}}return s}:n},Wp=e=>typeof e=="object"?"url"in e?hR.parseUrl(e.url):e:hR.parseUrl(e),gR=async(e,t,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await mR.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(Wp(i)),r.isCustomEndpoint=!0)}let s=await yR(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},yR=async(e,t,r)=>{let n={},s=t?.getEndpointParameterInstructions?.()||{};for(let[o,i]of Object.entries(s))switch(i.type){case"staticContextParams":n[o]=i.value;break;case"contextParams":n[o]=e[i.name];break;case"clientContextParams":case"builtInParams":n[o]=await mL(i.name,o,r)();break;case"operationContextParams":n[o]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await uL(n),n},SR=({config:e,instructions:t})=>(r,n)=>async s=>{e.isCustomEndpoint&&aL.setFeature(n,"ENDPOINT_OVERRIDE","N");let o=await gR(s.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=o,n.authSchemes=o.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let c=Oc.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...s})},ER={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:cL.serializerMiddlewareOption.name},gL=(e,t)=>({applyToStack:r=>{r.addRelativeTo(SR({config:e,instructions:t}),ER)}}),yL=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=e,o=r!=null?async()=>Wp(await Oc.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:o,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Oc.normalizeProvider(n??!1),useFipsEndpoint:Oc.normalizeProvider(s??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!c&&(c=mR.getEndpointFromConfig(e.serviceId)),c),a},SL=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};ar.endpointMiddleware=SR;ar.endpointMiddlewareOptions=ER;ar.getEndpointFromInstructions=gR;ar.getEndpointPlugin=gL;ar.resolveEndpointConfig=yL;ar.resolveEndpointRequiredConfig=SL;ar.resolveParams=yR;ar.toEndpointV1=Wp});var Qp=R(Hr=>{"use strict";var EL=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],wL=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],_L=["TimeoutError","RequestTimeout","RequestTimeoutException"],bL=[500,502,503,504],RL=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],TL=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],wR=e=>e?.$retryable!==void 0,xL=e=>EL.includes(e.name),_R=e=>e.$metadata?.clockSkewCorrected,bR=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},CL=e=>e.$metadata?.httpStatusCode===429||wL.includes(e.name)||e.$retryable?.throttling==!0,Kp=(e,t=0)=>wR(e)||_R(e)||_L.includes(e.name)||RL.includes(e?.code||"")||TL.includes(e?.code||"")||bL.includes(e.$metadata?.httpStatusCode||0)||bR(e)||e.cause!==void 0&&t<=10&&Kp(e.cause,t+1),vL=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Kp(e)}return!1};Hr.isBrowserNetworkError=bR;Hr.isClockSkewCorrectedError=_R;Hr.isClockSkewError=xL;Hr.isRetryableByTrait=wR;Hr.isServerError=vL;Hr.isThrottlingError=CL;Hr.isTransientError=Kp});var ms=R(Ee=>{"use strict";var AL=Qp();Ee.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Ee.RETRY_MODES||(Ee.RETRY_MODES={}));var Yp=3,PL=Ee.RETRY_MODES.STANDARD,Nc=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>e.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),AL.isThrottlingError(t)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},Mo=100,eh=20*1e3,TR=500,Xp=500,xR=5,CR=10,vR=1,IL="amz-sdk-invocation-id",OL="amz-sdk-request",NL=()=>{let e=Mo;return{computeNextBackoffDelay:n=>Math.floor(Math.min(eh,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},RR=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(eh,e),getRetryCost:()=>r}),ko=class{maxAttempts;mode=Ee.RETRY_MODES.STANDARD;capacity=Xp;retryBackoffStrategy=NL();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return RR({retryDelay:Mo,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?TR:Mo);let o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(s);return this.capacity-=a,RR({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Xp,this.capacity+(t.getRetryCost()??vR))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Yp}`),Yp}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?CR:xR}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},Jp=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Ee.RETRY_MODES.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Nc,this.standardRetryStrategy=new ko(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},Zp=class extends ko{computeNextBackoffDelay;constructor(t,r=Mo){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let n=await super.refreshRetryTokenForRetry(t,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};Ee.AdaptiveRetryStrategy=Jp;Ee.ConfiguredRetryStrategy=Zp;Ee.DEFAULT_MAX_ATTEMPTS=Yp;Ee.DEFAULT_RETRY_DELAY_BASE=Mo;Ee.DEFAULT_RETRY_MODE=PL;Ee.DefaultRateLimiter=Nc;Ee.INITIAL_RETRY_TOKENS=Xp;Ee.INVOCATION_ID_HEADER=IL;Ee.MAXIMUM_RETRY_DELAY=eh;Ee.NO_RETRY_INCREMENT=vR;Ee.REQUEST_HEADER=OL;Ee.RETRY_COST=xR;Ee.StandardRetryStrategy=ko;Ee.THROTTLING_RETRY_DELAY_BASE=TR;Ee.TIMEOUT_RETRY_COST=CR});var AR=R(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.isStreamingPayload=void 0;var DL=require("stream"),ML=e=>e?.body instanceof DL.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;Dc.isStreamingPayload=ML});var cr=R(Ae=>{"use strict";var me=ms(),gs=ue(),jr=Qp(),IR=sf(),PR=Xe(),kL=Y(),LL=AR(),FL=(e,t)=>{let r=e,n=me.NO_RETRY_INCREMENT,s=me.RETRY_COST,o=me.TIMEOUT_RETRY_COST,i=e,a=p=>p.name==="TimeoutError"?o:s,c=p=>a(p)<=i;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:p=>{if(!c(p))throw new Error("No retry token available");let h=a(p);return i-=h,h},releaseRetryTokens:p=>{i+=p??n,i=Math.min(i,r)}})},OR=(e,t)=>Math.floor(Math.min(me.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),NR=e=>e?jr.isRetryableByTrait(e)||jr.isClockSkewError(e)||jr.isThrottlingError(e)||jr.isTransientError(e):!1,DR=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Mc=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=me.RETRY_MODES.STANDARD;constructor(t,r){this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??NR,this.delayDecider=r?.delayDecider??OR,this.retryQuota=r?.retryQuota??FL(me.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=me.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let s,o=0,i=0,a=await this.getMaxAttempts(),{request:c}=r;for(gs.HttpRequest.isInstance(c)&&(c.headers[me.INVOCATION_ID_HEADER]=IR.v4());;)try{gs.HttpRequest.isInstance(c)&&(c.headers[me.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:u,output:f}=await t(r);return n?.afterRequest&&n.afterRequest(u),this.retryQuota.releaseRetryTokens(s),f.$metadata.attempts=o+1,f.$metadata.totalRetryDelay=i,{response:u,output:f}}catch(u){let f=DR(u);if(o++,this.shouldRetry(f,o,a)){s=this.retryQuota.retrieveRetryTokens(f);let p=this.delayDecider(jr.isThrottlingError(f)?me.THROTTLING_RETRY_DELAY_BASE:me.DEFAULT_RETRY_DELAY_BASE,o),h=qL(f.$response),m=Math.max(h||0,p);i+=m,await new Promise(y=>setTimeout(y,m));continue}throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=o,f.$metadata.totalRetryDelay=i,f}}},qL=e=>{if(!gs.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},th=class extends Mc{rateLimiter;constructor(t,r){let{rateLimiter:n,...s}=r??{};super(t,s),this.rateLimiter=n??new me.DefaultRateLimiter,this.mode=me.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},rh="AWS_MAX_ATTEMPTS",nh="max_attempts",UL={environmentVariableSelector:e=>{let t=e[rh];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${rh} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[nh];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${nh} mast be a number, got "${t}"`);return r},default:me.DEFAULT_MAX_ATTEMPTS},$L=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,s=PR.normalizeProvider(n??me.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:s,retryStrategy:async()=>t||(await PR.normalizeProvider(r)()===me.RETRY_MODES.ADAPTIVE?new me.AdaptiveRetryStrategy(s):new me.StandardRetryStrategy(s))})},MR="AWS_RETRY_MODE",kR="retry_mode",BL={environmentVariableSelector:e=>e[MR],configFileSelector:e=>e[kR],default:me.DEFAULT_RETRY_MODE},LR=()=>e=>async t=>{let{request:r}=t;return gs.HttpRequest.isInstance(r)&&(delete r.headers[me.INVOCATION_ID_HEADER],delete r.headers[me.REQUEST_HEADER]),e(t)},FR={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},HL=e=>({applyToStack:t=>{t.addRelativeTo(LR(),FR)}}),qR=e=>(t,r)=>async n=>{let s=await e.retryStrategy(),o=await e.maxAttempts();if(jL(s)){s=s;let i=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0,{request:f}=n,p=gs.HttpRequest.isInstance(f);for(p&&(f.headers[me.INVOCATION_ID_HEADER]=IR.v4());;)try{p&&(f.headers[me.REQUEST_HEADER]=`attempt=${c+1}; max=${o}`);let{response:h,output:m}=await t(n);return s.recordSuccess(i),m.$metadata.attempts=c+1,m.$metadata.totalRetryDelay=u,{response:h,output:m}}catch(h){let m=zL(h);if(a=DR(h),p&&LL.isStreamingPayload(f))throw(r.logger instanceof kL.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await s.refreshRetryTokenForRetry(i,m)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=i.getRetryCount();let y=i.getRetryDelay();u+=y,await new Promise(b=>setTimeout(b,y))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,n)},jL=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",zL=e=>{let t={error:e,errorType:VL(e)},r=$R(e.$response);return r&&(t.retryAfterHint=r),t},VL=e=>jr.isThrottlingError(e)?"THROTTLING":jr.isTransientError(e)?"TRANSIENT":jr.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",UR={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},GL=e=>({applyToStack:t=>{t.add(qR(e),UR)}}),$R=e=>{if(!gs.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};Ae.AdaptiveRetryStrategy=th;Ae.CONFIG_MAX_ATTEMPTS=nh;Ae.CONFIG_RETRY_MODE=kR;Ae.ENV_MAX_ATTEMPTS=rh;Ae.ENV_RETRY_MODE=MR;Ae.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=UL;Ae.NODE_RETRY_MODE_CONFIG_OPTIONS=BL;Ae.StandardRetryStrategy=Mc;Ae.defaultDelayDecider=OR;Ae.defaultRetryDecider=NR;Ae.getOmitRetryHeadersPlugin=HL;Ae.getRetryAfterHint=$R;Ae.getRetryPlugin=GL;Ae.omitRetryHeadersMiddleware=LR;Ae.omitRetryHeadersMiddlewareOptions=FR;Ae.resolveRetryConfig=$L;Ae.retryMiddleware=qR;Ae.retryMiddlewareOptions=UR});var oh=R(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.resolveHttpAuthSchemeConfig=zr.defaultSecretsManagerHttpAuthSchemeProvider=zr.defaultSecretsManagerHttpAuthSchemeParametersProvider=void 0;var WL=(ke(),ee(sr)),sh=Xe(),KL=async(e,t,r)=>({operation:(0,sh.getSmithyContext)(t).operation,region:await(0,sh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});zr.defaultSecretsManagerHttpAuthSchemeParametersProvider=KL;function QL(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"secretsmanager",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var YL=e=>{let t=[];switch(e.operation){default:t.push(QL(e))}return t};zr.defaultSecretsManagerHttpAuthSchemeProvider=YL;var XL=e=>{let t=(0,WL.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,sh.normalizeProvider)(e.authSchemePreference??[])})};zr.resolveHttpAuthSchemeConfig=XL});var BR=R((xY,JL)=>{JL.exports={name:"@aws-sdk/client-secrets-manager",description:"AWS SDK for JavaScript Secrets Manager Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-secrets-manager","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo secrets-manager"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/credential-provider-node":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-secrets-manager",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-secrets-manager"}}});var ih=R(Vr=>{"use strict";var ZL=(Nt(),ee(vr)),eF=Ke(),HR="AWS_ACCESS_KEY_ID",jR="AWS_SECRET_ACCESS_KEY",zR="AWS_SESSION_TOKEN",VR="AWS_CREDENTIAL_EXPIRATION",GR="AWS_CREDENTIAL_SCOPE",WR="AWS_ACCOUNT_ID",tF=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[HR],r=process.env[jR],n=process.env[zR],s=process.env[VR],o=process.env[GR],i=process.env[WR];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...o&&{credentialScope:o},...i&&{accountId:i}};return ZL.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new eF.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};Vr.ENV_ACCOUNT_ID=WR;Vr.ENV_CREDENTIAL_SCOPE=GR;Vr.ENV_EXPIRATION=VR;Vr.ENV_KEY=HR;Vr.ENV_SECRET=jR;Vr.ENV_SESSION=zR;Vr.fromEnv=tF});var Fo=R(je=>{"use strict";var Ht=Ke(),rF=require("url"),nF=require("buffer"),sF=require("http"),dh=ir(),oF=xr();function Lo(e){return new Promise((t,r)=>{let n=sF.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new Ht.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new Ht.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:o=400}=s;(o<200||300<=o)&&(r(Object.assign(new Ht.ProviderError("Error response received from instance metadata service"),{statusCode:o})),n.destroy());let i=[];s.on("data",a=>{i.push(a)}),s.on("end",()=>{t(nF.Buffer.concat(i)),n.destroy()})}),n.end()})}var XR=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",JR=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),ZR=1e3,e0=0,fh=({maxRetries:e=e0,timeout:t=ZR})=>({maxRetries:e,timeout:t}),ch=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},kc="AWS_CONTAINER_CREDENTIALS_FULL_URI",Lc="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",uh="AWS_CONTAINER_AUTHORIZATION_TOKEN",iF=(e={})=>{let{timeout:t,maxRetries:r}=fh(e);return()=>ch(async()=>{let n=await dF({logger:e.logger}),s=JSON.parse(await aF(t,n));if(!XR(s))throw new Ht.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return JR(s)},r)},aF=async(e,t)=>(process.env[uh]&&(t.headers={...t.headers,Authorization:process.env[uh]}),(await Lo({...t,timeout:e})).toString()),cF="169.254.170.2",uF={localhost:!0,"127.0.0.1":!0},lF={"http:":!0,"https:":!0},dF=async({logger:e})=>{if(process.env[Lc])return{hostname:cF,path:process.env[Lc]};if(process.env[kc]){let t=rF.parse(process.env[kc]);if(!t.hostname||!(t.hostname in uF))throw new Ht.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in lF))throw new Ht.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Ht.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Lc} or ${kc} environment variable is set`,{tryNextLink:!1,logger:e})},lh=class e extends Ht.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r),this.tryNextLink=r,Object.setPrototypeOf(this,e.prototype)}};je.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(je.Endpoint||(je.Endpoint={}));var fF="AWS_EC2_METADATA_SERVICE_ENDPOINT",pF="ec2_metadata_service_endpoint",hF={environmentVariableSelector:e=>e[fF],configFileSelector:e=>e[pF],default:void 0},ys;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(ys||(ys={}));var mF="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",gF="ec2_metadata_service_endpoint_mode",yF={environmentVariableSelector:e=>e[mF],configFileSelector:e=>e[gF],default:ys.IPv4},t0=async()=>oF.parseUrl(await SF()||await EF()),SF=async()=>dh.loadConfig(hF)(),EF=async()=>{let e=await dh.loadConfig(yF)();switch(e){case ys.IPv4:return je.Endpoint.IPv4;case ys.IPv6:return je.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(ys)}`)}},wF=300,_F=300,bF="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",KR=(e,t)=>{let r=wF+Math.floor(Math.random()*_F),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+bF);let s=e.originalExpiration??e.expiration;return{...e,...s?{originalExpiration:s}:{},expiration:n}},RF=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let s;try{s=await e(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=KR(s,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),s=KR(n,r);else throw o}return n=s,s}},r0="/latest/meta-data/iam/security-credentials/",TF="/latest/api/token",ah="AWS_EC2_METADATA_V1_DISABLED",QR="ec2_metadata_v1_disabled",YR="x-aws-ec2-metadata-token",xF=(e={})=>RF(CF(e),{logger:e.logger}),CF=(e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:s,maxRetries:o}=fh(e),i=async(a,c)=>{if(t||c.headers?.[YR]==null){let p=!1,h=!1,m=await dh.loadConfig({environmentVariableSelector:y=>{let b=y[ah];if(h=!!b&&b!=="false",b===void 0)throw new Ht.CredentialsProviderError(`${ah} not set in env, checking config file next.`,{logger:e.logger});return h},configFileSelector:y=>{let b=y[QR];return p=!!b&&b!=="false",p},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||m){let y=[];throw e.ec2MetadataV1Disabled&&y.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),p&&y.push(`config file profile (${QR})`),h&&y.push(`process environment variable (${ah})`),new lh(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${y.join(", ")}].`)}}let f=(await ch(async()=>{let p;try{p=await AF(c)}catch(h){throw h.statusCode===401&&(t=!1),h}return p},a)).trim();return ch(async()=>{let p;try{p=await PF(f,c,e)}catch(h){throw h.statusCode===401&&(t=!1),h}return p},a)};return async()=>{let a=await t0();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(o,{...a,timeout:s});{let c;try{c=(await vF({...a,timeout:s})).toString()}catch(u){if(u?.statusCode===400)throw Object.assign(u,{message:"EC2 Metadata token request returned error"});return(u.message==="TimeoutError"||[403,404,405].includes(u.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(o,{...a,timeout:s})}return i(o,{...a,headers:{[YR]:c},timeout:s})}}},vF=async e=>Lo({...e,path:TF,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),AF=async e=>(await Lo({...e,path:r0})).toString(),PF=async(e,t,r)=>{let n=JSON.parse((await Lo({...t,path:r0+e})).toString());if(!XR(n))throw new Ht.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return JR(n)};je.DEFAULT_MAX_RETRIES=e0;je.DEFAULT_TIMEOUT=ZR;je.ENV_CMDS_AUTH_TOKEN=uh;je.ENV_CMDS_FULL_URI=kc;je.ENV_CMDS_RELATIVE_URI=Lc;je.fromContainerMetadata=iF;je.fromInstanceMetadata=xF;je.getInstanceMetadataEndpoint=t0;je.httpRequest=Lo;je.providerConfigFromInit=fh});var n0=R(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.checkUrl=void 0;var IF=Ke(),OF="169.254.170.2",NF="169.254.170.23",DF="[fd00:ec2::23]",MF=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===OF||e.hostname===NF||e.hostname===DF)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=s=>{let o=parseInt(s,10);return 0<=o&&o<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new IF.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};Fc.checkUrl=MF});var s0=R(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.createGetRequest=qF;qc.getCredentials=UF;var ph=Ke(),kF=ue(),LF=Y(),FF=ma();function qF(e){return new kF.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function UF(e,t){let n=await(0,FF.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new ph.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,LF.parseRfc3339DateTime)(s.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new ph.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:s.Code,Message:s.Message})}throw new ph.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var o0=R(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.retryWrapper=void 0;var $F=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(o=>setTimeout(o,r))}return await e()};Uc.retryWrapper=$F});var c0=R($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.fromHttp=void 0;var BF=(yo(),ee(go)),HF=(Nt(),ee(vr)),jF=fn(),i0=Ke(),zF=BF.__importDefault(require("fs/promises")),VF=n0(),a0=s0(),GF=o0(),WF="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",KF="http://169.254.170.2",QF="AWS_CONTAINER_CREDENTIALS_FULL_URI",YF="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",XF="AWS_CONTAINER_AUTHORIZATION_TOKEN",JF=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[WF],n=e.awsContainerCredentialsFullUri??process.env[QF],s=e.awsContainerAuthorizationToken??process.env[XF],o=e.awsContainerAuthorizationTokenFile??process.env[YF],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),s&&o&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${KF}${r}`;else throw new i0.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,VF.checkUrl)(a,e.logger);let c=jF.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,GF.retryWrapper)(async()=>{let u=(0,a0.createGetRequest)(a);s?u.headers.Authorization=s:o&&(u.headers.Authorization=(await zF.default.readFile(o)).toString());try{let f=await c.handle(u);return(0,a0.getCredentials)(f.response).then(p=>(0,HF.setCredentialFeature)(p,"CREDENTIALS_HTTP","z"))}catch(f){throw new i0.CredentialsProviderError(String(f),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};$c.fromHttp=JF});var hh=R(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.fromHttp=void 0;var ZF=c0();Object.defineProperty(Bc,"fromHttp",{enumerable:!0,get:function(){return ZF.fromHttp}})});function eq(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function tq(e){return{schemeId:"smithy.api#noAuth"}}var qo,u0,l0,d0,mh=_(()=>{ke();qo=T(Xe()),u0=async(e,t,r)=>({operation:(0,qo.getSmithyContext)(t).operation,region:await(0,qo.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});l0=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(tq(e));break}default:t.push(eq(e))}return t},d0=e=>{let t=Tn(e);return Object.assign(t,{authSchemePreference:(0,qo.normalizeProvider)(e.authSchemePreference??[])})}});var f0,p0,gh=_(()=>{f0=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),p0={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Hc,yh=_(()=>{Hc={name:"@aws-sdk/nested-clients",version:"3.928.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var Uo=R(An=>{"use strict";var h0=require("os"),Sh=require("process"),nq=ps(),m0={isCrtAvailable:!1},sq=()=>m0.isCrtAvailable?["md/crt-avail"]:null,g0=({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${h0.platform()}`,h0.release()],["lang/js"],["md/nodejs",`${Sh.versions.node}`]],s=sq();s&&n.push(s),e&&n.push([`api/${e}`,t]),Sh.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${Sh.env.AWS_EXECUTION_ENV}`]);let o=await r?.userAgentAppId?.();return o?[...n,[`app/${o}`]]:[...n]},oq=g0,y0="AWS_SDK_UA_APP_ID",S0="sdk_ua_app_id",iq="sdk-ua-app-id",aq={environmentVariableSelector:e=>e[y0],configFileSelector:e=>e[S0]??e[iq],default:nq.DEFAULT_UA_APP_ID};An.NODE_APP_ID_CONFIG_OPTIONS=aq;An.UA_APP_ID_ENV_NAME=y0;An.UA_APP_ID_INI_NAME=S0;An.createDefaultUserAgentProvider=g0;An.crtAvailability=m0;An.defaultUserAgent=oq});var $o=R(_0=>{"use strict";var Eh=Bn(),cq=De(),uq=require("buffer"),E0=require("crypto"),wh=class{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(cq.toUint8Array(w0(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?E0.createHmac(this.algorithmIdentifier,w0(this.secret)):E0.createHash(this.algorithmIdentifier)}};function w0(e,t){return uq.Buffer.isBuffer(e)?e:typeof e=="string"?Eh.fromString(e,t):ArrayBuffer.isView(e)?Eh.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):Eh.fromArrayBuffer(e)}_0.Hash=wh});var Bo=R(b0=>{"use strict";var _h=require("node:fs"),lq=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof _h.ReadStream){if(e.path!=null)return _h.lstatSync(e.path).size;if(typeof e.fd=="number")return _h.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};b0.calculateBodyLength=lq});var N0,Et,R0,Ho,Ss,Es,ur,bh,Rh,T0,x0,C0,D0,M0,St,v0,k0,A0,P0,I0,O0,dq,L0,F0=_(()=>{N0="required",Et="argv",R0="isSet",Ho="booleanEquals",Ss="error",Es="endpoint",ur="tree",bh="PartitionResult",Rh="getAttr",T0={[N0]:!1,type:"string"},x0={[N0]:!0,default:!1,type:"boolean"},C0={ref:"Endpoint"},D0={fn:Ho,[Et]:[{ref:"UseFIPS"},!0]},M0={fn:Ho,[Et]:[{ref:"UseDualStack"},!0]},St={},v0={fn:Rh,[Et]:[{ref:bh},"supportsFIPS"]},k0={ref:bh},A0={fn:Ho,[Et]:[!0,{fn:Rh,[Et]:[k0,"supportsDualStack"]}]},P0=[D0],I0=[M0],O0=[{ref:"Region"}],dq={version:"1.0",parameters:{Region:T0,UseDualStack:x0,UseFIPS:x0,Endpoint:T0},rules:[{conditions:[{fn:R0,[Et]:[C0]}],rules:[{conditions:P0,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ss},{conditions:I0,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ss},{endpoint:{url:C0,properties:St,headers:St},type:Es}],type:ur},{conditions:[{fn:R0,[Et]:O0}],rules:[{conditions:[{fn:"aws.partition",[Et]:O0,assign:bh}],rules:[{conditions:[D0,M0],rules:[{conditions:[{fn:Ho,[Et]:[!0,v0]},A0],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:St,headers:St},type:Es}],type:ur},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ss}],type:ur},{conditions:P0,rules:[{conditions:[{fn:Ho,[Et]:[v0,!0]}],rules:[{conditions:[{fn:"stringEquals",[Et]:[{fn:Rh,[Et]:[k0,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:St,headers:St},type:Es},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:St,headers:St},type:Es}],type:ur},{error:"FIPS is enabled but this partition does not support FIPS",type:Ss}],type:ur},{conditions:I0,rules:[{conditions:[A0],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:St,headers:St},type:Es}],type:ur},{error:"DualStack is enabled but this partition does not support DualStack",type:Ss}],type:ur},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:St,headers:St},type:Es}],type:ur}],type:ur},{error:"Invalid Configuration: Missing Region",type:Ss}]},L0=dq});var q0,ws,fq,U0,$0=_(()=>{q0=T(Xn()),ws=T(_n());F0();fq=new ws.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),U0=(e,t={})=>fq.get(e,()=>(0,ws.resolveEndpoint)(L0,{endpointParams:e,logger:t.logger}));ws.customEndpointFunctions.aws=q0.awsEndpointFunctions});var B0,H0,jc,zc,j0,z0=_(()=>{ke();et();B0=T(Y()),H0=T(xr()),jc=T(Me()),zc=T(De());mh();$0();j0=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??jc.fromBase64,base64Encoder:e?.base64Encoder??jc.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??U0,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??l0,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new tt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Jt}],logger:e?.logger??new B0.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??H0.parseUrl,utf8Decoder:e?.utf8Decoder??zc.fromUtf8,utf8Encoder:e?.utf8Encoder??zc.toUtf8})});var jo=R(K0=>{"use strict";var pq=yt(),V0=ir(),hq=Ke(),mq="AWS_EXECUTION_ENV",G0="AWS_REGION",W0="AWS_DEFAULT_REGION",gq="AWS_EC2_METADATA_DISABLED",yq=["in-region","cross-region","mobile","standard","legacy"],Sq="/latest/meta-data/placement/region",Eq="AWS_DEFAULTS_MODE",wq="defaults_mode",_q={environmentVariableSelector:e=>e[Eq],configFileSelector:e=>e[wq],default:"legacy"},bq=({region:e=V0.loadConfig(pq.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=V0.loadConfig(_q)}={})=>hq.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return Rq(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${yq.join(", ")}, got ${r}`)}}),Rq=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await Tq();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},Tq=async()=>{if(process.env[mq]&&(process.env[G0]||process.env[W0]))return process.env[G0]??process.env[W0];if(!process.env[gq])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>T(Fo())),r=await e();return(await t({...r,path:Sq})).toString()}catch{}};K0.resolveDefaultsModeConfig=bq});var Vc,Wr,Q0,Gc,Gr,Wc,Y0,X0,J0,Z0,eT,tT,rT=_(()=>{yh();ke();Vc=T(Uo()),Wr=T(yt()),Q0=T($o()),Gc=T(cr()),Gr=T(ir()),Wc=T(fn()),Y0=T(Bo()),X0=T(ms());z0();J0=T(Y()),Z0=T(jo()),eT=T(Y()),tT=e=>{(0,eT.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Z0.resolveDefaultsModeConfig)(e),r=()=>t().then(J0.loadConfigsForDefaultMode),n=j0(e);Jn(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Gr.loadConfig)(ts,s),bodyLengthChecker:e?.bodyLengthChecker??Y0.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Vc.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Hc.version}),maxAttempts:e?.maxAttempts??(0,Gr.loadConfig)(Gc.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Gr.loadConfig)(Wr.NODE_REGION_CONFIG_OPTIONS,{...Wr.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Wc.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Gr.loadConfig)({...Gc.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||X0.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Q0.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Wc.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Gr.loadConfig)(Wr.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,Gr.loadConfig)(Wr.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,Gr.loadConfig)(Vc.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var sT=R(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.warning=void 0;_s.stsRegionDefaultResolver=Cq;var nT=yt(),xq=ir();function Cq(e={}){return(0,xq.loadConfig)({...nT.NODE_REGION_CONFIG_OPTIONS,async default(){return _s.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...nT.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}_s.warning={silence:!1}});var bs=R(jt=>{"use strict";var zo=yt(),oT=sT(),vq=e=>({setRegion(t){e.region=t},region(){return e.region}}),Aq=e=>({region:e.region()});Object.defineProperty(jt,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return zo.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(jt,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return zo.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(jt,"REGION_ENV_NAME",{enumerable:!0,get:function(){return zo.REGION_ENV_NAME}});Object.defineProperty(jt,"REGION_INI_NAME",{enumerable:!0,get:function(){return zo.REGION_INI_NAME}});Object.defineProperty(jt,"resolveRegionConfig",{enumerable:!0,get:function(){return zo.resolveRegionConfig}});jt.getAwsRegionExtensionConfiguration=vq;jt.resolveAwsRegionExtensionConfiguration=Aq;Object.keys(oT).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(jt,e)&&Object.defineProperty(jt,e,{enumerable:!0,get:function(){return oT[e]}})})});var iT,aT,cT=_(()=>{iT=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},aT=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Kc,Qc,Yc,uT,lT=_(()=>{Kc=T(bs()),Qc=T(ue()),Yc=T(Y());cT();uT=(e,t)=>{let r=Object.assign((0,Kc.getAwsRegionExtensionConfiguration)(e),(0,Yc.getDefaultExtensionConfiguration)(e),(0,Qc.getHttpHandlerExtensionConfiguration)(e),iT(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Kc.resolveAwsRegionExtensionConfiguration)(r),(0,Yc.resolveDefaultRuntimeConfig)(r),(0,Qc.resolveHttpHandlerRuntimeConfig)(r),aT(r))}});var Xc,dT,fT,Jc,pT,hT,mT,Zc,Th,Vo,xh=_(()=>{Xc=T(Zs()),dT=T(eo()),fT=T(to()),Jc=T(ps()),pT=T(yt());et();hT=T(Io()),mT=T(Br()),Zc=T(cr()),Th=T(Y());mh();gh();rT();lT();Vo=class extends Th.Client{config;constructor(...[t]){let r=tT(t||{});super(r),this.initConfig=r;let n=f0(r),s=(0,Jc.resolveUserAgentConfig)(n),o=(0,Zc.resolveRetryConfig)(s),i=(0,pT.resolveRegionConfig)(o),a=(0,Xc.resolveHostHeaderConfig)(i),c=(0,mT.resolveEndpointConfig)(a),u=d0(c),f=uT(u,t?.extensions||[]);this.config=f,this.middlewareStack.use((0,Jc.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Zc.getRetryPlugin)(this.config)),this.middlewareStack.use((0,hT.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Xc.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,dT.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,fT.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(no(this.config,{httpAuthSchemeParametersProvider:u0,identityProviderConfigProvider:async p=>new En({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(so(this.config))}destroy(){super.destroy()}}});var gT,Oe,eu=_(()=>{gT=T(Y()),Oe=class e extends gT.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Pn,Pq,Go,Wo,Ch,vh,Ko,Qo,Yo,Xo,Iq,Jo,Zo,ei,ti,ri,tu=_(()=>{Pn=T(Y());eu();Pq={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},Go=class e extends Oe{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Wo=class e extends Oe{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ch=e=>({...e,...e.clientSecret&&{clientSecret:Pn.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:Pn.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:Pn.SENSITIVE_STRING}}),vh=e=>({...e,...e.accessToken&&{accessToken:Pn.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:Pn.SENSITIVE_STRING},...e.idToken&&{idToken:Pn.SENSITIVE_STRING}}),Ko=class e extends Oe{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Qo=class e extends Oe{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Yo=class e extends Oe{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Xo=class e extends Oe{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Iq={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},Jo=class e extends Oe{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Zo=class e extends Oe{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ei=class e extends Oe{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ti=class e extends Oe{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ri=class e extends Oe{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var N,yT,ST,Oq,Nq,Dq,Mq,kq,Lq,Fq,qq,Uq,$q,Bq,Hq,jq,wt,ET=_(()=>{ke();et();N=T(Y());tu();eu();yT=async(e,t)=>{let r=wo(e,t),n={"content-type":"application/json"};r.bp("/token");let s;return s=JSON.stringify((0,N.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,N._json)(o)})),r.m("POST").h(n).b(s),r.build()},ST=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Oq(e,t);let r=(0,N.map)({$metadata:wt(e)}),n=(0,N.expectNonNull)((0,N.expectObject)(await Cn(e.body,t)),"body"),s=(0,N.take)(n,{accessToken:N.expectString,expiresIn:N.expectInt32,idToken:N.expectString,refreshToken:N.expectString,tokenType:N.expectString});return Object.assign(r,s),r},Oq=async(e,t)=>{let r={...e,body:await oc(e.body,t)},n=kr(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await Dq(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await Mq(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await kq(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Lq(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Fq(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await qq(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Uq(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await $q(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Bq(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Hq(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await jq(r,t);default:let s=r.body;return Nq({output:e,parsedBody:s,errorCode:n})}},Nq=(0,N.withBaseException)(Oe),Dq=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString,reason:N.expectString});Object.assign(r,s);let o=new Go({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},Mq=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString});Object.assign(r,s);let o=new Wo({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},kq=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString});Object.assign(r,s);let o=new Ko({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},Lq=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString});Object.assign(r,s);let o=new Qo({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},Fq=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString});Object.assign(r,s);let o=new Yo({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},qq=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString});Object.assign(r,s);let o=new Xo({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},Uq=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString,reason:N.expectString});Object.assign(r,s);let o=new Jo({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},$q=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString});Object.assign(r,s);let o=new Zo({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},Bq=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString});Object.assign(r,s);let o=new ei({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},Hq=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString});Object.assign(r,s);let o=new ti({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},jq=async(e,t)=>{let r=(0,N.map)({}),n=e.body,s=(0,N.take)(n,{error:N.expectString,error_description:N.expectString});Object.assign(r,s);let o=new ri({$metadata:wt(e),...r});return(0,N.decorateServiceException)(o,e.body)},wt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var wT,_T,Ah,ni,Ph=_(()=>{wT=T(Br()),_T=T(dn()),Ah=T(Y());gh();tu();ET();ni=class extends Ah.Command.classBuilder().ep(p0).m(function(t,r,n,s){return[(0,_T.getSerdePlugin)(n,this.serialize,this.deserialize),(0,wT.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(Ch,vh).ser(yT).de(ST).build(){}});var bT,zq,ru,RT=_(()=>{bT=T(Y());Ph();xh();zq={CreateTokenCommand:ni},ru=class extends Vo{};(0,bT.createAggregatedClient)(zq,ru)});var TT=_(()=>{Ph()});var xT=_(()=>{tu()});var Ih={};Ye(Ih,{$Command:()=>Ah.Command,AccessDeniedException:()=>Go,AccessDeniedExceptionReason:()=>Pq,AuthorizationPendingException:()=>Wo,CreateTokenCommand:()=>ni,CreateTokenRequestFilterSensitiveLog:()=>Ch,CreateTokenResponseFilterSensitiveLog:()=>vh,ExpiredTokenException:()=>Ko,InternalServerException:()=>Qo,InvalidClientException:()=>Yo,InvalidGrantException:()=>Xo,InvalidRequestException:()=>Jo,InvalidRequestExceptionReason:()=>Iq,InvalidScopeException:()=>Zo,SSOOIDC:()=>ru,SSOOIDCClient:()=>Vo,SSOOIDCServiceException:()=>Oe,SlowDownException:()=>ei,UnauthorizedClientException:()=>ti,UnsupportedGrantTypeException:()=>ri,__Client:()=>Th.Client});var Oh=_(()=>{xh();RT();TT();xT();eu()});var PT=R(oi=>{"use strict";var Vq=(Nt(),ee(vr)),Gq=(tp(),ee(C_)),ft=Ke(),si=or(),Wq=require("fs"),Kq=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new ft.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=Gq.getBearerTokenEnvKey(t);if(!(r in process.env))throw new ft.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let n={token:process.env[r]};return Vq.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},Qq=300*1e3,Nh="To refresh this SSO session run 'aws sso login' with the corresponding profile.",Yq=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(Oh(),Ih)),n=o=>t.clientConfig?.[o]??t.parentClientConfig?.[o];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))},Xq=async(e,t,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(Oh(),Ih));return(await Yq(t,r)).send(new n({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},CT=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new ft.TokenProviderError(`Token is expired. ${Nh}`,!1)},In=(e,t,r=!1)=>{if(typeof t>"u")throw new ft.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Nh}`,!1)},{writeFile:Jq}=Wq.promises,Zq=(e,t)=>{let r=si.getSSOTokenFilepath(e),n=JSON.stringify(t,null,2);return Jq(r,n)},vT=new Date(0),AT=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await si.parseKnownFiles(r),s=si.getProfileName({profile:r.profile??t?.profile}),o=n[s];if(o){if(!o.sso_session)throw new ft.TokenProviderError(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new ft.TokenProviderError(`Profile '${s}' could not be found in shared credentials file.`,!1);let i=o.sso_session,c=(await si.loadSsoSessionData(r))[i];if(!c)throw new ft.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!c[y])throw new ft.TokenProviderError(`Sso session '${i}' is missing required property '${y}'.`,!1);c.sso_start_url;let u=c.sso_region,f;try{f=await si.getSSOTokenFromFile(i)}catch{throw new ft.TokenProviderError(`The SSO session token associated with profile=${s} was not found or is invalid. ${Nh}`,!1)}In("accessToken",f.accessToken),In("expiresAt",f.expiresAt);let{accessToken:p,expiresAt:h}=f,m={token:p,expiration:new Date(h)};if(m.expiration.getTime()-Date.now()>Qq)return m;if(Date.now()-vT.getTime()<30*1e3)return CT(m),m;In("clientId",f.clientId,!0),In("clientSecret",f.clientSecret,!0),In("refreshToken",f.refreshToken,!0);try{vT.setTime(Date.now());let y=await Xq(f,u,r);In("accessToken",y.accessToken),In("expiresIn",y.expiresIn);let b=new Date(Date.now()+y.expiresIn*1e3);try{await Zq(i,{...f,accessToken:y.accessToken,expiresAt:b.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:b}}catch{return CT(m),m}},eU=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new ft.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},tU=(e={})=>ft.memoize(ft.chain(AT(e),async()=>{throw new ft.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);oi.fromEnvSigningName=Kq;oi.fromSso=AT;oi.fromStatic=eU;oi.nodeProvider=tU});var Mh=R(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.resolveHttpAuthSchemeConfig=Kr.defaultSSOHttpAuthSchemeProvider=Kr.defaultSSOHttpAuthSchemeParametersProvider=void 0;var rU=(ke(),ee(sr)),Dh=Xe(),nU=async(e,t,r)=>({operation:(0,Dh.getSmithyContext)(t).operation,region:await(0,Dh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Kr.defaultSSOHttpAuthSchemeParametersProvider=nU;function sU(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function nu(e){return{schemeId:"smithy.api#noAuth"}}var oU=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(nu(e));break}case"ListAccountRoles":{t.push(nu(e));break}case"ListAccounts":{t.push(nu(e));break}case"Logout":{t.push(nu(e));break}default:t.push(sU(e))}return t};Kr.defaultSSOHttpAuthSchemeProvider=oU;var iU=e=>{let t=(0,rU.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,Dh.normalizeProvider)(e.authSchemePreference??[])})};Kr.resolveHttpAuthSchemeConfig=iU});var IT=R((LX,aU)=>{aU.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var VT=R(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.ruleSet=void 0;var BT="required",bt="fn",Rt="argv",xs="ref",OT=!0,NT="isSet",ii="booleanEquals",Rs="error",Ts="endpoint",lr="tree",kh="PartitionResult",Lh="getAttr",DT={[BT]:!1,type:"string"},MT={[BT]:!0,default:!1,type:"boolean"},kT={[xs]:"Endpoint"},HT={[bt]:ii,[Rt]:[{[xs]:"UseFIPS"},!0]},jT={[bt]:ii,[Rt]:[{[xs]:"UseDualStack"},!0]},_t={},LT={[bt]:Lh,[Rt]:[{[xs]:kh},"supportsFIPS"]},zT={[xs]:kh},FT={[bt]:ii,[Rt]:[!0,{[bt]:Lh,[Rt]:[zT,"supportsDualStack"]}]},qT=[HT],UT=[jT],$T=[{[xs]:"Region"}],cU={version:"1.0",parameters:{Region:DT,UseDualStack:MT,UseFIPS:MT,Endpoint:DT},rules:[{conditions:[{[bt]:NT,[Rt]:[kT]}],rules:[{conditions:qT,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Rs},{conditions:UT,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Rs},{endpoint:{url:kT,properties:_t,headers:_t},type:Ts}],type:lr},{conditions:[{[bt]:NT,[Rt]:$T}],rules:[{conditions:[{[bt]:"aws.partition",[Rt]:$T,assign:kh}],rules:[{conditions:[HT,jT],rules:[{conditions:[{[bt]:ii,[Rt]:[OT,LT]},FT],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:_t,headers:_t},type:Ts}],type:lr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Rs}],type:lr},{conditions:qT,rules:[{conditions:[{[bt]:ii,[Rt]:[LT,OT]}],rules:[{conditions:[{[bt]:"stringEquals",[Rt]:[{[bt]:Lh,[Rt]:[zT,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:_t,headers:_t},type:Ts},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:_t,headers:_t},type:Ts}],type:lr},{error:"FIPS is enabled but this partition does not support FIPS",type:Rs}],type:lr},{conditions:UT,rules:[{conditions:[FT],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:_t,headers:_t},type:Ts}],type:lr},{error:"DualStack is enabled but this partition does not support DualStack",type:Rs}],type:lr},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:_t,headers:_t},type:Ts}],type:lr}],type:lr},{error:"Invalid Configuration: Missing Region",type:Rs}]};su.ruleSet=cU});var GT=R(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.defaultEndpointResolver=void 0;var uU=Xn(),Fh=_n(),lU=VT(),dU=new Fh.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),fU=(e,t={})=>dU.get(e,()=>(0,Fh.resolveEndpoint)(lU.ruleSet,{endpointParams:e,logger:t.logger}));ou.defaultEndpointResolver=fU;Fh.customEndpointFunctions.aws=uU.awsEndpointFunctions});var QT=R(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.getRuntimeConfig=void 0;var pU=(ke(),ee(sr)),hU=(et(),ee(Qn)),mU=Y(),gU=xr(),WT=Me(),KT=De(),yU=Mh(),SU=GT(),EU=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??WT.fromBase64,base64Encoder:e?.base64Encoder??WT.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??SU.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??yU.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new pU.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new hU.NoAuthSigner}],logger:e?.logger??new mU.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??gU.parseUrl,utf8Decoder:e?.utf8Decoder??KT.fromUtf8,utf8Encoder:e?.utf8Encoder??KT.toUtf8});iu.getRuntimeConfig=EU});var ex=R(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.getRuntimeConfig=void 0;var wU=(yo(),ee(go)),_U=wU.__importDefault(IT()),YT=(ke(),ee(sr)),XT=Uo(),au=yt(),bU=$o(),JT=cr(),On=ir(),ZT=fn(),RU=Bo(),TU=ms(),xU=QT(),CU=Y(),vU=jo(),AU=Y(),PU=e=>{(0,AU.emitWarningIfUnsupportedVersion)(process.version);let t=(0,vU.resolveDefaultsModeConfig)(e),r=()=>t().then(CU.loadConfigsForDefaultMode),n=(0,xU.getRuntimeConfig)(e);(0,YT.emitWarningIfUnsupportedVersion)(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,On.loadConfig)(YT.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:e?.bodyLengthChecker??RU.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,XT.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:_U.default.version}),maxAttempts:e?.maxAttempts??(0,On.loadConfig)(JT.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,On.loadConfig)(au.NODE_REGION_CONFIG_OPTIONS,{...au.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:ZT.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,On.loadConfig)({...JT.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||TU.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??bU.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??ZT.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,On.loadConfig)(au.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,On.loadConfig)(au.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,On.loadConfig)(XT.NODE_APP_ID_CONFIG_OPTIONS,s)}};cu.getRuntimeConfig=PU});var Ex=R(we=>{"use strict";var tx=Zs(),IU=eo(),OU=to(),rx=ps(),NU=yt(),dr=(et(),ee(Qn)),DU=Io(),li=Br(),nx=cr(),M=Y(),sx=Mh(),MU=ex(),ox=bs(),ix=ue(),gu=dn(),ai=(ke(),ee(sr)),kU=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),yu={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},LU=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},FU=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),qU=(e,t)=>{let r=Object.assign(ox.getAwsRegionExtensionConfiguration(e),M.getDefaultExtensionConfiguration(e),ix.getHttpHandlerExtensionConfiguration(e),LU(e));return t.forEach(n=>n.configure(r)),Object.assign(e,ox.resolveAwsRegionExtensionConfiguration(r),M.resolveDefaultRuntimeConfig(r),ix.resolveHttpHandlerRuntimeConfig(r),FU(r))},Cs=class extends M.Client{config;constructor(...[t]){let r=MU.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=kU(r),s=rx.resolveUserAgentConfig(n),o=nx.resolveRetryConfig(s),i=NU.resolveRegionConfig(o),a=tx.resolveHostHeaderConfig(i),c=li.resolveEndpointConfig(a),u=sx.resolveHttpAuthSchemeConfig(c),f=qU(u,t?.extensions||[]);this.config=f,this.middlewareStack.use(rx.getUserAgentPlugin(this.config)),this.middlewareStack.use(nx.getRetryPlugin(this.config)),this.middlewareStack.use(DU.getContentLengthPlugin(this.config)),this.middlewareStack.use(tx.getHostHeaderPlugin(this.config)),this.middlewareStack.use(IU.getLoggerPlugin(this.config)),this.middlewareStack.use(OU.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(dr.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:sx.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new dr.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(dr.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Qr=class e extends M.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},uu=class e extends Qr{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},lu=class e extends Qr{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},du=class e extends Qr{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},fu=class e extends Qr{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ax=e=>({...e,...e.accessToken&&{accessToken:M.SENSITIVE_STRING}}),cx=e=>({...e,...e.secretAccessKey&&{secretAccessKey:M.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:M.SENSITIVE_STRING}}),ux=e=>({...e,...e.roleCredentials&&{roleCredentials:cx(e.roleCredentials)}}),lx=e=>({...e,...e.accessToken&&{accessToken:M.SENSITIVE_STRING}}),dx=e=>({...e,...e.accessToken&&{accessToken:M.SENSITIVE_STRING}}),fx=e=>({...e,...e.accessToken&&{accessToken:M.SENSITIVE_STRING}}),UU=async(e,t)=>{let r=dr.requestBuilder(e,t),n=M.map({},M.isSerializableHeaderValue,{[wu]:e[Eu]});r.bp("/federation/credentials");let s=M.map({[ZU]:[,M.expectNonNull(e[JU],"roleName")],[hx]:[,M.expectNonNull(e[px],"accountId")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},$U=async(e,t)=>{let r=dr.requestBuilder(e,t),n=M.map({},M.isSerializableHeaderValue,{[wu]:e[Eu]});r.bp("/assignment/roles");let s=M.map({[Sx]:[,e[yx]],[gx]:[()=>e.maxResults!==void 0,()=>e[mx].toString()],[hx]:[,M.expectNonNull(e[px],"accountId")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},BU=async(e,t)=>{let r=dr.requestBuilder(e,t),n=M.map({},M.isSerializableHeaderValue,{[wu]:e[Eu]});r.bp("/assignment/accounts");let s=M.map({[Sx]:[,e[yx]],[gx]:[()=>e.maxResults!==void 0,()=>e[mx].toString()]});return r.m("GET").h(n).q(s).b(void 0),r.build()},HU=async(e,t)=>{let r=dr.requestBuilder(e,t),n=M.map({},M.isSerializableHeaderValue,{[wu]:e[Eu]});return r.bp("/logout"),r.m("POST").h(n).b(void 0),r.build()},jU=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Su(e,t);let r=M.map({$metadata:Yr(e)}),n=M.expectNonNull(M.expectObject(await ai.parseJsonBody(e.body,t)),"body"),s=M.take(n,{roleCredentials:M._json});return Object.assign(r,s),r},zU=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Su(e,t);let r=M.map({$metadata:Yr(e)}),n=M.expectNonNull(M.expectObject(await ai.parseJsonBody(e.body,t)),"body"),s=M.take(n,{nextToken:M.expectString,roleList:M._json});return Object.assign(r,s),r},VU=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Su(e,t);let r=M.map({$metadata:Yr(e)}),n=M.expectNonNull(M.expectObject(await ai.parseJsonBody(e.body,t)),"body"),s=M.take(n,{accountList:M._json,nextToken:M.expectString});return Object.assign(r,s),r},GU=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Su(e,t);let r=M.map({$metadata:Yr(e)});return await M.collectBody(e.body,t),r},Su=async(e,t)=>{let r={...e,body:await ai.parseJsonErrorBody(e.body,t)},n=ai.loadRestJsonErrorCode(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await KU(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await QU(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await YU(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await XU(r);default:let s=r.body;return WU({output:e,parsedBody:s,errorCode:n})}},WU=M.withBaseException(Qr),KU=async(e,t)=>{let r=M.map({}),n=e.body,s=M.take(n,{message:M.expectString});Object.assign(r,s);let o=new uu({$metadata:Yr(e),...r});return M.decorateServiceException(o,e.body)},QU=async(e,t)=>{let r=M.map({}),n=e.body,s=M.take(n,{message:M.expectString});Object.assign(r,s);let o=new lu({$metadata:Yr(e),...r});return M.decorateServiceException(o,e.body)},YU=async(e,t)=>{let r=M.map({}),n=e.body,s=M.take(n,{message:M.expectString});Object.assign(r,s);let o=new du({$metadata:Yr(e),...r});return M.decorateServiceException(o,e.body)},XU=async(e,t)=>{let r=M.map({}),n=e.body,s=M.take(n,{message:M.expectString});Object.assign(r,s);let o=new fu({$metadata:Yr(e),...r});return M.decorateServiceException(o,e.body)},Yr=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),px="accountId",Eu="accessToken",hx="account_id",mx="maxResults",gx="max_result",yx="nextToken",Sx="next_token",JU="roleName",ZU="role_name",wu="x-amz-sso_bearer_token",pu=class extends M.Command.classBuilder().ep(yu).m(function(t,r,n,s){return[gu.getSerdePlugin(n,this.serialize,this.deserialize),li.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(ax,ux).ser(UU).de(jU).build(){},ci=class extends M.Command.classBuilder().ep(yu).m(function(t,r,n,s){return[gu.getSerdePlugin(n,this.serialize,this.deserialize),li.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(lx,void 0).ser($U).de(zU).build(){},ui=class extends M.Command.classBuilder().ep(yu).m(function(t,r,n,s){return[gu.getSerdePlugin(n,this.serialize,this.deserialize),li.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(dx,void 0).ser(BU).de(VU).build(){},hu=class extends M.Command.classBuilder().ep(yu).m(function(t,r,n,s){return[gu.getSerdePlugin(n,this.serialize,this.deserialize),li.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(fx,void 0).ser(HU).de(GU).build(){},e2={GetRoleCredentialsCommand:pu,ListAccountRolesCommand:ci,ListAccountsCommand:ui,LogoutCommand:hu},mu=class extends Cs{};M.createAggregatedClient(e2,mu);var t2=dr.createPaginator(Cs,ci,"nextToken","nextToken","maxResults"),r2=dr.createPaginator(Cs,ui,"nextToken","nextToken","maxResults");Object.defineProperty(we,"$Command",{enumerable:!0,get:function(){return M.Command}});Object.defineProperty(we,"__Client",{enumerable:!0,get:function(){return M.Client}});we.GetRoleCredentialsCommand=pu;we.GetRoleCredentialsRequestFilterSensitiveLog=ax;we.GetRoleCredentialsResponseFilterSensitiveLog=ux;we.InvalidRequestException=uu;we.ListAccountRolesCommand=ci;we.ListAccountRolesRequestFilterSensitiveLog=lx;we.ListAccountsCommand=ui;we.ListAccountsRequestFilterSensitiveLog=dx;we.LogoutCommand=hu;we.LogoutRequestFilterSensitiveLog=fx;we.ResourceNotFoundException=lu;we.RoleCredentialsFilterSensitiveLog=cx;we.SSO=mu;we.SSOClient=Cs;we.SSOServiceException=Qr;we.TooManyRequestsException=du;we.UnauthorizedException=fu;we.paginateListAccountRoles=t2;we.paginateListAccounts=r2});var _x=R(qh=>{"use strict";var wx=Ex();Object.defineProperty(qh,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return wx.GetRoleCredentialsCommand}});Object.defineProperty(qh,"SSOClient",{enumerable:!0,get:function(){return wx.SSOClient}})});var Uh=R(bu=>{"use strict";var Dt=Ke(),_u=or(),bx=(Nt(),ee(vr)),n2=PT(),Tx=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),di=!1,Rx=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:o,clientConfig:i,parentClientConfig:a,profile:c,filepath:u,configFilepath:f,ignoreCache:p,logger:h})=>{let m,y="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let be=await n2.fromSso({profile:c,filepath:u,configFilepath:f,ignoreCache:p})();m={accessToken:be.token,expiresAt:new Date(be.expiration).toISOString()}}catch(be){throw new Dt.CredentialsProviderError(be.message,{tryNextLink:di,logger:h})}else try{m=await _u.getSSOTokenFromFile(e)}catch{throw new Dt.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${y}`,{tryNextLink:di,logger:h})}if(new Date(m.expiresAt).getTime()-Date.now()<=0)throw new Dt.CredentialsProviderError(`The SSO session associated with this profile has expired. ${y}`,{tryNextLink:di,logger:h});let{accessToken:b}=m,{SSOClient:C,GetRoleCredentialsCommand:A}=await Promise.resolve().then(function(){return _x()}),O=o||new C(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??n,userAgentAppId:i?.userAgentAppId??a?.userAgentAppId})),k;try{k=await O.send(new A({accountId:r,roleName:s,accessToken:b}))}catch(be){throw new Dt.CredentialsProviderError(be,{tryNextLink:di,logger:h})}let{roleCredentials:{accessKeyId:U,secretAccessKey:z,sessionToken:ae,expiration:_e,credentialScope:K,accountId:X}={}}=k;if(!U||!z||!ae||!_e)throw new Dt.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:di,logger:h});let oe={accessKeyId:U,secretAccessKey:z,sessionToken:ae,expiration:new Date(_e),...K&&{credentialScope:K},...X&&{accountId:X}};return t?bx.setCredentialFeature(oe,"CREDENTIALS_SSO","s"):bx.setCredentialFeature(oe,"CREDENTIALS_SSO_LEGACY","u"),oe},xx=(e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:o}=e;if(!r||!n||!s||!o)throw new Dt.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},s2=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=e,{ssoClient:a}=e,c=_u.getProfileName({profile:e.profile??t?.profile});if(!r&&!n&&!s&&!o&&!i){let f=(await _u.parseKnownFiles(e))[c];if(!f)throw new Dt.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!Tx(f))throw new Dt.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(f?.sso_session){let A=(await _u.loadSsoSessionData(e))[f.sso_session],O=` configurations in profile ${c} and sso-session ${f.sso_session}`;if(s&&s!==A.sso_region)throw new Dt.CredentialsProviderError("Conflicting SSO region"+O,{tryNextLink:!1,logger:e.logger});if(r&&r!==A.sso_start_url)throw new Dt.CredentialsProviderError("Conflicting SSO start_url"+O,{tryNextLink:!1,logger:e.logger});f.sso_region=A.sso_region,f.sso_start_url=A.sso_start_url}let{sso_start_url:p,sso_account_id:h,sso_region:m,sso_role_name:y,sso_session:b}=xx(f,e.logger);return Rx({ssoStartUrl:p,ssoSession:b,ssoAccountId:h,ssoRegion:m,ssoRoleName:y,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!n||!s||!o)throw new Dt.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return Rx({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};bu.fromSSO=s2;bu.isSsoProfile=Tx;bu.validateSsoProfile=xx});function o2(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function i2(e){return{schemeId:"smithy.api#noAuth"}}var fi,Cx,vx,a2,Ax,$h=_(()=>{ke();fi=T(Xe());pi();Cx=async(e,t,r)=>({operation:(0,fi.getSmithyContext)(t).operation,region:await(0,fi.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});vx=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(i2(e));break}default:t.push(o2(e))}return t},a2=e=>Object.assign(e,{stsClientCtor:zt}),Ax=e=>{let t=a2(e),r=Tn(t);return Object.assign(r,{authSchemePreference:(0,fi.normalizeProvider)(e.authSchemePreference??[])})}});var Px,Ru,Tu=_(()=>{Px=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Ru={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var $x,V,te,Xr,Fe,Bx,Hx,le,Ix,Vt,vs,Hh,Ox,Bh,jx,Nx,qe,Dx,zx,Vx,ze,pt,Mx,Gx,Wx,kx,Kx,Lx,Fx,qx,Ux,c2,Qx,Yx=_(()=>{$x="required",V="type",te="argv",Xr="booleanEquals",Fe="stringEquals",Bx="sigv4",Hx="us-east-1",le="endpoint",Ix="https://sts.{Region}.{PartitionResult#dnsSuffix}",Vt="tree",vs="error",Hh="getAttr",Ox={[$x]:!1,[V]:"string"},Bh={[$x]:!0,default:!1,[V]:"boolean"},jx={ref:"Endpoint"},Nx={fn:"isSet",[te]:[{ref:"Region"}]},qe={ref:"Region"},Dx={fn:"aws.partition",[te]:[qe],assign:"PartitionResult"},zx={ref:"UseFIPS"},Vx={ref:"UseDualStack"},ze={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Bx,signingName:"sts",signingRegion:Hx}]},headers:{}},pt={},Mx={conditions:[{fn:Fe,[te]:[qe,"aws-global"]}],[le]:ze,[V]:le},Gx={fn:Xr,[te]:[zx,!0]},Wx={fn:Xr,[te]:[Vx,!0]},kx={fn:Hh,[te]:[{ref:"PartitionResult"},"supportsFIPS"]},Kx={ref:"PartitionResult"},Lx={fn:Xr,[te]:[!0,{fn:Hh,[te]:[Kx,"supportsDualStack"]}]},Fx=[{fn:"isSet",[te]:[jx]}],qx=[Gx],Ux=[Wx],c2={version:"1.0",parameters:{Region:Ox,UseDualStack:Bh,UseFIPS:Bh,Endpoint:Ox,UseGlobalEndpoint:Bh},rules:[{conditions:[{fn:Xr,[te]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[te]:Fx},Nx,Dx,{fn:Xr,[te]:[zx,!1]},{fn:Xr,[te]:[Vx,!1]}],rules:[{conditions:[{fn:Fe,[te]:[qe,"ap-northeast-1"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"ap-south-1"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"ap-southeast-1"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"ap-southeast-2"]}],endpoint:ze,[V]:le},Mx,{conditions:[{fn:Fe,[te]:[qe,"ca-central-1"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"eu-central-1"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"eu-north-1"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"eu-west-1"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"eu-west-2"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"eu-west-3"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"sa-east-1"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,Hx]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"us-east-2"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"us-west-1"]}],endpoint:ze,[V]:le},{conditions:[{fn:Fe,[te]:[qe,"us-west-2"]}],endpoint:ze,[V]:le},{endpoint:{url:Ix,properties:{authSchemes:[{name:Bx,signingName:"sts",signingRegion:"{Region}"}]},headers:pt},[V]:le}],[V]:Vt},{conditions:Fx,rules:[{conditions:qx,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[V]:vs},{conditions:Ux,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[V]:vs},{endpoint:{url:jx,properties:pt,headers:pt},[V]:le}],[V]:Vt},{conditions:[Nx],rules:[{conditions:[Dx],rules:[{conditions:[Gx,Wx],rules:[{conditions:[{fn:Xr,[te]:[!0,kx]},Lx],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pt,headers:pt},[V]:le}],[V]:Vt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[V]:vs}],[V]:Vt},{conditions:qx,rules:[{conditions:[{fn:Xr,[te]:[kx,!0]}],rules:[{conditions:[{fn:Fe,[te]:[{fn:Hh,[te]:[Kx,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:pt,headers:pt},[V]:le},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:pt,headers:pt},[V]:le}],[V]:Vt},{error:"FIPS is enabled but this partition does not support FIPS",[V]:vs}],[V]:Vt},{conditions:Ux,rules:[{conditions:[Lx],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pt,headers:pt},[V]:le}],[V]:Vt},{error:"DualStack is enabled but this partition does not support DualStack",[V]:vs}],[V]:Vt},Mx,{endpoint:{url:Ix,properties:pt,headers:pt},[V]:le}],[V]:Vt}],[V]:Vt},{error:"Invalid Configuration: Missing Region",[V]:vs}]},Qx=c2});var Xx,As,u2,Jx,Zx=_(()=>{Xx=T(Xn()),As=T(_n());Yx();u2=new As.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),Jx=(e,t={})=>u2.get(e,()=>(0,As.resolveEndpoint)(Qx,{endpointParams:e,logger:t.logger}));As.customEndpointFunctions.aws=Xx.awsEndpointFunctions});var eC,tC,xu,Cu,rC,nC=_(()=>{ke();et();eC=T(Y()),tC=T(xr()),xu=T(Me()),Cu=T(De());$h();Zx();rC=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??xu.fromBase64,base64Encoder:e?.base64Encoder??xu.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Jx,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??vx,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new tt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Jt}],logger:e?.logger??new eC.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??tC.parseUrl,utf8Decoder:e?.utf8Decoder??Cu.fromUtf8,utf8Encoder:e?.utf8Encoder??Cu.toUtf8})});var vu,Zr,sC,Au,Jr,Pu,oC,iC,aC,cC,uC,lC,dC=_(()=>{yh();ke();vu=T(Uo()),Zr=T(yt());et();sC=T($o()),Au=T(cr()),Jr=T(ir()),Pu=T(fn()),oC=T(Bo()),iC=T(ms());nC();aC=T(Y()),cC=T(jo()),uC=T(Y()),lC=e=>{(0,uC.emitWarningIfUnsupportedVersion)(process.version);let t=(0,cC.resolveDefaultsModeConfig)(e),r=()=>t().then(aC.loadConfigsForDefaultMode),n=rC(e);Jn(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Jr.loadConfig)(ts,s),bodyLengthChecker:e?.bodyLengthChecker??oC.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,vu.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Hc.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:o=>o.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new tt},{schemeId:"smithy.api#noAuth",identityProvider:o=>o.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Jt}],maxAttempts:e?.maxAttempts??(0,Jr.loadConfig)(Au.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Jr.loadConfig)(Zr.NODE_REGION_CONFIG_OPTIONS,{...Zr.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Pu.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Jr.loadConfig)({...Au.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||iC.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??sC.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Pu.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Jr.loadConfig)(Zr.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,Jr.loadConfig)(Zr.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,Jr.loadConfig)(vu.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var fC,pC,hC=_(()=>{fC=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},pC=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Iu,Ou,Nu,mC,gC=_(()=>{Iu=T(bs()),Ou=T(ue()),Nu=T(Y());hC();mC=(e,t)=>{let r=Object.assign((0,Iu.getAwsRegionExtensionConfiguration)(e),(0,Nu.getDefaultExtensionConfiguration)(e),(0,Ou.getHttpHandlerExtensionConfiguration)(e),fC(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Iu.resolveAwsRegionExtensionConfiguration)(r),(0,Nu.resolveDefaultRuntimeConfig)(r),(0,Ou.resolveHttpHandlerRuntimeConfig)(r),pC(r))}});var Du,yC,SC,Mu,EC,wC,_C,ku,jh,zt,pi=_(()=>{Du=T(Zs()),yC=T(eo()),SC=T(to()),Mu=T(ps()),EC=T(yt());et();wC=T(Io()),_C=T(Br()),ku=T(cr()),jh=T(Y());$h();Tu();dC();gC();zt=class extends jh.Client{config;constructor(...[t]){let r=lC(t||{});super(r),this.initConfig=r;let n=Px(r),s=(0,Mu.resolveUserAgentConfig)(n),o=(0,ku.resolveRetryConfig)(s),i=(0,EC.resolveRegionConfig)(o),a=(0,Du.resolveHostHeaderConfig)(i),c=(0,_C.resolveEndpointConfig)(a),u=Ax(c),f=mC(u,t?.extensions||[]);this.config=f,this.middlewareStack.use((0,Mu.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,ku.getRetryPlugin)(this.config)),this.middlewareStack.use((0,wC.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Du.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,yC.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,SC.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(no(this.config,{httpAuthSchemeParametersProvider:Cx,identityProviderConfigProvider:async p=>new En({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(so(this.config))}destroy(){super.destroy()}}});var bC,nt,Lu=_(()=>{bC=T(Y()),nt=class e extends bC.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var zh,Vh,Gh,hi,mi,gi,yi,Si,Ei,Wh,Kh,wi,_i=_(()=>{zh=T(Y());Lu();Vh=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:zh.SENSITIVE_STRING}}),Gh=e=>({...e,...e.Credentials&&{Credentials:Vh(e.Credentials)}}),hi=class e extends nt{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},mi=class e extends nt{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},gi=class e extends nt{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},yi=class e extends nt{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Si=class e extends nt{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Ei=class e extends nt{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Wh=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:zh.SENSITIVE_STRING}}),Kh=e=>({...e,...e.Credentials&&{Credentials:Vh(e.Credentials)}}),wi=class e extends nt{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var RC,W,TC,xC,CC,vC,AC,l2,d2,f2,p2,h2,m2,g2,y2,S2,PC,E2,w2,_2,b2,R2,T2,IC,x2,C2,OC,v2,A2,P2,I2,O2,N2,D2,pr,M2,NC,DC,MC,kC,Qh,k2,Yh,Ps,L2,Xh,Jh,Is,Zh,Os,em,tm,rm,Ns,Ds,nm,sm,om,Ms,im,ks,Ls,am,cm,fr,um,lm,dm,fm,pm,LC,hm,mm,gm,Te,FC,F2,ym=_(()=>{ke();RC=T(ue()),W=T(Y());_i();Lu();TC=async(e,t)=>{let r=DC,n;return n=FC({...y2(e,t),[kC]:k2,[LC]:MC}),NC(t,r,"/",void 0,n)},xC=async(e,t)=>{let r=DC,n;return n=FC({...S2(e,t),[kC]:L2,[LC]:MC}),NC(t,r,"/",void 0,n)},CC=async(e,t)=>{if(e.statusCode>=300)return AC(e,t);let r=await us(e.body,t),n={};return n=x2(r.AssumeRoleResult,t),{$metadata:pr(e),...n}},vC=async(e,t)=>{if(e.statusCode>=300)return AC(e,t);let r=await us(e.body,t),n={};return n=C2(r.AssumeRoleWithWebIdentityResult,t),{$metadata:pr(e),...n}},AC=async(e,t)=>{let r={...e,body:await Sc(e.body,t)},n=F2(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await l2(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await h2(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await m2(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await g2(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await d2(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await f2(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await p2(r,t);default:let s=r.body;return M2({output:e,parsedBody:s.Error,errorCode:n})}},l2=async(e,t)=>{let r=e.body,n=v2(r.Error,t),s=new hi({$metadata:pr(e),...n});return(0,W.decorateServiceException)(s,r)},d2=async(e,t)=>{let r=e.body,n=A2(r.Error,t),s=new wi({$metadata:pr(e),...n});return(0,W.decorateServiceException)(s,r)},f2=async(e,t)=>{let r=e.body,n=P2(r.Error,t),s=new Si({$metadata:pr(e),...n});return(0,W.decorateServiceException)(s,r)},p2=async(e,t)=>{let r=e.body,n=I2(r.Error,t),s=new Ei({$metadata:pr(e),...n});return(0,W.decorateServiceException)(s,r)},h2=async(e,t)=>{let r=e.body,n=O2(r.Error,t),s=new mi({$metadata:pr(e),...n});return(0,W.decorateServiceException)(s,r)},m2=async(e,t)=>{let r=e.body,n=N2(r.Error,t),s=new gi({$metadata:pr(e),...n});return(0,W.decorateServiceException)(s,r)},g2=async(e,t)=>{let r=e.body,n=D2(r.Error,t),s=new yi({$metadata:pr(e),...n});return(0,W.decorateServiceException)(s,r)},y2=(e,t)=>{let r={};if(e[ks]!=null&&(r[ks]=e[ks]),e[Ls]!=null&&(r[Ls]=e[Ls]),e[Ds]!=null){let n=PC(e[Ds],t);e[Ds]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,o])=>{let i=`PolicyArns.${s}`;r[i]=o})}if(e[Ns]!=null&&(r[Ns]=e[Ns]),e[Os]!=null&&(r[Os]=e[Os]),e[dm]!=null){let n=T2(e[dm],t);e[dm]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([s,o])=>{let i=`Tags.${s}`;r[i]=o})}if(e[pm]!=null){let n=R2(e[pm],t);e[pm]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([s,o])=>{let i=`TransitiveTagKeys.${s}`;r[i]=o})}if(e[tm]!=null&&(r[tm]=e[tm]),e[um]!=null&&(r[um]=e[um]),e[fm]!=null&&(r[fm]=e[fm]),e[fr]!=null&&(r[fr]=e[fr]),e[sm]!=null){let n=_2(e[sm],t);e[sm]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([s,o])=>{let i=`ProvidedContexts.${s}`;r[i]=o})}return r},S2=(e,t)=>{let r={};if(e[ks]!=null&&(r[ks]=e[ks]),e[Ls]!=null&&(r[Ls]=e[Ls]),e[mm]!=null&&(r[mm]=e[mm]),e[om]!=null&&(r[om]=e[om]),e[Ds]!=null){let n=PC(e[Ds],t);e[Ds]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,o])=>{let i=`PolicyArns.${s}`;r[i]=o})}return e[Ns]!=null&&(r[Ns]=e[Ns]),e[Os]!=null&&(r[Os]=e[Os]),r},PC=(e,t)=>{let r={},n=1;for(let s of e){if(s===null)continue;let o=E2(s,t);Object.entries(o).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},E2=(e,t)=>{let r={};return e[gm]!=null&&(r[gm]=e[gm]),r},w2=(e,t)=>{let r={};return e[nm]!=null&&(r[nm]=e[nm]),e[Zh]!=null&&(r[Zh]=e[Zh]),r},_2=(e,t)=>{let r={},n=1;for(let s of e){if(s===null)continue;let o=w2(s,t);Object.entries(o).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},b2=(e,t)=>{let r={};return e[rm]!=null&&(r[rm]=e[rm]),e[hm]!=null&&(r[hm]=e[hm]),r},R2=(e,t)=>{let r={},n=1;for(let s of e)s!==null&&(r[`member.${n}`]=s,n++);return r},T2=(e,t)=>{let r={},n=1;for(let s of e){if(s===null)continue;let o=b2(s,t);Object.entries(o).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},IC=(e,t)=>{let r={};return e[Yh]!=null&&(r[Yh]=(0,W.expectString)(e[Yh])),e[Xh]!=null&&(r[Xh]=(0,W.expectString)(e[Xh])),r},x2=(e,t)=>{let r={};return e[Is]!=null&&(r[Is]=OC(e[Is],t)),e[Ps]!=null&&(r[Ps]=IC(e[Ps],t)),e[Ms]!=null&&(r[Ms]=(0,W.strictParseInt32)(e[Ms])),e[fr]!=null&&(r[fr]=(0,W.expectString)(e[fr])),r},C2=(e,t)=>{let r={};return e[Is]!=null&&(r[Is]=OC(e[Is],t)),e[cm]!=null&&(r[cm]=(0,W.expectString)(e[cm])),e[Ps]!=null&&(r[Ps]=IC(e[Ps],t)),e[Ms]!=null&&(r[Ms]=(0,W.strictParseInt32)(e[Ms])),e[im]!=null&&(r[im]=(0,W.expectString)(e[im])),e[Jh]!=null&&(r[Jh]=(0,W.expectString)(e[Jh])),e[fr]!=null&&(r[fr]=(0,W.expectString)(e[fr])),r},OC=(e,t)=>{let r={};return e[Qh]!=null&&(r[Qh]=(0,W.expectString)(e[Qh])),e[am]!=null&&(r[am]=(0,W.expectString)(e[am])),e[lm]!=null&&(r[lm]=(0,W.expectString)(e[lm])),e[em]!=null&&(r[em]=(0,W.expectNonNull)((0,W.parseRfc3339DateTimeWithOffset)(e[em]))),r},v2=(e,t)=>{let r={};return e[Te]!=null&&(r[Te]=(0,W.expectString)(e[Te])),r},A2=(e,t)=>{let r={};return e[Te]!=null&&(r[Te]=(0,W.expectString)(e[Te])),r},P2=(e,t)=>{let r={};return e[Te]!=null&&(r[Te]=(0,W.expectString)(e[Te])),r},I2=(e,t)=>{let r={};return e[Te]!=null&&(r[Te]=(0,W.expectString)(e[Te])),r},O2=(e,t)=>{let r={};return e[Te]!=null&&(r[Te]=(0,W.expectString)(e[Te])),r},N2=(e,t)=>{let r={};return e[Te]!=null&&(r[Te]=(0,W.expectString)(e[Te])),r},D2=(e,t)=>{let r={};return e[Te]!=null&&(r[Te]=(0,W.expectString)(e[Te])),r},pr=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),M2=(0,W.withBaseException)(nt),NC=async(e,t,r,n,s)=>{let{hostname:o,protocol:i="https",port:a,path:c}=await e.endpoint(),u={protocol:i,hostname:o,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(u.hostname=n),s!==void 0&&(u.body=s),new RC.HttpRequest(u)},DC={"content-type":"application/x-www-form-urlencoded"},MC="2011-06-15",kC="Action",Qh="AccessKeyId",k2="AssumeRole",Yh="AssumedRoleId",Ps="AssumedRoleUser",L2="AssumeRoleWithWebIdentity",Xh="Arn",Jh="Audience",Is="Credentials",Zh="ContextAssertion",Os="DurationSeconds",em="Expiration",tm="ExternalId",rm="Key",Ns="Policy",Ds="PolicyArns",nm="ProviderArn",sm="ProvidedContexts",om="ProviderId",Ms="PackedPolicySize",im="Provider",ks="RoleArn",Ls="RoleSessionName",am="SecretAccessKey",cm="SubjectFromWebIdentityToken",fr="SourceIdentity",um="SerialNumber",lm="SessionToken",dm="Tags",fm="TokenCode",pm="TransitiveTagKeys",LC="Version",hm="Value",mm="WebIdentityToken",gm="arn",Te="message",FC=e=>Object.entries(e).map(([t,r])=>(0,W.extendedEncodeURIComponent)(t)+"="+(0,W.extendedEncodeURIComponent)(r)).join("&"),F2=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var qC,UC,$C,Nn,Fu=_(()=>{qC=T(Br()),UC=T(dn()),$C=T(Y());Tu();_i();ym();Nn=class extends $C.Command.classBuilder().ep(Ru).m(function(t,r,n,s){return[(0,UC.getSerdePlugin)(n,this.serialize,this.deserialize),(0,qC.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Gh).ser(TC).de(CC).build(){}});var BC,HC,jC,Dn,qu=_(()=>{BC=T(Br()),HC=T(dn()),jC=T(Y());Tu();_i();ym();Dn=class extends jC.Command.classBuilder().ep(Ru).m(function(t,r,n,s){return[(0,HC.getSerdePlugin)(n,this.serialize,this.deserialize),(0,BC.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Wh,Kh).ser(xC).de(vC).build(){}});var zC,q2,Uu,VC=_(()=>{zC=T(Y());Fu();qu();pi();q2={AssumeRoleCommand:Nn,AssumeRoleWithWebIdentityCommand:Dn},Uu=class extends zt{};(0,zC.createAggregatedClient)(q2,Uu)});var GC=_(()=>{Fu();qu()});var WC=_(()=>{_i()});var KC,QC,YC,XC,JC,ZC,ev=_(()=>{Nt();KC=T(bs());Fu();qu();QC=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},YC=async(e,t,r,n={})=>{let s=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t,i=await(0,KC.stsRegionDefaultResolver)(n)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${o} (contextual client)`,`${i} (STS default: AWS_REGION, profile region, or us-east-1)`),s??o??i},XC=(e,t)=>{let r,n;return async(s,o)=>{if(n=s,!r){let{logger:f=e?.parentClientConfig?.logger,profile:p=e?.parentClientConfig?.profile,region:h,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:y,userAgentAppId:b=e?.parentClientConfig?.userAgentAppId}=e,C=await YC(h,e?.parentClientConfig?.region,y,{logger:f,profile:p}),A=!ZC(m);r=new t({...e,userAgentAppId:b,profile:p,credentialDefaultProvider:()=>async()=>n,region:C,requestHandler:A?m:void 0,logger:f})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new Nn(o));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let c=QC(a),u={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return Cr(u,"CREDENTIALS_STS_ASSUME_ROLE","i"),u}},JC=(e,t)=>{let r;return async n=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:u=e?.parentClientConfig?.profile,region:f,requestHandler:p=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h,userAgentAppId:m=e?.parentClientConfig?.userAgentAppId}=e,y=await YC(f,e?.parentClientConfig?.region,h,{logger:c,profile:u}),b=!ZC(p);r=new t({...e,userAgentAppId:m,profile:u,region:y,requestHandler:b?p:void 0,logger:c})}let{Credentials:s,AssumedRoleUser:o}=await r.send(new Dn(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=QC(o),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...i&&{accountId:i}};return i&&Cr(a,"RESOLVED_ACCOUNT_ID","T"),Cr(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},ZC=e=>e?.metadata?.handlerProtocol==="h2"});var tv,rv,nv,U2,sv=_(()=>{ev();pi();tv=(e,t)=>t?class extends e{constructor(n){super(n);for(let s of t)this.middlewareStack.use(s)}}:e,rv=(e={},t)=>XC(e,tv(zt,t)),nv=(e={},t)=>JC(e,tv(zt,t)),U2=e=>t=>e({roleAssumer:rv(t),roleAssumerWithWebIdentity:nv(t),...t})});var Sm={};Ye(Sm,{AssumeRoleCommand:()=>Nn,AssumeRoleResponseFilterSensitiveLog:()=>Gh,AssumeRoleWithWebIdentityCommand:()=>Dn,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Wh,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Kh,CredentialsFilterSensitiveLog:()=>Vh,ExpiredTokenException:()=>hi,IDPCommunicationErrorException:()=>wi,IDPRejectedClaimException:()=>Si,InvalidIdentityTokenException:()=>Ei,MalformedPolicyDocumentException:()=>mi,PackedPolicyTooLargeException:()=>gi,RegionDisabledException:()=>yi,STS:()=>Uu,STSClient:()=>zt,STSServiceException:()=>nt,__Client:()=>jh.Client,decorateDefaultCredentialProvider:()=>U2,getDefaultRoleAssumer:()=>rv,getDefaultRoleAssumerWithWebIdentity:()=>nv});var Em=_(()=>{pi();VC();GC();WC();sv();Lu()});var bm=R(ov=>{"use strict";var _m=or(),wm=Ke(),$2=require("child_process"),B2=require("util"),H2=(Nt(),ee(vr)),j2=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let o=new Date;if(new Date(t.Expiration)<o)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let s={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return H2.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},z2=async(e,t,r)=>{let n=t[e];if(t[e]){let s=n.credential_process;if(s!==void 0){let o=B2.promisify(_m.externalDataInterceptor?.getTokenRecord?.().exec??$2.exec);try{let{stdout:i}=await o(s),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return j2(e,a,t)}catch(i){throw new wm.CredentialsProviderError(i.message,{logger:r})}}else throw new wm.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new wm.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},V2=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await _m.parseKnownFiles(e);return z2(_m.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};ov.fromProcess=V2});var Rm=R(Gt=>{"use strict";var G2=Gt&&Gt.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),W2=Gt&&Gt.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),K2=Gt&&Gt.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),s=0;s<n.length;s++)n[s]!=="default"&&G2(r,t,n[s]);return W2(r,t),r}})();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.fromWebToken=void 0;var Q2=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:o,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:u}=e;if(!u){let{getDefaultRoleAssumerWithWebIdentity:f}=await Promise.resolve().then(()=>K2((Em(),ee(Sm))));u=f({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return u({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:o,PolicyArns:i,Policy:a,DurationSeconds:c})};Gt.fromWebToken=Q2});var av=R($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.fromTokenFile=void 0;var Y2=(Nt(),ee(vr)),X2=Ke(),J2=or(),Z2=require("fs"),e$=Rm(),iv="AWS_WEB_IDENTITY_TOKEN_FILE",t$="AWS_ROLE_ARN",r$="AWS_ROLE_SESSION_NAME",n$=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[iv],n=e?.roleArn??process.env[t$],s=e?.roleSessionName??process.env[r$];if(!r||!n)throw new X2.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,e$.fromWebToken)({...e,webIdentityToken:J2.externalDataInterceptor?.getTokenRecord?.()[r]??(0,Z2.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(t);return r===process.env[iv]&&(0,Y2.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};$u.fromTokenFile=n$});var Tm=R(bi=>{"use strict";var cv=av(),uv=Rm();Object.keys(cv).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(bi,e)&&Object.defineProperty(bi,e,{enumerable:!0,get:function(){return cv[e]}})});Object.keys(uv).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(bi,e)&&Object.defineProperty(bi,e,{enumerable:!0,get:function(){return uv[e]}})})});var mv=R(hv=>{"use strict";var Cm=or(),Ri=Ke(),en=(Nt(),ee(vr)),s$=(e,t,r)=>{let n={EcsContainer:async s=>{let{fromHttp:o}=await Promise.resolve().then(()=>T(hh())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>T(Fo()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Ri.chain(o(s??{}),i(s))().then(xm)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>T(Fo()));return async()=>o(s)().then(xm)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>T(ih()));return async()=>o(s)().then(xm)}};if(e in n)return n[e];throw new Ri.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},xm=e=>en.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),o$=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(i$(e,{profile:t,logger:r})||a$(e,{profile:t,logger:r})),i$=(e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},a$=(e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},c$=async(e,t,r,n={},s)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:i,region:a}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:u}=await Promise.resolve().then(()=>(Em(),Sm));r.roleAssumer=u({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(i&&i in n)throw new Ri.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${Cm.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${i?`source_profile=[${i}]`:`profile=[${e}]`}`);let c=i?s(i,t,r,{...n,[i]:!0},lv(t[i]??{})):(await s$(o.credential_source,e,r.logger)(r))();if(lv(o))return c.then(u=>en.setCredentialFeature(u,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let u={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:f}=o;if(f){if(!r.mfaCodeProvider)throw new Ri.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});u.SerialNumber=f,u.TokenCode=await r.mfaCodeProvider(f)}let p=await c;return r.roleAssumer(p,u).then(h=>en.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},lv=e=>!e.role_arn&&!!e.credential_source,u$=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",l$=async(e,t)=>Promise.resolve().then(()=>T(bm())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>en.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),d$=async(e,t,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>T(Uh()));return n({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(s=>t.sso_session?en.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO","r"):en.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},f$=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),dv=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,fv=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return en.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},p$=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,h$=async(e,t)=>Promise.resolve().then(()=>T(Tm())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(n=>en.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),pv=async(e,t,r,n={},s=!1)=>{let o=t[e];if(Object.keys(n).length>0&&dv(o))return fv(o,r);if(s||o$(o,{profile:e,logger:r.logger}))return c$(e,t,r,n,pv);if(dv(o))return fv(o,r);if(p$(o))return h$(o,r);if(u$(o))return l$(r,e);if(f$(o))return await d$(e,o,r);throw new Ri.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},m$=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await Cm.parseKnownFiles(r);return pv(Cm.getProfileName({profile:e.profile??t?.profile}),n,r)};hv.fromIni=m$});var Ev=R(Bu=>{"use strict";var vm=ih(),Ti=Ke(),g$=or(),gv="AWS_EC2_METADATA_DISABLED",y$=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>T(Fo()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:o}=await Promise.resolve().then(()=>T(hh()));return Ti.chain(o(e),n(e))}return process.env[gv]&&process.env[gv]!=="false"?async()=>{throw new Ti.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(e))};function S$(e,t){let r=E$(e),n,s,o,i=async a=>{if(a?.forceRefresh)return await r(a);if(o?.expiration&&o?.expiration?.getTime()<Date.now()&&(o=void 0),n)await n;else if(!o||t?.(o))if(o)s||(s=r(a).then(c=>{o=c,s=void 0}));else return n=r(a).then(c=>{o=c,n=void 0}),i(a);return o};return i}var E$=e=>async t=>{let r;for(let n of e)try{return await n(t)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},yv=!1,w$=(e={})=>S$([async()=>{if(e.profile??process.env[g$.ENV_PROFILE])throw process.env[vm.ENV_KEY]&&process.env[vm.ENV_SECRET]&&(yv||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),yv=!0)),new Ti.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),vm.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:o,ssoSession:i}=e;if(!r&&!n&&!s&&!o&&!i)throw new Ti.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>T(Uh()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>T(mv()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>T(bm()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>T(Tm()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await y$(e))()),async()=>{throw new Ti.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],Sv),_$=e=>e?.expiration!==void 0,Sv=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;Bu.credentialsTreatedAsExpired=Sv;Bu.credentialsWillNeedRefresh=_$;Bu.defaultProvider=w$});var Fv=R(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.ruleSet=void 0;var Mv="required",st="fn",ot="argv",Mn="ref",tn="properties",rn="headers",wv=!0,_v="isSet",xi="booleanEquals",Fs="error",Wt="endpoint",hr="tree",Hu="PartitionResult",Am="stringEquals",bv={[Mv]:!1,type:"string"},Rv={[Mv]:!0,default:!1,type:"boolean"},Tv={[Mn]:"Endpoint"},kv={[st]:xi,[ot]:[{[Mn]:"UseFIPS"},!0]},Lv={[st]:xi,[ot]:[{[Mn]:"UseDualStack"},!0]},Tt={},xv={[st]:"getAttr",[ot]:[{[Mn]:Hu},"supportsFIPS"]},Cv={[st]:xi,[ot]:[!0,{[st]:"getAttr",[ot]:[{[Mn]:Hu},"supportsDualStack"]}]},Pm={[st]:"getAttr",[ot]:[{[Mn]:Hu},"name"]},vv={url:"https://secretsmanager-fips.{Region}.amazonaws.com",[tn]:{},[rn]:{}},Av={url:"https://secretsmanager.{Region}.amazonaws.com",[tn]:{},[rn]:{}},Pv=[kv],Iv=[Lv],Ov=[{[Mn]:"Region"}],Nv=[{[st]:Am,[ot]:["aws",Pm]}],Dv=[{[st]:Am,[ot]:["aws-us-gov",Pm]}],b$={version:"1.0",parameters:{Region:bv,UseDualStack:Rv,UseFIPS:Rv,Endpoint:bv},rules:[{conditions:[{[st]:_v,[ot]:[Tv]}],rules:[{conditions:Pv,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Fs},{conditions:Iv,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Fs},{endpoint:{url:Tv,[tn]:Tt,[rn]:Tt},type:Wt}],type:hr},{conditions:[{[st]:_v,[ot]:Ov}],rules:[{conditions:[{[st]:"aws.partition",[ot]:Ov,assign:Hu}],rules:[{conditions:[kv,Lv],rules:[{conditions:[{[st]:xi,[ot]:[wv,xv]},Cv],rules:[{conditions:Nv,endpoint:vv,type:Wt},{conditions:Dv,endpoint:vv,type:Wt},{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[tn]:Tt,[rn]:Tt},type:Wt}],type:hr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Fs}],type:hr},{conditions:Pv,rules:[{conditions:[{[st]:xi,[ot]:[xv,wv]}],rules:[{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dnsSuffix}",[tn]:Tt,[rn]:Tt},type:Wt}],type:hr},{error:"FIPS is enabled but this partition does not support FIPS",type:Fs}],type:hr},{conditions:Iv,rules:[{conditions:[Cv],rules:[{conditions:Nv,endpoint:Av,type:Wt},{conditions:[{[st]:Am,[ot]:["aws-cn",Pm]}],endpoint:{url:"https://secretsmanager.{Region}.amazonaws.com.cn",[tn]:Tt,[rn]:Tt},type:Wt},{conditions:Dv,endpoint:Av,type:Wt},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dualStackDnsSuffix}",[tn]:Tt,[rn]:Tt},type:Wt}],type:hr},{error:"DualStack is enabled but this partition does not support DualStack",type:Fs}],type:hr},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dnsSuffix}",[tn]:Tt,[rn]:Tt},type:Wt}],type:hr}],type:hr},{error:"Invalid Configuration: Missing Region",type:Fs}]};ju.ruleSet=b$});var qv=R(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.defaultEndpointResolver=void 0;var R$=Xn(),Im=_n(),T$=Fv(),x$=new Im.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),C$=(e,t={})=>x$.get(e,()=>(0,Im.resolveEndpoint)(T$.ruleSet,{endpointParams:e,logger:t.logger}));zu.defaultEndpointResolver=C$;Im.customEndpointFunctions.aws=R$.awsEndpointFunctions});var Bv=R(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.getRuntimeConfig=void 0;var v$=(ke(),ee(sr)),A$=(Up(),ee(Nb)),P$=Y(),I$=xr(),Uv=Me(),$v=De(),O$=oh(),N$=qv(),D$=e=>({apiVersion:"2017-10-17",base64Decoder:e?.base64Decoder??Uv.fromBase64,base64Encoder:e?.base64Encoder??Uv.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??N$.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??O$.defaultSecretsManagerHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new v$.AwsSdkSigV4Signer}],logger:e?.logger??new P$.NoOpLogger,protocol:e?.protocol??new A$.AwsJson1_1Protocol({defaultNamespace:"com.amazonaws.secretsmanager",serviceTarget:"secretsmanager",awsQueryCompatible:!1}),serviceId:e?.serviceId??"Secrets Manager",urlParser:e?.urlParser??I$.parseUrl,utf8Decoder:e?.utf8Decoder??$v.fromUtf8,utf8Encoder:e?.utf8Encoder??$v.toUtf8});Vu.getRuntimeConfig=D$});var Gv=R(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.getRuntimeConfig=void 0;var M$=(yo(),ee(go)),k$=M$.__importDefault(BR()),Hv=(ke(),ee(sr)),L$=Ev(),jv=Uo(),Gu=yt(),F$=$o(),zv=cr(),kn=ir(),Vv=fn(),q$=Bo(),U$=ms(),$$=Bv(),B$=Y(),H$=jo(),j$=Y(),z$=e=>{(0,j$.emitWarningIfUnsupportedVersion)(process.version);let t=(0,H$.resolveDefaultsModeConfig)(e),r=()=>t().then(B$.loadConfigsForDefaultMode),n=(0,$$.getRuntimeConfig)(e);(0,Hv.emitWarningIfUnsupportedVersion)(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,kn.loadConfig)(Hv.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:e?.bodyLengthChecker??q$.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??L$.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,jv.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:k$.default.version}),maxAttempts:e?.maxAttempts??(0,kn.loadConfig)(zv.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,kn.loadConfig)(Gu.NODE_REGION_CONFIG_OPTIONS,{...Gu.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Vv.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,kn.loadConfig)({...zv.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||U$.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??F$.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Vv.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,kn.loadConfig)(Gu.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,kn.loadConfig)(Gu.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,kn.loadConfig)(jv.NODE_APP_ID_CONFIG_OPTIONS,s)}};Wu.getRuntimeConfig=z$});var HA=R($=>{"use strict";var Wv=Zs(),V$=eo(),G$=to(),Kv=ps(),W$=yt(),qs=(et(),ee(Qn)),it=(pe(),ee(Bd)),K$=Io(),de=Br(),Qv=cr(),re=Y(),Yv=oh(),Q$=Gv(),Xv=bs(),Jv=ue(),Y$=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"secretsmanager"}),ge={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},X$=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let o=t.findIndex(i=>i.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},J$=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Z$=(e,t)=>{let r=Object.assign(Xv.getAwsRegionExtensionConfiguration(e),re.getDefaultExtensionConfiguration(e),Jv.getHttpHandlerExtensionConfiguration(e),X$(e));return t.forEach(n=>n.configure(r)),Object.assign(e,Xv.resolveAwsRegionExtensionConfiguration(r),re.resolveDefaultRuntimeConfig(r),Jv.resolveHttpHandlerRuntimeConfig(r),J$(r))},Ln=class extends re.Client{config;constructor(...[t]){let r=Q$.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=Y$(r),s=Kv.resolveUserAgentConfig(n),o=Qv.resolveRetryConfig(s),i=W$.resolveRegionConfig(o),a=Wv.resolveHostHeaderConfig(i),c=de.resolveEndpointConfig(a),u=Yv.resolveHttpAuthSchemeConfig(c),f=Z$(u,t?.extensions||[]);this.config=f,this.middlewareStack.use(it.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(Kv.getUserAgentPlugin(this.config)),this.middlewareStack.use(Qv.getRetryPlugin(this.config)),this.middlewareStack.use(K$.getContentLengthPlugin(this.config)),this.middlewareStack.use(Wv.getHostHeaderPlugin(this.config)),this.middlewareStack.use(V$.getLoggerPlugin(this.config)),this.middlewareStack.use(G$.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(qs.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:Yv.defaultSecretsManagerHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new qs.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(qs.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},at=class Zv extends re.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,Zv.prototype)}},eB={all:"all",description:"description",name:"name",owning_service:"owning-service",primary_region:"primary-region",tag_key:"tag-key",tag_value:"tag-value"},eA=class tA extends at{name="DecryptionFailure";$fault="client";Message;constructor(t){super({name:"DecryptionFailure",$fault:"client",...t}),Object.setPrototypeOf(this,tA.prototype),this.Message=t.Message}},rA=class nA extends at{name="InternalServiceError";$fault="server";Message;constructor(t){super({name:"InternalServiceError",$fault:"server",...t}),Object.setPrototypeOf(this,nA.prototype),this.Message=t.Message}},sA=class oA extends at{name="InvalidNextTokenException";$fault="client";Message;constructor(t){super({name:"InvalidNextTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,oA.prototype),this.Message=t.Message}},iA=class aA extends at{name="InvalidParameterException";$fault="client";Message;constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),Object.setPrototypeOf(this,aA.prototype),this.Message=t.Message}},cA=class uA extends at{name="InvalidRequestException";$fault="client";Message;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,uA.prototype),this.Message=t.Message}},lA=class dA extends at{name="ResourceNotFoundException";$fault="client";Message;constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,dA.prototype),this.Message=t.Message}},tB={Failed:"Failed",InProgress:"InProgress",InSync:"InSync"},fA=class pA extends at{name="EncryptionFailure";$fault="client";Message;constructor(t){super({name:"EncryptionFailure",$fault:"client",...t}),Object.setPrototypeOf(this,pA.prototype),this.Message=t.Message}},hA=class mA extends at{name="LimitExceededException";$fault="client";Message;constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,mA.prototype),this.Message=t.Message}},gA=class yA extends at{name="MalformedPolicyDocumentException";$fault="client";Message;constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,yA.prototype),this.Message=t.Message}},SA=class EA extends at{name="PreconditionNotMetException";$fault="client";Message;constructor(t){super({name:"PreconditionNotMetException",$fault:"client",...t}),Object.setPrototypeOf(this,EA.prototype),this.Message=t.Message}},wA=class _A extends at{name="ResourceExistsException";$fault="client";Message;constructor(t){super({name:"ResourceExistsException",$fault:"client",...t}),Object.setPrototypeOf(this,_A.prototype),this.Message=t.Message}},rB={asc:"asc",desc:"desc"},bA=class RA extends at{name="PublicPolicyException";$fault="client";Message;constructor(t){super({name:"PublicPolicyException",$fault:"client",...t}),Object.setPrototypeOf(this,RA.prototype),this.Message=t.Message}},nB="AutomaticallyAfterDays",sB="APIErrorListType",oB="APIErrorType",Pe="ARN",TA="AddReplicaRegions",iB="AddReplicaRegionListType",aB="BatchGetSecretValue",cB="BatchGetSecretValueRequest",uB="BatchGetSecretValueResponse",lB="BlockPublicPolicy",Pi="CreatedDate",dB="CheckName",fB="CancelRotateSecret",pB="CancelRotateSecretRequest",hB="CancelRotateSecretResponse",ml="ClientRequestToken",mB="CreateSecret",gB="CreateSecretRequest",yB="CreateSecretResponse",gl="Description",SB="DeletionDate",xA="DeletedDate",EB="DecryptionFailure",wB="DeleteResourcePolicy",_B="DeleteResourcePolicyRequest",bB="DeleteResourcePolicyResponse",RB="DeleteSecret",TB="DeleteSecretRequest",xB="DeleteSecretResponse",CB="DescribeSecretRequest",vB="DescribeSecretResponse",AB="DescribeSecret",PB="Duration",IB="Errors",OB="ErrorCode",NB="ExcludeCharacters",DB="EncryptionFailure",MB="ExcludeLowercase",kB="ErrorMessage",LB="ExcludeNumbers",FB="ExcludePunctuation",qB="ExcludeUppercase",CA="Filters",UB="ForceDeleteWithoutRecovery",$B="FiltersListType",vA="ForceOverwriteReplicaSecret",BB="Filter",HB="GetRandomPassword",jB="GetRandomPasswordRequest",zB="GetRandomPasswordResponse",VB="GetResourcePolicyRequest",GB="GetResourcePolicyResponse",WB="GetResourcePolicy",KB="GetSecretValue",QB="GetSecretValueRequest",YB="GetSecretValueResponse",XB="IncludeDeprecated",JB="InvalidNextTokenException",ZB="IncludePlannedDeletion",eH="InvalidParameterException",tH="InvalidRequestException",rH="IncludeSpace",nH="InternalServiceError",AA="Key",Us="KmsKeyId",sH="KmsKeyIds",yl="LastAccessedDate",PA="LastChangedDate",oH="LimitExceededException",IA="LastRotatedDate",iH="ListSecrets",aH="ListSecretsRequest",cH="ListSecretsResponse",uH="ListSecretVersionIds",lH="ListSecretVersionIdsRequest",dH="ListSecretVersionIdsResponse",ht="Message",fH="MalformedPolicyDocumentException",Om="MaxResults",pH="MoveToVersionId",Ue="Name",OA="NextRotationDate",$s="NextToken",NA="OwningService",hH="PasswordLength",mH="PreconditionNotMetException",gH="PublicPolicyException",DA="PrimaryRegion",yH="PutResourcePolicy",SH="PutResourcePolicyRequest",EH="PutResourcePolicyResponse",wH="PutSecretValue",_H="PutSecretValueRequest",bH="PutSecretValueResponse",RH="PolicyValidationPassed",MA="Region",kA="RotationEnabled",TH="ResourceExistsException",xH="RequireEachIncludedType",CH="RemoveFromVersionId",vH="RotateImmediately",Nm="RotationLambdaARN",AH="ResourceNotFoundException",PH="RandomPassword",IH="RandomPasswordType",Dm="ResourcePolicy",Mm="RotationRules",OH="RemoveRegionsFromReplication",NH="RemoveRegionsFromReplicationRequest",DH="RemoveRegionsFromReplicationResponse",MH="RemoveReplicaRegions",kH="ReplicaRegionType",LH="RotationRulesType",Sl="ReplicationStatus",FH="ReplicationStatusListType",qH="RestoreSecretRequest",UH="RestoreSecretResponse",$H="RotateSecretRequest",BH="RotateSecretResponse",HH="ReplicationStatusType",jH="ReplicateSecretToRegions",zH="ReplicateSecretToRegionsRequest",VH="ReplicateSecretToRegionsResponse",GH="RestoreSecret",WH="RotateSecret",KH="RotationToken",QH="RotationTokenType",YH="RecoveryWindowInDays",XH="Status",Ii="SecretBinary",JH="SecretBinaryType",ZH="ScheduleExpression",Ce="SecretId",ej="SecretIdList",tj="SecretList",rj="SecretListEntry",nj="SecretListType",sj="StatusMessage",oj="SortOrder",ij="StopReplicationToReplica",aj="StopReplicationToReplicaRequest",cj="StopReplicationToReplicaResponse",Oi="SecretString",uj="SecretStringType",lj="SecretValues",dj="SecretValueEntry",fj="SecretVersionsListEntry",pj="SecretVersionsListType",hj="SecretValuesType",mj="SecretVersionsToStages",LA="SecretVersionsToStagesMapType",El="Tags",gj="TagKeys",yj="TagListType",Sj="TagResource",Ej="TagResourceRequest",wj="Tag",_j="UntagResource",bj="UntagResourceRequest",Rj="UpdateSecret",Tj="UpdateSecretRequest",xj="UpdateSecretResponse",Cj="UpdateSecretVersionStage",vj="UpdateSecretVersionStageRequest",Aj="UpdateSecretVersionStageResponse",Pj="Values",Ij="ValidationErrors",Oj="ValidationErrorsEntry",Nj="ValidationErrorsType",mr="VersionId",Dj="VersionIdsToStages",Mj="ValidateResourcePolicy",kj="ValidateResourcePolicyRequest",Lj="ValidateResourcePolicyResponse",FA="VersionStage",Ni="VersionStages",Fj="Value",qj="Versions",Mt="client",xt="error",Uj="server",qA="smithy.ts.sdk.synthetic.com.amazonaws.secretsmanager",P="com.amazonaws.secretsmanager",$j=[0,P,IH,8,0],Bj=[0,P,QH,8,0],Di=[0,P,JH,8,21],Mi=[0,P,uj,8,0],Hj=[3,P,oB,0,[Ce,OB,ht],[0,0,0]],jj=[3,P,cB,0,[ej,CA,Om,$s],[64,()=>BA,1,0]],zj=[3,P,uB,0,[lj,$s,IB],[[()=>rz,0],0,()=>ez]],Vj=[3,P,pB,0,[Ce],[0]],Gj=[3,P,hB,0,[Pe,Ue,mr],[0,0,0]],Wj=[3,P,gB,0,[Ue,ml,gl,Us,Ii,Oi,El,TA,vA],[0,[0,4],0,0,[()=>Di,0],[()=>Mi,0],()=>_l,()=>$A,2]],Kj=[3,P,yB,0,[Pe,Ue,mr,Sl],[0,0,0,()=>wl]],Qj=[-3,P,EB,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(Qj,eA);var Yj=[3,P,_B,0,[Ce],[0]],Xj=[3,P,bB,0,[Pe,Ue],[0,0]],Jj=[3,P,TB,0,[Ce,YH,UB],[0,1,2]],Zj=[3,P,xB,0,[Pe,Ue,SB],[0,0,4]],e4=[3,P,CB,0,[Ce],[0]],t4=[3,P,vB,0,[Pe,Ue,gl,Us,kA,Nm,Mm,IA,PA,yl,xA,OA,El,Dj,NA,Pi,DA,Sl],[0,0,0,0,2,0,()=>km,4,4,4,4,4,()=>_l,[2,P,LA,0,0,64],0,4,0,()=>wl]],r4=[-3,P,DB,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(r4,fA);var n4=[3,P,BB,0,[AA,Pj],[0,64]],s4=[3,P,jB,0,[hH,NB,LB,FB,qB,MB,rH,xH],[1,0,2,2,2,2,2,2]],o4=[3,P,zB,0,[PH],[[()=>$j,0]]],i4=[3,P,VB,0,[Ce],[0]],a4=[3,P,GB,0,[Pe,Ue,Dm],[0,0,0]],c4=[3,P,QB,0,[Ce,mr,FA],[0,0,0]],u4=[3,P,YB,0,[Pe,Ue,mr,Ii,Oi,Ni,Pi],[0,0,0,[()=>Di,0],[()=>Mi,0],64,4]],l4=[-3,P,nH,{[xt]:Uj},[ht],[0]];it.TypeRegistry.for(P).registerError(l4,rA);var d4=[-3,P,JB,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(d4,sA);var f4=[-3,P,eH,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(f4,iA);var p4=[-3,P,tH,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(p4,cA);var h4=[-3,P,oH,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(h4,hA);var m4=[3,P,aH,0,[ZB,Om,$s,CA,oj],[2,1,0,()=>BA,0]],g4=[3,P,cH,0,[tj,$s],[()=>tz,0]],y4=[3,P,lH,0,[Ce,Om,$s,XB],[0,1,0,2]],S4=[3,P,dH,0,[qj,$s,Pe,Ue],[()=>nz,0,0,0]],E4=[-3,P,fH,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(E4,gA);var w4=[-3,P,mH,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(w4,SA);var _4=[-3,P,gH,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(_4,bA);var b4=[3,P,SH,0,[Ce,Dm,lB],[0,0,2]],R4=[3,P,EH,0,[Pe,Ue],[0,0]],T4=[3,P,_H,0,[Ce,ml,Ii,Oi,Ni,KH],[0,[0,4],[()=>Di,0],[()=>Mi,0],64,[()=>Bj,0]]],x4=[3,P,bH,0,[Pe,Ue,mr,Ni],[0,0,0,64]],C4=[3,P,NH,0,[Ce,MH],[0,64]],v4=[3,P,DH,0,[Pe,Sl],[0,()=>wl]],A4=[3,P,kH,0,[MA,Us],[0,0]],P4=[3,P,zH,0,[Ce,TA,vA],[0,()=>$A,2]],I4=[3,P,VH,0,[Pe,Sl],[0,()=>wl]],O4=[3,P,HH,0,[MA,Us,XH,sj,yl],[0,0,0,0,4]],N4=[-3,P,TH,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(N4,wA);var D4=[-3,P,AH,{[xt]:Mt},[ht],[0]];it.TypeRegistry.for(P).registerError(D4,lA);var M4=[3,P,qH,0,[Ce],[0]],k4=[3,P,UH,0,[Pe,Ue],[0,0]],L4=[3,P,$H,0,[Ce,ml,Nm,Mm,vH],[0,[0,4],0,()=>km,2]],F4=[3,P,BH,0,[Pe,Ue,mr],[0,0,0]],km=[3,P,LH,0,[nB,PB,ZH],[1,0,0]],q4=[3,P,rj,0,[Pe,Ue,gl,Us,kA,Nm,Mm,IA,PA,yl,xA,OA,El,mj,NA,Pi,DA],[0,0,0,0,2,0,()=>km,4,4,4,4,4,()=>_l,[2,P,LA,0,0,64],0,4,0]],U4=[3,P,dj,0,[Pe,Ue,mr,Ii,Oi,Ni,Pi],[0,0,0,[()=>Di,0],[()=>Mi,0],64,4]],$4=[3,P,fj,0,[mr,Ni,yl,Pi,sH],[0,64,4,4,64]],B4=[3,P,aj,0,[Ce],[0]],H4=[3,P,cj,0,[Pe],[0]],j4=[3,P,wj,0,[AA,Fj],[0,0]],z4=[3,P,Ej,0,[Ce,El],[0,()=>_l]],V4=[3,P,bj,0,[Ce,gj],[0,64]],G4=[3,P,Tj,0,[Ce,ml,gl,Us,Ii,Oi],[0,[0,4],0,0,[()=>Di,0],[()=>Mi,0]]],W4=[3,P,xj,0,[Pe,Ue,mr],[0,0,0]],K4=[3,P,vj,0,[Ce,FA,CH,pH],[0,0,0,0]],Q4=[3,P,Aj,0,[Pe,Ue],[0,0]],Y4=[3,P,kj,0,[Ce,Dm],[0,0]],X4=[3,P,Lj,0,[RH,Ij],[2,()=>sz]],J4=[3,P,Oj,0,[dB,kB],[0,0]],UA="unit",Z4=[-3,qA,"SecretsManagerServiceException",0,[],[]];it.TypeRegistry.for(qA).registerError(Z4,at);var $A=[1,P,iB,0,()=>A4],ez=[1,P,sB,0,()=>Hj],BA=[1,P,$B,0,()=>n4],wl=[1,P,FH,0,()=>O4],tz=[1,P,nj,0,()=>q4],rz=[1,P,hj,0,[()=>U4,0]],nz=[1,P,pj,0,()=>$4],_l=[1,P,yj,0,()=>j4],sz=[1,P,Nj,0,()=>J4],oz=[9,P,aB,0,()=>jj,()=>zj],iz=[9,P,fB,0,()=>Vj,()=>Gj],az=[9,P,mB,0,()=>Wj,()=>Kj],cz=[9,P,wB,0,()=>Yj,()=>Xj],uz=[9,P,RB,0,()=>Jj,()=>Zj],lz=[9,P,AB,0,()=>e4,()=>t4],dz=[9,P,HB,0,()=>s4,()=>o4],fz=[9,P,WB,0,()=>i4,()=>a4],pz=[9,P,KB,0,()=>c4,()=>u4],hz=[9,P,iH,0,()=>m4,()=>g4],mz=[9,P,uH,0,()=>y4,()=>S4],gz=[9,P,yH,0,()=>b4,()=>R4],yz=[9,P,wH,0,()=>T4,()=>x4],Sz=[9,P,OH,0,()=>C4,()=>v4],Ez=[9,P,jH,0,()=>P4,()=>I4],wz=[9,P,GH,0,()=>M4,()=>k4],_z=[9,P,WH,0,()=>L4,()=>F4],bz=[9,P,ij,0,()=>B4,()=>H4],Rz=[9,P,Sj,0,()=>z4,()=>UA],Tz=[9,P,_j,0,()=>V4,()=>UA],xz=[9,P,Rj,0,()=>G4,()=>W4],Cz=[9,P,Cj,0,()=>K4,()=>Q4],vz=[9,P,Mj,0,()=>Y4,()=>X4],Ci=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","BatchGetSecretValue",{}).n("SecretsManagerClient","BatchGetSecretValueCommand").sc(oz).build(){},Ku=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","CancelRotateSecret",{}).n("SecretsManagerClient","CancelRotateSecretCommand").sc(iz).build(){},Qu=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","CreateSecret",{}).n("SecretsManagerClient","CreateSecretCommand").sc(az).build(){},Yu=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteResourcePolicy",{}).n("SecretsManagerClient","DeleteResourcePolicyCommand").sc(cz).build(){},Xu=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteSecret",{}).n("SecretsManagerClient","DeleteSecretCommand").sc(uz).build(){},Ju=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","DescribeSecret",{}).n("SecretsManagerClient","DescribeSecretCommand").sc(lz).build(){},Zu=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetRandomPassword",{}).n("SecretsManagerClient","GetRandomPasswordCommand").sc(dz).build(){},el=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetResourcePolicy",{}).n("SecretsManagerClient","GetResourcePolicyCommand").sc(fz).build(){},tl=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","GetSecretValue",{}).n("SecretsManagerClient","GetSecretValueCommand").sc(pz).build(){},vi=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecrets",{}).n("SecretsManagerClient","ListSecretsCommand").sc(hz).build(){},Ai=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecretVersionIds",{}).n("SecretsManagerClient","ListSecretVersionIdsCommand").sc(mz).build(){},rl=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","PutResourcePolicy",{}).n("SecretsManagerClient","PutResourcePolicyCommand").sc(gz).build(){},nl=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","PutSecretValue",{}).n("SecretsManagerClient","PutSecretValueCommand").sc(yz).build(){},sl=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","RemoveRegionsFromReplication",{}).n("SecretsManagerClient","RemoveRegionsFromReplicationCommand").sc(Sz).build(){},ol=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","ReplicateSecretToRegions",{}).n("SecretsManagerClient","ReplicateSecretToRegionsCommand").sc(Ez).build(){},il=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","RestoreSecret",{}).n("SecretsManagerClient","RestoreSecretCommand").sc(wz).build(){},al=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","RotateSecret",{}).n("SecretsManagerClient","RotateSecretCommand").sc(_z).build(){},cl=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","StopReplicationToReplica",{}).n("SecretsManagerClient","StopReplicationToReplicaCommand").sc(bz).build(){},ul=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","TagResource",{}).n("SecretsManagerClient","TagResourceCommand").sc(Rz).build(){},ll=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","UntagResource",{}).n("SecretsManagerClient","UntagResourceCommand").sc(Tz).build(){},dl=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecret",{}).n("SecretsManagerClient","UpdateSecretCommand").sc(xz).build(){},fl=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecretVersionStage",{}).n("SecretsManagerClient","UpdateSecretVersionStageCommand").sc(Cz).build(){},pl=class extends re.Command.classBuilder().ep(ge).m(function(t,r,n,s){return[de.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("secretsmanager","ValidateResourcePolicy",{}).n("SecretsManagerClient","ValidateResourcePolicyCommand").sc(vz).build(){},Az={BatchGetSecretValueCommand:Ci,CancelRotateSecretCommand:Ku,CreateSecretCommand:Qu,DeleteResourcePolicyCommand:Yu,DeleteSecretCommand:Xu,DescribeSecretCommand:Ju,GetRandomPasswordCommand:Zu,GetResourcePolicyCommand:el,GetSecretValueCommand:tl,ListSecretsCommand:vi,ListSecretVersionIdsCommand:Ai,PutResourcePolicyCommand:rl,PutSecretValueCommand:nl,RemoveRegionsFromReplicationCommand:sl,ReplicateSecretToRegionsCommand:ol,RestoreSecretCommand:il,RotateSecretCommand:al,StopReplicationToReplicaCommand:cl,TagResourceCommand:ul,UntagResourceCommand:ll,UpdateSecretCommand:dl,UpdateSecretVersionStageCommand:fl,ValidateResourcePolicyCommand:pl},hl=class extends Ln{};re.createAggregatedClient(Az,hl);var Pz=qs.createPaginator(Ln,Ci,"NextToken","NextToken","MaxResults"),Iz=qs.createPaginator(Ln,Ai,"NextToken","NextToken","MaxResults"),Oz=qs.createPaginator(Ln,vi,"NextToken","NextToken","MaxResults");Object.defineProperty($,"$Command",{enumerable:!0,get:function(){return re.Command}});Object.defineProperty($,"__Client",{enumerable:!0,get:function(){return re.Client}});$.BatchGetSecretValueCommand=Ci;$.CancelRotateSecretCommand=Ku;$.CreateSecretCommand=Qu;$.DecryptionFailure=eA;$.DeleteResourcePolicyCommand=Yu;$.DeleteSecretCommand=Xu;$.DescribeSecretCommand=Ju;$.EncryptionFailure=fA;$.FilterNameStringType=eB;$.GetRandomPasswordCommand=Zu;$.GetResourcePolicyCommand=el;$.GetSecretValueCommand=tl;$.InternalServiceError=rA;$.InvalidNextTokenException=sA;$.InvalidParameterException=iA;$.InvalidRequestException=cA;$.LimitExceededException=hA;$.ListSecretVersionIdsCommand=Ai;$.ListSecretsCommand=vi;$.MalformedPolicyDocumentException=gA;$.PreconditionNotMetException=SA;$.PublicPolicyException=bA;$.PutResourcePolicyCommand=rl;$.PutSecretValueCommand=nl;$.RemoveRegionsFromReplicationCommand=sl;$.ReplicateSecretToRegionsCommand=ol;$.ResourceExistsException=wA;$.ResourceNotFoundException=lA;$.RestoreSecretCommand=il;$.RotateSecretCommand=al;$.SecretsManager=hl;$.SecretsManagerClient=Ln;$.SecretsManagerServiceException=at;$.SortOrderType=rB;$.StatusType=tB;$.StopReplicationToReplicaCommand=cl;$.TagResourceCommand=ul;$.UntagResourceCommand=ll;$.UpdateSecretCommand=dl;$.UpdateSecretVersionStageCommand=fl;$.ValidateResourcePolicyCommand=pl;$.paginateBatchGetSecretValue=Pz;$.paginateListSecretVersionIds=Iz;$.paginateListSecrets=Oz});var Fm=R(jA=>{"use strict";jA.parse=function(e,t){return new Lm(e,t).parse()};var Lm=class e{constructor(t,r){this.source=t,this.transform=r||Nz,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var t=this.source[this.position++];return t==="\\"?{value:this.source[this.position++],escaped:!0}:{value:t,escaped:!1}}record(t){this.recorded.push(t)}newEntry(t){var r;(this.recorded.length>0||t)&&(r=this.recorded.join(""),r==="NULL"&&!t&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var t=this.nextCharacter();if(t.value==="=")break}}parse(t){var r,n,s;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!s)this.dimension++,this.dimension>1&&(n=new e(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!s){if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else r.value==='"'&&!r.escaped?(s&&this.newEntry(!0),s=!s):r.value===","&&!s?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function Nz(e){return e}});var qm=R((fJ,zA)=>{var Dz=Fm();zA.exports={create:function(e,t){return{parse:function(){return Dz.parse(e,t)}}}}});var WA=R((pJ,GA)=>{"use strict";var Mz=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,kz=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,Lz=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,Fz=/^-?infinity$/;GA.exports=function(t){if(Fz.test(t))return Number(t.replace("i","I"));var r=Mz.exec(t);if(!r)return qz(t)||null;var n=!!r[8],s=parseInt(r[1],10);n&&(s=VA(s));var o=parseInt(r[2],10)-1,i=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),u=parseInt(r[6],10),f=r[7];f=f?1e3*parseFloat(f):0;var p,h=Uz(t);return h!=null?(p=new Date(Date.UTC(s,o,i,a,c,u,f)),Um(s)&&p.setUTCFullYear(s),h!==0&&p.setTime(p.getTime()-h)):(p=new Date(s,o,i,a,c,u,f),Um(s)&&p.setFullYear(s)),p};function qz(e){var t=kz.exec(e);if(t){var r=parseInt(t[1],10),n=!!t[4];n&&(r=VA(r));var s=parseInt(t[2],10)-1,o=t[3],i=new Date(r,s,o);return Um(r)&&i.setFullYear(r),i}}function Uz(e){if(e.endsWith("+00"))return 0;var t=Lz.exec(e.split(" ")[1]);if(t){var r=t[1];if(r==="Z")return 0;var n=r==="-"?-1:1,s=parseInt(t[2],10)*3600+parseInt(t[3]||0,10)*60+parseInt(t[4]||0,10);return s*n*1e3}}function VA(e){return-(e-1)}function Um(e){return e>=0&&e<100}});var QA=R((hJ,KA)=>{KA.exports=Bz;var $z=Object.prototype.hasOwnProperty;function Bz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)$z.call(r,n)&&(e[n]=r[n])}return e}});var JA=R((mJ,XA)=>{"use strict";var Hz=QA();XA.exports=Bs;function Bs(e){if(!(this instanceof Bs))return new Bs(e);Hz(this,eV(e))}var jz=["seconds","minutes","hours","days","months","years"];Bs.prototype.toPostgres=function(){var e=jz.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),e.length===0?"0":e.map(function(t){var r=this[t]||0;return t==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+t},this).join(" ")};var zz={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},Vz=["years","months","days"],Gz=["hours","minutes","seconds"];Bs.prototype.toISOString=Bs.prototype.toISO=function(){var e=Vz.map(r,this).join(""),t=Gz.map(r,this).join("");return"P"+e+"T"+t;function r(n){var s=this[n]||0;return n==="seconds"&&this.milliseconds&&(s=(s+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),s+zz[n]}};var $m="([+-]?\\d+)",Wz=$m+"\\s+years?",Kz=$m+"\\s+mons?",Qz=$m+"\\s+days?",Yz="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",Xz=new RegExp([Wz,Kz,Qz,Yz].map(function(e){return"("+e+")?"}).join("\\s*")),YA={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},Jz=["hours","minutes","seconds","milliseconds"];function Zz(e){var t=e+"000000".slice(e.length);return parseInt(t,10)/1e3}function eV(e){if(!e)return{};var t=Xz.exec(e),r=t[8]==="-";return Object.keys(YA).reduce(function(n,s){var o=YA[s],i=t[o];return!i||(i=s==="milliseconds"?Zz(i):parseInt(i,10),!i)||(r&&~Jz.indexOf(s)&&(i*=-1),n[s]=i),n},{})}});var eP=R((gJ,ZA)=>{"use strict";ZA.exports=function(t){if(/^\\x/.test(t))return new Buffer(t.substr(2),"hex");for(var r="",n=0;n<t.length;)if(t[n]!=="\\")r+=t[n],++n;else if(/[0-7]{3}/.test(t.substr(n+1,3)))r+=String.fromCharCode(parseInt(t.substr(n+1,3),8)),n+=4;else{for(var s=1;n+s<t.length&&t[n+s]==="\\";)s++;for(var o=0;o<Math.floor(s/2);++o)r+="\\";n+=Math.floor(s/2)*2}return new Buffer(r,"binary")}});var aP=R((yJ,iP)=>{var ki=Fm(),Li=qm(),bl=WA(),rP=JA(),nP=eP();function Rl(e){return function(r){return r===null?r:e(r)}}function sP(e){return e===null?e:e==="TRUE"||e==="t"||e==="true"||e==="y"||e==="yes"||e==="on"||e==="1"}function tV(e){return e?ki.parse(e,sP):null}function rV(e){return parseInt(e,10)}function Bm(e){return e?ki.parse(e,Rl(rV)):null}function nV(e){return e?ki.parse(e,Rl(function(t){return oP(t).trim()})):null}var sV=function(e){if(!e)return null;var t=Li.create(e,function(r){return r!==null&&(r=Vm(r)),r});return t.parse()},Hm=function(e){if(!e)return null;var t=Li.create(e,function(r){return r!==null&&(r=parseFloat(r)),r});return t.parse()},Ct=function(e){if(!e)return null;var t=Li.create(e);return t.parse()},jm=function(e){if(!e)return null;var t=Li.create(e,function(r){return r!==null&&(r=bl(r)),r});return t.parse()},oV=function(e){if(!e)return null;var t=Li.create(e,function(r){return r!==null&&(r=rP(r)),r});return t.parse()},iV=function(e){return e?ki.parse(e,Rl(nP)):null},zm=function(e){return parseInt(e,10)},oP=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},tP=function(e){return e?ki.parse(e,Rl(JSON.parse)):null},Vm=function(e){return e[0]!=="("?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},aV=function(e){if(e[0]!=="<"&&e[1]!=="(")return null;for(var t="(",r="",n=!1,s=2;s<e.length-1;s++){if(n||(t+=e[s]),e[s]===")"){n=!0;continue}else if(!n)continue;e[s]!==","&&(r+=e[s])}var o=Vm(t);return o.radius=parseFloat(r),o},cV=function(e){e(20,oP),e(21,zm),e(23,zm),e(26,zm),e(700,parseFloat),e(701,parseFloat),e(16,sP),e(1082,bl),e(1114,bl),e(1184,bl),e(600,Vm),e(651,Ct),e(718,aV),e(1e3,tV),e(1001,iV),e(1005,Bm),e(1007,Bm),e(1028,Bm),e(1016,nV),e(1017,sV),e(1021,Hm),e(1022,Hm),e(1231,Hm),e(1014,Ct),e(1015,Ct),e(1008,Ct),e(1009,Ct),e(1040,Ct),e(1041,Ct),e(1115,jm),e(1182,jm),e(1185,jm),e(1186,rP),e(1187,oV),e(17,nP),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,tP),e(3807,tP),e(3907,Ct),e(2951,Ct),e(791,Ct),e(1183,Ct),e(1270,Ct)};iP.exports={init:cV}});var uP=R((SJ,cP)=>{"use strict";var ct=1e6;function uV(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),n="";t<0&&(t=~t+(r===0),r=~r+1>>>0,n="-");var s="",o,i,a,c,u,f;{if(o=t%ct,t=t/ct>>>0,i=4294967296*o+r,r=i/ct>>>0,a=""+(i-ct*r),r===0&&t===0)return n+a+s;for(c="",u=6-a.length,f=0;f<u;f++)c+="0";s=c+a+s}{if(o=t%ct,t=t/ct>>>0,i=4294967296*o+r,r=i/ct>>>0,a=""+(i-ct*r),r===0&&t===0)return n+a+s;for(c="",u=6-a.length,f=0;f<u;f++)c+="0";s=c+a+s}{if(o=t%ct,t=t/ct>>>0,i=4294967296*o+r,r=i/ct>>>0,a=""+(i-ct*r),r===0&&t===0)return n+a+s;for(c="",u=6-a.length,f=0;f<u;f++)c+="0";s=c+a+s}return o=t%ct,i=4294967296*o+r,a=""+i%ct,n+a+s}cP.exports=uV});var hP=R((EJ,pP)=>{var lV=uP(),ye=function(e,t,r,n,s){r=r||0,n=n||!1,s=s||function(m,y,b){return m*Math.pow(2,b)+y};var o=r>>3,i=function(m){return n?~m&255:m},a=255,c=8-r%8;t<c&&(a=255<<8-t&255,c=t),r&&(a=a>>r%8);var u=0;r%8+t>=8&&(u=s(0,i(e[o])&a,c));for(var f=t+r>>3,p=o+1;p<f;p++)u=s(u,i(e[p]),8);var h=(t+r)%8;return h>0&&(u=s(u,i(e[f])>>8-h,h)),u},fP=function(e,t,r){var n=Math.pow(2,r-1)-1,s=ye(e,1),o=ye(e,r,1);if(o===0)return 0;var i=1,a=function(u,f,p){u===0&&(u=1);for(var h=1;h<=p;h++)i/=2,(f&1<<p-h)>0&&(u+=i);return u},c=ye(e,t,r+1,!1,a);return o==Math.pow(2,r+1)-1?c===0?s===0?1/0:-1/0:NaN:(s===0?1:-1)*Math.pow(2,o-n)*c},dV=function(e){return ye(e,1)==1?-1*(ye(e,15,1,!0)+1):ye(e,15,1)},lP=function(e){return ye(e,1)==1?-1*(ye(e,31,1,!0)+1):ye(e,31,1)},fV=function(e){return fP(e,23,8)},pV=function(e){return fP(e,52,11)},hV=function(e){var t=ye(e,16,32);if(t==49152)return NaN;for(var r=Math.pow(1e4,ye(e,16,16)),n=0,s=[],o=ye(e,16),i=0;i<o;i++)n+=ye(e,16,64+16*i)*r,r/=1e4;var a=Math.pow(10,ye(e,16,48));return(t===0?1:-1)*Math.round(n*a)/a},dP=function(e,t){var r=ye(t,1),n=ye(t,63,1),s=new Date((r===0?1:-1)*n/1e3+9466848e5);return e||s.setTime(s.getTime()+s.getTimezoneOffset()*6e4),s.usec=n%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(o){this.usec=o},s.getUTCMicroSeconds=function(){return this.usec},s},Fi=function(e){for(var t=ye(e,32),r=ye(e,32,32),n=ye(e,32,64),s=96,o=[],i=0;i<t;i++)o[i]=ye(e,32,s),s+=32,s+=32;var a=function(u){var f=ye(e,32,s);if(s+=32,f==4294967295)return null;var p;if(u==23||u==20)return p=ye(e,f*8,s),s+=f*8,p;if(u==25)return p=e.toString(this.encoding,s>>3,(s+=f<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,f){var p=[],h;if(u.length>1){var m=u.shift();for(h=0;h<m;h++)p[h]=c(u,f);u.unshift(m)}else for(h=0;h<u[0];h++)p[h]=a(f);return p};return c(o,n)},mV=function(e){return e.toString("utf8")},gV=function(e){return e===null?null:ye(e,8)>0},yV=function(e){e(20,lV),e(21,dV),e(23,lP),e(26,lP),e(1700,hV),e(700,fV),e(701,pV),e(16,gV),e(1114,dP.bind(null,!1)),e(1184,dP.bind(null,!0)),e(1e3,Fi),e(1007,Fi),e(1016,Fi),e(1008,Fi),e(1009,Fi),e(25,mV)};pP.exports={init:yV}});var gP=R((wJ,mP)=>{mP.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var $i=R(Ui=>{var SV=aP(),EV=hP(),wV=qm(),_V=gP();Ui.getTypeParser=bV;Ui.setTypeParser=RV;Ui.arrayParser=wV;Ui.builtins=_V;var qi={text:{},binary:{}};function yP(e){return String(e)}function bV(e,t){return t=t||"text",qi[t]&&qi[t][e]||yP}function RV(e,t,r){typeof t=="function"&&(r=t,t="text"),qi[t][e]=r}SV.init(function(e,t){qi.text[e]=t});EV.init(function(e,t){qi.binary[e]=t})});var Bi=R((bJ,Gm)=>{"use strict";Gm.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Hs=$i(),TV=Hs.getTypeParser(20,"text"),xV=Hs.getTypeParser(1016,"text");Gm.exports.__defineSetter__("parseInt8",function(e){Hs.setTypeParser(20,"text",e?Hs.getTypeParser(23,"text"):TV),Hs.setTypeParser(1016,"text",e?Hs.getTypeParser(1007,"text"):xV)})});var js=R((RJ,wP)=>{"use strict";var CV=Bi(),SP=require("util"),{isDate:vV}=SP.types||SP;function AV(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function EP(e){let t="{";for(let r=0;r<e.length;r++)if(r>0&&(t=t+","),e[r]===null||typeof e[r]>"u")t=t+"NULL";else if(Array.isArray(e[r]))t=t+EP(e[r]);else if(ArrayBuffer.isView(e[r])){let n=e[r];if(!(n instanceof Buffer)){let s=Buffer.from(n.buffer,n.byteOffset,n.byteLength);s.length===n.byteLength?n=s:n=s.slice(n.byteOffset,n.byteOffset+n.byteLength)}t+="\\\\x"+n.toString("hex")}else t+=AV(Tl(e[r]));return t=t+"}",t}var Tl=function(e,t){if(e==null)return null;if(typeof e=="object"){if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){let r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return vV(e)?CV.parseInputDatesAsUTC?OV(e):IV(e):Array.isArray(e)?EP(e):PV(e,t)}return e.toString()};function PV(e,t){if(e&&typeof e.toPostgres=="function"){if(t=t||[],t.indexOf(e)!==-1)throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),Tl(e.toPostgres(Tl),t)}return JSON.stringify(e)}function IV(e){let t=-e.getTimezoneOffset(),r=e.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);let s=String(r).padStart(4,"0")+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+String(e.getMilliseconds()).padStart(3,"0");return t<0?(s+="-",t*=-1):s+="+",s+=String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0"),n&&(s+=" BC"),s}function OV(e){let t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);let n=String(t).padStart(4,"0")+"-"+String(e.getUTCMonth()+1).padStart(2,"0")+"-"+String(e.getUTCDate()).padStart(2,"0")+"T"+String(e.getUTCHours()).padStart(2,"0")+":"+String(e.getUTCMinutes()).padStart(2,"0")+":"+String(e.getUTCSeconds()).padStart(2,"0")+"."+String(e.getUTCMilliseconds()).padStart(3,"0");return n+="+00:00",r&&(n+=" BC"),n}function NV(e,t,r){return e=typeof e=="string"?{text:e}:e,t&&(typeof t=="function"?e.callback=t:e.values=t),r&&(e.callback=r),e}var DV=function(e){return'"'+e.replace(/"/g,'""')+'"'},MV=function(e){let t=!1,r="'";if(e==null||typeof e!="string")return"''";for(let n=0;n<e.length;n++){let s=e[n];s==="'"?r+=s+s:s==="\\"?(r+=s+s,t=!0):r+=s}return r+="'",t===!0&&(r=" E"+r),r};wP.exports={prepareValue:function(t){return Tl(t)},normalizeQueryConfig:NV,escapeIdentifier:DV,escapeLiteral:MV}});var bP=R((TJ,_P)=>{"use strict";var zs=require("crypto");function Wm(e){return zs.createHash("md5").update(e,"utf-8").digest("hex")}function kV(e,t,r){let n=Wm(t+e);return"md5"+Wm(Buffer.concat([Buffer.from(n),r]))}function LV(e){return zs.createHash("sha256").update(e).digest()}function FV(e,t){return e=e.replace(/(\D)-/,"$1"),zs.createHash(e).update(t).digest()}function qV(e,t){return zs.createHmac("sha256",e).update(t).digest()}async function UV(e,t,r){return zs.pbkdf2Sync(e,t,r,32,"sha256")}_P.exports={postgresMd5PasswordHash:kV,randomBytes:zs.randomBytes,deriveKey:UV,sha256:LV,hashByName:FV,hmacSha256:qV,md5:Wm}});var CP=R((xJ,xP)=>{var RP=require("crypto");xP.exports={postgresMd5PasswordHash:BV,randomBytes:$V,deriveKey:VV,sha256:HV,hashByName:jV,hmacSha256:zV,md5:Km};var TP=RP.webcrypto||globalThis.crypto,Fn=TP.subtle,Qm=new TextEncoder;function $V(e){return TP.getRandomValues(Buffer.alloc(e))}async function Km(e){try{return RP.createHash("md5").update(e,"utf-8").digest("hex")}catch{let r=typeof e=="string"?Qm.encode(e):e,n=await Fn.digest("MD5",r);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}}async function BV(e,t,r){let n=await Km(t+e);return"md5"+await Km(Buffer.concat([Buffer.from(n),r]))}async function HV(e){return await Fn.digest("SHA-256",e)}async function jV(e,t){return await Fn.digest(e,t)}async function zV(e,t){let r=await Fn.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Fn.sign("HMAC",r,Qm.encode(t))}async function VV(e,t,r){let n=await Fn.importKey("raw",Qm.encode(e),"PBKDF2",!1,["deriveBits"]),s={name:"PBKDF2",hash:"SHA-256",salt:t,iterations:r};return await Fn.deriveBits(s,n,256,["deriveBits"])}});var Xm=R((CJ,Ym)=>{"use strict";var GV=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;GV?Ym.exports=bP():Ym.exports=CP()});var PP=R((vJ,AP)=>{function qn(e,t){return new Error("SASL channel binding: "+e+" when parsing public certificate "+t.toString("base64"))}function Jm(e,t){let r=e[t++];if(r<128)return{length:r,index:t};let n=r&127;if(n>4)throw qn("bad length",e);r=0;for(let s=0;s<n;s++)r=r<<8|e[t++];return{length:r,index:t}}function vP(e,t){if(e[t++]!==6)throw qn("non-OID data",e);let{length:r,index:n}=Jm(e,t);t=n;let s=t+r,o=e[t++],i=(o/40>>0)+"."+o%40;for(;t<s;){let a=0;for(;t<s;){let c=e[t++];if(a=a<<7|c&127,c<128)break}i+="."+a}return{oid:i,index:t}}function Hi(e,t){if(e[t++]!==48)throw qn("non-sequence data",e);return Jm(e,t)}function WV(e,t){t===void 0&&(t=0),t=Hi(e,t).index;let{length:r,index:n}=Hi(e,t);t=n+r,t=Hi(e,t).index;let{oid:s,index:o}=vP(e,t);switch(s){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(t=o,t=Hi(e,t).index,e[t++]!==160)throw qn("non-tag data",e);t=Jm(e,t).index,t=Hi(e,t).index;let{oid:i}=vP(e,t);switch(i){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw qn("unknown hash OID "+i,e)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw qn("Ed448 certificate channel binding is not currently supported by Postgres")}throw qn("unknown OID "+s,e)}AP.exports={signatureAlgorithmHashFromCertificate:WV}});var DP=R((AJ,NP)=>{"use strict";var nn=Xm(),{signatureAlgorithmHashFromCertificate:KV}=PP();function QV(e,t){let r=["SCRAM-SHA-256"];t&&r.unshift("SCRAM-SHA-256-PLUS");let n=r.find(i=>e.includes(i));if(!n)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(n==="SCRAM-SHA-256-PLUS"&&typeof t.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let s=nn.randomBytes(18).toString("base64");return{mechanism:n,clientNonce:s,response:(n==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":t?"y":"n")+",,n=*,r="+s,message:"SASLInitialResponse"}}async function YV(e,t,r,n){if(e.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(t==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let s=ZV(r);if(s.nonce.startsWith(e.clientNonce)){if(s.nonce.length===e.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let o="n=*,r="+e.clientNonce,i="r="+s.nonce+",s="+s.salt+",i="+s.iteration,a=n?"eSws":"biws";if(e.mechanism==="SCRAM-SHA-256-PLUS"){let O=n.getPeerCertificate().raw,k=KV(O);(k==="MD5"||k==="SHA-1")&&(k="SHA-256");let U=await nn.hashByName(k,O);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(U)]).toString("base64")}let c="c="+a+",r="+s.nonce,u=o+","+i+","+c,f=Buffer.from(s.salt,"base64"),p=await nn.deriveKey(t,f,s.iteration),h=await nn.hmacSha256(p,"Client Key"),m=await nn.sha256(h),y=await nn.hmacSha256(m,u),b=t3(Buffer.from(h),Buffer.from(y)).toString("base64"),C=await nn.hmacSha256(p,"Server Key"),A=await nn.hmacSha256(C,u);e.message="SASLResponse",e.serverSignature=Buffer.from(A).toString("base64"),e.response=c+",p="+b}function XV(e,t){if(e.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=e3(t);if(r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function JV(e){if(typeof e!="string")throw new TypeError("SASL: text must be a string");return e.split("").map((t,r)=>e.charCodeAt(r)).every(t=>t>=33&&t<=43||t>=45&&t<=126)}function IP(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function OP(e){if(typeof e!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(t=>{if(!/^.=/.test(t))throw new Error("SASL: Invalid attribute pair entry");let r=t[0],n=t.substring(2);return[r,n]}))}function ZV(e){let t=OP(e),r=t.get("r");if(r){if(!JV(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=t.get("s");if(n){if(!IP(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let s=t.get("i");if(s){if(!/^[1-9][0-9]*$/.test(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let o=parseInt(s,10);return{nonce:r,salt:n,iteration:o}}function e3(e){let r=OP(e).get("v");if(r){if(!IP(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function t3(e,t){if(!Buffer.isBuffer(e))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(t))throw new TypeError("second argument must be a Buffer");if(e.length!==t.length)throw new Error("Buffer lengths must match");if(e.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(e.map((r,n)=>e[n]^t[n]))}NP.exports={startSession:QV,continueSession:YV,finalizeSession:XV}});var Cl=R((PJ,MP)=>{"use strict";var r3=$i();function xl(e){this._types=e||r3,this.text={},this.binary={}}xl.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}};xl.prototype.setTypeParser=function(e,t,r){typeof t=="function"&&(r=t,t="text"),this.getOverrides(t)[e]=r};xl.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)};MP.exports=xl});var FP=R((IJ,LP)=>{"use strict";function Vs(e,t={}){if(e.charAt(0)==="/"){let c=e.split(" ");return{host:c[0],database:c[1]}}let r={},n,s=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)&&(e=encodeURI(e).replace(/%25(\d\d)/g,"%$1"));try{try{n=new URL(e,"postgres://base")}catch{n=new URL(e.replace("@/","@___DUMMY___/"),"postgres://base"),s=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of n.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(n.username),r.password=r.password||decodeURIComponent(n.password),n.protocol=="socket:")return r.host=decodeURI(n.pathname),r.database=n.searchParams.get("db"),r.client_encoding=n.searchParams.get("encoding"),r;let o=s?"":n.hostname;r.host?o&&/^%2f/i.test(o)&&(n.pathname=o+n.pathname):r.host=decodeURIComponent(o),r.port||(r.port=n.port);let i=n.pathname.slice(1)||null;r.database=i?decodeURI(i):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),t.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||t.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function n3(e){return Object.entries(e).reduce((r,[n,s])=>(s!=null&&(r[n]=s),r),{})}function kP(e){return Object.entries(e).reduce((r,[n,s])=>{if(n==="ssl"){let o=s;typeof o=="boolean"&&(r[n]=o),typeof o=="object"&&(r[n]=n3(o))}else if(s!=null)if(n==="port"){if(s!==""){let o=parseInt(s,10);if(isNaN(o))throw new Error(`Invalid ${n}: ${s}`);r[n]=o}}else r[n]=s;return r},{})}function s3(e){return kP(Vs(e))}LP.exports=Vs;Vs.parse=Vs;Vs.toClientConfig=kP;Vs.parseIntoClientConfig=s3});var eg=R((OJ,$P)=>{"use strict";var o3=require("dns"),UP=Bi(),qP=FP().parse,Qe=function(e,t,r){return r===void 0?r=process.env["PG"+e.toUpperCase()]:r===!1||(r=process.env[r]),t[e]||r||UP[e]},i3=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return UP.ssl},Gs=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},vt=function(e,t,r){let n=t[r];n!=null&&e.push(r+"="+Gs(n))},Zm=class{constructor(t){t=typeof t=="string"?qP(t):t||{},t.connectionString&&(t=Object.assign({},t,qP(t.connectionString))),this.user=Qe("user",t),this.database=Qe("database",t),this.database===void 0&&(this.database=this.user),this.port=parseInt(Qe("port",t),10),this.host=Qe("host",t),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Qe("password",t)}),this.binary=Qe("binary",t),this.options=Qe("options",t),this.ssl=typeof t.ssl>"u"?i3():t.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Qe("client_encoding",t),this.replication=Qe("replication",t),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Qe("application_name",t,"PGAPPNAME"),this.fallback_application_name=Qe("fallback_application_name",t,!1),this.statement_timeout=Qe("statement_timeout",t,!1),this.lock_timeout=Qe("lock_timeout",t,!1),this.idle_in_transaction_session_timeout=Qe("idle_in_transaction_session_timeout",t,!1),this.query_timeout=Qe("query_timeout",t,!1),t.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(t.connectionTimeoutMillis/1e3),t.keepAlive===!1?this.keepalives=0:t.keepAlive===!0&&(this.keepalives=1),typeof t.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(t.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(t){let r=[];vt(r,this,"user"),vt(r,this,"password"),vt(r,this,"port"),vt(r,this,"application_name"),vt(r,this,"fallback_application_name"),vt(r,this,"connect_timeout"),vt(r,this,"options");let n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(vt(r,n,"sslmode"),vt(r,n,"sslca"),vt(r,n,"sslkey"),vt(r,n,"sslcert"),vt(r,n,"sslrootcert"),this.database&&r.push("dbname="+Gs(this.database)),this.replication&&r.push("replication="+Gs(this.replication)),this.host&&r.push("host="+Gs(this.host)),this.isDomainSocket)return t(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+Gs(this.client_encoding)),o3.lookup(this.host,function(s,o){return s?t(s,null):(r.push("hostaddr="+Gs(o)),t(null,r.join(" ")))})}};$P.exports=Zm});var rg=R((NJ,HP)=>{"use strict";var a3=$i(),BP=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,tg=class{constructor(t,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=t==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(t){let r;t.text?r=BP.exec(t.text):r=BP.exec(t.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(t){let r=new Array(t.length);for(let n=0,s=t.length;n<s;n++){let o=t[n];o!==null?r[n]=this._parsers[n](o):r[n]=null}return r}parseRow(t){let r={...this._prebuiltEmptyResultObject};for(let n=0,s=t.length;n<s;n++){let o=t[n],i=this.fields[n].name;if(o!==null){let a=this.fields[n].format==="binary"?Buffer.from(o):o;r[i]=this._parsers[n](a)}else r[i]=null}return r}addRow(t){this.rows.push(t)}addFields(t){this.fields=t,this.fields.length&&(this._parsers=new Array(t.length));let r={};for(let n=0;n<t.length;n++){let s=t[n];r[s.name]=null,this._types?this._parsers[n]=this._types.getTypeParser(s.dataTypeID,s.format||"text"):this._parsers[n]=a3.getTypeParser(s.dataTypeID,s.format||"text")}this._prebuiltEmptyResultObject={...r}}};HP.exports=tg});var GP=R((DJ,VP)=>{"use strict";var{EventEmitter:c3}=require("events"),jP=rg(),zP=js(),ng=class extends c3{constructor(t,r,n){super(),t=zP.normalizeQueryConfig(t,r,n),this.text=t.text,this.values=t.values,this.rows=t.rows,this.types=t.types,this.name=t.name,this.queryMode=t.queryMode,this.binary=t.binary,this.portal=t.portal||"",this.callback=t.callback,this._rowMode=t.rowMode,process.domain&&t.callback&&(this.callback=process.domain.bind(t.callback)),this._result=new jP(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new jP(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(t){this._checkForMultirow(),this._result.addFields(t.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(t){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(t.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(t,r){this._checkForMultirow(),this._result.addCommandComplete(t),this.rows&&r.sync()}handleEmptyQuery(t){this.rows&&t.sync()}handleError(t,r){if(this._canceledDueToError&&(t=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(t);this.emit("error",t)}handleReadyForQuery(t){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,t);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(t){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=t.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){t.stream.cork&&t.stream.cork();try{this.prepare(t)}finally{t.stream.uncork&&t.stream.uncork()}}else t.query(this.text);return null}hasBeenParsed(t){return this.name&&t.parsedStatements[this.name]}handlePortalSuspended(t){this._getRows(t,this.rows)}_getRows(t,r){t.execute({portal:this.portal,rows:r}),r?t.flush():t.sync()}prepare(t){this.hasBeenParsed(t)||t.parse({text:this.text,name:this.name,types:this.types});try{t.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:zP.prepareValue})}catch(r){this.handleError(r,t);return}t.describe({type:"P",name:this.portal||""}),this._getRows(t,this.rows)}handleCopyInResponse(t){t.sendCopyFail("No source stream defined")}handleCopyData(t,r){}};VP.exports=ng});var Sg=R(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.NoticeMessage=H.DataRowMessage=H.CommandCompleteMessage=H.ReadyForQueryMessage=H.NotificationResponseMessage=H.BackendKeyDataMessage=H.AuthenticationMD5Password=H.ParameterStatusMessage=H.ParameterDescriptionMessage=H.RowDescriptionMessage=H.Field=H.CopyResponse=H.CopyDataMessage=H.DatabaseError=H.copyDone=H.emptyQuery=H.replicationStart=H.portalSuspended=H.noData=H.closeComplete=H.bindComplete=H.parseComplete=void 0;H.parseComplete={name:"parseComplete",length:5};H.bindComplete={name:"bindComplete",length:5};H.closeComplete={name:"closeComplete",length:5};H.noData={name:"noData",length:5};H.portalSuspended={name:"portalSuspended",length:5};H.replicationStart={name:"replicationStart",length:4};H.emptyQuery={name:"emptyQuery",length:4};H.copyDone={name:"copyDone",length:4};var sg=class extends Error{constructor(t,r,n){super(t),this.length=r,this.name=n}};H.DatabaseError=sg;var og=class{constructor(t,r){this.length=t,this.chunk=r,this.name="copyData"}};H.CopyDataMessage=og;var ig=class{constructor(t,r,n,s){this.length=t,this.name=r,this.binary=n,this.columnTypes=new Array(s)}};H.CopyResponse=ig;var ag=class{constructor(t,r,n,s,o,i,a){this.name=t,this.tableID=r,this.columnID=n,this.dataTypeID=s,this.dataTypeSize=o,this.dataTypeModifier=i,this.format=a}};H.Field=ag;var cg=class{constructor(t,r){this.length=t,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};H.RowDescriptionMessage=cg;var ug=class{constructor(t,r){this.length=t,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};H.ParameterDescriptionMessage=ug;var lg=class{constructor(t,r,n){this.length=t,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};H.ParameterStatusMessage=lg;var dg=class{constructor(t,r){this.length=t,this.salt=r,this.name="authenticationMD5Password"}};H.AuthenticationMD5Password=dg;var fg=class{constructor(t,r,n){this.length=t,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};H.BackendKeyDataMessage=fg;var pg=class{constructor(t,r,n,s){this.length=t,this.processId=r,this.channel=n,this.payload=s,this.name="notification"}};H.NotificationResponseMessage=pg;var hg=class{constructor(t,r){this.length=t,this.status=r,this.name="readyForQuery"}};H.ReadyForQueryMessage=hg;var mg=class{constructor(t,r){this.length=t,this.text=r,this.name="commandComplete"}};H.CommandCompleteMessage=mg;var gg=class{constructor(t,r){this.length=t,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};H.DataRowMessage=gg;var yg=class{constructor(t,r){this.length=t,this.message=r,this.name="notice"}};H.NoticeMessage=yg});var WP=R(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.Writer=void 0;var Eg=class{constructor(t=256){this.size=t,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(t)}ensure(t){if(this.buffer.length-this.offset<t){let n=this.buffer,s=n.length+(n.length>>1)+t;this.buffer=Buffer.allocUnsafe(s),n.copy(this.buffer)}}addInt32(t){return this.ensure(4),this.buffer[this.offset++]=t>>>24&255,this.buffer[this.offset++]=t>>>16&255,this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addInt16(t){return this.ensure(2),this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addCString(t){if(!t)this.ensure(1);else{let r=Buffer.byteLength(t);this.ensure(r+1),this.buffer.write(t,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(t=""){let r=Buffer.byteLength(t);return this.ensure(r),this.buffer.write(t,this.offset),this.offset+=r,this}add(t){return this.ensure(t.length),t.copy(this.buffer,this.offset),this.offset+=t.length,this}join(t){if(t){this.buffer[this.headerPosition]=t;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(t?0:5,this.offset)}flush(t){let r=this.join(t);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};vl.Writer=Eg});var QP=R(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.serialize=void 0;var wg=WP(),fe=new wg.Writer,u3=e=>{fe.addInt16(3).addInt16(0);for(let n of Object.keys(e))fe.addCString(n).addCString(e[n]);fe.addCString("client_encoding").addCString("UTF8");let t=fe.addCString("").flush(),r=t.length+4;return new wg.Writer().addInt32(r).add(t).flush()},l3=()=>{let e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},d3=e=>fe.addCString(e).flush(112),f3=function(e,t){return fe.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),fe.flush(112)},p3=function(e){return fe.addString(e).flush(112)},h3=e=>fe.addCString(e).flush(81),KP=[],m3=e=>{let t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));let r=e.types||KP,n=r.length,s=fe.addCString(t).addCString(e.text).addInt16(n);for(let o=0;o<n;o++)s.addInt32(r[o]);return fe.flush(80)},Ws=new wg.Writer,g3=function(e,t){for(let r=0;r<e.length;r++){let n=t?t(e[r],r):e[r];n==null?(fe.addInt16(0),Ws.addInt32(-1)):n instanceof Buffer?(fe.addInt16(1),Ws.addInt32(n.length),Ws.add(n)):(fe.addInt16(0),Ws.addInt32(Buffer.byteLength(n)),Ws.addString(n))}},y3=(e={})=>{let t=e.portal||"",r=e.statement||"",n=e.binary||!1,s=e.values||KP,o=s.length;return fe.addCString(t).addCString(r),fe.addInt16(o),g3(s,e.valueMapper),fe.addInt16(o),fe.add(Ws.flush()),fe.addInt16(1),fe.addInt16(n?1:0),fe.flush(66)},S3=Buffer.from([69,0,0,0,9,0,0,0,0,0]),E3=e=>{if(!e||!e.portal&&!e.rows)return S3;let t=e.portal||"",r=e.rows||0,n=Buffer.byteLength(t),s=4+n+1+4,o=Buffer.allocUnsafe(1+s);return o[0]=69,o.writeInt32BE(s,1),o.write(t,5,"utf-8"),o[n+5]=0,o.writeUInt32BE(r,o.length-4),o},w3=(e,t)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r},_g=(e,t)=>{let n=4+Buffer.byteLength(t)+1,s=Buffer.allocUnsafe(1+n);return s[0]=e,s.writeInt32BE(n,1),s.write(t,5,"utf-8"),s[n]=0,s},_3=fe.addCString("P").flush(68),b3=fe.addCString("S").flush(68),R3=e=>e.name?_g(68,`${e.type}${e.name||""}`):e.type==="P"?_3:b3,T3=e=>{let t=`${e.type}${e.name||""}`;return _g(67,t)},x3=e=>fe.add(e).flush(100),C3=e=>_g(102,e),Al=e=>Buffer.from([e,0,0,0,4]),v3=Al(72),A3=Al(83),P3=Al(88),I3=Al(99),O3={startup:u3,password:d3,requestSsl:l3,sendSASLInitialResponseMessage:f3,sendSCRAMClientFinalMessage:p3,query:h3,parse:m3,bind:y3,execute:E3,describe:R3,close:T3,flush:()=>v3,sync:()=>A3,end:()=>P3,copyData:x3,copyDone:()=>I3,copyFail:C3,cancel:w3};Pl.serialize=O3});var YP=R(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.BufferReader=void 0;var N3=Buffer.allocUnsafe(0),bg=class{constructor(t=0){this.offset=t,this.buffer=N3,this.encoding="utf-8"}setBuffer(t,r){this.offset=t,this.buffer=r}int16(){let t=this.buffer.readInt16BE(this.offset);return this.offset+=2,t}byte(){let t=this.buffer[this.offset];return this.offset++,t}int32(){let t=this.buffer.readInt32BE(this.offset);return this.offset+=4,t}uint32(){let t=this.buffer.readUInt32BE(this.offset);return this.offset+=4,t}string(t){let r=this.buffer.toString(this.encoding,this.offset,this.offset+t);return this.offset+=t,r}cstring(){let t=this.offset,r=t;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,t,r-1)}bytes(t){let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}};Il.BufferReader=bg});var ZP=R(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.Parser=void 0;var Se=Sg(),D3=YP(),Rg=1,M3=4,XP=Rg+M3,JP=Buffer.allocUnsafe(0),Tg=class{constructor(t){if(this.buffer=JP,this.bufferLength=0,this.bufferOffset=0,this.reader=new D3.BufferReader,t?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=t?.mode||"text"}parse(t,r){this.mergeBuffer(t);let n=this.bufferOffset+this.bufferLength,s=this.bufferOffset;for(;s+XP<=n;){let o=this.buffer[s],i=this.buffer.readUInt32BE(s+Rg),a=Rg+i;if(a+s<=n){let c=this.handlePacket(s+XP,o,i,this.buffer);r(c),s+=a}else break}s===n?(this.buffer=JP,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-s,this.bufferOffset=s)}mergeBuffer(t){if(this.bufferLength>0){let r=this.bufferLength+t.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let s;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)s=this.buffer;else{let o=this.buffer.byteLength*2;for(;r>=o;)o*=2;s=Buffer.allocUnsafe(o)}this.buffer.copy(s,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=s,this.bufferOffset=0}t.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=t,this.bufferOffset=0,this.bufferLength=t.byteLength}handlePacket(t,r,n,s){switch(r){case 50:return Se.bindComplete;case 49:return Se.parseComplete;case 51:return Se.closeComplete;case 110:return Se.noData;case 115:return Se.portalSuspended;case 99:return Se.copyDone;case 87:return Se.replicationStart;case 73:return Se.emptyQuery;case 68:return this.parseDataRowMessage(t,n,s);case 67:return this.parseCommandCompleteMessage(t,n,s);case 90:return this.parseReadyForQueryMessage(t,n,s);case 65:return this.parseNotificationMessage(t,n,s);case 82:return this.parseAuthenticationResponse(t,n,s);case 83:return this.parseParameterStatusMessage(t,n,s);case 75:return this.parseBackendKeyData(t,n,s);case 69:return this.parseErrorMessage(t,n,s,"error");case 78:return this.parseErrorMessage(t,n,s,"notice");case 84:return this.parseRowDescriptionMessage(t,n,s);case 116:return this.parseParameterDescriptionMessage(t,n,s);case 71:return this.parseCopyInMessage(t,n,s);case 72:return this.parseCopyOutMessage(t,n,s);case 100:return this.parseCopyData(t,n,s);default:return new Se.DatabaseError("received invalid response: "+r.toString(16),n,"error")}}parseReadyForQueryMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.string(1);return new Se.ReadyForQueryMessage(r,s)}parseCommandCompleteMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.cstring();return new Se.CommandCompleteMessage(r,s)}parseCopyData(t,r,n){let s=n.slice(t,t+(r-4));return new Se.CopyDataMessage(r,s)}parseCopyInMessage(t,r,n){return this.parseCopyMessage(t,r,n,"copyInResponse")}parseCopyOutMessage(t,r,n){return this.parseCopyMessage(t,r,n,"copyOutResponse")}parseCopyMessage(t,r,n,s){this.reader.setBuffer(t,n);let o=this.reader.byte()!==0,i=this.reader.int16(),a=new Se.CopyResponse(r,s,o,i);for(let c=0;c<i;c++)a.columnTypes[c]=this.reader.int16();return a}parseNotificationMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int32(),o=this.reader.cstring(),i=this.reader.cstring();return new Se.NotificationResponseMessage(r,s,o,i)}parseRowDescriptionMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int16(),o=new Se.RowDescriptionMessage(r,s);for(let i=0;i<s;i++)o.fields[i]=this.parseField();return o}parseField(){let t=this.reader.cstring(),r=this.reader.uint32(),n=this.reader.int16(),s=this.reader.uint32(),o=this.reader.int16(),i=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new Se.Field(t,r,n,s,o,i,a)}parseParameterDescriptionMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int16(),o=new Se.ParameterDescriptionMessage(r,s);for(let i=0;i<s;i++)o.dataTypeIDs[i]=this.reader.int32();return o}parseDataRowMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int16(),o=new Array(s);for(let i=0;i<s;i++){let a=this.reader.int32();o[i]=a===-1?null:this.reader.string(a)}return new Se.DataRowMessage(r,o)}parseParameterStatusMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.cstring(),o=this.reader.cstring();return new Se.ParameterStatusMessage(r,s,o)}parseBackendKeyData(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int32(),o=this.reader.int32();return new Se.BackendKeyDataMessage(r,s,o)}parseAuthenticationResponse(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int32(),o={name:"authenticationOk",length:r};switch(s){case 0:break;case 3:o.length===8&&(o.name="authenticationCleartextPassword");break;case 5:if(o.length===12){o.name="authenticationMD5Password";let i=this.reader.bytes(4);return new Se.AuthenticationMD5Password(r,i)}break;case 10:{o.name="authenticationSASL",o.mechanisms=[];let i;do i=this.reader.cstring(),i&&o.mechanisms.push(i);while(i)}break;case 11:o.name="authenticationSASLContinue",o.data=this.reader.string(r-8);break;case 12:o.name="authenticationSASLFinal",o.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+s)}return o}parseErrorMessage(t,r,n,s){this.reader.setBuffer(t,n);let o={},i=this.reader.string(1);for(;i!=="\0";)o[i]=this.reader.cstring(),i=this.reader.string(1);let a=o.M,c=s==="notice"?new Se.NoticeMessage(r,a):new Se.DatabaseError(a,r,s);return c.severity=o.S,c.code=o.C,c.detail=o.D,c.hint=o.H,c.position=o.P,c.internalPosition=o.p,c.internalQuery=o.q,c.where=o.W,c.schema=o.s,c.table=o.t,c.column=o.c,c.dataType=o.d,c.constraint=o.n,c.file=o.F,c.line=o.L,c.routine=o.R,c}};Ol.Parser=Tg});var xg=R(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.DatabaseError=sn.serialize=sn.parse=void 0;var k3=Sg();Object.defineProperty(sn,"DatabaseError",{enumerable:!0,get:function(){return k3.DatabaseError}});var L3=QP();Object.defineProperty(sn,"serialize",{enumerable:!0,get:function(){return L3.serialize}});var F3=ZP();function q3(e,t){let r=new F3.Parser;return e.on("data",n=>r.parse(n,t)),new Promise(n=>e.on("end",()=>n()))}sn.parse=q3});var eI=R(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});Cg.default={}});var rI=R((BJ,tI)=>{var{getStream:U3,getSecureStream:$3}=z3();tI.exports={getStream:U3,getSecureStream:$3};function B3(){function e(r){let n=require("net");return new n.Socket}function t(r){return require("tls").connect(r)}return{getStream:e,getSecureStream:t}}function H3(){function e(r){let{CloudflareSocket:n}=eI();return new n(r)}function t(r){return r.socket.startTls(r),r.socket}return{getStream:e,getSecureStream:t}}function j3(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let e=new Response(null,{cf:{thing:!0}});if(typeof e.cf=="object"&&e.cf!==null&&e.cf.thing)return!0}return!1}function z3(){return j3()?H3():B3()}});var Ag=R((HJ,nI)=>{"use strict";var V3=require("events").EventEmitter,{parse:G3,serialize:Ne}=xg(),{getStream:W3,getSecureStream:K3}=rI(),Q3=Ne.flush(),Y3=Ne.sync(),X3=Ne.end(),vg=class extends V3{constructor(t){super(),t=t||{},this.stream=t.stream||W3(t.ssl),typeof this.stream=="function"&&(this.stream=this.stream(t)),this._keepAlive=t.keepAlive,this._keepAliveInitialDelayMillis=t.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=t.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(t,r){let n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(t,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let s=function(o){n._ending&&(o.code==="ECONNRESET"||o.code==="EPIPE")||n.emit("error",o)};if(this.stream.on("error",s),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(o){switch(o.toString("utf8")){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:n.stream};n.ssl!==!0&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{n.stream=K3(a)}catch(u){return n.emit("error",u)}n.attachListeners(n.stream),n.stream.on("error",s),n.emit("sslconnect")})}attachListeners(t){G3(t,r=>{let n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(Ne.requestSsl())}startup(t){this.stream.write(Ne.startup(t))}cancel(t,r){this._send(Ne.cancel(t,r))}password(t){this._send(Ne.password(t))}sendSASLInitialResponseMessage(t,r){this._send(Ne.sendSASLInitialResponseMessage(t,r))}sendSCRAMClientFinalMessage(t){this._send(Ne.sendSCRAMClientFinalMessage(t))}_send(t){return this.stream.writable?this.stream.write(t):!1}query(t){this._send(Ne.query(t))}parse(t){this._send(Ne.parse(t))}bind(t){this._send(Ne.bind(t))}execute(t){this._send(Ne.execute(t))}flush(){this.stream.writable&&this.stream.write(Q3)}sync(){this._ending=!0,this._send(Y3)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(X3,()=>{this.stream.end()})}close(t){this._send(Ne.close(t))}describe(t){this._send(Ne.describe(t))}sendCopyFromChunk(t){this._send(Ne.copyData(t))}endCopyFrom(){this._send(Ne.copyDone())}sendCopyFail(t){this._send(Ne.copyFail(t))}};nI.exports=vg});var aI=R((jJ,iI)=>{"use strict";var{Transform:J3}=require("stream"),{StringDecoder:Z3}=require("string_decoder"),on=Symbol("last"),Nl=Symbol("decoder");function e6(e,t,r){let n;if(this.overflow){if(n=this[Nl].write(e).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[on]+=this[Nl].write(e),n=this[on].split(this.matcher);this[on]=n.pop();for(let s=0;s<n.length;s++)try{oI(this,this.mapper(n[s]))}catch(o){return r(o)}if(this.overflow=this[on].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function t6(e){if(this[on]+=this[Nl].end(),this[on])try{oI(this,this.mapper(this[on]))}catch(t){return e(t)}e()}function oI(e,t){t!==void 0&&e.push(t)}function sI(e){return e}function r6(e,t,r){switch(e=e||/\r?\n/,t=t||sI,r=r||{},arguments.length){case 1:typeof e=="function"?(t=e,e=/\r?\n/):typeof e=="object"&&!(e instanceof RegExp)&&!e[Symbol.split]&&(r=e,e=/\r?\n/);break;case 2:typeof e=="function"?(r=t,t=e,e=/\r?\n/):typeof t=="object"&&(r=t,t=sI)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=e6,r.flush=t6,r.readableObjectMode=!0;let n=new J3(r);return n[on]="",n[Nl]=new Z3("utf8"),n.matcher=e,n.mapper=t,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(s,o){this._writableState.errorEmitted=!1,o(s)},n}iI.exports=r6});var lI=R((zJ,gr)=>{"use strict";var cI=require("path"),n6=require("stream").Stream,s6=aI(),uI=require("util"),o6=5432,Dl=process.platform==="win32",ji=process.stderr,i6=56,a6=7,c6=61440,u6=32768;function l6(e){return(e&c6)==u6}var Ks=["host","port","database","user","password"],Pg=Ks.length,d6=Ks[Pg-1];function Ig(){var e=ji instanceof n6&&ji.writable===!0;if(e){var t=Array.prototype.slice.call(arguments).concat(`
`);ji.write(uI.format.apply(uI,t))}}Object.defineProperty(gr.exports,"isWin",{get:function(){return Dl},set:function(e){Dl=e}});gr.exports.warnTo=function(e){var t=ji;return ji=e,t};gr.exports.getFileName=function(e){var t=e||process.env,r=t.PGPASSFILE||(Dl?cI.join(t.APPDATA||"./","postgresql","pgpass.conf"):cI.join(t.HOME||"./",".pgpass"));return r};gr.exports.usePgPass=function(e,t){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Dl?!0:(t=t||"<unkn>",l6(e.mode)?e.mode&(i6|a6)?(Ig('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):!0:(Ig('WARNING: password file "%s" is not a plain file',t),!1))};var f6=gr.exports.match=function(e,t){return Ks.slice(0,-1).reduce(function(r,n,s){return s==1&&Number(e[n]||o6)===Number(t[n])?r&&!0:r&&(t[n]==="*"||t[n]===e[n])},!0)};gr.exports.getPassword=function(e,t,r){var n,s=t.pipe(s6());function o(c){var u=p6(c);u&&h6(u)&&f6(e,u)&&(n=u[d6],s.end())}var i=function(){t.destroy(),r(n)},a=function(c){t.destroy(),Ig("WARNING: error on reading file: %s",c),r(void 0)};t.on("error",a),s.on("data",o).on("end",i).on("error",a)};var p6=gr.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,s=0,o=0,i={},a=!1,c=function(f,p,h){var m=e.substring(p,h);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(m=m.replace(/\\([:\\])/g,"$1")),i[Ks[f]]=m},u=0;u<e.length-1;u+=1){if(t=e.charAt(u+1),r=e.charAt(u),a=n==Pg-1,a){c(n,s);break}u>=0&&t==":"&&r!=="\\"&&(c(n,s,u+1),s=u+2,n+=1)}return i=Object.keys(i).length===Pg?i:null,i},h6=gr.exports.isValidEntry=function(e){for(var t={0:function(i){return i.length>0},1:function(i){return i==="*"?!0:(i=Number(i),isFinite(i)&&i>0&&i<9007199254740992&&Math.floor(i)===i)},2:function(i){return i.length>0},3:function(i){return i.length>0},4:function(i){return i.length>0}},r=0;r<Ks.length;r+=1){var n=t[r],s=e[Ks[r]]||"",o=n(s);if(!o)return!1}return!0}});var fI=R((GJ,Og)=>{"use strict";var VJ=require("path"),dI=require("fs"),Ml=lI();Og.exports=function(e,t){var r=Ml.getFileName();dI.stat(r,function(n,s){if(n||!Ml.usePgPass(s,r))return t(void 0);var o=dI.createReadStream(r);Ml.getPassword(e,o,t)})};Og.exports.warnTo=Ml.warnTo});var gI=R((WJ,mI)=>{"use strict";var m6=require("events").EventEmitter,pI=js(),Ng=DP(),g6=Cl(),y6=eg(),hI=GP(),S6=Bi(),E6=Ag(),w6=Xm(),kl=class extends m6{constructor(t){super(),this.connectionParameters=new y6(t),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=t||{};this._Promise=r.Promise||global.Promise,this._types=new g6(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new E6({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||S6.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(t){let r=n=>{process.nextTick(()=>{n.handleError(t,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(t){let r=this,n=this.connection;if(this._connectionCallback=t,this._connecting||this._connected){let s=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{t(s)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let s=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(s),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(s):this._handleErrorEvent(s):this._connectionError||this._handleErrorEvent(s)),process.nextTick(()=>{this.emit("end")})})}connect(t){if(t){this._connect(t);return}return new this._Promise((r,n)=>{this._connect(s=>{s?n(s):r()})})}_attachListeners(t){t.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),t.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),t.on("authenticationSASL",this._handleAuthSASL.bind(this)),t.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),t.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),t.on("backendKeyData",this._handleBackendKeyData.bind(this)),t.on("error",this._handleErrorEvent.bind(this)),t.on("errorMessage",this._handleErrorMessage.bind(this)),t.on("readyForQuery",this._handleReadyForQuery.bind(this)),t.on("notice",this._handleNotice.bind(this)),t.on("rowDescription",this._handleRowDescription.bind(this)),t.on("dataRow",this._handleDataRow.bind(this)),t.on("portalSuspended",this._handlePortalSuspended.bind(this)),t.on("emptyQuery",this._handleEmptyQuery.bind(this)),t.on("commandComplete",this._handleCommandComplete.bind(this)),t.on("parseComplete",this._handleParseComplete.bind(this)),t.on("copyInResponse",this._handleCopyInResponse.bind(this)),t.on("copyData",this._handleCopyData.bind(this)),t.on("notification",this._handleNotification.bind(this))}_checkPgPass(t){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;t()}).catch(n=>{r.emit("error",n)});else if(this.password!==null)t();else try{fI()(this.connectionParameters,s=>{s!==void 0&&(this.connectionParameters.password=this.password=s),t()})}catch(n){this.emit("error",n)}}_handleAuthCleartextPassword(t){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(t){this._checkPgPass(async()=>{try{let r=await w6.postgresMd5PasswordHash(this.user,this.password,t.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(t){this._checkPgPass(()=>{try{this.saslSession=Ng.startSession(t.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(t){try{await Ng.continueSession(this.saslSession,this.password,t.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(t){try{Ng.finalizeSession(this.saslSession,t.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(t){this.processID=t.processID,this.secretKey=t.secretKey}_handleReadyForQuery(t){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(t){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(t);this.emit("error",t)}}_handleErrorEvent(t){if(this._connecting)return this._handleErrorWhileConnecting(t);this._queryable=!1,this._errorAllQueries(t),this.emit("error",t)}_handleErrorMessage(t){if(this._connecting)return this._handleErrorWhileConnecting(t);let r=this.activeQuery;if(!r){this._handleErrorEvent(t);return}this.activeQuery=null,r.handleError(t,this.connection)}_handleRowDescription(t){this.activeQuery.handleRowDescription(t)}_handleDataRow(t){this.activeQuery.handleDataRow(t)}_handlePortalSuspended(t){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(t){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(t){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(t,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let t=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(t);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(t){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(t){this.activeQuery.handleCopyData(t,this.connection)}_handleNotification(t){this.emit("notification",t)}_handleNotice(t){this.emit("notice",t)}getStartupConf(){let t=this.connectionParameters,r={user:t.user,database:t.database},n=t.application_name||t.fallback_application_name;return n&&(r.application_name=n),t.replication&&(r.replication=""+t.replication),t.statement_timeout&&(r.statement_timeout=String(parseInt(t.statement_timeout,10))),t.lock_timeout&&(r.lock_timeout=String(parseInt(t.lock_timeout,10))),t.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(t.idle_in_transaction_session_timeout,10))),t.options&&(r.options=t.options),r}cancel(t,r){if(t.activeQuery===r){let n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(t.processID,t.secretKey)})}else t.queryQueue.indexOf(r)!==-1&&t.queryQueue.splice(t.queryQueue.indexOf(r),1)}setTypeParser(t,r,n){return this._types.setTypeParser(t,r,n)}getTypeParser(t,r){return this._types.getTypeParser(t,r)}escapeIdentifier(t){return pI.escapeIdentifier(t)}escapeLiteral(t){return pI.escapeLiteral(t)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let t=this.activeQuery.submit(this.connection);t&&process.nextTick(()=>{this.activeQuery.handleError(t,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(t,r,n){let s,o,i,a,c;if(t==null)throw new TypeError("Client was passed a null or undefined query");return typeof t.submit=="function"?(i=t.query_timeout||this.connectionParameters.query_timeout,o=s=t,typeof r=="function"&&(s.callback=s.callback||r)):(i=t.query_timeout||this.connectionParameters.query_timeout,s=new hI(t,r,n),s.callback||(o=new this._Promise((u,f)=>{s.callback=(p,h)=>p?f(p):u(h)}).catch(u=>{throw Error.captureStackTrace(u),u}))),i&&(c=s.callback,a=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{s.handleError(u,this.connection)}),c(u),s.callback=()=>{};let f=this.queryQueue.indexOf(s);f>-1&&this.queryQueue.splice(f,1),this._pulseQueryQueue()},i),s.callback=(u,f)=>{clearTimeout(a),c(u,f)}),this.binary&&!s.binary&&(s.binary=!0),s._result&&!s._result._types&&(s._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"),this.connection)}),o):(this.queryQueue.push(s),this._pulseQueryQueue(),o):(process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),o)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(t){if(this._ending=!0,!this.connection._connecting||this._ended)if(t)t();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),t)this.connection.once("end",t);else return new this._Promise(r=>{this.connection.once("end",r)})}};kl.Query=hI;mI.exports=kl});var wI=R((KJ,EI)=>{"use strict";var _6=require("events").EventEmitter,yI=function(){},SI=(e,t)=>{let r=e.findIndex(t);return r===-1?void 0:e.splice(r,1)[0]},Dg=class{constructor(t,r,n){this.client=t,this.idleListener=r,this.timeoutId=n}},Qs=class{constructor(t){this.callback=t}};function b6(){throw new Error("Release called on client which has already been released to the pool.")}function Ll(e,t){if(t)return{callback:t,result:void 0};let r,n,s=function(i,a){i?r(i):n(a)},o=new e(function(i,a){n=i,r=a}).catch(i=>{throw Error.captureStackTrace(i),i});return{callback:s,result:o}}function R6(e,t){return function r(n){n.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(t),e.emit("error",n,t)}}var Mg=class extends _6{constructor(t,r){super(),this.options=Object.assign({},t),t!=null&&"password"in t&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),t!=null&&t.ssl&&t.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||kg().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let t=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let s=r.idleListener;return this._acquireClient(n,t,s,!1)}if(!this._isFull())return this.newClient(t);throw new Error("unexpected condition")}_remove(t,r){let n=SI(this._idle,o=>o.client===t);n!==void 0&&clearTimeout(n.timeoutId),this._clients=this._clients.filter(o=>o!==t);let s=this;t.end(()=>{s.emit("remove",t),typeof r=="function"&&r()})}connect(t){if(this.ending){let s=new Error("Cannot use a pool after calling end on the pool");return t?t(s):this.Promise.reject(s)}let r=Ll(this.Promise,t),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Qs(r.callback)),n;let s=(a,c,u)=>{clearTimeout(i),r.callback(a,c,u)},o=new Qs(s),i=setTimeout(()=>{SI(this._pendingQueue,a=>a.callback===s),o.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return i.unref&&i.unref(),this._pendingQueue.push(o),n}return this.newClient(new Qs(r.callback)),n}newClient(t){let r=new this.Client(this.options);this._clients.push(r);let n=R6(this,r);this.log("checking client timeout");let s,o=!1;this.options.connectionTimeoutMillis&&(s=setTimeout(()=>{this.log("ending client due to timeout"),o=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(i=>{if(s&&clearTimeout(s),r.on("error",n),i)this.log("client failed to connect",i),this._clients=this._clients.filter(a=>a!==r),o&&(i=new Error("Connection terminated due to connection timeout",{cause:i})),this._pulseQueue(),t.timedOut||t.callback(i,void 0,yI);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new Qs((u,f,p)=>p()),n,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,t,n,!0)}})}_acquireClient(t,r,n,s){s&&this.emit("connect",t),this.emit("acquire",t),t.release=this._releaseOnce(t,n),t.removeListener("error",n),r.timedOut?s&&this.options.verify?this.options.verify(t,t.release):t.release():s&&this.options.verify?this.options.verify(t,o=>{if(o)return t.release(o),r.callback(o,void 0,yI);r.callback(void 0,t,t.release)}):r.callback(void 0,t,t.release)}_releaseOnce(t,r){let n=!1;return s=>{n&&b6(),n=!0,this._release(t,r,s)}}_release(t,r,n){if(t.on("error",r),t._poolUseCount=(t._poolUseCount||0)+1,this.emit("release",n,t),n||this.ending||!t._queryable||t._ending||t._poolUseCount>=this.options.maxUses)return t._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(t,this._pulseQueue.bind(this));if(this._expired.has(t))return this.log("remove expired client"),this._expired.delete(t),this._remove(t,this._pulseQueue.bind(this));let o;this.options.idleTimeoutMillis&&this._isAboveMin()&&(o=setTimeout(()=>{this.log("remove idle client"),this._remove(t,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&o.unref()),this.options.allowExitOnIdle&&t.unref(),this._idle.push(new Dg(t,r,o)),this._pulseQueue()}query(t,r,n){if(typeof t=="function"){let o=Ll(this.Promise,t);return setImmediate(function(){return o.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),o.result}typeof r=="function"&&(n=r,r=void 0);let s=Ll(this.Promise,n);return n=s.callback,this.connect((o,i)=>{if(o)return n(o);let a=!1,c=u=>{a||(a=!0,i.release(u),n(u))};i.once("error",c),this.log("dispatching query");try{i.query(t,r,(u,f)=>{if(this.log("query dispatched"),i.removeListener("error",c),!a)return a=!0,i.release(u),u?n(u):n(void 0,f)})}catch(u){return i.release(u),n(u)}}),s.result}end(t){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return t?t(n):this.Promise.reject(n)}this.ending=!0;let r=Ll(this.Promise,t);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((t,r)=>t+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};EI.exports=Mg});var RI=R((QJ,bI)=>{"use strict";var _I=require("events").EventEmitter,T6=require("util"),Lg=js(),Ys=bI.exports=function(e,t,r){_I.call(this),e=Lg.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.queryMode=e.queryMode,this.callback=e.callback,this.state="new",this._arrayMode=e.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};T6.inherits(Ys,_I);var x6={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};Ys.prototype.handleError=function(e){let t=this.native.pq.resultErrorFields();if(t)for(let r in t){let n=x6[r]||r;e[n]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"};Ys.prototype.then=function(e,t){return this._getPromise().then(e,t)};Ys.prototype.catch=function(e){return this._getPromise().catch(e)};Ys.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this)),this._promise)};Ys.prototype.submit=function(e){this.state="running";let t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;let r=function(n,s,o){if(e.native.arrayMode=!1,setImmediate(function(){t.emit("_done")}),n)return t.handleError(n);t._emitRowEvents&&(o.length>1?s.forEach((i,a)=>{i.forEach(c=>{t.emit("row",c,o[a])})}):s.forEach(function(i){t.emit("row",i,o)})),t.state="end",t.emit("end",o),t.callback&&t.callback(null,o)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let n=(this.values||[]).map(Lg.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(s)}return e.native.execute(this.name,n,r)}return e.native.prepare(this.name,this.text,n.length,function(s){return s?r(s):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return r(s)}let n=this.values.map(Lg.prepareValue);e.native.query(this.text,n,r)}else this.queryMode==="extended"?e.native.query(this.text,[],r):e.native.query(this.text,r)}});var AI=R((YJ,vI)=>{"use strict";var TI;try{TI=require("pg-native")}catch(e){throw e}var C6=Cl(),xI=require("events").EventEmitter,v6=require("util"),A6=eg(),CI=RI(),ut=vI.exports=function(e){xI.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new C6(e.types),this.native=new TI({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let t=this.connectionParameters=new A6(e);e.nativeConnectionString&&(t.nativeConnectionString=e.nativeConnectionString),this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};ut.Query=CI;v6.inherits(ut,xI);ut.prototype._errorAllQueries=function(e){let t=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0};ut.prototype._connect=function(e){let t=this;if(this._connecting){process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(t.connectionParameters.nativeConnectionString&&(n=t.connectionParameters.nativeConnectionString),r)return e(r);t.native.connect(n,function(s){if(s)return t.native.end(),e(s);t._connected=!0,t.native.on("error",function(o){t._queryable=!1,t._errorAllQueries(o),t.emit("error",o)}),t.native.on("notification",function(o){t.emit("notification",{channel:o.relname,payload:o.extra})}),t.emit("connect"),t._pulseQueryQueue(!0),e()})})};ut.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((t,r)=>{this._connect(n=>{n?r(n):t()})})};ut.prototype.query=function(e,t,r){let n,s,o,i,a;if(e==null)throw new TypeError("Client was passed a null or undefined query");if(typeof e.submit=="function")o=e.query_timeout||this.connectionParameters.query_timeout,s=n=e,typeof t=="function"&&(e.callback=t);else if(o=e.query_timeout||this.connectionParameters.query_timeout,n=new CI(e,t,r),!n.callback){let c,u;s=new this._Promise((f,p)=>{c=f,u=p}).catch(f=>{throw Error.captureStackTrace(f),f}),n.callback=(f,p)=>f?u(f):c(p)}return o&&(a=n.callback,i=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{n.handleError(c,this.connection)}),a(c),n.callback=()=>{};let u=this._queryQueue.indexOf(n);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},o),n.callback=(c,u)=>{clearTimeout(i),a(c,u)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),s):(this._queryQueue.push(n),this._pulseQueryQueue(),s):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),s)};ut.prototype.end=function(e){let t=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e));let r;return e||(r=new this._Promise(function(n,s){e=o=>o?s(o):n()})),this.native.end(function(){t._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{t.emit("end"),e&&e()})}),r};ut.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};ut.prototype._pulseQueryQueue=function(e){if(!this._connected||this._hasActiveQuery())return;let t=this._queryQueue.shift();if(!t){e||this.emit("drain");return}this._activeQuery=t,t.submit(this);let r=this;t.once("_done",function(){r._pulseQueryQueue()})};ut.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):this._queryQueue.indexOf(e)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)};ut.prototype.ref=function(){};ut.prototype.unref=function(){};ut.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)};ut.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}});var Fg=R((XJ,PI)=>{"use strict";PI.exports=AI()});var kg=R((ZJ,zi)=>{"use strict";var P6=gI(),I6=Bi(),O6=Ag(),N6=rg(),D6=js(),M6=wI(),k6=Cl(),{DatabaseError:L6}=xg(),{escapeIdentifier:F6,escapeLiteral:q6}=js(),U6=e=>class extends M6{constructor(r){super(r,e)}},qg=function(e){this.defaults=I6,this.Client=e,this.Query=this.Client.Query,this.Pool=U6(this.Client),this._pools=[],this.Connection=O6,this.types=$i(),this.DatabaseError=L6,this.TypeOverrides=k6,this.escapeIdentifier=F6,this.escapeLiteral=q6,this.Result=N6,this.utils=D6};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?zi.exports=new qg(Fg()):(zi.exports=new qg(P6),Object.defineProperty(zi.exports,"native",{configurable:!0,enumerable:!1,get(){let e=null;try{e=new qg(Fg())}catch(t){if(t.code!=="MODULE_NOT_FOUND")throw t}return Object.defineProperty(zi.exports,"native",{value:e}),e}}))});var Z6={};Ye(Z6,{handler:()=>J6});module.exports=ee(Z6);var un=class extends Error{code;statusCode;details;constructor(t,r,n=400,s){super(r),this.code=t,this.statusCode=n,this.details=s,Object.setPrototypeOf(this,new.target.prototype)}},Xs=class extends un{constructor(t="Unauthorized"){super("UNAUTHORIZED",t,401)}},Gi=class extends un{constructor(t="Forbidden"){super("FORBIDDEN",t,403)}};var Wg=e=>e instanceof un?e:e instanceof Error?new un("INTERNAL_SERVER_ERROR",e.message||"Internal server error",500):new un("INTERNAL_SERVER_ERROR","Internal server error",500);var Wi=(e,t,r,n)=>{let s={level:e,message:t,timestamp:new Date().toISOString(),...r};return JSON.stringify(n!==void 0?{...s,meta:n}:s)},ln={debug(e,t,r){console.debug(Wi("debug",e,t,r))},info(e,t,r){console.info(Wi("info",e,t,r))},warn(e,t,r){console.warn(Wi("warn",e,t,r))},error(e,t,r){console.error(Wi("error",e,t,r))}};var $l=T(HA());var At=T(kg(),1),eZ=At.default.Client,II=At.default.Pool,tZ=At.default.Connection,rZ=At.default.types,nZ=At.default.Query,sZ=At.default.DatabaseError,oZ=At.default.escapeIdentifier,iZ=At.default.escapeLiteral,aZ=At.default.Result,cZ=At.default.TypeOverrides,uZ=At.default.defaults;var $6=process.env.AWS_REGION||process.env.COGNITO_REGION||"ap-southeast-2",B6=new $l.SecretsManagerClient({region:$6}),Fl=null,ql=null,Ul=null,H6=()=>{let e=process.env.DB_HOST,t=process.env.DB_USER,r=process.env.DB_PASS,n=process.env.DB_NAME;if(!e||!t||!r||!n)return null;let s=process.env.DB_SSL,o=s?s.toLowerCase()==="true":void 0;return{host:e,port:Number(process.env.DB_PORT||5432),username:t,password:r,dbname:n,ssl:o}},j6=e=>{if(!e)throw new Error("Database secret string is empty");let t=JSON.parse(e);if(!t.host||!t.username||!t.password||!t.dbname)throw new Error("Database secret is missing required properties");return{host:t.host,port:Number(t.port||5432),username:t.username,password:t.password,dbname:t.dbname,ssl:typeof t.ssl=="boolean"?t.ssl:void 0}},z6=async()=>{if(Ul&&Ul.expiresAt>Date.now())return Ul.value;let e=process.env.DB_SECRET_ARN;if(!e)throw new Error("DB_SECRET_ARN environment variable is not set");let t=new $l.GetSecretValueCommand({SecretId:e}),r=await B6.send(t),n=j6(r.SecretString);return Ul={value:n,expiresAt:Date.now()+Number(process.env.DB_SECRET_CACHE_MS||6e4)},n},V6=async()=>{let e=H6()??await z6(),t=Number(process.env.DB_POOL_MAX||10),r=typeof e.ssl=="boolean"?e.ssl?{rejectUnauthorized:!1}:void 0:process.env.DB_SSL?.toLowerCase()==="true"?{rejectUnauthorized:!1}:void 0,n=new II({host:e.host,port:e.port,user:e.username,password:e.password,database:e.dbname,max:t,idleTimeoutMillis:Number(process.env.DB_IDLE_TIMEOUT_MS||3e4),connectionTimeoutMillis:Number(process.env.DB_CONNECT_TIMEOUT_MS||5e3),ssl:r});return n.on("error",s=>{ln.error("Unexpected database error",void 0,{err:s})}),n},G6=async()=>(Fl||(ql||(ql=V6().then(e=>(Fl=e,e)).finally(()=>{ql=null})),Fl=await ql),Fl),Ug=async(e,t)=>{let r=await G6();return typeof e=="string"?r.query(e,t):r.query(e)};var OI=e=>({userId:e.user_id,cognitoSub:e.cognito_sub,email:e.email,displayName:e.display_name,teamId:e.team_id}),Bl=class{async findByCognitoSub(t){let r=await Ug(`
      SELECT user_id, cognito_sub, email, display_name, team_id
      FROM users
      WHERE cognito_sub = $1
      LIMIT 1
      `,[t]);return r.rowCount===0?null:OI(r.rows[0])}async upsertFromClaims(t){let r=await Ug(`
      INSERT INTO users (cognito_sub, email, display_name, team_id)
      VALUES ($1, $2, $3, $4)
      ON CONFLICT (cognito_sub) DO UPDATE
      SET
        email = COALESCE(EXCLUDED.email, users.email),
        display_name = COALESCE(EXCLUDED.display_name, users.display_name),
        team_id = COALESCE(EXCLUDED.team_id, users.team_id),
        updated_at = CURRENT_TIMESTAMP
      RETURNING user_id, cognito_sub, email, display_name, team_id
      `,[t.cognitoSub,t.email??null,t.displayName??null,t.teamId??null]);return OI(r.rows[0])}};var W6=new Bl,K6=e=>{let t=e.trim();if(!t)return[];if(t.startsWith("[")&&t.endsWith("]"))try{let r=JSON.parse(t);if(Array.isArray(r))return r.filter(n=>typeof n=="string").map(n=>n.trim()).filter(n=>n.length>0)}catch{}return t.includes(",")?t.split(",").map(r=>r.trim()).filter(r=>r.length>0):[t]},Q6=(e,t)=>{if(typeof t=="string")switch(e){case"cognito:groups":case"custom:roles":case"roles":return K6(t);default:return t}return t},Y6=e=>{let r=e.requestContext.authorizer?.jwt?.claims;if(!r)throw new Xs("Missing JWT claims from authorizer");let n=Object.entries(r).reduce((s,[o,i])=>(s[o]=Q6(o,i),s),{});if(!n.sub||typeof n.sub!="string")throw new Xs("Token missing subject");return n},NI=async e=>{let t=Y6(e);ln.debug("JWT claims received",{sub:t.sub});let r=typeof t.email=="string"?t.email:typeof t["custom:email"]=="string"?t["custom:email"]:null,n=[],s=b=>{if(b){if(Array.isArray(b)){b.filter(C=>typeof C=="string"&&C.trim().length>0).forEach(C=>n.push(C.trim()));return}typeof b=="string"&&b.trim().length>0&&n.push(b.trim())}};s(t["cognito:groups"]),s(t["custom:roles"]),s(t.roles);let o=Array.from(new Set(n.map(b=>b.toUpperCase()).map(b=>b==="ADMIN"?"ADMIN":"EMPLOYEE")));o.length===0&&o.push("EMPLOYEE");let i=typeof t["custom:display_name"]=="string"&&t["custom:display_name"]||typeof t.name=="string"&&t.name||typeof t.preferred_username=="string"&&t.preferred_username||typeof t["cognito:username"]=="string"&&t["cognito:username"]||r||t.sub,a=t["custom:team_id"]??t.team_id,c=typeof a=="string"?Number(a):typeof a=="number"?a:Number.NaN,u=Number.isFinite(c)?Number(c):null,f=await W6.upsertFromClaims({cognitoSub:t.sub,email:r,displayName:i,teamId:u??void 0}),p=f.teamId??u??null,h=f.email??r??void 0,m=f.displayName??i??h,y={userId:f.userId,email:h??t.sub,displayName:m,teamId:p,roles:o,sub:t.sub};return ln.debug("User roles resolved",{userId:y.userId,roles:y.roles}),y},DI=(e,t)=>{if(!(Array.isArray(t)?t:[t]).some(s=>e.roles.includes(s)))throw new Gi("User does not have sufficient privileges")};var Hl=(process.env.ALLOWED_ORIGINS||"").split(",").map(e=>e.trim()).filter(e=>e.length>0),MI={"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Authorization,Content-Type,Idempotency-Key,X-Amz-Date,X-Api-Key,X-Amz-Security-Token","Access-Control-Allow-Methods":"GET,POST,PATCH,OPTIONS"},kI=e=>e?Hl.length===0||Hl.includes(e)?e:Hl[0]:Hl[0]||"*",jl=(e,t,r,n)=>({statusCode:e,headers:{...MI,"Access-Control-Allow-Origin":kI(r),...n},body:JSON.stringify(t)}),LI=(e,t,r,n)=>({statusCode:e,headers:{...MI,"Access-Control-Allow-Origin":kI(r),...n},body:JSON.stringify(t)});var X6=e=>e.headers?.origin||e.headers?.Origin,FI=(e,t={requireAuth:!0})=>async(r,n)=>{let s=X6(r),o=null;try{t.requireAuth!==!1&&(o=await NI(r),t.allowedRoles&&DI(o,t.allowedRoles));let i=await e({event:r,context:n,user:o});return i&&typeof i=="object"&&"statusCode"in i?i:jl(200,i,s)}catch(i){let a=Wg(i);return ln.error("Handler failed",{requestId:n.awsRequestId,userId:o?.userId},{error:i}),LI(a.statusCode,{code:a.code,message:a.message,details:a.details,requestId:n.awsRequestId},s)}};var J6=FI(async()=>jl(200,{status:"ok",timestamp:new Date().toISOString()}),{requireAuth:!1});0&&(module.exports={handler});
