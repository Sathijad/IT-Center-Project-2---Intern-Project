"use strict";var UN=Object.create;var Qa=Object.defineProperty;var $N=Object.getOwnPropertyDescriptor;var jN=Object.getOwnPropertyNames;var BN=Object.getPrototypeOf,HN=Object.prototype.hasOwnProperty;var w=(t,e)=>()=>(t&&(e=t(t=0)),e);var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),nt=(t,e)=>{for(var r in e)Qa(t,r,{get:e[r],enumerable:!0})},iS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of jN(e))!HN.call(t,s)&&s!==r&&Qa(t,s,{get:()=>e[s],enumerable:!(n=$N(e,s))||n.enumerable});return t};var v=(t,e,r)=>(r=t!=null?UN(BN(t)):{},iS(e||!t||!t.__esModule?Qa(r,"default",{value:t,enumerable:!0}):r,t)),ue=t=>iS(Qa({},"__esModule",{value:!0}),t);var Kr=b(ye=>{"use strict";ye.HttpAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(ye.HttpAuthLocation||(ye.HttpAuthLocation={}));ye.HttpApiKeyAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(ye.HttpApiKeyAuthLocation||(ye.HttpApiKeyAuthLocation={}));ye.EndpointURLScheme=void 0;(function(t){t.HTTP="http",t.HTTPS="https"})(ye.EndpointURLScheme||(ye.EndpointURLScheme={}));ye.AlgorithmId=void 0;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(ye.AlgorithmId||(ye.AlgorithmId={}));var ek=t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>ye.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>ye.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},tk=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},rk=t=>ek(t),nk=t=>tk(t);ye.FieldPosition=void 0;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(ye.FieldPosition||(ye.FieldPosition={}));var sk="__smithy_context";ye.IniSectionType=void 0;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(ye.IniSectionType||(ye.IniSectionType={}));ye.RequestHandlerProtocol=void 0;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(ye.RequestHandlerProtocol||(ye.RequestHandlerProtocol={}));ye.SMITHY_CONTEXT_KEY=sk;ye.getDefaultClientConfiguration=rk;ye.resolveDefaultRuntimeConfig=nk});var Se=b(Qr=>{"use strict";var ik=Kr(),ok=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),ak=t=>({httpHandler:t.httpHandler()}),cf=class{name;kind;values;constructor({name:e,kind:r=ik.FieldPosition.HEADER,values:n=[]}){this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}},uf=class{entries={};encoding;constructor({fields:e=[],encoding:r="utf-8"}){e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}},lf=class t{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=ck(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}};function ck(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var df=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function uk(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}Qr.Field=cf;Qr.Fields=uf;Qr.HttpRequest=lf;Qr.HttpResponse=df;Qr.getHttpHandlerExtensionConfiguration=ok;Qr.isValidHostname=uk;Qr.resolveHttpHandlerRuntimeConfig=ak});var ro=b(to=>{"use strict";var lk=Se();function dk(t){return t}var SS=t=>e=>async r=>{if(!lk.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return e(r)},_S={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},fk=t=>({applyToStack:e=>{e.add(SS(t),_S)}});to.getHostHeaderPlugin=fk;to.hostHeaderMiddleware=SS;to.hostHeaderMiddlewareOptions=_S;to.resolveHostHeaderConfig=dk});var no=b(nc=>{"use strict";var ES=()=>(t,e)=>async r=>{try{let n=await t(r),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,l=c??e.inputFilterSensitiveLog,p=u??e.outputFilterSensitiveLog,{$metadata:m,...h}=n.output;return o?.info?.({clientName:s,commandName:i,input:l(r.input),output:p(h),metadata:m}),n}catch(n){let{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:u(r.input),error:n,metadata:n.$metadata}),n}},wS={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},pk=t=>({applyToStack:e=>{e.add(ES(),wS)}});nc.getLoggerPlugin=pk;nc.loggerMiddleware=ES;nc.loggerMiddlewareOptions=wS});var vS={};nt(vS,{InvokeStore:()=>mk});var bS,ff,hk,pf,sc,mk,xS=w(()=>{bS=require("async_hooks"),ff=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";ff||(globalThis.awslambda=globalThis.awslambda||{});hk={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol("_AWS_LAMBDA_TENANT_ID")},pf=class{static storage=new bS.AsyncLocalStorage;static PROTECTED_KEYS=hk;static run(e,r){return this.storage.run({...e},r)}static getContext(){return this.storage.getStore()}static get(e){return this.storage.getStore()?.[e]}static set(e,r){if(this.isProtectedKey(e))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[e]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static getTenantId(){return this.get(this.PROTECTED_KEYS.TENANT_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(e){return e===this.PROTECTED_KEYS.REQUEST_ID||e===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};!ff&&globalThis.awslambda?.InvokeStore?sc=globalThis.awslambda.InvokeStore:(sc=pf,!ff&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=sc));mk=sc});var RS=b(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.recursionDetectionMiddleware=void 0;var gk=(xS(),ue(vS)),yk=Se(),hf="X-Amzn-Trace-Id",Sk="AWS_LAMBDA_FUNCTION_NAME",_k="_X_AMZN_TRACE_ID",Ek=()=>t=>async e=>{let{request:r}=e;if(!yk.HttpRequest.isInstance(r))return t(e);let n=Object.keys(r.headers??{}).find(u=>u.toLowerCase()===hf.toLowerCase())??hf;if(r.headers.hasOwnProperty(n))return t(e);let s=process.env[Sk],i=process.env[_k],a=gk.InvokeStore.getXRayTraceId()??i,c=u=>typeof u=="string"&&u.length>0;return c(s)&&c(a)&&(r.headers[hf]=a),t({...e,request:r})};ic.recursionDetectionMiddleware=Ek});var so=b(oc=>{"use strict";var mf=RS(),wk={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},bk=t=>({applyToStack:e=>{e.add(mf.recursionDetectionMiddleware(),wk)}});oc.getRecursionDetectionPlugin=bk;Object.keys(mf).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(oc,t)&&Object.defineProperty(oc,t,{enumerable:!0,get:function(){return mf[t]}})})});var gf,vk,TS=w(()=>{gf=v(Kr()),vk=t=>t[gf.SMITHY_CONTEXT_KEY]||(t[gf.SMITHY_CONTEXT_KEY]={})});var lt=b(yf=>{"use strict";var CS=Kr(),xk=t=>t[CS.SMITHY_CONTEXT_KEY]||(t[CS.SMITHY_CONTEXT_KEY]={}),Rk=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};yf.getSmithyContext=xk;yf.normalizeProvider=Rk});var AS,IS=w(()=>{AS=(t,e)=>{if(!e||e.length===0)return t;let r=[];for(let n of e)for(let s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function Tk(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var PS,io,ac=w(()=>{PS=v(lt());IS();io=(t,e)=>(r,n)=>async s=>{let i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),o=t.authSchemePreference?await t.authSchemePreference():[],a=AS(i,o),c=Tk(t.httpAuthSchemes),u=(0,PS.getSmithyContext)(n),l=[];for(let p of a){let m=c.get(p.schemeId);if(!m){l.push(`HttpAuthScheme \`${p.schemeId}\` was not enabled for this service.`);continue}let h=m.identityProvider(await e.identityProviderConfigProvider(t));if(!h){l.push(`HttpAuthScheme \`${p.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:y={},signingProperties:x={}}=p.propertiesExtractor?.(t,n)||{};p.identityProperties=Object.assign(p.identityProperties||{},y),p.signingProperties=Object.assign(p.signingProperties||{},x),u.selectedHttpAuthScheme={httpAuthOption:p,identity:await h(p.identityProperties),signer:m.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(s)}});var OS,oo,NS=w(()=>{ac();OS={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},oo=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(io(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),OS)}})});var rs=b($s=>{"use strict";var Ck=Se(),kS=(t,e)=>(r,n)=>async s=>{let{response:i}=await r(s);try{let o=await e(i,t);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{o.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText);try{if(Ck.HttpResponse.isInstance(i)){let{headers:c={}}=i,u=Object.entries(c);o.$metadata={httpStatusCode:i.statusCode,requestId:Sf(/^x-[\w-]+-request-?id$/,u),extendedRequestId:Sf(/^x-[\w-]+-id-2$/,u),cfId:Sf(/^x-[\w-]+-cf-id$/,u)}}}catch{}}throw o}},Sf=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],DS=(t,e)=>(r,n)=>async s=>{let i=t,o=n.endpointV2?.url&&i.urlParser?async()=>i.urlParser(n.endpointV2.url):i.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await e(s.input,{...t,endpoint:o});return r({...s,request:a})},MS={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},LS={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ak(t,e,r){return{applyToStack:n=>{n.add(kS(t,r),MS),n.add(DS(t,e),LS)}}}$s.deserializerMiddleware=kS;$s.deserializerMiddlewareOption=MS;$s.getSerdePlugin=Ak;$s.serializerMiddleware=DS;$s.serializerMiddlewareOption=LS});var FS,qS,Ik,US=w(()=>{FS=v(rs());ac();qS={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:FS.serializerMiddlewareOption.name},Ik=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(io(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),qS)}})});var $S=w(()=>{ac();NS();US()});var jS,BS,Pk,Ok,_f,Ef=w(()=>{jS=v(Se()),BS=v(lt()),Pk=t=>e=>{throw e},Ok=(t,e)=>{},_f=t=>(e,r)=>async n=>{if(!jS.HttpRequest.isInstance(n.request))return e(n);let i=(0,BS.getSmithyContext)(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u=await e({...n,request:await c.sign(n.request,a,o)}).catch((c.errorHandler||Pk)(o));return(c.successHandler||Ok)(u.response,o),u}});var HS,ao,VS=w(()=>{Ef();HS={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},ao=t=>({applyToStack:e=>{e.addRelativeTo(_f(t),HS)}})});var zS=w(()=>{Ef();VS()});var Yr,GS=w(()=>{Yr=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function WS(t,e,r,n,s){return async function*(o,a,...c){let u=a,l=o.startingToken??u[r],p=!0,m;for(;p;){if(u[r]=l,s&&(u[s]=u[s]??o.pageSize),o.client instanceof t)m=await Nk(e,o.client,a,o.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield m;let h=l;l=kk(m,n),p=!!(l&&(!o.stopOnSameToken||l!==h))}return void 0}}var Nk,kk,KS=w(()=>{Nk=async(t,e,r,n=i=>i,...s)=>{let i=new t(r);return i=n(i)??i,await e.send(i,...s)};kk=(t,e)=>{let r=t,n=e.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var wf=b(QS=>{"use strict";var Dk=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";QS.isArrayBuffer=Dk});var js=b(vf=>{"use strict";var Mk=wf(),bf=require("buffer"),Lk=(t,e=0,r=t.byteLength-e)=>{if(!Mk.isArrayBuffer(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return bf.Buffer.from(t,e,r)},Fk=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?bf.Buffer.from(t,e):bf.Buffer.from(t)};vf.fromArrayBuffer=Lk;vf.fromString=Fk});var YS=b(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.fromBase64=void 0;var qk=js(),Uk=/^[A-Za-z0-9+/]*={0,2}$/,$k=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Uk.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,qk.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};cc.fromBase64=$k});var He=b(uc=>{"use strict";var JS=js(),ZS=t=>{let e=JS.fromString(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},jk=t=>typeof t=="string"?ZS(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),Bk=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return JS.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength).toString("utf8")};uc.fromUtf8=ZS;uc.toUint8Array=jk;uc.toUtf8=Bk});var XS=b(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.toBase64=void 0;var Hk=js(),Vk=He(),zk=t=>{let e;if(typeof t=="string"?e=(0,Vk.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,Hk.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};lc.toBase64=zk});var Ve=b(co=>{"use strict";var e_=YS(),t_=XS();Object.keys(e_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(co,t)&&Object.defineProperty(co,t,{enumerable:!0,get:function(){return e_[t]}})});Object.keys(t_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(co,t)&&Object.defineProperty(co,t,{enumerable:!0,get:function(){return t_[t]}})})});var Rf=b(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.ChecksumStream=void 0;var Gk=Ve(),Wk=require("stream"),xf=class extends Wk.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:e,checksum:r,source:n,checksumSourceLocation:s,base64Encoder:i}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=i??Gk.toBase64,this.expectedChecksum=e,this.checksum=r,this.checksumSourceLocation=s,this.source.pipe(this)}_read(e){}_write(e,r,n){try{this.checksum.update(e),this.push(e)}catch(s){return n(s)}return n()}async _final(e){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return e(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return e(r)}return this.push(null),e()}};dc.ChecksumStream=xf});var Jr=b(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.isBlob=Bs.isReadableStream=void 0;var Kk=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);Bs.isReadableStream=Kk;var Qk=t=>typeof Blob=="function"&&(t?.constructor?.name===Blob.name||t instanceof Blob);Bs.isBlob=Qk});var r_=b(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.ChecksumStream=void 0;var Yk=typeof ReadableStream=="function"?ReadableStream:function(){},Tf=class extends Yk{};fc.ChecksumStream=Tf});var n_=b(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.createChecksumStream=void 0;var Jk=Ve(),Zk=Jr(),Xk=r_(),eD=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,Zk.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let i=s??Jk.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let o=new TransformStream({start(){},async transform(c,u){e.update(c),u.enqueue(c)},async flush(c){let u=await e.digest(),l=i(u);if(t!==l){let p=new Error(`Checksum mismatch: expected "${t}" but received "${l}" in response header "${n}".`);c.error(p)}else c.terminate()}});r.pipeThrough(o);let a=o.readable;return Object.setPrototypeOf(a,Xk.ChecksumStream.prototype),a};pc.createChecksumStream=eD});var s_=b(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.createChecksumStream=sD;var tD=Jr(),rD=Rf(),nD=n_();function sD(t){return typeof ReadableStream=="function"&&(0,tD.isReadableStream)(t.source)?(0,nD.createChecksumStream)(t):new rD.ChecksumStream(t)}});var If=b(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.ByteArrayCollector=void 0;var Af=class{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let e=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}};hc.ByteArrayCollector=Af});var c_=b(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.createBufferedReadable=void 0;Sr.createBufferedReadableStream=i_;Sr.merge=o_;Sr.flush=mc;Sr.sizeOf=Hs;Sr.modeOf=a_;var iD=If();function i_(t,e,r){let n=t.getReader(),s=!1,i=0,o=["",new iD.ByteArrayCollector(u=>new Uint8Array(u))],a=-1,c=async u=>{let{value:l,done:p}=await n.read(),m=l;if(p){if(a!==-1){let h=mc(o,a);Hs(h)>0&&u.enqueue(h)}u.close()}else{let h=a_(m,!1);if(a!==h&&(a>=0&&u.enqueue(mc(o,a)),a=h),a===-1){u.enqueue(m);return}let y=Hs(m);i+=y;let x=Hs(o[a]);if(y>=e&&x===0)u.enqueue(m);else{let R=o_(o,a,m);!s&&i>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${y} is below threshold of ${e}, automatically buffering.`)),R>=e?u.enqueue(mc(o,a)):await c(u)}}};return new ReadableStream({pull:c})}Sr.createBufferedReadable=i_;function o_(t,e,r){switch(e){case 0:return t[0]+=r,Hs(t[0]);case 1:case 2:return t[e].push(r),Hs(t[e])}}function mc(t,e){switch(e){case 0:let r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Hs(t){return t?.byteLength??t?.length??0}function a_(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}});var l_=b(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});Pf.createBufferedReadable=cD;var oD=require("node:stream"),u_=If(),_r=c_(),aD=Jr();function cD(t,e,r){if((0,aD.isReadableStream)(t))return(0,_r.createBufferedReadableStream)(t,e,r);let n=new oD.Readable({read(){}}),s=!1,i=0,o=["",new u_.ByteArrayCollector(c=>new Uint8Array(c)),new u_.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return t.on("data",c=>{let u=(0,_r.modeOf)(c,!0);if(a!==u&&(a>=0&&n.push((0,_r.flush)(o,a)),a=u),a===-1){n.push(c);return}let l=(0,_r.sizeOf)(c);i+=l;let p=(0,_r.sizeOf)(o[a]);if(l>=e&&p===0)n.push(c);else{let m=(0,_r.merge)(o,a,c);!s&&i>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${l} is below threshold of ${e}, automatically buffering.`)),m>=e&&n.push((0,_r.flush)(o,a))}}),t.on("end",()=>{if(a!==-1){let c=(0,_r.flush)(o,a);(0,_r.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var d_=b(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.getAwsChunkedEncodingStream=void 0;var uD=require("stream"),lD=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=e,a=r!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,c=a?o(s,t):void 0,u=new uD.Readable({read:()=>{}});return t.on("data",l=>{let p=n(l)||0;u.push(`${p.toString(16)}\r
`),u.push(l),u.push(`\r
`)}),t.on("end",async()=>{if(u.push(`0\r
`),a){let l=r(await c);u.push(`${i}:${l}\r
`),u.push(`\r
`)}u.push(null)}),u};gc.getAwsChunkedEncodingStream=lD});var f_=b(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.headStream=dD;async function dD(t,e){let r=0,n=[],s=t.getReader(),i=!1;for(;!i;){let{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=u?.byteLength??0),r>=e)break;i=c}s.releaseLock();let o=new Uint8Array(Math.min(e,r)),a=0;for(let c of n){if(c.byteLength>o.byteLength-a){o.set(c.subarray(0,o.byteLength-a),a);break}else o.set(c,a);a+=c.length}return o}});var p_=b(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.headStream=void 0;var fD=require("stream"),pD=f_(),hD=Jr(),mD=(t,e)=>(0,hD.isReadableStream)(t)?(0,pD.headStream)(t,e):new Promise((r,n)=>{let s=new Nf;s.limit=e,t.pipe(s),t.on("error",i=>{s.end(),n(i)}),s.on("error",n),s.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.buffers));r(i)})});yc.headStream=mD;var Nf=class extends fD.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(e,r,n){if(this.buffers.push(e),this.bytesBuffered+=e.byteLength??0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,i=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=i.subarray(0,i.byteLength-s),this.emit("finish")}n()}}});var Df=b(kf=>{"use strict";var h_=t=>encodeURIComponent(t).replace(/[!'()*]/g,gD),gD=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,yD=t=>t.split("/").map(h_).join("/");kf.escapeUri=h_;kf.escapeUriPath=yD});var Lf=b(m_=>{"use strict";var Mf=Df();function SD(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=Mf.escapeUri(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)e.push(`${r}=${Mf.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Mf.escapeUri(n)}`),e.push(s)}}return e.join("&")}m_.buildQueryString=SD});var ns=b(uo=>{"use strict";var __=Se(),E_=Lf(),Sc=require("http"),_c=require("https"),w_=require("stream"),Ff=require("http2"),_D=["ECONNRESET","EPIPE","ETIMEDOUT"],b_=t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},st={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},g_=1e3,ED=(t,e,r=0)=>{if(!r)return-1;let n=s=>{let i=st.setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),o=a=>{a?.connecting?a.on("connect",()=>{st.clearTimeout(i)}):st.clearTimeout(i)};t.socket?o(t.socket):t.on("socket",o)};return r<2e3?(n(0),0):st.setTimeout(n.bind(null,g_),g_)},wD=(t,e,r=0,n,s)=>r?st.setTimeout(()=>{let i=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let o=Object.assign(new Error(i),{name:"TimeoutError",code:"ETIMEDOUT"});t.destroy(o),e(o)}else i+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(i)},r):-1,bD=3e3,vD=(t,{keepAlive:e,keepAliveMsecs:r},n=bD)=>{if(e!==!0)return-1;let s=()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",i=>{i.setKeepAlive(e,r||0)})};return n===0?(s(),0):st.setTimeout(s,n)},y_=3e3,xD=(t,e,r=0)=>{let n=s=>{let i=r-s,o=()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};t.socket?(t.socket.setTimeout(i,o),t.on("close",()=>t.socket?.removeListener("timeout",o))):t.setTimeout(i,o)};return 0<r&&r<6e3?(n(0),0):st.setTimeout(n.bind(null,r===0?0:y_),y_)},S_=6e3;async function v_(t,e,r=S_,n=!1){let s=e.headers??{},i=s.Expect||s.expect,o=-1,a=!0;!n&&i==="100-continue"&&(a=await Promise.race([new Promise(c=>{o=Number(st.setTimeout(()=>c(!0),Math.max(S_,r)))}),new Promise(c=>{t.on("continue",()=>{st.clearTimeout(o),c(!0)}),t.on("response",()=>{st.clearTimeout(o),c(!1)}),t.on("error",()=>{st.clearTimeout(o),c(!1)})})])),a&&RD(t,e.body)}function RD(t,e){if(e instanceof w_.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}var TD=0,qf=class t{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:"http/1.1"};static create(e){return typeof e?.handle=="function"?e:new t(e)}static checkSocketUsage(e,r,n=console){let{sockets:s,requests:i,maxSockets:o}=e;if(typeof o!="number"||o===1/0||Date.now()-15e3<r)return r;if(s&&i)for(let c in s){let u=s[c]?.length??0,l=i[c]?.length??0;if(u>=o&&l>=2*o)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${l} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(e){this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:i,httpAgent:o,httpsAgent:a,throwOnRequestTimeout:c}=e||{},u=!0,l=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:i,throwOnRequestTimeout:c,httpAgent:o instanceof Sc.Agent||typeof o?.destroy=="function"?(this.externalAgent=!0,o):new Sc.Agent({keepAlive:u,maxSockets:l,...o}),httpsAgent:a instanceof _c.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new _c.Agent({keepAlive:u,maxSockets:l,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,i)=>{let o=this.config,a,c=[],u=async re=>{await a,c.forEach(st.clearTimeout),s(re)},l=async re=>{await a,c.forEach(st.clearTimeout),i(re)};if(r?.aborted){let re=new Error("Request aborted");re.name="AbortError",l(re);return}let p=e.protocol==="https:",m=e.headers??{},h=(m.Expect??m.expect)==="100-continue",y=p?o.httpsAgent:o.httpAgent;h&&!this.externalAgent&&(y=new(p?_c.Agent:Sc.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(st.setTimeout(()=>{this.socketWarningTimestamp=t.checkSocketUsage(y,this.socketWarningTimestamp,o.logger)},o.socketAcquisitionWarningTimeout??(o.requestTimeout??2e3)+(o.connectionTimeout??1e3)));let x=E_.buildQueryString(e.query||{}),R;if(e.username!=null||e.password!=null){let re=e.username??"",oe=e.password??"";R=`${re}:${oe}`}let C=e.path;x&&(C+=`?${x}`),e.fragment&&(C+=`#${e.fragment}`);let N=e.hostname??"";N[0]==="["&&N.endsWith("]")?N=e.hostname.slice(1,-1):N=e.hostname;let U={headers:e.headers,host:N,method:e.method,path:C,port:e.port,agent:y,auth:R},J=(p?_c.request:Sc.request)(U,re=>{let oe=new __.HttpResponse({statusCode:re.statusCode||-1,reason:re.statusMessage,headers:b_(re.headers),body:re});u({response:oe})});if(J.on("error",re=>{_D.includes(re.code)?l(Object.assign(re,{name:"TimeoutError"})):l(re)}),r){let re=()=>{J.destroy();let oe=new Error("Request aborted");oe.name="AbortError",l(oe)};if(typeof r.addEventListener=="function"){let oe=r;oe.addEventListener("abort",re,{once:!0}),J.once("close",()=>oe.removeEventListener("abort",re))}else r.onabort=re}let ge=n??o.requestTimeout;c.push(ED(J,l,o.connectionTimeout)),c.push(wD(J,l,ge,o.throwOnRequestTimeout,o.logger??console)),c.push(xD(J,l,o.socketTimeout));let Pe=U.agent;typeof Pe=="object"&&"keepAlive"in Pe&&c.push(vD(J,{keepAlive:Pe.keepAlive,keepAliveMsecs:Pe.keepAliveMsecs})),a=v_(J,e,ge,this.externalAgent).catch(re=>(c.forEach(st.clearTimeout),i(re)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}},Uf=class{sessions=[];constructor(e){this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}},$f=class{constructor(e){if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(e,r){let n=this.getUrlString(e),s=this.sessionCache.get(n);if(s){let c=s.poll();if(c&&!this.config.disableConcurrency)return c}let i=Ff.connect(n);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),i.unref();let o=()=>{i.destroy(),this.deleteSession(n,i)};i.on("goaway",o),i.on("error",o),i.on("frameError",o),i.on("close",()=>this.deleteSession(n,i)),r.requestTimeout&&i.setTimeout(r.requestTimeout,o);let a=this.sessionCache.get(n)||new Uf;return a.offerLast(i),this.sessionCache.set(n,a),i}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},jf=class t{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new $f({});static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(n):r(e||{})})}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:i}=this.config,o=n??s;return new Promise((a,c)=>{let u=!1,l,p=async he=>{await l,a(he)},m=async he=>{await l,c(he)};if(r?.aborted){u=!0;let he=new Error("Request aborted");he.name="AbortError",m(he);return}let{hostname:h,method:y,port:x,protocol:R,query:C}=e,N="";if(e.username!=null||e.password!=null){let he=e.username??"",Oe=e.password??"";N=`${he}:${Oe}@`}let U=`${R}//${N}${h}${x?`:${x}`:""}`,V={destination:new URL(U)},J=this.connectionManager.lease(V,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:i||!1}),ge=he=>{i&&this.destroySession(J),u=!0,m(he)},Pe=E_.buildQueryString(C||{}),re=e.path;Pe&&(re+=`?${Pe}`),e.fragment&&(re+=`#${e.fragment}`);let oe=J.request({...e.headers,[Ff.constants.HTTP2_HEADER_PATH]:re,[Ff.constants.HTTP2_HEADER_METHOD]:y});if(J.ref(),oe.on("response",he=>{let Oe=new __.HttpResponse({statusCode:he[":status"]||-1,headers:b_(he),body:oe});u=!0,p({response:Oe}),i&&(J.close(),this.connectionManager.deleteSession(U,J))}),o&&oe.setTimeout(o,()=>{oe.close();let he=new Error(`Stream timed out because of no activity for ${o} ms`);he.name="TimeoutError",ge(he)}),r){let he=()=>{oe.close();let Oe=new Error("Request aborted");Oe.name="AbortError",ge(Oe)};if(typeof r.addEventListener=="function"){let Oe=r;Oe.addEventListener("abort",he,{once:!0}),oe.once("close",()=>Oe.removeEventListener("abort",he))}else r.onabort=he}oe.on("frameError",(he,Oe,Ps)=>{ge(new Error(`Frame type id ${he} in stream id ${Ps} has failed with code ${Oe}.`))}),oe.on("error",ge),oe.on("aborted",()=>{ge(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${oe.rstCode}.`))}),oe.on("close",()=>{J.unref(),i&&J.destroy(),u||ge(new Error("Unexpected error: http2 request did not get a response"))}),l=v_(oe,e,o)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},Bf=class extends w_.Writable{bufferedBytes=[];_write(e,r,n){this.bufferedBytes.push(e),n()}},CD=t=>AD(t)?ID(t):new Promise((e,r)=>{let n=new Bf;t.pipe(n),t.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),AD=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;async function ID(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}uo.DEFAULT_REQUEST_TIMEOUT=TD;uo.NodeHttp2Handler=jf;uo.NodeHttpHandler=qf;uo.streamCollector=CD});var T_=b(wc=>{"use strict";var x_=Se(),PD=Lf(),OD=Ve();function R_(t,e){return new Request(t,e)}function ND(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}var Ec={supported:void 0},Hf=class t{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new t(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),Ec.supported===void 0&&(Ec.supported=typeof Request<"u"&&"keepalive"in R_("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(r?.aborted){let N=new Error("Request aborted");return N.name="AbortError",Promise.reject(N)}let a=e.path,c=PD.buildQueryString(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){let N=e.username??"",U=e.password??"";u=`${N}:${U}@`}let{port:l,method:p}=e,m=`${e.protocol}//${u}${e.hostname}${l?`:${l}`:""}${a}`,h=p==="GET"||p==="HEAD"?void 0:e.body,y={body:h,headers:new Headers(e.headers),method:p,credentials:o};this.config?.cache&&(y.cache=this.config.cache),h&&(y.duplex="half"),typeof AbortController<"u"&&(y.signal=r),Ec.supported&&(y.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(y,this.config.requestInit(e));let x=()=>{},R=R_(m,y),C=[fetch(R).then(N=>{let U=N.headers,V={};for(let ge of U.entries())V[ge[0]]=ge[1];return N.body!=null?{response:new x_.HttpResponse({headers:V,reason:N.statusText,statusCode:N.status,body:N.body})}:N.blob().then(ge=>({response:new x_.HttpResponse({headers:V,reason:N.statusText,statusCode:N.status,body:ge})}))}),ND(s)];return r&&C.push(new Promise((N,U)=>{let V=()=>{let J=new Error("Request aborted");J.name="AbortError",U(J)};if(typeof r.addEventListener=="function"){let J=r;J.addEventListener("abort",V,{once:!0}),x=()=>J.removeEventListener("abort",V)}else r.onabort=V})),Promise.race(C).finally(x)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}},kD=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):DD(t):MD(t);async function DD(t){let e=await LD(t),r=OD.fromBase64(e);return new Uint8Array(r)}async function MD(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}function LD(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}wc.FetchHttpHandler=Hf;wc.keepAliveSupport=Ec;wc.streamCollector=kD});var Gf=b(zf=>{"use strict";var C_={},Vf={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),C_[t]=e,Vf[e]=t}function FD(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in Vf)e[r/2]=Vf[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function qD(t){let e="";for(let r=0;r<t.byteLength;r++)e+=C_[t[r]];return e}zf.fromHex=FD;zf.toHex=qD});var O_=b(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.sdkStreamMixin=void 0;var UD=T_(),$D=Ve(),jD=Gf(),BD=He(),A_=Jr(),I_="The stream has already been transformed.",HD=t=>{if(!P_(t)&&!(0,A_.isReadableStream)(t)){let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(I_);return e=!0,await(0,UD.streamCollector)(t)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{let i=await r();if(s==="base64")return(0,$D.toBase64)(i);if(s==="hex")return(0,jD.toHex)(i);if(s===void 0||s==="utf8"||s==="utf-8")return(0,BD.toUtf8)(i);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(I_);if(e=!0,P_(t))return n(t);if((0,A_.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};bc.sdkStreamMixin=HD;var P_=t=>typeof Blob=="function"&&t instanceof Blob});var k_=b(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.sdkStreamMixin=void 0;var VD=ns(),zD=js(),Wf=require("stream"),GD=O_(),N_="The stream has already been transformed.",WD=t=>{if(!(t instanceof Wf.Readable))try{return(0,GD.sdkStreamMixin)(t)}catch{let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(N_);return e=!0,await(0,VD.streamCollector)(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,zD.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(e)throw new Error(N_);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Wf.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return e=!0,Wf.Readable.toWeb(t)}})};vc.sdkStreamMixin=WD});var D_=b(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.splitStream=KD;async function KD(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}});var F_=b(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.splitStream=YD;var M_=require("stream"),QD=D_(),L_=Jr();async function YD(t){if((0,L_.isReadableStream)(t)||(0,L_.isBlob)(t))return(0,QD.splitStream)(t);let e=new M_.PassThrough,r=new M_.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}});var xc=b(Ue=>{"use strict";var q_=Ve(),U_=He(),$_=Rf(),j_=s_(),B_=l_(),H_=d_(),V_=p_(),z_=k_(),G_=F_(),W_=Jr(),Yf=class t extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?t.mutate(q_.fromBase64(e)):t.mutate(U_.fromUtf8(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return e==="base64"?q_.toBase64(this):U_.toUtf8(this)}};Ue.Uint8ArrayBlobAdapter=Yf;Object.keys($_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ue,t)&&Object.defineProperty(Ue,t,{enumerable:!0,get:function(){return $_[t]}})});Object.keys(j_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ue,t)&&Object.defineProperty(Ue,t,{enumerable:!0,get:function(){return j_[t]}})});Object.keys(B_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ue,t)&&Object.defineProperty(Ue,t,{enumerable:!0,get:function(){return B_[t]}})});Object.keys(H_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ue,t)&&Object.defineProperty(Ue,t,{enumerable:!0,get:function(){return H_[t]}})});Object.keys(V_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ue,t)&&Object.defineProperty(Ue,t,{enumerable:!0,get:function(){return V_[t]}})});Object.keys(z_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ue,t)&&Object.defineProperty(Ue,t,{enumerable:!0,get:function(){return z_[t]}})});Object.keys(G_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ue,t)&&Object.defineProperty(Ue,t,{enumerable:!0,get:function(){return G_[t]}})});Object.keys(W_).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ue,t)&&Object.defineProperty(Ue,t,{enumerable:!0,get:function(){return W_[t]}})})});var Rc,Gt,Tc=w(()=>{Rc=v(xc()),Gt=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Rc.Uint8ArrayBlobAdapter.mutate(t);if(!t)return Rc.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return Rc.Uint8ArrayBlobAdapter.mutate(await r)}});function rr(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var Cc=w(()=>{});var Wt,Jf=w(()=>{Wt=t=>typeof t=="function"?t():t});var lo,Ac=w(()=>{lo=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s})});var K_,Q_,Y_,Zf,J_=w(()=>{K_=v(Se()),Q_=v(lt());Ac();Y_=t=>(e,r)=>async n=>{let{response:s}=await e(n),{operationSchema:i}=(0,Q_.getSmithyContext)(r),[,o,a,c,u,l]=i??[];try{let p=await t.protocol.deserializeResponse(lo(o,a,c,u,l),{...t,...r},s);return{response:s,output:p}}catch(p){if(Object.defineProperty(p,"$response",{value:s}),!("$metadata"in p)){let m="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{p.message+=`
  `+m}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(m):r.logger?.warn?.(m)}typeof p.$responseBodyText<"u"&&p.$response&&(p.$response.body=p.$responseBodyText);try{if(K_.HttpResponse.isInstance(s)){let{headers:h={}}=s,y=Object.entries(h);p.$metadata={httpStatusCode:s.statusCode,requestId:Zf(/^x-[\w-]+-request-?id$/,y),extendedRequestId:Zf(/^x-[\w-]+-id-2$/,y),cfId:Zf(/^x-[\w-]+-cf-id$/,y)}}}catch{}}throw p}},Zf=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1]});var Z_,X_,eE=w(()=>{Z_=v(lt());Ac();X_=t=>(e,r)=>async n=>{let{operationSchema:s}=(0,Z_.getSmithyContext)(r),[,i,o,a,c,u]=s??[],l=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,p=await t.protocol.serializeRequest(lo(i,o,a,c,u),n.input,{...t,...r,endpoint:l});return e({...n,request:p})}});function JD(t){return{applyToStack:e=>{e.add(X_(t),rE),e.add(Y_(t),tE),t.protocol.setSerdeContext(t)}}}var tE,rE,nE=w(()=>{J_();eE();tE={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},rE={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Ne,Zr=w(()=>{Ne=class{name;namespace;traits;static assign(e,r){return Object.assign(e,r)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Ic,ZD,sE=w(()=>{Zr();Ic=class t extends Ne{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=t.symbol},ZD=(t,e,r,n)=>Ne.assign(new Ic,{name:e,namespace:t,traits:r,valueSchema:n})});var Pc,XD,iE=w(()=>{Zr();Pc=class t extends Ne{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=t.symbol},XD=(t,e,r,n,s)=>Ne.assign(new Pc,{name:e,namespace:t,traits:r,keySchema:n,valueSchema:s})});var Oc,eM,oE=w(()=>{Zr();Oc=class t extends Ne{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=t.symbol},eM=(t,e,r,n,s)=>Ne.assign(new Oc,{name:e,namespace:t,traits:r,input:n,output:s})});var Vs,tM,Xf=w(()=>{Zr();Vs=class t extends Ne{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=t.symbol},tM=(t,e,r,n,s)=>Ne.assign(new Vs,{name:e,namespace:t,traits:r,memberNames:n,memberList:s})});var Nc,rM,aE=w(()=>{Zr();Xf();Nc=class t extends Vs{static symbol=Symbol.for("@smithy/err");ctor;symbol=t.symbol},rM=(t,e,r,n,s,i)=>Ne.assign(new Nc,{name:e,namespace:t,traits:r,memberNames:n,memberList:s,ctor:null})});function nr(t){if(typeof t=="object")return t;t=t|0;let e={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}var ep=w(()=>{});function fo(t,e){if(t instanceof $)return Object.assign(t,{memberName:e,_isMemberSchema:!0});let r=$;return new r(t,e)}var $,tp,cE,uE=w(()=>{Jf();ep();$=class t{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=t.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;let n=[],s=e,i=e;for(this._isMemberSchema=!1;tp(s);)n.push(s[1]),s=s[0],i=Wt(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let o=n.length-1;o>=0;--o){let a=n[o];Object.assign(this.memberTraits,nr(a))}}else this.memberTraits=0;if(i instanceof t){let o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=Wt(i),cE(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){let r=Wt(e);if(r instanceof t)return r;if(tp(r)){let[n,s]=r;if(n instanceof t)return Object.assign(n.getMergedTraits(),nr(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new t(r)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){let e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){let e=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return e(r)||e(n)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return nr(this.memberTraits)}getOwnTraits(){return nr(this.traits)}getKeySchema(){let[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=e?15:n[4]??0;return fo([s,0],"key")}getValueSchema(){let e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(i!=null)return fo([i,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){let n=r[4].indexOf(e),s=r[5][n];return fo(tp(s)?s:[s,0],e)}if(this.isDocumentSchema())return fo([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],fo([e[5][r],0],e[4][r])]}};tp=t=>Array.isArray(t)&&t.length===2,cE=t=>Array.isArray(t)&&t.length>=5});var po,nM,sM,lE=w(()=>{Zr();po=class t extends Ne{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=t.symbol},nM=(t,e,r,n)=>Ne.assign(new po,{name:e,namespace:t,traits:n,schemaRef:r}),sM=(t,e,r,n)=>Ne.assign(new po,{name:e,namespace:t,traits:r,schemaRef:n})});var iM,dE=w(()=>{iM={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var Le,fE=w(()=>{Le=class t{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,n=new Map){this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return t.registries.has(e)||t.registries.set(e,new t(e)),t.registries.get(e)}register(e,r){let n=this.normalizeShapeId(e);t.for(n.split("#")[0]).schemas.set(n,r)}getSchema(e){let r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){let n=e,s=t.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(e){let r=e;return t.for(r[1]).exceptions.get(r)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}});var rp={};nt(rp,{ErrorSchema:()=>Nc,ListSchema:()=>Ic,MapSchema:()=>Pc,NormalizedSchema:()=>$,OperationSchema:()=>Oc,SCHEMA:()=>iM,Schema:()=>Ne,SimpleSchema:()=>po,StructureSchema:()=>Vs,TypeRegistry:()=>Le,deref:()=>Wt,deserializerMiddlewareOption:()=>tE,error:()=>rM,getSchemaSerdePlugin:()=>JD,isStaticSchema:()=>cE,list:()=>ZD,map:()=>XD,op:()=>eM,operation:()=>lo,serializerMiddlewareOption:()=>rE,sim:()=>nM,simAdapter:()=>sM,struct:()=>tM,translateTraits:()=>nr});var be=w(()=>{Jf();nE();sE();iE();oE();Ac();aE();uE();Zr();lE();Xf();dE();ep();fE()});var oM,pE=w(()=>{oM=(t,e,r=n=>n)=>t});var aM,cM,ho,uM,kc,mo,lM,np,sp,ip,op,dM,fM,hE,pM,hM,Mc,mM,ap,gM,zs,cp,yM,SM,_M,mE,gE,EM,wM,ss,up,Dc,go,lp=w(()=>{aM=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},cM=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&go.warn(Dc(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&go.warn(Dc(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},ho=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&go.warn(Dc(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},uM=Math.ceil(34028234663852886e22),kc=t=>{let e=ho(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>uM)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},mo=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},lM=mo,np=t=>op(t,32),sp=t=>op(t,16),ip=t=>op(t,8),op=(t,e)=>{let r=mo(t);if(r!==void 0&&dM(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},dM=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},fM=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},hE=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},pM=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return go.warn(Dc(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},hM=t=>{if(t==null)return;let e=hE(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},Mc=t=>ho(typeof t=="string"?zs(t):t),mM=Mc,ap=t=>kc(typeof t=="string"?zs(t):t),gM=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,zs=t=>{let e=t.match(gM);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},cp=t=>typeof t=="string"?mE(t):ho(t),yM=cp,SM=cp,_M=t=>typeof t=="string"?mE(t):kc(t),mE=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},gE=t=>mo(typeof t=="string"?zs(t):t),EM=gE,wM=t=>np(typeof t=="string"?zs(t):t),ss=t=>sp(typeof t=="string"?zs(t):t),up=t=>ip(typeof t=="string"?zs(t):t),Dc=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),go={warn:console.warn}});function So(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,l=o<10?`0${o}`:`${o}`,p=a<10?`0${a}`:`${a}`;return`${bM[n]}, ${c} ${fp[r]} ${e} ${u}:${l}:${p} GMT`}var bM,fp,vM,xM,RM,pp,TM,CM,AM,hp,mp,yo,IM,PM,OM,dp,NM,kM,DM,sr,MM,LM,Gs,yE=w(()=>{lp();bM=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];vM=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),xM=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=vM.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,u]=e,l=ss(Gs(n)),p=sr(s,"month",1,12),m=sr(i,"day",1,31);return yo(l,p,m,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})},RM=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),pp=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=RM.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,u,l]=e,p=ss(Gs(n)),m=sr(s,"month",1,12),h=sr(i,"day",1,31),y=yo(p,m,h,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u});return l.toUpperCase()!="Z"&&y.setTime(y.getTime()-LM(l)),y},TM=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),CM=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),AM=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),hp=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=TM.exec(t);if(e){let[r,n,s,i,o,a,c,u]=e;return yo(ss(Gs(i)),dp(s),sr(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})}if(e=CM.exec(t),e){let[r,n,s,i,o,a,c,u]=e;return OM(yo(IM(i),dp(s),sr(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(e=AM.exec(t),e){let[r,n,s,i,o,a,c,u]=e;return yo(ss(Gs(u)),dp(n),sr(s.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},mp=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=Mc(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},yo=(t,e,r,n)=>{let s=e-1;return kM(t,s,r),new Date(Date.UTC(t,s,r,sr(n.hours,"hour",0,23),sr(n.minutes,"minute",0,59),sr(n.seconds,"seconds",0,60),MM(n.fractionalMilliseconds)))},IM=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+ss(Gs(t));return r<e?r+100:r},PM=50*365*24*60*60*1e3,OM=t=>t.getTime()-new Date().getTime()>PM?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,dp=t=>{let e=fp.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},NM=[31,28,31,30,31,30,31,31,30,31,30,31],kM=(t,e,r)=>{let n=NM[e];if(e===1&&DM(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${fp[e]} in ${t}: ${r}`)},DM=t=>t%4===0&&(t%100!==0||t%400===0),sr=(t,e,r,n)=>{let s=up(Gs(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},MM=t=>t==null?0:ap("0."+t)*1e3,LM=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},Gs=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)}});var _o={};nt(_o,{__addDisposableResource:()=>BE,__assign:()=>Lc,__asyncDelegator:()=>DE,__asyncGenerator:()=>kE,__asyncValues:()=>ME,__await:()=>Ws,__awaiter:()=>CE,__classPrivateFieldGet:()=>UE,__classPrivateFieldIn:()=>jE,__classPrivateFieldSet:()=>$E,__createBinding:()=>qc,__decorate:()=>EE,__disposeResources:()=>HE,__esDecorate:()=>bE,__exportStar:()=>IE,__extends:()=>SE,__generator:()=>AE,__importDefault:()=>qE,__importStar:()=>FE,__makeTemplateObject:()=>LE,__metadata:()=>TE,__param:()=>wE,__propKey:()=>xE,__read:()=>Sp,__rest:()=>_E,__rewriteRelativeImportExtension:()=>VE,__runInitializers:()=>vE,__setFunctionName:()=>RE,__spread:()=>PE,__spreadArray:()=>NE,__spreadArrays:()=>OE,__values:()=>Fc,default:()=>UM});function SE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gp(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function _E(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function EE(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function wE(t,e){return function(r,n){e(r,n,t)}}function bE(t,e,r,n,s,i){function o(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,l=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),p,m=!1,h=r.length-1;h>=0;h--){var y={};for(var x in n)y[x]=x==="access"?{}:n[x];for(var x in n.access)y.access[x]=n.access[x];y.addInitializer=function(C){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(C||null))};var R=(0,r[h])(a==="accessor"?{get:l.get,set:l.set}:l[c],y);if(a==="accessor"){if(R===void 0)continue;if(R===null||typeof R!="object")throw new TypeError("Object expected");(p=o(R.get))&&(l.get=p),(p=o(R.set))&&(l.set=p),(p=o(R.init))&&s.unshift(p)}else(p=o(R))&&(a==="field"?s.unshift(p):l[c]=p)}u&&Object.defineProperty(u,n.name,l),m=!0}function vE(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function xE(t){return typeof t=="symbol"?t:"".concat(t)}function RE(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function TE(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function CE(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(p){o(p)}}function c(l){try{u(n.throw(l))}catch(p){o(p)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function AE(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function IE(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qc(e,t,r)}function Fc(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sp(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function PE(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Sp(arguments[e]));return t}function OE(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function NE(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function Ws(t){return this instanceof Ws?(this.v=t,this):new Ws(t)}function kE(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(h){return function(y){return Promise.resolve(y).then(h,p)}}function a(h,y){n[h]&&(s[h]=function(x){return new Promise(function(R,C){i.push([h,x,R,C])>1||c(h,x)})},y&&(s[h]=y(s[h])))}function c(h,y){try{u(n[h](y))}catch(x){m(i[0][3],x)}}function u(h){h.value instanceof Ws?Promise.resolve(h.value.v).then(l,p):m(i[0][2],h)}function l(h){c("next",h)}function p(h){c("throw",h)}function m(h,y){h(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function DE(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Ws(t[s](o)),done:!1}:i?i(o):o}:i}}function ME(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Fc=="function"?Fc(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function LE(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function FE(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=yp(t),n=0;n<r.length;n++)r[n]!=="default"&&qc(e,t,r[n]);return FM(e,t),e}function qE(t){return t&&t.__esModule?t:{default:t}}function UE(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function $E(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function jE(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function BE(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function HE(t){function e(i){t.error=t.hasError?new qM(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function VE(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?e?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):t}var gp,Lc,qc,FM,yp,qM,UM,Eo=w(()=>{gp=function(t,e){return gp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},gp(t,e)};Lc=function(){return Lc=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Lc.apply(this,arguments)};qc=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});FM=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},yp=function(t){return yp=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},yp(t)};qM=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};UM={__extends:SE,__assign:Lc,__rest:_E,__decorate:EE,__param:wE,__esDecorate:bE,__runInitializers:vE,__propKey:xE,__setFunctionName:RE,__metadata:TE,__awaiter:CE,__generator:AE,__createBinding:qc,__exportStar:IE,__values:Fc,__read:Sp,__spread:PE,__spreadArrays:OE,__spreadArray:NE,__await:Ws,__asyncGenerator:kE,__asyncDelegator:DE,__asyncValues:ME,__makeTemplateObject:LE,__importStar:FE,__importDefault:qE,__classPrivateFieldGet:UE,__classPrivateFieldSet:$E,__classPrivateFieldIn:jE,__addDisposableResource:BE,__disposeResources:HE,__rewriteRelativeImportExtension:VE}});var GE=b(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.randomUUID=void 0;var $M=(Eo(),ue(_o)),zE=$M.__importDefault(require("crypto"));Uc.randomUUID=zE.default.randomUUID.bind(zE.default)});var _p=b(KE=>{"use strict";var WE=GE(),Ze=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),jM=()=>{if(WE.randomUUID)return WE.randomUUID();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,Ze[t[0]]+Ze[t[1]]+Ze[t[2]]+Ze[t[3]]+"-"+Ze[t[4]]+Ze[t[5]]+"-"+Ze[t[6]]+Ze[t[7]]+"-"+Ze[t[8]]+Ze[t[9]]+"-"+Ze[t[10]]+Ze[t[11]]+Ze[t[12]]+Ze[t[13]]+Ze[t[14]]+Ze[t[15]]};KE.v4=jM});var ir,QE=w(()=>{ir=v(_p())});var it,YE=w(()=>{it=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};it.from=t=>t&&typeof t=="object"&&(t instanceof it||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?it(String(t)):it(JSON.stringify(t));it.fromObject=it.from});function Ep(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}var JE=w(()=>{});function Er(t,e,r){let n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}var wp,bp,vp,ZE,XE,BM,HM,VM,zM,GM,wo,xp,Rp,ew=w(()=>{wp="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",bp="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",vp="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",ZE="(\\d?\\d)",XE="(\\d{4})",BM=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),HM=new RegExp(`^${wp}, ${ZE} ${bp} ${XE} ${vp} GMT$`),VM=new RegExp(`^${wp}, ${ZE}-${bp}-(\\d\\d) ${vp} GMT$`),zM=new RegExp(`^${wp} ${bp} ( [1-9]|\\d\\d) ${vp} ${XE}$`),GM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wo=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},xp=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");let e=BM.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,r,n,s,i,o,a,,c,u]=e;Er(n,1,12),Er(s,1,31),Er(i,0,23),Er(o,0,59),Er(a,0,60);let l=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(i),Number(o),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(l.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){let[,p,m,h]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],y=p==="-"?1:-1;l.setTime(l.getTime()+y*(Number(m)*60*60*1e3+Number(h)*60*1e3))}return l},Rp=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,i,o,a,c;if((c=HM.exec(t))?[,e,r,n,s,i,o,a]=c:(c=VM.exec(t))?([,e,r,n,s,i,o,a]=c,n=(Number(n)+1900).toString()):(c=zM.exec(t))&&([,r,e,s,i,o,a,n]=c),n&&o){let u=Date.UTC(Number(n),GM.indexOf(r),Number(e),Number(s),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);Er(e,1,31),Er(s,0,23),Er(i,0,59),Er(o,0,60);let l=new Date(u);return l.setUTCFullYear(Number(n)),l}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)}});function Tp(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let s=[],i="";for(let o=0;o<n.length;o++)i===""?i=n[o]:i+=e+n[o],(o+1)%r===0&&(s.push(i),i="");return i!==""&&s.push(i),s}var tw=w(()=>{});var bo,rw=w(()=>{bo=t=>{let e=t.length,r=[],n=!1,s,i=0;for(let o=0;o<e;++o){let a=t[o];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(i,o)),i=o+1);break;default:}s=a}return r.push(t.slice(i)),r.map(o=>{o=o.trim();let a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})}});function Cp(t){return new ve(String(t),"bigDecimal")}var nw,ve,sw=w(()=>{nw=/^-?\d*(\.\d+)?$/,ve=class t{string;type;constructor(e,r){if(this.string=e,this.type=r,!nw.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;let r=e;return t.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&nw.test(r.string)}}});var iw={};nt(iw,{LazyJsonString:()=>it,NumericValue:()=>ve,_parseEpochTimestamp:()=>wo,_parseRfc3339DateTimeWithOffset:()=>xp,_parseRfc7231DateTime:()=>Rp,copyDocumentWithTransform:()=>oM,dateToUtcString:()=>So,expectBoolean:()=>cM,expectByte:()=>ip,expectFloat32:()=>kc,expectInt:()=>lM,expectInt32:()=>np,expectLong:()=>mo,expectNonNull:()=>fM,expectNumber:()=>ho,expectObject:()=>hE,expectShort:()=>sp,expectString:()=>pM,expectUnion:()=>hM,generateIdempotencyToken:()=>ir.v4,handleFloat:()=>yM,limitedParseDouble:()=>cp,limitedParseFloat:()=>SM,limitedParseFloat32:()=>_M,logger:()=>go,nv:()=>Cp,parseBoolean:()=>aM,parseEpochTimestamp:()=>mp,parseRfc3339DateTime:()=>xM,parseRfc3339DateTimeWithOffset:()=>pp,parseRfc7231DateTime:()=>hp,quoteHeader:()=>Ep,splitEvery:()=>Tp,splitHeader:()=>bo,strictParseByte:()=>up,strictParseDouble:()=>Mc,strictParseFloat:()=>mM,strictParseFloat32:()=>ap,strictParseInt:()=>EM,strictParseInt32:()=>wM,strictParseLong:()=>gE,strictParseShort:()=>ss});var dt=w(()=>{pE();yE();QE();YE();lp();JE();ew();tw();rw();sw()});var ot,Ks=w(()=>{ot=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});var ow,Ap,aw=w(()=>{ow=v(He()),Ap=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:r,deserializer:n,serdeContext:s,defaultContentType:i}){this.marshaller=e,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=i}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){let s=this.marshaller,i=r.getEventStreamMember(),o=r.getMemberSchema(i),a=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),l={async*[Symbol.asyncIterator](){if(n){let p={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let m=a.flush();yield{[u]:!0,headers:p,body:m}}for await(let p of e)yield p}};return s.serialize(l,p=>{if(p[u])return{headers:p.headers,body:p.body};let m=Object.keys(p).find(N=>N!=="__type")??"",{additionalHeaders:h,body:y,eventType:x,explicitPayloadContentType:R}=this.writeEventBody(m,o,p);return{headers:{":event-type":{type:"string",value:x},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:R??c},...h},body:y}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,i=r.getEventStreamMember(),a=r.getMemberSchema(i).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=s.deserialize(e.body,async m=>{let h=Object.keys(m).find(y=>y!=="__type")??"";if(h==="initial-response"){let y=await this.deserializer.read(r,m[h].body);return delete y[i],{[c]:!0,...y}}else if(h in a){let y=a[h];return{[h]:await this.deserializer.read(y,m[h].body)}}else return{$unknown:m}}),l=u[Symbol.asyncIterator](),p=await l.next();if(p.done)return u;if(p.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[m,h]of Object.entries(p.value))n[m]=h}return{async*[Symbol.asyncIterator](){for(p?.value?.[c]||(yield p.value);;){let{done:m,value:h}=await l.next();if(m)break;yield h}}}}writeEventBody(e,r,n){let s=this.serializer,i=e,o=null,a,c=r.getSchema()[4].includes(e),u={};if(c){let m=r.getMemberSchema(e);if(m.isStructSchema()){for(let[h,y]of m.structIterator()){let{eventHeader:x,eventPayload:R}=y.getMergedTraits();if(R){o=h;break}else if(x){let C=n[e][h],N="binary";y.isNumericSchema()?(-2)**31<=C&&C<=2**31-1?N="integer":N="long":y.isTimestampSchema()?N="timestamp":y.isStringSchema()?N="string":y.isBooleanSchema()&&(N="boolean"),C!=null&&(u[h]={type:N,value:C},delete n[e][h])}}if(o!==null){let h=m.getMemberSchema(o);h.isBlobSchema()?a="application/octet-stream":h.isStringSchema()&&(a="text/plain"),s.write(h,n[e][o])}else s.write(m,n[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[m,h]=n[e];i=m,s.write(15,h)}let l=s.flush();return{body:typeof l=="string"?(this.serdeContext?.utf8Decoder??ow.fromUtf8)(l):l,eventType:i,explicitPayloadContentType:a,additionalHeaders:u}}}});var cw={};nt(cw,{EventStreamSerde:()=>Ap});var uw=w(()=>{aw()});var $c,is,jc=w(()=>{be();$c=v(Se());Ks();is=class extends ot{options;constructor(e){super(),this.options=e}getRequestType(){return $c.HttpRequest}getResponseType(){return $c.HttpResponse}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(let[n,s]of r.url.searchParams.entries())e.query[n]=s;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,n){let s=$.of(r.input),i=nr(r.traits??{});if(i.endpoint){let o=i.endpoint?.[0];if(typeof o=="string"){let a=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let u=n[c];if(typeof u!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);o=o.replace(`{${c}}`,u)}e.hostname=o+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:e}=await Promise.resolve().then(()=>(uw(),cw));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,n,s,i){return[]}getEventStreamMarshaller(){let e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}});var lw,dw,os,fw=w(()=>{be();dt();lw=v(Se()),dw=v(xc());Tc();Cc();jc();os=class extends is{async serializeRequest(e,r,n){let s={...r??{}},i=this.serializer,o={},a={},c=await n.endpoint(),u=$.of(e?.input),l=u.getSchema(),p=!1,m,h=new lw.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(c){this.updateServiceEndpoint(h,c),this.setHostPrefix(h,e,s);let y=nr(e.traits);if(y.http){h.method=y.http[0];let[x,R]=y.http[1].split("?");h.path=="/"?h.path=x:h.path+=x;let C=new URLSearchParams(R??"");Object.assign(o,Object.fromEntries(C))}}for(let[y,x]of u.structIterator()){let R=x.getMergedTraits()??{},C=s[y];if(C!=null)if(R.httpPayload)x.isStreaming()?x.isStructSchema()?s[y]&&(m=await this.serializeEventStream({eventStream:s[y],requestSchema:u})):m=C:(i.write(x,C),m=i.flush()),delete s[y];else if(R.httpLabel){i.write(x,C);let N=i.flush();h.path.includes(`{${y}+}`)?h.path=h.path.replace(`{${y}+}`,N.split("/").map(rr).join("/")):h.path.includes(`{${y}}`)&&(h.path=h.path.replace(`{${y}}`,rr(N))),delete s[y]}else if(R.httpHeader)i.write(x,C),a[R.httpHeader.toLowerCase()]=String(i.flush()),delete s[y];else if(typeof R.httpPrefixHeaders=="string"){for(let[N,U]of Object.entries(C)){let V=R.httpPrefixHeaders+N;i.write([x.getValueSchema(),{httpHeader:V}],U),a[V.toLowerCase()]=i.flush()}delete s[y]}else R.httpQuery||R.httpQueryParams?(this.serializeQuery(x,C,o),delete s[y]):p=!0}return p&&s&&(i.write(l,s),m=i.flush()),h.headers=a,h.query=o,h.body=m,h}serializeQuery(e,r,n){let s=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(let[o,a]of Object.entries(r))if(!(o in n)){let c=e.getValueSchema();Object.assign(c.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(e.isListSchema()){let o=!!e.getMergedTraits().sparse,a=[];for(let c of r){s.write([e.getValueSchema(),i],c);let u=s.flush();(o||u!==void 0)&&a.push(u)}n[i.httpQuery]=a}else s.write([e,i],r),n[i.httpQuery]=s.flush()}async deserializeResponse(e,r,n){let s=this.deserializer,i=$.of(e.output),o={};if(n.statusCode>=300){let c=await Gt(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(e,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=await this.deserializeHttpMessage(i,r,n,o);if(a.length){let c=await Gt(n.body,r);if(c.byteLength>0){let u=await s.read(i,c);for(let l of a)o[l]=u[l]}}return o.$metadata=this.deserializeMetadata(n),o}async deserializeHttpMessage(e,r,n,s,i){let o;s instanceof Set?o=i:o=s;let a=this.deserializer,c=$.of(e),u=[];for(let[l,p]of c.structIterator()){let m=p.getMemberTraits();if(m.httpPayload){if(p.isStreaming())p.isStructSchema()?o[l]=await this.deserializeEventStream({response:n,responseSchema:c}):o[l]=(0,dw.sdkStreamMixin)(n.body);else if(n.body){let y=await Gt(n.body,r);y.byteLength>0&&(o[l]=await a.read(p,y))}}else if(m.httpHeader){let h=String(m.httpHeader).toLowerCase(),y=n.headers[h];if(y!=null)if(p.isListSchema()){let x=p.getValueSchema();x.getMergedTraits().httpHeader=h;let R;x.isTimestampSchema()&&x.getSchema()===4?R=Tp(y,",",2):R=bo(y);let C=[];for(let N of R)C.push(await a.read(x,N.trim()));o[l]=C}else o[l]=await a.read(p,y)}else if(m.httpPrefixHeaders!==void 0){o[l]={};for(let[h,y]of Object.entries(n.headers))if(h.startsWith(m.httpPrefixHeaders)){let x=p.getValueSchema();x.getMergedTraits().httpHeader=h,o[l][h.slice(m.httpPrefixHeaders.length)]=await a.read(x,y)}}else m.httpResponseCode?o[l]=n.statusCode:u.push(l)}return u}}});var pw,wr,hw=w(()=>{be();pw=v(Se());Tc();jc();wr=class extends is{async serializeRequest(e,r,n){let s=this.serializer,i={},o={},a=await n.endpoint(),c=$.of(e?.input),u=c.getSchema(),l,p=new pw.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:i,headers:o,body:void 0});a&&(this.updateServiceEndpoint(p,a),this.setHostPrefix(p,e,r));let m={...r};if(r){let h=c.getEventStreamMember();if(h){if(m[h]){let y={};for(let[x,R]of c.structIterator())x!==h&&m[x]&&(s.write(R,m[x]),y[x]=s.flush());l=await this.serializeEventStream({eventStream:m[h],requestSchema:c,initialRequest:y})}}else s.write(u,m),l=s.flush()}return p.headers=o,p.query=i,p.body=l,p.method="POST",p}async deserializeResponse(e,r,n){let s=this.deserializer,i=$.of(e.output),o={};if(n.statusCode>=300){let c=await Gt(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(e,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=i.getEventStreamMember();if(a)o[a]=await this.deserializeEventStream({response:n,responseSchema:i,initialResponseContainer:o});else{let c=await Gt(n.body,r);c.byteLength>0&&Object.assign(o,await s.read(i,c))}return o.$metadata=this.deserializeMetadata(n),o}}});var Ip,Pp=w(()=>{Cc();Ip=(t,e,r,n,s,i)=>{if(e!=null&&e[r]!==void 0){let o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,i?o.split("/").map(a=>rr(a)).join("/"):rr(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return t}});function vo(t,e){return new Bc(t,e)}var mw,Bc,gw=w(()=>{mw=v(Se());Pp();Bc=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(e,r){this.input=e,this.context=r}async build(){let{hostname:e,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let i of this.resolvePathStack)i(this.path);return new mw.HttpRequest({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,s){return this.resolvePathStack.push(i=>{this.path=Ip(i,this.input,e,r,n,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});function vt(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:i||r?5:void 0:void 0)??e.timestampFormat.default}var Hc=w(()=>{});var Op,yw,as,Np=w(()=>{be();dt();Op=v(Ve()),yw=v(He());Ks();Hc();as=class extends ot{settings;constructor(e){super(),this.settings=e}read(e,r){let n=$.of(e);if(n.isListSchema())return bo(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??Op.fromBase64)(r);if(n.isTimestampSchema())switch(vt(n,this.settings)){case 5:return xp(r);case 6:return Rp(r);case 7:return wo(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let s=n.getMergedTraits().mediaType,i=r;if(s)return n.getMergedTraits().httpHeader&&(i=this.base64ToUtf8(i)),(s==="application/json"||s.endsWith("+json"))&&(i=it.from(i)),i}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new ve(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??yw.toUtf8)((this.serdeContext?.base64Decoder??Op.fromBase64)(e))}}});var Vc,cs,Sw=w(()=>{be();Vc=v(He());Ks();Np();cs=class extends ot{codecDeserializer;stringDeserializer;constructor(e,r){super(),this.codecDeserializer=e,this.stringDeserializer=new as(r)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,r){let n=$.of(e),s=n.getMergedTraits(),i=this.serdeContext?.utf8Encoder??Vc.toUtf8;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(n,i(r));if(s.httpPayload){if(n.isBlobSchema()){let o=this.serdeContext?.utf8Decoder??Vc.fromUtf8;return typeof r=="string"?o(r):r}else if(n.isStringSchema())return"byteLength"in r?i(r):r}return this.codecDeserializer.read(n,r)}}});var kp,xo,Dp=w(()=>{be();dt();kp=v(Ve());Ks();Hc();xo=class extends ot{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,r){let n=$.of(e);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(vt(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=So(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??kp.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let o="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let c=this.flush(),u=n.getValueSchema().isTimestampSchema()?c:Ep(c);o!==""&&(o+=", "),o+=u}this.stringBuffer=o;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let s=n.getMergedTraits().mediaType,i=r;if(s&&((s==="application/json"||s.endsWith("+json"))&&(i=it.from(i)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??kp.toBase64)(i.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let e=this.stringBuffer;return this.stringBuffer="",e}}});var us,_w=w(()=>{be();Dp();us=class{codecSerializer;stringSerializer;buffer;constructor(e,r,n=new xo(r)){this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){let n=$.of(e),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}});var Ew={};nt(Ew,{FromStringShapeDeserializer:()=>as,HttpBindingProtocol:()=>os,HttpInterceptingShapeDeserializer:()=>cs,HttpInterceptingShapeSerializer:()=>us,HttpProtocol:()=>is,RequestBuilder:()=>Bc,RpcProtocol:()=>wr,SerdeContext:()=>ot,ToStringShapeSerializer:()=>xo,collectBody:()=>Gt,determineTimestampFormat:()=>vt,extendedEncodeURIComponent:()=>rr,requestBuilder:()=>vo,resolvedPath:()=>Ip});var ft=w(()=>{Tc();Cc();fw();jc();hw();gw();Pp();Np();Sw();_w();Dp();Hc();Ks()});var ww=w(()=>{ft()});function WM(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var bw=w(()=>{});var ls,vw=w(()=>{ls=class{authSchemes=new Map;constructor(e){for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var xw,Mp,Lp,Rw=w(()=>{xw=v(Se()),Mp=v(Kr()),Lp=class{async sign(e,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=xw.HttpRequest.clone(e);if(n.in===Mp.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===Mp.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var Tw,Fp,Cw=w(()=>{Tw=v(Se()),Fp=class{async sign(e,r,n){let s=Tw.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var br,Aw=w(()=>{br=class{async sign(e,r,n){return e}}});var Iw=w(()=>{Rw();Cw();Aw()});var Pw,KM,qp,zc,Up,Ow=w(()=>{Pw=t=>function(r){return zc(r)&&r.expiration.getTime()-Date.now()<t},KM=3e5,qp=Pw(3e5),zc=t=>t.expiration!==void 0,Up=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,s,i,o,a=!1,c=async u=>{i||(i=n(u));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return e===void 0?async u=>((!o||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!o||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(e(s)&&await c(u),s):(a=!0,s))}});var Nw=w(()=>{vw();Iw();Ow()});var Qs={};nt(Qs,{DefaultIdentityProviderConfig:()=>ls,EXPIRATION_MS:()=>KM,HttpApiKeyAuthSigner:()=>Lp,HttpBearerAuthSigner:()=>Fp,NoAuthSigner:()=>br,createIsIdentityExpiredFunction:()=>Pw,createPaginator:()=>WS,doesIdentityRequireRefresh:()=>zc,getHttpAuthSchemeEndpointRuleSetPlugin:()=>oo,getHttpAuthSchemePlugin:()=>Ik,getHttpSigningPlugin:()=>ao,getSmithyContext:()=>vk,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>OS,httpAuthSchemeMiddleware:()=>io,httpAuthSchemeMiddlewareOptions:()=>qS,httpSigningMiddleware:()=>_f,httpSigningMiddlewareOptions:()=>HS,isIdentityExpired:()=>qp,memoizeIdentityProvider:()=>Up,normalizeProvider:()=>Yr,requestBuilder:()=>vo,setFeature:()=>WM});var pt=w(()=>{TS();$S();zS();GS();KS();ww();bw();Nw()});var fs=b(ds=>{"use strict";var jp=Kr(),Bp=class{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),i=0;for(;;){let{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let i=String(e[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}},QM=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),kw=t=>QM.test(t)||t.startsWith("[")&&t.endsWith("]"),YM=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Vp=(t,e=!1)=>{if(!e)return YM.test(t);let r=t.split(".");for(let n of r)if(!Vp(n))return!1;return!0},Hp={},Ro="endpoints";function Xr(t){return typeof t!="object"||t==null?t:"ref"in t?`$${Xr(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(Xr).join(", ")})`:JSON.stringify(t,null,2)}var Xe=class extends Error{constructor(e){super(e),this.name="EndpointError"}},JM=(t,e)=>t===e,ZM=t=>{let e=t.split("."),r=[];for(let n of e){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new Xe(`Path: '${t}' does not end with ']'`);let i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new Xe(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},Dw=(t,e)=>ZM(e).reduce((r,n)=>{if(typeof r!="object")throw new Xe(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),XM=t=>t!=null,eL=t=>!t,$p={[jp.EndpointURLScheme.HTTP]:80,[jp.EndpointURLScheme.HTTPS]:443},tL=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:m,port:h,protocol:y="",path:x="",query:R={}}=t,C=new URL(`${y}//${m}${h?`:${h}`:""}${x}`);return C.search=Object.entries(R).map(([N,U])=>`${N}=${U}`).join("&"),C}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;let c=o.slice(0,-1);if(!Object.values(jp.EndpointURLScheme).includes(c))return null;let u=kw(s),l=r.includes(`${n}:${$p[c]}`)||typeof t=="string"&&t.includes(`${n}:${$p[c]}`),p=`${n}${l?`:${$p[c]}`:""}`;return{scheme:c,authority:p,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},rL=(t,e)=>t===e,nL=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),sL=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),iL={booleanEquals:JM,getAttr:Dw,isSet:XM,isValidHostLabel:Vp,not:eL,parseURL:tL,stringEquals:rL,substring:nL,uriEncode:sL},Mw=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let i=t.indexOf("{",s);if(i===-1){r.push(t.slice(s));break}r.push(t.slice(s,i));let o=t.indexOf("}",i);if(o===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(r.push(t.slice(i+1,o)),s=o+2);let a=t.substring(i+1,o);if(a.includes("#")){let[c,u]=a.split("#");r.push(Dw(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},oL=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Gc=(t,e,r)=>{if(typeof t=="string")return Mw(t,r);if(t.fn)return Fw.callFunction(t,r);if(t.ref)return oL(t,r);throw new Xe(`'${e}': ${String(t)} is not a string, function or reference.`)},Lw=({fn:t,argv:e},r)=>{let n=e.map(i=>["boolean","number"].includes(typeof i)?i:Fw.evaluateExpression(i,"arg",r)),s=t.split(".");return s[0]in Hp&&s[1]!=null?Hp[s[0]][s[1]](...n):iL[t](...n)},Fw={evaluateExpression:Gc,callFunction:Lw},aL=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new Xe(`'${t}' is already defined in Reference Record.`);let n=Lw(e,r);return r.logger?.debug?.(`${Ro} evaluateCondition: ${Xr(e)} = ${Xr(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},zp=(t=[],e)=>{let r={};for(let n of t){let{result:s,toAssign:i}=aL(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};i&&(r[i.name]=i.value,e.logger?.debug?.(`${Ro} assign: ${i.name} := ${Xr(i.value)}`))}return{result:!0,referenceRecord:r}},cL=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{let o=Gc(i,"Header value entry",e);if(typeof o!="string")throw new Xe(`Header '${n}' value '${o}' is not a string`);return o})}),{}),qw=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:$w.getEndpointProperty(s,e)}),{}),Uw=(t,e)=>{if(Array.isArray(t))return t.map(r=>Uw(r,e));switch(typeof t){case"string":return Mw(t,e);case"object":if(t===null)throw new Xe(`Unexpected endpoint property: ${t}`);return $w.getEndpointProperties(t,e);case"boolean":return t;default:throw new Xe(`Unexpected endpoint property type: ${typeof t}`)}},$w={getEndpointProperty:Uw,getEndpointProperties:qw},uL=(t,e)=>{let r=Gc(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Xe(`Endpoint URL must be a string, got ${typeof r}`)},lL=(t,e)=>{let{conditions:r,endpoint:n}=t,{result:s,referenceRecord:i}=zp(r,e);if(!s)return;let o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:c,headers:u}=n;return e.logger?.debug?.(`${Ro} Resolving endpoint from template: ${Xr(n)}`),{...u!=null&&{headers:cL(u,o)},...c!=null&&{properties:qw(c,o)},url:uL(a,o)}},dL=(t,e)=>{let{conditions:r,error:n}=t,{result:s,referenceRecord:i}=zp(r,e);if(s)throw new Xe(Gc(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},jw=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=lL(r,e);if(n)return n}else if(r.type==="error")dL(r,e);else if(r.type==="tree"){let n=Bw.evaluateTreeRule(r,e);if(n)return n}else throw new Xe(`Unknown endpoint rule: ${r}`);throw new Xe("Rules evaluation failed")},fL=(t,e)=>{let{conditions:r,rules:n}=t,{result:s,referenceRecord:i}=zp(r,e);if(s)return Bw.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...i}})},Bw={evaluateRules:jw,evaluateTreeRule:fL},pL=(t,e)=>{let{endpointParams:r,logger:n}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${Ro} Initial EndpointParams: ${Xr(r)}`);let o=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,l])=>[u,l.default]);if(o.length>0)for(let[u,l]of o)r[u]=r[u]??l;let a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(let u of a)if(r[u]==null)throw new Xe(`Missing required parameter: '${u}'`);let c=jw(i,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${Ro} Resolved endpoint: ${Xr(c)}`),c};ds.EndpointCache=Bp;ds.EndpointError=Xe;ds.customEndpointFunctions=Hp;ds.isIpAddress=kw;ds.isValidHostLabel=Vp;ds.resolveEndpoint=pL});var Vw=b(Hw=>{"use strict";function hL(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}Hw.parseQueryString=hL});var en=b(Gw=>{"use strict";var mL=Vw(),zw=t=>{if(typeof t=="string")return zw(new URL(t));let{hostname:e,pathname:r,port:n,protocol:s,search:i}=t,o;return i&&(o=mL.parseQueryString(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}};Gw.parseUrl=zw});var Js=b(Kt=>{"use strict";var Ys=fs(),gL=en(),Kw=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!Kw(r))return!1;return!0}return!(!Ys.isValidHostLabel(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Ys.isIpAddress(t))},Ww=":",yL="/",SL=t=>{let e=t.split(Ww);if(e.length<6)return null;let[r,n,s,i,o,...a]=e;if(r!=="arn"||n===""||s===""||a.join(Ww)==="")return null;let c=a.map(u=>u.split(yL)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:c}},_L=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],EL="1.1",Qw={partitions:_L,version:EL},Yw=Qw,Jw="",Zw=t=>{let{partitions:e}=Yw;for(let n of e){let{regions:s,outputs:i}=n;for(let[o,a]of Object.entries(s))if(o===t)return{...i,...a}}for(let n of e){let{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(t))return{...i}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Xw=(t,e="")=>{Yw=t,Jw=e},wL=()=>{Xw(Qw,"")},bL=()=>Jw,eb={isVirtualHostableS3Bucket:Kw,parseArn:SL,partition:Zw};Ys.customEndpointFunctions.aws=eb;var vL=t=>{if(typeof t.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>tb(t.endpointProvider({Region:typeof t.region=="function"?await t.region():t.region,UseDualStack:typeof t.useDualstackEndpoint=="function"?await t.useDualstackEndpoint():t.useDualstackEndpoint,UseFIPS:typeof t.useFipsEndpoint=="function"?await t.useFipsEndpoint():t.useFipsEndpoint,Endpoint:void 0},{logger:t.logger}))),t},tb=t=>gL.parseUrl(t.url);Object.defineProperty(Kt,"EndpointError",{enumerable:!0,get:function(){return Ys.EndpointError}});Object.defineProperty(Kt,"isIpAddress",{enumerable:!0,get:function(){return Ys.isIpAddress}});Object.defineProperty(Kt,"resolveEndpoint",{enumerable:!0,get:function(){return Ys.resolveEndpoint}});Kt.awsEndpointFunctions=eb;Kt.getUserAgentPrefix=bL;Kt.partition=Zw;Kt.resolveDefaultAwsRegionalEndpointsConfig=vL;Kt.setPartitionInfo=Xw;Kt.toEndpointV1=tb;Kt.useDefaultPartitionInfo=wL});var Wc,Zs,rb=w(()=>{Wc={warningEmitted:!1},Zs=t=>{t&&!Wc.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<18&&(Wc.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function tn(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var nb=w(()=>{});function sb(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var ib=w(()=>{});function ob(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var ab=w(()=>{});var rn={};nt(rn,{emitWarningIfUnsupportedVersion:()=>Zs,setCredentialFeature:()=>tn,setFeature:()=>sb,setTokenFeature:()=>ob,state:()=>Wc});var Qt=w(()=>{rb();nb();ib();ab()});var cb,Gp,ub=w(()=>{cb=v(Se()),Gp=t=>cb.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var Xs,Wp=w(()=>{Xs=t=>new Date(Date.now()+t)});var lb,db=w(()=>{Wp();lb=(t,e)=>Math.abs(Xs(e).getTime()-t)>=3e5});var Kp,fb=w(()=>{db();Kp=(t,e)=>{let r=Date.parse(t);return lb(r,e)?r-Date.now():e}});var Qp=w(()=>{ub();Wp();fb()});var pb,To,ei,ht,Yp,Jp=w(()=>{pb=v(Se());Qp();To=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},ei=async t=>{let e=To("context",t.context),r=To("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],i=await To("signer",r.signer)(n),o=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}},ht=class{async sign(e,r,n){if(!pb.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await ei(n),{config:i,signer:o}=s,{signingRegion:a,signingName:c}=s,u=n.context;if(u?.authSchemes?.length??!1){let[p,m]=u.authSchemes;p?.name==="sigv4a"&&m?.name==="sigv4"&&(a=m?.signingRegion??a,c=m?.signingName??c)}return await o.sign(e,{signingDate:Xs(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{let n=r.ServerTime??Gp(r.$response);if(n){let s=To("config",e.config),i=s.systemClockOffset;s.systemClockOffset=Kp(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=Gp(e);if(n){let s=To("config",r.config);s.systemClockOffset=Kp(n,s.systemClockOffset)}}},Yp=ht});var hb,Co,mb=w(()=>{hb=v(Se());Qp();Jp();Co=class extends ht{async sign(e,r,n){if(!hb.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}=await ei(n),l=(await s.sigv4aSigningRegionSet?.()??a??[o]).join(",");return await i.sign(e,{signingDate:Xs(s.systemClockOffset),signingRegion:l,signingService:c})}}});var Zp,gb=w(()=>{Zp=t=>typeof t=="string"&&t.length>0?t.split(",").map(e=>e.trim()):[]});var Kc,Xp=w(()=>{Kc=t=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`});var yb,Sb,ti,_b=w(()=>{gb();Xp();yb="AWS_AUTH_SCHEME_PREFERENCE",Sb="auth_scheme_preference",ti={environmentVariableSelector:(t,e)=>{if(e?.signingName&&Kc(e.signingName)in t)return["httpBearerAuth"];if(yb in t)return Zp(t[yb])},configFileSelector:t=>{if(Sb in t)return Zp(t[Sb])},default:[]}});var at=b(ps=>{"use strict";var ri=class t extends Error{name="ProviderError";tryNextLink;constructor(e,r=!0){let n,s=!0;typeof r=="boolean"?(n=void 0,s=r):r!=null&&typeof r=="object"&&(n=r.logger,s=r.tryNextLink??!0),super(e),this.tryNextLink=s,Object.setPrototypeOf(this,t.prototype),n?.debug?.(`@smithy/property-provider ${s?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}},eh=class t extends ri{name="CredentialsProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},th=class t extends ri{name="TokenProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}},xL=(...t)=>async()=>{if(t.length===0)throw new ri("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},RL=t=>()=>Promise.resolve(t),TL=(t,e,r)=>{let n,s,i,o=!1,a=async()=>{s||(s=t());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return e===void 0?async c=>((!i||c?.forceRefresh)&&(n=await a()),n):async c=>((!i||c?.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(e(n)&&await a(),n))};ps.CredentialsProviderError=eh;ps.ProviderError=ri;ps.TokenProviderError=th;ps.chain=xL;ps.fromStatic=RL;ps.memoize=TL});var rh,Eb,wb,bb=w(()=>{pt();rh=v(at()),Eb=t=>(t.sigv4aSigningRegionSet=Yr(t.sigv4aSigningRegionSet),t),wb={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new rh.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new rh.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var Gb=b(ee=>{"use strict";var nn=Gf(),hs=He(),CL=wf(),Tb=Se(),vb=lt(),Qc=Df(),Cb="X-Amz-Algorithm",Ab="X-Amz-Credential",ch="X-Amz-Date",Ib="X-Amz-SignedHeaders",Pb="X-Amz-Expires",uh="X-Amz-Signature",lh="X-Amz-Security-Token",AL="X-Amz-Region-Set",dh="authorization",fh=ch.toLowerCase(),Ob="date",Nb=[dh,fh,Ob],kb=uh.toLowerCase(),eu="x-amz-content-sha256",Db=lh.toLowerCase(),IL="host",Mb={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Lb=/^proxy-/,Fb=/^sec-/,PL=[/^proxy-/i,/^sec-/i],Yc="AWS4-HMAC-SHA256",OL="AWS4-ECDSA-P256-SHA256",qb="AWS4-HMAC-SHA256-PAYLOAD",Ub="UNSIGNED-PAYLOAD",$b=50,ph="aws4_request",jb=3600*24*7,ni={},Jc=[],Zc=(t,e,r)=>`${t}/${e}/${r}/${ph}`,Bb=async(t,e,r,n,s)=>{let i=await xb(t,e.secretAccessKey,e.accessKeyId),o=`${r}:${n}:${s}:${nn.toHex(i)}:${e.sessionToken}`;if(o in ni)return ni[o];for(Jc.push(o);Jc.length>$b;)delete ni[Jc.shift()];let a=`AWS4${e.secretAccessKey}`;for(let c of[r,n,s,ph])a=await xb(t,a,c);return ni[o]=a},NL=()=>{Jc.length=0,Object.keys(ni).forEach(t=>{delete ni[t]})},xb=(t,e,r)=>{let n=new t(e);return n.update(hs.toUint8Array(r)),n.digest()},nh=({headers:t},e,r)=>{let n={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let i=s.toLowerCase();(i in Mb||e?.has(i)||Lb.test(i)||Fb.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[s].trim().replace(/\s+/g," "))}return n},Xc=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===eu)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||CL.isArrayBuffer(e)){let n=new r;return n.update(hs.toUint8Array(e)),nn.toHex(await n.digest())}return Ub},sh=class{format(e){let r=[];for(let i of Object.keys(e)){let o=hs.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}let n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0)),s=0;for(let i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":let a=hs.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(ih.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!kL.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let p=new Uint8Array(17);return p[0]=9,p.set(nn.fromHex(e.value.replace(/\-/g,"")),1),p}}},kL=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,ih=class t{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&Rb(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&Rb(e),parseInt(nn.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Rb(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var Hb=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},Vb=(t,e={})=>{let{headers:r,query:n={}}=Tb.HttpRequest.clone(t);for(let s of Object.keys(r)){let i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},oh=t=>{t=Tb.HttpRequest.clone(t);for(let e of Object.keys(t.headers))Nb.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},zb=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t)){if(n.toLowerCase()===kb)continue;let s=Qc.escapeUri(n);e.push(s);let i=t[n];typeof i=="string"?r[s]=`${s}=${Qc.escapeUri(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${Qc.escapeUri(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},DL=t=>ML(t).toISOString().replace(/\.\d{3}Z$/,"Z"),ML=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,tu=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=vb.normalizeProvider(n),this.credentialProvider=vb.normalizeProvider(r)}createCanonicalRequest(e,r,n){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${zb(e)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){let i=new this.sha256;i.update(hs.toUint8Array(n));let o=await i.digest();return`${s}
${e}
${r}
${nn.toHex(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return Qc.escapeUri(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let r=DL(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}},ah=class extends tu{headerFormatter=new sh;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){super({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o})}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:c,signingRegion:u,signingService:l}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);let m=u??await this.regionProvider(),{longDate:h,shortDate:y}=this.formatDate(n);if(s>jb)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let x=Zc(y,m,l??this.service),R=Vb(oh(e),{unhoistableHeaders:o,hoistableHeaders:c});p.sessionToken&&(R.query[lh]=p.sessionToken),R.query[Cb]=Yc,R.query[Ab]=`${p.accessKeyId}/${x}`,R.query[ch]=h,R.query[Pb]=s.toString(10);let C=nh(R,i,a);return R.query[Ib]=this.getCanonicalHeaderList(C),R.query[uh]=await this.getSignature(h,x,this.getSigningKey(p,m,y,l),this.createCanonicalRequest(R,C,await Xc(e,this.sha256))),R}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:o}){let a=i??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(n),l=Zc(c,a,o??this.service),p=await Xc({headers:{},body:r},this.sha256),m=new this.sha256;m.update(e);let h=nn.toHex(await m.digest()),y=[qb,u,l,s,h,p].join(`
`);return this.signString(y,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let o=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(i,o,a,s));return c.update(hs.toUint8Array(e)),nn.toHex(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:o}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=i??await this.regionProvider(),u=oh(e),{longDate:l,shortDate:p}=this.formatDate(r),m=Zc(p,c,o??this.service);u.headers[fh]=l,a.sessionToken&&(u.headers[Db]=a.sessionToken);let h=await Xc(u,this.sha256);!Hb(eu,u.headers)&&this.applyChecksum&&(u.headers[eu]=h);let y=nh(u,s,n),x=await this.getSignature(l,m,this.getSigningKey(a,c,p,o),this.createCanonicalRequest(u,y,h));return u.headers[dh]=`${Yc} Credential=${a.accessKeyId}/${m}, SignedHeaders=${this.getCanonicalHeaderList(y)}, Signature=${x}`,u}async getSignature(e,r,n,s){let i=await this.createStringToSign(e,r,s,Yc),o=new this.sha256(await n);return o.update(hs.toUint8Array(i)),nn.toHex(await o.digest())}getSigningKey(e,r,n,s){return Bb(this.sha256,e,n,r,s||this.service)}},LL={SignatureV4a:null};ee.ALGORITHM_IDENTIFIER=Yc;ee.ALGORITHM_IDENTIFIER_V4A=OL;ee.ALGORITHM_QUERY_PARAM=Cb;ee.ALWAYS_UNSIGNABLE_HEADERS=Mb;ee.AMZ_DATE_HEADER=fh;ee.AMZ_DATE_QUERY_PARAM=ch;ee.AUTH_HEADER=dh;ee.CREDENTIAL_QUERY_PARAM=Ab;ee.DATE_HEADER=Ob;ee.EVENT_ALGORITHM_IDENTIFIER=qb;ee.EXPIRES_QUERY_PARAM=Pb;ee.GENERATED_HEADERS=Nb;ee.HOST_HEADER=IL;ee.KEY_TYPE_IDENTIFIER=ph;ee.MAX_CACHE_SIZE=$b;ee.MAX_PRESIGNED_TTL=jb;ee.PROXY_HEADER_PATTERN=Lb;ee.REGION_SET_PARAM=AL;ee.SEC_HEADER_PATTERN=Fb;ee.SHA256_HEADER=eu;ee.SIGNATURE_HEADER=kb;ee.SIGNATURE_QUERY_PARAM=uh;ee.SIGNED_HEADERS_QUERY_PARAM=Ib;ee.SignatureV4=ah;ee.SignatureV4Base=tu;ee.TOKEN_HEADER=Db;ee.TOKEN_QUERY_PARAM=lh;ee.UNSIGNABLE_PATTERNS=PL;ee.UNSIGNED_PAYLOAD=Ub;ee.clearCredentialCache=NL;ee.createScope=Zc;ee.getCanonicalHeaders=nh;ee.getCanonicalQuery=zb;ee.getPayloadHash=Xc;ee.getSigningKey=Bb;ee.hasHeader=Hb;ee.moveHeadersToQuery=Vb;ee.prepareRequest=oh;ee.signatureV4aContainer=LL});function FL(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=Up(e,qp,zc):r?n=Yr(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function qL(t,e){if(e.configBound)return e;let r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var hh,ms,Wb,Kb=w(()=>{Qt();pt();hh=v(Gb()),ms=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==n&&(r=!0),e=u;let l=FL(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),p=qL(t,l);r&&!p.attributed?(n=async m=>p(m).then(h=>tn(h,"CREDENTIALS_CODE","e")),n.memoized=p.memoized,n.configBound=p.configBound,n.attributed=!0):n=p},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t,a;return t.signer?a=Yr(t.signer):t.regionInfoProvider?a=()=>Yr(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,l])=>{let{signingRegion:p,signingService:m}=u;t.signingRegion=t.signingRegion||p||l,t.signingName=t.signingName||m||t.serviceId;let h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},y=t.signerConstructor||hh.SignatureV4;return new y(h)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Yr(t.region)(),properties:{}},u);let l=u.signingRegion,p=u.signingName;t.signingRegion=t.signingRegion||l,t.signingName=t.signingName||p||t.serviceId;let m={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},h=t.signerConstructor||hh.SignatureV4;return new h(m)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:a})},Wb=ms});var Qb=w(()=>{Jp();mb();_b();bb();Kb()});var Yb={};nt(Yb,{AWSSDKSigV4Signer:()=>Yp,AwsSdkSigV4ASigner:()=>Co,AwsSdkSigV4Signer:()=>ht,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>ti,NODE_SIGV4A_CONFIG_OPTIONS:()=>wb,getBearerTokenEnvKey:()=>Kc,resolveAWSSDKSigV4Config:()=>Wb,resolveAwsSdkSigV4AConfig:()=>Eb,resolveAwsSdkSigV4Config:()=>ms,validateSigningProperties:()=>ei});var mh=w(()=>{Qb();Xp()});function sn(t){return typeof Buffer<"u"?Buffer.alloc(t):new Uint8Array(t)}function ru(t){return t[gh]=!0,t}var gh,nu=w(()=>{gh=Symbol("@smithy/core/cbor::tagSymbol")});function Xb(t){me=t,xr=new DataView(me.buffer,me.byteOffset,me.byteLength)}function or(t,e){if(t>=e)throw new Error("unexpected end of (decode) payload.");let r=(me[t]&224)>>5,n=me[t]&31;switch(r){case 0:case 1:case 6:let s,i;if(n<24)s=n,i=1;else switch(n){case 24:case 25:case 26:case 27:let o=tv[n],a=o+1;if(i=a,e-t<a)throw new Error(`countLength ${o} greater than remaining buf len.`);let c=t+1;o===1?s=me[c]:o===2?s=xr.getUint16(c):o===4?s=xr.getUint32(c):s=xr.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return ne=i,yh(s);if(r===1){let o;return typeof s=="bigint"?o=BigInt(-1)-s:o=-1-s,ne=i,yh(o)}else if(n===2||n===3){let o=Oo(t+i,e),a=BigInt(0),c=t+i+ne;for(let u=c;u<c+o;++u)a=a<<BigInt(8)|BigInt(me[u]);return ne=i+ne+o,n===3?-a-BigInt(1):a}else if(n===4){let o=or(t+i,e),[a,c]=o,u=c<0?-1:1,l="0".repeat(Math.abs(a)+1)+String(BigInt(u)*BigInt(c)),p,m=c<0?"-":"";return p=a===0?l:l.slice(0,l.length+a)+"."+l.slice(a),p=p.replace(/^0+/g,""),p===""&&(p="0"),p[0]==="."&&(p="0"+p),p=m+p,ne=i+ne,Cp(p)}else{let o=or(t+i,e);return ne=i+ne,ru({tag:yh(s),value:o})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return zL(t,e);case 5:return YL(t,e);case 4:return KL(t,e);case 2:return GL(t,e)}else switch(r){case 3:return VL(t,e);case 5:return QL(t,e);case 4:return WL(t,e);case 2:return vh(t,e)}default:return JL(t,e)}}function ev(t,e,r){return jL&&t.constructor?.name==="Buffer"?t.toString("utf-8",e,r):Jb?Jb.decode(t.subarray(e,r)):(0,Zb.toUtf8)(t.subarray(e,r))}function BL(t){let e=Number(t);return(e<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<e)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${t}) to ${e} with loss of precision.`)),e}function HL(t,e){let r=t>>7,n=(t&124)>>2,s=(t&3)<<8|e,i=r===0?1:-1,o,a;if(n===0){if(s===0)return 0;o=Math.pow(2,-14),a=0}else{if(n===31)return s===0?i*(1/0):NaN;o=Math.pow(2,n-15),a=1}return a+=s/1024,i*(o*a)}function Oo(t,e){let r=me[t]&31;if(r<24)return ne=1,r;if(r===24||r===25||r===26||r===27){let n=tv[r];if(ne=n+1,e-t<ne)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=t+1;return n===1?me[s]:n===2?xr.getUint16(s):n===4?xr.getUint32(s):BL(xr.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function VL(t,e){let r=Oo(t,e),n=ne;if(t+=n,e-t<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=ev(me,t,t+r);return ne=n+r,s}function zL(t,e){t+=1;let r=[];for(let n=t;t<e;){if(me[t]===255){let c=sn(r.length);return c.set(r,0),ne=t-n+2,ev(c,0,c.length)}let s=(me[t]&224)>>5,i=me[t]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=vh(t,e);t+=ne;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function vh(t,e){let r=Oo(t,e),n=ne;if(t+=n,e-t<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=me.subarray(t,t+r);return ne=n+r,s}function GL(t,e){t+=1;let r=[];for(let n=t;t<e;){if(me[t]===255){let c=sn(r.length);return c.set(r,0),ne=t-n+2,c}let s=(me[t]&224)>>5,i=me[t]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=vh(t,e);t+=ne;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function WL(t,e){let r=Oo(t,e),n=ne;t+=n;let s=t,i=Array(r);for(let o=0;o<r;++o){let a=or(t,e),c=ne;i[o]=a,t+=c}return ne=n+(t-s),i}function KL(t,e){t+=1;let r=[];for(let n=t;t<e;){if(me[t]===255)return ne=t-n+2,r;let s=or(t,e);t+=ne,r.push(s)}throw new Error("expected break marker.")}function QL(t,e){let r=Oo(t,e),n=ne;t+=n;let s=t,i={};for(let o=0;o<r;++o){if(t>=e)throw new Error("unexpected end of map payload.");let a=(me[t]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${t}.`);let c=or(t,e);t+=ne;let u=or(t,e);t+=ne,i[c]=u}return ne=n+(t-s),i}function YL(t,e){t+=1;let r=t,n={};for(;t<e;){if(t>=e)throw new Error("unexpected end of map payload.");if(me[t]===255)return ne=t-r+2,n;let s=(me[t]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let i=or(t,e);t+=ne;let o=or(t,e);t+=ne,n[i]=o}throw new Error("expected break marker.")}function JL(t,e){let r=me[t]&31;switch(r){case 21:case 20:return ne=1,r===21;case 22:return ne=1,null;case 23:return ne=1,null;case 25:if(e-t<3)throw new Error("incomplete float16 at end of buf.");return ne=3,HL(me[t+1],me[t+2]);case 26:if(e-t<5)throw new Error("incomplete float32 at end of buf.");return ne=5,xr.getFloat32(t+1);case 27:if(e-t<9)throw new Error("incomplete float64 at end of buf.");return ne=9,xr.getFloat64(t+1);default:throw new Error(`unexpected minor value ${r}.`)}}function yh(t){if(typeof t=="number")return t;let e=Number(t);return Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:t}var Zb,$L,jL,me,xr,Jb,ne,tv,rv=w(()=>{dt();Zb=v(He());nu();$L=typeof TextDecoder<"u",jL=typeof Buffer<"u",me=sn(0),xr=new DataView(me.buffer,me.byteOffset,me.byteLength),Jb=$L?new TextDecoder:null,ne=0;tv={24:1,25:2,26:4,27:8}});function Rh(t){W.byteLength-j<t&&(j<16e6?iu(Math.max(W.byteLength*4,W.byteLength+t)):iu(W.byteLength+t+16e6))}function Th(){let t=sn(j);return t.set(W.subarray(0,j),0),j=0,t}function iu(t){let e=W;W=sn(t),e&&(e.copy?e.copy(W,0,0,e.byteLength):W.set(e,0)),Cr=new DataView(W.buffer,W.byteOffset,W.byteLength)}function Tr(t,e){e<24?W[j++]=t<<5|e:e<256?(W[j++]=t<<5|24,W[j++]=e):e<65536?(W[j++]=t<<5|25,Cr.setUint16(j,e),j+=2):e<2**32?(W[j++]=t<<5|26,Cr.setUint32(j,e),j+=4):(W[j++]=t<<5|27,Cr.setBigUint64(j,typeof e=="bigint"?e:BigInt(e)),j+=8)}function iv(t){let e=[t];for(;e.length;){let r=e.pop();if(Rh(typeof r=="string"?r.length*4:64),typeof r=="string"){if(nv)Tr(3,Buffer.byteLength(r)),j+=W.write(r,j);else{let n=(0,sv.fromUtf8)(r);Tr(3,n.byteLength),W.set(n,j),j+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,i=n?r:-r-1;i<24?W[j++]=s<<5|i:i<256?(W[j++]=s<<5|24,W[j++]=i):i<65536?(W[j++]=s<<5|25,W[j++]=i>>8,W[j++]=i):i<4294967296?(W[j++]=s<<5|26,Cr.setUint32(j,i),j+=4):(W[j++]=s<<5|27,Cr.setBigUint64(j,BigInt(i)),j+=8);continue}W[j++]=251,Cr.setFloat64(j,r),j+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,i=n?r:-r-BigInt(1),o=Number(i);if(o<24)W[j++]=s<<5|o;else if(o<256)W[j++]=s<<5|24,W[j++]=o;else if(o<65536)W[j++]=s<<5|25,W[j++]=o>>8,W[j++]=o&255;else if(o<4294967296)W[j++]=s<<5|26,Cr.setUint32(j,o),j+=4;else if(i<BigInt("18446744073709551616"))W[j++]=s<<5|27,Cr.setBigUint64(j,i),j+=8;else{let a=i.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),u=i,l=0;for(;c.byteLength-++l>=0;)c[c.byteLength-l]=Number(u&BigInt(255)),u>>=BigInt(8);Rh(c.byteLength*2),W[j++]=n?194:195,nv?Tr(2,Buffer.byteLength(c)):Tr(2,c.byteLength),W.set(c,j),j+=c.byteLength}continue}else if(r===null){W[j++]=246;continue}else if(typeof r=="boolean"){W[j++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)e.push(r[n]);Tr(4,r.length);continue}else if(typeof r.byteLength=="number"){Rh(r.length*2),Tr(2,r.length),W.set(r,j),j+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof ve){let s=r.string.indexOf("."),i=s===-1?0:s-r.string.length+1,o=BigInt(r.string.replace(".",""));W[j++]=196,e.push(o),e.push(i),Tr(4,2);continue}if(r[gh])if("tag"in r&&"value"in r){e.push(r.value),Tr(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let i=n[s];e.push(r[i]),e.push(i)}Tr(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var sv,nv,ZL,W,Cr,j,ov=w(()=>{dt();sv=v(He());nu();nv=typeof Buffer<"u",ZL=2048,W=sn(ZL),Cr=new DataView(W.buffer,W.byteOffset,W.byteLength),j=0});var Ch,av=w(()=>{rv();ov();Ch={deserialize(t){return Xb(t),or(0,t.length)},serialize(t){try{return iv(t),Th()}catch(e){throw Th(),e}},resizeEncodingBuffer(t){iu(t)}}});var ou,au,cu=w(()=>{nu();ou=t=>ru({tag:1,value:t.getTime()/1e3}),au=(t,e)=>{let r=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i};if(e.__type!==void 0)return r(e.__type);let n=Object.keys(e).find(s=>s.toLowerCase()==="code");if(n&&e[n]!==void 0)return r(e[n])}});var Ph,uu,Ah,Ih,Oh=w(()=>{ft();be();dt();Ph=v(Ve());av();cu();uu=class extends ot{createSerializer(){let e=new Ah;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Ih;return e.setSerdeContext(this.serdeContext),e}},Ah=class extends ot{value;write(e,r){this.value=this.serialize(e,r)}serialize(e,r){let n=$.of(e);if(r==null)return n.isIdempotencyToken()?(0,ir.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Ph.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?ou(new Date(Number(r)/1e3|0)):ou(r);if(typeof r=="function"||typeof r=="object"){let s=r;if(n.isListSchema()&&Array.isArray(s)){let o=!!n.getMergedTraits().sparse,a=[],c=0;for(let u of s){let l=this.serialize(n.getValueSchema(),u);(l!=null||o)&&(a[c++]=l)}return a}if(s instanceof Date)return ou(s);let i={};if(n.isMapSchema()){let o=!!n.getMergedTraits().sparse;for(let a of Object.keys(s)){let c=this.serialize(n.getValueSchema(),s[a]);(c!=null||o)&&(i[a]=c)}}else if(n.isStructSchema())for(let[o,a]of n.structIterator()){let c=this.serialize(a,s[o]);c!=null&&(i[o]=c)}else if(n.isDocumentSchema())for(let o of Object.keys(s))i[o]=this.serialize(n.getValueSchema(),s[o]);return i}return r}flush(){let e=Ch.serialize(this.value);return this.value=void 0,e}},Ih=class extends ot{read(e,r){let n=Ch.deserialize(r);return this.readValue(e,n)}readValue(e,r){let n=$.of(e);if(n.isTimestampSchema()&&typeof r=="number")return wo(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Ph.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let i=[],o=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let u=this.readValue(o,c);(u!=null||a)&&i.push(u)}return i}let s={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse,o=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(o,r[a]);(c!=null||i)&&(s[a]=c)}}else if(n.isStructSchema())for(let[i,o]of n.structIterator())s[i]=this.readValue(o,r[i]);return s}else return r}}});var cv,lu,uv=w(()=>{ft();be();cv=v(lt());Oh();cu();lu=class extends wr{codec=new uu;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:e}){super({defaultNamespace:e})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);if(Object.assign(s.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Wt(e.input)==="unit")delete s.body,delete s.headers["content-type"];else{s.body||(this.serializer.write(15,{}),s.body=this.serializer.flush());try{s.headers["content-length"]=String(s.body.byteLength)}catch{}}let{service:i,operation:o}=(0,cv.getSmithyContext)(n),a=`/service/${i}/operation/${o}`;return s.path.endsWith("/")?s.path+=a.slice(1):s.path+=a,s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,i){let o=au(n,s)??"Unknown",a=this.options.defaultNamespace;o.includes("#")&&([a]=o.split("#"));let c={$metadata:i,$response:n,$fault:n.statusCode<=500?"client":"server"},u=Le.for(a),l;try{l=u.getSchema(o)}catch{s.Message&&(s.message=s.Message);let C=Le.for("smithy.ts.sdk.synthetic."+a),N=C.getBaseException();if(N){let U=C.getErrorCtor(N);throw Object.assign(new U({name:o}),c,s)}throw Object.assign(new Error(o),c,s)}let p=$.of(l),m=u.getErrorCtor(l),h=s.message??s.Message??"Unknown",y=new m(h),x={};for(let[R,C]of p.structIterator())x[R]=this.deserializer.readValue(C,s[R]);throw Object.assign(y,c,{$fault:p.getMergedTraits().error,message:h},x)}getDefaultContentType(){return"application/cbor"}}});var lv=w(()=>{cu();uv();Oh()});var Ot,ii=w(()=>{be();Ot=class{resolveRestContentType(e,r){let n=r.getMemberSchemas(),s=Object.values(n).find(i=>!!i.getMergedTraits().httpPayload);if(s){let i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(o=>{let{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:l,httpPrefixHeaders:p}=o.getMergedTraits();return!a&&!c&&!u&&!l&&p===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,i,o){let a=r,c=e;e.includes("#")&&([a,c]=e.split("#"));let u={$metadata:i,$response:n,$fault:n.statusCode<500?"client":"server"},l=Le.for(a);try{return{errorSchema:o?.(l,c)??l.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";let m=Le.for("smithy.ts.sdk.synthetic."+a),h=m.getBaseException();if(h){let y=m.getErrorCtor(h)??Error;throw Object.assign(new y({name:c}),u,s)}throw Object.assign(new Error(c),u,s)}}setQueryCompatError(e,r){let n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){let[s,i]=n.split(";"),o=Object.entries(e),a={Code:s,Type:i};Object.assign(e,a);for(let[c,u]of o)a[c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}}});var du,dv=w(()=>{lv();be();ii();du=class extends lu{awsQueryCompatible;mixin=new Ot;constructor({defaultNamespace:e,awsQueryCompatible:r}){super({defaultNamespace:e}),this.awsQueryCompatible=!!r}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),s}async handleError(e,r,n,s,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let o=au(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,s,i),u=$.of(a),l=s.message??s.Message??"Unknown",p=Le.for(a[1]).getErrorCtor(a)??Error,m=new p(l),h={};for(let[y,x]of u.structIterator())h[y]=this.deserializer.readValue(x,s[y]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,h),Object.assign(m,c,{$fault:u.getMergedTraits().error,message:l},h)}}});var fv,pv,hv,mv=w(()=>{fv=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},pv=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},hv=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var et,un=w(()=>{et=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}});function gv(t,e,r){if(r?.source){let n=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||n!==String(e)))return n.includes(".")?new ve(n,"bigDecimal"):BigInt(n)}return e}var yv=w(()=>{dt()});var wv=b(Ev=>{"use strict";var gs=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},ln=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,Nh=()=>{let t=[],e=[],r=!1,n=new Set,s=p=>p.sort((m,h)=>Sv[h.step]-Sv[m.step]||_v[h.priority||"normal"]-_v[m.priority||"normal"]),i=p=>{let m=!1,h=y=>{let x=gs(y.name,y.aliases);if(x.includes(p)){m=!0;for(let R of x)n.delete(R);return!1}return!0};return t=t.filter(h),e=e.filter(h),m},o=p=>{let m=!1,h=y=>{if(y.middleware===p){m=!0;for(let x of gs(y.name,y.aliases))n.delete(x);return!1}return!0};return t=t.filter(h),e=e.filter(h),m},a=p=>(t.forEach(m=>{p.add(m.middleware,{...m})}),e.forEach(m=>{p.addRelativeTo(m.middleware,{...m})}),p.identifyOnResolve?.(l.identifyOnResolve()),p),c=p=>{let m=[];return p.before.forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...c(h))}),m.push(p),p.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?m.push(h):m.push(...c(h))}),m},u=(p=!1)=>{let m=[],h=[],y={};return t.forEach(R=>{let C={...R,before:[],after:[]};for(let N of gs(C.name,C.aliases))y[N]=C;m.push(C)}),e.forEach(R=>{let C={...R,before:[],after:[]};for(let N of gs(C.name,C.aliases))y[N]=C;h.push(C)}),h.forEach(R=>{if(R.toMiddleware){let C=y[R.toMiddleware];if(C===void 0){if(p)return;throw new Error(`${R.toMiddleware} is not found when adding ${ln(R.name,R.aliases)} middleware ${R.relation} ${R.toMiddleware}`)}R.relation==="after"&&C.after.push(R),R.relation==="before"&&C.before.push(R)}}),s(m).map(c).reduce((R,C)=>(R.push(...C),R),[])},l={add:(p,m={})=>{let{name:h,override:y,aliases:x}=m,R={step:"initialize",priority:"normal",middleware:p,...m},C=gs(h,x);if(C.length>0){if(C.some(N=>n.has(N))){if(!y)throw new Error(`Duplicate middleware name '${ln(h,x)}'`);for(let N of C){let U=t.findIndex(J=>J.name===N||J.aliases?.some(ge=>ge===N));if(U===-1)continue;let V=t[U];if(V.step!==R.step||R.priority!==V.priority)throw new Error(`"${ln(V.name,V.aliases)}" middleware with ${V.priority} priority in ${V.step} step cannot be overridden by "${ln(h,x)}" middleware with ${R.priority} priority in ${R.step} step.`);t.splice(U,1)}}for(let N of C)n.add(N)}t.push(R)},addRelativeTo:(p,m)=>{let{name:h,override:y,aliases:x}=m,R={middleware:p,...m},C=gs(h,x);if(C.length>0){if(C.some(N=>n.has(N))){if(!y)throw new Error(`Duplicate middleware name '${ln(h,x)}'`);for(let N of C){let U=e.findIndex(J=>J.name===N||J.aliases?.some(ge=>ge===N));if(U===-1)continue;let V=e[U];if(V.toMiddleware!==R.toMiddleware||V.relation!==R.relation)throw new Error(`"${ln(V.name,V.aliases)}" middleware ${V.relation} "${V.toMiddleware}" middleware cannot be overridden by "${ln(h,x)}" middleware ${R.relation} "${R.toMiddleware}" middleware.`);e.splice(U,1)}}for(let N of C)n.add(N)}e.push(R)},clone:()=>a(Nh()),use:p=>{p.applyToStack(l)},remove:p=>typeof p=="string"?i(p):o(p),removeByTag:p=>{let m=!1,h=y=>{let{tags:x,name:R,aliases:C}=y;if(x&&x.includes(p)){let N=gs(R,C);for(let U of N)n.delete(U);return m=!0,!1}return!0};return t=t.filter(h),e=e.filter(h),m},concat:p=>{let m=a(Nh());return m.use(p),m.identifyOnResolve(r||m.identifyOnResolve()||(p.identifyOnResolve?.()??!1)),m},applyToStack:a,identify:()=>u(!0).map(p=>{let m=p.step??p.relation+" "+p.toMiddleware;return ln(p.name,p.aliases)+" - "+m}),identifyOnResolve(p){return typeof p=="boolean"&&(r=p),r},resolve:(p,m)=>{for(let h of u().map(y=>y.middleware).reverse())p=h(p,m);return r&&console.log(l.identify()),p}};return l},Sv={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},_v={high:3,normal:2,low:1};Ev.constructStack=Nh});var se=b(pe=>{"use strict";var xv=wv(),jh=(ft(),ue(Ew)),Dh=Kr(),XL=(be(),ue(rp)),bv=(dt(),ue(iw)),Mh=class{config;middlewareStack=xv.constructStack();initConfig;handlers;constructor(e){this.config=e}send(e,r,n){let s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0,a;if(o){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},kh="***SensitiveInformation***";function Lh(t,e){if(e==null)return e;let r=XL.NormalizedSchema.of(t);if(r.getMergedTraits().sensitive)return kh;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return kh}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return kh}else if(r.isStructSchema()&&typeof e=="object"){let n=e,s={};for(let[i,o]of r.structIterator())n[i]!=null&&(s[i]=Lh(o,n[i]));return s}return e}var fu=class{middlewareStack=xv.constructStack();schema;static classBuilder(){return new Fh}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:l,CommandCtor:p}){for(let R of s.bind(this)(p,e,r,n))this.middlewareStack.use(R);let m=e.concat(this.middlewareStack),{logger:h}=r,y={logger:h,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Dh.SMITHY_CONTEXT_KEY]:{commandInstance:this,...u},...l},{requestHandler:x}=r;return m.resolve(R=>x.handle(R.request,n||{}),y)}},Fh=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,r;return r=class extends fu{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.input=n??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,s,i){let o=e._operationSchema,a=o?.[4]??o?.input,c=o?.[5]??o?.output;return this.resolveMiddlewareWithContext(n,s,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(o?Lh.bind(null,a):u=>u),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(o?Lh.bind(null,c):u=>u),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}},eF="***SensitiveInformation***",tF=(t,e)=>{for(let r of Object.keys(t)){let n=t[r],s=async function(o,a,c){let u=new n(o);if(typeof a=="function")this.send(u,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(u,a||{},c)}else return this.send(u,a)},i=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[i]=s}},qh=class t extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;let r=e;return t.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;let r=e;return this===t?t.isInstance(e):t.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}},Rv=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},Tv=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let s=nF(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:e?.code||e?.Code||n||i||"UnknownError",$fault:"client",$metadata:s});throw Rv(o,e)},rF=t=>({output:e,parsedBody:r,errorCode:n})=>{Tv({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},nF=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),sF=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},vv=!1,iF=t=>{t&&!vv&&parseInt(t.substring(1,t.indexOf(".")))<16&&(vv=!0)},oF=t=>{let e=[];for(let r in Dh.AlgorithmId){let n=Dh.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},aF=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},cF=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),uF=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},Cv=t=>Object.assign(oF(t),cF(t)),lF=Cv,dF=t=>Object.assign(aF(t),uF(t)),fF=t=>Array.isArray(t)?t:[t],Av=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=Av(t[r]));return t},pF=t=>t!=null,Uh=class{trace(){}debug(){}info(){}warn(){}error(){}};function Iv(t,e,r){let n,s,i;if(typeof e>"u"&&typeof r>"u")n={},i=t;else{if(n=t,typeof e=="function")return s=e,i=r,gF(n,s,i);i=e}for(let o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}Pv(n,null,i,o)}return n}var hF=t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},mF=(t,e)=>{let r={};for(let n in e)Pv(r,t,e,n);return r},gF=(t,e,r)=>Iv(t,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[e,i()]:n[s]=[e,i],n),{})),Pv=(t,e,r,n)=>{if(e!==null){let o=r[n];typeof o=="function"&&(o=[,o]);let[a=yF,c=SF,u=n]=o;(typeof a=="function"&&a(e[u])||typeof a!="function"&&a)&&(t[n]=c(e[u]));return}let[s,i]=r[n];if(typeof i=="function"){let o,a=s===void 0&&(o=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=o:c&&(t[n]=i())}else{let o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(t[n]=i)}},yF=t=>t!=null,SF=t=>t,_F=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},EF=t=>t.toISOString().replace(".000Z","Z"),$h=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map($h);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=$h(t[r]));return e}return t};Object.defineProperty(pe,"collectBody",{enumerable:!0,get:function(){return jh.collectBody}});Object.defineProperty(pe,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return jh.extendedEncodeURIComponent}});Object.defineProperty(pe,"resolvedPath",{enumerable:!0,get:function(){return jh.resolvedPath}});pe.Client=Mh;pe.Command=fu;pe.NoOpLogger=Uh;pe.SENSITIVE_STRING=eF;pe.ServiceException=qh;pe._json=$h;pe.convertMap=hF;pe.createAggregatedClient=tF;pe.decorateServiceException=Rv;pe.emitWarningIfUnsupportedVersion=iF;pe.getArrayIfSingleItem=fF;pe.getDefaultClientConfiguration=lF;pe.getDefaultExtensionConfiguration=Cv;pe.getValueFromTextNode=Av;pe.isSerializableHeaderValue=pF;pe.loadConfigsForDefaultMode=sF;pe.map=Iv;pe.resolveDefaultRuntimeConfig=dF;pe.serializeDateTime=EF;pe.serializeFloat=_F;pe.take=mF;pe.throwDefaultError=Tv;pe.withBaseException=rF;Object.keys(bv).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(pe,t)&&Object.defineProperty(pe,t,{enumerable:!0,get:function(){return bv[t]}})})});var Ov,Nv,pu,Bh=w(()=>{Ov=v(se()),Nv=v(He()),pu=(t,e)=>(0,Ov.collectBody)(t,e).then(r=>(e?.utf8Encoder??Nv.toUtf8)(r))});var ys,hu,dn,No=w(()=>{Bh();ys=(t,e)=>pu(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),hu=async(t,e)=>{let r=await ys(t,e);return r.message=r.message??r.Message,r},dn=(t,e)=>{let r=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e&&typeof e=="object"){let i=r(e,"code");if(i&&e[i]!==void 0)return n(e[i]);if(e.__type!==void 0)return n(e.__type)}}});var kv,oi,Hh=w(()=>{ft();be();dt();kv=v(Ve());un();yv();No();oi=class extends et{settings;constructor(e){super(),this.settings=e}async read(e,r){return this._read(e,typeof r=="string"?JSON.parse(r,gv):await ys(r,this.serdeContext))}readObject(e,r){return this._read(e,r)}_read(e,r){let n=r!==null&&typeof r=="object",s=$.of(e);if(s.isListSchema()&&Array.isArray(r)){let o=s.getValueSchema(),a=[],c=!!s.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._read(o,u));return a}else if(s.isMapSchema()&&n){let o=s.getValueSchema(),a={},c=!!s.getMergedTraits().sparse;for(let[u,l]of Object.entries(r))(c||l!=null)&&(a[u]=this._read(o,l));return a}else if(s.isStructSchema()&&n){let o={};for(let[a,c]of s.structIterator()){let u=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,l=this._read(c,r[u]);l!=null&&(o[a]=l)}return o}if(s.isBlobSchema()&&typeof r=="string")return(0,kv.fromBase64)(r);let i=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof r=="string"&&i&&(i==="application/json"||i.endsWith("+json")))return it.from(r);if(s.isTimestampSchema()&&r!=null)switch(vt(s,this.settings)){case 5:return pp(r);case 6:return hp(r);case 7:return mp(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(s.isBigDecimalSchema()&&r!=null){if(r instanceof ve)return r;let o=r;return o.type==="bigDecimal"&&"string"in o?new ve(o.string,o.type):new ve(String(r),"bigDecimal")}if(s.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(s.isDocumentSchema())if(n){let o=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof ve?o[a]=c:o[a]=this._read(s,c);return o}else return structuredClone(r);return r}}});var Dv,mu,Mv=w(()=>{dt();Dv="\u039D",mu=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof ve){let n=`${Dv+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${Dv+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(let[r,n]of this.values)e=e.replace(r,n);return e}}});var Lv,ai,Vh=w(()=>{ft();be();dt();Lv=v(Ve());un();Mv();ai=class extends et{settings;buffer;rootSchema;constructor(e){super(),this.settings=e}write(e,r){this.rootSchema=$.of(e),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(e,r){this.write(e,r),typeof this.buffer=="object"&&(this.buffer.__type=$.of(e).getName(!0))}flush(){let{rootSchema:e}=this;if(this.rootSchema=void 0,e?.isStructSchema()||e?.isDocumentSchema()){let r=new mu;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(e,r,n){let s=r!==null&&typeof r=="object",i=$.of(e);if(i.isListSchema()&&Array.isArray(r)){let o=i.getValueSchema(),a=[],c=!!i.getMergedTraits().sparse;for(let u of r)(c||u!=null)&&a.push(this._write(o,u));return a}else if(i.isMapSchema()&&s){let o=i.getValueSchema(),a={},c=!!i.getMergedTraits().sparse;for(let[u,l]of Object.entries(r))(c||l!=null)&&(a[u]=this._write(o,l));return a}else if(i.isStructSchema()&&s){let o={};for(let[a,c]of i.structIterator()){let u=this.settings.jsonName?c.getMergedTraits().jsonName??a:a,l=this._write(c,r[a],i);l!==void 0&&(o[u]=l)}return o}if(!(r===null&&n?.isStructSchema())){if(i.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||i.isDocumentSchema()&&r instanceof Uint8Array)return i===this.rootSchema?r:(this.serdeContext?.base64Encoder??Lv.toBase64)(r);if((i.isTimestampSchema()||i.isDocumentSchema())&&r instanceof Date)switch(vt(i,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return So(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(i.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(i.isStringSchema()){if(typeof r>"u"&&i.isIdempotencyToken())return(0,ir.v4)();let o=i.getMergedTraits().mediaType;if(r!=null&&o&&(o==="application/json"||o.endsWith("+json")))return it.from(r)}if(i.isDocumentSchema())if(s){let o=Array.isArray(r)?[]:{};for(let[a,c]of Object.entries(r))c instanceof ve?o[a]=c:o[a]=this._write(i,c);return o}else return structuredClone(r);return r}}}});var fn,gu=w(()=>{un();Hh();Vh();fn=class extends et{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new ai(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new oi(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var pn,yu=w(()=>{ft();be();ii();gu();No();pn=class extends wr{serializer;deserializer;serviceTarget;codec;mixin=new Ot;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e}),this.serviceTarget=r,this.codec=new fn({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);return s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(s.headers["x-amzn-query-mode"]="true"),(Wt(e.input)==="unit"||!s.body)&&(s.body="{}"),s}getPayloadCodec(){return this.codec}async handleError(e,r,n,s,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(s,n);let o=dn(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,s,i),u=$.of(a),l=s.message??s.Message??"Unknown",p=Le.for(a[1]).getErrorCtor(a)??Error,m=new p(l),h={};for(let[y,x]of u.structIterator()){let R=x.getMergedTraits().jsonName??y;h[y]=this.codec.createDeserializer().readObject(x,s[R])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(s,h),Object.assign(m,c,{$fault:u.getMergedTraits().error,message:l},h)}}});var Su,Fv=w(()=>{yu();Su=class extends pn{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var _u,qv=w(()=>{yu();_u=class extends pn{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Eu,Uv=w(()=>{ft();be();ii();gu();No();Eu=class extends os{serializer;deserializer;codec;mixin=new Ot;constructor({defaultNamespace:e}){super({defaultNamespace:e});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new fn(r),this.serializer=new us(this.codec.createSerializer(),r),this.deserializer=new cs(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),i=$.of(e.input);if(!s.headers["content-type"]){let o=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);o&&(s.headers["content-type"]=o)}return s.headers["content-type"]&&!s.body&&(s.body="{}"),s}async handleError(e,r,n,s,i){let o=dn(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,s,i),u=$.of(a),l=s.message??s.Message??"Unknown",p=Le.for(a[1]).getErrorCtor(a)??Error,m=new p(l);await this.deserializeHttpMessage(a,r,n,s);let h={};for(let[y,x]of u.structIterator()){let R=x.getMergedTraits().jsonName??y;h[y]=this.codec.createDeserializer().readObject(x,s[R])}throw Object.assign(m,c,{$fault:u.getMergedTraits().error,message:l},h)}getDefaultContentType(){return"application/json"}}});var $v,jv,Bv=w(()=>{$v=v(se()),jv=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,$v.expectUnion)(t)}});var Vv=b((pJ,Hv)=>{(()=>{"use strict";var t={d:(d,f)=>{for(var g in f)t.o(f,g)&&!t.o(d,g)&&Object.defineProperty(d,g,{enumerable:!0,get:f[g]})},o:(d,f)=>Object.prototype.hasOwnProperty.call(d,f),r:d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{XMLBuilder:()=>jr,XMLParser:()=>PN,XMLValidator:()=>qN});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(d,f){let g=[],E=f.exec(d);for(;E;){let S=[];S.startIndex=f.lastIndex-E[0].length;let _=E.length;for(let A=0;A<_;A++)S.push(E[A]);g.push(S),E=f.exec(d)}return g}let i=function(d){return n.exec(d)!=null},o={allowBooleanAttributes:!1,unpairedTags:[]};function a(d,f){f=Object.assign({},o,f);let g=[],E=!1,S=!1;d[0]==="\uFEFF"&&(d=d.substr(1));for(let _=0;_<d.length;_++)if(d[_]==="<"&&d[_+1]==="?"){if(_+=2,_=u(d,_),_.err)return _}else{if(d[_]!=="<"){if(c(d[_]))continue;return C("InvalidChar","char '"+d[_]+"' is not expected.",U(d,_))}{let A=_;if(_++,d[_]==="!"){_=l(d,_);continue}{let T=!1;d[_]==="/"&&(T=!0,_++);let P="";for(;_<d.length&&d[_]!==">"&&d[_]!==" "&&d[_]!=="	"&&d[_]!==`
`&&d[_]!=="\r";_++)P+=d[_];if(P=P.trim(),P[P.length-1]==="/"&&(P=P.substring(0,P.length-1),_--),!i(P)){let B;return B=P.trim().length===0?"Invalid space after '<'.":"Tag '"+P+"' is an invalid name.",C("InvalidTag",B,U(d,_))}let M=h(d,_);if(M===!1)return C("InvalidAttr","Attributes for '"+P+"' have open quote.",U(d,_));let Q=M.value;if(_=M.index,Q[Q.length-1]==="/"){let B=_-Q.length;Q=Q.substring(0,Q.length-1);let ae=x(Q,f);if(ae!==!0)return C(ae.err.code,ae.err.msg,U(d,B+ae.err.line));E=!0}else if(T){if(!M.tagClosed)return C("InvalidTag","Closing tag '"+P+"' doesn't have proper closing.",U(d,_));if(Q.trim().length>0)return C("InvalidTag","Closing tag '"+P+"' can't have attributes or invalid starting.",U(d,A));if(g.length===0)return C("InvalidTag","Closing tag '"+P+"' has not been opened.",U(d,A));{let B=g.pop();if(P!==B.tagName){let ae=U(d,B.tagStartPos);return C("InvalidTag","Expected closing tag '"+B.tagName+"' (opened in line "+ae.line+", col "+ae.col+") instead of closing tag '"+P+"'.",U(d,A))}g.length==0&&(S=!0)}}else{let B=x(Q,f);if(B!==!0)return C(B.err.code,B.err.msg,U(d,_-Q.length+B.err.line));if(S===!0)return C("InvalidXml","Multiple possible root nodes found.",U(d,_));f.unpairedTags.indexOf(P)!==-1||g.push({tagName:P,tagStartPos:A}),E=!0}for(_++;_<d.length;_++)if(d[_]==="<"){if(d[_+1]==="!"){_++,_=l(d,_);continue}if(d[_+1]!=="?")break;if(_=u(d,++_),_.err)return _}else if(d[_]==="&"){let B=R(d,_);if(B==-1)return C("InvalidChar","char '&' is not expected.",U(d,_));_=B}else if(S===!0&&!c(d[_]))return C("InvalidXml","Extra text at the end",U(d,_));d[_]==="<"&&_--}}}return E?g.length==1?C("InvalidTag","Unclosed tag '"+g[0].tagName+"'.",U(d,g[0].tagStartPos)):!(g.length>0)||C("InvalidXml","Invalid '"+JSON.stringify(g.map((_=>_.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):C("InvalidXml","Start tag expected.",1)}function c(d){return d===" "||d==="	"||d===`
`||d==="\r"}function u(d,f){let g=f;for(;f<d.length;f++)if(!(d[f]!="?"&&d[f]!=" ")){let E=d.substr(g,f-g);if(f>5&&E==="xml")return C("InvalidXml","XML declaration allowed only at the start of the document.",U(d,f));if(d[f]=="?"&&d[f+1]==">"){f++;break}}return f}function l(d,f){if(d.length>f+5&&d[f+1]==="-"&&d[f+2]==="-"){for(f+=3;f<d.length;f++)if(d[f]==="-"&&d[f+1]==="-"&&d[f+2]===">"){f+=2;break}}else if(d.length>f+8&&d[f+1]==="D"&&d[f+2]==="O"&&d[f+3]==="C"&&d[f+4]==="T"&&d[f+5]==="Y"&&d[f+6]==="P"&&d[f+7]==="E"){let g=1;for(f+=8;f<d.length;f++)if(d[f]==="<")g++;else if(d[f]===">"&&(g--,g===0))break}else if(d.length>f+9&&d[f+1]==="["&&d[f+2]==="C"&&d[f+3]==="D"&&d[f+4]==="A"&&d[f+5]==="T"&&d[f+6]==="A"&&d[f+7]==="["){for(f+=8;f<d.length;f++)if(d[f]==="]"&&d[f+1]==="]"&&d[f+2]===">"){f+=2;break}}return f}let p='"',m="'";function h(d,f){let g="",E="",S=!1;for(;f<d.length;f++){if(d[f]===p||d[f]===m)E===""?E=d[f]:E!==d[f]||(E="");else if(d[f]===">"&&E===""){S=!0;break}g+=d[f]}return E===""&&{value:g,index:f,tagClosed:S}}let y=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function x(d,f){let g=s(d,y),E={};for(let S=0;S<g.length;S++){if(g[S][1].length===0)return C("InvalidAttr","Attribute '"+g[S][2]+"' has no space in starting.",V(g[S]));if(g[S][3]!==void 0&&g[S][4]===void 0)return C("InvalidAttr","Attribute '"+g[S][2]+"' is without value.",V(g[S]));if(g[S][3]===void 0&&!f.allowBooleanAttributes)return C("InvalidAttr","boolean attribute '"+g[S][2]+"' is not allowed.",V(g[S]));let _=g[S][2];if(!N(_))return C("InvalidAttr","Attribute '"+_+"' is an invalid name.",V(g[S]));if(E.hasOwnProperty(_))return C("InvalidAttr","Attribute '"+_+"' is repeated.",V(g[S]));E[_]=1}return!0}function R(d,f){if(d[++f]===";")return-1;if(d[f]==="#")return(function(E,S){let _=/\d/;for(E[S]==="x"&&(S++,_=/[\da-fA-F]/);S<E.length;S++){if(E[S]===";")return S;if(!E[S].match(_))break}return-1})(d,++f);let g=0;for(;f<d.length;f++,g++)if(!(d[f].match(/\w/)&&g<20)){if(d[f]===";")break;return-1}return f}function C(d,f,g){return{err:{code:d,msg:f,line:g.line||g,col:g.col}}}function N(d){return i(d)}function U(d,f){let g=d.substring(0,f).split(/\r?\n/);return{line:g.length,col:g[g.length-1].length+1}}function V(d){return d.startIndex+d[1].length}let J={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(d,f){return f},attributeValueProcessor:function(d,f){return f},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(d,f,g){return d},captureMetaData:!1},ge;ge=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Pe{constructor(f){this.tagname=f,this.child=[],this[":@"]={}}add(f,g){f==="__proto__"&&(f="#__proto__"),this.child.push({[f]:g})}addChild(f,g){f.tagname==="__proto__"&&(f.tagname="#__proto__"),f[":@"]&&Object.keys(f[":@"]).length>0?this.child.push({[f.tagname]:f.child,":@":f[":@"]}):this.child.push({[f.tagname]:f.child}),g!==void 0&&(this.child[this.child.length-1][ge]={startIndex:g})}static getMetaDataSymbol(){return ge}}function re(d,f){let g={};if(d[f+3]!=="O"||d[f+4]!=="C"||d[f+5]!=="T"||d[f+6]!=="Y"||d[f+7]!=="P"||d[f+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{f+=9;let E=1,S=!1,_=!1,A="";for(;f<d.length;f++)if(d[f]!=="<"||_)if(d[f]===">"){if(_?d[f-1]==="-"&&d[f-2]==="-"&&(_=!1,E--):E--,E===0)break}else d[f]==="["?S=!0:A+=d[f];else{if(S&&Ln(d,"!ENTITY",f)){let T,P;f+=7,[T,P,f]=he(d,f+1),P.indexOf("&")===-1&&(g[T]={regx:RegExp(`&${T};`,"g"),val:P})}else if(S&&Ln(d,"!ELEMENT",f)){f+=8;let{index:T}=uN(d,f+1);f=T}else if(S&&Ln(d,"!ATTLIST",f))f+=8;else if(S&&Ln(d,"!NOTATION",f)){f+=9;let{index:T}=Oe(d,f+1);f=T}else{if(!Ln(d,"!--",f))throw new Error("Invalid DOCTYPE");_=!0}E++,A=""}if(E!==0)throw new Error("Unclosed DOCTYPE")}return{entities:g,i:f}}let oe=(d,f)=>{for(;f<d.length&&/\s/.test(d[f]);)f++;return f};function he(d,f){f=oe(d,f);let g="";for(;f<d.length&&!/\s/.test(d[f])&&d[f]!=='"'&&d[f]!=="'";)g+=d[f],f++;if(tf(g),f=oe(d,f),d.substring(f,f+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(d[f]==="%")throw new Error("Parameter entities are not supported");let E="";return[f,E]=Ps(d,f,"entity"),[g,E,--f]}function Oe(d,f){f=oe(d,f);let g="";for(;f<d.length&&!/\s/.test(d[f]);)g+=d[f],f++;tf(g),f=oe(d,f);let E=d.substring(f,f+6).toUpperCase();if(E!=="SYSTEM"&&E!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${E}"`);f+=E.length,f=oe(d,f);let S=null,_=null;if(E==="PUBLIC")[f,S]=Ps(d,f,"publicIdentifier"),d[f=oe(d,f)]!=='"'&&d[f]!=="'"||([f,_]=Ps(d,f,"systemIdentifier"));else if(E==="SYSTEM"&&([f,_]=Ps(d,f,"systemIdentifier"),!_))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:g,publicIdentifier:S,systemIdentifier:_,index:--f}}function Ps(d,f,g){let E="",S=d[f];if(S!=='"'&&S!=="'")throw new Error(`Expected quoted string, found "${S}"`);for(f++;f<d.length&&d[f]!==S;)E+=d[f],f++;if(d[f]!==S)throw new Error(`Unterminated ${g} value`);return[++f,E]}function uN(d,f){f=oe(d,f);let g="";for(;f<d.length&&!/\s/.test(d[f]);)g+=d[f],f++;if(!tf(g))throw new Error(`Invalid element name: "${g}"`);let E="";if(d[f=oe(d,f)]==="E"&&Ln(d,"MPTY",f))f+=4;else if(d[f]==="A"&&Ln(d,"NY",f))f+=2;else{if(d[f]!=="(")throw new Error(`Invalid Element Expression, found "${d[f]}"`);for(f++;f<d.length&&d[f]!==")";)E+=d[f],f++;if(d[f]!==")")throw new Error("Unterminated content model")}return{elementName:g,contentModel:E.trim(),index:f}}function Ln(d,f,g){for(let E=0;E<f.length;E++)if(f[E]!==d[g+E+1])return!1;return!0}function tf(d){if(i(d))return d;throw new Error(`Invalid entity name ${d}`)}let lN=/^[-+]?0x[a-fA-F0-9]+$/,dN=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,fN={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},pN=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Xy(d){return typeof d=="function"?d:Array.isArray(d)?f=>{for(let g of d)if(typeof g=="string"&&f===g||g instanceof RegExp&&g.test(f))return!0}:()=>!1}class hN{constructor(f){this.options=f,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(g,E)=>String.fromCodePoint(Number.parseInt(E,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(g,E)=>String.fromCodePoint(Number.parseInt(E,16))}},this.addExternalEntities=mN,this.parseXml=EN,this.parseTextData=gN,this.resolveNameSpace=yN,this.buildAttributesMap=_N,this.isItStopNode=xN,this.replaceEntitiesValue=bN,this.readStopNodeData=RN,this.saveTextToParentTag=vN,this.addChild=wN,this.ignoreAttributesFn=Xy(this.options.ignoreAttributes)}}function mN(d){let f=Object.keys(d);for(let g=0;g<f.length;g++){let E=f[g];this.lastEntities[E]={regex:new RegExp("&"+E+";","g"),val:d[E]}}}function gN(d,f,g,E,S,_,A){if(d!==void 0&&(this.options.trimValues&&!E&&(d=d.trim()),d.length>0)){A||(d=this.replaceEntitiesValue(d));let T=this.options.tagValueProcessor(f,d,g,S,_);return T==null?d:typeof T!=typeof d||T!==d?T:this.options.trimValues||d.trim()===d?eS(d,this.options.parseTagValue,this.options.numberParseOptions):d}}function yN(d){if(this.options.removeNSPrefix){let f=d.split(":"),g=d.charAt(0)==="/"?"/":"";if(f[0]==="xmlns")return"";f.length===2&&(d=g+f[1])}return d}let SN=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function _N(d,f,g){if(this.options.ignoreAttributes!==!0&&typeof d=="string"){let E=s(d,SN),S=E.length,_={};for(let A=0;A<S;A++){let T=this.resolveNameSpace(E[A][1]);if(this.ignoreAttributesFn(T,f))continue;let P=E[A][4],M=this.options.attributeNamePrefix+T;if(T.length)if(this.options.transformAttributeName&&(M=this.options.transformAttributeName(M)),M==="__proto__"&&(M="#__proto__"),P!==void 0){this.options.trimValues&&(P=P.trim()),P=this.replaceEntitiesValue(P);let Q=this.options.attributeValueProcessor(T,P,f);_[M]=Q==null?P:typeof Q!=typeof P||Q!==P?Q:eS(P,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(_[M]=!0)}if(!Object.keys(_).length)return;if(this.options.attributesGroupName){let A={};return A[this.options.attributesGroupName]=_,A}return _}}let EN=function(d){d=d.replace(/\r\n?/g,`
`);let f=new Pe("!xml"),g=f,E="",S="";for(let _=0;_<d.length;_++)if(d[_]==="<")if(d[_+1]==="/"){let A=Fn(d,">",_,"Closing Tag is not closed."),T=d.substring(_+2,A).trim();if(this.options.removeNSPrefix){let Q=T.indexOf(":");Q!==-1&&(T=T.substr(Q+1))}this.options.transformTagName&&(T=this.options.transformTagName(T)),g&&(E=this.saveTextToParentTag(E,g,S));let P=S.substring(S.lastIndexOf(".")+1);if(T&&this.options.unpairedTags.indexOf(T)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${T}>`);let M=0;P&&this.options.unpairedTags.indexOf(P)!==-1?(M=S.lastIndexOf(".",S.lastIndexOf(".")-1),this.tagsNodeStack.pop()):M=S.lastIndexOf("."),S=S.substring(0,M),g=this.tagsNodeStack.pop(),E="",_=A}else if(d[_+1]==="?"){let A=rf(d,_,!1,"?>");if(!A)throw new Error("Pi Tag is not closed.");if(E=this.saveTextToParentTag(E,g,S),!(this.options.ignoreDeclaration&&A.tagName==="?xml"||this.options.ignorePiTags)){let T=new Pe(A.tagName);T.add(this.options.textNodeName,""),A.tagName!==A.tagExp&&A.attrExpPresent&&(T[":@"]=this.buildAttributesMap(A.tagExp,S,A.tagName)),this.addChild(g,T,S,_)}_=A.closeIndex+1}else if(d.substr(_+1,3)==="!--"){let A=Fn(d,"-->",_+4,"Comment is not closed.");if(this.options.commentPropName){let T=d.substring(_+4,A-2);E=this.saveTextToParentTag(E,g,S),g.add(this.options.commentPropName,[{[this.options.textNodeName]:T}])}_=A}else if(d.substr(_+1,2)==="!D"){let A=re(d,_);this.docTypeEntities=A.entities,_=A.i}else if(d.substr(_+1,2)==="!["){let A=Fn(d,"]]>",_,"CDATA is not closed.")-2,T=d.substring(_+9,A);E=this.saveTextToParentTag(E,g,S);let P=this.parseTextData(T,g.tagname,S,!0,!1,!0,!0);P==null&&(P=""),this.options.cdataPropName?g.add(this.options.cdataPropName,[{[this.options.textNodeName]:T}]):g.add(this.options.textNodeName,P),_=A+2}else{let A=rf(d,_,this.options.removeNSPrefix),T=A.tagName,P=A.rawTagName,M=A.tagExp,Q=A.attrExpPresent,B=A.closeIndex;this.options.transformTagName&&(T=this.options.transformTagName(T)),g&&E&&g.tagname!=="!xml"&&(E=this.saveTextToParentTag(E,g,S,!1));let ae=g;ae&&this.options.unpairedTags.indexOf(ae.tagname)!==-1&&(g=this.tagsNodeStack.pop(),S=S.substring(0,S.lastIndexOf("."))),T!==f.tagname&&(S+=S?"."+T:T);let fe=_;if(this.isItStopNode(this.options.stopNodes,S,T)){let ce="";if(M.length>0&&M.lastIndexOf("/")===M.length-1)T[T.length-1]==="/"?(T=T.substr(0,T.length-1),S=S.substr(0,S.length-1),M=T):M=M.substr(0,M.length-1),_=A.closeIndex;else if(this.options.unpairedTags.indexOf(T)!==-1)_=A.closeIndex;else{let Zt=this.readStopNodeData(d,P,B+1);if(!Zt)throw new Error(`Unexpected end of ${P}`);_=Zt.i,ce=Zt.tagContent}let De=new Pe(T);T!==M&&Q&&(De[":@"]=this.buildAttributesMap(M,S,T)),ce&&(ce=this.parseTextData(ce,T,S,!0,Q,!0,!0)),S=S.substr(0,S.lastIndexOf(".")),De.add(this.options.textNodeName,ce),this.addChild(g,De,S,fe)}else{if(M.length>0&&M.lastIndexOf("/")===M.length-1){T[T.length-1]==="/"?(T=T.substr(0,T.length-1),S=S.substr(0,S.length-1),M=T):M=M.substr(0,M.length-1),this.options.transformTagName&&(T=this.options.transformTagName(T));let ce=new Pe(T);T!==M&&Q&&(ce[":@"]=this.buildAttributesMap(M,S,T)),this.addChild(g,ce,S,fe),S=S.substr(0,S.lastIndexOf("."))}else{let ce=new Pe(T);this.tagsNodeStack.push(g),T!==M&&Q&&(ce[":@"]=this.buildAttributesMap(M,S,T)),this.addChild(g,ce,S,fe),g=ce}E="",_=B}}else E+=d[_];return f.child};function wN(d,f,g,E){this.options.captureMetaData||(E=void 0);let S=this.options.updateTag(f.tagname,g,f[":@"]);S===!1||(typeof S=="string"&&(f.tagname=S),d.addChild(f,E))}let bN=function(d){if(this.options.processEntities){for(let f in this.docTypeEntities){let g=this.docTypeEntities[f];d=d.replace(g.regx,g.val)}for(let f in this.lastEntities){let g=this.lastEntities[f];d=d.replace(g.regex,g.val)}if(this.options.htmlEntities)for(let f in this.htmlEntities){let g=this.htmlEntities[f];d=d.replace(g.regex,g.val)}d=d.replace(this.ampEntity.regex,this.ampEntity.val)}return d};function vN(d,f,g,E){return d&&(E===void 0&&(E=f.child.length===0),(d=this.parseTextData(d,f.tagname,g,!1,!!f[":@"]&&Object.keys(f[":@"]).length!==0,E))!==void 0&&d!==""&&f.add(this.options.textNodeName,d),d=""),d}function xN(d,f,g){let E="*."+g;for(let S in d){let _=d[S];if(E===_||f===_)return!0}return!1}function Fn(d,f,g,E){let S=d.indexOf(f,g);if(S===-1)throw new Error(E);return S+f.length-1}function rf(d,f,g,E=">"){let S=(function(B,ae,fe=">"){let ce,De="";for(let Zt=ae;Zt<B.length;Zt++){let Br=B[Zt];if(ce)Br===ce&&(ce="");else if(Br==='"'||Br==="'")ce=Br;else if(Br===fe[0]){if(!fe[1])return{data:De,index:Zt};if(B[Zt+1]===fe[1])return{data:De,index:Zt}}else Br==="	"&&(Br=" ");De+=Br}})(d,f+1,E);if(!S)return;let _=S.data,A=S.index,T=_.search(/\s/),P=_,M=!0;T!==-1&&(P=_.substring(0,T),_=_.substring(T+1).trimStart());let Q=P;if(g){let B=P.indexOf(":");B!==-1&&(P=P.substr(B+1),M=P!==S.data.substr(B+1))}return{tagName:P,tagExp:_,closeIndex:A,attrExpPresent:M,rawTagName:Q}}function RN(d,f,g){let E=g,S=1;for(;g<d.length;g++)if(d[g]==="<")if(d[g+1]==="/"){let _=Fn(d,">",g,`${f} is not closed`);if(d.substring(g+2,_).trim()===f&&(S--,S===0))return{tagContent:d.substring(E,g),i:_};g=_}else if(d[g+1]==="?")g=Fn(d,"?>",g+1,"StopNode is not closed.");else if(d.substr(g+1,3)==="!--")g=Fn(d,"-->",g+3,"StopNode is not closed.");else if(d.substr(g+1,2)==="![")g=Fn(d,"]]>",g,"StopNode is not closed.")-2;else{let _=rf(d,g,">");_&&((_&&_.tagName)===f&&_.tagExp[_.tagExp.length-1]!=="/"&&S++,g=_.closeIndex)}}function eS(d,f,g){if(f&&typeof d=="string"){let E=d.trim();return E==="true"||E!=="false"&&(function(S,_={}){if(_=Object.assign({},fN,_),!S||typeof S!="string")return S;let A=S.trim();if(_.skipLike!==void 0&&_.skipLike.test(A))return S;if(S==="0")return 0;if(_.hex&&lN.test(A))return(function(P){if(parseInt)return parseInt(P,16);if(Number.parseInt)return Number.parseInt(P,16);if(window&&window.parseInt)return window.parseInt(P,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(A);if(A.search(/.+[eE].+/)!==-1)return(function(P,M,Q){if(!Q.eNotation)return P;let B=M.match(pN);if(B){let ae=B[1]||"",fe=B[3].indexOf("e")===-1?"E":"e",ce=B[2],De=ae?P[ce.length+1]===fe:P[ce.length]===fe;return ce.length>1&&De?P:ce.length!==1||!B[3].startsWith(`.${fe}`)&&B[3][0]!==fe?Q.leadingZeros&&!De?(M=(B[1]||"")+B[3],Number(M)):P:Number(M)}return P})(S,A,_);{let P=dN.exec(A);if(P){let M=P[1]||"",Q=P[2],B=((T=P[3])&&T.indexOf(".")!==-1&&((T=T.replace(/0+$/,""))==="."?T="0":T[0]==="."?T="0"+T:T[T.length-1]==="."&&(T=T.substring(0,T.length-1))),T),ae=M?S[Q.length+1]===".":S[Q.length]===".";if(!_.leadingZeros&&(Q.length>1||Q.length===1&&!ae))return S;{let fe=Number(A),ce=String(fe);if(fe===0||fe===-0)return fe;if(ce.search(/[eE]/)!==-1)return _.eNotation?fe:S;if(A.indexOf(".")!==-1)return ce==="0"||ce===B||ce===`${M}${B}`?fe:S;let De=Q?B:A;return Q?De===ce||M+De===ce?fe:S:De===ce||De===M+ce?fe:S}}return S}var T})(d,g)}return d!==void 0?d:""}let nf=Pe.getMetaDataSymbol();function TN(d,f){return tS(d,f)}function tS(d,f,g){let E,S={};for(let _=0;_<d.length;_++){let A=d[_],T=CN(A),P="";if(P=g===void 0?T:g+"."+T,T===f.textNodeName)E===void 0?E=A[T]:E+=""+A[T];else{if(T===void 0)continue;if(A[T]){let M=tS(A[T],f,P),Q=IN(M,f);A[nf]!==void 0&&(M[nf]=A[nf]),A[":@"]?AN(M,A[":@"],P,f):Object.keys(M).length!==1||M[f.textNodeName]===void 0||f.alwaysCreateTextNode?Object.keys(M).length===0&&(f.alwaysCreateTextNode?M[f.textNodeName]="":M=""):M=M[f.textNodeName],S[T]!==void 0&&S.hasOwnProperty(T)?(Array.isArray(S[T])||(S[T]=[S[T]]),S[T].push(M)):f.isArray(T,P,Q)?S[T]=[M]:S[T]=M}}}return typeof E=="string"?E.length>0&&(S[f.textNodeName]=E):E!==void 0&&(S[f.textNodeName]=E),S}function CN(d){let f=Object.keys(d);for(let g=0;g<f.length;g++){let E=f[g];if(E!==":@")return E}}function AN(d,f,g,E){if(f){let S=Object.keys(f),_=S.length;for(let A=0;A<_;A++){let T=S[A];E.isArray(T,g+"."+T,!0,!0)?d[T]=[f[T]]:d[T]=f[T]}}}function IN(d,f){let{textNodeName:g}=f,E=Object.keys(d).length;return E===0||!(E!==1||!d[g]&&typeof d[g]!="boolean"&&d[g]!==0)}class PN{constructor(f){this.externalEntities={},this.options=(function(g){return Object.assign({},J,g)})(f)}parse(f,g){if(typeof f!="string"){if(!f.toString)throw new Error("XML data is accepted in String or Bytes[] form.");f=f.toString()}if(g){g===!0&&(g={});let _=a(f,g);if(_!==!0)throw Error(`${_.err.msg}:${_.err.line}:${_.err.col}`)}let E=new hN(this.options);E.addExternalEntities(this.externalEntities);let S=E.parseXml(f);return this.options.preserveOrder||S===void 0?S:TN(S,this.options)}addEntity(f,g){if(g.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(f.indexOf("&")!==-1||f.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(g==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[f]=g}static getMetaDataSymbol(){return Pe.getMetaDataSymbol()}}function ON(d,f){let g="";return f.format&&f.indentBy.length>0&&(g=`
`),rS(d,f,"",g)}function rS(d,f,g,E){let S="",_=!1;for(let A=0;A<d.length;A++){let T=d[A],P=NN(T);if(P===void 0)continue;let M="";if(M=g.length===0?P:`${g}.${P}`,P===f.textNodeName){let fe=T[P];kN(M,f)||(fe=f.tagValueProcessor(P,fe),fe=sS(fe,f)),_&&(S+=E),S+=fe,_=!1;continue}if(P===f.cdataPropName){_&&(S+=E),S+=`<![CDATA[${T[P][0][f.textNodeName]}]]>`,_=!1;continue}if(P===f.commentPropName){S+=E+`<!--${T[P][0][f.textNodeName]}-->`,_=!0;continue}if(P[0]==="?"){let fe=nS(T[":@"],f),ce=P==="?xml"?"":E,De=T[P][0][f.textNodeName];De=De.length!==0?" "+De:"",S+=ce+`<${P}${De}${fe}?>`,_=!0;continue}let Q=E;Q!==""&&(Q+=f.indentBy);let B=E+`<${P}${nS(T[":@"],f)}`,ae=rS(T[P],f,M,Q);f.unpairedTags.indexOf(P)!==-1?f.suppressUnpairedNode?S+=B+">":S+=B+"/>":ae&&ae.length!==0||!f.suppressEmptyNode?ae&&ae.endsWith(">")?S+=B+`>${ae}${E}</${P}>`:(S+=B+">",ae&&E!==""&&(ae.includes("/>")||ae.includes("</"))?S+=E+f.indentBy+ae+E:S+=ae,S+=`</${P}>`):S+=B+"/>",_=!0}return S}function NN(d){let f=Object.keys(d);for(let g=0;g<f.length;g++){let E=f[g];if(d.hasOwnProperty(E)&&E!==":@")return E}}function nS(d,f){let g="";if(d&&!f.ignoreAttributes)for(let E in d){if(!d.hasOwnProperty(E))continue;let S=f.attributeValueProcessor(E,d[E]);S=sS(S,f),S===!0&&f.suppressBooleanAttributes?g+=` ${E.substr(f.attributeNamePrefix.length)}`:g+=` ${E.substr(f.attributeNamePrefix.length)}="${S}"`}return g}function kN(d,f){let g=(d=d.substr(0,d.length-f.textNodeName.length-1)).substr(d.lastIndexOf(".")+1);for(let E in f.stopNodes)if(f.stopNodes[E]===d||f.stopNodes[E]==="*."+g)return!0;return!1}function sS(d,f){if(d&&d.length>0&&f.processEntities)for(let g=0;g<f.entities.length;g++){let E=f.entities[g];d=d.replace(E.regex,E.val)}return d}let DN={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(d,f){return f},attributeValueProcessor:function(d,f){return f},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function jr(d){this.options=Object.assign({},DN,d),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Xy(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=FN),this.processTextOrObjNode=MN,this.options.format?(this.indentate=LN,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function MN(d,f,g,E){let S=this.j2x(d,g+1,E.concat(f));return d[this.options.textNodeName]!==void 0&&Object.keys(d).length===1?this.buildTextValNode(d[this.options.textNodeName],f,S.attrStr,g):this.buildObjectNode(S.val,f,S.attrStr,g)}function LN(d){return this.options.indentBy.repeat(d)}function FN(d){return!(!d.startsWith(this.options.attributeNamePrefix)||d===this.options.textNodeName)&&d.substr(this.attrPrefixLen)}jr.prototype.build=function(d){return this.options.preserveOrder?ON(d,this.options):(Array.isArray(d)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(d={[this.options.arrayNodeName]:d}),this.j2x(d,0,[]).val)},jr.prototype.j2x=function(d,f,g){let E="",S="",_=g.join(".");for(let A in d)if(Object.prototype.hasOwnProperty.call(d,A))if(d[A]===void 0)this.isAttribute(A)&&(S+="");else if(d[A]===null)this.isAttribute(A)||A===this.options.cdataPropName?S+="":A[0]==="?"?S+=this.indentate(f)+"<"+A+"?"+this.tagEndChar:S+=this.indentate(f)+"<"+A+"/"+this.tagEndChar;else if(d[A]instanceof Date)S+=this.buildTextValNode(d[A],A,"",f);else if(typeof d[A]!="object"){let T=this.isAttribute(A);if(T&&!this.ignoreAttributesFn(T,_))E+=this.buildAttrPairStr(T,""+d[A]);else if(!T)if(A===this.options.textNodeName){let P=this.options.tagValueProcessor(A,""+d[A]);S+=this.replaceEntitiesValue(P)}else S+=this.buildTextValNode(d[A],A,"",f)}else if(Array.isArray(d[A])){let T=d[A].length,P="",M="";for(let Q=0;Q<T;Q++){let B=d[A][Q];if(B!==void 0)if(B===null)A[0]==="?"?S+=this.indentate(f)+"<"+A+"?"+this.tagEndChar:S+=this.indentate(f)+"<"+A+"/"+this.tagEndChar;else if(typeof B=="object")if(this.options.oneListGroup){let ae=this.j2x(B,f+1,g.concat(A));P+=ae.val,this.options.attributesGroupName&&B.hasOwnProperty(this.options.attributesGroupName)&&(M+=ae.attrStr)}else P+=this.processTextOrObjNode(B,A,f,g);else if(this.options.oneListGroup){let ae=this.options.tagValueProcessor(A,B);ae=this.replaceEntitiesValue(ae),P+=ae}else P+=this.buildTextValNode(B,A,"",f)}this.options.oneListGroup&&(P=this.buildObjectNode(P,A,M,f)),S+=P}else if(this.options.attributesGroupName&&A===this.options.attributesGroupName){let T=Object.keys(d[A]),P=T.length;for(let M=0;M<P;M++)E+=this.buildAttrPairStr(T[M],""+d[A][T[M]])}else S+=this.processTextOrObjNode(d[A],A,f,g);return{attrStr:E,val:S}},jr.prototype.buildAttrPairStr=function(d,f){return f=this.options.attributeValueProcessor(d,""+f),f=this.replaceEntitiesValue(f),this.options.suppressBooleanAttributes&&f==="true"?" "+d:" "+d+'="'+f+'"'},jr.prototype.buildObjectNode=function(d,f,g,E){if(d==="")return f[0]==="?"?this.indentate(E)+"<"+f+g+"?"+this.tagEndChar:this.indentate(E)+"<"+f+g+this.closeTag(f)+this.tagEndChar;{let S="</"+f+this.tagEndChar,_="";return f[0]==="?"&&(_="?",S=""),!g&&g!==""||d.indexOf("<")!==-1?this.options.commentPropName!==!1&&f===this.options.commentPropName&&_.length===0?this.indentate(E)+`<!--${d}-->`+this.newLine:this.indentate(E)+"<"+f+g+_+this.tagEndChar+d+this.indentate(E)+S:this.indentate(E)+"<"+f+g+_+">"+d+S}},jr.prototype.closeTag=function(d){let f="";return this.options.unpairedTags.indexOf(d)!==-1?this.options.suppressUnpairedNode||(f="/"):f=this.options.suppressEmptyNode?"/":`></${d}`,f},jr.prototype.buildTextValNode=function(d,f,g,E){if(this.options.cdataPropName!==!1&&f===this.options.cdataPropName)return this.indentate(E)+`<![CDATA[${d}]]>`+this.newLine;if(this.options.commentPropName!==!1&&f===this.options.commentPropName)return this.indentate(E)+`<!--${d}-->`+this.newLine;if(f[0]==="?")return this.indentate(E)+"<"+f+g+"?"+this.tagEndChar;{let S=this.options.tagValueProcessor(f,d);return S=this.replaceEntitiesValue(S),S===""?this.indentate(E)+"<"+f+g+this.closeTag(f)+this.tagEndChar:this.indentate(E)+"<"+f+g+">"+S+"</"+f+this.tagEndChar}},jr.prototype.replaceEntitiesValue=function(d){if(d&&d.length>0&&this.options.processEntities)for(let f=0;f<this.options.entities.length;f++){let g=this.options.entities[f];d=d.replace(g.regex,g.val)}return d};let qN={validate:a};Hv.exports=e})()});var zv=b(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.parseXML=bF;var wF=Vv(),zh=new wF.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>e.trim()===""&&e.includes(`
`)?"":void 0});zh.addEntity("#xD","\r");zh.addEntity("#10",`
`);function bF(t){return zh.parse(t,!0)}});var vu=b(bu=>{"use strict";var vF=zv();function xF(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function RF(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var wu=class{value;constructor(e){this.value=e}toString(){return RF(""+this.value)}},Wh=class t{name;children;attributes={};static of(e,r,n){let s=new t(e);return r!==void 0&&s.addChildNode(new wu(r)),n!==void 0&&s.withName(n),s}constructor(e,r=[]){this.name=e,this.children=r}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,n=r){if(e[r]!=null){let s=t.of(r,e[r]).withName(n);this.c(s)}}l(e,r,n,s){e[r]!=null&&s().map(o=>{o.withName(n),this.c(o)})}lc(e,r,n,s){if(e[r]!=null){let i=s(),o=new t(n);i.map(a=>{o.c(a)}),this.c(o)}}toString(){let e=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let i=n[s];i!=null&&(r+=` ${s}="${xF(""+i)}"`)}return r+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(bu,"parseXML",{enumerable:!0,get:function(){return vF.parseXML}});bu.XmlNode=Wh;bu.XmlText=wu});var Gv,Wv,Kv,hn,xu=w(()=>{Gv=v(vu());ft();be();Wv=v(se()),Kv=v(He());un();hn=class extends et{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new as(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,r,n){let s=$.of(e),i=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(i).find(u=>!!u.getMemberTraits().eventPayload)){let u={},l=Object.keys(i)[0];return i[l].isBlobSchema()?u[l]=r:u[l]=this.read(i[l],r),u}let a=(this.serdeContext?.utf8Encoder??Kv.toUtf8)(r),c=this.parseXml(a);return this.readSchema(e,n?c[n]:c)}readSchema(e,r){let n=$.of(e);if(n.isUnitSchema())return;let s=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let i=!!s.sparse,o=!!s.xmlFlattened;if(n.isListSchema()){let c=n.getValueSchema(),u=[],l=c.getMergedTraits().xmlName??"member",p=o?r:(r[0]??r)[l],m=Array.isArray(p)?p:[p];for(let h of m)(h!=null||i)&&u.push(this.readSchema(c,h));return u}let a={};if(n.isMapSchema()){let c=n.getKeySchema(),u=n.getValueSchema(),l;o?l=Array.isArray(r)?r:[r]:l=Array.isArray(r.entry)?r.entry:[r.entry];let p=c.getMergedTraits().xmlName??"key",m=u.getMergedTraits().xmlName??"value";for(let h of l){let y=h[p],x=h[m];(x!=null||i)&&(a[y]=this.readSchema(u,x))}return a}if(n.isStructSchema()){for(let[c,u]of n.structIterator()){let l=u.getMergedTraits(),p=l.httpPayload?l.xmlName??u.getName():u.getMemberTraits().xmlName??c;r[p]!=null&&(a[c]=this.readSchema(u,r[p]))}return a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(e){if(e.length){let r;try{r=(0,Gv.parseXML)(e)}catch(o){throw o&&typeof o=="object"&&Object.defineProperty(o,"$responseBodyText",{value:e}),o}let n="#text",s=Object.keys(r)[0],i=r[s];return i[n]&&(i[s]=i[n],delete i[n]),(0,Wv.getValueFromTextNode)(i)}return{}}}});var Qv,Yv,Ru,Jv=w(()=>{ft();be();dt();Qv=v(se()),Yv=v(Ve());un();Ru=class extends et{settings;buffer;constructor(e){super(),this.settings=e}write(e,r,n=""){this.buffer===void 0&&(this.buffer="");let s=$.of(e);if(n&&!n.endsWith(".")&&(n+="."),s.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??Yv.toBase64)(r)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):s.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,ir.v4)()));else if(s.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(s.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof ve?r.string:String(r)));else if(s.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),vt(s,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,Qv.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(s.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${s.getName(!0)}`);if(s.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let i=s.getValueSchema(),o=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,a=1;for(let c of r){if(c==null)continue;let u=this.getKey("member",i.getMergedTraits().xmlName),l=o?`${n}${a}`:`${n}${u}.${a}`;this.write(i,c,l),++a}}}else if(s.isMapSchema()){if(r&&typeof r=="object"){let i=s.getKeySchema(),o=s.getValueSchema(),a=s.getMergedTraits().xmlFlattened,c=1;for(let[u,l]of Object.entries(r)){if(l==null)continue;let p=this.getKey("key",i.getMergedTraits().xmlName),m=a?`${n}${c}.${p}`:`${n}entry.${c}.${p}`,h=this.getKey("value",o.getMergedTraits().xmlName),y=a?`${n}${c}.${h}`:`${n}entry.${c}.${h}`;this.write(i,u,m),this.write(o,l,y),++c}}}else if(s.isStructSchema()){if(r&&typeof r=="object")for(let[i,o]of s.structIterator()){if(r[i]==null&&!o.isIdempotencyToken())continue;let a=this.getKey(i,o.getMergedTraits().xmlName),c=`${n}${a}`;this.write(o,r[i],c)}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let e=this.buffer;return delete this.buffer,e}getKey(e,r){let n=r??e;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(".")&&(e=e.slice(0,e.length-1)),this.buffer+=`&${rr(e)}=`}writeValue(e){this.buffer+=rr(e)}}});var ci,Kh=w(()=>{ft();be();ii();xu();Jv();ci=class extends wr{options;serializer;deserializer;mixin=new Ot;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Ru(r),this.deserializer=new hn(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(Wt(e.input)==="unit"||!s.body)&&(s.body="");let i=e.name.split("#")[1]??e.name;return s.body=`Action=${i}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1)),s}async deserializeResponse(e,r,n){let s=this.deserializer,i=$.of(e.output),o={};if(n.statusCode>=300){let p=await Gt(n.body,r);p.byteLength>0&&Object.assign(o,await s.read(15,p)),await this.handleError(e,r,n,o,this.deserializeMetadata(n))}for(let p in n.headers){let m=n.headers[p];delete n.headers[p],n.headers[p.toLowerCase()]=m}let a=e.name.split("#")[1]??e.name,c=i.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,u=await Gt(n.body,r);return u.byteLength>0&&Object.assign(o,await s.read(i,u,c)),{$metadata:this.deserializeMetadata(n),...o}}useNestedResult(){return!0}async handleError(e,r,n,s,i){let o=this.loadQueryErrorCode(n,s)??"Unknown",a=this.loadQueryError(s),c=this.loadQueryErrorMessage(s);a.message=c,a.Error={Type:a.Type,Code:a.Code,Message:c};let{errorSchema:u,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,a,i,(x,R)=>{try{return x.getSchema(R)}catch{return x.find(N=>$.of(N).getMergedTraits().awsQueryError?.[0]===R)}}),p=$.of(u),m=Le.for(u[1]).getErrorCtor(u)??Error,h=new m(c),y={Error:a.Error};for(let[x,R]of p.structIterator()){let C=R.getMergedTraits().xmlName??x,N=a[C]??s[C];y[x]=this.deserializer.readSchema(R,N)}throw Object.assign(h,l,{$fault:p.getMergedTraits().error,message:c},y)}loadQueryErrorCode(e,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(e.statusCode==404)return"NotFound"}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let r=this.loadQueryError(e);return r?.message??r?.Message??e.message??e.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Tu,Zv=w(()=>{Kh();Tu=class extends ci{options;constructor(e){super(e),this.options=e;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var Xv,ex,ui,Cu,Au,Qh=w(()=>{Xv=v(vu()),ex=v(se());Bh();ui=(t,e)=>pu(t,e).then(r=>{if(r.length){let n;try{n=(0,Xv.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",i=Object.keys(n)[0],o=n[i];return o[s]&&(o[i]=o[s],delete o[s]),(0,ex.getValueFromTextNode)(o)}return{}}),Cu=async(t,e)=>{let r=await ui(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Au=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var Nt,Yh,Iu,li,Jh=w(()=>{Nt=v(vu());ft();be();dt();Yh=v(se()),Iu=v(Ve());un();li=class extends et{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,r){let n=$.of(e);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??Iu.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let s=n.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,r,n){let s=e.getMergedTraits(),i=e.isMemberSchema()&&!s.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():s.xmlName??e.getName();if(!i||!e.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);let o=Nt.XmlNode.of(i),[a,c]=this.getXmlnsAttribute(e,n);for(let[u,l]of e.structIterator()){let p=r[u];if(p!=null||l.isIdempotencyToken()){if(l.getMergedTraits().xmlAttribute){o.addAttribute(l.getMergedTraits().xmlName??u,this.writeSimple(l,p));continue}if(l.isListSchema())this.writeList(l,p,o,c);else if(l.isMapSchema())this.writeMap(l,p,o,c);else if(l.isStructSchema())o.addChildNode(this.writeStruct(l,p,c));else{let m=Nt.XmlNode.of(l.getMergedTraits().xmlName??l.getMemberName());this.writeSimpleInto(l,p,m,c),o.addChildNode(m)}}}return c&&o.addAttribute(a,c),o}writeList(e,r,n,s){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);let i=e.getMergedTraits(),o=e.getValueSchema(),a=o.getMergedTraits(),c=!!a.sparse,u=!!i.xmlFlattened,[l,p]=this.getXmlnsAttribute(e,s),m=(h,y)=>{if(o.isListSchema())this.writeList(o,Array.isArray(y)?y:[y],h,p);else if(o.isMapSchema())this.writeMap(o,y,h,p);else if(o.isStructSchema()){let x=this.writeStruct(o,y,p);h.addChildNode(x.withName(u?i.xmlName??e.getMemberName():a.xmlName??"member"))}else{let x=Nt.XmlNode.of(u?i.xmlName??e.getMemberName():a.xmlName??"member");this.writeSimpleInto(o,y,x,p),h.addChildNode(x)}};if(u)for(let h of r)(c||h!=null)&&m(n,h);else{let h=Nt.XmlNode.of(i.xmlName??e.getMemberName());p&&h.addAttribute(l,p);for(let y of r)(c||y!=null)&&m(h,y);n.addChildNode(h)}}writeMap(e,r,n,s,i=!1){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);let o=e.getMergedTraits(),a=e.getKeySchema(),u=a.getMergedTraits().xmlName??"key",l=e.getValueSchema(),p=l.getMergedTraits(),m=p.xmlName??"value",h=!!p.sparse,y=!!o.xmlFlattened,[x,R]=this.getXmlnsAttribute(e,s),C=(N,U,V)=>{let J=Nt.XmlNode.of(u,U),[ge,Pe]=this.getXmlnsAttribute(a,R);Pe&&J.addAttribute(ge,Pe),N.addChildNode(J);let re=Nt.XmlNode.of(m);l.isListSchema()?this.writeList(l,V,re,R):l.isMapSchema()?this.writeMap(l,V,re,R,!0):l.isStructSchema()?re=this.writeStruct(l,V,R):this.writeSimpleInto(l,V,re,R),N.addChildNode(re)};if(y){for(let[N,U]of Object.entries(r))if(h||U!=null){let V=Nt.XmlNode.of(o.xmlName??e.getMemberName());C(V,N,U),n.addChildNode(V)}}else{let N;i||(N=Nt.XmlNode.of(o.xmlName??e.getMemberName()),R&&N.addAttribute(x,R),n.addChildNode(N));for(let[U,V]of Object.entries(r))if(h||V!=null){let J=Nt.XmlNode.of("entry");C(J,U,V),(i?n:N).addChildNode(J)}}}writeSimple(e,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=$.of(e),s=null;if(r&&typeof r=="object")if(n.isBlobSchema())s=(this.serdeContext?.base64Encoder??Iu.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(vt(n,this.settings)){case 5:s=r.toISOString().replace(".000Z","Z");break;case 6:s=(0,Yh.dateToUtcString)(r);break;case 7:s=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),s=(0,Yh.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof ve?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(s=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?s=(0,ir.v4)():s=String(r)),s===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return s}writeSimpleInto(e,r,n,s){let i=this.writeSimple(e,r),o=$.of(e),a=new Nt.XmlText(i),[c,u]=this.getXmlnsAttribute(o,s);u&&n.addAttribute(c,u),n.addChildNode(a)}getXmlnsAttribute(e,r){let n=e.getMergedTraits(),[s,i]=n.xmlNamespace??[];return i&&i!==r?[s?`xmlns:${s}`:"xmlns",i]:[void 0,void 0]}}});var di,Zh=w(()=>{un();xu();Jh();di=class extends et{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new li(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new hn(this.settings);return e.setSerdeContext(this.serdeContext),e}}});var Pu,tx=w(()=>{ft();be();ii();Qh();Zh();Pu=class extends os{codec;serializer;deserializer;mixin=new Ot;constructor(e){super(e);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new di(r),this.serializer=new us(this.codec.createSerializer(),r),this.deserializer=new cs(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(e,r,n){let s=await super.serializeRequest(e,r,n),i=$.of(e.input);if(!s.headers["content-type"]){let o=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);o&&(s.headers["content-type"]=o)}return s.headers["content-type"]===this.getDefaultContentType()&&typeof s.body=="string"&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s}async deserializeResponse(e,r,n){return super.deserializeResponse(e,r,n)}async handleError(e,r,n,s,i){let o=Au(n,s)??"Unknown",{errorSchema:a,errorMetadata:c}=await this.mixin.getErrorSchemaOrThrowBaseException(o,this.options.defaultNamespace,n,s,i),u=$.of(a),l=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",p=Le.for(a[1]).getErrorCtor(a)??Error,m=new p(l);await this.deserializeHttpMessage(a,r,n,s);let h={};for(let[y,x]of u.structIterator()){let R=x.getMergedTraits().xmlName??y,C=s.Error?.[R]??s[R];h[y]=this.codec.createDeserializer().readSchema(x,C)}throw Object.assign(m,c,{$fault:u.getMergedTraits().error,message:l},h)}getDefaultContentType(){return"application/xml"}}});var rx={};nt(rx,{AwsEc2QueryProtocol:()=>Tu,AwsJson1_0Protocol:()=>Su,AwsJson1_1Protocol:()=>_u,AwsJsonRpcProtocol:()=>pn,AwsQueryProtocol:()=>ci,AwsRestJsonProtocol:()=>Eu,AwsRestXmlProtocol:()=>Pu,AwsSmithyRpcV2CborProtocol:()=>du,JsonCodec:()=>fn,JsonShapeDeserializer:()=>oi,JsonShapeSerializer:()=>ai,XmlCodec:()=>di,XmlShapeDeserializer:()=>hn,XmlShapeSerializer:()=>li,_toBool:()=>pv,_toNum:()=>hv,_toStr:()=>fv,awsExpectUnion:()=>jv,loadRestJsonErrorCode:()=>dn,loadRestXmlErrorCode:()=>Au,parseJsonBody:()=>ys,parseJsonErrorBody:()=>hu,parseXmlBody:()=>ui,parseXmlErrorBody:()=>Cu});var Xh=w(()=>{dv();mv();Fv();qv();yu();Uv();gu();Hh();Vh();Bv();No();Zv();Kh();tx();Zh();xu();Jh();Qh()});var Ar={};nt(Ar,{AWSSDKSigV4Signer:()=>Yp,AwsEc2QueryProtocol:()=>Tu,AwsJson1_0Protocol:()=>Su,AwsJson1_1Protocol:()=>_u,AwsJsonRpcProtocol:()=>pn,AwsQueryProtocol:()=>ci,AwsRestJsonProtocol:()=>Eu,AwsRestXmlProtocol:()=>Pu,AwsSdkSigV4ASigner:()=>Co,AwsSdkSigV4Signer:()=>ht,AwsSmithyRpcV2CborProtocol:()=>du,JsonCodec:()=>fn,JsonShapeDeserializer:()=>oi,JsonShapeSerializer:()=>ai,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>ti,NODE_SIGV4A_CONFIG_OPTIONS:()=>wb,XmlCodec:()=>di,XmlShapeDeserializer:()=>hn,XmlShapeSerializer:()=>li,_toBool:()=>pv,_toNum:()=>hv,_toStr:()=>fv,awsExpectUnion:()=>jv,emitWarningIfUnsupportedVersion:()=>Zs,getBearerTokenEnvKey:()=>Kc,loadRestJsonErrorCode:()=>dn,loadRestXmlErrorCode:()=>Au,parseJsonBody:()=>ys,parseJsonErrorBody:()=>hu,parseXmlBody:()=>ui,parseXmlErrorBody:()=>Cu,resolveAWSSDKSigV4Config:()=>Wb,resolveAwsSdkSigV4AConfig:()=>Eb,resolveAwsSdkSigV4Config:()=>ms,setCredentialFeature:()=>tn,setFeature:()=>sb,setTokenFeature:()=>ob,state:()=>Wc,validateSigningProperties:()=>ei});var ze=w(()=>{Qt();mh();Xh()});var pi=b(fi=>{"use strict";var TF=(pt(),ue(Qs)),CF=Js(),AF=Se(),ar=(ze(),ue(Ar)),ox=void 0;function IF(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function PF(t){let e=TF.normalizeProvider(t.userAgentAppId??ox),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await e();if(!IF(n)){let s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var OF=/\d{12}\.ddb/;async function NF(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&ar.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?ar.setFeature(t,"RETRY_MODE_ADAPTIVE","F"):ar.setFeature(t,"RETRY_MODE_STANDARD","E"):ar.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let i=t.endpointV2;switch(String(i?.url?.hostname).match(OF)&&ar.setFeature(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":ar.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":ar.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":ar.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let i=s;i.accountId&&ar.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[o,a]of Object.entries(i.$source??{}))ar.setFeature(t,o,a)}}var nx="user-agent",em="x-amz-user-agent",sx=" ",tm="/",kF=/[^!$%&'*+\-.^_`|~\w]/g,DF=/[^!$%&'*+\-.^_`|~\w#]/g,ix="-",MF=1024;function LF(t){let e="";for(let r in t){let n=t[r];if(e.length+n.length+1<=MF){e.length?e+=","+n:e+=n;continue}break}return e}var ax=t=>(e,r)=>async n=>{let{request:s}=n;if(!AF.HttpRequest.isInstance(s))return e(n);let{headers:i}=s,o=r?.userAgent?.map(Ou)||[],a=(await t.defaultUserAgentProvider()).map(Ou);await NF(r,t,n);let c=r;a.push(`m/${LF(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let u=t?.customUserAgent?.map(Ou)||[],l=await t.userAgentAppId();l&&a.push(Ou(["app",`${l}`]));let p=CF.getUserAgentPrefix(),m=(p?[p]:[]).concat([...a,...o,...u]).join(sx),h=[...a.filter(y=>y.startsWith("aws-sdk-")),...u].join(sx);return t.runtime!=="browser"?(h&&(i[em]=i[em]?`${i[nx]} ${h}`:h),i[nx]=m):i[em]=m,e({...n,request:s})},Ou=t=>{let e=t[0].split(tm).map(o=>o.replace(kF,ix)).join(tm),r=t[1]?.replace(DF,ix),n=e.indexOf(tm),s=e.substring(0,n),i=e.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},cx={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},FF=t=>({applyToStack:e=>{e.add(ax(t),cx)}});fi.DEFAULT_UA_APP_ID=ox;fi.getUserAgentMiddlewareOptions=cx;fi.getUserAgentPlugin=FF;fi.resolveUserAgentConfig=PF;fi.userAgentMiddleware=ax});var ux=b(hi=>{"use strict";var qF=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},UF=(t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n};hi.SelectorType=void 0;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(hi.SelectorType||(hi.SelectorType={}));hi.booleanSelector=qF;hi.numberSelector=UF});var kt=b(Ge=>{"use strict";var mn=ux(),Nu=lt(),$F=fs(),fx="AWS_USE_DUALSTACK_ENDPOINT",px="use_dualstack_endpoint",jF=!1,BF={environmentVariableSelector:t=>mn.booleanSelector(t,fx,mn.SelectorType.ENV),configFileSelector:t=>mn.booleanSelector(t,px,mn.SelectorType.CONFIG),default:!1},hx="AWS_USE_FIPS_ENDPOINT",mx="use_fips_endpoint",HF=!1,VF={environmentVariableSelector:t=>mn.booleanSelector(t,hx,mn.SelectorType.ENV),configFileSelector:t=>mn.booleanSelector(t,mx,mn.SelectorType.CONFIG),default:!1},zF=t=>{let{tls:e,endpoint:r,urlParser:n,useDualstackEndpoint:s}=t;return Object.assign(t,{tls:e??!0,endpoint:Nu.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:Nu.normalizeProvider(s??!1)})},GF=async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await t.useDualstackEndpoint(),i=await t.useFipsEndpoint(),{hostname:o}=await t.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:i})??{};if(!o)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${o}`)},WF=t=>{let e=Nu.normalizeProvider(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:i}=t;return Object.assign(t,{tls:i??!0,endpoint:r?Nu.normalizeProvider(typeof r=="string"?s(r):r):()=>GF({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e})},gx="AWS_REGION",yx="region",KF={environmentVariableSelector:t=>t[gx],configFileSelector:t=>t[yx],default:()=>{throw new Error("Region is missing")}},QF={preferredFile:"credentials"},lx=new Set,YF=(t,e=$F.isValidHostLabel)=>{if(!lx.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else lx.add(t)},Sx=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),JF=t=>Sx(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,ZF=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{let n=typeof e=="function"?await e():e,s=JF(n);return YF(s),s},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return Sx(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},dx=(t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>t.find(({tags:n})=>e===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,XF=(t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),eq=(t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws",tq=(t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),i=t.match(s);if(i)return i[0].slice(1,-1)}},rq=(t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:i})=>{let o=eq(t,{partitionHash:i}),a=t in s?t:i[o]?.endpoint??t,c={useFipsEndpoint:e,useDualstackEndpoint:r},u=dx(s[a]?.variants,c),l=dx(i[o]?.variants,c),p=XF(a,{regionHostname:u,partitionHostname:l});if(p===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let m=tq(p,{signingRegion:s[a]?.signingRegion,regionRegex:i[o].regionRegex,useFipsEndpoint:e});return{partition:o,signingService:n,hostname:p,...m&&{signingRegion:m},...s[a]?.signingService&&{signingService:s[a].signingService}}};Ge.CONFIG_USE_DUALSTACK_ENDPOINT=px;Ge.CONFIG_USE_FIPS_ENDPOINT=mx;Ge.DEFAULT_USE_DUALSTACK_ENDPOINT=jF;Ge.DEFAULT_USE_FIPS_ENDPOINT=HF;Ge.ENV_USE_DUALSTACK_ENDPOINT=fx;Ge.ENV_USE_FIPS_ENDPOINT=hx;Ge.NODE_REGION_CONFIG_FILE_OPTIONS=QF;Ge.NODE_REGION_CONFIG_OPTIONS=KF;Ge.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=BF;Ge.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=VF;Ge.REGION_ENV_NAME=gx;Ge.REGION_INI_NAME=yx;Ge.getRegionInfo=rq;Ge.resolveCustomEndpointsConfig=zF;Ge.resolveEndpointsConfig=WF;Ge.resolveRegionConfig=ZF});var ko=b(ku=>{"use strict";var nq=Se(),_x="content-length";function Ex(t){return e=>async r=>{let n=r.request;if(nq.HttpRequest.isInstance(n)){let{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(_x)===-1)try{let o=t(s);n.headers={...n.headers,[_x]:String(o)}}catch{}}return e({...r,request:n})}}var wx={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},sq=t=>({applyToStack:e=>{e.add(Ex(t.bodyLengthChecker),wx)}});ku.contentLengthMiddleware=Ex;ku.contentLengthMiddlewareOptions=wx;ku.getContentLengthPlugin=sq});var nm=b(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.getHomeDir=void 0;var iq=require("os"),oq=require("path"),rm={},aq=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",cq=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${oq.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let s=aq();return rm[s]||(rm[s]=(0,iq.homedir)()),rm[s]};Du.getHomeDir=cq});var sm=b(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.getSSOTokenFilepath=void 0;var uq=require("crypto"),lq=require("path"),dq=nm(),fq=t=>{let r=(0,uq.createHash)("sha1").update(t).digest("hex");return(0,lq.join)((0,dq.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Mu.getSSOTokenFilepath=fq});var bx=b(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.getSSOTokenFromFile=gn.tokenIntercept=void 0;var pq=require("fs"),hq=sm(),{readFile:mq}=pq.promises;gn.tokenIntercept={};var gq=async t=>{if(gn.tokenIntercept[t])return gn.tokenIntercept[t];let e=(0,hq.getSSOTokenFilepath)(t),r=await mq(e,"utf8");return JSON.parse(r)};gn.getSSOTokenFromFile=gq});var vx=b(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.slurpFile=xt.fileIntercept=xt.filePromisesHash=void 0;var yq=require("fs"),{readFile:Sq}=yq.promises;xt.filePromisesHash={};xt.fileIntercept={};var _q=(t,e)=>xt.fileIntercept[t]!==void 0?xt.fileIntercept[t]:((!xt.filePromisesHash[t]||e?.ignoreCache)&&(xt.filePromisesHash[t]=Sq(t,"utf8")),xt.filePromisesHash[t]);xt.slurpFile=_q});var Ir=b(mt=>{"use strict";var Do=nm(),xx=sm(),im=bx(),Lu=require("path"),Fu=Kr(),Mo=vx(),Tx="AWS_PROFILE",Cx="default",Eq=t=>t.profile||process.env[Tx]||Cx,Ss=".",wq=t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(Ss);return r===-1?!1:Object.values(Fu.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let s=r.indexOf(Ss),i=r.substring(0,s)===Fu.IniSectionType.PROFILE?r.substring(s+1):r;return e[i]=n,e},{...t.default&&{default:t.default}}),bq="AWS_CONFIG_FILE",Ax=()=>process.env[bq]||Lu.join(Do.getHomeDir(),".aws","config"),vq="AWS_SHARED_CREDENTIALS_FILE",xq=()=>process.env[vq]||Lu.join(Do.getHomeDir(),".aws","credentials"),Rq=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,Tq=["__proto__","profile __proto__"],om=t=>{let e={},r,n;for(let s of t.split(/\r?\n/)){let i=s.split(/(^|\s)[;#]/)[0].trim();if(i[0]==="["&&i[i.length-1]==="]"){r=void 0,n=void 0;let a=i.substring(1,i.length-1),c=Rq.exec(a);if(c){let[,u,,l]=c;Object.values(Fu.IniSectionType).includes(u)&&(r=[u,l].join(Ss))}else r=a;if(Tq.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=i.indexOf("=");if(![0,-1].includes(a)){let[c,u]=[i.substring(0,a).trim(),i.substring(a+1).trim()];if(u==="")n=c;else{n&&s.trimStart()===s&&(n=void 0),e[r]=e[r]||{};let l=n?[n,c].join(Ss):c;e[r][l]=u}}}}return e},Rx=()=>({}),Ix=async(t={})=>{let{filepath:e=xq(),configFilepath:r=Ax()}=t,n=Do.getHomeDir(),s="~/",i=e;e.startsWith(s)&&(i=Lu.join(n,e.slice(2)));let o=r;r.startsWith(s)&&(o=Lu.join(n,r.slice(2)));let a=await Promise.all([Mo.slurpFile(o,{ignoreCache:t.ignoreCache}).then(om).then(wq).catch(Rx),Mo.slurpFile(i,{ignoreCache:t.ignoreCache}).then(om).catch(Rx)]);return{configFile:a[0],credentialsFile:a[1]}},Cq=t=>Object.entries(t).filter(([e])=>e.startsWith(Fu.IniSectionType.SSO_SESSION+Ss)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(Ss)+1)]:n}),{}),Aq=()=>({}),Iq=async(t={})=>Mo.slurpFile(t.configFilepath??Ax()).then(om).then(Cq).catch(Aq),Pq=(...t)=>{let e={};for(let r of t)for(let[n,s]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],s):e[n]=s;return e},Oq=async t=>{let e=await Ix(t);return Pq(e.configFile,e.credentialsFile)},Nq={getFileRecord(){return Mo.fileIntercept},interceptFile(t,e){Mo.fileIntercept[t]=Promise.resolve(e)},getTokenRecord(){return im.tokenIntercept},interceptToken(t,e){im.tokenIntercept[t]=e}};Object.defineProperty(mt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return im.getSSOTokenFromFile}});mt.CONFIG_PREFIX_SEPARATOR=Ss;mt.DEFAULT_PROFILE=Cx;mt.ENV_PROFILE=Tx;mt.externalDataInterceptor=Nq;mt.getProfileName=Eq;mt.loadSharedConfigFiles=Ix;mt.loadSsoSessionData=Iq;mt.parseKnownFiles=Oq;Object.keys(Do).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(mt,t)&&Object.defineProperty(mt,t,{enumerable:!0,get:function(){return Do[t]}})});Object.keys(xx).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(mt,t)&&Object.defineProperty(mt,t,{enumerable:!0,get:function(){return xx[t]}})})});var Pr=b(Nx=>{"use strict";var Lo=at(),Px=Ir();function Ox(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}var kq=(t,e)=>async()=>{try{let r=t(process.env,e);if(r===void 0)throw new Error;return r}catch(r){throw new Lo.CredentialsProviderError(r.message||`Not found in ENV: ${Ox(t.toString())}`,{logger:e?.logger})}},Dq=(t,{preferredFile:e="config",...r}={})=>async()=>{let n=Px.getProfileName(r),{configFile:s,credentialsFile:i}=await Px.loadSharedConfigFiles(r),o=i[n]||{},a=s[n]||{},c=e==="config"?{...o,...a}:{...a,...o};try{let l=t(c,e==="config"?s:i);if(l===void 0)throw new Error;return l}catch(u){throw new Lo.CredentialsProviderError(u.message||`Not found in config files w/ profile [${n}]: ${Ox(t.toString())}`,{logger:r.logger})}},Mq=t=>typeof t=="function",Lq=t=>Mq(t)?async()=>await t():Lo.fromStatic(t),Fq=({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>{let{signingName:s,logger:i}=n,o={signingName:s,logger:i};return Lo.memoize(Lo.chain(kq(t,o),Dq(e,n),Lq(r)))};Nx.loadConfig=Fq});var Lx=b(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.getEndpointUrlConfig=void 0;var kx=Ir(),Dx="AWS_ENDPOINT_URL",Mx="endpoint_url",qq=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(i=>i.toUpperCase()),n=e[[Dx,...r].join("_")];if(n)return n;let s=e[Dx];if(s)return s},configFileSelector:(e,r)=>{if(r&&e.services){let s=r[["services",e.services].join(kx.CONFIG_PREFIX_SEPARATOR)];if(s){let i=t.split(" ").map(a=>a.toLowerCase()),o=s[[i.join("_"),Mx].join(kx.CONFIG_PREFIX_SEPARATOR)];if(o)return o}}let n=e[Mx];if(n)return n},default:void 0});qu.getEndpointUrlConfig=qq});var Fx=b(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.getEndpointFromConfig=void 0;var Uq=Pr(),$q=Lx(),jq=async t=>(0,Uq.loadConfig)((0,$q.getEndpointUrlConfig)(t??""))();Uu.getEndpointFromConfig=jq});var yn=b(Or=>{"use strict";var Ux=Fx(),qx=en(),Bq=(pt(),ue(Qs)),$u=lt(),Hq=rs(),Vq=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Qq(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Kq(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},zq=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Gq=/(\d+\.){3}\d+/,Wq=/\.\./,Kq=t=>zq.test(t)&&!Gq.test(t)&&!Wq.test(t),Qq=t=>{let[e,r,n,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},Yq=(t,e,r)=>{let n=async()=>{let s=r[t]??r[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},am=t=>typeof t=="object"?"url"in t?qx.parseUrl(t.url):t:qx.parseUrl(t),$x=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await Ux.getEndpointFromConfig(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(am(o)),r.isCustomEndpoint=!0)}let s=await jx(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},jx=async(t,e,r)=>{let n={},s=e?.getEndpointParameterInstructions?.()||{};for(let[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":n[i]=o.value;break;case"contextParams":n[i]=t[o.name];break;case"clientContextParams":case"builtInParams":n[i]=await Yq(o.name,i,r)();break;case"operationContextParams":n[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Vq(n),n},Bx=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&Bq.setFeature(n,"ENDPOINT_OVERRIDE","N");let i=await $x(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;let o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;let c=$u.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},Hx={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Hq.serializerMiddlewareOption.name},Jq=(t,e)=>({applyToStack:r=>{r.addRelativeTo(Bx({config:t,instructions:e}),Hx)}}),Zq=t=>{let e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,i=r!=null?async()=>am(await $u.normalizeProvider(r)()):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:$u.normalizeProvider(n??!1),useFipsEndpoint:$u.normalizeProvider(s??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=Ux.getEndpointFromConfig(t.serviceId)),c),a},Xq=t=>{let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),t};Or.endpointMiddleware=Bx;Or.endpointMiddlewareOptions=Hx;Or.getEndpointFromInstructions=$x;Or.getEndpointPlugin=Jq;Or.resolveEndpointConfig=Zq;Or.resolveEndpointRequiredConfig=Xq;Or.resolveParams=jx;Or.toEndpointV1=am});var um=b(Sn=>{"use strict";var e2=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],t2=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],r2=["TimeoutError","RequestTimeout","RequestTimeoutException"],n2=[500,502,503,504],s2=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],i2=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],Vx=t=>t?.$retryable!==void 0,o2=t=>e2.includes(t.name),zx=t=>t.$metadata?.clockSkewCorrected,Gx=t=>{let e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},a2=t=>t.$metadata?.httpStatusCode===429||t2.includes(t.name)||t.$retryable?.throttling==!0,cm=(t,e=0)=>Vx(t)||zx(t)||r2.includes(t.name)||s2.includes(t?.code||"")||i2.includes(t?.code||"")||n2.includes(t.$metadata?.httpStatusCode||0)||Gx(t)||t.cause!==void 0&&e<=10&&cm(t.cause,e+1),c2=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!cm(t)}return!1};Sn.isBrowserNetworkError=Gx;Sn.isClockSkewCorrectedError=zx;Sn.isClockSkewError=o2;Sn.isRetryableByTrait=Vx;Sn.isServerError=c2;Sn.isThrottlingError=a2;Sn.isTransientError=cm});var mi=b(Ae=>{"use strict";var u2=um();Ae.RETRY_MODES=void 0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Ae.RETRY_MODES||(Ae.RETRY_MODES={}));var lm=3,l2=Ae.RETRY_MODES.STANDARD,ju=class t{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>t.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),u2.isThrottlingError(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}},Fo=100,hm=20*1e3,Kx=500,dm=500,Qx=5,Yx=10,Jx=1,d2="amz-sdk-invocation-id",f2="amz-sdk-request",p2=()=>{let t=Fo;return{computeNextBackoffDelay:n=>Math.floor(Math.min(hm,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},Wx=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(hm,t),getRetryCost:()=>r}),qo=class{maxAttempts;mode=Ae.RETRY_MODES.STANDARD;capacity=dm;retryBackoffStrategy=p2();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return Wx({retryDelay:Fo,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?Kx:Fo);let i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,Wx({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(dm,this.capacity+(e.getRetryCost()??Jx))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${lm}`),lm}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?Yx:Qx}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}},fm=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Ae.RETRY_MODES.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;let{rateLimiter:n}=r??{};this.rateLimiter=n??new ju,this.standardRetryStrategy=new qo(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},pm=class extends qo{computeNextBackoffDelay;constructor(e,r=Fo){super(typeof e=="function"?e:async()=>e),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(e,r){let n=await super.refreshRetryTokenForRetry(e,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};Ae.AdaptiveRetryStrategy=fm;Ae.ConfiguredRetryStrategy=pm;Ae.DEFAULT_MAX_ATTEMPTS=lm;Ae.DEFAULT_RETRY_DELAY_BASE=Fo;Ae.DEFAULT_RETRY_MODE=l2;Ae.DefaultRateLimiter=ju;Ae.INITIAL_RETRY_TOKENS=dm;Ae.INVOCATION_ID_HEADER=d2;Ae.MAXIMUM_RETRY_DELAY=hm;Ae.NO_RETRY_INCREMENT=Jx;Ae.REQUEST_HEADER=f2;Ae.RETRY_COST=Qx;Ae.StandardRetryStrategy=qo;Ae.THROTTLING_RETRY_DELAY_BASE=Kx;Ae.TIMEOUT_RETRY_COST=Yx});var Zx=b(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.isStreamingPayload=void 0;var h2=require("stream"),m2=t=>t?.body instanceof h2.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;Bu.isStreamingPayload=m2});var Nr=b(Fe=>{"use strict";var xe=mi(),gi=Se(),_n=um(),eR=_p(),Xx=lt(),g2=se(),y2=Zx(),S2=(t,e)=>{let r=t,n=xe.NO_RETRY_INCREMENT,s=xe.RETRY_COST,i=xe.TIMEOUT_RETRY_COST,o=t,a=p=>p.name==="TimeoutError"?i:s,c=p=>a(p)<=o;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:p=>{if(!c(p))throw new Error("No retry token available");let m=a(p);return o-=m,m},releaseRetryTokens:p=>{o+=p??n,o=Math.min(o,r)}})},tR=(t,e)=>Math.floor(Math.min(xe.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),rR=t=>t?_n.isRetryableByTrait(t)||_n.isClockSkewError(t)||_n.isThrottlingError(t)||_n.isTransientError(t):!1,nR=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Hu=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=xe.RETRY_MODES.STANDARD;constructor(e,r){this.maxAttemptsProvider=e,this.retryDecider=r?.retryDecider??rR,this.delayDecider=r?.delayDecider??tR,this.retryQuota=r?.retryQuota??S2(xe.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=xe.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let s,i=0,o=0,a=await this.getMaxAttempts(),{request:c}=r;for(gi.HttpRequest.isInstance(c)&&(c.headers[xe.INVOCATION_ID_HEADER]=eR.v4());;)try{gi.HttpRequest.isInstance(c)&&(c.headers[xe.REQUEST_HEADER]=`attempt=${i+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:u,output:l}=await e(r);return n?.afterRequest&&n.afterRequest(u),this.retryQuota.releaseRetryTokens(s),l.$metadata.attempts=i+1,l.$metadata.totalRetryDelay=o,{response:u,output:l}}catch(u){let l=nR(u);if(i++,this.shouldRetry(l,i,a)){s=this.retryQuota.retrieveRetryTokens(l);let p=this.delayDecider(_n.isThrottlingError(l)?xe.THROTTLING_RETRY_DELAY_BASE:xe.DEFAULT_RETRY_DELAY_BASE,i),m=_2(l.$response),h=Math.max(m||0,p);o+=h,await new Promise(y=>setTimeout(y,h));continue}throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=i,l.$metadata.totalRetryDelay=o,l}}},_2=t=>{if(!gi.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},mm=class extends Hu{rateLimiter;constructor(e,r){let{rateLimiter:n,...s}=r??{};super(e,s),this.rateLimiter=n??new xe.DefaultRateLimiter,this.mode=xe.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},gm="AWS_MAX_ATTEMPTS",ym="max_attempts",E2={environmentVariableSelector:t=>{let e=t[gm];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${gm} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[ym];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${ym} mast be a number, got "${e}"`);return r},default:xe.DEFAULT_MAX_ATTEMPTS},w2=t=>{let{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=Xx.normalizeProvider(n??xe.DEFAULT_MAX_ATTEMPTS);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await Xx.normalizeProvider(r)()===xe.RETRY_MODES.ADAPTIVE?new xe.AdaptiveRetryStrategy(s):new xe.StandardRetryStrategy(s))})},sR="AWS_RETRY_MODE",iR="retry_mode",b2={environmentVariableSelector:t=>t[sR],configFileSelector:t=>t[iR],default:xe.DEFAULT_RETRY_MODE},oR=()=>t=>async e=>{let{request:r}=e;return gi.HttpRequest.isInstance(r)&&(delete r.headers[xe.INVOCATION_ID_HEADER],delete r.headers[xe.REQUEST_HEADER]),t(e)},aR={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},v2=t=>({applyToStack:e=>{e.addRelativeTo(oR(),aR)}}),cR=t=>(e,r)=>async n=>{let s=await t.retryStrategy(),i=await t.maxAttempts();if(x2(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0,{request:l}=n,p=gi.HttpRequest.isInstance(l);for(p&&(l.headers[xe.INVOCATION_ID_HEADER]=eR.v4());;)try{p&&(l.headers[xe.REQUEST_HEADER]=`attempt=${c+1}; max=${i}`);let{response:m,output:h}=await e(n);return s.recordSuccess(o),h.$metadata.attempts=c+1,h.$metadata.totalRetryDelay=u,{response:m,output:h}}catch(m){let h=R2(m);if(a=nR(m),p&&y2.isStreamingPayload(l))throw(r.logger instanceof g2.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();let y=o.getRetryDelay();u+=y,await new Promise(x=>setTimeout(x,y))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},x2=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",R2=t=>{let e={error:t,errorType:T2(t)},r=lR(t.$response);return r&&(e.retryAfterHint=r),e},T2=t=>_n.isThrottlingError(t)?"THROTTLING":_n.isTransientError(t)?"TRANSIENT":_n.isServerError(t)?"SERVER_ERROR":"CLIENT_ERROR",uR={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},C2=t=>({applyToStack:e=>{e.add(cR(t),uR)}}),lR=t=>{if(!gi.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};Fe.AdaptiveRetryStrategy=mm;Fe.CONFIG_MAX_ATTEMPTS=ym;Fe.CONFIG_RETRY_MODE=iR;Fe.ENV_MAX_ATTEMPTS=gm;Fe.ENV_RETRY_MODE=sR;Fe.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=E2;Fe.NODE_RETRY_MODE_CONFIG_OPTIONS=b2;Fe.StandardRetryStrategy=Hu;Fe.defaultDelayDecider=tR;Fe.defaultRetryDecider=rR;Fe.getOmitRetryHeadersPlugin=v2;Fe.getRetryAfterHint=lR;Fe.getRetryPlugin=C2;Fe.omitRetryHeadersMiddleware=oR;Fe.omitRetryHeadersMiddlewareOptions=aR;Fe.resolveRetryConfig=w2;Fe.retryMiddleware=cR;Fe.retryMiddlewareOptions=uR});var _m=b(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.resolveHttpAuthSchemeConfig=En.defaultSecretsManagerHttpAuthSchemeProvider=En.defaultSecretsManagerHttpAuthSchemeParametersProvider=void 0;var A2=(ze(),ue(Ar)),Sm=lt(),I2=async(t,e,r)=>({operation:(0,Sm.getSmithyContext)(e).operation,region:await(0,Sm.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});En.defaultSecretsManagerHttpAuthSchemeParametersProvider=I2;function P2(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"secretsmanager",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var O2=t=>{let e=[];switch(t.operation){default:e.push(P2(t))}return e};En.defaultSecretsManagerHttpAuthSchemeProvider=O2;var N2=t=>{let e=(0,A2.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,Sm.normalizeProvider)(t.authSchemePreference??[])})};En.resolveHttpAuthSchemeConfig=N2});var dR=b((MZ,k2)=>{k2.exports={name:"@aws-sdk/client-secrets-manager",description:"AWS SDK for JavaScript Secrets Manager Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-secrets-manager","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo secrets-manager"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/credential-provider-node":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-secrets-manager",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-secrets-manager"}}});var Em=b(wn=>{"use strict";var D2=(Qt(),ue(rn)),M2=at(),fR="AWS_ACCESS_KEY_ID",pR="AWS_SECRET_ACCESS_KEY",hR="AWS_SESSION_TOKEN",mR="AWS_CREDENTIAL_EXPIRATION",gR="AWS_CREDENTIAL_SCOPE",yR="AWS_ACCOUNT_ID",L2=t=>async()=>{t?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let e=process.env[fR],r=process.env[pR],n=process.env[hR],s=process.env[mR],i=process.env[gR],o=process.env[yR];if(e&&r){let a={accessKeyId:e,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...i&&{credentialScope:i},...o&&{accountId:o}};return D2.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new M2.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})};wn.ENV_ACCOUNT_ID=yR;wn.ENV_CREDENTIAL_SCOPE=gR;wn.ENV_EXPIRATION=mR;wn.ENV_KEY=fR;wn.ENV_SECRET=pR;wn.ENV_SESSION=hR;wn.fromEnv=L2});var $o=b(tt=>{"use strict";var cr=at(),F2=require("url"),q2=require("buffer"),U2=require("http"),Rm=Pr(),$2=en();function Uo(t){return new Promise((e,r)=>{let n=U2.request({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new cr.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new cr.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new cr.ProviderError("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let o=[];s.on("data",a=>{o.push(a)}),s.on("end",()=>{e(q2.Buffer.concat(o)),n.destroy()})}),n.end()})}var wR=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",bR=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),vR=1e3,xR=0,Tm=({maxRetries:t=xR,timeout:e=vR})=>({maxRetries:t,timeout:e}),bm=(t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},Vu="AWS_CONTAINER_CREDENTIALS_FULL_URI",zu="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",vm="AWS_CONTAINER_AUTHORIZATION_TOKEN",j2=(t={})=>{let{timeout:e,maxRetries:r}=Tm(t);return()=>bm(async()=>{let n=await G2({logger:t.logger}),s=JSON.parse(await B2(e,n));if(!wR(s))throw new cr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return bR(s)},r)},B2=async(t,e)=>(process.env[vm]&&(e.headers={...e.headers,Authorization:process.env[vm]}),(await Uo({...e,timeout:t})).toString()),H2="169.254.170.2",V2={localhost:!0,"127.0.0.1":!0},z2={"http:":!0,"https:":!0},G2=async({logger:t})=>{if(process.env[zu])return{hostname:H2,path:process.env[zu]};if(process.env[Vu]){let e=F2.parse(process.env[Vu]);if(!e.hostname||!(e.hostname in V2))throw new cr.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in z2))throw new cr.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new cr.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${zu} or ${Vu} environment variable is set`,{tryNextLink:!1,logger:t})},xm=class t extends cr.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(e,r=!0){super(e,r),this.tryNextLink=r,Object.setPrototypeOf(this,t.prototype)}};tt.Endpoint=void 0;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(tt.Endpoint||(tt.Endpoint={}));var W2="AWS_EC2_METADATA_SERVICE_ENDPOINT",K2="ec2_metadata_service_endpoint",Q2={environmentVariableSelector:t=>t[W2],configFileSelector:t=>t[K2],default:void 0},yi;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(yi||(yi={}));var Y2="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",J2="ec2_metadata_service_endpoint_mode",Z2={environmentVariableSelector:t=>t[Y2],configFileSelector:t=>t[J2],default:yi.IPv4},RR=async()=>$2.parseUrl(await X2()||await eU()),X2=async()=>Rm.loadConfig(Q2)(),eU=async()=>{let t=await Rm.loadConfig(Z2)();switch(t){case yi.IPv4:return tt.Endpoint.IPv4;case yi.IPv6:return tt.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(yi)}`)}},tU=300,rU=300,nU="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",SR=(t,e)=>{let r=tU+Math.floor(Math.random()*rU),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+nU);let s=t.originalExpiration??t.expiration;return{...t,...s?{originalExpiration:s}:{},expiration:n}},sU=(t,e={})=>{let r=e?.logger||console,n;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=SR(s,r))}catch(i){if(n)r.warn("Credential renew failed: ",i),s=SR(n,r);else throw i}return n=s,s}},TR="/latest/meta-data/iam/security-credentials/",iU="/latest/api/token",wm="AWS_EC2_METADATA_V1_DISABLED",_R="ec2_metadata_v1_disabled",ER="x-aws-ec2-metadata-token",oU=(t={})=>sU(aU(t),{logger:t.logger}),aU=(t={})=>{let e=!1,{logger:r,profile:n}=t,{timeout:s,maxRetries:i}=Tm(t),o=async(a,c)=>{if(e||c.headers?.[ER]==null){let p=!1,m=!1,h=await Rm.loadConfig({environmentVariableSelector:y=>{let x=y[wm];if(m=!!x&&x!=="false",x===void 0)throw new cr.CredentialsProviderError(`${wm} not set in env, checking config file next.`,{logger:t.logger});return m},configFileSelector:y=>{let x=y[_R];return p=!!x&&x!=="false",p},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||h){let y=[];throw t.ec2MetadataV1Disabled&&y.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),p&&y.push(`config file profile (${_R})`),m&&y.push(`process environment variable (${wm})`),new xm(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${y.join(", ")}].`)}}let l=(await bm(async()=>{let p;try{p=await uU(c)}catch(m){throw m.statusCode===401&&(e=!1),m}return p},a)).trim();return bm(async()=>{let p;try{p=await lU(l,c,t)}catch(m){throw m.statusCode===401&&(e=!1),m}return p},a)};return async()=>{let a=await RR();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),o(i,{...a,timeout:s});{let c;try{c=(await cU({...a,timeout:s})).toString()}catch(u){if(u?.statusCode===400)throw Object.assign(u,{message:"EC2 Metadata token request returned error"});return(u.message==="TimeoutError"||[403,404,405].includes(u.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),o(i,{...a,timeout:s})}return o(i,{...a,headers:{[ER]:c},timeout:s})}}},cU=async t=>Uo({...t,path:iU,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),uU=async t=>(await Uo({...t,path:TR})).toString(),lU=async(t,e,r)=>{let n=JSON.parse((await Uo({...e,path:TR+t})).toString());if(!wR(n))throw new cr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return bR(n)};tt.DEFAULT_MAX_RETRIES=xR;tt.DEFAULT_TIMEOUT=vR;tt.ENV_CMDS_AUTH_TOKEN=vm;tt.ENV_CMDS_FULL_URI=Vu;tt.ENV_CMDS_RELATIVE_URI=zu;tt.fromContainerMetadata=j2;tt.fromInstanceMetadata=oU;tt.getInstanceMetadataEndpoint=RR;tt.httpRequest=Uo;tt.providerConfigFromInit=Tm});var CR=b(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.checkUrl=void 0;var dU=at(),fU="169.254.170.2",pU="169.254.170.23",hU="[fd00:ec2::23]",mU=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===fU||t.hostname===pU||t.hostname===hU)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=s=>{let i=parseInt(s,10);return 0<=i&&i<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new dU.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};Gu.checkUrl=mU});var AR=b(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.createGetRequest=_U;Wu.getCredentials=EU;var Cm=at(),gU=Se(),yU=se(),SU=xc();function _U(t){return new gU.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}async function EU(t,e){let n=await(0,SU.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new Cm.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,yU.parseRfc3339DateTime)(s.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new Cm.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:s.Code,Message:s.Message})}throw new Cm.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}});var IR=b(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.retryWrapper=void 0;var wU=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(i=>setTimeout(i,r))}return await t()};Ku.retryWrapper=wU});var NR=b(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.fromHttp=void 0;var bU=(Eo(),ue(_o)),vU=(Qt(),ue(rn)),xU=ns(),PR=at(),RU=bU.__importDefault(require("fs/promises")),TU=CR(),OR=AR(),CU=IR(),AU="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",IU="http://169.254.170.2",PU="AWS_CONTAINER_CREDENTIALS_FULL_URI",OU="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",NU="AWS_CONTAINER_AUTHORIZATION_TOKEN",kU=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[AU],n=t.awsContainerCredentialsFullUri??process.env[PU],s=t.awsContainerAuthorizationToken??process.env[NU],i=t.awsContainerAuthorizationTokenFile??process.env[OU],o=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?.warn?console.warn:t.logger.warn.bind(t.logger);if(r&&n&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),o("awsContainerCredentialsFullUri will take precedence.")),s&&i&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),o("awsContainerAuthorizationToken will take precedence.")),n)e=n;else if(r)e=`${IU}${r}`;else throw new PR.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,TU.checkUrl)(a,t.logger);let c=xU.NodeHttpHandler.create({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,CU.retryWrapper)(async()=>{let u=(0,OR.createGetRequest)(a);s?u.headers.Authorization=s:i&&(u.headers.Authorization=(await RU.default.readFile(i)).toString());try{let l=await c.handle(u);return(0,OR.getCredentials)(l.response).then(p=>(0,vU.setCredentialFeature)(p,"CREDENTIALS_HTTP","z"))}catch(l){throw new PR.CredentialsProviderError(String(l),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};Qu.fromHttp=kU});var Am=b(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.fromHttp=void 0;var DU=NR();Object.defineProperty(Yu,"fromHttp",{enumerable:!0,get:function(){return DU.fromHttp}})});function MU(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function LU(t){return{schemeId:"smithy.api#noAuth"}}var jo,kR,DR,MR,Im=w(()=>{ze();jo=v(lt()),kR=async(t,e,r)=>({operation:(0,jo.getSmithyContext)(e).operation,region:await(0,jo.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});DR=t=>{let e=[];switch(t.operation){case"CreateToken":{e.push(LU(t));break}default:e.push(MU(t))}return e},MR=t=>{let e=ms(t);return Object.assign(e,{authSchemePreference:(0,jo.normalizeProvider)(t.authSchemePreference??[])})}});var LR,FR,Pm=w(()=>{LR=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),FR={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Ju,Om=w(()=>{Ju={name:"@aws-sdk/nested-clients",version:"3.928.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var Bo=b(_s=>{"use strict";var qR=require("os"),Nm=require("process"),qU=pi(),UR={isCrtAvailable:!1},UU=()=>UR.isCrtAvailable?["md/crt-avail"]:null,$R=({serviceId:t,clientVersion:e})=>async r=>{let n=[["aws-sdk-js",e],["ua","2.1"],[`os/${qR.platform()}`,qR.release()],["lang/js"],["md/nodejs",`${Nm.versions.node}`]],s=UU();s&&n.push(s),t&&n.push([`api/${t}`,e]),Nm.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${Nm.env.AWS_EXECUTION_ENV}`]);let i=await r?.userAgentAppId?.();return i?[...n,[`app/${i}`]]:[...n]},$U=$R,jR="AWS_SDK_UA_APP_ID",BR="sdk_ua_app_id",jU="sdk-ua-app-id",BU={environmentVariableSelector:t=>t[jR],configFileSelector:t=>t[BR]??t[jU],default:qU.DEFAULT_UA_APP_ID};_s.NODE_APP_ID_CONFIG_OPTIONS=BU;_s.UA_APP_ID_ENV_NAME=jR;_s.UA_APP_ID_INI_NAME=BR;_s.createDefaultUserAgentProvider=$R;_s.crtAvailability=UR;_s.defaultUserAgent=$U});var Ho=b(zR=>{"use strict";var km=js(),HU=He(),VU=require("buffer"),HR=require("crypto"),Dm=class{algorithmIdentifier;secret;hash;constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(HU.toUint8Array(VR(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?HR.createHmac(this.algorithmIdentifier,VR(this.secret)):HR.createHash(this.algorithmIdentifier)}};function VR(t,e){return VU.Buffer.isBuffer(t)?t:typeof t=="string"?km.fromString(t,e):ArrayBuffer.isView(t)?km.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength):km.fromArrayBuffer(t)}zR.Hash=Dm});var Vo=b(GR=>{"use strict";var Mm=require("node:fs"),zU=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(t instanceof Mm.ReadStream){if(t.path!=null)return Mm.lstatSync(t.path).size;if(typeof t.fd=="number")return Mm.fstatSync(t.fd).size}throw new Error(`Body Length computation failed for ${t}`)};GR.calculateBodyLength=zU});var r0,Mt,WR,zo,Si,_i,kr,Lm,Fm,KR,QR,YR,n0,s0,Dt,JR,i0,ZR,XR,e0,t0,GU,o0,a0=w(()=>{r0="required",Mt="argv",WR="isSet",zo="booleanEquals",Si="error",_i="endpoint",kr="tree",Lm="PartitionResult",Fm="getAttr",KR={[r0]:!1,type:"string"},QR={[r0]:!0,default:!1,type:"boolean"},YR={ref:"Endpoint"},n0={fn:zo,[Mt]:[{ref:"UseFIPS"},!0]},s0={fn:zo,[Mt]:[{ref:"UseDualStack"},!0]},Dt={},JR={fn:Fm,[Mt]:[{ref:Lm},"supportsFIPS"]},i0={ref:Lm},ZR={fn:zo,[Mt]:[!0,{fn:Fm,[Mt]:[i0,"supportsDualStack"]}]},XR=[n0],e0=[s0],t0=[{ref:"Region"}],GU={version:"1.0",parameters:{Region:KR,UseDualStack:QR,UseFIPS:QR,Endpoint:KR},rules:[{conditions:[{fn:WR,[Mt]:[YR]}],rules:[{conditions:XR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Si},{conditions:e0,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Si},{endpoint:{url:YR,properties:Dt,headers:Dt},type:_i}],type:kr},{conditions:[{fn:WR,[Mt]:t0}],rules:[{conditions:[{fn:"aws.partition",[Mt]:t0,assign:Lm}],rules:[{conditions:[n0,s0],rules:[{conditions:[{fn:zo,[Mt]:[!0,JR]},ZR],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Dt,headers:Dt},type:_i}],type:kr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Si}],type:kr},{conditions:XR,rules:[{conditions:[{fn:zo,[Mt]:[JR,!0]}],rules:[{conditions:[{fn:"stringEquals",[Mt]:[{fn:Fm,[Mt]:[i0,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Dt,headers:Dt},type:_i},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Dt,headers:Dt},type:_i}],type:kr},{error:"FIPS is enabled but this partition does not support FIPS",type:Si}],type:kr},{conditions:e0,rules:[{conditions:[ZR],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Dt,headers:Dt},type:_i}],type:kr},{error:"DualStack is enabled but this partition does not support DualStack",type:Si}],type:kr},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Dt,headers:Dt},type:_i}],type:kr}],type:kr},{error:"Invalid Configuration: Missing Region",type:Si}]},o0=GU});var c0,Ei,WU,u0,l0=w(()=>{c0=v(Js()),Ei=v(fs());a0();WU=new Ei.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),u0=(t,e={})=>WU.get(t,()=>(0,Ei.resolveEndpoint)(o0,{endpointParams:t,logger:e.logger}));Ei.customEndpointFunctions.aws=c0.awsEndpointFunctions});var d0,f0,Zu,Xu,p0,h0=w(()=>{ze();pt();d0=v(se()),f0=v(en()),Zu=v(Ve()),Xu=v(He());Im();l0();p0=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??Zu.fromBase64,base64Encoder:t?.base64Encoder??Zu.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??u0,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??DR,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new ht},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new br}],logger:t?.logger??new d0.NoOpLogger,serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??f0.parseUrl,utf8Decoder:t?.utf8Decoder??Xu.fromUtf8,utf8Encoder:t?.utf8Encoder??Xu.toUtf8})});var Go=b(S0=>{"use strict";var KU=kt(),m0=Pr(),QU=at(),YU="AWS_EXECUTION_ENV",g0="AWS_REGION",y0="AWS_DEFAULT_REGION",JU="AWS_EC2_METADATA_DISABLED",ZU=["in-region","cross-region","mobile","standard","legacy"],XU="/latest/meta-data/placement/region",e$="AWS_DEFAULTS_MODE",t$="defaults_mode",r$={environmentVariableSelector:t=>t[e$],configFileSelector:t=>t[t$],default:"legacy"},n$=({region:t=m0.loadConfig(KU.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=m0.loadConfig(r$)}={})=>QU.memoize(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return s$(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${ZU.join(", ")}, got ${r}`)}}),s$=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await i$();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},i$=async()=>{if(process.env[YU]&&(process.env[g0]||process.env[y0]))return process.env[g0]??process.env[y0];if(!process.env[JU])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>v($o())),r=await t();return(await e({...r,path:XU})).toString()}catch{}};S0.resolveDefaultsModeConfig=n$});var el,vn,_0,tl,bn,rl,E0,w0,b0,v0,x0,R0,T0=w(()=>{Om();ze();el=v(Bo()),vn=v(kt()),_0=v(Ho()),tl=v(Nr()),bn=v(Pr()),rl=v(ns()),E0=v(Vo()),w0=v(mi());h0();b0=v(se()),v0=v(Go()),x0=v(se()),R0=t=>{(0,x0.emitWarningIfUnsupportedVersion)(process.version);let e=(0,v0.resolveDefaultsModeConfig)(t),r=()=>e().then(b0.loadConfigsForDefaultMode),n=p0(t);Zs(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,bn.loadConfig)(ti,s),bodyLengthChecker:t?.bodyLengthChecker??E0.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,el.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Ju.version}),maxAttempts:t?.maxAttempts??(0,bn.loadConfig)(tl.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,bn.loadConfig)(vn.NODE_REGION_CONFIG_OPTIONS,{...vn.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:rl.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,bn.loadConfig)({...tl.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||w0.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??_0.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??rl.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,bn.loadConfig)(vn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,bn.loadConfig)(vn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,bn.loadConfig)(el.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var A0=b(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.warning=void 0;wi.stsRegionDefaultResolver=a$;var C0=kt(),o$=Pr();function a$(t={}){return(0,o$.loadConfig)({...C0.NODE_REGION_CONFIG_OPTIONS,async default(){return wi.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...C0.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}wi.warning={silence:!1}});var bi=b(ur=>{"use strict";var Wo=kt(),I0=A0(),c$=t=>({setRegion(e){t.region=e},region(){return t.region}}),u$=t=>({region:t.region()});Object.defineProperty(ur,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return Wo.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(ur,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return Wo.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(ur,"REGION_ENV_NAME",{enumerable:!0,get:function(){return Wo.REGION_ENV_NAME}});Object.defineProperty(ur,"REGION_INI_NAME",{enumerable:!0,get:function(){return Wo.REGION_INI_NAME}});Object.defineProperty(ur,"resolveRegionConfig",{enumerable:!0,get:function(){return Wo.resolveRegionConfig}});ur.getAwsRegionExtensionConfiguration=c$;ur.resolveAwsRegionExtensionConfiguration=u$;Object.keys(I0).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ur,t)&&Object.defineProperty(ur,t,{enumerable:!0,get:function(){return I0[t]}})})});var P0,O0,N0=w(()=>{P0=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},O0=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var nl,sl,il,k0,D0=w(()=>{nl=v(bi()),sl=v(Se()),il=v(se());N0();k0=(t,e)=>{let r=Object.assign((0,nl.getAwsRegionExtensionConfiguration)(t),(0,il.getDefaultExtensionConfiguration)(t),(0,sl.getHttpHandlerExtensionConfiguration)(t),P0(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,nl.resolveAwsRegionExtensionConfiguration)(r),(0,il.resolveDefaultRuntimeConfig)(r),(0,sl.resolveHttpHandlerRuntimeConfig)(r),O0(r))}});var ol,M0,L0,al,F0,q0,U0,cl,qm,Ko,Um=w(()=>{ol=v(ro()),M0=v(no()),L0=v(so()),al=v(pi()),F0=v(kt());pt();q0=v(ko()),U0=v(yn()),cl=v(Nr()),qm=v(se());Im();Pm();T0();D0();Ko=class extends qm.Client{config;constructor(...[e]){let r=R0(e||{});super(r),this.initConfig=r;let n=LR(r),s=(0,al.resolveUserAgentConfig)(n),i=(0,cl.resolveRetryConfig)(s),o=(0,F0.resolveRegionConfig)(i),a=(0,ol.resolveHostHeaderConfig)(o),c=(0,U0.resolveEndpointConfig)(a),u=MR(c),l=k0(u,e?.extensions||[]);this.config=l,this.middlewareStack.use((0,al.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,cl.getRetryPlugin)(this.config)),this.middlewareStack.use((0,q0.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,ol.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,M0.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,L0.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(oo(this.config,{httpAuthSchemeParametersProvider:kR,identityProviderConfigProvider:async p=>new ls({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(ao(this.config))}destroy(){super.destroy()}}});var $0,$e,ul=w(()=>{$0=v(se()),$e=class t extends $0.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var Es,l$,Qo,Yo,$m,jm,Jo,Zo,Xo,ea,d$,ta,ra,na,sa,ia,ll=w(()=>{Es=v(se());ul();l$={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},Qo=class t extends $e{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},Yo=class t extends $e{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},$m=t=>({...t,...t.clientSecret&&{clientSecret:Es.SENSITIVE_STRING},...t.refreshToken&&{refreshToken:Es.SENSITIVE_STRING},...t.codeVerifier&&{codeVerifier:Es.SENSITIVE_STRING}}),jm=t=>({...t,...t.accessToken&&{accessToken:Es.SENSITIVE_STRING},...t.refreshToken&&{refreshToken:Es.SENSITIVE_STRING},...t.idToken&&{idToken:Es.SENSITIVE_STRING}}),Jo=class t extends $e{name="ExpiredTokenException";$fault="client";error;error_description;constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Zo=class t extends $e{name="InternalServerException";$fault="server";error;error_description;constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},Xo=class t extends $e{name="InvalidClientException";$fault="client";error;error_description;constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},ea=class t extends $e{name="InvalidGrantException";$fault="client";error;error_description;constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},d$={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},ta=class t extends $e{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.reason=e.reason,this.error_description=e.error_description}},ra=class t extends $e{name="InvalidScopeException";$fault="client";error;error_description;constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},na=class t extends $e{name="SlowDownException";$fault="client";error;error_description;constructor(e){super({name:"SlowDownException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},sa=class t extends $e{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}},ia=class t extends $e{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype),this.error=e.error,this.error_description=e.error_description}}});var k,j0,B0,f$,p$,h$,m$,g$,y$,S$,_$,E$,w$,b$,v$,x$,Lt,H0=w(()=>{ze();pt();k=v(se());ll();ul();j0=async(t,e)=>{let r=vo(t,e),n={"content-type":"application/json"};r.bp("/token");let s;return s=JSON.stringify((0,k.take)(t,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:i=>(0,k._json)(i)})),r.m("POST").h(n).b(s),r.build()},B0=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return f$(t,e);let r=(0,k.map)({$metadata:Lt(t)}),n=(0,k.expectNonNull)((0,k.expectObject)(await ys(t.body,e)),"body"),s=(0,k.take)(n,{accessToken:k.expectString,expiresIn:k.expectInt32,idToken:k.expectString,refreshToken:k.expectString,tokenType:k.expectString});return Object.assign(r,s),r},f$=async(t,e)=>{let r={...t,body:await hu(t.body,e)},n=dn(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await h$(r,e);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await m$(r,e);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await g$(r,e);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await y$(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await S$(r,e);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await _$(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await E$(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await w$(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await b$(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await v$(r,e);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await x$(r,e);default:let s=r.body;return p$({output:t,parsedBody:s,errorCode:n})}},p$=(0,k.withBaseException)($e),h$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString,reason:k.expectString});Object.assign(r,s);let i=new Qo({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},m$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let i=new Yo({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},g$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let i=new Jo({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},y$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let i=new Zo({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},S$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let i=new Xo({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},_$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let i=new ea({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},E$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString,reason:k.expectString});Object.assign(r,s);let i=new ta({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},w$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let i=new ra({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},b$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let i=new na({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},v$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let i=new sa({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},x$=async(t,e)=>{let r=(0,k.map)({}),n=t.body,s=(0,k.take)(n,{error:k.expectString,error_description:k.expectString});Object.assign(r,s);let i=new ia({$metadata:Lt(t),...r});return(0,k.decorateServiceException)(i,t.body)},Lt=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]})});var V0,z0,Bm,oa,Hm=w(()=>{V0=v(yn()),z0=v(rs()),Bm=v(se());Pm();ll();H0();oa=class extends Bm.Command.classBuilder().ep(FR).m(function(e,r,n,s){return[(0,z0.getSerdePlugin)(n,this.serialize,this.deserialize),(0,V0.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f($m,jm).ser(j0).de(B0).build(){}});var G0,R$,dl,W0=w(()=>{G0=v(se());Hm();Um();R$={CreateTokenCommand:oa},dl=class extends Ko{};(0,G0.createAggregatedClient)(R$,dl)});var K0=w(()=>{Hm()});var Q0=w(()=>{ll()});var Vm={};nt(Vm,{$Command:()=>Bm.Command,AccessDeniedException:()=>Qo,AccessDeniedExceptionReason:()=>l$,AuthorizationPendingException:()=>Yo,CreateTokenCommand:()=>oa,CreateTokenRequestFilterSensitiveLog:()=>$m,CreateTokenResponseFilterSensitiveLog:()=>jm,ExpiredTokenException:()=>Jo,InternalServerException:()=>Zo,InvalidClientException:()=>Xo,InvalidGrantException:()=>ea,InvalidRequestException:()=>ta,InvalidRequestExceptionReason:()=>d$,InvalidScopeException:()=>ra,SSOOIDC:()=>dl,SSOOIDCClient:()=>Ko,SSOOIDCServiceException:()=>$e,SlowDownException:()=>na,UnauthorizedClientException:()=>sa,UnsupportedGrantTypeException:()=>ia,__Client:()=>qm.Client});var zm=w(()=>{Um();W0();K0();Q0();ul()});var X0=b(ca=>{"use strict";var T$=(Qt(),ue(rn)),C$=(mh(),ue(Yb)),Rt=at(),aa=Ir(),A$=require("fs"),I$=({logger:t,signingName:e}={})=>async()=>{if(t?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!e)throw new Rt.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:t});let r=C$.getBearerTokenEnvKey(e);if(!(r in process.env))throw new Rt.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:t});let n={token:process.env[r]};return T$.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},P$=300*1e3,Gm="To refresh this SSO session run 'aws sso login' with the corresponding profile.",O$=async(t,e={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(zm(),Vm)),n=i=>e.clientConfig?.[i]??e.parentClientConfig?.[i];return new r(Object.assign({},e.clientConfig??{},{region:t??e.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))},N$=async(t,e,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(zm(),Vm));return(await O$(e,r)).send(new n({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},Y0=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new Rt.TokenProviderError(`Token is expired. ${Gm}`,!1)},ws=(t,e,r=!1)=>{if(typeof e>"u")throw new Rt.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${Gm}`,!1)},{writeFile:k$}=A$.promises,D$=(t,e)=>{let r=aa.getSSOTokenFilepath(t),n=JSON.stringify(e,null,2);return k$(r,n)},J0=new Date(0),Z0=(t={})=>async({callerClientConfig:e}={})=>{let r={...t,parentClientConfig:{...e,...t.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await aa.parseKnownFiles(r),s=aa.getProfileName({profile:r.profile??e?.profile}),i=n[s];if(i){if(!i.sso_session)throw new Rt.TokenProviderError(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new Rt.TokenProviderError(`Profile '${s}' could not be found in shared credentials file.`,!1);let o=i.sso_session,c=(await aa.loadSsoSessionData(r))[o];if(!c)throw new Rt.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!c[y])throw new Rt.TokenProviderError(`Sso session '${o}' is missing required property '${y}'.`,!1);c.sso_start_url;let u=c.sso_region,l;try{l=await aa.getSSOTokenFromFile(o)}catch{throw new Rt.TokenProviderError(`The SSO session token associated with profile=${s} was not found or is invalid. ${Gm}`,!1)}ws("accessToken",l.accessToken),ws("expiresAt",l.expiresAt);let{accessToken:p,expiresAt:m}=l,h={token:p,expiration:new Date(m)};if(h.expiration.getTime()-Date.now()>P$)return h;if(Date.now()-J0.getTime()<30*1e3)return Y0(h),h;ws("clientId",l.clientId,!0),ws("clientSecret",l.clientSecret,!0),ws("refreshToken",l.refreshToken,!0);try{J0.setTime(Date.now());let y=await N$(l,u,r);ws("accessToken",y.accessToken),ws("expiresIn",y.expiresIn);let x=new Date(Date.now()+y.expiresIn*1e3);try{await D$(o,{...l,accessToken:y.accessToken,expiresAt:x.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:x}}catch{return Y0(h),h}},M$=({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new Rt.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},L$=(t={})=>Rt.memoize(Rt.chain(Z0(t),async()=>{throw new Rt.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);ca.fromEnvSigningName=I$;ca.fromSso=Z0;ca.fromStatic=M$;ca.nodeProvider=L$});var Km=b(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.resolveHttpAuthSchemeConfig=xn.defaultSSOHttpAuthSchemeProvider=xn.defaultSSOHttpAuthSchemeParametersProvider=void 0;var F$=(ze(),ue(Ar)),Wm=lt(),q$=async(t,e,r)=>({operation:(0,Wm.getSmithyContext)(e).operation,region:await(0,Wm.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});xn.defaultSSOHttpAuthSchemeParametersProvider=q$;function U$(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function fl(t){return{schemeId:"smithy.api#noAuth"}}var $$=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(fl(t));break}case"ListAccountRoles":{e.push(fl(t));break}case"ListAccounts":{e.push(fl(t));break}case"Logout":{e.push(fl(t));break}default:e.push(U$(t))}return e};xn.defaultSSOHttpAuthSchemeProvider=$$;var j$=t=>{let e=(0,F$.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,Wm.normalizeProvider)(t.authSchemePreference??[])})};xn.resolveHttpAuthSchemeConfig=j$});var eT=b((GX,B$)=>{B$.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.928.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var mT=b(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.ruleSet=void 0;var dT="required",qt="fn",Ut="argv",Ri="ref",tT=!0,rT="isSet",ua="booleanEquals",vi="error",xi="endpoint",Dr="tree",Qm="PartitionResult",Ym="getAttr",nT={[dT]:!1,type:"string"},sT={[dT]:!0,default:!1,type:"boolean"},iT={[Ri]:"Endpoint"},fT={[qt]:ua,[Ut]:[{[Ri]:"UseFIPS"},!0]},pT={[qt]:ua,[Ut]:[{[Ri]:"UseDualStack"},!0]},Ft={},oT={[qt]:Ym,[Ut]:[{[Ri]:Qm},"supportsFIPS"]},hT={[Ri]:Qm},aT={[qt]:ua,[Ut]:[!0,{[qt]:Ym,[Ut]:[hT,"supportsDualStack"]}]},cT=[fT],uT=[pT],lT=[{[Ri]:"Region"}],H$={version:"1.0",parameters:{Region:nT,UseDualStack:sT,UseFIPS:sT,Endpoint:nT},rules:[{conditions:[{[qt]:rT,[Ut]:[iT]}],rules:[{conditions:cT,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:vi},{conditions:uT,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:vi},{endpoint:{url:iT,properties:Ft,headers:Ft},type:xi}],type:Dr},{conditions:[{[qt]:rT,[Ut]:lT}],rules:[{conditions:[{[qt]:"aws.partition",[Ut]:lT,assign:Qm}],rules:[{conditions:[fT,pT],rules:[{conditions:[{[qt]:ua,[Ut]:[tT,oT]},aT],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ft,headers:Ft},type:xi}],type:Dr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:vi}],type:Dr},{conditions:cT,rules:[{conditions:[{[qt]:ua,[Ut]:[oT,tT]}],rules:[{conditions:[{[qt]:"stringEquals",[Ut]:[{[qt]:Ym,[Ut]:[hT,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Ft,headers:Ft},type:xi},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ft,headers:Ft},type:xi}],type:Dr},{error:"FIPS is enabled but this partition does not support FIPS",type:vi}],type:Dr},{conditions:uT,rules:[{conditions:[aT],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ft,headers:Ft},type:xi}],type:Dr},{error:"DualStack is enabled but this partition does not support DualStack",type:vi}],type:Dr},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ft,headers:Ft},type:xi}],type:Dr}],type:Dr},{error:"Invalid Configuration: Missing Region",type:vi}]};pl.ruleSet=H$});var gT=b(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.defaultEndpointResolver=void 0;var V$=Js(),Jm=fs(),z$=mT(),G$=new Jm.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),W$=(t,e={})=>G$.get(t,()=>(0,Jm.resolveEndpoint)(z$.ruleSet,{endpointParams:t,logger:e.logger}));hl.defaultEndpointResolver=W$;Jm.customEndpointFunctions.aws=V$.awsEndpointFunctions});var _T=b(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.getRuntimeConfig=void 0;var K$=(ze(),ue(Ar)),Q$=(pt(),ue(Qs)),Y$=se(),J$=en(),yT=Ve(),ST=He(),Z$=Km(),X$=gT(),ej=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??yT.fromBase64,base64Encoder:t?.base64Encoder??yT.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??X$.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Z$.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new K$.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Q$.NoAuthSigner}],logger:t?.logger??new Y$.NoOpLogger,serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??J$.parseUrl,utf8Decoder:t?.utf8Decoder??ST.fromUtf8,utf8Encoder:t?.utf8Encoder??ST.toUtf8});ml.getRuntimeConfig=ej});var xT=b(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.getRuntimeConfig=void 0;var tj=(Eo(),ue(_o)),rj=tj.__importDefault(eT()),ET=(ze(),ue(Ar)),wT=Bo(),gl=kt(),nj=Ho(),bT=Nr(),bs=Pr(),vT=ns(),sj=Vo(),ij=mi(),oj=_T(),aj=se(),cj=Go(),uj=se(),lj=t=>{(0,uj.emitWarningIfUnsupportedVersion)(process.version);let e=(0,cj.resolveDefaultsModeConfig)(t),r=()=>e().then(aj.loadConfigsForDefaultMode),n=(0,oj.getRuntimeConfig)(t);(0,ET.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,bs.loadConfig)(ET.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??sj.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,wT.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:rj.default.version}),maxAttempts:t?.maxAttempts??(0,bs.loadConfig)(bT.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,bs.loadConfig)(gl.NODE_REGION_CONFIG_OPTIONS,{...gl.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:vT.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,bs.loadConfig)({...bT.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||ij.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??nj.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??vT.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,bs.loadConfig)(gl.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,bs.loadConfig)(gl.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,bs.loadConfig)(wT.NODE_APP_ID_CONFIG_OPTIONS,s)}};yl.getRuntimeConfig=lj});var HT=b(Ie=>{"use strict";var RT=ro(),dj=no(),fj=so(),TT=pi(),pj=kt(),Mr=(pt(),ue(Qs)),hj=ko(),pa=yn(),CT=Nr(),F=se(),AT=Km(),mj=xT(),IT=bi(),PT=Se(),Rl=rs(),la=(ze(),ue(Ar)),gj=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Tl={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},yj=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},Sj=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),_j=(t,e)=>{let r=Object.assign(IT.getAwsRegionExtensionConfiguration(t),F.getDefaultExtensionConfiguration(t),PT.getHttpHandlerExtensionConfiguration(t),yj(t));return e.forEach(n=>n.configure(r)),Object.assign(t,IT.resolveAwsRegionExtensionConfiguration(r),F.resolveDefaultRuntimeConfig(r),PT.resolveHttpHandlerRuntimeConfig(r),Sj(r))},Ti=class extends F.Client{config;constructor(...[e]){let r=mj.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=gj(r),s=TT.resolveUserAgentConfig(n),i=CT.resolveRetryConfig(s),o=pj.resolveRegionConfig(i),a=RT.resolveHostHeaderConfig(o),c=pa.resolveEndpointConfig(a),u=AT.resolveHttpAuthSchemeConfig(c),l=_j(u,e?.extensions||[]);this.config=l,this.middlewareStack.use(TT.getUserAgentPlugin(this.config)),this.middlewareStack.use(CT.getRetryPlugin(this.config)),this.middlewareStack.use(hj.getContentLengthPlugin(this.config)),this.middlewareStack.use(RT.getHostHeaderPlugin(this.config)),this.middlewareStack.use(dj.getLoggerPlugin(this.config)),this.middlewareStack.use(fj.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Mr.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:AT.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new Mr.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(Mr.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Rn=class t extends F.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}},Sl=class t extends Rn{name="InvalidRequestException";$fault="client";constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},_l=class t extends Rn{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},El=class t extends Rn{name="TooManyRequestsException";$fault="client";constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},wl=class t extends Rn{name="UnauthorizedException";$fault="client";constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},OT=t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),NT=t=>({...t,...t.secretAccessKey&&{secretAccessKey:F.SENSITIVE_STRING},...t.sessionToken&&{sessionToken:F.SENSITIVE_STRING}}),kT=t=>({...t,...t.roleCredentials&&{roleCredentials:NT(t.roleCredentials)}}),DT=t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),MT=t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),LT=t=>({...t,...t.accessToken&&{accessToken:F.SENSITIVE_STRING}}),Ej=async(t,e)=>{let r=Mr.requestBuilder(t,e),n=F.map({},F.isSerializableHeaderValue,{[Il]:t[Al]});r.bp("/federation/credentials");let s=F.map({[Dj]:[,F.expectNonNull(t[kj],"roleName")],[qT]:[,F.expectNonNull(t[FT],"accountId")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},wj=async(t,e)=>{let r=Mr.requestBuilder(t,e),n=F.map({},F.isSerializableHeaderValue,{[Il]:t[Al]});r.bp("/assignment/roles");let s=F.map({[BT]:[,t[jT]],[$T]:[()=>t.maxResults!==void 0,()=>t[UT].toString()],[qT]:[,F.expectNonNull(t[FT],"accountId")]});return r.m("GET").h(n).q(s).b(void 0),r.build()},bj=async(t,e)=>{let r=Mr.requestBuilder(t,e),n=F.map({},F.isSerializableHeaderValue,{[Il]:t[Al]});r.bp("/assignment/accounts");let s=F.map({[BT]:[,t[jT]],[$T]:[()=>t.maxResults!==void 0,()=>t[UT].toString()]});return r.m("GET").h(n).q(s).b(void 0),r.build()},vj=async(t,e)=>{let r=Mr.requestBuilder(t,e),n=F.map({},F.isSerializableHeaderValue,{[Il]:t[Al]});return r.bp("/logout"),r.m("POST").h(n).b(void 0),r.build()},xj=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Cl(t,e);let r=F.map({$metadata:Tn(t)}),n=F.expectNonNull(F.expectObject(await la.parseJsonBody(t.body,e)),"body"),s=F.take(n,{roleCredentials:F._json});return Object.assign(r,s),r},Rj=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Cl(t,e);let r=F.map({$metadata:Tn(t)}),n=F.expectNonNull(F.expectObject(await la.parseJsonBody(t.body,e)),"body"),s=F.take(n,{nextToken:F.expectString,roleList:F._json});return Object.assign(r,s),r},Tj=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Cl(t,e);let r=F.map({$metadata:Tn(t)}),n=F.expectNonNull(F.expectObject(await la.parseJsonBody(t.body,e)),"body"),s=F.take(n,{accountList:F._json,nextToken:F.expectString});return Object.assign(r,s),r},Cj=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Cl(t,e);let r=F.map({$metadata:Tn(t)});return await F.collectBody(t.body,e),r},Cl=async(t,e)=>{let r={...t,body:await la.parseJsonErrorBody(t.body,e)},n=la.loadRestJsonErrorCode(t,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Ij(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Pj(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Oj(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Nj(r);default:let s=r.body;return Aj({output:t,parsedBody:s,errorCode:n})}},Aj=F.withBaseException(Rn),Ij=async(t,e)=>{let r=F.map({}),n=t.body,s=F.take(n,{message:F.expectString});Object.assign(r,s);let i=new Sl({$metadata:Tn(t),...r});return F.decorateServiceException(i,t.body)},Pj=async(t,e)=>{let r=F.map({}),n=t.body,s=F.take(n,{message:F.expectString});Object.assign(r,s);let i=new _l({$metadata:Tn(t),...r});return F.decorateServiceException(i,t.body)},Oj=async(t,e)=>{let r=F.map({}),n=t.body,s=F.take(n,{message:F.expectString});Object.assign(r,s);let i=new El({$metadata:Tn(t),...r});return F.decorateServiceException(i,t.body)},Nj=async(t,e)=>{let r=F.map({}),n=t.body,s=F.take(n,{message:F.expectString});Object.assign(r,s);let i=new wl({$metadata:Tn(t),...r});return F.decorateServiceException(i,t.body)},Tn=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),FT="accountId",Al="accessToken",qT="account_id",UT="maxResults",$T="max_result",jT="nextToken",BT="next_token",kj="roleName",Dj="role_name",Il="x-amz-sso_bearer_token",bl=class extends F.Command.classBuilder().ep(Tl).m(function(e,r,n,s){return[Rl.getSerdePlugin(n,this.serialize,this.deserialize),pa.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(OT,kT).ser(Ej).de(xj).build(){},da=class extends F.Command.classBuilder().ep(Tl).m(function(e,r,n,s){return[Rl.getSerdePlugin(n,this.serialize,this.deserialize),pa.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(DT,void 0).ser(wj).de(Rj).build(){},fa=class extends F.Command.classBuilder().ep(Tl).m(function(e,r,n,s){return[Rl.getSerdePlugin(n,this.serialize,this.deserialize),pa.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(MT,void 0).ser(bj).de(Tj).build(){},vl=class extends F.Command.classBuilder().ep(Tl).m(function(e,r,n,s){return[Rl.getSerdePlugin(n,this.serialize,this.deserialize),pa.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(LT,void 0).ser(vj).de(Cj).build(){},Mj={GetRoleCredentialsCommand:bl,ListAccountRolesCommand:da,ListAccountsCommand:fa,LogoutCommand:vl},xl=class extends Ti{};F.createAggregatedClient(Mj,xl);var Lj=Mr.createPaginator(Ti,da,"nextToken","nextToken","maxResults"),Fj=Mr.createPaginator(Ti,fa,"nextToken","nextToken","maxResults");Object.defineProperty(Ie,"$Command",{enumerable:!0,get:function(){return F.Command}});Object.defineProperty(Ie,"__Client",{enumerable:!0,get:function(){return F.Client}});Ie.GetRoleCredentialsCommand=bl;Ie.GetRoleCredentialsRequestFilterSensitiveLog=OT;Ie.GetRoleCredentialsResponseFilterSensitiveLog=kT;Ie.InvalidRequestException=Sl;Ie.ListAccountRolesCommand=da;Ie.ListAccountRolesRequestFilterSensitiveLog=DT;Ie.ListAccountsCommand=fa;Ie.ListAccountsRequestFilterSensitiveLog=MT;Ie.LogoutCommand=vl;Ie.LogoutRequestFilterSensitiveLog=LT;Ie.ResourceNotFoundException=_l;Ie.RoleCredentialsFilterSensitiveLog=NT;Ie.SSO=xl;Ie.SSOClient=Ti;Ie.SSOServiceException=Rn;Ie.TooManyRequestsException=El;Ie.UnauthorizedException=wl;Ie.paginateListAccountRoles=Lj;Ie.paginateListAccounts=Fj});var zT=b(Zm=>{"use strict";var VT=HT();Object.defineProperty(Zm,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return VT.GetRoleCredentialsCommand}});Object.defineProperty(Zm,"SSOClient",{enumerable:!0,get:function(){return VT.SSOClient}})});var Xm=b(Ol=>{"use strict";var Yt=at(),Pl=Ir(),GT=(Qt(),ue(rn)),qj=X0(),KT=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),ha=!1,WT=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:i,clientConfig:o,parentClientConfig:a,profile:c,filepath:u,configFilepath:l,ignoreCache:p,logger:m})=>{let h,y="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let Oe=await qj.fromSso({profile:c,filepath:u,configFilepath:l,ignoreCache:p})();h={accessToken:Oe.token,expiresAt:new Date(Oe.expiration).toISOString()}}catch(Oe){throw new Yt.CredentialsProviderError(Oe.message,{tryNextLink:ha,logger:m})}else try{h=await Pl.getSSOTokenFromFile(t)}catch{throw new Yt.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${y}`,{tryNextLink:ha,logger:m})}if(new Date(h.expiresAt).getTime()-Date.now()<=0)throw new Yt.CredentialsProviderError(`The SSO session associated with this profile has expired. ${y}`,{tryNextLink:ha,logger:m});let{accessToken:x}=h,{SSOClient:R,GetRoleCredentialsCommand:C}=await Promise.resolve().then(function(){return zT()}),N=i||new R(Object.assign({},o??{},{logger:o?.logger??a?.logger,region:o?.region??n,userAgentAppId:o?.userAgentAppId??a?.userAgentAppId})),U;try{U=await N.send(new C({accountId:r,roleName:s,accessToken:x}))}catch(Oe){throw new Yt.CredentialsProviderError(Oe,{tryNextLink:ha,logger:m})}let{roleCredentials:{accessKeyId:V,secretAccessKey:J,sessionToken:ge,expiration:Pe,credentialScope:re,accountId:oe}={}}=U;if(!V||!J||!ge||!Pe)throw new Yt.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:ha,logger:m});let he={accessKeyId:V,secretAccessKey:J,sessionToken:ge,expiration:new Date(Pe),...re&&{credentialScope:re},...oe&&{accountId:oe}};return e?GT.setCredentialFeature(he,"CREDENTIALS_SSO","s"):GT.setCredentialFeature(he,"CREDENTIALS_SSO_LEGACY","u"),he},QT=(t,e)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:i}=t;if(!r||!n||!s||!i)throw new Yt.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},Uj=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=t,{ssoClient:a}=t,c=Pl.getProfileName({profile:t.profile??e?.profile});if(!r&&!n&&!s&&!i&&!o){let l=(await Pl.parseKnownFiles(t))[c];if(!l)throw new Yt.CredentialsProviderError(`Profile ${c} was not found.`,{logger:t.logger});if(!KT(l))throw new Yt.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:t.logger});if(l?.sso_session){let C=(await Pl.loadSsoSessionData(t))[l.sso_session],N=` configurations in profile ${c} and sso-session ${l.sso_session}`;if(s&&s!==C.sso_region)throw new Yt.CredentialsProviderError("Conflicting SSO region"+N,{tryNextLink:!1,logger:t.logger});if(r&&r!==C.sso_start_url)throw new Yt.CredentialsProviderError("Conflicting SSO start_url"+N,{tryNextLink:!1,logger:t.logger});l.sso_region=C.sso_region,l.sso_start_url=C.sso_start_url}let{sso_start_url:p,sso_account_id:m,sso_region:h,sso_role_name:y,sso_session:x}=QT(l,t.logger);return WT({ssoStartUrl:p,ssoSession:x,ssoAccountId:m,ssoRegion:h,ssoRoleName:y,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}else{if(!r||!n||!s||!i)throw new Yt.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return WT({ssoStartUrl:r,ssoSession:o,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}};Ol.fromSSO=Uj;Ol.isSsoProfile=KT;Ol.validateSsoProfile=QT});function $j(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function jj(t){return{schemeId:"smithy.api#noAuth"}}var ma,YT,JT,Bj,ZT,eg=w(()=>{ze();ma=v(lt());ga();YT=async(t,e,r)=>({operation:(0,ma.getSmithyContext)(e).operation,region:await(0,ma.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});JT=t=>{let e=[];switch(t.operation){case"AssumeRoleWithWebIdentity":{e.push(jj(t));break}default:e.push($j(t))}return e},Bj=t=>Object.assign(t,{stsClientCtor:lr}),ZT=t=>{let e=Bj(t),r=ms(e);return Object.assign(r,{authSchemePreference:(0,ma.normalizeProvider)(t.authSchemePreference??[])})}});var XT,Nl,kl=w(()=>{XT=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Nl={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var lC,Z,le,Cn,We,dC,fC,_e,eC,dr,Ci,rg,tC,tg,pC,rC,Ke,nC,hC,mC,rt,Tt,sC,gC,yC,iC,SC,oC,aC,cC,uC,Hj,_C,EC=w(()=>{lC="required",Z="type",le="argv",Cn="booleanEquals",We="stringEquals",dC="sigv4",fC="us-east-1",_e="endpoint",eC="https://sts.{Region}.{PartitionResult#dnsSuffix}",dr="tree",Ci="error",rg="getAttr",tC={[lC]:!1,[Z]:"string"},tg={[lC]:!0,default:!1,[Z]:"boolean"},pC={ref:"Endpoint"},rC={fn:"isSet",[le]:[{ref:"Region"}]},Ke={ref:"Region"},nC={fn:"aws.partition",[le]:[Ke],assign:"PartitionResult"},hC={ref:"UseFIPS"},mC={ref:"UseDualStack"},rt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:dC,signingName:"sts",signingRegion:fC}]},headers:{}},Tt={},sC={conditions:[{fn:We,[le]:[Ke,"aws-global"]}],[_e]:rt,[Z]:_e},gC={fn:Cn,[le]:[hC,!0]},yC={fn:Cn,[le]:[mC,!0]},iC={fn:rg,[le]:[{ref:"PartitionResult"},"supportsFIPS"]},SC={ref:"PartitionResult"},oC={fn:Cn,[le]:[!0,{fn:rg,[le]:[SC,"supportsDualStack"]}]},aC=[{fn:"isSet",[le]:[pC]}],cC=[gC],uC=[yC],Hj={version:"1.0",parameters:{Region:tC,UseDualStack:tg,UseFIPS:tg,Endpoint:tC,UseGlobalEndpoint:tg},rules:[{conditions:[{fn:Cn,[le]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[le]:aC},rC,nC,{fn:Cn,[le]:[hC,!1]},{fn:Cn,[le]:[mC,!1]}],rules:[{conditions:[{fn:We,[le]:[Ke,"ap-northeast-1"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"ap-south-1"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"ap-southeast-1"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"ap-southeast-2"]}],endpoint:rt,[Z]:_e},sC,{conditions:[{fn:We,[le]:[Ke,"ca-central-1"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"eu-central-1"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"eu-north-1"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"eu-west-1"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"eu-west-2"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"eu-west-3"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"sa-east-1"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,fC]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"us-east-2"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"us-west-1"]}],endpoint:rt,[Z]:_e},{conditions:[{fn:We,[le]:[Ke,"us-west-2"]}],endpoint:rt,[Z]:_e},{endpoint:{url:eC,properties:{authSchemes:[{name:dC,signingName:"sts",signingRegion:"{Region}"}]},headers:Tt},[Z]:_e}],[Z]:dr},{conditions:aC,rules:[{conditions:cC,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[Z]:Ci},{conditions:uC,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[Z]:Ci},{endpoint:{url:pC,properties:Tt,headers:Tt},[Z]:_e}],[Z]:dr},{conditions:[rC],rules:[{conditions:[nC],rules:[{conditions:[gC,yC],rules:[{conditions:[{fn:Cn,[le]:[!0,iC]},oC],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Tt,headers:Tt},[Z]:_e}],[Z]:dr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[Z]:Ci}],[Z]:dr},{conditions:cC,rules:[{conditions:[{fn:Cn,[le]:[iC,!0]}],rules:[{conditions:[{fn:We,[le]:[{fn:rg,[le]:[SC,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Tt,headers:Tt},[Z]:_e},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Tt,headers:Tt},[Z]:_e}],[Z]:dr},{error:"FIPS is enabled but this partition does not support FIPS",[Z]:Ci}],[Z]:dr},{conditions:uC,rules:[{conditions:[oC],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Tt,headers:Tt},[Z]:_e}],[Z]:dr},{error:"DualStack is enabled but this partition does not support DualStack",[Z]:Ci}],[Z]:dr},sC,{endpoint:{url:eC,properties:Tt,headers:Tt},[Z]:_e}],[Z]:dr}],[Z]:dr},{error:"Invalid Configuration: Missing Region",[Z]:Ci}]},_C=Hj});var wC,Ai,Vj,bC,vC=w(()=>{wC=v(Js()),Ai=v(fs());EC();Vj=new Ai.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),bC=(t,e={})=>Vj.get(t,()=>(0,Ai.resolveEndpoint)(_C,{endpointParams:t,logger:e.logger}));Ai.customEndpointFunctions.aws=wC.awsEndpointFunctions});var xC,RC,Dl,Ml,TC,CC=w(()=>{ze();pt();xC=v(se()),RC=v(en()),Dl=v(Ve()),Ml=v(He());eg();vC();TC=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??Dl.fromBase64,base64Encoder:t?.base64Encoder??Dl.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??bC,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??JT,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new ht},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new br}],logger:t?.logger??new xC.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??RC.parseUrl,utf8Decoder:t?.utf8Decoder??Ml.fromUtf8,utf8Encoder:t?.utf8Encoder??Ml.toUtf8})});var Ll,In,AC,Fl,An,ql,IC,PC,OC,NC,kC,DC,MC=w(()=>{Om();ze();Ll=v(Bo()),In=v(kt());pt();AC=v(Ho()),Fl=v(Nr()),An=v(Pr()),ql=v(ns()),IC=v(Vo()),PC=v(mi());CC();OC=v(se()),NC=v(Go()),kC=v(se()),DC=t=>{(0,kC.emitWarningIfUnsupportedVersion)(process.version);let e=(0,NC.resolveDefaultsModeConfig)(t),r=()=>e().then(OC.loadConfigsForDefaultMode),n=TC(t);Zs(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,An.loadConfig)(ti,s),bodyLengthChecker:t?.bodyLengthChecker??IC.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Ll.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Ju.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:i=>i.getIdentityProvider("aws.auth#sigv4")||(async o=>await t.credentialDefaultProvider(o?.__config||{})()),signer:new ht},{schemeId:"smithy.api#noAuth",identityProvider:i=>i.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new br}],maxAttempts:t?.maxAttempts??(0,An.loadConfig)(Fl.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,An.loadConfig)(In.NODE_REGION_CONFIG_OPTIONS,{...In.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:ql.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,An.loadConfig)({...Fl.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||PC.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??AC.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??ql.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,An.loadConfig)(In.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,An.loadConfig)(In.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,An.loadConfig)(Ll.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var LC,FC,qC=w(()=>{LC=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},FC=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var Ul,$l,jl,UC,$C=w(()=>{Ul=v(bi()),$l=v(Se()),jl=v(se());qC();UC=(t,e)=>{let r=Object.assign((0,Ul.getAwsRegionExtensionConfiguration)(t),(0,jl.getDefaultExtensionConfiguration)(t),(0,$l.getHttpHandlerExtensionConfiguration)(t),LC(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,Ul.resolveAwsRegionExtensionConfiguration)(r),(0,jl.resolveDefaultRuntimeConfig)(r),(0,$l.resolveHttpHandlerRuntimeConfig)(r),FC(r))}});var Bl,jC,BC,Hl,HC,VC,zC,Vl,ng,lr,ga=w(()=>{Bl=v(ro()),jC=v(no()),BC=v(so()),Hl=v(pi()),HC=v(kt());pt();VC=v(ko()),zC=v(yn()),Vl=v(Nr()),ng=v(se());eg();kl();MC();$C();lr=class extends ng.Client{config;constructor(...[e]){let r=DC(e||{});super(r),this.initConfig=r;let n=XT(r),s=(0,Hl.resolveUserAgentConfig)(n),i=(0,Vl.resolveRetryConfig)(s),o=(0,HC.resolveRegionConfig)(i),a=(0,Bl.resolveHostHeaderConfig)(o),c=(0,zC.resolveEndpointConfig)(a),u=ZT(c),l=UC(u,e?.extensions||[]);this.config=l,this.middlewareStack.use((0,Hl.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Vl.getRetryPlugin)(this.config)),this.middlewareStack.use((0,VC.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Bl.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,jC.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,BC.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(oo(this.config,{httpAuthSchemeParametersProvider:YT,identityProviderConfigProvider:async p=>new ls({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(ao(this.config))}destroy(){super.destroy()}}});var GC,gt,zl=w(()=>{GC=v(se()),gt=class t extends GC.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var sg,ig,og,ya,Sa,_a,Ea,wa,ba,ag,cg,va,xa=w(()=>{sg=v(se());zl();ig=t=>({...t,...t.SecretAccessKey&&{SecretAccessKey:sg.SENSITIVE_STRING}}),og=t=>({...t,...t.Credentials&&{Credentials:ig(t.Credentials)}}),ya=class t extends gt{name="ExpiredTokenException";$fault="client";constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Sa=class t extends gt{name="MalformedPolicyDocumentException";$fault="client";constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},_a=class t extends gt{name="PackedPolicyTooLargeException";$fault="client";constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},Ea=class t extends gt{name="RegionDisabledException";$fault="client";constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},wa=class t extends gt{name="IDPRejectedClaimException";$fault="client";constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ba=class t extends gt{name="InvalidIdentityTokenException";$fault="client";constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}},ag=t=>({...t,...t.WebIdentityToken&&{WebIdentityToken:sg.SENSITIVE_STRING}}),cg=t=>({...t,...t.Credentials&&{Credentials:ig(t.Credentials)}}),va=class t extends gt{name="IDPCommunicationErrorException";$fault="client";constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,t.prototype)}}});var WC,te,KC,QC,YC,JC,ZC,zj,Gj,Wj,Kj,Qj,Yj,Jj,Zj,Xj,XC,eB,tB,rB,nB,sB,iB,eA,oB,aB,tA,cB,uB,lB,dB,fB,pB,hB,Fr,mB,rA,nA,sA,iA,ug,gB,lg,Ii,yB,dg,fg,Pi,pg,Oi,hg,mg,gg,Ni,ki,yg,Sg,_g,Di,Eg,Mi,Li,wg,bg,Lr,vg,xg,Rg,Tg,Cg,oA,Ag,Ig,Pg,ke,aA,SB,Og=w(()=>{ze();WC=v(Se()),te=v(se());xa();zl();KC=async(t,e)=>{let r=nA,n;return n=aA({...Zj(t,e),[iA]:gB,[oA]:sA}),rA(e,r,"/",void 0,n)},QC=async(t,e)=>{let r=nA,n;return n=aA({...Xj(t,e),[iA]:yB,[oA]:sA}),rA(e,r,"/",void 0,n)},YC=async(t,e)=>{if(t.statusCode>=300)return ZC(t,e);let r=await ui(t.body,e),n={};return n=oB(r.AssumeRoleResult,e),{$metadata:Fr(t),...n}},JC=async(t,e)=>{if(t.statusCode>=300)return ZC(t,e);let r=await ui(t.body,e),n={};return n=aB(r.AssumeRoleWithWebIdentityResult,e),{$metadata:Fr(t),...n}},ZC=async(t,e)=>{let r={...t,body:await Cu(t.body,e)},n=SB(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await zj(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Qj(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Yj(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Jj(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Gj(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Wj(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Kj(r,e);default:let s=r.body;return mB({output:t,parsedBody:s.Error,errorCode:n})}},zj=async(t,e)=>{let r=t.body,n=cB(r.Error,e),s=new ya({$metadata:Fr(t),...n});return(0,te.decorateServiceException)(s,r)},Gj=async(t,e)=>{let r=t.body,n=uB(r.Error,e),s=new va({$metadata:Fr(t),...n});return(0,te.decorateServiceException)(s,r)},Wj=async(t,e)=>{let r=t.body,n=lB(r.Error,e),s=new wa({$metadata:Fr(t),...n});return(0,te.decorateServiceException)(s,r)},Kj=async(t,e)=>{let r=t.body,n=dB(r.Error,e),s=new ba({$metadata:Fr(t),...n});return(0,te.decorateServiceException)(s,r)},Qj=async(t,e)=>{let r=t.body,n=fB(r.Error,e),s=new Sa({$metadata:Fr(t),...n});return(0,te.decorateServiceException)(s,r)},Yj=async(t,e)=>{let r=t.body,n=pB(r.Error,e),s=new _a({$metadata:Fr(t),...n});return(0,te.decorateServiceException)(s,r)},Jj=async(t,e)=>{let r=t.body,n=hB(r.Error,e),s=new Ea({$metadata:Fr(t),...n});return(0,te.decorateServiceException)(s,r)},Zj=(t,e)=>{let r={};if(t[Mi]!=null&&(r[Mi]=t[Mi]),t[Li]!=null&&(r[Li]=t[Li]),t[ki]!=null){let n=XC(t[ki],e);t[ki]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}if(t[Ni]!=null&&(r[Ni]=t[Ni]),t[Oi]!=null&&(r[Oi]=t[Oi]),t[Rg]!=null){let n=iB(t[Rg],e);t[Rg]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([s,i])=>{let o=`Tags.${s}`;r[o]=i})}if(t[Cg]!=null){let n=sB(t[Cg],e);t[Cg]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([s,i])=>{let o=`TransitiveTagKeys.${s}`;r[o]=i})}if(t[mg]!=null&&(r[mg]=t[mg]),t[vg]!=null&&(r[vg]=t[vg]),t[Tg]!=null&&(r[Tg]=t[Tg]),t[Lr]!=null&&(r[Lr]=t[Lr]),t[Sg]!=null){let n=rB(t[Sg],e);t[Sg]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([s,i])=>{let o=`ProvidedContexts.${s}`;r[o]=i})}return r},Xj=(t,e)=>{let r={};if(t[Mi]!=null&&(r[Mi]=t[Mi]),t[Li]!=null&&(r[Li]=t[Li]),t[Ig]!=null&&(r[Ig]=t[Ig]),t[_g]!=null&&(r[_g]=t[_g]),t[ki]!=null){let n=XC(t[ki],e);t[ki]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}return t[Ni]!=null&&(r[Ni]=t[Ni]),t[Oi]!=null&&(r[Oi]=t[Oi]),r},XC=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=eB(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},eB=(t,e)=>{let r={};return t[Pg]!=null&&(r[Pg]=t[Pg]),r},tB=(t,e)=>{let r={};return t[yg]!=null&&(r[yg]=t[yg]),t[pg]!=null&&(r[pg]=t[pg]),r},rB=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=tB(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},nB=(t,e)=>{let r={};return t[gg]!=null&&(r[gg]=t[gg]),t[Ag]!=null&&(r[Ag]=t[Ag]),r},sB=(t,e)=>{let r={},n=1;for(let s of t)s!==null&&(r[`member.${n}`]=s,n++);return r},iB=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=nB(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},eA=(t,e)=>{let r={};return t[lg]!=null&&(r[lg]=(0,te.expectString)(t[lg])),t[dg]!=null&&(r[dg]=(0,te.expectString)(t[dg])),r},oB=(t,e)=>{let r={};return t[Pi]!=null&&(r[Pi]=tA(t[Pi],e)),t[Ii]!=null&&(r[Ii]=eA(t[Ii],e)),t[Di]!=null&&(r[Di]=(0,te.strictParseInt32)(t[Di])),t[Lr]!=null&&(r[Lr]=(0,te.expectString)(t[Lr])),r},aB=(t,e)=>{let r={};return t[Pi]!=null&&(r[Pi]=tA(t[Pi],e)),t[bg]!=null&&(r[bg]=(0,te.expectString)(t[bg])),t[Ii]!=null&&(r[Ii]=eA(t[Ii],e)),t[Di]!=null&&(r[Di]=(0,te.strictParseInt32)(t[Di])),t[Eg]!=null&&(r[Eg]=(0,te.expectString)(t[Eg])),t[fg]!=null&&(r[fg]=(0,te.expectString)(t[fg])),t[Lr]!=null&&(r[Lr]=(0,te.expectString)(t[Lr])),r},tA=(t,e)=>{let r={};return t[ug]!=null&&(r[ug]=(0,te.expectString)(t[ug])),t[wg]!=null&&(r[wg]=(0,te.expectString)(t[wg])),t[xg]!=null&&(r[xg]=(0,te.expectString)(t[xg])),t[hg]!=null&&(r[hg]=(0,te.expectNonNull)((0,te.parseRfc3339DateTimeWithOffset)(t[hg]))),r},cB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},uB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},lB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},dB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},fB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},pB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},hB=(t,e)=>{let r={};return t[ke]!=null&&(r[ke]=(0,te.expectString)(t[ke])),r},Fr=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),mB=(0,te.withBaseException)(gt),rA=async(t,e,r,n,s)=>{let{hostname:i,protocol:o="https",port:a,path:c}=await t.endpoint(),u={protocol:o,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:e};return n!==void 0&&(u.hostname=n),s!==void 0&&(u.body=s),new WC.HttpRequest(u)},nA={"content-type":"application/x-www-form-urlencoded"},sA="2011-06-15",iA="Action",ug="AccessKeyId",gB="AssumeRole",lg="AssumedRoleId",Ii="AssumedRoleUser",yB="AssumeRoleWithWebIdentity",dg="Arn",fg="Audience",Pi="Credentials",pg="ContextAssertion",Oi="DurationSeconds",hg="Expiration",mg="ExternalId",gg="Key",Ni="Policy",ki="PolicyArns",yg="ProviderArn",Sg="ProvidedContexts",_g="ProviderId",Di="PackedPolicySize",Eg="Provider",Mi="RoleArn",Li="RoleSessionName",wg="SecretAccessKey",bg="SubjectFromWebIdentityToken",Lr="SourceIdentity",vg="SerialNumber",xg="SessionToken",Rg="Tags",Tg="TokenCode",Cg="TransitiveTagKeys",oA="Version",Ag="Value",Ig="WebIdentityToken",Pg="arn",ke="message",aA=t=>Object.entries(t).map(([e,r])=>(0,te.extendedEncodeURIComponent)(e)+"="+(0,te.extendedEncodeURIComponent)(r)).join("&"),SB=(t,e)=>{if(e.Error?.Code!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"}});var cA,uA,lA,vs,Gl=w(()=>{cA=v(yn()),uA=v(rs()),lA=v(se());kl();xa();Og();vs=class extends lA.Command.classBuilder().ep(Nl).m(function(e,r,n,s){return[(0,uA.getSerdePlugin)(n,this.serialize,this.deserialize),(0,cA.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,og).ser(KC).de(YC).build(){}});var dA,fA,pA,xs,Wl=w(()=>{dA=v(yn()),fA=v(rs()),pA=v(se());kl();xa();Og();xs=class extends pA.Command.classBuilder().ep(Nl).m(function(e,r,n,s){return[(0,fA.getSerdePlugin)(n,this.serialize,this.deserialize),(0,dA.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(ag,cg).ser(QC).de(JC).build(){}});var hA,_B,Kl,mA=w(()=>{hA=v(se());Gl();Wl();ga();_B={AssumeRoleCommand:vs,AssumeRoleWithWebIdentityCommand:xs},Kl=class extends lr{};(0,hA.createAggregatedClient)(_B,Kl)});var gA=w(()=>{Gl();Wl()});var yA=w(()=>{xa()});var SA,_A,EA,wA,bA,vA,xA=w(()=>{Qt();SA=v(bi());Gl();Wl();_A=t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},EA=async(t,e,r,n={})=>{let s=typeof t=="function"?await t():t,i=typeof e=="function"?await e():e,o=await(0,SA.stsRegionDefaultResolver)(n)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${i} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),s??i??o},wA=(t,e)=>{let r,n;return async(s,i)=>{if(n=s,!r){let{logger:l=t?.parentClientConfig?.logger,profile:p=t?.parentClientConfig?.profile,region:m,requestHandler:h=t?.parentClientConfig?.requestHandler,credentialProviderLogger:y,userAgentAppId:x=t?.parentClientConfig?.userAgentAppId}=t,R=await EA(m,t?.parentClientConfig?.region,y,{logger:l,profile:p}),C=!vA(h);r=new e({...t,userAgentAppId:x,profile:p,credentialDefaultProvider:()=>async()=>n,region:R,requestHandler:C?h:void 0,logger:l})}let{Credentials:o,AssumedRoleUser:a}=await r.send(new vs(i));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${i.RoleArn}`);let c=_A(a),u={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return tn(u,"CREDENTIALS_STS_ASSUME_ROLE","i"),u}},bA=(t,e)=>{let r;return async n=>{if(!r){let{logger:c=t?.parentClientConfig?.logger,profile:u=t?.parentClientConfig?.profile,region:l,requestHandler:p=t?.parentClientConfig?.requestHandler,credentialProviderLogger:m,userAgentAppId:h=t?.parentClientConfig?.userAgentAppId}=t,y=await EA(l,t?.parentClientConfig?.region,m,{logger:c,profile:u}),x=!vA(p);r=new e({...t,userAgentAppId:h,profile:u,region:y,requestHandler:x?p:void 0,logger:c})}let{Credentials:s,AssumedRoleUser:i}=await r.send(new xs(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let o=_A(i),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...o&&{accountId:o}};return o&&tn(a,"RESOLVED_ACCOUNT_ID","T"),tn(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},vA=t=>t?.metadata?.handlerProtocol==="h2"});var RA,TA,CA,EB,AA=w(()=>{xA();ga();RA=(t,e)=>e?class extends t{constructor(n){super(n);for(let s of e)this.middlewareStack.use(s)}}:t,TA=(t={},e)=>wA(t,RA(lr,e)),CA=(t={},e)=>bA(t,RA(lr,e)),EB=t=>e=>t({roleAssumer:TA(e),roleAssumerWithWebIdentity:CA(e),...e})});var Ng={};nt(Ng,{AssumeRoleCommand:()=>vs,AssumeRoleResponseFilterSensitiveLog:()=>og,AssumeRoleWithWebIdentityCommand:()=>xs,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>ag,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>cg,CredentialsFilterSensitiveLog:()=>ig,ExpiredTokenException:()=>ya,IDPCommunicationErrorException:()=>va,IDPRejectedClaimException:()=>wa,InvalidIdentityTokenException:()=>ba,MalformedPolicyDocumentException:()=>Sa,PackedPolicyTooLargeException:()=>_a,RegionDisabledException:()=>Ea,STS:()=>Kl,STSClient:()=>lr,STSServiceException:()=>gt,__Client:()=>ng.Client,decorateDefaultCredentialProvider:()=>EB,getDefaultRoleAssumer:()=>TA,getDefaultRoleAssumerWithWebIdentity:()=>CA});var kg=w(()=>{ga();mA();gA();yA();AA();zl()});var Lg=b(IA=>{"use strict";var Mg=Ir(),Dg=at(),wB=require("child_process"),bB=require("util"),vB=(Qt(),ue(rn)),xB=(t,e,r)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let i=new Date;if(new Date(e.Expiration)<i)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let n=e.AccountId;!n&&r?.[t]?.aws_account_id&&(n=r[t].aws_account_id);let s={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...n&&{accountId:n}};return vB.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},RB=async(t,e,r)=>{let n=e[t];if(e[t]){let s=n.credential_process;if(s!==void 0){let i=bB.promisify(Mg.externalDataInterceptor?.getTokenRecord?.().exec??wB.exec);try{let{stdout:o}=await i(s),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return xB(t,a,e)}catch(o){throw new Dg.CredentialsProviderError(o.message,{logger:r})}}else throw new Dg.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new Dg.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},TB=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await Mg.parseKnownFiles(t);return RB(Mg.getProfileName({profile:t.profile??e?.profile}),r,t.logger)};IA.fromProcess=TB});var Fg=b(fr=>{"use strict";var CB=fr&&fr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),AB=fr&&fr.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),IB=fr&&fr.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),s=0;s<n.length;s++)n[s]!=="default"&&CB(r,e,n[s]);return AB(r,e),r}})();Object.defineProperty(fr,"__esModule",{value:!0});fr.fromWebToken=void 0;var PB=t=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:i,policyArns:o,policy:a,durationSeconds:c}=t,{roleAssumerWithWebIdentity:u}=t;if(!u){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>IB((kg(),ue(Ng))));u=l({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:{...e?.callerClientConfig,...t.parentClientConfig}},t.clientPlugins)}return u({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:i,PolicyArns:o,Policy:a,DurationSeconds:c})};fr.fromWebToken=PB});var OA=b(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.fromTokenFile=void 0;var OB=(Qt(),ue(rn)),NB=at(),kB=Ir(),DB=require("fs"),MB=Fg(),PA="AWS_WEB_IDENTITY_TOKEN_FILE",LB="AWS_ROLE_ARN",FB="AWS_ROLE_SESSION_NAME",qB=(t={})=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=t?.webIdentityTokenFile??process.env[PA],n=t?.roleArn??process.env[LB],s=t?.roleSessionName??process.env[FB];if(!r||!n)throw new NB.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let i=await(0,MB.fromWebToken)({...t,webIdentityToken:kB.externalDataInterceptor?.getTokenRecord?.()[r]??(0,DB.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(e);return r===process.env[PA]&&(0,OB.setCredentialFeature)(i,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),i};Ql.fromTokenFile=qB});var qg=b(Ra=>{"use strict";var NA=OA(),kA=Fg();Object.keys(NA).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ra,t)&&Object.defineProperty(Ra,t,{enumerable:!0,get:function(){return NA[t]}})});Object.keys(kA).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ra,t)&&Object.defineProperty(Ra,t,{enumerable:!0,get:function(){return kA[t]}})})});var UA=b(qA=>{"use strict";var $g=Ir(),Ta=at(),Pn=(Qt(),ue(rn)),UB=(t,e,r)=>{let n={EcsContainer:async s=>{let{fromHttp:i}=await Promise.resolve().then(()=>v(Am())),{fromContainerMetadata:o}=await Promise.resolve().then(()=>v($o()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Ta.chain(i(s??{}),o(s))().then(Ug)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:i}=await Promise.resolve().then(()=>v($o()));return async()=>i(s)().then(Ug)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:i}=await Promise.resolve().then(()=>v(Em()));return async()=>i(s)().then(Ug)}};if(t in n)return n[t];throw new Ta.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},Ug=t=>Pn.setCredentialFeature(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),$B=(t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(jB(t,{profile:e,logger:r})||BB(t,{profile:e,logger:r})),jB=(t,{profile:e,logger:r})=>{let n=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return n&&r?.debug?.(`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`),n},BB=(t,{profile:e,logger:r})=>{let n=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return n&&r?.debug?.(`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`),n},HB=async(t,e,r,n={},s)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=e[t],{source_profile:o,region:a}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:u}=await Promise.resolve().then(()=>(kg(),Ng));r.roleAssumer=u({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(o&&o in n)throw new Ta.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${$g.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${o?`source_profile=[${o}]`:`profile=[${t}]`}`);let c=o?s(o,e,r,{...n,[o]:!0},DA(e[o]??{})):(await UB(i.credential_source,t,r.logger)(r))();if(DA(i))return c.then(u=>Pn.setCredentialFeature(u,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let u={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:l}=i;if(l){if(!r.mfaCodeProvider)throw new Ta.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});u.SerialNumber=l,u.TokenCode=await r.mfaCodeProvider(l)}let p=await c;return r.roleAssumer(p,u).then(m=>Pn.setCredentialFeature(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},DA=t=>!t.role_arn&&!!t.credential_source,VB=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",zB=async(t,e)=>Promise.resolve().then(()=>v(Lg())).then(({fromProcess:r})=>r({...t,profile:e})().then(n=>Pn.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),GB=async(t,e,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>v(Xm()));return n({profile:t,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(s=>e.sso_session?Pn.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO","r"):Pn.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},WB=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),MA=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,LA=async(t,e)=>{e?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return Pn.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},KB=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,QB=async(t,e)=>Promise.resolve().then(()=>v(qg())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})().then(n=>Pn.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),FA=async(t,e,r,n={},s=!1)=>{let i=e[t];if(Object.keys(n).length>0&&MA(i))return LA(i,r);if(s||$B(i,{profile:t,logger:r.logger}))return HB(t,e,r,n,FA);if(MA(i))return LA(i,r);if(KB(i))return QB(i,r);if(VB(i))return zB(r,t);if(WB(i))return await GB(t,i,r);throw new Ta.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},YB=(t={})=>async({callerClientConfig:e}={})=>{let r={...t,parentClientConfig:{...e,...t.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await $g.parseKnownFiles(r);return FA($g.getProfileName({profile:t.profile??e?.profile}),n,r)};qA.fromIni=YB});var HA=b(Yl=>{"use strict";var jg=Em(),Ca=at(),JB=Ir(),$A="AWS_EC2_METADATA_DISABLED",ZB=async t=>{let{ENV_CMDS_FULL_URI:e,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>v($o()));if(process.env[r]||process.env[e]){t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:i}=await Promise.resolve().then(()=>v(Am()));return Ca.chain(i(t),n(t))}return process.env[$A]&&process.env[$A]!=="false"?async()=>{throw new Ca.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:(t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(t))};function XB(t,e){let r=eH(t),n,s,i,o=async a=>{if(a?.forceRefresh)return await r(a);if(i?.expiration&&i?.expiration?.getTime()<Date.now()&&(i=void 0),n)await n;else if(!i||e?.(i))if(i)s||(s=r(a).then(c=>{i=c,s=void 0}));else return n=r(a).then(c=>{i=c,n=void 0}),o(a);return i};return o}var eH=t=>async e=>{let r;for(let n of t)try{return await n(e)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},jA=!1,tH=(t={})=>XB([async()=>{if(t.profile??process.env[JB.ENV_PROFILE])throw process.env[jg.ENV_KEY]&&process.env[jg.ENV_SECRET]&&(jA||((t.logger?.warn&&t.logger?.constructor?.name!=="NoOpLogger"?t.logger.warn.bind(t.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),jA=!0)),new Ca.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),jg.fromEnv(t)()},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=t;if(!r&&!n&&!s&&!i&&!o)throw new Ca.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>v(Xm()));return a(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>v(UA()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>v(Lg()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>v(qg()));return r(t)(e)},async()=>(t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await ZB(t))()),async()=>{throw new Ca.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}],BA),rH=t=>t?.expiration!==void 0,BA=t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5;Yl.credentialsTreatedAsExpired=BA;Yl.credentialsWillNeedRefresh=rH;Yl.defaultProvider=tH});var aI=b(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.ruleSet=void 0;var sI="required",yt="fn",St="argv",Rs="ref",On="properties",Nn="headers",VA=!0,zA="isSet",Aa="booleanEquals",Fi="error",pr="endpoint",qr="tree",Jl="PartitionResult",Bg="stringEquals",GA={[sI]:!1,type:"string"},WA={[sI]:!0,default:!1,type:"boolean"},KA={[Rs]:"Endpoint"},iI={[yt]:Aa,[St]:[{[Rs]:"UseFIPS"},!0]},oI={[yt]:Aa,[St]:[{[Rs]:"UseDualStack"},!0]},$t={},QA={[yt]:"getAttr",[St]:[{[Rs]:Jl},"supportsFIPS"]},YA={[yt]:Aa,[St]:[!0,{[yt]:"getAttr",[St]:[{[Rs]:Jl},"supportsDualStack"]}]},Hg={[yt]:"getAttr",[St]:[{[Rs]:Jl},"name"]},JA={url:"https://secretsmanager-fips.{Region}.amazonaws.com",[On]:{},[Nn]:{}},ZA={url:"https://secretsmanager.{Region}.amazonaws.com",[On]:{},[Nn]:{}},XA=[iI],eI=[oI],tI=[{[Rs]:"Region"}],rI=[{[yt]:Bg,[St]:["aws",Hg]}],nI=[{[yt]:Bg,[St]:["aws-us-gov",Hg]}],nH={version:"1.0",parameters:{Region:GA,UseDualStack:WA,UseFIPS:WA,Endpoint:GA},rules:[{conditions:[{[yt]:zA,[St]:[KA]}],rules:[{conditions:XA,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Fi},{conditions:eI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Fi},{endpoint:{url:KA,[On]:$t,[Nn]:$t},type:pr}],type:qr},{conditions:[{[yt]:zA,[St]:tI}],rules:[{conditions:[{[yt]:"aws.partition",[St]:tI,assign:Jl}],rules:[{conditions:[iI,oI],rules:[{conditions:[{[yt]:Aa,[St]:[VA,QA]},YA],rules:[{conditions:rI,endpoint:JA,type:pr},{conditions:nI,endpoint:JA,type:pr},{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[On]:$t,[Nn]:$t},type:pr}],type:qr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Fi}],type:qr},{conditions:XA,rules:[{conditions:[{[yt]:Aa,[St]:[QA,VA]}],rules:[{endpoint:{url:"https://secretsmanager-fips.{Region}.{PartitionResult#dnsSuffix}",[On]:$t,[Nn]:$t},type:pr}],type:qr},{error:"FIPS is enabled but this partition does not support FIPS",type:Fi}],type:qr},{conditions:eI,rules:[{conditions:[YA],rules:[{conditions:rI,endpoint:ZA,type:pr},{conditions:[{[yt]:Bg,[St]:["aws-cn",Hg]}],endpoint:{url:"https://secretsmanager.{Region}.amazonaws.com.cn",[On]:$t,[Nn]:$t},type:pr},{conditions:nI,endpoint:ZA,type:pr},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dualStackDnsSuffix}",[On]:$t,[Nn]:$t},type:pr}],type:qr},{error:"DualStack is enabled but this partition does not support DualStack",type:Fi}],type:qr},{endpoint:{url:"https://secretsmanager.{Region}.{PartitionResult#dnsSuffix}",[On]:$t,[Nn]:$t},type:pr}],type:qr}],type:qr},{error:"Invalid Configuration: Missing Region",type:Fi}]};Zl.ruleSet=nH});var cI=b(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.defaultEndpointResolver=void 0;var sH=Js(),Vg=fs(),iH=aI(),oH=new Vg.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),aH=(t,e={})=>oH.get(t,()=>(0,Vg.resolveEndpoint)(iH.ruleSet,{endpointParams:t,logger:e.logger}));Xl.defaultEndpointResolver=aH;Vg.customEndpointFunctions.aws=sH.awsEndpointFunctions});var dI=b(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.getRuntimeConfig=void 0;var cH=(ze(),ue(Ar)),uH=(Xh(),ue(rx)),lH=se(),dH=en(),uI=Ve(),lI=He(),fH=_m(),pH=cI(),hH=t=>({apiVersion:"2017-10-17",base64Decoder:t?.base64Decoder??uI.fromBase64,base64Encoder:t?.base64Encoder??uI.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??pH.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??fH.defaultSecretsManagerHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new cH.AwsSdkSigV4Signer}],logger:t?.logger??new lH.NoOpLogger,protocol:t?.protocol??new uH.AwsJson1_1Protocol({defaultNamespace:"com.amazonaws.secretsmanager",serviceTarget:"secretsmanager",awsQueryCompatible:!1}),serviceId:t?.serviceId??"Secrets Manager",urlParser:t?.urlParser??dH.parseUrl,utf8Decoder:t?.utf8Decoder??lI.fromUtf8,utf8Encoder:t?.utf8Encoder??lI.toUtf8});ed.getRuntimeConfig=hH});var gI=b(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.getRuntimeConfig=void 0;var mH=(Eo(),ue(_o)),gH=mH.__importDefault(dR()),fI=(ze(),ue(Ar)),yH=HA(),pI=Bo(),td=kt(),SH=Ho(),hI=Nr(),Ts=Pr(),mI=ns(),_H=Vo(),EH=mi(),wH=dI(),bH=se(),vH=Go(),xH=se(),RH=t=>{(0,xH.emitWarningIfUnsupportedVersion)(process.version);let e=(0,vH.resolveDefaultsModeConfig)(t),r=()=>e().then(bH.loadConfigsForDefaultMode),n=(0,wH.getRuntimeConfig)(t);(0,fI.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Ts.loadConfig)(fI.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??_H.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??yH.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,pI.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:gH.default.version}),maxAttempts:t?.maxAttempts??(0,Ts.loadConfig)(hI.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Ts.loadConfig)(td.NODE_REGION_CONFIG_OPTIONS,{...td.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:mI.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Ts.loadConfig)({...hI.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||EH.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??SH.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??mI.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Ts.loadConfig)(td.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Ts.loadConfig)(td.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Ts.loadConfig)(pI.NODE_APP_ID_CONFIG_OPTIONS,s)}};rd.getRuntimeConfig=RH});var fP=b(G=>{"use strict";var yI=ro(),TH=no(),CH=so(),SI=pi(),AH=kt(),qi=(pt(),ue(Qs)),_t=(be(),ue(rp)),IH=ko(),Ee=yn(),_I=Nr(),de=se(),EI=_m(),PH=gI(),wI=bi(),bI=Se(),OH=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"secretsmanager"}),Re={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},NH=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},kH=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),DH=(t,e)=>{let r=Object.assign(wI.getAwsRegionExtensionConfiguration(t),de.getDefaultExtensionConfiguration(t),bI.getHttpHandlerExtensionConfiguration(t),NH(t));return e.forEach(n=>n.configure(r)),Object.assign(t,wI.resolveAwsRegionExtensionConfiguration(r),de.resolveDefaultRuntimeConfig(r),bI.resolveHttpHandlerRuntimeConfig(r),kH(r))},Cs=class extends de.Client{config;constructor(...[e]){let r=PH.getRuntimeConfig(e||{});super(r),this.initConfig=r;let n=OH(r),s=SI.resolveUserAgentConfig(n),i=_I.resolveRetryConfig(s),o=AH.resolveRegionConfig(i),a=yI.resolveHostHeaderConfig(o),c=Ee.resolveEndpointConfig(a),u=EI.resolveHttpAuthSchemeConfig(c),l=DH(u,e?.extensions||[]);this.config=l,this.middlewareStack.use(_t.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(SI.getUserAgentPlugin(this.config)),this.middlewareStack.use(_I.getRetryPlugin(this.config)),this.middlewareStack.use(IH.getContentLengthPlugin(this.config)),this.middlewareStack.use(yI.getHostHeaderPlugin(this.config)),this.middlewareStack.use(TH.getLoggerPlugin(this.config)),this.middlewareStack.use(CH.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(qi.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:EI.defaultSecretsManagerHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new qi.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(qi.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Et=class vI extends de.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,vI.prototype)}},MH={all:"all",description:"description",name:"name",owning_service:"owning-service",primary_region:"primary-region",tag_key:"tag-key",tag_value:"tag-value"},xI=class RI extends Et{name="DecryptionFailure";$fault="client";Message;constructor(e){super({name:"DecryptionFailure",$fault:"client",...e}),Object.setPrototypeOf(this,RI.prototype),this.Message=e.Message}},TI=class CI extends Et{name="InternalServiceError";$fault="server";Message;constructor(e){super({name:"InternalServiceError",$fault:"server",...e}),Object.setPrototypeOf(this,CI.prototype),this.Message=e.Message}},AI=class II extends Et{name="InvalidNextTokenException";$fault="client";Message;constructor(e){super({name:"InvalidNextTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,II.prototype),this.Message=e.Message}},PI=class OI extends Et{name="InvalidParameterException";$fault="client";Message;constructor(e){super({name:"InvalidParameterException",$fault:"client",...e}),Object.setPrototypeOf(this,OI.prototype),this.Message=e.Message}},NI=class kI extends Et{name="InvalidRequestException";$fault="client";Message;constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),Object.setPrototypeOf(this,kI.prototype),this.Message=e.Message}},DI=class MI extends Et{name="ResourceNotFoundException";$fault="client";Message;constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,MI.prototype),this.Message=e.Message}},LH={Failed:"Failed",InProgress:"InProgress",InSync:"InSync"},LI=class FI extends Et{name="EncryptionFailure";$fault="client";Message;constructor(e){super({name:"EncryptionFailure",$fault:"client",...e}),Object.setPrototypeOf(this,FI.prototype),this.Message=e.Message}},qI=class UI extends Et{name="LimitExceededException";$fault="client";Message;constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,UI.prototype),this.Message=e.Message}},$I=class jI extends Et{name="MalformedPolicyDocumentException";$fault="client";Message;constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),Object.setPrototypeOf(this,jI.prototype),this.Message=e.Message}},BI=class HI extends Et{name="PreconditionNotMetException";$fault="client";Message;constructor(e){super({name:"PreconditionNotMetException",$fault:"client",...e}),Object.setPrototypeOf(this,HI.prototype),this.Message=e.Message}},VI=class zI extends Et{name="ResourceExistsException";$fault="client";Message;constructor(e){super({name:"ResourceExistsException",$fault:"client",...e}),Object.setPrototypeOf(this,zI.prototype),this.Message=e.Message}},FH={asc:"asc",desc:"desc"},GI=class WI extends Et{name="PublicPolicyException";$fault="client";Message;constructor(e){super({name:"PublicPolicyException",$fault:"client",...e}),Object.setPrototypeOf(this,WI.prototype),this.Message=e.Message}},qH="AutomaticallyAfterDays",UH="APIErrorListType",$H="APIErrorType",qe="ARN",KI="AddReplicaRegions",jH="AddReplicaRegionListType",BH="BatchGetSecretValue",HH="BatchGetSecretValueRequest",VH="BatchGetSecretValueResponse",zH="BlockPublicPolicy",Na="CreatedDate",GH="CheckName",WH="CancelRotateSecret",KH="CancelRotateSecretRequest",QH="CancelRotateSecretResponse",xd="ClientRequestToken",YH="CreateSecret",JH="CreateSecretRequest",ZH="CreateSecretResponse",Rd="Description",XH="DeletionDate",QI="DeletedDate",e4="DecryptionFailure",t4="DeleteResourcePolicy",r4="DeleteResourcePolicyRequest",n4="DeleteResourcePolicyResponse",s4="DeleteSecret",i4="DeleteSecretRequest",o4="DeleteSecretResponse",a4="DescribeSecretRequest",c4="DescribeSecretResponse",u4="DescribeSecret",l4="Duration",d4="Errors",f4="ErrorCode",p4="ExcludeCharacters",h4="EncryptionFailure",m4="ExcludeLowercase",g4="ErrorMessage",y4="ExcludeNumbers",S4="ExcludePunctuation",_4="ExcludeUppercase",YI="Filters",E4="ForceDeleteWithoutRecovery",w4="FiltersListType",JI="ForceOverwriteReplicaSecret",b4="Filter",v4="GetRandomPassword",x4="GetRandomPasswordRequest",R4="GetRandomPasswordResponse",T4="GetResourcePolicyRequest",C4="GetResourcePolicyResponse",A4="GetResourcePolicy",I4="GetSecretValue",P4="GetSecretValueRequest",O4="GetSecretValueResponse",N4="IncludeDeprecated",k4="InvalidNextTokenException",D4="IncludePlannedDeletion",M4="InvalidParameterException",L4="InvalidRequestException",F4="IncludeSpace",q4="InternalServiceError",ZI="Key",Ui="KmsKeyId",U4="KmsKeyIds",Td="LastAccessedDate",XI="LastChangedDate",$4="LimitExceededException",eP="LastRotatedDate",j4="ListSecrets",B4="ListSecretsRequest",H4="ListSecretsResponse",V4="ListSecretVersionIds",z4="ListSecretVersionIdsRequest",G4="ListSecretVersionIdsResponse",Ct="Message",W4="MalformedPolicyDocumentException",zg="MaxResults",K4="MoveToVersionId",Qe="Name",tP="NextRotationDate",$i="NextToken",rP="OwningService",Q4="PasswordLength",Y4="PreconditionNotMetException",J4="PublicPolicyException",nP="PrimaryRegion",Z4="PutResourcePolicy",X4="PutResourcePolicyRequest",eV="PutResourcePolicyResponse",tV="PutSecretValue",rV="PutSecretValueRequest",nV="PutSecretValueResponse",sV="PolicyValidationPassed",sP="Region",iP="RotationEnabled",iV="ResourceExistsException",oV="RequireEachIncludedType",aV="RemoveFromVersionId",cV="RotateImmediately",Gg="RotationLambdaARN",uV="ResourceNotFoundException",lV="RandomPassword",dV="RandomPasswordType",Wg="ResourcePolicy",Kg="RotationRules",fV="RemoveRegionsFromReplication",pV="RemoveRegionsFromReplicationRequest",hV="RemoveRegionsFromReplicationResponse",mV="RemoveReplicaRegions",gV="ReplicaRegionType",yV="RotationRulesType",Cd="ReplicationStatus",SV="ReplicationStatusListType",_V="RestoreSecretRequest",EV="RestoreSecretResponse",wV="RotateSecretRequest",bV="RotateSecretResponse",vV="ReplicationStatusType",xV="ReplicateSecretToRegions",RV="ReplicateSecretToRegionsRequest",TV="ReplicateSecretToRegionsResponse",CV="RestoreSecret",AV="RotateSecret",IV="RotationToken",PV="RotationTokenType",OV="RecoveryWindowInDays",NV="Status",ka="SecretBinary",kV="SecretBinaryType",DV="ScheduleExpression",Me="SecretId",MV="SecretIdList",LV="SecretList",FV="SecretListEntry",qV="SecretListType",UV="StatusMessage",$V="SortOrder",jV="StopReplicationToReplica",BV="StopReplicationToReplicaRequest",HV="StopReplicationToReplicaResponse",Da="SecretString",VV="SecretStringType",zV="SecretValues",GV="SecretValueEntry",WV="SecretVersionsListEntry",KV="SecretVersionsListType",QV="SecretValuesType",YV="SecretVersionsToStages",oP="SecretVersionsToStagesMapType",Ad="Tags",JV="TagKeys",ZV="TagListType",XV="TagResource",ez="TagResourceRequest",tz="Tag",rz="UntagResource",nz="UntagResourceRequest",sz="UpdateSecret",iz="UpdateSecretRequest",oz="UpdateSecretResponse",az="UpdateSecretVersionStage",cz="UpdateSecretVersionStageRequest",uz="UpdateSecretVersionStageResponse",lz="Values",dz="ValidationErrors",fz="ValidationErrorsEntry",pz="ValidationErrorsType",Ur="VersionId",hz="VersionIdsToStages",mz="ValidateResourcePolicy",gz="ValidateResourcePolicyRequest",yz="ValidateResourcePolicyResponse",aP="VersionStage",Ma="VersionStages",Sz="Value",_z="Versions",Jt="client",jt="error",Ez="server",cP="smithy.ts.sdk.synthetic.com.amazonaws.secretsmanager",I="com.amazonaws.secretsmanager",wz=[0,I,dV,8,0],bz=[0,I,PV,8,0],La=[0,I,kV,8,21],Fa=[0,I,VV,8,0],vz=[3,I,$H,0,[Me,f4,Ct],[0,0,0]],xz=[3,I,HH,0,[MV,YI,zg,$i],[64,()=>dP,1,0]],Rz=[3,I,VH,0,[zV,$i,d4],[[()=>F3,0],0,()=>M3]],Tz=[3,I,KH,0,[Me],[0]],Cz=[3,I,QH,0,[qe,Qe,Ur],[0,0,0]],Az=[3,I,JH,0,[Qe,xd,Rd,Ui,ka,Da,Ad,KI,JI],[0,[0,4],0,0,[()=>La,0],[()=>Fa,0],()=>Pd,()=>lP,2]],Iz=[3,I,ZH,0,[qe,Qe,Ur,Cd],[0,0,0,()=>Id]],Pz=[-3,I,e4,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(Pz,xI);var Oz=[3,I,r4,0,[Me],[0]],Nz=[3,I,n4,0,[qe,Qe],[0,0]],kz=[3,I,i4,0,[Me,OV,E4],[0,1,2]],Dz=[3,I,o4,0,[qe,Qe,XH],[0,0,4]],Mz=[3,I,a4,0,[Me],[0]],Lz=[3,I,c4,0,[qe,Qe,Rd,Ui,iP,Gg,Kg,eP,XI,Td,QI,tP,Ad,hz,rP,Na,nP,Cd],[0,0,0,0,2,0,()=>Qg,4,4,4,4,4,()=>Pd,[2,I,oP,0,0,64],0,4,0,()=>Id]],Fz=[-3,I,h4,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(Fz,LI);var qz=[3,I,b4,0,[ZI,lz],[0,64]],Uz=[3,I,x4,0,[Q4,p4,y4,S4,_4,m4,F4,oV],[1,0,2,2,2,2,2,2]],$z=[3,I,R4,0,[lV],[[()=>wz,0]]],jz=[3,I,T4,0,[Me],[0]],Bz=[3,I,C4,0,[qe,Qe,Wg],[0,0,0]],Hz=[3,I,P4,0,[Me,Ur,aP],[0,0,0]],Vz=[3,I,O4,0,[qe,Qe,Ur,ka,Da,Ma,Na],[0,0,0,[()=>La,0],[()=>Fa,0],64,4]],zz=[-3,I,q4,{[jt]:Ez},[Ct],[0]];_t.TypeRegistry.for(I).registerError(zz,TI);var Gz=[-3,I,k4,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(Gz,AI);var Wz=[-3,I,M4,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(Wz,PI);var Kz=[-3,I,L4,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(Kz,NI);var Qz=[-3,I,$4,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(Qz,qI);var Yz=[3,I,B4,0,[D4,zg,$i,YI,$V],[2,1,0,()=>dP,0]],Jz=[3,I,H4,0,[LV,$i],[()=>L3,0]],Zz=[3,I,z4,0,[Me,zg,$i,N4],[0,1,0,2]],Xz=[3,I,G4,0,[_z,$i,qe,Qe],[()=>q3,0,0,0]],e3=[-3,I,W4,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(e3,$I);var t3=[-3,I,Y4,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(t3,BI);var r3=[-3,I,J4,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(r3,GI);var n3=[3,I,X4,0,[Me,Wg,zH],[0,0,2]],s3=[3,I,eV,0,[qe,Qe],[0,0]],i3=[3,I,rV,0,[Me,xd,ka,Da,Ma,IV],[0,[0,4],[()=>La,0],[()=>Fa,0],64,[()=>bz,0]]],o3=[3,I,nV,0,[qe,Qe,Ur,Ma],[0,0,0,64]],a3=[3,I,pV,0,[Me,mV],[0,64]],c3=[3,I,hV,0,[qe,Cd],[0,()=>Id]],u3=[3,I,gV,0,[sP,Ui],[0,0]],l3=[3,I,RV,0,[Me,KI,JI],[0,()=>lP,2]],d3=[3,I,TV,0,[qe,Cd],[0,()=>Id]],f3=[3,I,vV,0,[sP,Ui,NV,UV,Td],[0,0,0,0,4]],p3=[-3,I,iV,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(p3,VI);var h3=[-3,I,uV,{[jt]:Jt},[Ct],[0]];_t.TypeRegistry.for(I).registerError(h3,DI);var m3=[3,I,_V,0,[Me],[0]],g3=[3,I,EV,0,[qe,Qe],[0,0]],y3=[3,I,wV,0,[Me,xd,Gg,Kg,cV],[0,[0,4],0,()=>Qg,2]],S3=[3,I,bV,0,[qe,Qe,Ur],[0,0,0]],Qg=[3,I,yV,0,[qH,l4,DV],[1,0,0]],_3=[3,I,FV,0,[qe,Qe,Rd,Ui,iP,Gg,Kg,eP,XI,Td,QI,tP,Ad,YV,rP,Na,nP],[0,0,0,0,2,0,()=>Qg,4,4,4,4,4,()=>Pd,[2,I,oP,0,0,64],0,4,0]],E3=[3,I,GV,0,[qe,Qe,Ur,ka,Da,Ma,Na],[0,0,0,[()=>La,0],[()=>Fa,0],64,4]],w3=[3,I,WV,0,[Ur,Ma,Td,Na,U4],[0,64,4,4,64]],b3=[3,I,BV,0,[Me],[0]],v3=[3,I,HV,0,[qe],[0]],x3=[3,I,tz,0,[ZI,Sz],[0,0]],R3=[3,I,ez,0,[Me,Ad],[0,()=>Pd]],T3=[3,I,nz,0,[Me,JV],[0,64]],C3=[3,I,iz,0,[Me,xd,Rd,Ui,ka,Da],[0,[0,4],0,0,[()=>La,0],[()=>Fa,0]]],A3=[3,I,oz,0,[qe,Qe,Ur],[0,0,0]],I3=[3,I,cz,0,[Me,aP,aV,K4],[0,0,0,0]],P3=[3,I,uz,0,[qe,Qe],[0,0]],O3=[3,I,gz,0,[Me,Wg],[0,0]],N3=[3,I,yz,0,[sV,dz],[2,()=>U3]],k3=[3,I,fz,0,[GH,g4],[0,0]],uP="unit",D3=[-3,cP,"SecretsManagerServiceException",0,[],[]];_t.TypeRegistry.for(cP).registerError(D3,Et);var lP=[1,I,jH,0,()=>u3],M3=[1,I,UH,0,()=>vz],dP=[1,I,w4,0,()=>qz],Id=[1,I,SV,0,()=>f3],L3=[1,I,qV,0,()=>_3],F3=[1,I,QV,0,[()=>E3,0]],q3=[1,I,KV,0,()=>w3],Pd=[1,I,ZV,0,()=>x3],U3=[1,I,pz,0,()=>k3],$3=[9,I,BH,0,()=>xz,()=>Rz],j3=[9,I,WH,0,()=>Tz,()=>Cz],B3=[9,I,YH,0,()=>Az,()=>Iz],H3=[9,I,t4,0,()=>Oz,()=>Nz],V3=[9,I,s4,0,()=>kz,()=>Dz],z3=[9,I,u4,0,()=>Mz,()=>Lz],G3=[9,I,v4,0,()=>Uz,()=>$z],W3=[9,I,A4,0,()=>jz,()=>Bz],K3=[9,I,I4,0,()=>Hz,()=>Vz],Q3=[9,I,j4,0,()=>Yz,()=>Jz],Y3=[9,I,V4,0,()=>Zz,()=>Xz],J3=[9,I,Z4,0,()=>n3,()=>s3],Z3=[9,I,tV,0,()=>i3,()=>o3],X3=[9,I,fV,0,()=>a3,()=>c3],e6=[9,I,xV,0,()=>l3,()=>d3],t6=[9,I,CV,0,()=>m3,()=>g3],r6=[9,I,AV,0,()=>y3,()=>S3],n6=[9,I,jV,0,()=>b3,()=>v3],s6=[9,I,XV,0,()=>R3,()=>uP],i6=[9,I,rz,0,()=>T3,()=>uP],o6=[9,I,sz,0,()=>C3,()=>A3],a6=[9,I,az,0,()=>I3,()=>P3],c6=[9,I,mz,0,()=>O3,()=>N3],Ia=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","BatchGetSecretValue",{}).n("SecretsManagerClient","BatchGetSecretValueCommand").sc($3).build(){},nd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","CancelRotateSecret",{}).n("SecretsManagerClient","CancelRotateSecretCommand").sc(j3).build(){},sd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","CreateSecret",{}).n("SecretsManagerClient","CreateSecretCommand").sc(B3).build(){},id=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteResourcePolicy",{}).n("SecretsManagerClient","DeleteResourcePolicyCommand").sc(H3).build(){},od=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","DeleteSecret",{}).n("SecretsManagerClient","DeleteSecretCommand").sc(V3).build(){},ad=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","DescribeSecret",{}).n("SecretsManagerClient","DescribeSecretCommand").sc(z3).build(){},cd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetRandomPassword",{}).n("SecretsManagerClient","GetRandomPasswordCommand").sc(G3).build(){},ud=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetResourcePolicy",{}).n("SecretsManagerClient","GetResourcePolicyCommand").sc(W3).build(){},ld=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","GetSecretValue",{}).n("SecretsManagerClient","GetSecretValueCommand").sc(K3).build(){},Pa=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecrets",{}).n("SecretsManagerClient","ListSecretsCommand").sc(Q3).build(){},Oa=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ListSecretVersionIds",{}).n("SecretsManagerClient","ListSecretVersionIdsCommand").sc(Y3).build(){},dd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","PutResourcePolicy",{}).n("SecretsManagerClient","PutResourcePolicyCommand").sc(J3).build(){},fd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","PutSecretValue",{}).n("SecretsManagerClient","PutSecretValueCommand").sc(Z3).build(){},pd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","RemoveRegionsFromReplication",{}).n("SecretsManagerClient","RemoveRegionsFromReplicationCommand").sc(X3).build(){},hd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ReplicateSecretToRegions",{}).n("SecretsManagerClient","ReplicateSecretToRegionsCommand").sc(e6).build(){},md=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","RestoreSecret",{}).n("SecretsManagerClient","RestoreSecretCommand").sc(t6).build(){},gd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","RotateSecret",{}).n("SecretsManagerClient","RotateSecretCommand").sc(r6).build(){},yd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","StopReplicationToReplica",{}).n("SecretsManagerClient","StopReplicationToReplicaCommand").sc(n6).build(){},Sd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","TagResource",{}).n("SecretsManagerClient","TagResourceCommand").sc(s6).build(){},_d=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","UntagResource",{}).n("SecretsManagerClient","UntagResourceCommand").sc(i6).build(){},Ed=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecret",{}).n("SecretsManagerClient","UpdateSecretCommand").sc(o6).build(){},wd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","UpdateSecretVersionStage",{}).n("SecretsManagerClient","UpdateSecretVersionStageCommand").sc(a6).build(){},bd=class extends de.Command.classBuilder().ep(Re).m(function(e,r,n,s){return[Ee.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("secretsmanager","ValidateResourcePolicy",{}).n("SecretsManagerClient","ValidateResourcePolicyCommand").sc(c6).build(){},u6={BatchGetSecretValueCommand:Ia,CancelRotateSecretCommand:nd,CreateSecretCommand:sd,DeleteResourcePolicyCommand:id,DeleteSecretCommand:od,DescribeSecretCommand:ad,GetRandomPasswordCommand:cd,GetResourcePolicyCommand:ud,GetSecretValueCommand:ld,ListSecretsCommand:Pa,ListSecretVersionIdsCommand:Oa,PutResourcePolicyCommand:dd,PutSecretValueCommand:fd,RemoveRegionsFromReplicationCommand:pd,ReplicateSecretToRegionsCommand:hd,RestoreSecretCommand:md,RotateSecretCommand:gd,StopReplicationToReplicaCommand:yd,TagResourceCommand:Sd,UntagResourceCommand:_d,UpdateSecretCommand:Ed,UpdateSecretVersionStageCommand:wd,ValidateResourcePolicyCommand:bd},vd=class extends Cs{};de.createAggregatedClient(u6,vd);var l6=qi.createPaginator(Cs,Ia,"NextToken","NextToken","MaxResults"),d6=qi.createPaginator(Cs,Oa,"NextToken","NextToken","MaxResults"),f6=qi.createPaginator(Cs,Pa,"NextToken","NextToken","MaxResults");Object.defineProperty(G,"$Command",{enumerable:!0,get:function(){return de.Command}});Object.defineProperty(G,"__Client",{enumerable:!0,get:function(){return de.Client}});G.BatchGetSecretValueCommand=Ia;G.CancelRotateSecretCommand=nd;G.CreateSecretCommand=sd;G.DecryptionFailure=xI;G.DeleteResourcePolicyCommand=id;G.DeleteSecretCommand=od;G.DescribeSecretCommand=ad;G.EncryptionFailure=LI;G.FilterNameStringType=MH;G.GetRandomPasswordCommand=cd;G.GetResourcePolicyCommand=ud;G.GetSecretValueCommand=ld;G.InternalServiceError=TI;G.InvalidNextTokenException=AI;G.InvalidParameterException=PI;G.InvalidRequestException=NI;G.LimitExceededException=qI;G.ListSecretVersionIdsCommand=Oa;G.ListSecretsCommand=Pa;G.MalformedPolicyDocumentException=$I;G.PreconditionNotMetException=BI;G.PublicPolicyException=GI;G.PutResourcePolicyCommand=dd;G.PutSecretValueCommand=fd;G.RemoveRegionsFromReplicationCommand=pd;G.ReplicateSecretToRegionsCommand=hd;G.ResourceExistsException=VI;G.ResourceNotFoundException=DI;G.RestoreSecretCommand=md;G.RotateSecretCommand=gd;G.SecretsManager=vd;G.SecretsManagerClient=Cs;G.SecretsManagerServiceException=Et;G.SortOrderType=FH;G.StatusType=LH;G.StopReplicationToReplicaCommand=yd;G.TagResourceCommand=Sd;G.UntagResourceCommand=_d;G.UpdateSecretCommand=Ed;G.UpdateSecretVersionStageCommand=wd;G.ValidateResourcePolicyCommand=bd;G.paginateBatchGetSecretValue=l6;G.paginateListSecretVersionIds=d6;G.paginateListSecrets=f6});var Jg=b(pP=>{"use strict";pP.parse=function(t,e){return new Yg(t,e).parse()};var Yg=class t{constructor(e,r){this.source=e,this.transform=r||p6,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&(r=this.recorded.join(""),r==="NULL"&&!e&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var r,n,s;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!s)this.dimension++,this.dimension>1&&(n=new t(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!s){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else r.value==='"'&&!r.escaped?(s&&this.newEntry(!0),s=!s):r.value===","&&!s?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function p6(t){return t}});var Zg=b((bte,hP)=>{var h6=Jg();hP.exports={create:function(t,e){return{parse:function(){return h6.parse(t,e)}}}}});var yP=b((vte,gP)=>{"use strict";var m6=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,g6=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,y6=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,S6=/^-?infinity$/;gP.exports=function(e){if(S6.test(e))return Number(e.replace("i","I"));var r=m6.exec(e);if(!r)return _6(e)||null;var n=!!r[8],s=parseInt(r[1],10);n&&(s=mP(s));var i=parseInt(r[2],10)-1,o=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),u=parseInt(r[6],10),l=r[7];l=l?1e3*parseFloat(l):0;var p,m=E6(e);return m!=null?(p=new Date(Date.UTC(s,i,o,a,c,u,l)),Xg(s)&&p.setUTCFullYear(s),m!==0&&p.setTime(p.getTime()-m)):(p=new Date(s,i,o,a,c,u,l),Xg(s)&&p.setFullYear(s)),p};function _6(t){var e=g6.exec(t);if(e){var r=parseInt(e[1],10),n=!!e[4];n&&(r=mP(r));var s=parseInt(e[2],10)-1,i=e[3],o=new Date(r,s,i);return Xg(r)&&o.setFullYear(r),o}}function E6(t){if(t.endsWith("+00"))return 0;var e=y6.exec(t.split(" ")[1]);if(e){var r=e[1];if(r==="Z")return 0;var n=r==="-"?-1:1,s=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return s*n*1e3}}function mP(t){return-(t-1)}function Xg(t){return t>=0&&t<100}});var _P=b((xte,SP)=>{SP.exports=b6;var w6=Object.prototype.hasOwnProperty;function b6(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)w6.call(r,n)&&(t[n]=r[n])}return t}});var bP=b((Rte,wP)=>{"use strict";var v6=_P();wP.exports=ji;function ji(t){if(!(this instanceof ji))return new ji(t);v6(this,M6(t))}var x6=["seconds","minutes","hours","days","months","years"];ji.prototype.toPostgres=function(){var t=x6.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var r=this[e]||0;return e==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var R6={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},T6=["years","months","days"],C6=["hours","minutes","seconds"];ji.prototype.toISOString=ji.prototype.toISO=function(){var t=T6.map(r,this).join(""),e=C6.map(r,this).join("");return"P"+t+"T"+e;function r(n){var s=this[n]||0;return n==="seconds"&&this.milliseconds&&(s=(s+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),s+R6[n]}};var ey="([+-]?\\d+)",A6=ey+"\\s+years?",I6=ey+"\\s+mons?",P6=ey+"\\s+days?",O6="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",N6=new RegExp([A6,I6,P6,O6].map(function(t){return"("+t+")?"}).join("\\s*")),EP={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},k6=["hours","minutes","seconds","milliseconds"];function D6(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function M6(t){if(!t)return{};var e=N6.exec(t),r=e[8]==="-";return Object.keys(EP).reduce(function(n,s){var i=EP[s],o=e[i];return!o||(o=s==="milliseconds"?D6(o):parseInt(o,10),!o)||(r&&~k6.indexOf(s)&&(o*=-1),n[s]=o),n},{})}});var xP=b((Tte,vP)=>{"use strict";vP.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var r="",n=0;n<e.length;)if(e[n]!=="\\")r+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))r+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var s=1;n+s<e.length&&e[n+s]==="\\";)s++;for(var i=0;i<Math.floor(s/2);++i)r+="\\";n+=Math.floor(s/2)*2}return new Buffer(r,"binary")}});var OP=b((Cte,PP)=>{var qa=Jg(),Ua=Zg(),Od=yP(),TP=bP(),CP=xP();function Nd(t){return function(r){return r===null?r:t(r)}}function AP(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function L6(t){return t?qa.parse(t,AP):null}function F6(t){return parseInt(t,10)}function ty(t){return t?qa.parse(t,Nd(F6)):null}function q6(t){return t?qa.parse(t,Nd(function(e){return IP(e).trim()})):null}var U6=function(t){if(!t)return null;var e=Ua.create(t,function(r){return r!==null&&(r=iy(r)),r});return e.parse()},ry=function(t){if(!t)return null;var e=Ua.create(t,function(r){return r!==null&&(r=parseFloat(r)),r});return e.parse()},Bt=function(t){if(!t)return null;var e=Ua.create(t);return e.parse()},ny=function(t){if(!t)return null;var e=Ua.create(t,function(r){return r!==null&&(r=Od(r)),r});return e.parse()},$6=function(t){if(!t)return null;var e=Ua.create(t,function(r){return r!==null&&(r=TP(r)),r});return e.parse()},j6=function(t){return t?qa.parse(t,Nd(CP)):null},sy=function(t){return parseInt(t,10)},IP=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},RP=function(t){return t?qa.parse(t,Nd(JSON.parse)):null},iy=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},B6=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",r="",n=!1,s=2;s<t.length-1;s++){if(n||(e+=t[s]),t[s]===")"){n=!0;continue}else if(!n)continue;t[s]!==","&&(r+=t[s])}var i=iy(e);return i.radius=parseFloat(r),i},H6=function(t){t(20,IP),t(21,sy),t(23,sy),t(26,sy),t(700,parseFloat),t(701,parseFloat),t(16,AP),t(1082,Od),t(1114,Od),t(1184,Od),t(600,iy),t(651,Bt),t(718,B6),t(1e3,L6),t(1001,j6),t(1005,ty),t(1007,ty),t(1028,ty),t(1016,q6),t(1017,U6),t(1021,ry),t(1022,ry),t(1231,ry),t(1014,Bt),t(1015,Bt),t(1008,Bt),t(1009,Bt),t(1040,Bt),t(1041,Bt),t(1115,ny),t(1182,ny),t(1185,ny),t(1186,TP),t(1187,$6),t(17,CP),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,RP),t(3807,RP),t(3907,Bt),t(2951,Bt),t(791,Bt),t(1183,Bt),t(1270,Bt)};PP.exports={init:H6}});var kP=b((Ate,NP)=>{"use strict";var wt=1e6;function V6(t){var e=t.readInt32BE(0),r=t.readUInt32BE(4),n="";e<0&&(e=~e+(r===0),r=~r+1>>>0,n="-");var s="",i,o,a,c,u,l;{if(i=e%wt,e=e/wt>>>0,o=4294967296*i+r,r=o/wt>>>0,a=""+(o-wt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(i=e%wt,e=e/wt>>>0,o=4294967296*i+r,r=o/wt>>>0,a=""+(o-wt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(i=e%wt,e=e/wt>>>0,o=4294967296*i+r,r=o/wt>>>0,a=""+(o-wt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}return i=e%wt,o=4294967296*i+r,a=""+o%wt,n+a+s}NP.exports=V6});var qP=b((Ite,FP)=>{var z6=kP(),Te=function(t,e,r,n,s){r=r||0,n=n||!1,s=s||function(h,y,x){return h*Math.pow(2,x)+y};var i=r>>3,o=function(h){return n?~h&255:h},a=255,c=8-r%8;e<c&&(a=255<<8-e&255,c=e),r&&(a=a>>r%8);var u=0;r%8+e>=8&&(u=s(0,o(t[i])&a,c));for(var l=e+r>>3,p=i+1;p<l;p++)u=s(u,o(t[p]),8);var m=(e+r)%8;return m>0&&(u=s(u,o(t[l])>>8-m,m)),u},LP=function(t,e,r){var n=Math.pow(2,r-1)-1,s=Te(t,1),i=Te(t,r,1);if(i===0)return 0;var o=1,a=function(u,l,p){u===0&&(u=1);for(var m=1;m<=p;m++)o/=2,(l&1<<p-m)>0&&(u+=o);return u},c=Te(t,e,r+1,!1,a);return i==Math.pow(2,r+1)-1?c===0?s===0?1/0:-1/0:NaN:(s===0?1:-1)*Math.pow(2,i-n)*c},G6=function(t){return Te(t,1)==1?-1*(Te(t,15,1,!0)+1):Te(t,15,1)},DP=function(t){return Te(t,1)==1?-1*(Te(t,31,1,!0)+1):Te(t,31,1)},W6=function(t){return LP(t,23,8)},K6=function(t){return LP(t,52,11)},Q6=function(t){var e=Te(t,16,32);if(e==49152)return NaN;for(var r=Math.pow(1e4,Te(t,16,16)),n=0,s=[],i=Te(t,16),o=0;o<i;o++)n+=Te(t,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,Te(t,16,48));return(e===0?1:-1)*Math.round(n*a)/a},MP=function(t,e){var r=Te(e,1),n=Te(e,63,1),s=new Date((r===0?1:-1)*n/1e3+9466848e5);return t||s.setTime(s.getTime()+s.getTimezoneOffset()*6e4),s.usec=n%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(i){this.usec=i},s.getUTCMicroSeconds=function(){return this.usec},s},$a=function(t){for(var e=Te(t,32),r=Te(t,32,32),n=Te(t,32,64),s=96,i=[],o=0;o<e;o++)i[o]=Te(t,32,s),s+=32,s+=32;var a=function(u){var l=Te(t,32,s);if(s+=32,l==4294967295)return null;var p;if(u==23||u==20)return p=Te(t,l*8,s),s+=l*8,p;if(u==25)return p=t.toString(this.encoding,s>>3,(s+=l<<3)>>3),p;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var p=[],m;if(u.length>1){var h=u.shift();for(m=0;m<h;m++)p[m]=c(u,l);u.unshift(h)}else for(m=0;m<u[0];m++)p[m]=a(l);return p};return c(i,n)},Y6=function(t){return t.toString("utf8")},J6=function(t){return t===null?null:Te(t,8)>0},Z6=function(t){t(20,z6),t(21,G6),t(23,DP),t(26,DP),t(1700,Q6),t(700,W6),t(701,K6),t(16,J6),t(1114,MP.bind(null,!1)),t(1184,MP.bind(null,!0)),t(1e3,$a),t(1007,$a),t(1016,$a),t(1008,$a),t(1009,$a),t(25,Y6)};FP.exports={init:Z6}});var $P=b((Pte,UP)=>{UP.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Ha=b(Ba=>{var X6=OP(),eG=qP(),tG=Zg(),rG=$P();Ba.getTypeParser=nG;Ba.setTypeParser=sG;Ba.arrayParser=tG;Ba.builtins=rG;var ja={text:{},binary:{}};function jP(t){return String(t)}function nG(t,e){return e=e||"text",ja[e]&&ja[e][t]||jP}function sG(t,e,r){typeof e=="function"&&(r=e,e="text"),ja[e][t]=r}X6.init(function(t,e){ja.text[t]=e});eG.init(function(t,e){ja.binary[t]=e})});var Va=b((Nte,oy)=>{"use strict";oy.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Bi=Ha(),iG=Bi.getTypeParser(20,"text"),oG=Bi.getTypeParser(1016,"text");oy.exports.__defineSetter__("parseInt8",function(t){Bi.setTypeParser(20,"text",t?Bi.getTypeParser(23,"text"):iG),Bi.setTypeParser(1016,"text",t?Bi.getTypeParser(1007,"text"):oG)})});var Hi=b((kte,VP)=>{"use strict";var aG=Va(),BP=require("util"),{isDate:cG}=BP.types||BP;function uG(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function HP(t){let e="{";for(let r=0;r<t.length;r++)if(r>0&&(e=e+","),t[r]===null||typeof t[r]>"u")e=e+"NULL";else if(Array.isArray(t[r]))e=e+HP(t[r]);else if(ArrayBuffer.isView(t[r])){let n=t[r];if(!(n instanceof Buffer)){let s=Buffer.from(n.buffer,n.byteOffset,n.byteLength);s.length===n.byteLength?n=s:n=s.slice(n.byteOffset,n.byteOffset+n.byteLength)}e+="\\\\x"+n.toString("hex")}else e+=uG(kd(t[r]));return e=e+"}",e}var kd=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return r.length===t.byteLength?r:r.slice(t.byteOffset,t.byteOffset+t.byteLength)}return cG(t)?aG.parseInputDatesAsUTC?fG(t):dG(t):Array.isArray(t)?HP(t):lG(t,e)}return t.toString()};function lG(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),kd(t.toPostgres(kd),e)}return JSON.stringify(t)}function dG(t){let e=-t.getTimezoneOffset(),r=t.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);let s=String(r).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(s+="-",e*=-1):s+="+",s+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),n&&(s+=" BC"),s}function fG(t){let e=t.getUTCFullYear(),r=e<1;r&&(e=Math.abs(e)+1);let n=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return n+="+00:00",r&&(n+=" BC"),n}function pG(t,e,r){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),r&&(t.callback=r),t}var hG=function(t){return'"'+t.replace(/"/g,'""')+'"'},mG=function(t){let e=!1,r="'";if(t==null||typeof t!="string")return"''";for(let n=0;n<t.length;n++){let s=t[n];s==="'"?r+=s+s:s==="\\"?(r+=s+s,e=!0):r+=s}return r+="'",e===!0&&(r=" E"+r),r};VP.exports={prepareValue:function(e){return kd(e)},normalizeQueryConfig:pG,escapeIdentifier:hG,escapeLiteral:mG}});var GP=b((Dte,zP)=>{"use strict";var Vi=require("crypto");function ay(t){return Vi.createHash("md5").update(t,"utf-8").digest("hex")}function gG(t,e,r){let n=ay(e+t);return"md5"+ay(Buffer.concat([Buffer.from(n),r]))}function yG(t){return Vi.createHash("sha256").update(t).digest()}function SG(t,e){return t=t.replace(/(\D)-/,"$1"),Vi.createHash(t).update(e).digest()}function _G(t,e){return Vi.createHmac("sha256",t).update(e).digest()}async function EG(t,e,r){return Vi.pbkdf2Sync(t,e,r,32,"sha256")}zP.exports={postgresMd5PasswordHash:gG,randomBytes:Vi.randomBytes,deriveKey:EG,sha256:yG,hashByName:SG,hmacSha256:_G,md5:ay}});var YP=b((Mte,QP)=>{var WP=require("crypto");QP.exports={postgresMd5PasswordHash:bG,randomBytes:wG,deriveKey:TG,sha256:vG,hashByName:xG,hmacSha256:RG,md5:cy};var KP=WP.webcrypto||globalThis.crypto,As=KP.subtle,uy=new TextEncoder;function wG(t){return KP.getRandomValues(Buffer.alloc(t))}async function cy(t){try{return WP.createHash("md5").update(t,"utf-8").digest("hex")}catch{let r=typeof t=="string"?uy.encode(t):t,n=await As.digest("MD5",r);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}}async function bG(t,e,r){let n=await cy(e+t);return"md5"+await cy(Buffer.concat([Buffer.from(n),r]))}async function vG(t){return await As.digest("SHA-256",t)}async function xG(t,e){return await As.digest(t,e)}async function RG(t,e){let r=await As.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await As.sign("HMAC",r,uy.encode(e))}async function TG(t,e,r){let n=await As.importKey("raw",uy.encode(t),"PBKDF2",!1,["deriveBits"]),s={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:r};return await As.deriveBits(s,n,256,["deriveBits"])}});var dy=b((Lte,ly)=>{"use strict";var CG=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;CG?ly.exports=GP():ly.exports=YP()});var XP=b((Fte,ZP)=>{function Is(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function fy(t,e){let r=t[e++];if(r<128)return{length:r,index:e};let n=r&127;if(n>4)throw Is("bad length",t);r=0;for(let s=0;s<n;s++)r=r<<8|t[e++];return{length:r,index:e}}function JP(t,e){if(t[e++]!==6)throw Is("non-OID data",t);let{length:r,index:n}=fy(t,e);e=n;let s=e+r,i=t[e++],o=(i/40>>0)+"."+i%40;for(;e<s;){let a=0;for(;e<s;){let c=t[e++];if(a=a<<7|c&127,c<128)break}o+="."+a}return{oid:o,index:e}}function za(t,e){if(t[e++]!==48)throw Is("non-sequence data",t);return fy(t,e)}function AG(t,e){e===void 0&&(e=0),e=za(t,e).index;let{length:r,index:n}=za(t,e);e=n+r,e=za(t,e).index;let{oid:s,index:i}=JP(t,e);switch(s){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=i,e=za(t,e).index,t[e++]!==160)throw Is("non-tag data",t);e=fy(t,e).index,e=za(t,e).index;let{oid:o}=JP(t,e);switch(o){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Is("unknown hash OID "+o,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Is("Ed448 certificate channel binding is not currently supported by Postgres")}throw Is("unknown OID "+s,t)}ZP.exports={signatureAlgorithmHashFromCertificate:AG}});var nO=b((qte,rO)=>{"use strict";var kn=dy(),{signatureAlgorithmHashFromCertificate:IG}=XP();function PG(t,e){let r=["SCRAM-SHA-256"];e&&r.unshift("SCRAM-SHA-256-PLUS");let n=r.find(o=>t.includes(o));if(!n)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(n==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let s=kn.randomBytes(18).toString("base64");return{mechanism:n,clientNonce:s,response:(n==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+s,message:"SASLInitialResponse"}}async function OG(t,e,r,n){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let s=DG(r);if(s.nonce.startsWith(t.clientNonce)){if(s.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let i="n=*,r="+t.clientNonce,o="r="+s.nonce+",s="+s.salt+",i="+s.iteration,a=n?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let N=n.getPeerCertificate().raw,U=IG(N);(U==="MD5"||U==="SHA-1")&&(U="SHA-256");let V=await kn.hashByName(U,N);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(V)]).toString("base64")}let c="c="+a+",r="+s.nonce,u=i+","+o+","+c,l=Buffer.from(s.salt,"base64"),p=await kn.deriveKey(e,l,s.iteration),m=await kn.hmacSha256(p,"Client Key"),h=await kn.sha256(m),y=await kn.hmacSha256(h,u),x=LG(Buffer.from(m),Buffer.from(y)).toString("base64"),R=await kn.hmacSha256(p,"Server Key"),C=await kn.hmacSha256(R,u);t.message="SASLResponse",t.serverSignature=Buffer.from(C).toString("base64"),t.response=c+",p="+x}function NG(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=MG(e);if(r!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function kG(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,r)=>t.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function eO(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function tO(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let r=e[0],n=e.substring(2);return[r,n]}))}function DG(t){let e=tO(t),r=e.get("r");if(r){if(!kG(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=e.get("s");if(n){if(!eO(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let s=e.get("i");if(s){if(!/^[1-9][0-9]*$/.test(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let i=parseInt(s,10);return{nonce:r,salt:n,iteration:i}}function MG(t){let r=tO(t).get("v");if(r){if(!eO(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function LG(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((r,n)=>t[n]^e[n]))}rO.exports={startSession:PG,continueSession:OG,finalizeSession:NG}});var Md=b((Ute,sO)=>{"use strict";var FG=Ha();function Dd(t){this._types=t||FG,this.text={},this.binary={}}Dd.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};Dd.prototype.setTypeParser=function(t,e,r){typeof e=="function"&&(r=e,e="text"),this.getOverrides(e)[t]=r};Dd.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};sO.exports=Dd});var aO=b(($te,oO)=>{"use strict";function zi(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let r={},n,s=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{n=new URL(t,"postgres://base")}catch{n=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),s=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of n.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(n.username),r.password=r.password||decodeURIComponent(n.password),n.protocol=="socket:")return r.host=decodeURI(n.pathname),r.database=n.searchParams.get("db"),r.client_encoding=n.searchParams.get("encoding"),r;let i=s?"":n.hostname;r.host?i&&/^%2f/i.test(i)&&(n.pathname=i+n.pathname):r.host=decodeURIComponent(i),r.port||(r.port=n.port);let o=n.pathname.slice(1)||null;r.database=o?decodeURI(o):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),e.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||e.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function qG(t){return Object.entries(t).reduce((r,[n,s])=>(s!=null&&(r[n]=s),r),{})}function iO(t){return Object.entries(t).reduce((r,[n,s])=>{if(n==="ssl"){let i=s;typeof i=="boolean"&&(r[n]=i),typeof i=="object"&&(r[n]=qG(i))}else if(s!=null)if(n==="port"){if(s!==""){let i=parseInt(s,10);if(isNaN(i))throw new Error(`Invalid ${n}: ${s}`);r[n]=i}}else r[n]=s;return r},{})}function UG(t){return iO(zi(t))}oO.exports=zi;zi.parse=zi;zi.toClientConfig=iO;zi.parseIntoClientConfig=UG});var hy=b((jte,lO)=>{"use strict";var $G=require("dns"),uO=Va(),cO=aO().parse,ct=function(t,e,r){return r===void 0?r=process.env["PG"+t.toUpperCase()]:r===!1||(r=process.env[r]),e[t]||r||uO[t]},jG=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return uO.ssl},Gi=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},Ht=function(t,e,r){let n=e[r];n!=null&&t.push(r+"="+Gi(n))},py=class{constructor(e){e=typeof e=="string"?cO(e):e||{},e.connectionString&&(e=Object.assign({},e,cO(e.connectionString))),this.user=ct("user",e),this.database=ct("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(ct("port",e),10),this.host=ct("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:ct("password",e)}),this.binary=ct("binary",e),this.options=ct("options",e),this.ssl=typeof e.ssl>"u"?jG():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=ct("client_encoding",e),this.replication=ct("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=ct("application_name",e,"PGAPPNAME"),this.fallback_application_name=ct("fallback_application_name",e,!1),this.statement_timeout=ct("statement_timeout",e,!1),this.lock_timeout=ct("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=ct("idle_in_transaction_session_timeout",e,!1),this.query_timeout=ct("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let r=[];Ht(r,this,"user"),Ht(r,this,"password"),Ht(r,this,"port"),Ht(r,this,"application_name"),Ht(r,this,"fallback_application_name"),Ht(r,this,"connect_timeout"),Ht(r,this,"options");let n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(Ht(r,n,"sslmode"),Ht(r,n,"sslca"),Ht(r,n,"sslkey"),Ht(r,n,"sslcert"),Ht(r,n,"sslrootcert"),this.database&&r.push("dbname="+Gi(this.database)),this.replication&&r.push("replication="+Gi(this.replication)),this.host&&r.push("host="+Gi(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+Gi(this.client_encoding)),$G.lookup(this.host,function(s,i){return s?e(s,null):(r.push("hostaddr="+Gi(i)),e(null,r.join(" ")))})}};lO.exports=py});var gy=b((Bte,fO)=>{"use strict";var BG=Ha(),dO=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,my=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let r;e.text?r=dO.exec(e.text):r=dO.exec(e.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){let r=new Array(e.length);for(let n=0,s=e.length;n<s;n++){let i=e[n];i!==null?r[n]=this._parsers[n](i):r[n]=null}return r}parseRow(e){let r={...this._prebuiltEmptyResultObject};for(let n=0,s=e.length;n<s;n++){let i=e[n],o=this.fields[n].name;if(i!==null){let a=this.fields[n].format==="binary"?Buffer.from(i):i;r[o]=this._parsers[n](a)}else r[o]=null}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let r={};for(let n=0;n<e.length;n++){let s=e[n];r[s.name]=null,this._types?this._parsers[n]=this._types.getTypeParser(s.dataTypeID,s.format||"text"):this._parsers[n]=BG.getTypeParser(s.dataTypeID,s.format||"text")}this._prebuiltEmptyResultObject={...r}}};fO.exports=my});var gO=b((Hte,mO)=>{"use strict";var{EventEmitter:HG}=require("events"),pO=gy(),hO=Hi(),yy=class extends HG{constructor(e,r,n){super(),e=hO.normalizeQueryConfig(e,r,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new pO(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new pO(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:hO.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};mO.exports=yy});var Ny=b(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.NoticeMessage=K.DataRowMessage=K.CommandCompleteMessage=K.ReadyForQueryMessage=K.NotificationResponseMessage=K.BackendKeyDataMessage=K.AuthenticationMD5Password=K.ParameterStatusMessage=K.ParameterDescriptionMessage=K.RowDescriptionMessage=K.Field=K.CopyResponse=K.CopyDataMessage=K.DatabaseError=K.copyDone=K.emptyQuery=K.replicationStart=K.portalSuspended=K.noData=K.closeComplete=K.bindComplete=K.parseComplete=void 0;K.parseComplete={name:"parseComplete",length:5};K.bindComplete={name:"bindComplete",length:5};K.closeComplete={name:"closeComplete",length:5};K.noData={name:"noData",length:5};K.portalSuspended={name:"portalSuspended",length:5};K.replicationStart={name:"replicationStart",length:4};K.emptyQuery={name:"emptyQuery",length:4};K.copyDone={name:"copyDone",length:4};var Sy=class extends Error{constructor(e,r,n){super(e),this.length=r,this.name=n}};K.DatabaseError=Sy;var _y=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};K.CopyDataMessage=_y;var Ey=class{constructor(e,r,n,s){this.length=e,this.name=r,this.binary=n,this.columnTypes=new Array(s)}};K.CopyResponse=Ey;var wy=class{constructor(e,r,n,s,i,o,a){this.name=e,this.tableID=r,this.columnID=n,this.dataTypeID=s,this.dataTypeSize=i,this.dataTypeModifier=o,this.format=a}};K.Field=wy;var by=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};K.RowDescriptionMessage=by;var vy=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};K.ParameterDescriptionMessage=vy;var xy=class{constructor(e,r,n){this.length=e,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};K.ParameterStatusMessage=xy;var Ry=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};K.AuthenticationMD5Password=Ry;var Ty=class{constructor(e,r,n){this.length=e,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};K.BackendKeyDataMessage=Ty;var Cy=class{constructor(e,r,n,s){this.length=e,this.processId=r,this.channel=n,this.payload=s,this.name="notification"}};K.NotificationResponseMessage=Cy;var Ay=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};K.ReadyForQueryMessage=Ay;var Iy=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};K.CommandCompleteMessage=Iy;var Py=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};K.DataRowMessage=Py;var Oy=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};K.NoticeMessage=Oy});var yO=b(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});Ld.Writer=void 0;var ky=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let n=this.buffer,s=n.length+(n.length>>1)+e;this.buffer=Buffer.allocUnsafe(s),n.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let r=Buffer.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(e=""){let r=Buffer.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Ld.Writer=ky});var _O=b(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.serialize=void 0;var Dy=yO(),we=new Dy.Writer,VG=t=>{we.addInt16(3).addInt16(0);for(let n of Object.keys(t))we.addCString(n).addCString(t[n]);we.addCString("client_encoding").addCString("UTF8");let e=we.addCString("").flush(),r=e.length+4;return new Dy.Writer().addInt32(r).add(e).flush()},zG=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},GG=t=>we.addCString(t).flush(112),WG=function(t,e){return we.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),we.flush(112)},KG=function(t){return we.addString(t).flush(112)},QG=t=>we.addCString(t).flush(81),SO=[],YG=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let r=t.types||SO,n=r.length,s=we.addCString(e).addCString(t.text).addInt16(n);for(let i=0;i<n;i++)s.addInt32(r[i]);return we.flush(80)},Wi=new Dy.Writer,JG=function(t,e){for(let r=0;r<t.length;r++){let n=e?e(t[r],r):t[r];n==null?(we.addInt16(0),Wi.addInt32(-1)):n instanceof Buffer?(we.addInt16(1),Wi.addInt32(n.length),Wi.add(n)):(we.addInt16(0),Wi.addInt32(Buffer.byteLength(n)),Wi.addString(n))}},ZG=(t={})=>{let e=t.portal||"",r=t.statement||"",n=t.binary||!1,s=t.values||SO,i=s.length;return we.addCString(e).addCString(r),we.addInt16(i),JG(s,t.valueMapper),we.addInt16(i),we.add(Wi.flush()),we.addInt16(1),we.addInt16(n?1:0),we.flush(66)},XG=Buffer.from([69,0,0,0,9,0,0,0,0,0]),eW=t=>{if(!t||!t.portal&&!t.rows)return XG;let e=t.portal||"",r=t.rows||0,n=Buffer.byteLength(e),s=4+n+1+4,i=Buffer.allocUnsafe(1+s);return i[0]=69,i.writeInt32BE(s,1),i.write(e,5,"utf-8"),i[n+5]=0,i.writeUInt32BE(r,i.length-4),i},tW=(t,e)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(t,8),r.writeInt32BE(e,12),r},My=(t,e)=>{let n=4+Buffer.byteLength(e)+1,s=Buffer.allocUnsafe(1+n);return s[0]=t,s.writeInt32BE(n,1),s.write(e,5,"utf-8"),s[n]=0,s},rW=we.addCString("P").flush(68),nW=we.addCString("S").flush(68),sW=t=>t.name?My(68,`${t.type}${t.name||""}`):t.type==="P"?rW:nW,iW=t=>{let e=`${t.type}${t.name||""}`;return My(67,e)},oW=t=>we.add(t).flush(100),aW=t=>My(102,t),Fd=t=>Buffer.from([t,0,0,0,4]),cW=Fd(72),uW=Fd(83),lW=Fd(88),dW=Fd(99),fW={startup:VG,password:GG,requestSsl:zG,sendSASLInitialResponseMessage:WG,sendSCRAMClientFinalMessage:KG,query:QG,parse:YG,bind:ZG,execute:eW,describe:sW,close:iW,flush:()=>cW,sync:()=>uW,end:()=>lW,copyData:oW,copyDone:()=>dW,copyFail:aW,cancel:tW};qd.serialize=fW});var EO=b(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.BufferReader=void 0;var pW=Buffer.allocUnsafe(0),Ly=class{constructor(e=0){this.offset=e,this.buffer=pW,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};Ud.BufferReader=Ly});var vO=b($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.Parser=void 0;var Ce=Ny(),hW=EO(),Fy=1,mW=4,wO=Fy+mW,bO=Buffer.allocUnsafe(0),qy=class{constructor(e){if(this.buffer=bO,this.bufferLength=0,this.bufferOffset=0,this.reader=new hW.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,r){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,s=this.bufferOffset;for(;s+wO<=n;){let i=this.buffer[s],o=this.buffer.readUInt32BE(s+Fy),a=Fy+o;if(a+s<=n){let c=this.handlePacket(s+wO,i,o,this.buffer);r(c),s+=a}else break}s===n?(this.buffer=bO,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-s,this.bufferOffset=s)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let s;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)s=this.buffer;else{let i=this.buffer.byteLength*2;for(;r>=i;)i*=2;s=Buffer.allocUnsafe(i)}this.buffer.copy(s,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=s,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,n,s){switch(r){case 50:return Ce.bindComplete;case 49:return Ce.parseComplete;case 51:return Ce.closeComplete;case 110:return Ce.noData;case 115:return Ce.portalSuspended;case 99:return Ce.copyDone;case 87:return Ce.replicationStart;case 73:return Ce.emptyQuery;case 68:return this.parseDataRowMessage(e,n,s);case 67:return this.parseCommandCompleteMessage(e,n,s);case 90:return this.parseReadyForQueryMessage(e,n,s);case 65:return this.parseNotificationMessage(e,n,s);case 82:return this.parseAuthenticationResponse(e,n,s);case 83:return this.parseParameterStatusMessage(e,n,s);case 75:return this.parseBackendKeyData(e,n,s);case 69:return this.parseErrorMessage(e,n,s,"error");case 78:return this.parseErrorMessage(e,n,s,"notice");case 84:return this.parseRowDescriptionMessage(e,n,s);case 116:return this.parseParameterDescriptionMessage(e,n,s);case 71:return this.parseCopyInMessage(e,n,s);case 72:return this.parseCopyOutMessage(e,n,s);case 100:return this.parseCopyData(e,n,s);default:return new Ce.DatabaseError("received invalid response: "+r.toString(16),n,"error")}}parseReadyForQueryMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.string(1);return new Ce.ReadyForQueryMessage(r,s)}parseCommandCompleteMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.cstring();return new Ce.CommandCompleteMessage(r,s)}parseCopyData(e,r,n){let s=n.slice(e,e+(r-4));return new Ce.CopyDataMessage(r,s)}parseCopyInMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyInResponse")}parseCopyOutMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyOutResponse")}parseCopyMessage(e,r,n,s){this.reader.setBuffer(e,n);let i=this.reader.byte()!==0,o=this.reader.int16(),a=new Ce.CopyResponse(r,s,i,o);for(let c=0;c<o;c++)a.columnTypes[c]=this.reader.int16();return a}parseNotificationMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i=this.reader.cstring(),o=this.reader.cstring();return new Ce.NotificationResponseMessage(r,s,i,o)}parseRowDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Ce.RowDescriptionMessage(r,s);for(let o=0;o<s;o++)i.fields[o]=this.parseField();return i}parseField(){let e=this.reader.cstring(),r=this.reader.uint32(),n=this.reader.int16(),s=this.reader.uint32(),i=this.reader.int16(),o=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new Ce.Field(e,r,n,s,i,o,a)}parseParameterDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Ce.ParameterDescriptionMessage(r,s);for(let o=0;o<s;o++)i.dataTypeIDs[o]=this.reader.int32();return i}parseDataRowMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Array(s);for(let o=0;o<s;o++){let a=this.reader.int32();i[o]=a===-1?null:this.reader.string(a)}return new Ce.DataRowMessage(r,i)}parseParameterStatusMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.cstring(),i=this.reader.cstring();return new Ce.ParameterStatusMessage(r,s,i)}parseBackendKeyData(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i=this.reader.int32();return new Ce.BackendKeyDataMessage(r,s,i)}parseAuthenticationResponse(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i={name:"authenticationOk",length:r};switch(s){case 0:break;case 3:i.length===8&&(i.name="authenticationCleartextPassword");break;case 5:if(i.length===12){i.name="authenticationMD5Password";let o=this.reader.bytes(4);return new Ce.AuthenticationMD5Password(r,o)}break;case 10:{i.name="authenticationSASL",i.mechanisms=[];let o;do o=this.reader.cstring(),o&&i.mechanisms.push(o);while(o)}break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(r-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+s)}return i}parseErrorMessage(e,r,n,s){this.reader.setBuffer(e,n);let i={},o=this.reader.string(1);for(;o!=="\0";)i[o]=this.reader.cstring(),o=this.reader.string(1);let a=i.M,c=s==="notice"?new Ce.NoticeMessage(r,a):new Ce.DatabaseError(a,r,s);return c.severity=i.S,c.code=i.C,c.detail=i.D,c.hint=i.H,c.position=i.P,c.internalPosition=i.p,c.internalQuery=i.q,c.where=i.W,c.schema=i.s,c.table=i.t,c.column=i.c,c.dataType=i.d,c.constraint=i.n,c.file=i.F,c.line=i.L,c.routine=i.R,c}};$d.Parser=qy});var Uy=b(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.DatabaseError=Dn.serialize=Dn.parse=void 0;var gW=Ny();Object.defineProperty(Dn,"DatabaseError",{enumerable:!0,get:function(){return gW.DatabaseError}});var yW=_O();Object.defineProperty(Dn,"serialize",{enumerable:!0,get:function(){return yW.serialize}});var SW=vO();function _W(t,e){let r=new SW.Parser;return t.on("data",n=>r.parse(n,e)),new Promise(n=>t.on("end",()=>n()))}Dn.parse=_W});var xO=b($y=>{"use strict";Object.defineProperty($y,"__esModule",{value:!0});$y.default={}});var TO=b((Jte,RO)=>{var{getStream:EW,getSecureStream:wW}=RW();RO.exports={getStream:EW,getSecureStream:wW};function bW(){function t(r){let n=require("net");return new n.Socket}function e(r){return require("tls").connect(r)}return{getStream:t,getSecureStream:e}}function vW(){function t(r){let{CloudflareSocket:n}=xO();return new n(r)}function e(r){return r.socket.startTls(r),r.socket}return{getStream:t,getSecureStream:e}}function xW(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function RW(){return xW()?vW():bW()}});var By=b((Zte,CO)=>{"use strict";var TW=require("events").EventEmitter,{parse:CW,serialize:je}=Uy(),{getStream:AW,getSecureStream:IW}=TO(),PW=je.flush(),OW=je.sync(),NW=je.end(),jy=class extends TW{constructor(e){super(),e=e||{},this.stream=e.stream||AW(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(e,r){let n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let s=function(i){n._ending&&(i.code==="ECONNRESET"||i.code==="EPIPE")||n.emit("error",i)};if(this.stream.on("error",s),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(i){switch(i.toString("utf8")){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:n.stream};n.ssl!==!0&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{n.stream=IW(a)}catch(u){return n.emit("error",u)}n.attachListeners(n.stream),n.stream.on("error",s),n.emit("sslconnect")})}attachListeners(e){CW(e,r=>{let n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(je.requestSsl())}startup(e){this.stream.write(je.startup(e))}cancel(e,r){this._send(je.cancel(e,r))}password(e){this._send(je.password(e))}sendSASLInitialResponseMessage(e,r){this._send(je.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(je.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(je.query(e))}parse(e){this._send(je.parse(e))}bind(e){this._send(je.bind(e))}execute(e){this._send(je.execute(e))}flush(){this.stream.writable&&this.stream.write(PW)}sync(){this._ending=!0,this._send(OW)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(NW,()=>{this.stream.end()})}close(e){this._send(je.close(e))}describe(e){this._send(je.describe(e))}sendCopyFromChunk(e){this._send(je.copyData(e))}endCopyFrom(){this._send(je.copyDone())}sendCopyFail(e){this._send(je.copyFail(e))}};CO.exports=jy});var OO=b((Xte,PO)=>{"use strict";var{Transform:kW}=require("stream"),{StringDecoder:DW}=require("string_decoder"),Mn=Symbol("last"),jd=Symbol("decoder");function MW(t,e,r){let n;if(this.overflow){if(n=this[jd].write(t).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[Mn]+=this[jd].write(t),n=this[Mn].split(this.matcher);this[Mn]=n.pop();for(let s=0;s<n.length;s++)try{IO(this,this.mapper(n[s]))}catch(i){return r(i)}if(this.overflow=this[Mn].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function LW(t){if(this[Mn]+=this[jd].end(),this[Mn])try{IO(this,this.mapper(this[Mn]))}catch(e){return t(e)}t()}function IO(t,e){e!==void 0&&t.push(e)}function AO(t){return t}function FW(t,e,r){switch(t=t||/\r?\n/,e=e||AO,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=AO)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=MW,r.flush=LW,r.readableObjectMode=!0;let n=new kW(r);return n[Mn]="",n[jd]=new DW("utf8"),n.matcher=t,n.mapper=e,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(s,i){this._writableState.errorEmitted=!1,i(s)},n}PO.exports=FW});var DO=b((ere,$r)=>{"use strict";var NO=require("path"),qW=require("stream").Stream,UW=OO(),kO=require("util"),$W=5432,Bd=process.platform==="win32",Ga=process.stderr,jW=56,BW=7,HW=61440,VW=32768;function zW(t){return(t&HW)==VW}var Ki=["host","port","database","user","password"],Hy=Ki.length,GW=Ki[Hy-1];function Vy(){var t=Ga instanceof qW&&Ga.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
`);Ga.write(kO.format.apply(kO,e))}}Object.defineProperty($r.exports,"isWin",{get:function(){return Bd},set:function(t){Bd=t}});$r.exports.warnTo=function(t){var e=Ga;return Ga=t,e};$r.exports.getFileName=function(t){var e=t||process.env,r=e.PGPASSFILE||(Bd?NO.join(e.APPDATA||"./","postgresql","pgpass.conf"):NO.join(e.HOME||"./",".pgpass"));return r};$r.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:Bd?!0:(e=e||"<unkn>",zW(t.mode)?t.mode&(jW|BW)?(Vy('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(Vy('WARNING: password file "%s" is not a plain file',e),!1))};var WW=$r.exports.match=function(t,e){return Ki.slice(0,-1).reduce(function(r,n,s){return s==1&&Number(t[n]||$W)===Number(e[n])?r&&!0:r&&(e[n]==="*"||e[n]===t[n])},!0)};$r.exports.getPassword=function(t,e,r){var n,s=e.pipe(UW());function i(c){var u=KW(c);u&&QW(u)&&WW(t,u)&&(n=u[GW],s.end())}var o=function(){e.destroy(),r(n)},a=function(c){e.destroy(),Vy("WARNING: error on reading file: %s",c),r(void 0)};e.on("error",a),s.on("data",i).on("end",o).on("error",a)};var KW=$r.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",r="",n=0,s=0,i=0,o={},a=!1,c=function(l,p,m){var h=t.substring(p,m);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(h=h.replace(/\\([:\\])/g,"$1")),o[Ki[l]]=h},u=0;u<t.length-1;u+=1){if(e=t.charAt(u+1),r=t.charAt(u),a=n==Hy-1,a){c(n,s);break}u>=0&&e==":"&&r!=="\\"&&(c(n,s,u+1),s=u+2,n+=1)}return o=Object.keys(o).length===Hy?o:null,o},QW=$r.exports.isValidEntry=function(t){for(var e={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},r=0;r<Ki.length;r+=1){var n=e[r],s=t[Ki[r]]||"",i=n(s);if(!i)return!1}return!0}});var LO=b((rre,zy)=>{"use strict";var tre=require("path"),MO=require("fs"),Hd=DO();zy.exports=function(t,e){var r=Hd.getFileName();MO.stat(r,function(n,s){if(n||!Hd.usePgPass(s,r))return e(void 0);var i=MO.createReadStream(r);Hd.getPassword(t,i,e)})};zy.exports.warnTo=Hd.warnTo});var $O=b((nre,UO)=>{"use strict";var YW=require("events").EventEmitter,FO=Hi(),Gy=nO(),JW=Md(),ZW=hy(),qO=gO(),XW=Va(),e8=By(),t8=dy(),Vd=class extends YW{constructor(e){super(),this.connectionParameters=new ZW(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=e||{};this._Promise=r.Promise||global.Promise,this._types=new JW(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new e8({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||XW.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(e){let r=n=>{process.nextTick(()=>{n.handleError(e,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(e){let r=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let s=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(s)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let s=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(s),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(s):this._handleErrorEvent(s):this._connectionError||this._handleErrorEvent(s)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((r,n)=>{this._connect(s=>{s?n(s):r()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()}).catch(n=>{r.emit("error",n)});else if(this.password!==null)e();else try{LO()(this.connectionParameters,s=>{s!==void 0&&(this.connectionParameters.password=this.password=s),e()})}catch(n){this.emit("error",n)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let r=await t8.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=Gy.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(e){try{await Gy.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(e){try{Gy.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this.activeQuery;if(!r){this._handleErrorEvent(e);return}this.activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let e=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(e);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,r={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(r.application_name=n),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){let n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(r)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(r),1)}setTypeParser(e,r,n){return this._types.setTypeParser(e,r,n)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return FO.escapeIdentifier(e)}escapeLiteral(e){return FO.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,r,n){let s,i,o,a,c;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(o=e.query_timeout||this.connectionParameters.query_timeout,i=s=e,typeof r=="function"&&(s.callback=s.callback||r)):(o=e.query_timeout||this.connectionParameters.query_timeout,s=new qO(e,r,n),s.callback||(i=new this._Promise((u,l)=>{s.callback=(p,m)=>p?l(p):u(m)}).catch(u=>{throw Error.captureStackTrace(u),u}))),o&&(c=s.callback,a=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{s.handleError(u,this.connection)}),c(u),s.callback=()=>{};let l=this.queryQueue.indexOf(s);l>-1&&this.queryQueue.splice(l,1),this._pulseQueryQueue()},o),s.callback=(u,l)=>{clearTimeout(a),c(u,l)}),this.binary&&!s.binary&&(s.binary=!0),s._result&&!s._result._types&&(s._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this.queryQueue.push(s),this._pulseQueryQueue(),i):(process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(r=>{this.connection.once("end",r)})}};Vd.Query=qO;UO.exports=Vd});var VO=b((sre,HO)=>{"use strict";var r8=require("events").EventEmitter,jO=function(){},BO=(t,e)=>{let r=t.findIndex(e);return r===-1?void 0:t.splice(r,1)[0]},Wy=class{constructor(e,r,n){this.client=e,this.idleListener=r,this.timeoutId=n}},Qi=class{constructor(e){this.callback=e}};function n8(){throw new Error("Release called on client which has already been released to the pool.")}function zd(t,e){if(e)return{callback:e,result:void 0};let r,n,s=function(o,a){o?r(o):n(a)},i=new t(function(o,a){n=o,r=a}).catch(o=>{throw Error.captureStackTrace(o),o});return{callback:s,result:i}}function s8(t,e){return function r(n){n.client=e,e.removeListener("error",r),e.on("error",()=>{t.log("additional client error after disconnection due to error",n)}),t._remove(e),t.emit("error",n,e)}}var Ky=class extends r8{constructor(e,r){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||Qy().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let s=r.idleListener;return this._acquireClient(n,e,s,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,r){let n=BO(this._idle,i=>i.client===e);n!==void 0&&clearTimeout(n.timeoutId),this._clients=this._clients.filter(i=>i!==e);let s=this;e.end(()=>{s.emit("remove",e),typeof r=="function"&&r()})}connect(e){if(this.ending){let s=new Error("Cannot use a pool after calling end on the pool");return e?e(s):this.Promise.reject(s)}let r=zd(this.Promise,e),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Qi(r.callback)),n;let s=(a,c,u)=>{clearTimeout(o),r.callback(a,c,u)},i=new Qi(s),o=setTimeout(()=>{BO(this._pendingQueue,a=>a.callback===s),i.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return o.unref&&o.unref(),this._pendingQueue.push(i),n}return this.newClient(new Qi(r.callback)),n}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let n=s8(this,r);this.log("checking client timeout");let s,i=!1;this.options.connectionTimeoutMillis&&(s=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(o=>{if(s&&clearTimeout(s),r.on("error",n),o)this.log("client failed to connect",o),this._clients=this._clients.filter(a=>a!==r),i&&(o=new Error("Connection terminated due to connection timeout",{cause:o})),this._pulseQueue(),e.timedOut||e.callback(o,void 0,jO);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new Qi((u,l,p)=>p()),n,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,e,n,!0)}})}_acquireClient(e,r,n,s){s&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),r.timedOut?s&&this.options.verify?this.options.verify(e,e.release):e.release():s&&this.options.verify?this.options.verify(e,i=>{if(i)return e.release(i),r.callback(i,void 0,jO);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let n=!1;return s=>{n&&n8(),n=!0,this._release(e,r,s)}}_release(e,r,n){if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let i;this.options.idleTimeoutMillis&&this._isAboveMin()&&(i=setTimeout(()=>{this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&i.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new Wy(e,r,i)),this._pulseQueue()}query(e,r,n){if(typeof e=="function"){let i=zd(this.Promise,e);return setImmediate(function(){return i.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),i.result}typeof r=="function"&&(n=r,r=void 0);let s=zd(this.Promise,n);return n=s.callback,this.connect((i,o)=>{if(i)return n(i);let a=!1,c=u=>{a||(a=!0,o.release(u),n(u))};o.once("error",c),this.log("dispatching query");try{o.query(e,r,(u,l)=>{if(this.log("query dispatched"),o.removeListener("error",c),!a)return a=!0,o.release(u),u?n(u):n(void 0,l)})}catch(u){return o.release(u),n(u)}}),s.result}end(e){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return e?e(n):this.Promise.reject(n)}this.ending=!0;let r=zd(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};HO.exports=Ky});var WO=b((ire,GO)=>{"use strict";var zO=require("events").EventEmitter,i8=require("util"),Yy=Hi(),Yi=GO.exports=function(t,e,r){zO.call(this),t=Yy.normalizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};i8.inherits(Yi,zO);var o8={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};Yi.prototype.handleError=function(t){let e=this.native.pq.resultErrorFields();if(e)for(let r in e){let n=o8[r]||r;t[n]=e[r]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};Yi.prototype.then=function(t,e){return this._getPromise().then(t,e)};Yi.prototype.catch=function(t){return this._getPromise().catch(t)};Yi.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};Yi.prototype.submit=function(t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;let r=function(n,s,i){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),n)return e.handleError(n);e._emitRowEvents&&(i.length>1?s.forEach((o,a)=>{o.forEach(c=>{e.emit("row",c,i[a])})}):s.forEach(function(o){e.emit("row",o,i)})),e.state="end",e.emit("end",i),e.callback&&e.callback(null,i)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let n=(this.values||[]).map(Yy.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(s)}return t.native.execute(this.name,n,r)}return t.native.prepare(this.name,this.text,n.length,function(s){return s?r(s):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return r(s)}let n=this.values.map(Yy.prepareValue);t.native.query(this.text,n,r)}else this.queryMode==="extended"?t.native.query(this.text,[],r):t.native.query(this.text,r)}});var ZO=b((ore,JO)=>{"use strict";var KO;try{KO=require("pg-native")}catch(t){throw t}var a8=Md(),QO=require("events").EventEmitter,c8=require("util"),u8=hy(),YO=WO(),bt=JO.exports=function(t){QO.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new a8(t.types),this.native=new KO({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new u8(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};bt.Query=YO;c8.inherits(bt,QO);bt.prototype._errorAllQueries=function(t){let e=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};bt.prototype._connect=function(t){let e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(e.connectionParameters.nativeConnectionString&&(n=e.connectionParameters.nativeConnectionString),r)return t(r);e.native.connect(n,function(s){if(s)return e.native.end(),t(s);e._connected=!0,e.native.on("error",function(i){e._queryable=!1,e._errorAllQueries(i),e.emit("error",i)}),e.native.on("notification",function(i){e.emit("notification",{channel:i.relname,payload:i.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};bt.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})};bt.prototype.query=function(t,e,r){let n,s,i,o,a;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")i=t.query_timeout||this.connectionParameters.query_timeout,s=n=t,typeof e=="function"&&(t.callback=e);else if(i=t.query_timeout||this.connectionParameters.query_timeout,n=new YO(t,e,r),!n.callback){let c,u;s=new this._Promise((l,p)=>{c=l,u=p}).catch(l=>{throw Error.captureStackTrace(l),l}),n.callback=(l,p)=>l?u(l):c(p)}return i&&(a=n.callback,o=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{n.handleError(c,this.connection)}),a(c),n.callback=()=>{};let u=this._queryQueue.indexOf(n);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},i),n.callback=(c,u)=>{clearTimeout(o),a(c,u)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),s):(this._queryQueue.push(n),this._pulseQueryQueue(),s):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),s)};bt.prototype.end=function(t){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));let r;return t||(r=new this._Promise(function(n,s){t=i=>i?s(i):n()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),r};bt.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};bt.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);let r=this;e.once("_done",function(){r._pulseQueryQueue()})};bt.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};bt.prototype.ref=function(){};bt.prototype.unref=function(){};bt.prototype.setTypeParser=function(t,e,r){return this._types.setTypeParser(t,e,r)};bt.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var Jy=b((are,XO)=>{"use strict";XO.exports=ZO()});var Qy=b((ure,Wa)=>{"use strict";var l8=$O(),d8=Va(),f8=By(),p8=gy(),h8=Hi(),m8=VO(),g8=Md(),{DatabaseError:y8}=Uy(),{escapeIdentifier:S8,escapeLiteral:_8}=Hi(),E8=t=>class extends m8{constructor(r){super(r,t)}},Zy=function(t){this.defaults=d8,this.Client=t,this.Query=this.Client.Query,this.Pool=E8(this.Client),this._pools=[],this.Connection=f8,this.types=Ha(),this.DatabaseError=y8,this.TypeOverrides=g8,this.escapeIdentifier=S8,this.escapeLiteral=_8,this.Result=p8,this.utils=h8};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Wa.exports=new Zy(Jy()):(Wa.exports=new Zy(l8),Object.defineProperty(Wa.exports,"native",{configurable:!0,enumerable:!1,get(){let t=null;try{t=new Zy(Jy())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Wa.exports,"native",{value:t}),t}}))});var F8={};nt(F8,{handler:()=>L8});module.exports=ue(F8);var es={};nt(es,{BRAND:()=>m1,DIRTY:()=>qn,EMPTY_PATH:()=>WN,INVALID:()=>H,NEVER:()=>X1,OK:()=>Je,ParseStatus:()=>Be,Schema:()=>X,ZodAny:()=>zr,ZodArray:()=>yr,ZodBigInt:()=>$n,ZodBoolean:()=>jn,ZodBranded:()=>Zi,ZodCatch:()=>Zn,ZodDate:()=>Bn,ZodDefault:()=>Jn,ZodDiscriminatedUnion:()=>Za,ZodEffects:()=>Pt,ZodEnum:()=>Qn,ZodError:()=>Ye,ZodFirstPartyTypeKind:()=>z,ZodFunction:()=>ec,ZodIntersection:()=>Gn,ZodIssueCode:()=>O,ZodLazy:()=>Wn,ZodLiteral:()=>Kn,ZodMap:()=>Ls,ZodNaN:()=>qs,ZodNativeEnum:()=>Yn,ZodNever:()=>zt,ZodNull:()=>Vn,ZodNullable:()=>tr,ZodNumber:()=>Un,ZodObject:()=>ut,ZodOptional:()=>At,ZodParsedType:()=>L,ZodPipeline:()=>Xi,ZodPromise:()=>Gr,ZodReadonly:()=>Xn,ZodRecord:()=>Xa,ZodSchema:()=>X,ZodSet:()=>Fs,ZodString:()=>Vr,ZodSymbol:()=>Ds,ZodTransformer:()=>Pt,ZodTuple:()=>er,ZodType:()=>X,ZodUndefined:()=>Hn,ZodUnion:()=>zn,ZodUnknown:()=>gr,ZodVoid:()=>Ms,addIssueToContext:()=>D,any:()=>x1,array:()=>A1,bigint:()=>_1,boolean:()=>gS,coerce:()=>Z1,custom:()=>pS,date:()=>E1,datetimeRegex:()=>dS,defaultErrorMap:()=>hr,discriminatedUnion:()=>N1,effect:()=>V1,enum:()=>j1,function:()=>q1,getErrorMap:()=>Os,getParsedType:()=>Xt,instanceof:()=>y1,intersection:()=>k1,isAborted:()=>Ya,isAsync:()=>Ns,isDirty:()=>Ja,isValid:()=>Hr,late:()=>g1,lazy:()=>U1,literal:()=>$1,makeIssue:()=>Ji,map:()=>L1,nan:()=>S1,nativeEnum:()=>B1,never:()=>T1,null:()=>v1,nullable:()=>G1,number:()=>mS,object:()=>I1,objectUtil:()=>sf,oboolean:()=>J1,onumber:()=>Y1,optional:()=>z1,ostring:()=>Q1,pipeline:()=>K1,preprocess:()=>W1,promise:()=>H1,quotelessJson:()=>VN,record:()=>M1,set:()=>F1,setErrorMap:()=>GN,strictObject:()=>P1,string:()=>hS,symbol:()=>w1,transformer:()=>V1,tuple:()=>D1,undefined:()=>b1,union:()=>O1,unknown:()=>R1,util:()=>ie,void:()=>C1});var ie;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{let i={};for(let o of s)i[o]=o;return i},t.getValidEnumValues=s=>{let i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(let a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(let o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ie||(ie={}));var sf;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(sf||(sf={}));var L=ie.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xt=t=>{switch(typeof t){case"undefined":return L.undefined;case"string":return L.string;case"number":return Number.isNaN(t)?L.nan:L.number;case"boolean":return L.boolean;case"function":return L.function;case"bigint":return L.bigint;case"symbol":return L.symbol;case"object":return Array.isArray(t)?L.array:t===null?L.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?L.promise:typeof Map<"u"&&t instanceof Map?L.map:typeof Set<"u"&&t instanceof Set?L.set:typeof Date<"u"&&t instanceof Date?L.date:L.object;default:return L.unknown}};var O=ie.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),VN=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Ye=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(let o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){let u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ie.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)if(s.path.length>0){let i=s.path[0];r[i]=r[i]||[],r[i].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Ye.create=t=>new Ye(t);var zN=(t,e)=>{let r;switch(t.code){case O.invalid_type:t.received===L.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case O.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ie.jsonStringifyReplacer)}`;break;case O.unrecognized_keys:r=`Unrecognized key(s) in object: ${ie.joinValues(t.keys,", ")}`;break;case O.invalid_union:r="Invalid input";break;case O.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ie.joinValues(t.options)}`;break;case O.invalid_enum_value:r=`Invalid enum value. Expected ${ie.joinValues(t.options)}, received '${t.received}'`;break;case O.invalid_arguments:r="Invalid function arguments";break;case O.invalid_return_type:r="Invalid function return type";break;case O.invalid_date:r="Invalid date";break;case O.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ie.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case O.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case O.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case O.custom:r="Invalid input";break;case O.invalid_intersection_types:r="Intersection results could not be merged";break;case O.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case O.not_finite:r="Number must be finite";break;default:r=e.defaultError,ie.assertNever(t)}return{message:r}},hr=zN;var oS=hr;function GN(t){oS=t}function Os(){return oS}var Ji=t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="",c=n.filter(u=>!!u).slice().reverse();for(let u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},WN=[];function D(t,e){let r=Os(),n=Ji({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===hr?void 0:hr].filter(s=>!!s)});t.common.issues.push(n)}var Be=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return H;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r){let i=await s.key,o=await s.value;n.push({key:i,value:o})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return H;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}},H=Object.freeze({status:"aborted"}),qn=t=>({status:"dirty",value:t}),Je=t=>({status:"valid",value:t}),Ya=t=>t.status==="aborted",Ja=t=>t.status==="dirty",Hr=t=>t.status==="valid",Ns=t=>typeof Promise<"u"&&t instanceof Promise;var q;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(q||(q={}));var It=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},aS=(t,e)=>{if(Hr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Ye(t.common.issues);return this._error=r,this._error}}};function Y(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{let{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??n??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??r??a.defaultError}},description:s}}var X=class{get description(){return this._def.description}_getType(e){return Xt(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Xt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Be,ctx:{common:e.parent.common,data:e.data,parsedType:Xt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Ns(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)},s=this._parseSync({data:e,path:n.path,parent:n});return aS(n,s)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return Hr(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>Hr(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xt(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Ns(s)?s:Promise.resolve(s));return aS(n,i)}refine(e,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{let o=e(s),a=()=>i.addIssue({code:O.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Pt({schema:this,typeName:z.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return At.create(this,this._def)}nullable(){return tr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return yr.create(this)}promise(){return Gr.create(this,this._def)}or(e){return zn.create([this,e],this._def)}and(e){return Gn.create(this,e,this._def)}transform(e){return new Pt({...Y(this._def),schema:this,typeName:z.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Jn({...Y(this._def),innerType:this,defaultValue:r,typeName:z.ZodDefault})}brand(){return new Zi({typeName:z.ZodBranded,type:this,...Y(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Zn({...Y(this._def),innerType:this,catchValue:r,typeName:z.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Xi.create(this,e)}readonly(){return Xn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},KN=/^c[^\s-]{8,}$/i,QN=/^[0-9a-z]+$/,YN=/^[0-9A-HJKMNP-TV-Z]{26}$/i,JN=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ZN=/^[a-z0-9_-]{21}$/i,XN=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,e1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,t1=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,r1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",of,n1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,s1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,i1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,o1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,a1=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,c1=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,uS="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",u1=new RegExp(`^${uS}$`);function lS(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function l1(t){return new RegExp(`^${lS(t)}$`)}function dS(t){let e=`${uS}T${lS(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function d1(t,e){return!!((e==="v4"||!e)&&n1.test(t)||(e==="v6"||!e)&&i1.test(t))}function f1(t,e){if(!XN.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function p1(t,e){return!!((e==="v4"||!e)&&s1.test(t)||(e==="v6"||!e)&&o1.test(t))}var Vr=class t extends X{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==L.string){let i=this._getOrReturnCtx(e);return D(i,{code:O.invalid_type,expected:L.string,received:i.parsedType}),H}let n=new Be,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:O.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:O.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?D(s,{code:O.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&D(s,{code:O.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")t1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"email",code:O.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")of||(of=new RegExp(r1,"u")),of.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"emoji",code:O.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")JN.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"uuid",code:O.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")ZN.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"nanoid",code:O.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")KN.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"cuid",code:O.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")QN.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"cuid2",code:O.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")YN.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"ulid",code:O.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),D(s,{validation:"url",code:O.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"regex",code:O.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?dS(i).test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?u1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?l1(i).test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{code:O.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?e1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"duration",code:O.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?d1(e.data,i.version)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"ip",code:O.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?f1(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"jwt",code:O.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?p1(e.data,i.version)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"cidr",code:O.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?a1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"base64",code:O.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?c1.test(e.data)||(s=this._getOrReturnCtx(e,s),D(s,{validation:"base64url",code:O.invalid_string,message:i.message}),n.dirty()):ie.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:O.invalid_string,...q.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...q.errToObj(e)})}url(e){return this._addCheck({kind:"url",...q.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...q.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...q.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...q.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...q.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...q.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...q.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...q.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...q.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...q.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...q.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...q.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...q.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...q.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...q.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...q.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...q.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...q.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...q.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...q.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...q.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...q.errToObj(r)})}nonempty(e){return this.min(1,q.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Vr.create=t=>new Vr({checks:[],typeName:z.ZodString,coerce:t?.coerce??!1,...Y(t)});function h1(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}var Un=class t extends X{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==L.number){let i=this._getOrReturnCtx(e);return D(i,{code:O.invalid_type,expected:L.number,received:i.parsedType}),H}let n,s=new Be;for(let i of this._def.checks)i.kind==="int"?ie.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{code:O.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?h1(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),D(n,{code:O.not_finite,message:i.message}),s.dirty()):ie.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,q.toString(r))}gt(e,r){return this.setLimit("min",e,!1,q.toString(r))}lte(e,r){return this.setLimit("max",e,!0,q.toString(r))}lt(e,r){return this.setLimit("max",e,!1,q.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:q.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:q.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:q.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:q.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:q.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:q.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:q.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ie.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Un.create=t=>new Un({checks:[],typeName:z.ZodNumber,coerce:t?.coerce||!1,...Y(t)});var $n=class t extends X{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==L.bigint)return this._getInvalidInput(e);let n,s=new Be;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),D(n,{code:O.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ie.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return D(r,{code:O.invalid_type,expected:L.bigint,received:r.parsedType}),H}gte(e,r){return this.setLimit("min",e,!0,q.toString(r))}gt(e,r){return this.setLimit("min",e,!1,q.toString(r))}lte(e,r){return this.setLimit("max",e,!0,q.toString(r))}lt(e,r){return this.setLimit("max",e,!1,q.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:q.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:q.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:q.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:q.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:q.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:q.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};$n.create=t=>new $n({checks:[],typeName:z.ZodBigInt,coerce:t?.coerce??!1,...Y(t)});var jn=class extends X{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==L.boolean){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.boolean,received:n.parsedType}),H}return Je(e.data)}};jn.create=t=>new jn({typeName:z.ZodBoolean,coerce:t?.coerce||!1,...Y(t)});var Bn=class t extends X{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==L.date){let i=this._getOrReturnCtx(e);return D(i,{code:O.invalid_type,expected:L.date,received:i.parsedType}),H}if(Number.isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return D(i,{code:O.invalid_date}),H}let n=new Be,s;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:O.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),D(s,{code:O.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):ie.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:q.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:q.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Bn.create=t=>new Bn({checks:[],coerce:t?.coerce||!1,typeName:z.ZodDate,...Y(t)});var Ds=class extends X{_parse(e){if(this._getType(e)!==L.symbol){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.symbol,received:n.parsedType}),H}return Je(e.data)}};Ds.create=t=>new Ds({typeName:z.ZodSymbol,...Y(t)});var Hn=class extends X{_parse(e){if(this._getType(e)!==L.undefined){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.undefined,received:n.parsedType}),H}return Je(e.data)}};Hn.create=t=>new Hn({typeName:z.ZodUndefined,...Y(t)});var Vn=class extends X{_parse(e){if(this._getType(e)!==L.null){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.null,received:n.parsedType}),H}return Je(e.data)}};Vn.create=t=>new Vn({typeName:z.ZodNull,...Y(t)});var zr=class extends X{constructor(){super(...arguments),this._any=!0}_parse(e){return Je(e.data)}};zr.create=t=>new zr({typeName:z.ZodAny,...Y(t)});var gr=class extends X{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Je(e.data)}};gr.create=t=>new gr({typeName:z.ZodUnknown,...Y(t)});var zt=class extends X{_parse(e){let r=this._getOrReturnCtx(e);return D(r,{code:O.invalid_type,expected:L.never,received:r.parsedType}),H}};zt.create=t=>new zt({typeName:z.ZodNever,...Y(t)});var Ms=class extends X{_parse(e){if(this._getType(e)!==L.undefined){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.void,received:n.parsedType}),H}return Je(e.data)}};Ms.create=t=>new Ms({typeName:z.ZodVoid,...Y(t)});var yr=class t extends X{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==L.array)return D(r,{code:O.invalid_type,expected:L.array,received:r.parsedType}),H;if(s.exactLength!==null){let o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(D(r,{code:o?O.too_big:O.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(D(r,{code:O.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(D(r,{code:O.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new It(r,o,r.path,a)))).then(o=>Be.mergeArray(n,o));let i=[...r.data].map((o,a)=>s.type._parseSync(new It(r,o,r.path,a)));return Be.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:q.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:q.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:q.toString(r)}})}nonempty(e){return this.min(1,e)}};yr.create=(t,e)=>new yr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:z.ZodArray,...Y(e)});function ks(t){if(t instanceof ut){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=At.create(ks(n))}return new ut({...t._def,shape:()=>e})}else return t instanceof yr?new yr({...t._def,type:ks(t.element)}):t instanceof At?At.create(ks(t.unwrap())):t instanceof tr?tr.create(ks(t.unwrap())):t instanceof er?er.create(t.items.map(e=>ks(e))):t}var ut=class t extends X{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=ie.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==L.object){let u=this._getOrReturnCtx(e);return D(u,{code:O.invalid_type,expected:L.object,received:u.parsedType}),H}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof zt&&this._def.unknownKeys==="strip"))for(let u in s.data)o.includes(u)||a.push(u);let c=[];for(let u of o){let l=i[u],p=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new It(s,p,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof zt){let u=this._def.unknownKeys;if(u==="passthrough")for(let l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(D(s,{code:O.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let l of a){let p=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new It(s,p,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let u=[];for(let l of c){let p=await l.key,m=await l.value;u.push({key:p,value:m,alwaysSet:l.alwaysSet})}return u}).then(u=>Be.mergeObjectSync(n,u)):Be.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return q.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let s=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:q.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:z.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of ie.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of ie.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return ks(this)}partial(e){let r={};for(let n of ie.objectKeys(this.shape)){let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of ie.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof At;)i=i._def.innerType;r[n]=i}return new t({...this._def,shape:()=>r})}keyof(){return fS(ie.objectKeys(this.shape))}};ut.create=(t,e)=>new ut({shape:()=>t,unknownKeys:"strip",catchall:zt.create(),typeName:z.ZodObject,...Y(e)});ut.strictCreate=(t,e)=>new ut({shape:()=>t,unknownKeys:"strict",catchall:zt.create(),typeName:z.ZodObject,...Y(e)});ut.lazycreate=(t,e)=>new ut({shape:t,unknownKeys:"strip",catchall:zt.create(),typeName:z.ZodObject,...Y(e)});var zn=class extends X{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(a=>new Ye(a.ctx.common.issues));return D(r,{code:O.invalid_union,unionErrors:o}),H}if(r.common.async)return Promise.all(n.map(async i=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i,o=[];for(let c of n){let u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let a=o.map(c=>new Ye(c));return D(r,{code:O.invalid_union,unionErrors:a}),H}}get options(){return this._def.options}};zn.create=(t,e)=>new zn({options:t,typeName:z.ZodUnion,...Y(e)});var mr=t=>t instanceof Wn?mr(t.schema):t instanceof Pt?mr(t.innerType()):t instanceof Kn?[t.value]:t instanceof Qn?t.options:t instanceof Yn?ie.objectValues(t.enum):t instanceof Jn?mr(t._def.innerType):t instanceof Hn?[void 0]:t instanceof Vn?[null]:t instanceof At?[void 0,...mr(t.unwrap())]:t instanceof tr?[null,...mr(t.unwrap())]:t instanceof Zi||t instanceof Xn?mr(t.unwrap()):t instanceof Zn?mr(t._def.innerType):[],Za=class t extends X{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==L.object)return D(r,{code:O.invalid_type,expected:L.object,received:r.parsedType}),H;let n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(D(r,{code:O.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),H)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let i of r){let o=mr(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new t({typeName:z.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Y(n)})}};function af(t,e){let r=Xt(t),n=Xt(e);if(t===e)return{valid:!0,data:t};if(r===L.object&&n===L.object){let s=ie.objectKeys(e),i=ie.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(let a of i){let c=af(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===L.array&&n===L.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<t.length;i++){let o=t[i],a=e[i],c=af(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===L.date&&n===L.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Gn=class extends X{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(Ya(i)||Ya(o))return H;let a=af(i.value,o.value);return a.valid?((Ja(i)||Ja(o))&&r.dirty(),{status:r.value,value:a.data}):(D(n,{code:O.invalid_intersection_types}),H)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Gn.create=(t,e,r)=>new Gn({left:t,right:e,typeName:z.ZodIntersection,...Y(r)});var er=class t extends X{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==L.array)return D(n,{code:O.invalid_type,expected:L.array,received:n.parsedType}),H;if(n.data.length<this._def.items.length)return D(n,{code:O.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),H;!this._def.rest&&n.data.length>this._def.items.length&&(D(n,{code:O.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((o,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new It(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Be.mergeArray(r,o)):Be.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};er.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new er({items:t,typeName:z.ZodTuple,rest:null,...Y(e)})};var Xa=class t extends X{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==L.object)return D(n,{code:O.invalid_type,expected:L.object,received:n.parsedType}),H;let s=[],i=this._def.keyType,o=this._def.valueType;for(let a in n.data)s.push({key:i._parse(new It(n,a,n.path,a)),value:o._parse(new It(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Be.mergeObjectAsync(r,s):Be.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof X?new t({keyType:e,valueType:r,typeName:z.ZodRecord,...Y(n)}):new t({keyType:Vr.create(),valueType:e,typeName:z.ZodRecord,...Y(r)})}},Ls=class extends X{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==L.map)return D(n,{code:O.invalid_type,expected:L.map,received:n.parsedType}),H;let s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new It(n,a,n.path,[u,"key"])),value:i._parse(new It(n,c,n.path,[u,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of o){let u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return H;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let c of o){let u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return H;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}};Ls.create=(t,e,r)=>new Ls({valueType:e,keyType:t,typeName:z.ZodMap,...Y(r)});var Fs=class t extends X{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==L.set)return D(n,{code:O.invalid_type,expected:L.set,received:n.parsedType}),H;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(D(n,{code:O.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(D(n,{code:O.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let i=this._def.valueType;function o(c){let u=new Set;for(let l of c){if(l.status==="aborted")return H;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}let a=[...n.data.values()].map((c,u)=>i._parse(new It(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new t({...this._def,minSize:{value:e,message:q.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:q.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Fs.create=(t,e)=>new Fs({valueType:t,minSize:null,maxSize:null,typeName:z.ZodSet,...Y(e)});var ec=class t extends X{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==L.function)return D(r,{code:O.invalid_type,expected:L.function,received:r.parsedType}),H;function n(a,c){return Ji({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Os(),hr].filter(u=>!!u),issueData:{code:O.invalid_arguments,argumentsError:c}})}function s(a,c){return Ji({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Os(),hr].filter(u=>!!u),issueData:{code:O.invalid_return_type,returnTypeError:c}})}let i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof Gr){let a=this;return Je(async function(...c){let u=new Ye([]),l=await a._def.args.parseAsync(c,i).catch(h=>{throw u.addIssue(n(c,h)),u}),p=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(p,i).catch(h=>{throw u.addIssue(s(p,h)),u})})}else{let a=this;return Je(function(...c){let u=a._def.args.safeParse(c,i);if(!u.success)throw new Ye([n(c,u.error)]);let l=Reflect.apply(o,this,u.data),p=a._def.returns.safeParse(l,i);if(!p.success)throw new Ye([s(l,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:er.create(e).rest(gr.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||er.create([]).rest(gr.create()),returns:r||gr.create(),typeName:z.ZodFunction,...Y(n)})}},Wn=class extends X{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Wn.create=(t,e)=>new Wn({getter:t,typeName:z.ZodLazy,...Y(e)});var Kn=class extends X{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return D(r,{received:r.data,code:O.invalid_literal,expected:this._def.value}),H}return{status:"valid",value:e.data}}get value(){return this._def.value}};Kn.create=(t,e)=>new Kn({value:t,typeName:z.ZodLiteral,...Y(e)});function fS(t,e){return new Qn({values:t,typeName:z.ZodEnum,...Y(e)})}var Qn=class t extends X{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return D(r,{expected:ie.joinValues(n),received:r.parsedType,code:O.invalid_type}),H}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return D(r,{received:r.data,code:O.invalid_enum_value,options:n}),H}return Je(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Qn.create=fS;var Yn=class extends X{_parse(e){let r=ie.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==L.string&&n.parsedType!==L.number){let s=ie.objectValues(r);return D(n,{expected:ie.joinValues(s),received:n.parsedType,code:O.invalid_type}),H}if(this._cache||(this._cache=new Set(ie.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let s=ie.objectValues(r);return D(n,{received:n.data,code:O.invalid_enum_value,options:s}),H}return Je(e.data)}get enum(){return this._def.values}};Yn.create=(t,e)=>new Yn({values:t,typeName:z.ZodNativeEnum,...Y(e)});var Gr=class extends X{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==L.promise&&r.common.async===!1)return D(r,{code:O.invalid_type,expected:L.promise,received:r.parsedType}),H;let n=r.parsedType===L.promise?r.data:Promise.resolve(r.data);return Je(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Gr.create=(t,e)=>new Gr({type:t,typeName:z.ZodPromise,...Y(e)});var Pt=class extends X{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===z.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{D(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){let o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async a=>{if(r.value==="aborted")return H;let c=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return c.status==="aborted"?H:c.status==="dirty"?qn(c.value):r.value==="dirty"?qn(c.value):c});{if(r.value==="aborted")return H;let a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?H:a.status==="dirty"?qn(a.value):r.value==="dirty"?qn(a.value):a}}if(s.type==="refinement"){let o=a=>{let c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?H:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?H:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Hr(o))return H;let a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Hr(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):H);ie.assertNever(s)}};Pt.create=(t,e,r)=>new Pt({schema:t,typeName:z.ZodEffects,effect:e,...Y(r)});Pt.createWithPreprocess=(t,e,r)=>new Pt({schema:e,effect:{type:"preprocess",transform:t},typeName:z.ZodEffects,...Y(r)});var At=class extends X{_parse(e){return this._getType(e)===L.undefined?Je(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};At.create=(t,e)=>new At({innerType:t,typeName:z.ZodOptional,...Y(e)});var tr=class extends X{_parse(e){return this._getType(e)===L.null?Je(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};tr.create=(t,e)=>new tr({innerType:t,typeName:z.ZodNullable,...Y(e)});var Jn=class extends X{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===L.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Jn.create=(t,e)=>new Jn({innerType:t,typeName:z.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Y(e)});var Zn=class extends X{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ns(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ye(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ye(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Zn.create=(t,e)=>new Zn({innerType:t,typeName:z.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Y(e)});var qs=class extends X{_parse(e){if(this._getType(e)!==L.nan){let n=this._getOrReturnCtx(e);return D(n,{code:O.invalid_type,expected:L.nan,received:n.parsedType}),H}return{status:"valid",value:e.data}}};qs.create=t=>new qs({typeName:z.ZodNaN,...Y(t)});var m1=Symbol("zod_brand"),Zi=class extends X{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Xi=class t extends X{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?H:i.status==="dirty"?(r.dirty(),qn(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?H:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:z.ZodPipeline})}},Xn=class extends X{_parse(e){let r=this._def.innerType._parse(e),n=s=>(Hr(s)&&(s.value=Object.freeze(s.value)),s);return Ns(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};Xn.create=(t,e)=>new Xn({innerType:t,typeName:z.ZodReadonly,...Y(e)});function cS(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function pS(t,e={},r){return t?zr.create().superRefine((n,s)=>{let i=t(n);if(i instanceof Promise)return i.then(o=>{if(!o){let a=cS(e,n),c=a.fatal??r??!0;s.addIssue({code:"custom",...a,fatal:c})}});if(!i){let o=cS(e,n),a=o.fatal??r??!0;s.addIssue({code:"custom",...o,fatal:a})}}):zr.create()}var g1={object:ut.lazycreate},z;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(z||(z={}));var y1=(t,e={message:`Input not instance of ${t.name}`})=>pS(r=>r instanceof t,e),hS=Vr.create,mS=Un.create,S1=qs.create,_1=$n.create,gS=jn.create,E1=Bn.create,w1=Ds.create,b1=Hn.create,v1=Vn.create,x1=zr.create,R1=gr.create,T1=zt.create,C1=Ms.create,A1=yr.create,I1=ut.create,P1=ut.strictCreate,O1=zn.create,N1=Za.create,k1=Gn.create,D1=er.create,M1=Xa.create,L1=Ls.create,F1=Fs.create,q1=ec.create,U1=Wn.create,$1=Kn.create,j1=Qn.create,B1=Yn.create,H1=Gr.create,V1=Pt.create,z1=At.create,G1=tr.create,W1=Pt.createWithPreprocess,K1=Xi.create,Q1=()=>hS().optional(),Y1=()=>mS().optional(),J1=()=>gS().optional(),Z1={string:(t=>Vr.create({...t,coerce:!0})),number:(t=>Un.create({...t,coerce:!0})),boolean:(t=>jn.create({...t,coerce:!0})),bigint:(t=>$n.create({...t,coerce:!0})),date:(t=>Bn.create({...t,coerce:!0}))};var X1=H;var Wr=class extends Error{code;statusCode;details;constructor(e,r,n=400,s){super(r),this.code=e,this.statusCode=n,this.details=s,Object.setPrototypeOf(this,new.target.prototype)}},eo=class extends Wr{constructor(e="Unauthorized"){super("UNAUTHORIZED",e,401)}},Us=class extends Wr{constructor(e="Forbidden"){super("FORBIDDEN",e,403)}};var tc=class extends Wr{constructor(e="Validation failed",r){super("VALIDATION_ERROR",e,422,r)}},yS=t=>t instanceof Wr?t:t instanceof Error?new Wr("INTERNAL_SERVER_ERROR",t.message||"Internal server error",500):new Wr("INTERNAL_SERVER_ERROR","Internal server error",500);var rc=(t,e,r,n)=>{let s={level:t,message:e,timestamp:new Date().toISOString(),...r};return JSON.stringify(n!==void 0?{...s,meta:n}:s)},ts={debug(t,e,r){console.debug(rc("debug",t,e,r))},info(t,e,r){console.info(rc("info",t,e,r))},warn(t,e,r){console.warn(rc("warn",t,e,r))},error(t,e,r){console.error(rc("error",t,e,r))}};var Qd=v(fP());var Vt=v(Qy(),1),lre=Vt.default.Client,eN=Vt.default.Pool,dre=Vt.default.Connection,fre=Vt.default.types,pre=Vt.default.Query,hre=Vt.default.DatabaseError,mre=Vt.default.escapeIdentifier,gre=Vt.default.escapeLiteral,yre=Vt.default.Result,Sre=Vt.default.TypeOverrides,_re=Vt.default.defaults;var w8=process.env.AWS_REGION||process.env.COGNITO_REGION||"ap-southeast-2",b8=new Qd.SecretsManagerClient({region:w8}),Gd=null,Wd=null,Kd=null,v8=()=>{let t=process.env.DB_HOST,e=process.env.DB_USER,r=process.env.DB_PASS,n=process.env.DB_NAME;if(!t||!e||!r||!n)return null;let s=process.env.DB_SSL,i=s?s.toLowerCase()==="true":void 0;return{host:t,port:Number(process.env.DB_PORT||5432),username:e,password:r,dbname:n,ssl:i}},x8=t=>{if(!t)throw new Error("Database secret string is empty");let e=JSON.parse(t);if(!e.host||!e.username||!e.password||!e.dbname)throw new Error("Database secret is missing required properties");return{host:e.host,port:Number(e.port||5432),username:e.username,password:e.password,dbname:e.dbname,ssl:typeof e.ssl=="boolean"?e.ssl:void 0}},R8=async()=>{if(Kd&&Kd.expiresAt>Date.now())return Kd.value;let t=process.env.DB_SECRET_ARN;if(!t)throw new Error("DB_SECRET_ARN environment variable is not set");let e=new Qd.GetSecretValueCommand({SecretId:t}),r=await b8.send(e),n=x8(r.SecretString);return Kd={value:n,expiresAt:Date.now()+Number(process.env.DB_SECRET_CACHE_MS||6e4)},n},T8=async()=>{let t=v8()??await R8(),e=Number(process.env.DB_POOL_MAX||10),r=typeof t.ssl=="boolean"?t.ssl?{rejectUnauthorized:!1}:void 0:process.env.DB_SSL?.toLowerCase()==="true"?{rejectUnauthorized:!1}:void 0,n=new eN({host:t.host,port:t.port,user:t.username,password:t.password,database:t.dbname,max:e,idleTimeoutMillis:Number(process.env.DB_IDLE_TIMEOUT_MS||3e4),connectionTimeoutMillis:Number(process.env.DB_CONNECT_TIMEOUT_MS||5e3),ssl:r});return n.on("error",s=>{ts.error("Unexpected database error",void 0,{err:s})}),n},C8=async()=>(Gd||(Wd||(Wd=T8().then(t=>(Gd=t,t)).finally(()=>{Wd=null})),Gd=await Wd),Gd),Ka=async(t,e)=>{let r=await C8();return typeof t=="string"?r.query(t,e):r.query(t)};var tN=t=>({userId:t.user_id,cognitoSub:t.cognito_sub,email:t.email,displayName:t.display_name,teamId:t.team_id}),Yd=class{async findByCognitoSub(e){let r=await Ka(`
      SELECT user_id, cognito_sub, email, display_name, team_id
      FROM users
      WHERE cognito_sub = $1
      LIMIT 1
      `,[e]);return r.rowCount===0?null:tN(r.rows[0])}async upsertFromClaims(e){let r=await Ka(`
      INSERT INTO users (cognito_sub, email, display_name, team_id)
      VALUES ($1, $2, $3, $4)
      ON CONFLICT (cognito_sub) DO UPDATE
      SET
        email = COALESCE(EXCLUDED.email, users.email),
        display_name = COALESCE(EXCLUDED.display_name, users.display_name),
        team_id = COALESCE(EXCLUDED.team_id, users.team_id),
        updated_at = CURRENT_TIMESTAMP
      RETURNING user_id, cognito_sub, email, display_name, team_id
      `,[e.cognitoSub,e.email??null,e.displayName??null,e.teamId??null]);return tN(r.rows[0])}};var A8=new Yd,I8=t=>{let e=t.trim();if(!e)return[];if(e.startsWith("[")&&e.endsWith("]"))try{let r=JSON.parse(e);if(Array.isArray(r))return r.filter(n=>typeof n=="string").map(n=>n.trim()).filter(n=>n.length>0)}catch{}return e.includes(",")?e.split(",").map(r=>r.trim()).filter(r=>r.length>0):[e]},P8=(t,e)=>{if(typeof e=="string")switch(t){case"cognito:groups":case"custom:roles":case"roles":return I8(e);default:return e}return e},O8=t=>{let r=t.requestContext.authorizer?.jwt?.claims;if(!r)throw new eo("Missing JWT claims from authorizer");let n=Object.entries(r).reduce((s,[i,o])=>(s[i]=P8(i,o),s),{});if(!n.sub||typeof n.sub!="string")throw new eo("Token missing subject");return n},rN=async t=>{let e=O8(t);ts.debug("JWT claims received",{sub:e.sub});let r=typeof e.email=="string"?e.email:typeof e["custom:email"]=="string"?e["custom:email"]:null,n=[],s=R=>{if(R){if(Array.isArray(R)){R.filter(C=>typeof C=="string"&&C.trim().length>0).forEach(C=>n.push(C.trim()));return}typeof R=="string"&&R.trim().length>0&&n.push(R.trim())}};s(e["cognito:groups"]),s(e["custom:roles"]),s(e.roles);let i=R=>R.trim().toUpperCase().includes("ADMIN")?"ADMIN":"EMPLOYEE",o=Array.from(new Set(n.map(i)));o.length===0&&o.push("EMPLOYEE");let a=typeof e["custom:display_name"]=="string"&&e["custom:display_name"]||typeof e.name=="string"&&e.name||typeof e.preferred_username=="string"&&e.preferred_username||typeof e["cognito:username"]=="string"&&e["cognito:username"]||r||e.sub,c=e["custom:team_id"]??e.team_id,u=typeof c=="string"?Number(c):typeof c=="number"?c:Number.NaN,l=Number.isFinite(u)?Number(u):null,p=await A8.upsertFromClaims({cognitoSub:e.sub,email:r,displayName:a,teamId:l??void 0}),m=p.teamId??l??null,h=p.email??r??void 0,y=p.displayName??a??h,x={userId:p.userId,email:h??e.sub,displayName:y,teamId:m,roles:o,sub:e.sub};return ts.debug("User roles resolved",{userId:x.userId,roles:x.roles}),x},nN=(t,e)=>{if(!(Array.isArray(e)?e:[e]).some(s=>t.roles.includes(s)))throw new Us("User does not have sufficient privileges")};var Jd=(process.env.ALLOWED_ORIGINS||"").split(",").map(t=>t.trim()).filter(t=>t.length>0),sN={"Content-Type":"application/json","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Authorization,Content-Type,Idempotency-Key,X-Amz-Date,X-Api-Key,X-Amz-Security-Token","Access-Control-Allow-Methods":"GET,POST,PATCH,OPTIONS"},iN=t=>t?Jd.length===0||Jd.includes(t)?t:Jd[0]:Jd[0]||"*",Zd=(t,e,r,n)=>({statusCode:t,headers:{...sN,"Access-Control-Allow-Origin":iN(r),...n},body:JSON.stringify(e)}),oN=(t,e,r,n)=>({statusCode:t,headers:{...sN,"Access-Control-Allow-Origin":iN(r),...n},body:JSON.stringify(e)});var N8=t=>t.headers?.origin||t.headers?.Origin,aN=(t,e={requireAuth:!0})=>async(r,n)=>{let s=N8(r),i=null;try{e.requireAuth!==!1&&(i=await rN(r),e.allowedRoles&&nN(i,e.allowedRoles));let o=await t({event:r,context:n,user:i});return o&&typeof o=="object"&&"statusCode"in o?o:Zd(200,o,s)}catch(o){let a=yS(o);return ts.error("Handler failed",{requestId:n.awsRequestId,userId:i?.userId},{error:o}),oN(a.statusCode,{code:a.code,message:a.message,details:a.details,requestId:n.awsRequestId},s)}};var k8=(t,e)=>{try{return t.parse(e)}catch(r){throw r instanceof Ye?new tc("Validation failed",{issues:r.issues}):r}};var cN=(t,e)=>k8(t,e??{});var Xd=class{async getLeaveSummary(e){let r=[],n=1,s="WHERE 1=1";e.from&&(s+=` AND lr.start_date >= $${n++}`,r.push(e.from)),e.to&&(s+=` AND lr.end_date <= $${n++}`,r.push(e.to)),e.teamId&&(s+=` AND lr.user_team_id = $${n++}`,r.push(e.teamId));let i=`
      SELECT
        lp.policy_id,
        lp.name AS policy_name,
        COUNT(*)::INT AS total_requests,
        SUM(CASE WHEN lr.status = 'PENDING' THEN 1 ELSE 0 END)::INT AS pending,
        SUM(CASE WHEN lr.status = 'APPROVED' THEN 1 ELSE 0 END)::INT AS approved,
        SUM(CASE WHEN lr.status = 'REJECTED' THEN 1 ELSE 0 END)::INT AS rejected,
        SUM(CASE WHEN lr.status = 'CANCELLED' THEN 1 ELSE 0 END)::INT AS cancelled,
        SUM(
          CASE WHEN lr.status = 'APPROVED'
            THEN CASE WHEN lr.half_day THEN 0.5 ELSE (lr.end_date - lr.start_date) + 1 END
            ELSE 0
          END
        )::FLOAT AS approved_days
      FROM leave_requests lr
      INNER JOIN leave_policies lp ON lr.policy_id = lp.policy_id
      ${s}
      GROUP BY lp.policy_id, lp.name
      ORDER BY lp.name ASC
    `,a=(await Ka(i,r)).rows.map(u=>({policyId:u.policy_id,policyName:u.policy_name,totalRequests:u.total_requests,pending:u.pending,approved:u.approved,rejected:u.rejected,cancelled:u.cancelled,approvedDays:u.approved_days})),c=a.reduce((u,l)=>({totalRequests:u.totalRequests+l.totalRequests,pending:u.pending+l.pending,approved:u.approved+l.approved,rejected:u.rejected+l.rejected,cancelled:u.cancelled+l.cancelled,approvedDays:u.approvedDays+l.approvedDays}),{totalRequests:0,pending:0,approved:0,rejected:0,cancelled:0,approvedDays:0});return{range:{from:e.from,to:e.to},policies:a,totals:c}}};var ef=class{constructor(e=new Xd){this.repository=e}async getLeaveSummary(e,r){if(!e.roles.includes("ADMIN"))throw new Us("Only administrators can access leave summary reports");return this.repository.getLeaveSummary(r)}};var D8=new ef,M8=es.object({from:es.string().optional(),to:es.string().optional(),team_id:es.string().regex(/^\d+$/).optional()}),L8=aN(async({event:t,user:e})=>{if(!e)throw new Error("User context missing");let r=t.headers?.origin||t.headers?.Origin,n=cN(M8,t.queryStringParameters),s=await D8.getLeaveSummary(e,{from:n.from,to:n.to,teamId:n.team_id?Number(n.team_id):void 0});return Zd(200,s,r)},{allowedRoles:["ADMIN"]});0&&(module.exports={handler});
