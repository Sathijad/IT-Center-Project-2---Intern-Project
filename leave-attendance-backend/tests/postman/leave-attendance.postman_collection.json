{
  "info": {
    "name": "Serverless Leave & Attendance API",
    "description": "Postman collection for Phase 2 serverless leave, attendance, integrations, and reporting endpoints.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "invoke_url",
      "value": "https://your-api-id.execute-api.ap-southeast-2.amazonaws.com",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "url": {
          "raw": "{{invoke_url}}/healthz",
          "host": ["{{invoke_url}}"],
          "path": ["healthz"]
        }
      }
    },
    {
      "name": "Leave",
      "item": [
        {
          "name": "Get Leave Balance (Self)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{invoke_url}}/api/v1/leave/balance",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "leave", "balance"]
            }
          }
        },
        {
          "name": "Get Leave Balance (Admin for User 42)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{invoke_url}}/api/v1/leave/balance?user_id=42",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "leave", "balance"],
              "query": [
                { "key": "user_id", "value": "42" }
              ]
            }
          }
        },
        {
          "name": "List Leave Requests",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{invoke_url}}/api/v1/leave/requests?page=1&size=25&sort=created_at,desc",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "leave", "requests"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "size", "value": "25" },
                { "key": "sort", "value": "created_at,desc" }
              ]
            }
          }
        },
        {
          "name": "Create Leave Request",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"policy_id\": 1,\n  \"start_date\": \"2025-05-12\",\n  \"end_date\": \"2025-05-14\",\n  \"half_day\": false,\n  \"reason\": \"Family trip\"\n}"
            },
            "url": {
              "raw": "{{invoke_url}}/api/v1/leave/requests",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "leave", "requests"]
            }
          }
        },
        {
          "name": "Approve Leave Request (Admin)",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"APPROVE\"\n}"
            },
            "url": {
              "raw": "{{invoke_url}}/api/v1/leave/requests/{{leave_request_id}}",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "leave", "requests", "{{leave_request_id}}"]
            }
          }
        },
        {
          "name": "Cancel Leave Request (Employee)",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"CANCEL\",\n  \"notes\": \"Need to reschedule\"\n}"
            },
            "url": {
              "raw": "{{invoke_url}}/api/v1/leave/requests/{{leave_request_id}}",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "leave", "requests", "{{leave_request_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Attendance",
      "item": [
        {
          "name": "List Attendance Logs",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{invoke_url}}/api/v1/attendance?page=1&size=25&from=2025-05-01&to=2025-05-31",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "attendance"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "size", "value": "25" },
                { "key": "from", "value": "2025-05-01" },
                { "key": "to", "value": "2025-05-31" }
              ]
            }
          }
        },
        {
          "name": "Clock In",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"latitude\": -37.8136,\n  \"longitude\": 144.9631,\n  \"source\": \"mobile\"\n}"
            },
            "url": {
              "raw": "{{invoke_url}}/api/v1/attendance/clock-in",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "attendance", "clock-in"]
            }
          }
        },
        {
          "name": "Clock Out",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ }"
            },
            "url": {
              "raw": "{{invoke_url}}/api/v1/attendance/clock-out",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "attendance", "clock-out"]
            }
          }
        }
      ]
    },
    {
      "name": "Integrations",
      "item": [
        {
          "name": "Enqueue MS Graph Sync (Admin)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"request_id\": {{leave_request_id}}\n}"
            },
            "url": {
              "raw": "{{invoke_url}}/api/v1/integrations/msgraph/sync",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "integrations", "msgraph", "sync"]
            }
          }
        }
      ]
    },
    {
      "name": "Reports",
      "item": [
        {
          "name": "Leave Summary (Admin)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{invoke_url}}/api/v1/reports/leave-summary?from=2025-01-01&to=2025-12-31",
              "host": ["{{invoke_url}}"],
              "path": ["api", "v1", "reports", "leave-summary"],
              "query": [
                { "key": "from", "value": "2025-01-01" },
                { "key": "to", "value": "2025-12-31" }
              ]
            }
          }
        }
      ]
    }
  ]
}

